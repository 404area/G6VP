/*! For license information please see index.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("G2Plot"),require("GISDK"),require("Graphin"),require("React"),require("ReactDOM"),require("_"),require("antd")):"function"==typeof define&&define.amd?define(["G2Plot","GISDK","Graphin","React","ReactDOM","_","antd"],t):"object"==typeof exports?exports.GI_ASSETS_ALGORITHM=t(require("G2Plot"),require("GISDK"),require("Graphin"),require("React"),require("ReactDOM"),require("_"),require("antd")):e.GI_ASSETS_ALGORITHM=t(e.G2Plot,e.GISDK,e.Graphin,e.React,e.ReactDOM,e._,e.antd)}(self,((e,t,n,r,o,i,a)=>(()=>{var l={949:(e,t,n)=>{"use strict";n.d(t,{Z:()=>he});var r=n(517);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=n(537);function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=n(24),c=n.n(s),u=n(608),d=n.n(u);const h=(0,s.createContext)({});function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function v(e){return e<=1?"".concat(100*Number(e),"%"):e}function g(e){return 1===e.length?"0"+e:String(e)}function m(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function y(e){return b(e)/255}function b(e){return parseInt(e,16)}var C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function w(e){var t,n,r,o={r:0,g:0,b:0},i=1,a=null,l=null,s=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(C[e])e=C[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=L.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=L.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=L.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=L.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=L.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=L.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=L.hex8.exec(e))?{r:b(n[1]),g:b(n[2]),b:b(n[3]),a:y(n[4]),format:t?"name":"hex8"}:(n=L.hex6.exec(e))?{r:b(n[1]),g:b(n[2]),b:b(n[3]),format:t?"name":"hex"}:(n=L.hex4.exec(e))?{r:b(n[1]+n[1]),g:b(n[2]+n[2]),b:b(n[3]+n[3]),a:y(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=L.hex3.exec(e))&&{r:b(n[1]+n[1]),g:b(n[2]+n[2]),b:b(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(O(e.r)&&O(e.g)&&O(e.b)?(t=e.r,n=e.g,r=e.b,o={r:255*p(t,255),g:255*p(n,255),b:255*p(r,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):O(e.h)&&O(e.s)&&O(e.v)?(a=v(e.s),l=v(e.v),o=function(e,t,n){e=6*p(e,360),t=p(t,100),n=p(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),l=n*(1-(1-o)*t),s=r%6;return{r:255*[n,a,i,i,l,n][s],g:255*[l,n,n,a,i,i][s],b:255*[i,i,l,n,n,a][s]}}(e.h,a,l),c=!0,u="hsv"):O(e.h)&&O(e.s)&&O(e.l)&&(a=v(e.s),s=v(e.l),o=function(e,t,n){var r,o,i;if(e=p(e,360),t=p(t,100),n=p(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=m(l,a,e+1/3),o=m(l,a,e),i=m(l,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,a,s),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(i),{ok:c,format:e.format||u,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:i}}var x="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),E="[\\s|\\(]+(".concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")\\s*\\)?"),S="[\\s|\\(]+(".concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")\\s*\\)?"),L={CSS_UNIT:new RegExp(x),rgb:new RegExp("rgb"+E),rgba:new RegExp("rgba"+S),hsl:new RegExp("hsl"+E),hsla:new RegExp("hsla"+S),hsv:new RegExp("hsv"+E),hsva:new RegExp("hsva"+S),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function O(e){return Boolean(L.CSS_UNIT.exec(String(e)))}var I=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function _(e){var t=function(e,t,n){e=p(e,255),t=p(t,255),n=p(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,l=r-o,s=0===r?0:l/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function T(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var o=[g(Math.round(e).toString(16)),g(Math.round(t).toString(16)),g(Math.round(n).toString(16))];return o.join("")}(t,n,r))}function A(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function M(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function N(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function R(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function D(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=w(e),o=5;o>0;o-=1){var i=_(r),a=T(w({h:M(i,o,!0),s:N(i,o,!0),v:R(i,o,!0)}));n.push(a)}n.push(T(r));for(var l=1;l<=4;l+=1){var s=_(r),c=T(w({h:M(s,l),s:N(s,l),v:R(s,l)}));n.push(c)}return"dark"===t.theme?I.map((function(e){var r=e.index,o=e.opacity;return T(A(w(t.backgroundColor||"#141414"),w(n[r]),100*o))})):n}var k={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},B={},P={};Object.keys(k).forEach((function(e){B[e]=D(k[e]),B[e].primary=B[e][5],P[e]=D(k[e],{theme:"dark",backgroundColor:"#141414"}),P[e].primary=P[e][5]})),B.red,B.volcano,B.gold,B.orange,B.yellow,B.lime,B.green,B.cyan,B.blue,B.geekblue,B.purple,B.magenta,B.grey;var F={};function j(e,t){}const z=function(e,t){!function(e,t,n){t||F[n]||(e(!1,n),F[n]=!0)}(j,e,t)};function G(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var H="data-rc-order",W="rc-util-key",U=new Map;function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):W}function Y(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function $(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function X(e){return Array.from((U.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!G())return null;var n=t.csp,r=t.prepend,o=document.createElement("style");o.setAttribute(H,$(r)),(null==n?void 0:n.nonce)&&(o.nonce=null==n?void 0:n.nonce),o.innerHTML=e;var i=Y(t),a=i.firstChild;if(r){if("queue"===r){var l=X(i).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(H))}));if(l.length)return i.insertBefore(o,l[l.length-1].nextSibling),o}i.insertBefore(o,a)}else i.appendChild(o);return o}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Y(t);return X(n).find((function(n){return n.getAttribute(V(t))===e}))}function Z(e,t){var n=U.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=q("",t),o=r.parentNode;U.set(e,o),o.removeChild(r)}}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Y(n);Z(r,n);var o,i,a,l=K(t,n);if(l)return(null===(o=n.csp)||void 0===o?void 0:o.nonce)&&l.nonce!==(null===(i=n.csp)||void 0===i?void 0:i.nonce)&&(l.nonce=null===(a=n.csp)||void 0===a?void 0:a.nonce),l.innerHTML!==e&&(l.innerHTML=e),l;var s=q(e,n);return s.setAttribute(V(n),t),s}function J(e){return"object"===f(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===f(e.icon)||"function"==typeof e.icon)}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return"class"===n?(t.className=r,delete t.class):t[n]=r,t}),{})}function te(e,t,n){return n?c().createElement(e.tag,(0,r.Z)((0,r.Z)({key:t},ee(e.attrs)),n),(e.children||[]).map((function(n,r){return te(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):c().createElement(e.tag,(0,r.Z)({key:t},ee(e.attrs)),(e.children||[]).map((function(n,r){return te(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function ne(e){return D(e)[0]}function re(e){return e?Array.isArray(e)?e:[e]:[]}var oe="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",ie=["icon","className","onClick","style","primaryColor","secondaryColor"],ae={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},le=function(e){var t,n,o=e.icon,i=e.className,a=e.onClick,c=e.style,u=e.primaryColor,d=e.secondaryColor,f=l(e,ie),p=ae;if(u&&(p={primaryColor:u,secondaryColor:d||ne(u)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=(0,s.useContext)(h).csp;(0,s.useEffect)((function(){Q(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=J(o),n="icon should be icon definiton, but got ".concat(o),z(t,"[@ant-design/icons] ".concat(n)),!J(o))return null;var v=o;return v&&"function"==typeof v.icon&&(v=(0,r.Z)((0,r.Z)({},v),{},{icon:v.icon(p.primaryColor,p.secondaryColor)})),te(v.icon,"svg-".concat(v.name),(0,r.Z)({className:i,onClick:a,style:c,"data-icon":v.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f))};le.displayName="IconReact",le.getTwoToneColors=function(){return(0,r.Z)({},ae)},le.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;ae.primaryColor=t,ae.secondaryColor=n||ne(t),ae.calculated=!!n};const se=le;function ce(e){var t=i(re(e),2),n=t[0],r=t[1];return se.setTwoToneColors({primaryColor:n,secondaryColor:r})}var ue=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ce("#1890ff");var de=s.forwardRef((function(e,t){var n,o=e.className,c=e.icon,u=e.spin,f=e.rotate,p=e.tabIndex,v=e.onClick,g=e.twoToneColor,m=l(e,ue),y=s.useContext(h).prefixCls,b=void 0===y?"anticon":y,C=d()(b,(n={},(0,a.Z)(n,"".concat(b,"-").concat(c.name),!!c.name),(0,a.Z)(n,"".concat(b,"-spin"),!!u||"loading"===c.name),n),o),w=p;void 0===w&&v&&(w=-1);var x=f?{msTransform:"rotate(".concat(f,"deg)"),transform:"rotate(".concat(f,"deg)")}:void 0,E=i(re(g),2),S=E[0],L=E[1];return s.createElement("span",(0,r.Z)((0,r.Z)({role:"img","aria-label":c.name},m),{},{ref:t,tabIndex:w,onClick:v,className:C}),s.createElement(se,{icon:c,primaryColor:S,secondaryColor:L,style:x}))}));de.displayName="AntdIcon",de.getTwoToneColor=function(){var e=se.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},de.setTwoToneColor=ce;const he=de},562:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(517),o=n(24);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var a=n(949),l=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="DeleteOutlined";const s=o.forwardRef(l)},565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(517),o=n(24);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};var a=n(949),l=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="ReloadOutlined";const s=o.forwardRef(l)},548:(e,t)=>{"use strict";t.EL=void 0,t.EL=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)}},584:(e,t,n)=>{"use strict";n.d(t,{dZ:()=>ch});var r=n(926),o=n(721),i=n(24),a=n.n(i),l=n(314),s=n.n(l),c=n(562),u=n(565);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const h={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};var f={lang:d({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:d({},h)};f.lang.ok="确定";var p="${label}不是一个有效的${type}";const v={locale:"zh-cn",Pagination:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},DatePicker:f,TimePicker:h,Calendar:f,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:p,method:p,array:p,object:p,number:p,date:p,boolean:p,integer:p,float:p,regexp:p,email:p,url:p,hex:p},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}},g={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var m={lang:d({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:d({},g)},y="${label} is not a valid ${type}";const b={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:m,TimePicker:g,Calendar:m,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:y,method:y,array:y,object:y,number:y,date:y,boolean:y,integer:y,float:y,regexp:y,email:y,url:y,hex:y},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e=n.hmd(e);var C=Object.defineProperty,w=Object.defineProperties,x=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&O(e,n,t[n]);if(E)for(var n of E(t))L.call(t,n)&&O(e,n,t[n]);return e},_=(e,t)=>w(e,x(t)),T=(e,t)=>{var n={};for(var r in e)S.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&E)for(var r of E(e))t.indexOf(r)<0&&L.call(e,r)&&(n[r]=e[r]);return n};const A={tooltip:{showTooltip:!0,autoAdjustBoundary:"body",operation:{hiddenColumns:!0,trend:!1,sort:!0}},showDefaultHeaderActionIcon:!0},M=()=>[{name:(0,r.agQ)("升序"),value:"ASC"},{name:(0,r.agQ)("降序"),value:"DESC"}],N=()=>[{label:(0,r.agQ)("首字母"),value:"sortMethod"},{label:(0,r.agQ)("手动排序"),value:"sortBy"},{label:(0,r.agQ)("其他字段"),value:"sortByMeasure",children:[]}],R=e=>e?`s2-strategy-sheet-tooltip-${e}`:"s2-strategy-sheet-tooltip";var D="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,k="object"==typeof self&&self&&self.Object===Object&&self,B=D||k||Function("return this")(),P=B.Symbol,F=Object.prototype,j=F.hasOwnProperty,z=F.toString,G=P?P.toStringTag:void 0,H=Object.prototype.toString,W=P?P.toStringTag:void 0;function U(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var t=j.call(e,G),n=e[G];try{e[G]=void 0;var r=!0}catch(e){}var o=z.call(e);return r&&(t?e[G]=n:delete e[G]),o}(e):function(e){return H.call(e)}(e)}function V(e){return null!=e&&"object"==typeof e}function Y(e){return"symbol"==typeof e||V(e)&&"[object Symbol]"==U(e)}function $(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var X=Array.isArray,q=P?P.prototype:void 0,K=q?q.toString:void 0;function Z(e){if("string"==typeof e)return e;if(X(e))return $(e,Z)+"";if(Y(e))return K?K.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Q=/\s/,J=/^\s+/;function ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var te=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,re=/^0o[0-7]+$/i,oe=parseInt;function ie(e){if("number"==typeof e)return e;if(Y(e))return NaN;if(ee(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ee(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;var n;e=(n=e)?n.slice(0,function(e){for(var t=e.length;t--&&Q.test(e.charAt(t)););return t}(n)+1).replace(J,""):n;var r=ne.test(e);return r||re.test(e)?oe(e.slice(2),r?2:8):te.test(e)?NaN:+e}function ae(e){var t=function(e){return e?Infinity===(e=ie(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function le(e){return e}function se(e){if(!ee(e))return!1;var t=U(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var ce,ue=B["__core-js_shared__"],de=(ce=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"",he=Function.prototype.toString;function fe(e){if(null!=e){try{return he.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var pe=/^\[object .+?Constructor\]$/,ve=Function.prototype,ge=Object.prototype,me=ve.toString,ye=ge.hasOwnProperty,be=RegExp("^"+me.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ce(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ee(e)||(t=e,de&&de in t))&&(se(e)?be:pe).test(fe(e));var t}(n)?n:void 0}var we=Ce(B,"WeakMap"),xe=Object.create,Ee=function(){function e(){}return function(t){if(!ee(t))return{};if(xe)return xe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Se(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Le,Oe,Ie,_e=Date.now,Te=function(){try{var e=Ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ae=Te,Me=Ae?function(e,t){return Ae(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:le,Ne=(Le=Me,Oe=0,Ie=0,function(){var e=_e(),t=16-(e-Ie);if(Ie=e,t>0){if(++Oe>=800)return arguments[0]}else Oe=0;return Le.apply(void 0,arguments)});function Re(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function De(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function ke(e){return e!=e}function Be(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):De(e,ke,n)}function Pe(e,t){return!(null==e||!e.length)&&Be(e,t,0)>-1}var Fe=/^(?:0|[1-9]\d*)$/;function je(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Fe.test(e))&&e>-1&&e%1==0&&e<t}function ze(e,t,n){"__proto__"==t&&Ae?Ae(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ge(e,t){return e===t||e!=e&&t!=t}var He=Object.prototype.hasOwnProperty;function We(e,t,n){var r=e[t];He.call(e,t)&&Ge(r,n)&&(void 0!==n||t in e)||ze(e,t,n)}function Ue(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var l=t[i],s=r?r(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),o?ze(n,l,s):We(n,l,s)}return n}var Ve=Math.max;function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function $e(e){return null!=e&&Ye(e.length)&&!se(e)}var Xe=Object.prototype;function qe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Xe)}function Ke(e){return V(e)&&"[object Arguments]"==U(e)}var Ze=Object.prototype,Qe=Ze.hasOwnProperty,Je=Ze.propertyIsEnumerable,et=Ke(function(){return arguments}())?Ke:function(e){return V(e)&&Qe.call(e,"callee")&&!Je.call(e,"callee")},tt="object"==typeof exports&&exports&&!exports.nodeType&&exports,nt=tt&&e&&!e.nodeType&&e,rt=nt&&nt.exports===tt?B.Buffer:void 0,ot=(rt?rt.isBuffer:void 0)||function(){return!1},it={};function at(e){return function(t){return e(t)}}it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object Boolean]"]=it["[object DataView]"]=it["[object Date]"]=it["[object Error]"]=it["[object Function]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object WeakMap]"]=!1;var lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,st=lt&&e&&!e.nodeType&&e,ct=st&&st.exports===lt&&D.process,ut=function(){try{return st&&st.require&&st.require("util").types||ct&&ct.binding&&ct.binding("util")}catch(e){}}(),dt=ut&&ut.isTypedArray,ht=dt?at(dt):function(e){return V(e)&&Ye(e.length)&&!!it[U(e)]},ft=Object.prototype.hasOwnProperty;function pt(e,t){var n=X(e),r=!n&&et(e),o=!n&&!r&&ot(e),i=!n&&!r&&!o&&ht(e),a=n||r||o||i,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=l.length;for(var c in e)!t&&!ft.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||je(c,s))||l.push(c);return l}function vt(e,t){return function(n){return e(t(n))}}var gt=vt(Object.keys,Object),mt=Object.prototype.hasOwnProperty;function yt(e){if(!qe(e))return gt(e);var t=[];for(var n in Object(e))mt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function bt(e){return $e(e)?pt(e):yt(e)}var Ct=Object.prototype.hasOwnProperty;function wt(e){return $e(e)?pt(e,!0):function(e){if(!ee(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=qe(e),n=[];for(var r in e)("constructor"!=r||!t&&Ct.call(e,r))&&n.push(r);return n}(e)}var xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/;function St(e,t){if(X(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Y(e))||Et.test(e)||!xt.test(e)||null!=t&&e in Object(t)}var Lt=Ce(Object,"create"),Ot=Object.prototype.hasOwnProperty,It=Object.prototype.hasOwnProperty;function _t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tt(e,t){for(var n=e.length;n--;)if(Ge(e[n][0],t))return n;return-1}_t.prototype.clear=function(){this.__data__=Lt?Lt(null):{},this.size=0},_t.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_t.prototype.get=function(e){var t=this.__data__;if(Lt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ot.call(t,e)?t[e]:void 0},_t.prototype.has=function(e){var t=this.__data__;return Lt?void 0!==t[e]:It.call(t,e)},_t.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lt&&void 0===t?"__lodash_hash_undefined__":t,this};var At=Array.prototype.splice;function Mt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mt.prototype.clear=function(){this.__data__=[],this.size=0},Mt.prototype.delete=function(e){var t=this.__data__,n=Tt(t,e);return!(n<0||(n==t.length-1?t.pop():At.call(t,n,1),--this.size,0))},Mt.prototype.get=function(e){var t=this.__data__,n=Tt(t,e);return n<0?void 0:t[n][1]},Mt.prototype.has=function(e){return Tt(this.__data__,e)>-1},Mt.prototype.set=function(e,t){var n=this.__data__,r=Tt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Nt=Ce(B,"Map");function Rt(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Dt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function kt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(kt.Cache||Dt),n}Dt.prototype.clear=function(){this.size=0,this.__data__={hash:new _t,map:new(Nt||Mt),string:new _t}},Dt.prototype.delete=function(e){var t=Rt(this,e).delete(e);return this.size-=t?1:0,t},Dt.prototype.get=function(e){return Rt(this,e).get(e)},Dt.prototype.has=function(e){return Rt(this,e).has(e)},Dt.prototype.set=function(e,t){var n=Rt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},kt.Cache=Dt;var Bt,Pt,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/\\(\\)?/g,zt=(Bt=kt((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ft,(function(e,n,r,o){t.push(r?o.replace(jt,"$1"):n||e)})),t}),(function(e){return 500===Pt.size&&Pt.clear(),e})),Pt=Bt.cache,Bt);function Gt(e){return null==e?"":Z(e)}function Ht(e,t){return X(e)?e:St(e,t)?[e]:zt(Gt(e))}function Wt(e){if("string"==typeof e||Y(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ut(e,t){for(var n=0,r=(t=Ht(t,e)).length;null!=e&&n<r;)e=e[Wt(t[n++])];return n&&n==r?e:void 0}function Vt(e,t,n){var r=null==e?void 0:Ut(e,t);return void 0===r?n:r}function Yt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var $t=P?P.isConcatSpreadable:void 0;function Xt(e){return X(e)||et(e)||!!($t&&e&&e[$t])}function qt(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=Xt),o||(o=[]);++i<a;){var l=e[i];t>0&&n(l)?t>1?qt(l,t-1,n,r,o):Yt(o,l):r||(o[o.length]=l)}return o}function Kt(e){return null!=e&&e.length?qt(e,1):[]}var Zt=vt(Object.getPrototypeOf,Object),Qt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Jt(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function en(e){var t=this.__data__=new Mt(e);this.size=t.size}en.prototype.clear=function(){this.__data__=new Mt,this.size=0},en.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},en.prototype.get=function(e){return this.__data__.get(e)},en.prototype.has=function(e){return this.__data__.has(e)},en.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Mt){var r=n.__data__;if(!Nt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Dt(r)}return n.set(e,t),this.size=n.size,this};var tn="object"==typeof exports&&exports&&!exports.nodeType&&exports,nn=tn&&e&&!e.nodeType&&e,rn=nn&&nn.exports===tn?B.Buffer:void 0,on=rn?rn.allocUnsafe:void 0;function an(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function ln(){return[]}var sn=Object.prototype.propertyIsEnumerable,cn=Object.getOwnPropertySymbols,un=cn?function(e){return null==e?[]:(e=Object(e),an(cn(e),(function(t){return sn.call(e,t)})))}:ln,dn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Yt(t,un(e)),e=Zt(e);return t}:ln;function hn(e,t,n){var r=t(e);return X(e)?r:Yt(r,n(e))}function fn(e){return hn(e,bt,un)}function pn(e){return hn(e,wt,dn)}var vn=Ce(B,"DataView"),gn=Ce(B,"Promise"),mn=Ce(B,"Set"),yn="[object Map]",bn="[object Promise]",Cn="[object Set]",wn="[object WeakMap]",xn="[object DataView]",En=fe(vn),Sn=fe(Nt),Ln=fe(gn),On=fe(mn),In=fe(we),_n=U;(vn&&_n(new vn(new ArrayBuffer(1)))!=xn||Nt&&_n(new Nt)!=yn||gn&&_n(gn.resolve())!=bn||mn&&_n(new mn)!=Cn||we&&_n(new we)!=wn)&&(_n=function(e){var t=U(e),n="[object Object]"==t?e.constructor:void 0,r=n?fe(n):"";if(r)switch(r){case En:return xn;case Sn:return yn;case Ln:return bn;case On:return Cn;case In:return wn}return t});var Tn=_n,An=Object.prototype.hasOwnProperty,Mn=B.Uint8Array;function Nn(e){var t=new e.constructor(e.byteLength);return new Mn(t).set(new Mn(e)),t}var Rn=/\w*$/,Dn=P?P.prototype:void 0,kn=Dn?Dn.valueOf:void 0;var Bn=ut&&ut.isMap,Pn=Bn?at(Bn):function(e){return V(e)&&"[object Map]"==Tn(e)},Fn=ut&&ut.isSet,jn=Fn?at(Fn):function(e){return V(e)&&"[object Set]"==Tn(e)},zn="[object Arguments]",Gn="[object Function]",Hn="[object Object]",Wn={};function Un(e,t,n,r,o,i){var a,l=1&t,s=2&t,c=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!ee(e))return e;var u=X(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&An.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,a)}else{var d=Tn(e),h=d==Gn||"[object GeneratorFunction]"==d;if(ot(e))return function(e,t){if(t)return e.slice();var n=e.length,r=on?on(n):new e.constructor(n);return e.copy(r),r}(e,l);if(d==Hn||d==zn||h&&!o){if(a=s||h?{}:function(e){return"function"!=typeof e.constructor||qe(e)?{}:Ee(Zt(e))}(e),!l)return s?function(e,t){return Ue(e,dn(e),t)}(e,function(e,t){return e&&Ue(t,wt(t),e)}(a,e)):function(e,t){return Ue(e,un(e),t)}(e,function(e,t){return e&&Ue(t,bt(t),e)}(a,e))}else{if(!Wn[d])return o?e:{};a=function(e,t,n){var r,o,i,a=e.constructor;switch(t){case"[object ArrayBuffer]":return Nn(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?Nn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Nn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(i=new(o=e).constructor(o.source,Rn.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return r=e,kn?Object(kn.call(r)):{}}}(e,d,l)}}i||(i=new en);var f=i.get(e);if(f)return f;i.set(e,a),jn(e)?e.forEach((function(r){a.add(Un(r,t,n,r,e,i))})):Pn(e)&&e.forEach((function(r,o){a.set(o,Un(r,t,n,o,e,i))}));var p=u?void 0:(c?s?pn:fn:s?wt:bt)(e);return Re(p||e,(function(r,o){p&&(r=e[o=r]),We(a,o,Un(r,t,n,o,e,i))})),a}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Dt;++t<n;)this.add(e[t])}function Yn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function $n(e,t){return e.has(t)}function Xn(e,t,n,r,o,i){var a=1&n,l=e.length,s=t.length;if(l!=s&&!(a&&s>l))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=2&n?new Vn:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,i):r(p,v,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!Yn(t,(function(e,t){if(!$n(f,t)&&(p===e||o(p,e,n,r,i)))return f.push(t)}))){h=!1;break}}else if(p!==v&&!o(p,v,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function qn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Kn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}Wn[zn]=Wn["[object Array]"]=Wn["[object ArrayBuffer]"]=Wn["[object DataView]"]=Wn["[object Boolean]"]=Wn["[object Date]"]=Wn["[object Float32Array]"]=Wn["[object Float64Array]"]=Wn["[object Int8Array]"]=Wn["[object Int16Array]"]=Wn["[object Int32Array]"]=Wn["[object Map]"]=Wn["[object Number]"]=Wn[Hn]=Wn["[object RegExp]"]=Wn["[object Set]"]=Wn["[object String]"]=Wn["[object Symbol]"]=Wn["[object Uint8Array]"]=Wn["[object Uint8ClampedArray]"]=Wn["[object Uint16Array]"]=Wn["[object Uint32Array]"]=!0,Wn["[object Error]"]=Wn[Gn]=Wn["[object WeakMap]"]=!1,Vn.prototype.add=Vn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Vn.prototype.has=function(e){return this.__data__.has(e)};var Zn=P?P.prototype:void 0,Qn=Zn?Zn.valueOf:void 0,Jn=Object.prototype.hasOwnProperty,er="[object Arguments]",tr="[object Array]",nr="[object Object]",rr=Object.prototype.hasOwnProperty;function or(e,t,n,r,o){return e===t||(null==e||null==t||!V(e)&&!V(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=X(e),l=X(t),s=a?tr:Tn(e),c=l?tr:Tn(t),u=(s=s==er?nr:s)==nr,d=(c=c==er?nr:c)==nr,h=s==c;if(h&&ot(e)){if(!ot(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new en),a||ht(e)?Xn(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Mn(e),new Mn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ge(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=qn;case"[object Set]":var s=1&r;if(l||(l=Kn),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Xn(l(e),l(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(Qn)return Qn.call(e)==Qn.call(t)}return!1}(e,t,s,n,r,o,i);if(!(1&n)){var f=u&&rr.call(e,"__wrapped__"),p=d&&rr.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,g=p?t.value():t;return i||(i=new en),o(v,g,n,r,i)}}return!!h&&(i||(i=new en),function(e,t,n,r,o,i){var a=1&n,l=fn(e),s=l.length;if(s!=fn(t).length&&!a)return!1;for(var c=s;c--;){var u=l[c];if(!(a?u in t:Jn.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<s;){var v=e[u=l[c]],g=t[u];if(r)var m=a?r(g,v,u,t,e,i):r(v,g,u,e,t,i);if(!(void 0===m?v===g||o(v,g,n,r,i):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,i))}(e,t,n,r,or,o))}function ir(e){return e==e&&!ee(e)}function ar(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function lr(e,t){return null!=e&&t in Object(e)}function sr(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=Ht(t,e)).length,i=!1;++r<o;){var a=Wt(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ye(o)&&je(a,o)&&(X(e)||et(e))}(e,t,lr)}function cr(e){return function(t){return null==t?void 0:t[e]}}function ur(e){return"function"==typeof e?e:null==e?le:"object"==typeof e?X(e)?(r=e[0],o=e[1],St(r)&&ir(o)?ar(Wt(r),o):function(e){var t=Vt(e,r);return void 0===t&&t===o?sr(e,r):or(o,t,3)}):(n=function(e){for(var t=bt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,ir(o)]}return t}(t=e),1==n.length&&n[0][2]?ar(n[0][0],n[0][1]):function(e){return e===t||function(e,t,n,r){var o=n.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=n[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var l=(a=n[o])[0],s=e[l],c=a[1];if(a[2]){if(void 0===s&&!(l in e))return!1}else{var u,d=new en;if(!(void 0===u?or(c,s,3,r,d):u))return!1}}return!0}(e,0,n)}):function(e){return St(e)?cr(Wt(e)):function(e){return function(t){return Ut(t,e)}}(e)}(e);var t,n,r,o}var dr=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var l=i[++r];if(!1===t(o[l],l,o))break}return e};function hr(e,t){return e&&dr(e,t,bt)}var fr,pr=(fr=hr,function(e,t){if(null==e)return e;if(!$e(e))return fr(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e}),vr=function(){return B.Date.now()},gr=Math.max,mr=Math.min;function yr(e){return"function"==typeof e?e:le}function br(e,t){return(X(e)?Re:pr)(e,yr(t))}function Cr(e,t){var n=[];return pr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function wr(e,t){return(X(e)?an:Cr)(e,ur(t))}var xr,Er=Math.max,Sr=(xr=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ae(n);return o<0&&(o=Er(r+o,0)),De(e,ur(t),o)},function(e,t,n){var r=Object(e);if(!$e(e)){var o=ur(t);e=bt(e),t=function(e){return o(r[e],e,r)}}var i=xr(e,t,n);return i>-1?r[o?e[i]:i]:void 0});function Lr(e){return e&&e.length?e[0]:void 0}function Or(e,t){var n=-1,r=$e(e)?Array(e.length):[];return pr(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function Ir(e,t){return(X(e)?$:Or)(e,ur(t))}function _r(e){return"string"==typeof e||!X(e)&&V(e)&&"[object String]"==U(e)}var Tr=Math.max,Ar=Object.prototype.hasOwnProperty;function Mr(e){if(null==e)return!0;if($e(e)&&(X(e)||"string"==typeof e||"function"==typeof e.splice||ot(e)||ht(e)||et(e)))return!e.length;var t=Tn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(qe(e))return!yt(e).length;for(var n in e)if(Ar.call(e,n))return!1;return!0}function Nr(e,t){return or(e,t)}function Rr(e){return null==e}function Dr(e,t,n,r){if(!ee(e))return e;for(var o=-1,i=(t=Ht(t,e)).length,a=i-1,l=e;null!=l&&++o<i;){var s=Wt(t[o]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=a){var u=l[s];void 0===(c=r?r(u,s,l):void 0)&&(c=ee(u)?u:je(t[o+1])?[]:{})}We(l,s,c),l=l[s]}return e}var kr=cr("length"),Br="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pr="\\ud83c[\\udffb-\\udfff]",Fr="[^\\ud800-\\udfff]",jr="(?:\\ud83c[\\udde6-\\uddff]){2}",zr="[\\ud800-\\udbff][\\udc00-\\udfff]",Gr="(?:"+Br+"|"+Pr+")?",Hr="[\\ufe0e\\ufe0f]?",Wr=Hr+Gr+"(?:\\u200d(?:"+[Fr,jr,zr].join("|")+")"+Hr+Gr+")*",Ur="(?:"+[Fr+Br+"?",Br,jr,zr,"[\\ud800-\\udfff]"].join("|")+")",Vr=RegExp(Pr+"(?="+Pr+")|"+Ur+Wr,"g");var Yr=function(e){return Ne(function(e,t,n){return t=Ve(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Ve(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),Se(e,this,l)}}(e,void 0,Kt),e+"")}((function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],l=Ut(e,a);n(0,a)&&Dr(i,Ht(a,e),l)}return i}(e,t,(function(t,n){return sr(e,n)}))}(e,t)})),$r=Yr;function Xr(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function qr(e){if(null==e)return 0;if($e(e))return _r(e)?function(e){return Qt.test(e)}(t=e)?function(e){for(var t=Vr.lastIndex=0;Vr.test(e);)++t;return t}(t):kr(t):e.length;var t,n=Tn(e);return"[object Map]"==n||"[object Set]"==n?e.size:yt(e).length}var Kr=mn&&1/Kn(new mn([,-0]))[1]==1/0?function(e){return new mn(e)}:function(){};function Zr(e){return e&&e.length?function(e,t,n){var r=-1,o=Pe,i=e.length,a=!0,l=[],s=l;if(i>=200){var c=Kr(e);if(c)return Kn(c);a=!1,o=$n,s=new Vn}else s=l;e:for(;++r<i;){var u=e[r],d=u;if(u=0!==u?u:0,a&&d==d){for(var h=s.length;h--;)if(s[h]===d)continue e;l.push(u)}else o(s,d,n)||(s!==l&&s.push(d),l.push(u))}return l}(e):[]}const Qr=e=>{let t=!0;const{s2:n,adaptive:r,container:o,wrapper:i}=e,{container:a,adaptiveWidth:l,adaptiveHeight:s}=((e,t)=>{var n,r,o,i;return!0===(i=t)||!1===i||V(i)&&"[object Boolean]"==U(i)?{container:e,adaptiveWidth:!0,adaptiveHeight:!1}:{container:(null==(n=null==t?void 0:t.getContainer)?void 0:n.call(t))||e,adaptiveWidth:null==(r=null==t?void 0:t.width)||r,adaptiveHeight:null==(o=null==t?void 0:t.height)||o}})(i,r);if(!(a&&o&&r&&n))return;const c=(e,t)=>{null==n||n.changeSheetSize(e,t),null==n||n.render(!1)},u=function(e,t,n){var r,o,i,a,l,s,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){return c=e,l=setTimeout(g,t),u?f(e):a}function v(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=i}function g(){var e=vr();if(v(e))return m(e);l=setTimeout(g,function(e){var n=t-(e-s);return d?mr(n,i-(e-c)):n}(e))}function m(e){return l=void 0,h&&r?f(e):(r=o=void 0,a)}function y(){var e=vr(),n=v(e);if(r=arguments,o=this,s=e,n){if(void 0===l)return p(s);if(d)return clearTimeout(l),l=setTimeout(g,t),f(s)}return void 0===l&&(l=setTimeout(g,t)),a}return t=ie(t)||0,ee(n)&&(u=!!n.leading,i=(d="maxWait"in n)?gr(ie(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=s=o=l=void 0},y.flush=function(){return void 0===l?a:m(vr())},y}(c,200),d=new ResizeObserver((([e]=[])=>{e&&(()=>{const{clientWidth:e,clientHeight:r}=o,i=l?Math.floor(null!=e?e:n.options.width):n.options.width,a=s?Math.floor(null!=r?r:n.options.height):n.options.height;(l||s)&&(t?(c(i,a),t=!1):u(i,a))})()}));return d.observe(a,{box:"border-box"}),()=>{d.unobserve(a)}},Jr=(e,t)=>{const n=e.store.get("drillDownDataCache",[]),r=n.find((e=>e.rowId===t.id));return{drillDownDataCache:n,drillDownCurrentCache:r}},eo=e=>{var t;const n=e.spreadsheet,{fields:r}=n.dataCfg,o=(null==(t=r.rows)?void 0:t.length)-1,i=!!Mr(r.values)||n.isValueInCols();return o<=e.level&&n.isHierarchyTreeType()&&i&&!e.isGrandTotals};(0,r.AfN)({zh_CN:{选择分析信息:"选择分析信息",切换指标:"切换指标",确定:"确定",取消:"取消",重置:"重置",请输入关键字搜索:"请输入关键字搜索",搜索:"搜索",恢复:"恢复","已选 {} 项":"已选 {} 项",所选项:"所选项",选择下钻维度:"选择下钻维度",恢复默认:"恢复默认",搜索字段:"搜索字段",行列切换:"行列切换",行头:"行头",列头:"列头",值:"值",展开子项:"展开子项",首字母:"首字母",手动排序:"手动排序",其他字段:"其他字段",高级排序:"高级排序",设置顺序:"设置顺序",可选字段:"可选字段","按以下规则进行排序（优先级由低到高）":"按以下规则进行排序（优先级由低到高）",按:"按",说明:"说明",复制原始数据:"复制原始数据",复制格式化数据:"复制格式化数据",下载原始数据:"下载原始数据",下载格式化数据:"下载格式化数据",操作成功:"操作成功",操作失败:"操作失败",时间:"时间",指标:"指标",目标值:"目标值"},en_US:{选择分析信息:"Select Analysis Information",切换指标:"Switch indicator",确定:"Ok",取消:"Cancel",重置:"Reset",请输入关键字搜索:"Please enter a keyword search",搜索:"Search",恢复:"Recover","已选 {} 项":"selected {} item",所选项:"selected items",选择下钻维度:"Select drill down dimension",恢复默认:"Restore default",搜索字段:"Search field",行列切换:"Switch Dimensions",行头:"Rows",列头:"Cols",值:"Values",展开子项:"Expand Children",首字母:"Alphabetical order",手动排序:"Custom order",其他字段:"Other field",高级排序:"Advanced order",设置顺序:"SetManual",可选字段:"Fields","按以下规则进行排序（优先级由低到高）":"Order according to the following rules (from low to high priority)",按:"By",说明:"Description",复制原始数据:"Copy raw data",复制格式化数据:"Copy formatted data",下载原始数据:"Download raw data",下载格式化数据:"Download formatted data",操作成功:"Operation successful",操作失败:"Operation failed",时间:"Date",指标:"Measure",目标值:"Target Value"}});var to,no,ro=(to=i.useEffect,function(e,t){var n=(0,i.useRef)(!1);to((function(){return function(){n.current=!1}}),[]),to((function(){if(n.current)return e();n.current=!0}),t)}),oo=globalThis&&globalThis.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},io={exports:{}};no=io,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var l in o)e.call(o,l)&&o[l]&&n.push(l);else n.push(o.toString())}}return n.join(" ")}no.exports?(t.default=t,no.exports=t):window.classNames=t}();var ao=io.exports;const lo=e=>{const{style:t={},width:n,height:o,className:i,name:l}=e,s=I({},t);return n&&(s.width=`${n}px`),o&&(s.height=`${o}px`),a().createElement("span",{style:s,className:ao(`${r.vhY}-html-icon`,i),dangerouslySetInnerHTML:{__html:(0,r.q7_)(l)}})};class so extends a().PureComponent{render(){const{style:e={},className:t,content:n}=this.props;let o;return o="string"!=typeof n?(null==n?void 0:n.innerHTML)||"":n,a().createElement("div",{style:e,className:ao(`${r.vhY}-react-element`,t),dangerouslySetInnerHTML:{__html:o}})}}const co=e=>{const t=e,{icon:n}=t,o=T(t,["icon"]);if(!n)return null;if((0,r.q7_)(n)){const e=n;return a().createElement(lo,I({name:e},o))}return a().createElement(so,I({content:n},o))},uo=e=>{const{list:t=[]}=e;return a().createElement("div",{className:`${r.NO_}-detail-list`},t.map(((e,t)=>{const{name:n,value:o,icon:i}=e;return a().createElement("div",{key:`${o}-${t}`,className:`${r.NO_}-detail-item`},a().createElement("span",{className:`${r.NO_}-detail-item-key`},n),a().createElement("span",{className:`${r.NO_}-detail-item-val ${r.NO_}-highlight`},i?a().createElement(co,{icon:i,width:8,height:7}):null,o))})))},ho=e=>{var t,n;const{rows:o=[],cols:i=[]}=e;return a().createElement("div",{className:`${r.NO_}-head-info-list`},null==(t=i.map((e=>e.value)))?void 0:t.join("/"),i.length>0&&o.length>0&&"，",null==(n=o.map((e=>e.value)))?void 0:n.join("/"))},fo=e=>{const{infos:t=""}=e;return a().createElement("div",{className:`${r.NO_}-infos`},t)},po=e=>{const{name:t,icon:n,text:o,render:i}=e;return a().createElement("div",{className:`${r.NO_}-interpretation`},a().createElement("div",{className:`${r.NO_}-interpretation-head`},a().createElement(co,{icon:n,className:`${r.NO_}-interpretation-icon`}),t&&a().createElement("span",{className:`${r.NO_}-interpretation-name`},t)),o&&a().createElement("div",null,o),a().createElement(so,{content:i}))},vo=a().memo((e=>{const{menus:t,onlyMenu:n,onClick:i,cell:l,defaultSelectedKeys:s}=e,c=e=>a().createElement("span",{onClick:()=>{var t;return null==(t=e.onClick)?void 0:t.call(e,l)}},a().createElement(co,{icon:e.icon,className:`${r.NO_}-operator-icon`}),a().createElement("span",{className:`${r.NO_}-operator-text`},e.text)),u=e=>{const{key:t,text:n,children:i,onClick:s}=e;return Mr(i)?a().createElement(o.Menu.Item,{title:n,key:t},c(e)):a().createElement(o.Menu.SubMenu,{title:c(e),key:t,popupClassName:`${r.NO_}-operator-submenu-popup`,onTitleClick:()=>null==s?void 0:s(l)},Ir(i,(e=>u(e))))};return Mr(t)?null:a().createElement("div",{className:`${r.NO_}-operator`},n?a().createElement(o.Menu,{className:`${r.NO_}-operator-menus`,onClick:i,defaultSelectedKeys:s},Ir(t,(e=>u(e)))):Ir(t,(e=>{const{key:t,children:n}=e,l=Mr(n)?a().createElement(a().Fragment,null):a().createElement(o.Menu,{className:`${r.NO_}-operator-menus`,onClick:i,key:t,defaultSelectedKeys:s},Ir(n,(e=>u(e))));return a().createElement(o.Dropdown,{key:t,overlay:l},c(e))})))})),go=e=>{const{tips:t="",name:n=""}=e;return a().createElement(a().Fragment,null,n&&a().createElement("div",{className:`${r.NO_}-name`},n),t&&a().createElement("div",{className:`${r.NO_}-tips`},t))},mo=a().memo((e=>{const{summaries:t=[]}=e;return a().createElement("div",{className:`${r.NO_}-summary`},(()=>{const e=(o=e=>qr(null==e?void 0:e.selectedData),(n=t)&&n.length?function(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}(n,ur(o)):0);var n,o;return a().createElement("div",{className:`${r.NO_}-summary-item`},a().createElement("span",{className:`${r.NO_}-selected`},e," ",(0,r.agQ)("项")),(0,r.agQ)("已选择"))})(),null==t?void 0:t.map((e=>{const{name:t="",value:n}=e||{};if(t||n)return a().createElement("div",{key:`${t}-${n}`,className:`${r.NO_}-summary-item`},a().createElement("span",{className:`${r.NO_}-summary-key`},t,"（",(0,r.agQ)("总和"),")"),a().createElement("span",{className:ao(`${r.NO_}-summary-val`,`${r.NO_}-bold`)},n))})))})),yo=({description:e})=>a().createElement(a().Fragment,null,e&&a().createElement("div",{className:`${r.NO_}-description`},(0,r.agQ)("说明"),"：",e)),bo=e=>{const{data:t,options:n,content:o,cell:i}=e,l=(e,t)=>e&&a().createElement(vo,_(I({},e),{onlyMenu:t,cell:i}));return(()=>{const{operator:e,onlyMenu:i}=(0,r.IZo)(n),{summaries:s,headInfo:c,details:u,interpretation:d,infos:h,tips:f,name:p,description:v}=t||{},g={name:p,tips:f};if(i)return l(e,!0);const m=a().createElement(a().Fragment,null,(e=>{const{name:t,tips:n}=e||{};return a().createElement(go,{name:t,tips:n})})(g),(e=>!Mr(e)&&a().createElement(mo,{summaries:e}))(s),(e=>e&&a().createElement(po,I({},e)))(d),(e=>{const{cols:t,rows:n}=e||{};return(!Mr(t)||!Mr(n))&&a().createElement(ho,{cols:t,rows:n})})(c),(e=>!Mr(e)&&a().createElement(uo,{list:e}))(u),(e=>e&&a().createElement(fo,{infos:e}))(h),(e=>a().createElement(yo,{description:e}))(v));return a().createElement(a().Fragment,null,l(e),null!=o?o:m)})()};class Co extends r.N6r{constructor(e){super(e)}renderContent(){var e,t,n;const{content:r}=this.spreadsheet.options.tooltip,o=this.options,i=this.spreadsheet.getCell(null==(e=o.event)?void 0:e.target),l=null!=(t=o.content)?t:r,c=_(I({},o),{cell:i,content:l});(null==(n=o.options)?void 0:n.forceRender)&&this.unmountComponentAtNode(),s().render(a().createElement(bo,_(I({},c),{content:l})),this.container)}destroy(){super.destroy(),this.unmountComponentAtNode()}unmountComponentAtNode(){this.container&&s().unmountComponentAtNode(this.container)}}const wo={tooltip:{renderTooltip:e=>new Co(e)}},xo=(...e)=>((...e)=>(0,r._Ge)(r.WNh,A,...e))(wo,...e),Eo=(e,t,n)=>{a().useEffect((()=>{const o=e=>{null==t||t((0,r.c8d)(e))};return null==n||n.on(e,o),()=>{null==n||n.off(e,o)}}),[n,t,e])},So=(e,t,n,r=!1)=>{a().useEffect((()=>{const o=e=>{null==t||t(e)};return null==n||n.on(e,o),()=>{r&&(null==n||n.emit(e)),null==n||n.off(e,o)}}),[n,t,e])};function Lo(e){const t=(y=oo((0,i.useState)({}),2)[1],(0,i.useCallback)((function(){return y({})}),[])),n=a().useRef(),o=a().useRef(),l=a().useRef(),{spreadsheet:s,dataCfg:c,options:u,themeCfg:d,sheetType:h,onSheetUpdate:f=le}=e,p=a().useRef([c,u,d]),{loading:v,setLoading:g}=((e,t)=>{const[n,o]=a().useState(t);return a().useEffect((()=>{null==e||e.on(r.ch4.LAYOUT_BEFORE_RENDER,(()=>{o(!0)})),null==e||e.on(r.ch4.LAYOUT_AFTER_RENDER,(()=>{o(!1)}))}),[e]),{loading:null!=t?t:n,setLoading:o}})(n.current,e.loading),m=((e,t)=>{const{options:{pagination:n},showPagination:o}=t,[i,l]=a().useState({total:0,current:(null==n?void 0:n.current)||1,pageSize:(null==n?void 0:n.pageSize)||10});return ro((()=>{e&&!Mr(n)&&(e.updatePagination({current:i.current,pageSize:i.pageSize}),e.render(!1))}),[i.current,i.pageSize,e]),ro((()=>{var t,r;l({total:null!=(r=null==(t=null==e?void 0:e.facet)?void 0:t.viewCellHeights.getTotalLength())?r:0,current:(null==n?void 0:n.current)||1,pageSize:(null==n?void 0:n.pageSize)||10})}),[n,e]),ro((()=>{if(!e||Mr(n))return;const t=e=>{l((t=>_(I({},t),{total:e.total})))};return e.on(r.ch4.LAYOUT_PAGINATION,t),()=>{e.off(r.ch4.LAYOUT_PAGINATION,t)}}),[n,e]),{showPagination:Boolean(o),pagination:I(I({},n),i),onShowSizeChange:(e,t)=>{var r;const i=null!=(r=Vt(o,"onShowSizeChange"))?r:null==n?void 0:n.onShowSizeChange;null==i||i(e,t)},onChange:(e,t)=>{var r;l(_(I({},i),{current:e,pageSize:t}));const a=null!=(r=Vt(o,"onChange"))?r:null==n?void 0:n.onChange;null==a||a(e,t)}}})(n.current,e);var y;!function(e,t){Eo(r.ch4.ROW_CELL_HOVER,e.onRowCellHover,t),Eo(r.ch4.ROW_CELL_CLICK,e.onRowCellClick,t),Eo(r.ch4.ROW_CELL_DOUBLE_CLICK,e.onRowCellDoubleClick,t),Eo(r.ch4.ROW_CELL_CONTEXT_MENU,e.onRowCellContextMenu,t),Eo(r.ch4.ROW_CELL_MOUSE_DOWN,e.onRowCellMouseDown,t),Eo(r.ch4.ROW_CELL_MOUSE_UP,e.onRowCellMouseUp,t),Eo(r.ch4.ROW_CELL_MOUSE_MOVE,e.onRowCellMouseMove,t),So(r.ch4.ROW_CELL_COLLAPSE_TREE_ROWS,e.onRowCellCollapseTreeRows,t),So(r.ch4.ROW_CELL_SCROLL,e.onRowCellScroll,t),Eo(r.ch4.COL_CELL_HOVER,e.onColCellHover,t),Eo(r.ch4.COL_CELL_CLICK,e.onColCellClick,t),Eo(r.ch4.COL_CELL_DOUBLE_CLICK,e.onColCellDoubleClick,t),Eo(r.ch4.COL_CELL_CONTEXT_MENU,e.onColCellContextMenu,t),Eo(r.ch4.COL_CELL_MOUSE_DOWN,e.onColCellMouseDown,t),Eo(r.ch4.COL_CELL_MOUSE_UP,e.onColCellMouseUp,t),Eo(r.ch4.COL_CELL_MOUSE_MOVE,e.onColCellMouseMove,t),Eo(r.ch4.DATA_CELL_HOVER,e.onDataCellHover,t),Eo(r.ch4.DATA_CELL_CLICK,e.onDataCellClick,t),Eo(r.ch4.DATA_CELL_DOUBLE_CLICK,e.onDataCellDoubleClick,t),Eo(r.ch4.DATA_CELL_CONTEXT_MENU,e.onDataCellContextMenu,t),Eo(r.ch4.DATA_CELL_MOUSE_DOWN,e.onDataCellMouseDown,t),Eo(r.ch4.DATA_CELL_MOUSE_UP,e.onDataCellMouseUp,t),Eo(r.ch4.DATA_CELL_MOUSE_MOVE,e.onDataCellMouseMove,t),So(r.ch4.DATA_CELL_TREND_ICON_CLICK,e.onDataCellTrendIconClick,t),So(r.ch4.DATA_CELL_BRUSH_SELECTION,e.onDataCellBrushSelection,t),So(r.ch4.DATA_CELL_SELECT_MOVE,e.onDataCellSelectMove,t),Eo(r.ch4.CORNER_CELL_HOVER,e.onCornerCellHover,t),Eo(r.ch4.CORNER_CELL_CLICK,e.onCornerCellClick,t),Eo(r.ch4.CORNER_CELL_DOUBLE_CLICK,e.onCornerCellDoubleClick,t),Eo(r.ch4.CORNER_CELL_CONTEXT_MENU,e.onCornerCellContextMenu,t),Eo(r.ch4.CORNER_CELL_MOUSE_DOWN,e.onCornerCellMouseDown,t),Eo(r.ch4.CORNER_CELL_MOUSE_UP,e.onCornerCellMouseUp,t),Eo(r.ch4.CORNER_CELL_MOUSE_MOVE,e.onCornerCellMouseMove,t),Eo(r.ch4.MERGED_CELLS_HOVER,e.onMergedCellsHover,t),Eo(r.ch4.MERGED_CELLS_CLICK,e.onMergedCellsClick,t),Eo(r.ch4.MERGED_CELLS_DOUBLE_CLICK,e.onMergedCellsDoubleClick,t),Eo(r.ch4.MERGED_CELLS_CONTEXT_MENU,e.onMergedCellsContextMenu,t),Eo(r.ch4.MERGED_CELLS_MOUSE_DOWN,e.onMergedCellsMouseDown,t),Eo(r.ch4.MERGED_CELLS_MOUSE_UP,e.onMergedCellsMouseUp,t),Eo(r.ch4.MERGED_CELLS_MOUSE_MOVE,e.onMergedCellsMouseMove,t),So(r.ch4.RANGE_SORT,e.onRangeSort,t),So(r.ch4.RANGE_SORTED,e.onRangeSorted,t),So(r.ch4.RANGE_FILTER,e.onRangeFilter,t),So(r.ch4.RANGE_FILTERED,e.onRangeFiltered,t),So(r.ch4.LAYOUT_AFTER_HEADER_LAYOUT,e.onLayoutAfterHeaderLayout,t),So(r.ch4.LAYOUT_PAGINATION,e.onLayoutPagination,t),So(r.ch4.LAYOUT_CELL_SCROLL,e.onLayoutCellScroll,t),So(r.ch4.LAYOUT_AFTER_COLLAPSE_ROWS,e.onLayoutAfterCollapseRows,t),So(r.ch4.LAYOUT_TREE_ROWS_COLLAPSE_ALL,e.onCollapseRowsAll,t),So(r.ch4.LAYOUT_COLS_EXPANDED,e.onLayoutColsExpanded,t),So(r.ch4.LAYOUT_COLS_HIDDEN,e.onLayoutColsHidden,t),So(r.ch4.LAYOUT_BEFORE_RENDER,e.onBeforeRender,t),So(r.ch4.LAYOUT_AFTER_RENDER,e.onAfterRender,t),So(r.ch4.LAYOUT_DESTROY,e.onDestroy,t,!0),So(r.ch4.LAYOUT_RESIZE,e.onLayoutResize,t),So(r.ch4.LAYOUT_RESIZE_SERIES_WIDTH,e.onLayoutResizeSeriesWidth,t),So(r.ch4.LAYOUT_RESIZE_ROW_WIDTH,e.onLayoutResizeRowWidth,t),So(r.ch4.LAYOUT_RESIZE_ROW_HEIGHT,e.onLayoutResizeRowHeight,t),So(r.ch4.LAYOUT_RESIZE_COL_WIDTH,e.onLayoutResizeColWidth,t),So(r.ch4.LAYOUT_RESIZE_COL_HEIGHT,e.onLayoutResizeColHeight,t),So(r.ch4.LAYOUT_RESIZE_TREE_WIDTH,e.onLayoutResizeTreeWidth,t),So(r.ch4.LAYOUT_RESIZE_MOUSE_DOWN,e.onLayoutResizeMouseDown,t),So(r.ch4.LAYOUT_RESIZE_MOUSE_UP,e.onLayoutResizeMouseUp,t),So(r.ch4.LAYOUT_RESIZE_MOUSE_MOVE,e.onLayoutResizeMouseMove,t),So(r.ch4.GLOBAL_KEYBOARD_DOWN,e.onKeyBoardDown,t),So(r.ch4.GLOBAL_KEYBOARD_UP,e.onKeyBoardUp,t),So(r.ch4.GLOBAL_COPIED,e.onCopied,t),So(r.ch4.GLOBAL_ACTION_ICON_HOVER,e.onActionIconHover,t),So(r.ch4.GLOBAL_ACTION_ICON_CLICK,e.onActionIconClick,t),So(r.ch4.GLOBAL_CONTEXT_MENU,e.onContextMenu,t),So(r.ch4.GLOBAL_HOVER,e.onMouseHover,t),So(r.ch4.GLOBAL_CLICK,e.onClick,t),So(r.ch4.GLOBAL_DOUBLE_CLICK,e.onDoubleClick,t),So(r.ch4.GLOBAL_SELECTED,e.onSelected,t),So(r.ch4.GLOBAL_MOUSE_UP,e.onMouseUp,t),So(r.ch4.GLOBAL_RESET,e.onReset,t),So(r.ch4.GLOBAL_LINK_FIELD_JUMP,e.onLinkFieldJump,t),So(r.ch4.GLOBAL_SCROLL,e.onScroll,t),So(r.ch4.ROW_CELL_BRUSH_SELECTION,e.onRowCellBrushSelection,t),So(r.ch4.COL_CELL_BRUSH_SELECTION,e.onColCellBrushSelection,t)}(e,n.current);const b=a().useCallback((e=>{const t=xo(u);return s?s(e,c,t):"table"===h?new r.HZt(e,c,t):new r.TA7(e,c,t)}),[h,u,c,s]),C=a().useCallback((()=>{var r;g(!0),n.current=b(o.current),n.current.setThemeCfg(e.themeCfg),n.current.render(),g(!1),t(),e.getSpreadSheet&&(console.warn("[SheetComponent] `getSpreadSheet` is deprecated. Please use `onMounted` instead."),e.getSpreadSheet(n.current)),null==(r=e.onMounted)||r.call(e,n.current)}),[e,b,g,t]);return a().useEffect((()=>(C(),()=>{var e,t;null==(t=(e=n.current).destroy)||t.call(e)})),[]),ro((()=>{var e,t,r,o,i,a,l,s,h,v,g;const[m,y,b]=p.current;p.current=[c,u,d];let C=!1,w=!1;Object.is(m,c)||((null==(t=null==(e=null==m?void 0:m.fields)?void 0:e.columns)?void 0:t.length)!==(null==(o=null==(r=null==c?void 0:c.fields)?void 0:r.columns)?void 0:o.length)&&(null==(i=n.current)||i.clearColumnLeafNodes()),C=!0,null==(a=n.current)||a.setDataCfg(c)),Object.is(y,u)||(Object.is(null==y?void 0:y.hierarchyType,null==u?void 0:u.hierarchyType)||(w=!0,C=!0,null==(l=n.current)||l.setDataCfg(c)),null==(s=n.current)||s.setOptions(u),null==(h=n.current)||h.changeSheetSize(u.width,u.height)),Object.is(b,d)||null==(v=n.current)||v.setThemeCfg(d);const x=f({reloadData:C,reBuildDataSet:w});null==(g=n.current)||g.render(x.reloadData,{reBuildDataSet:x.reBuildDataSet})}),[c,u,d,f]),(e=>{const{s2:t,adaptive:n,container:r,wrapper:o}=e;a().useLayoutEffect((()=>Qr({s2:t,adaptive:n,wrapper:o,container:r})),[t,o,r,n])})({s2:n.current,container:o.current,wrapper:l.current,adaptive:e.adaptive}),{s2Ref:n,containerRef:o,wrapperRef:l,loading:v,setLoading:g,pagination:m}}const Oo=a().createContext(null);function Io(){return a().useContext(Oo)}const _o=e=>i.createElement("svg",I({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),To=e=>i.createElement("svg",I({viewBox:"0 0 1024 1024",width:16,height:16},e),i.createElement("defs",null,i.createElement("style",{type:"text/css"})),i.createElement("path",{d:"M441.6 249.6c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 25.6-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z",fill:"","p-id":22217})),Ao=e=>i.createElement("svg",I({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184z m0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-0.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685 0.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-0.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774z m366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h0.032z m-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",fill:"currentColor"})),Mo=e=>i.createElement("svg",I({className:"antv-s2-icon",width:"16px",height:"16px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{d:"M18.0047888,16.4055 C18.1082888,16.4055 18.1922888,16.4895 18.1922888,16.593 L18.1922888,17.9055 C18.1922888,18.0090534 18.1083422,18.093 18.0047888,18.093 L9.37978883,18.093 C9.27623544,18.093 9.19228883,18.0090534 9.19228883,17.9055 L9.19228883,16.593 C9.19228883,16.4895 9.27628883,16.4055 9.37978883,16.4055 L18.0047888,16.4055 Z M4.41328883,1.6665 L4.46428883,1.7115 L7.08928883,5.0385 C7.17478883,5.1435 7.12078883,5.2935 7.00528883,5.3325 L6.94228883,5.343 L5.16028883,5.343 L5.16028883,14.25 L6.94228883,14.25 C7.09978883,14.25 7.18828883,14.433 7.08928883,14.5545 L4.46428883,17.88 C4.42872537,17.9249155 4.37457895,17.9511073 4.31728883,17.9511073 C4.25999871,17.9511073 4.20585229,17.9249155 4.17028883,17.88 L1.54528883,14.5545 C1.50119832,14.4981177 1.49305316,14.4215528 1.52429494,14.3571564 C1.55553672,14.2927601 1.62071465,14.2517677 1.69228883,14.2515 L3.47428883,14.2515 L3.47428883,5.343 L1.69228883,5.343 C1.63110128,5.34394015 1.57330492,5.31496201 1.53745415,5.26536844 C1.50160338,5.21577487 1.49220972,5.15180683 1.51228883,5.094 L1.54528883,5.0385 L4.17028883,1.713 C4.22854609,1.63918993 4.33246412,1.61994585 4.41328883,1.668 L4.41328883,1.6665 Z M15.7547888,11.4375 C15.8582888,11.4375 15.9422888,11.5215 15.9422888,11.625 L15.9422888,12.9375 C15.9422888,13.0410534 15.8583422,13.125 15.7547888,13.125 L9.37978883,13.125 C9.33006074,13.125 9.28236938,13.1052456 9.24720631,13.0700825 C9.21204324,13.0349195 9.19228883,12.9872281 9.19228883,12.9375 L9.19228883,11.625 C9.19228883,11.5215 9.27628883,11.4375 9.37978883,11.4375 L15.7547888,11.4375 Z M21.7547888,6.468 C21.8582888,6.468 21.9422888,6.5535 21.9422888,6.6555 L21.9422888,7.968 C21.9422888,8.07155339 21.8583422,8.1555 21.7547888,8.1555 L9.37978883,8.1555 C9.33006074,8.1555 9.28236938,8.13574559 9.24720631,8.10058252 C9.21204324,8.06541945 9.19228883,8.01772809 9.19228883,7.968 L9.19228883,6.6555 C9.19228883,6.5535 9.27628883,6.468 9.37978883,6.468 L21.7547888,6.468 Z M13.5047888,1.5 C13.6082888,1.5 13.6922888,1.584 13.6922888,1.6875 L13.6922888,3 C13.6922888,3.10355339 13.6083422,3.1875 13.5047888,3.1875 L9.37978883,3.1875 C9.33006074,3.1875 9.28236938,3.16774559 9.24720631,3.13258252 C9.21204324,3.09741945 9.19228883,3.04972809 9.19228883,3 L9.19228883,1.6875 C9.19228883,1.584 9.27628883,1.5 9.37978883,1.5 L13.5047888,1.5 Z",fill:"#595959"})),No=e=>i.createElement("svg",I({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-153.000000, -608.000000)",fill:"#595959"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(24.000000, 57.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("path",{d:"M0.771428571,3.77142857 L3.77142857,3.77142857 L3.77142857,5.65714286 L0.771428571,5.65714286 L0.771428571,3.77142857 Z M0.771428571,6.34285714 L3.77142857,6.34285714 L3.77142857,8.57142857 L0.771428571,8.57142857 L0.771428571,6.34285714 Z M0.771428571,9 L3.77142857,9 L3.77142857,11.2285714 L0.771428571,11.2285714 L0.771428571,9 Z"}),i.createElement("path",{d:"M0.771428571,9 L0.771428571,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L0.771428571,3.77142857 L0.771428571,5.65714286 L3.77142857,5.65714286 L3.77142857,3.77142857 L4.54285714,3.77142857 L4.54285714,11.3142857 L3.77142857,11.3142857 L3.77142857,9.08571429 L0.771428571,9.08571429 L0.771428571,9 Z M0.771428571,8.22857143 L3.77142857,8.22857143 L3.77142857,6.34285714 L0.771428571,6.34285714 L0.771428571,8.22857143 L0.771428571,8.22857143 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}))))))),Ro=e=>i.createElement("svg",I({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-153.000000, -814.000000)",fill:"#595959",fillRule:"nonzero"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(24.000000, 55.000000)"},i.createElement("g",{transform:"translate(0.000000, 208.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}),i.createElement("polygon",{points:"0.771428571 0.771428571 11.2285714 0.771428571 11.2285714 3 0.771428571 3"})))))))),Do=e=>i.createElement("svg",I({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-365.000000, -624.000000)",fill:"#595959"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(236.000000, 71.000000)"},i.createElement("g",{transform:"translate(0.000000, 2.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("polygon",{points:"4.22857143 3.77142857 11.2285714 3.77142857 11.2285714 11.7714286 4.22857143 11.7714286"}),i.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"})))))))),ko=e=>i.createElement("svg",I({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),Bo=e=>i.createElement("svg",I({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M86.016 805.888H0L143.872 275.968h79.36l144.896 529.92H276.992l-29.696-109.056H115.2s-29.696 109.056-29.184 109.056zM225.28 613.376L181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-0.512-31.232-1.536-46.592-3.584-4.096-0.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256z m-35.328 157.184v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zM1013.76 794.624c-36.864 14.336-71.68 20.992-104.96 20.992-32.768 0.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",fill:"currentColor"})),Po=e=>i.createElement("svg",I({width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("g",{transform:"translate(8.056364, 8.000227) rotate(-270.000000) translate(-8.056364, -8.000227) translate(3.057045, 3.070227)",fill:"currentColor"},i.createElement("path",{d:"M0.482272727,3.55181818 C0.472878788,3.55181818 0.468181818,3.54939394 0.468181818,3.54454545 C0.468181818,3.53969697 0.465757576,3.53727273 0.460909091,3.53727273 L0.396818182,3.53727273 L0.382727273,3.52318182 L0.34,3.52318182 L0.325909091,3.50909091 L0.311818182,3.50909091 L0.297727273,3.495 L0.269090909,3.495 L0.269090909,3.48090909 L0.255,3.48090909 L0.240909091,3.46681818 L0.226818182,3.46681818 L0.226818182,3.45272727 L0.212727273,3.45272727 L0.184090909,3.42409091 L0.17,3.42409091 C0.160606061,3.405 0.151060606,3.39075758 0.141363636,3.38136364 C0.131969697,3.38136364 0.127272727,3.37893939 0.127272727,3.37409091 L0.127272727,3.36681818 L0.113181818,3.35272727 L0.113181818,3.33863636 L0.0990909091,3.33863636 L0.0990909091,3.32454545 L0.085,3.31045455 L0.085,3.30318182 L0.0777272727,3.29590909 L0.0704545455,3.29590909 L0.0704545455,3.28181818 L0.0563636364,3.26772727 L0.0563636364,3.24636364 L0.0490909091,3.23909091 L0.0418181818,3.23909091 L0.0418181818,3.225 C0.0418181818,3.21560606 0.0393939394,3.21090909 0.0345454545,3.21090909 C0.0296969697,3.21090909 0.0272727273,3.20848485 0.0272727273,3.20363636 L0.0272727273,3.15409091 L0.0131818182,3.14 L0.0131818182,2.94090909 L0.0272727273,2.92681818 L0.0272727273,2.88409091 C0.0366666667,2.87469697 0.0413636364,2.86757576 0.0413636364,2.86272727 L0.0413636364,2.84136364 L0.0554545455,2.82727273 L0.0554545455,2.81318182 L0.0695454545,2.79909091 L0.0695454545,2.79181818 L0.0768181818,2.77772727 L0.0840909091,2.77045455 L0.0840909091,2.76318182 L0.0913636364,2.75590909 L0.0986363636,2.74863636 L0.0986363636,2.74136364 L0.112727273,2.72727273 C0.112727273,2.71787879 0.117424242,2.71318182 0.126818182,2.71318182 L0.126818182,2.69909091 L0.140909091,2.69909091 L2.68363636,0.156363636 C2.77848485,0.0521212121 2.89681818,0 3.03863636,0 C3.18045455,0 3.29878788,0.0521212121 3.39363636,0.156363636 C3.49787879,0.260606061 3.55,0.381363636 3.55,0.518636364 C3.55,0.655909091 3.49787879,0.776666667 3.39363636,0.880909091 L1.74590909,2.52863636 L9.48727273,2.52863636 C9.62939394,2.52863636 9.75015152,2.57833333 9.84954545,2.67772727 C9.94893939,2.77712121 9.99863636,2.89787879 9.99863636,3.04 C9.99863636,3.18212121 9.94893939,3.30287879 9.84954545,3.40227273 C9.75015152,3.50166667 9.62939394,3.55136364 9.48727273,3.55136364 L0.481363636,3.55136364 L0.482272727,3.55181818 Z M9.51636364,6.30727273 C9.52575758,6.30727273 9.53045455,6.30969697 9.53045455,6.31454545 C9.53045455,6.31939394 9.53287879,6.32181818 9.53772727,6.32181818 L9.60181818,6.32181818 L9.61590909,6.33590909 L9.65863636,6.33590909 L9.65863636,6.35 L9.68727273,6.35 L9.70136364,6.36409091 L9.73,6.36409091 L9.73,6.37818182 L9.74409091,6.37818182 L9.75818182,6.39227273 L9.77227273,6.39227273 L9.77227273,6.40636364 L9.78636364,6.40636364 L9.815,6.435 L9.82909091,6.435 C9.83848485,6.45409091 9.8480303,6.46833333 9.85772727,6.47772727 C9.86712121,6.47772727 9.87181818,6.48015152 9.87181818,6.485 L9.87181818,6.49227273 L9.88590909,6.50636364 L9.88590909,6.52045455 L9.9,6.52045455 L9.9,6.53454545 L9.90727273,6.53454545 L9.91454545,6.54181818 L9.91454545,6.55590909 L9.92181818,6.56318182 L9.92909091,6.57045455 L9.92909091,6.57772727 L9.94318182,6.59181818 L9.94318182,6.61318182 L9.95045455,6.62045455 L9.95772727,6.62045455 L9.95772727,6.64909091 L9.965,6.65636364 L9.97227273,6.67045455 L9.97227273,6.70590909 L9.98636364,6.72 L9.98636364,6.91909091 L9.97227273,6.93318182 L9.97227273,6.97590909 L9.95818182,6.99 L9.95818182,7.01863636 L9.94409091,7.03272727 L9.94409091,7.04681818 L9.93,7.06090909 L9.93,7.06818182 L9.92272727,7.08227273 L9.91545455,7.08954545 L9.91545455,7.09681818 L9.90818182,7.10409091 L9.90090909,7.11136364 L9.90090909,7.11863636 L9.88681818,7.13272727 C9.88681818,7.14212121 9.88439394,7.14681818 9.87954545,7.14681818 L9.87227273,7.14681818 L9.87227273,7.16090909 L9.85818182,7.16090909 L9.85090909,7.16818182 L9.84363636,7.18954545 L7.32954545,9.70363636 C7.22530303,9.80787879 7.10212121,9.86 6.96,9.86 C6.81787879,9.86 6.69954545,9.80787879 6.605,9.70363636 C6.50075758,9.60878788 6.44863636,9.49045455 6.44863636,9.34863636 C6.44863636,9.20681818 6.50075758,9.08363636 6.605,8.97909091 L8.25272727,7.33136364 L0.511363636,7.33136364 C0.378636364,7.33136364 0.26030303,7.28166667 0.156363636,7.18227273 C0.0524242424,7.08287879 0.000303030303,6.96212121 4.54747351e-13,6.82 C4.54747351e-13,6.67787879 0.0521212121,6.55712121 0.156363636,6.45772727 C0.260606061,6.35833333 0.378939394,6.30863636 0.511363636,6.30863636 L9.51727273,6.30863636 L9.51636364,6.30727273 Z"}))),Fo=a().memo((e=>{const t=e,{className:n,icon:i,syncCopy:l=!1,copyOriginalText:s=(0,r.agQ)("复制原始数据"),copyFormatText:c=(0,r.agQ)("复制格式化数据"),downloadOriginalText:u=(0,r.agQ)("下载原始数据"),downloadFormatText:d=(0,r.agQ)("下载格式化数据"),successText:h=(0,r.agQ)("操作成功"),errorText:f=(0,r.agQ)("操作失败"),sheet:p,fileName:v,open:g,dropdown:m}=t,y=T(t,["className","icon","syncCopy","copyOriginalText","copyFormatText","downloadOriginalText","downloadFormatText","successText","errorText","sheet","fileName","open","dropdown"]),b=`${r.vhY}-export`,C=e=>{const t=(0,r.F1h)(p,"\t",e);(0,r.vQq)(t,l).then((()=>{o.message.success(h)})).catch((e=>{console.log("copy failed: ",e),o.message.error(f)}))},w=e=>{const t=(0,r.F1h)(p,",",e);try{(0,r.LRf)(t,v),o.message.success(h)}catch(e){o.message.error(f)}},x=a().createElement(o.Menu,null,a().createElement(o.Menu.Item,{key:"copyOriginal",onClick:()=>C(!1)},s),a().createElement(o.Menu.Item,{key:"copyFormat",onClick:()=>C(!0)},c),a().createElement(o.Menu.Item,{key:"downloadOriginal",onClick:()=>w(!1)},u),a().createElement(o.Menu.Item,{key:"downloadFormat",onClick:()=>w(!0)},d));return a().createElement(o.Dropdown,I(I({overlay:x,trigger:["click"],className:ao(b,n)},y),m),a().createElement("a",{className:"ant-dropdown-link",key:"export",onClick:e=>e.preventDefault()},i||a().createElement(To,null)))}));Fo.displayName="Export",Fo.defaultProps={syncCopy:!1,fileName:"sheet"};const jo=e=>{const{splitOrders:t=[],setSplitOrders:n}=e;return a().createElement(o.Card,{className:"antv-s2-advanced-sort-card-content"},t.map((e=>a().createElement("li",{key:e,className:"antv-s2-advanced-sort-split-value",title:e},(e=>a().createElement(a().Fragment,null,a().createElement("span",{className:"split-text"},e),a().createElement("span",{className:"antv-s2-advanced-sort-split-icon",onClick:()=>{(e=>{const r=t.concat();r.splice(r.indexOf(e),1),r.unshift(e),n(r)})(e)}},a().createElement(lo,{name:"groupAsc"})),a().createElement("span",{className:"antv-s2-advanced-sort-split-icon",onClick:()=>{(e=>{const r=t.concat();let o=r.indexOf(e);r.splice(r.indexOf(e),1),r.splice(o+=1,0,e),n(r)})(e)}},a().createElement(lo,{name:"groupDesc"})),a().createElement("span",{className:"antv-s2-advanced-sort-split-icon",onClick:()=>{(e=>{const r=t.concat();let o=r.indexOf(e);o>0&&(r.splice(r.indexOf(e),1),r.splice(o-=1,0,e),n(r))})(e)}},a().createElement(lo,{name:"globalAsc"}))))(e)))))},{Sider:zo,Content:Go}=o.Layout,Ho=({sheet:e,className:t,icon:n,text:l,ruleText:s,dimensions:u,ruleOptions:d,sortParams:h,onSortOpen:f,onSortConfirm:p})=>{const[v,g]=(0,i.useState)(!1),[m,y]=(0,i.useState)(!1),[b,C]=(0,i.useState)([]),[w,x]=(0,i.useState)([]),[E,S]=(0,i.useState)([]),[L,O]=(0,i.useState)([]),[T,A]=(0,i.useState)([]),[R,D]=(0,i.useState)(),[k]=o.Form.useForm(),B=a().useMemo(N,[]),P=a().useMemo(M,[]),F=()=>{g(!v)},j=()=>{y(!m)};return(0,i.useEffect)((()=>{if(v){const t=Ir(h,(t=>{const{sortFieldId:n,sortMethod:r,sortBy:o,sortByMeasure:i}=t;let a;return a=o?["sortBy"]:i?["sortByMeasure",i]:["sortMethod"],{field:n,name:e.dataSet.getFieldName(n),rule:a,sortMethod:r,sortBy:o,sortByMeasure:i}})),n=(()=>{if(u)return u;const{fields:t={}}=e.dataCfg||{},{rows:n=[],columns:r=[]}=t;return Ir([...n,...r],(t=>({field:t,name:e.dataSet.getFieldName(t),list:e.dataSet.getDimensionValues(t)})))})(),r=wr(n,(e=>!Sr(h,(t=>t.sortFieldId===e.field)))),o=d||Ir(B,(t=>{if("sortByMeasure"===t.value){const{values:n}=e.dataCfg.fields||{};t.children=Ir(n,(t=>({label:e.dataSet.getFieldName(t),value:t})))}return t}));C(t),S(n),O(r),x(o)}}),[v]),a().createElement("div",{className:ao("antv-s2-advanced-sort",t)},a().createElement(o.Button,{onClick:()=>{f&&f(),F()},icon:n||a().createElement(Mo,null),size:"small",className:"antv-s2-advanced-sort-btn"},l||(0,r.agQ)("高级排序")),a().createElement(o.Modal,{title:l||(0,r.agQ)("高级排序"),visible:v,onOk:()=>{const t=k.getFieldsValue(),{values:n=[]}=e.dataCfg.fields,o=[],i=[];br(bt(t),(e=>{const{sortMethod:a,rule:l=[],sortBy:s}=t[e],c={sortFieldId:e};"sortByMeasure"===l[0]||l[1]?(function(e,t,n,r){var o;e=$e(e)?e:null==(o=e)?[]:function(e,t){return $(t,(function(t){return e[t]}))}(o,bt(o)),n=n?ae(n):0;var i=e.length;return n<0&&(n=Tr(i+n,0)),_r(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Be(e,t,n)>-1}(n,l[1])?c.sortByMeasure=l[1]:c.sortByMeasure=r.Teh,c.sortMethod=a,c.query={$$extra$$:l[1]}):"sortBy"===l[0]?c.sortBy=s:c.sortMethod=a,o.push(I({field:e},t[e])),i.push(c)})),p&&p(o,i),F()},onCancel:F,okText:(0,r.agQ)("确定"),cancelText:(0,r.agQ)("取消"),destroyOnClose:!0,className:"antv-s2-advanced-sort-modal"},a().createElement(o.Layout,null,a().createElement(zo,{width:120,className:"antv-s2-advanced-sort-sider-layout"},a().createElement("div",{className:"antv-s2-advanced-sort-title"},(0,r.agQ)("可选字段")),a().createElement("div",null,Ir(L,(e=>a().createElement("div",{className:"antv-s2-advanced-sort-dimension-item",key:e.field,onClick:()=>{var t;t=e,Sr(b,(e=>e.field===t.field))||(D(t),C([...b,t])),O(wr(L,(e=>e.field!==t.field)))}},e.name))))),a().createElement(Go,{className:"antv-s2-advanced-sort-content-layout"},a().createElement("div",{className:"antv-s2-advanced-sort-title"},s||(0,r.agQ)("按以下规则进行排序（优先级由低到高）")),a().createElement(o.Form,{form:k,name:"form",className:"antv-s2-advanced-sort-custom-form"},Ir(b,(e=>{const{field:t,name:n,rule:i,sortMethod:l,sortBy:s}=e||{};return a().createElement(o.Form.Item,{name:t,key:t},a().createElement(o.Form.Item,{name:[t,"name"],initialValue:n,noStyle:!0},a().createElement(o.Select,{className:"antv-s2-advanced-sort-select",size:"small"})),a().createElement("span",{className:"antv-s2-advanced-sort-field-prefix"},(0,r.agQ)("按")),a().createElement(o.Form.Item,{name:[t,"rule"],initialValue:i||["sortMethod"],noStyle:!0},a().createElement(o.Cascader,{options:w,expandTrigger:"hover",size:"small",allowClear:!1})),a().createElement(o.Form.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:n})=>{return Nr(n([t,"rule"]),["sortBy"])?a().createElement(a().Fragment,null,a().createElement("a",{className:"antv-s2-advanced-sort-rule-end",onClick:()=>{var t,n,r;t=e,n=s,j(),D(t),A(Zr(n||(null==(r=Sr(E,(e=>e.field===t.field)))?void 0:r.list)||[]))}},(0,r.agQ)("设置顺序")),a().createElement(o.Form.Item,{noStyle:!0,name:[t,"sortBy"],initialValue:s})):a().createElement(o.Form.Item,{shouldUpdate:!0,noStyle:!0,name:[t,"sortMethod"],initialValue:(i=l,Gt(i).toUpperCase()||"ASC")},a().createElement(o.Radio.Group,{className:"antv-s2-advanced-sort-rule-end"},Ir(P,(e=>a().createElement(o.Radio,{value:e.value,key:e.value},e.name)))));var i})),a().createElement(c.Z,{className:"antv-s2-advanced-sort-rule-end-delete",onClick:()=>{var t;t=e,C(wr(b,(e=>e.field!==t.field))),O([...L,t])}}))})))))),a().createElement(o.Modal,{title:(0,r.agQ)("手动排序"),visible:m,onOk:()=>{j();const e=k.getFieldsValue([null==R?void 0:R.field]);e.sortBy=T,k.setFieldsValue({[null==R?void 0:R.field]:e});const t=Ir(b,(e=>e.field===(null==R?void 0:R.field)?_(I({},e),{rule:"sortBy",sortBy:T,sortMethod:"",sortByMeasure:""}):e));C(t)},onCancel:()=>{j()},okText:(0,r.agQ)("确定"),cancelText:(0,r.agQ)("取消"),destroyOnClose:!0,className:"antv-s2-advanced-sort-custom-modal"},a().createElement(jo,{splitOrders:T,setSplitOrders:A})))};var Wo=(e=>(e.Rows="rows",e.Cols="columns",e.Values="values",e))(Wo||{}),Uo=(e=>(e.Dimensions="dimensions",e.Measures="measures",e.Rows="rows",e.Cols="cols",e))(Uo||{});const Vo=["rows","columns","values"],Yo=e=>e instanceof r.HZt?"table":"pivot",$o=(e,{fields:t={},meta:n=[]}={},o=[])=>Vo.reduce(((i,a)=>{const l=t[a];if(Mr(l))return i;const s=Ir(l,(e=>{const t=Sr(n,["field",e]);return{id:e,displayName:null==t?void 0:t.name,checked:!o.includes(e)}}));return i[a]=I({items:s},((e,t)=>({selectable:e instanceof r.TA7&&t===Wo.Values||e instanceof r.HZt&&t===Wo.Cols,expandable:e instanceof r.TA7&&t===Wo.Values}))(e,a)),i}),{});function Xo(e,t){return(Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xo(e,t)}function Ko(){return Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ko.apply(this,arguments)}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){Zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ei(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ti="function"==typeof Symbol&&Symbol.observable||"@@observable",ni=function(){return Math.random().toString(36).substring(7).split("").join(".")},ri={INIT:"@@redux/INIT"+ni(),REPLACE:"@@redux/REPLACE"+ni(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ni()}};function oi(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ii(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ei(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(ei(1));return n(ii)(e,t)}if("function"!=typeof e)throw new Error(ei(2));var o=e,i=t,a=[],l=a,s=!1;function c(){l===a&&(l=a.slice())}function u(){if(s)throw new Error(ei(3));return i}function d(e){if("function"!=typeof e)throw new Error(ei(4));if(s)throw new Error(ei(5));var t=!0;return c(),l.push(e),function(){if(t){if(s)throw new Error(ei(6));t=!1,c();var n=l.indexOf(e);l.splice(n,1),a=null}}}function h(e){if(!oi(e))throw new Error(ei(7));if(void 0===e.type)throw new Error(ei(8));if(s)throw new Error(ei(9));try{s=!0,i=o(i,e)}finally{s=!1}for(var t=a=l,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(ei(10));o=e,h({type:ri.REPLACE})}function p(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(ei(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[ti]=function(){return this},e}return h({type:ri.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:f})[ti]=p,r}function ai(e,t){return function(){return t(e.apply(this,arguments))}}function li(e,t){if("function"==typeof e)return ai(e,t);if("object"!=typeof e||null===e)throw new Error(ei(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=ai(o,t))}return n}function si(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var ci=a().createContext(null),ui=function(e){e()};var di={notify:function(){},get:function(){return[]}};function hi(e,t){var n,r=di;function o(){a.onStateChange&&a.onStateChange()}function i(){var i,a,l;n||(n=t?t.addNestedSub(o):e.subscribe(o),i=ui,a=null,l=null,r={clear:function(){a=null,l=null},notify:function(){i((function(){for(var e=a;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=a;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=l={callback:e,next:null,prev:l};return n.prev?n.prev.next=n:a=n,function(){t&&null!==a&&(t=!1,n.next?n.next.prev=n.prev:l=n.prev,n.prev?n.prev.next=n.next:a=n.next)}}})}var a={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=di)},getListeners:function(){return r}};return a}var fi="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function pi(e){var t=e.store,n=e.context,r=e.children,o=(0,i.useMemo)((function(){var e=hi(t);return{store:t,subscription:e}}),[t]),l=(0,i.useMemo)((function(){return t.getState()}),[t]);fi((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,l]);var s=n||ci;return a().createElement(s.Provider,{value:o},r)}function vi(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var gi={exports:{}},mi={},yi="function"==typeof Symbol&&Symbol.for,bi=yi?Symbol.for("react.element"):60103,Ci=yi?Symbol.for("react.portal"):60106,wi=yi?Symbol.for("react.fragment"):60107,xi=yi?Symbol.for("react.strict_mode"):60108,Ei=yi?Symbol.for("react.profiler"):60114,Si=yi?Symbol.for("react.provider"):60109,Li=yi?Symbol.for("react.context"):60110,Oi=yi?Symbol.for("react.async_mode"):60111,Ii=yi?Symbol.for("react.concurrent_mode"):60111,_i=yi?Symbol.for("react.forward_ref"):60112,Ti=yi?Symbol.for("react.suspense"):60113,Ai=yi?Symbol.for("react.suspense_list"):60120,Mi=yi?Symbol.for("react.memo"):60115,Ni=yi?Symbol.for("react.lazy"):60116,Ri=yi?Symbol.for("react.block"):60121,Di=yi?Symbol.for("react.fundamental"):60117,ki=yi?Symbol.for("react.responder"):60118,Bi=yi?Symbol.for("react.scope"):60119;function Pi(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case bi:switch(e=e.type){case Oi:case Ii:case wi:case Ei:case xi:case Ti:return e;default:switch(e=e&&e.$$typeof){case Li:case _i:case Ni:case Mi:case Si:return e;default:return t}}case Ci:return t}}}function Fi(e){return Pi(e)===Ii}mi.AsyncMode=Oi,mi.ConcurrentMode=Ii,mi.ContextConsumer=Li,mi.ContextProvider=Si,mi.Element=bi,mi.ForwardRef=_i,mi.Fragment=wi,mi.Lazy=Ni,mi.Memo=Mi,mi.Portal=Ci,mi.Profiler=Ei,mi.StrictMode=xi,mi.Suspense=Ti,mi.isAsyncMode=function(e){return Fi(e)||Pi(e)===Oi},mi.isConcurrentMode=Fi,mi.isContextConsumer=function(e){return Pi(e)===Li},mi.isContextProvider=function(e){return Pi(e)===Si},mi.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===bi},mi.isForwardRef=function(e){return Pi(e)===_i},mi.isFragment=function(e){return Pi(e)===wi},mi.isLazy=function(e){return Pi(e)===Ni},mi.isMemo=function(e){return Pi(e)===Mi},mi.isPortal=function(e){return Pi(e)===Ci},mi.isProfiler=function(e){return Pi(e)===Ei},mi.isStrictMode=function(e){return Pi(e)===xi},mi.isSuspense=function(e){return Pi(e)===Ti},mi.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===wi||e===Ii||e===Ei||e===xi||e===Ti||e===Ai||"object"==typeof e&&null!==e&&(e.$$typeof===Ni||e.$$typeof===Mi||e.$$typeof===Si||e.$$typeof===Li||e.$$typeof===_i||e.$$typeof===Di||e.$$typeof===ki||e.$$typeof===Bi||e.$$typeof===Ri)},mi.typeOf=Pi,gi.exports=mi;var ji=gi.exports,zi={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Gi={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Hi={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Wi={};function Ui(e){return ji.isMemo(e)?Hi:Wi[e.$$typeof]||zi}Wi[ji.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wi[ji.Memo]=Hi;var Vi=Object.defineProperty,Yi=Object.getOwnPropertyNames,$i=Object.getOwnPropertySymbols,Xi=Object.getOwnPropertyDescriptor,qi=Object.getPrototypeOf,Ki=Object.prototype,Zi=function e(t,n,r){if("string"!=typeof n){if(Ki){var o=qi(n);o&&o!==Ki&&e(t,o,r)}var i=Yi(n);$i&&(i=i.concat($i(n)));for(var a=Ui(t),l=Ui(n),s=0;s<i.length;++s){var c=i[s];if(!(Gi[c]||r&&r[c]||l&&l[c]||a&&a[c])){var u=Xi(n,c);try{Vi(t,c,u)}catch(e){}}}}return t},Qi={exports:{}},Ji={},ea=60103,ta=60106,na=60107,ra=60108,oa=60114,ia=60109,aa=60110,la=60112,sa=60113,ca=60120,ua=60115,da=60116,ha=60121,fa=60122,pa=60117,va=60129,ga=60131;if("function"==typeof Symbol&&Symbol.for){var ma=Symbol.for;ea=ma("react.element"),ta=ma("react.portal"),na=ma("react.fragment"),ra=ma("react.strict_mode"),oa=ma("react.profiler"),ia=ma("react.provider"),aa=ma("react.context"),la=ma("react.forward_ref"),sa=ma("react.suspense"),ca=ma("react.suspense_list"),ua=ma("react.memo"),da=ma("react.lazy"),ha=ma("react.block"),fa=ma("react.server.block"),pa=ma("react.fundamental"),va=ma("react.debug_trace_mode"),ga=ma("react.legacy_hidden")}function ya(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ea:switch(e=e.type){case na:case oa:case ra:case sa:case ca:return e;default:switch(e=e&&e.$$typeof){case aa:case la:case da:case ua:case ia:return e;default:return t}}case ta:return t}}}var ba=ia,Ca=ea,wa=la,xa=na,Ea=da,Sa=ua,La=ta,Oa=oa,Ia=ra,_a=sa;Ji.ContextConsumer=aa,Ji.ContextProvider=ba,Ji.Element=Ca,Ji.ForwardRef=wa,Ji.Fragment=xa,Ji.Lazy=Ea,Ji.Memo=Sa,Ji.Portal=La,Ji.Profiler=Oa,Ji.StrictMode=Ia,Ji.Suspense=_a,Ji.isAsyncMode=function(){return!1},Ji.isConcurrentMode=function(){return!1},Ji.isContextConsumer=function(e){return ya(e)===aa},Ji.isContextProvider=function(e){return ya(e)===ia},Ji.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ea},Ji.isForwardRef=function(e){return ya(e)===la},Ji.isFragment=function(e){return ya(e)===na},Ji.isLazy=function(e){return ya(e)===da},Ji.isMemo=function(e){return ya(e)===ua},Ji.isPortal=function(e){return ya(e)===ta},Ji.isProfiler=function(e){return ya(e)===oa},Ji.isStrictMode=function(e){return ya(e)===ra},Ji.isSuspense=function(e){return ya(e)===sa},Ji.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===na||e===oa||e===va||e===ra||e===sa||e===ca||e===ga||"object"==typeof e&&null!==e&&(e.$$typeof===da||e.$$typeof===ua||e.$$typeof===ia||e.$$typeof===aa||e.$$typeof===la||e.$$typeof===pa||e.$$typeof===ha||e[0]===fa)},Ji.typeOf=ya,Qi.exports=Ji;var Ta=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Aa=["reactReduxForwardedRef"],Ma=[],Na=[null,null];function Ra(e,t){var n=e[1];return[t.payload,n+1]}function Da(e,t,n){fi((function(){return e.apply(void 0,t)}),n)}function ka(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function Ba(e,t,n,r,o,i,a,l,s,c){if(e){var u=!1,d=null,h=function(){if(!u){var e,n,h=t.getState();try{e=r(h,o.current)}catch(e){n=e,d=e}n||(d=null),e===i.current?a.current||s():(i.current=e,l.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=h,n.trySubscribe(),h(),function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var Pa=function(){return[null,0]};function Fa(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,l=n.methodName,s=void 0===l?"connectAdvanced":l,c=n.renderCountProp,u=void 0===c?void 0:c,d=n.shouldHandleStateChanges,h=void 0===d||d,f=n.storeKey,p=void 0===f?"store":f;n.withRef;var v=n.forwardRef,g=void 0!==v&&v,m=n.context,y=void 0===m?ci:m,b=vi(n,Ta),C=y;return function(t){var n=t.displayName||t.name||"Component",r=o(n),l=Ko({},b,{getDisplayName:o,methodName:s,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),c=b.pure,d=c?i.useMemo:function(e){return e()};function f(n){var r=(0,i.useMemo)((function(){var e=n.reactReduxForwardedRef,t=vi(n,Aa);return[n.context,e,t]}),[n]),o=r[0],s=r[1],c=r[2],u=(0,i.useMemo)((function(){return o&&o.Consumer&&Qi.exports.isContextConsumer(a().createElement(o.Consumer,null))?o:C}),[o,C]),f=(0,i.useContext)(u),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var v=p?n.store:f.store,g=(0,i.useMemo)((function(){return function(t){return e(t.dispatch,l)}(v)}),[v]),m=(0,i.useMemo)((function(){if(!h)return Na;var e=hi(v,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,p,f]),y=m[0],b=m[1],w=(0,i.useMemo)((function(){return p?f:Ko({},f,{subscription:y})}),[p,f,y]),x=(0,i.useReducer)(Ra,Ma,Pa),E=x[0][0],S=x[1];if(E&&E.error)throw E.error;var L=(0,i.useRef)(),O=(0,i.useRef)(c),I=(0,i.useRef)(),_=(0,i.useRef)(!1),T=d((function(){return I.current&&c===O.current?I.current:g(v.getState(),c)}),[v,E,c]);Da(ka,[O,L,_,c,T,I,b]),Da(Ba,[h,v,y,g,O,L,_,I,b,S],[v,y,g]);var A=(0,i.useMemo)((function(){return a().createElement(t,Ko({},T,{ref:s}))}),[s,t,T]);return(0,i.useMemo)((function(){return h?a().createElement(u.Provider,{value:w},A):A}),[u,A,w])}var v=c?a().memo(f):f;if(v.WrappedComponent=t,v.displayName=f.displayName=r,g){var m=a().forwardRef((function(e,t){return a().createElement(v,Ko({},e,{reactReduxForwardedRef:t}))}));return m.displayName=r,m.WrappedComponent=t,Zi(m,t)}return Zi(v,t)}}function ja(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function za(e,t){if(ja(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!ja(e[n[o]],t[n[o]]))return!1;return!0}function Ga(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function Ha(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Wa(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Ha(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=Ha(o),o=r(t,n)),o},r}}var Ua=[function(e){return"function"==typeof e?Wa(e):void 0},function(e){return e?void 0:Ga((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?Ga((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}],Va=[function(e){return"function"==typeof e?Wa(e):void 0},function(e){return e?void 0:Ga((function(){return{}}))}];function Ya(e,t,n){return Ko({},n,e,t)}var $a=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,l){var s=e(t,n,l);return a?o&&i(s,r)||(r=s):(a=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return Ya}}],Xa=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function qa(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function Ka(e,t,n,r,o){var i,a,l,s,c,u=o.areStatesEqual,d=o.areOwnPropsEqual,h=o.areStatePropsEqual,f=!1;return function(o,p){return f?function(o,f){var p,v,g=!d(f,a),m=!u(o,i);return i=o,a=f,g&&m?(l=e(i,a),t.dependsOnOwnProps&&(s=t(r,a)),c=n(l,s,a)):g?(e.dependsOnOwnProps&&(l=e(i,a)),t.dependsOnOwnProps&&(s=t(r,a)),c=n(l,s,a)):m?(p=e(i,a),v=!h(p,l),l=p,v&&(c=n(l,s,a)),c):c}(o,p):(l=e(i=o,a=p),s=t(r,a),c=n(l,s,a),f=!0,c)}}function Za(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=vi(t,Xa),a=n(e,i),l=r(e,i),s=o(e,i);return(i.pure?Ka:qa)(a,l,s,e,i)}var Qa=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Ja(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function el(e,t){return e===t}function tl(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Fa:n,o=t.mapStateToPropsFactories,i=void 0===o?Va:o,a=t.mapDispatchToPropsFactories,l=void 0===a?Ua:a,s=t.mergePropsFactories,c=void 0===s?$a:s,u=t.selectorFactory,d=void 0===u?Za:u;return function(e,t,n,o){void 0===o&&(o={});var a=o,s=a.pure,u=void 0===s||s,h=a.areStatesEqual,f=void 0===h?el:h,p=a.areOwnPropsEqual,v=void 0===p?za:p,g=a.areStatePropsEqual,m=void 0===g?za:g,y=a.areMergedPropsEqual,b=void 0===y?za:y,C=vi(a,Qa),w=Ja(e,i,"mapStateToProps"),x=Ja(t,l,"mapDispatchToProps"),E=Ja(n,c,"mergeProps");return r(d,Ko({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:x,initMergeProps:E,pure:u,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:m,areMergedPropsEqual:b},C))}}var nl,rl=tl();function ol(e,t){var n=(0,i.useState)((function(){return{inputs:t,result:e()}}))[0],r=(0,i.useRef)(!0),o=(0,i.useRef)(n),a=r.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,i.useEffect)((function(){r.current=!1,o.current=a}),[a]),a.result}nl=l.unstable_batchedUpdates,ui=nl;var il=ol,al=function(e,t){return ol((function(){return e}),t)},ll=function(e){var t=e.top,n=e.right,r=e.bottom,o=e.left;return{top:t,right:n,bottom:r,left:o,width:n-o,height:r-t,x:o,y:t,center:{x:(n+o)/2,y:(r+t)/2}}},sl=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},cl=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},ul={top:0,right:0,bottom:0,left:0},dl=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?ul:n,o=e.border,i=void 0===o?ul:o,a=e.padding,l=void 0===a?ul:a,s=ll(sl(t,r)),c=ll(cl(t,i)),u=ll(cl(c,l));return{marginBox:s,borderBox:ll(t),paddingBox:c,contentBox:u,margin:r,border:i,padding:l}},hl=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){throw new Error("Invariant failed")}(),n},fl=function(e,t){var n,r,o=e.borderBox,i=e.border,a=e.margin,l=e.padding,s=(r=t,{top:(n=o).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return dl({borderBox:s,border:i,margin:a,padding:l})},pl=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),fl(e,t)},vl=function(e,t){var n={top:hl(t.marginTop),right:hl(t.marginRight),bottom:hl(t.marginBottom),left:hl(t.marginLeft)},r={top:hl(t.paddingTop),right:hl(t.paddingRight),bottom:hl(t.paddingBottom),left:hl(t.paddingLeft)},o={top:hl(t.borderTopWidth),right:hl(t.borderRightWidth),bottom:hl(t.borderBottomWidth),left:hl(t.borderLeftWidth)};return dl({borderBox:e,margin:n,padding:r,border:o})},gl=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return vl(t,n)},ml=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function yl(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(o=t[n])||ml(r)&&ml(o)))return!1;var r,o;return!0}function bl(e,t){var n;void 0===t&&(t=yl);var r,o=[],i=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return i&&n===this&&t(a,o)||(r=e.apply(this,a),i=!0,n=this,o=a),r}}var Cl=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function wl(e,t){}function xl(){}function El(e,t,n){var r=t.map((function(t){var r=Ko({},n,{},t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}function Sl(e){this.message=e}function Ll(e,t){if(!e)throw new Sl("Invariant failed")}wl.bind(null,"warn"),wl.bind(null,"error"),Sl.prototype.toString=function(){return this.message};var Ol=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=xl,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Sl&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}qo(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=El(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Sl))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(a().Component),Il=function(e){return e+1},_l=function(e,t){var n=e.droppableId===t.droppableId,r=Il(e.index),o=Il(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+o+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+o+"\n  "},Tl=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Al=function(e){return"\n  The item has returned to its starting position\n  of "+Il(e.index)+"\n"},Ml=function(e){return"\n  You have lifted an item in position "+Il(e.source.index)+"\n"},Nl=function(e){var t=e.destination;if(t)return _l(e.source,t);var n=e.combine;return n?Tl(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Rl=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Al(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+_l(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+Tl(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Al(e.source)+"\n  "},Dl={x:0,y:0},kl=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Bl=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Pl=function(e,t){return e.x===t.x&&e.y===t.y},Fl=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},jl=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},zl=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},Gl=function(e,t){return Math.min.apply(Math,t.map((function(t){return zl(e,t)})))},Hl=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},Wl=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ul=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Vl=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=ll({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):ll(e)},Yl=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,o=e.frame,i=function(e,t){return t?Wl(e,t.scroll.diff.displacement):e}(t.marginBox,o),a=function(e,t,n){var r;return n&&n.increasedBy?Ko({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(i,r,n);return{page:t,withPlaceholder:n,active:Vl(a,o)}},$l=function(e,t){e.frame||Ll(!1);var n=e.frame,r=Bl(t,n.scroll.initial),o=Fl(r),i=Ko({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}});return Ko({},e,{frame:i,subject:Yl({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function Xl(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function ql(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Kl(e,t){if(e.find)return e.find(t);var n=ql(e,t);return-1!==n?e[n]:void 0}function Zl(e){return Array.prototype.slice.call(e)}var Ql=bl((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Jl=bl((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),es=bl((function(e){return Xl(e)})),ts=bl((function(e){return Xl(e)})),ns=bl((function(e,t){return ts(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function rs(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function os(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var is=bl((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),as=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ls={point:Dl,value:0},ss={invisible:{},visible:{},all:[]},cs={displaced:ss,displacedBy:ls,at:null},us=function(e,t){return function(n){return e<=n&&n<=t}},ds=function(e){var t=us(e.top,e.bottom),n=us(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;var a=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return!(!a||!l)||a&&i||l&&o}},hs=function(e){var t=us(e.top,e.bottom),n=us(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},fs={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ps={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},vs=function(e){var t=e.target,n=e.destination,r=e.viewport,o=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,a=o?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Dl;return Wl(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(a,n,i)&&function(e,t,n){return n(t)(e)}(a,r,i)},gs=function(e){return vs(Ko({},e,{isVisibleThroughFrameFn:hs}))};function ms(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var l=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return ll(sl(n,r))}(t,r),s=t.descriptor.id;if(e.all.push(s),!vs(Ko({},{target:l,destination:n,viewport:o,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:ds})))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,o=t.visible;if(r[e])return!1;var i=o[e];return!i||i.shouldAnimate}(s,a,i),u={draggableId:s,shouldAnimate:c};return e.visible[s]=u,e}),{all:[],visible:{},invisible:{}})}function ys(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,o=e.destination,i=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:ss,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function bs(e){var t=e.draggable,n=e.insideDestination,r=e.destination,o=e.viewport,i=e.displacedBy,a=e.last,l=e.index,s=e.forceShouldAnimate,c=as(t,r);if(null==l)return ys({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var u=Kl(n,(function(e){return e.descriptor.index===l}));if(!u)return ys({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var d=is(t,n),h=n.indexOf(u);return{displaced:ms({afterDragging:d.slice(h),destination:r,displacedBy:i,last:a,viewport:o.frame,forceShouldAnimate:s}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function Cs(e,t){return Boolean(t.effected[e])}var ws=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},xs=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Es=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return jl(t.line,n.marginBox[t.end]+ws(t,r),xs(t,n.marginBox,r))},Ss=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return jl(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),xs(t,n.marginBox,r))},Ls=function(e,t){var n=e.frame;return n?kl(t,n.scroll.diff.displacement):t},Os=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.afterCritical,a=n.page.borderBox.center,l=t.at;return r&&l?"REORDER"===l.type?function(e){var t=e.impact,n=e.draggable,r=e.draggables,o=e.droppable,i=e.afterCritical,a=ns(o.descriptor.id,r),l=n.page,s=o.axis;if(!a.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return jl(t.line,n.contentBox[t.start]+ws(t,r),xs(t,n.contentBox,r))}({axis:s,moveInto:o.page,isMoving:l});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var h=r[d];if(Cs(d,i))return Ss({axis:s,moveRelativeTo:h.page,isMoving:l});var f=fl(h.page,u.point);return Ss({axis:s,moveRelativeTo:f,isMoving:l})}var p=a[a.length-1];if(p.descriptor.id===n.descriptor.id)return l.borderBox.center;if(Cs(p.descriptor.id,i)){var v=fl(p.page,Fl(i.displacedBy.point));return Es({axis:s,moveRelativeTo:v,isMoving:l})}return Es({axis:s,moveRelativeTo:p.page,isMoving:l})}({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:i}):function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,o=os(n);o||Ll(!1);var i=o.draggableId,a=r[i].page.borderBox.center,l=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,o=e.displacedBy,i=Boolean(t.visible[r]||t.invisible[r]);return Cs(r,n)?i?Dl:Fl(o.point):i?o.point:Dl}({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return kl(a,l)}({impact:t,draggables:o,afterCritical:i}):a}(e),n=e.droppable;return n?Ls(n,t):t},Is=function(e,t){var n=Bl(t,e.scroll.initial),r=Fl(n);return{frame:ll({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function _s(e,t){return e.map((function(e){return t[e]}))}var Ts=function(e){var t,n,r=e.pageBorderBoxCenter,o=e.draggable,i=(t=e.viewport,n=r,kl(t.scroll.diff.displacement,n)),a=Bl(i,o.page.borderBox.center);return kl(o.client.borderBox.center,a)},As=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,a=e.onlyOnMainAxis,l=void 0!==a&&a,s=Bl(r,t.page.borderBox.center),c={target:Wl(t.page.borderBox,s),destination:n,withDroppableDisplacement:i,viewport:o};return l?function(e){return vs(Ko({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=us(e.top,e.bottom),r=us(e.left,e.right);return function(e){return t===fs?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):gs(c)},Ms=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.draggables,i=e.previousImpact,a=e.viewport,l=e.previousPageBorderBoxCenter,s=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=ns(r.descriptor.id,o),d=as(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.previousImpact;if(!r.isCombineEnabled)return null;if(!rs(i))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return Ko({},i,{at:t})}var l=i.displaced.all,s=l.length?l[0]:null;if(t)return s?a(s):null;var c=is(n,o);if(!s)return c.length?a(c[c.length-1].descriptor.id):null;var u=ql(c,(function(e){return e.descriptor.id===s}));-1===u&&Ll(!1);var d=u-1;return d<0?null:a(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:i})||function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,o=e.draggables,i=e.destination,a=e.insideDestination,l=e.previousImpact,s=e.viewport,c=e.afterCritical,u=l.at;if(u||Ll(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,o=e.location;if(!r.length)return null;var i=o.index,a=t?i+1:i-1,l=r[0].descriptor.index,s=r[r.length-1].descriptor.index;return a<l||a>(n?s:s+1)?null:a}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:a});return null==d?null:bs({draggable:r,insideDestination:a,destination:i,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:d})}var h=function(e){var t=e.isMovingForward,n=e.draggables,r=e.combine,o=e.afterCritical;if(!e.destination.isCombineEnabled)return null;var i=r.draggableId,a=n[i].descriptor.index;return Cs(i,o)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:i,displaced:l.displaced,draggables:o,combine:u.combine,afterCritical:c});return null==h?null:bs({draggable:r,insideDestination:a,destination:i,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:h})}({isMovingForward:t,isInHomeList:d,draggable:n,draggables:o,destination:r,insideDestination:u,previousImpact:i,viewport:a,afterCritical:c});if(!h)return null;var f=Os({impact:h,draggable:n,droppable:r,draggables:o,afterCritical:c});if(As({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Ts({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null};var p=Bl(f,l),v=function(e){var t=e.impact,n=e.viewport,r=e.destination,o=e.draggables,i=e.maxScrollChange,a=Is(n,kl(n.scroll.current,i)),l=r.frame?$l(r,kl(r.frame.scroll.current,i)):r,s=t.displaced,c=ms({afterDragging:_s(s.all,o),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),u=ms({afterDragging:_s(s.all,o),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:s,forceShouldAnimate:!1}),d={},h={},f=[s,c,u];return s.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?h[e]=t:d[e]=!0})),Ko({},t,{displaced:{all:s.all,invisible:d,visible:h}})}({impact:h,viewport:a,destination:r,draggables:o,maxScrollChange:p});return{clientSelection:s,impact:v,scrollJumpRequest:p}},Ns=function(e){var t=e.subject.active;return t||Ll(!1),t},Rs=function(e,t){var n=e.page.borderBox.center;return Cs(e.descriptor.id,t)?Bl(n,t.displacedBy.point):n},Ds=function(e,t){var n=e.page.borderBox;return Cs(e.descriptor.id,t)?Wl(n,Fl(t.displacedBy.point)):n},ks=bl((function(e,t){var n=t[e.line];return{value:n,point:jl(e.line,n)}})),Bs=function(e,t){return Ko({},e,{scroll:Ko({},e.scroll,{max:t})})},Ps=function(e,t,n){var r=e.frame;as(t,e)&&Ll(!1),e.subject.withPlaceholder&&Ll(!1);var o=ks(e.axis,t.displaceBy).point,i=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return jl(r.line,t[r.line]);var o=e.subject.page.contentBox[r.size],i=ns(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-o;return i<=0?null:jl(r.line,i)}(e,o,n),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return Ko({},e,{subject:Yl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var l=i?kl(r.scroll.max,i):r.scroll.max,s=Bs(r,l);return Ko({},e,{subject:Yl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:s}),frame:s})},Fs=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},js=function(e){var t=e.state,n=e.type,r=function(e,t){var n=Fs(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),o=Boolean(r),i=t.dimensions.droppables[t.critical.droppable.id],a=r||i,l=a.axis.direction,s="vertical"===l&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===l&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(s&&!o)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,h=t.dimensions,f=h.draggables,p=h.droppables;return s?Ms({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,o=e.isOver,i=e.draggables,a=e.droppables,l=e.viewport,s=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,o=e.droppables,i=e.viewport,a=r.subject.active;if(!a)return null;var l=r.axis,s=us(a[l.start],a[l.end]),c=es(o).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return ds(i.frame)(Ns(e))})).filter((function(e){var n=Ns(e);return t?a[l.crossAxisEnd]<n[l.crossAxisEnd]:n[l.crossAxisStart]<a[l.crossAxisStart]})).filter((function(e){var t=Ns(e),n=us(t[l.start],t[l.end]);return s(t[l.start])||s(t[l.end])||n(a[l.start])||n(a[l.end])})).sort((function(e,n){var r=Ns(e)[l.crossAxisStart],o=Ns(n)[l.crossAxisStart];return t?r-o:o-r})).filter((function(e,t,n){return Ns(e)[l.crossAxisStart]===Ns(n[0])[l.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter((function(e){return us(Ns(e)[l.start],Ns(e)[l.end])(n[l.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return Ns(e)[l.start]-Ns(t)[l.start]}))[0]:c.sort((function(e,t){var r=Gl(n,Ul(Ns(e))),o=Gl(n,Ul(Ns(t)));return r!==o?r-o:Ns(e)[l.start]-Ns(t)[l.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:o,droppables:a,viewport:l});if(!c)return null;var u=ns(c.descriptor.id,i),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,o=e.afterCritical;return e.insideDestination.filter((function(e){return gs({target:Ds(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=zl(t,Ls(r,Rs(e,o))),a=zl(t,Ls(r,Rs(n,o)));return i<a?-1:a<i?1:e.descriptor.index-n.descriptor.index}))[0]||null}({pageBorderBoxCenter:n,viewport:l,destination:c,insideDestination:u,afterCritical:s}),h=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,o=e.draggable,i=e.draggables,a=e.destination,l=e.viewport,s=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:ss,displacedBy:ls,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Os({impact:c,draggable:o,droppable:a,draggables:i,afterCritical:s}),d=as(o,a)?a:Ps(a,o,i);return As({draggable:o,destination:d,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var h,f=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),p=(h=n.descriptor.index,n.descriptor.id===o.descriptor.id||f?h:h+1);return bs({draggable:o,insideDestination:r,destination:a,viewport:l,displacedBy:ks(a.axis,o.displaceBy),last:ss,index:p})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:l,afterCritical:s});if(!h)return null;var f=Os({impact:h,draggable:r,droppable:c,draggables:i,afterCritical:s});return{clientSelection:Ts({pageBorderBoxCenter:f,draggable:r,viewport:l}),impact:h,scrollJumpRequest:null}}({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function zs(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Gs(e){var t=us(e.top,e.bottom),n=us(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}var Hs=function(e,t){return ll(Wl(e,t))};function Ws(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var Us=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,o=e.droppables,i=e.previousImpact,a=e.viewport,l=e.afterCritical,s=Hs(n.page.borderBox,t),c=function(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,o=es(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,o=e.subject.active;if(!o)return!1;if(r=o,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(Gs(o)(t.center))return!0;var i=e.axis,a=o.center[i.crossAxisLine],l=t[i.crossAxisStart],s=t[i.crossAxisEnd],c=us(o[i.crossAxisStart],o[i.crossAxisEnd]),u=c(l),d=c(s);return!u&&!d||(u?l<a:s>a)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.candidates,r=e.draggable.page.borderBox.center,o=n.map((function(e){var n=e.axis,o=jl(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:zl(r,o)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:o}):null}({pageBorderBox:s,draggable:n,droppables:o});if(!c)return cs;var u,d,h=o[c],f=ns(h.descriptor.id,r),p=(u=s,(d=h.frame)?Hs(u,d.scroll.diff.value):u);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,o=e.destination,i=e.insideDestination,a=e.afterCritical;if(!o.isCombineEnabled)return null;var l=o.axis,s=ks(o.axis,t.displaceBy),c=s.value,u=n[l.start],d=n[l.end],h=Kl(is(t,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox,o=n[l.size]/4,i=Cs(t,a),s=Ws({displaced:r.displaced,id:t});return i?s?d>n[l.start]+o&&d<n[l.end]-o:u>n[l.start]-c+o&&u<n[l.end]-c-o:s?d>n[l.start]+c+o&&d<n[l.end]+c-o:u>n[l.start]+o&&u<n[l.end]-o}));return h?{displacedBy:s,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:i,destination:h,insideDestination:f,afterCritical:l})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.last,a=e.viewport,l=e.afterCritical,s=r.axis,c=ks(r.axis,n.displaceBy),u=c.value,d=t[s.start],h=t[s.end],f=function(e){var t=e.draggable,n=e.closest;return n?e.inHomeList&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:Kl(is(n,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=Cs(t,l),o=Ws({displaced:i,id:t});return r?o?h<=n:d<n-u:o?h<=n+u:d<n})),inHomeList:as(n,r)});return bs({draggable:n,insideDestination:o,destination:r,viewport:a,last:i,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:h,insideDestination:f,last:i.displaced,viewport:a,afterCritical:l})},Vs=function(e,t){var n;return Ko({},e,((n={})[t.descriptor.id]=t,n))},Ys=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,o=e.viewport,i=e.impact,a=e.scrollJumpRequest,l=o||t.viewport,s=r||t.dimensions,c=n||t.current.client.selection,u=Bl(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:kl(t.initial.client.borderBoxCenter,u)},h={selection:kl(d.selection,l.scroll.current),borderBoxCenter:kl(d.borderBoxCenter,l.scroll.current),offset:kl(d.offset,l.scroll.diff.value)},f={client:d,page:h};if("COLLECTING"===t.phase)return Ko({phase:"COLLECTING"},t,{dimensions:s,viewport:l,current:f});var p=s.draggables[t.critical.draggable.id],v=i||Us({pageOffset:h.offset,draggable:p,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,o=e.impact,i=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,o=Fs(t),i=Fs(n);if(!o)return r;if(o===i)return r;var a=r[o];if(!a.subject.withPlaceholder)return r;var l=function(e){var t=e.subject.withPlaceholder;t||Ll(!1);var n=e.frame;if(!n)return Ko({},e,{subject:Yl({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Ll(!1);var o=Bs(n,r);return Ko({},e,{subject:Yl({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null}),frame:o})}(a);return Vs(r,l)}({previousImpact:e.previousImpact,impact:o,droppables:r}),a=Fs(o);if(!a)return i;var l=r[a];if(as(t,l))return i;if(l.subject.withPlaceholder)return i;var s=Ps(l,t,n);return Vs(i,s)}({draggable:p,impact:v,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return Ko({},t,{current:f,dimensions:{draggables:s.draggables,droppables:g},impact:v,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})},$s=function(e){var t=e.impact,n=e.viewport,r=e.draggables,o=e.destination,i=e.forceShouldAnimate,a=t.displaced,l=function(e,t){return e.map((function(e){return t[e]}))}(a.all,r);return Ko({},t,{displaced:ms({afterDragging:l,destination:o,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a})})},Xs=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.viewport,a=e.afterCritical,l=Os({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:a});return Ts({pageBorderBoxCenter:l,draggable:n,viewport:i})},qs=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Ll(!1);var o=t.impact,i=r||t.viewport,a=n||t.dimensions,l=a.draggables,s=a.droppables,c=l[t.critical.draggable.id],u=Fs(o);u||Ll(!1);var d=s[u],h=$s({impact:o,viewport:i,destination:d,draggables:l}),f=Xs({impact:h,draggable:c,droppable:d,draggables:l,viewport:i,afterCritical:t.afterCritical});return Ys({impact:h,clientSelection:f,state:t,dimensions:a,viewport:i})},Ks=function(e){var t=e.draggable,n=e.home,r=e.draggables,o=e.viewport,i=ks(n.axis,t.displaceBy),a=ns(n.descriptor.id,r),l=a.indexOf(t);-1===l&&Ll(!1);var s,c=a.slice(l+1),u=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:i,effected:u};return{impact:{displaced:ms({afterDragging:c,destination:n,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(s=t.descriptor,{index:s.index,droppableId:s.droppableId})}},afterCritical:d}},Zs=function(e){return"SNAP"===e.movementMode},Qs=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:Vs(e.droppables,t)}}(e.dimensions,t);return!Zs(e)||n?Ys({state:e,dimensions:r}):qs({state:e,dimensions:r})};function Js(e){return e.isDragging&&"SNAP"===e.movementMode?Ko({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ec={phase:"IDLE",completed:null,shouldFlush:!1},tc=function(e,t){if(void 0===e&&(e=ec),"FLUSH"===t.type)return Ko({},ec,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Ll(!1);var n=t.payload,r=n.critical,o=n.clientSelection,i=n.viewport,a=n.dimensions,l=n.movementMode,s=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],u={selection:o,borderBoxCenter:s.client.borderBox.center,offset:Dl},d={client:u,page:{selection:kl(u.selection,i.scroll.initial),borderBoxCenter:kl(u.selection,i.scroll.initial),offset:kl(u.selection,i.scroll.diff.value)}},h=es(a.droppables).every((function(e){return!e.isFixedOnPage})),f=Ks({draggable:s,home:c,draggables:a.draggables,viewport:i}),p=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:a,initial:d,current:d,isWindowScrollAllowed:h,impact:p,afterCritical:f.afterCritical,onLiftImpact:p,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Ll(!1),Ko({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ll(!1),function(e){var t=e.state,n=e.published,r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return $l(n,e.scroll)})),o=Ko({},t.dimensions.droppables,{},Ql(r)),i=Jl(function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,o=r.scroll.diff.value;return t.map((function(e){var t,i,a=e.descriptor.droppableId,l=(t=n[a],i=t.frame,i||Ll(!1),i).scroll.diff.value,s=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,o=fl(t.client,n),i=pl(o,r);return Ko({},t,{placeholder:Ko({},t.placeholder,{client:o}),client:o,page:i})}({draggable:e,offset:kl(o,l),initialWindowScroll:r.scroll.initial});return s}))}({additions:n.additions,updatedDroppables:o,viewport:t.viewport})),a=Ko({},t.dimensions.draggables,{},i);n.removals.forEach((function(e){delete a[e]}));var l={droppables:o,draggables:a},s=Fs(t.impact),c=s?l.droppables[s]:null,u=l.draggables[t.critical.draggable.id],d=l.droppables[t.critical.droppable.id],h=Ks({draggable:u,home:d,draggables:a,viewport:t.viewport}),f=h.impact,p=h.afterCritical,v=c&&c.isCombineEnabled?t.impact:f,g=Us({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:t.viewport,afterCritical:p}),m=Ko({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:l,afterCritical:p,forceShouldAnimate:!1});return"COLLECTING"===t.phase?m:Ko({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;zs(e)||Ll(!1);var v=t.payload.client;return Pl(v,e.current.client.selection)?e:Ys({state:e,clientSelection:v,impact:Zs(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Js(e);if("COLLECTING"===e.phase)return Js(e);zs(e)||Ll(!1);var g=t.payload,m=g.id,y=g.newScroll,b=e.dimensions.droppables[m];if(!b)return e;var C=$l(b,y);return Qs(e,C,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;zs(e)||Ll(!1);var w=t.payload,x=w.id,E=w.isEnabled,S=e.dimensions.droppables[x];S||Ll(!1),S.isEnabled===E&&Ll(!1);var L=Ko({},S,{isEnabled:E});return Qs(e,L,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;zs(e)||Ll(!1);var O=t.payload,I=O.id,_=O.isCombineEnabled,T=e.dimensions.droppables[I];T||Ll(!1),T.isCombineEnabled===_&&Ll(!1);var A=Ko({},T,{isCombineEnabled:_});return Qs(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;zs(e)||Ll(!1),e.isWindowScrollAllowed||Ll(!1);var M=t.payload.newScroll;if(Pl(e.viewport.scroll.current,M))return Js(e);var N=Is(e.viewport,M);return Zs(e)?qs({state:e,viewport:N}):Ys({state:e,viewport:N})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!zs(e))return e;var R=t.payload.maxScroll;if(Pl(R,e.viewport.scroll.max))return e;var D=Ko({},e.viewport,{scroll:Ko({},e.viewport.scroll,{max:R})});return Ko({phase:"DRAGGING"},e,{viewport:D})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Ll(!1);var k=js({state:e,type:t.type});return k?Ys({state:e,impact:k.impact,clientSelection:k.clientSelection,scrollJumpRequest:k.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var B=t.payload.reason;return"COLLECTING"!==e.phase&&Ll(!1),Ko({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:B})}if("DROP_ANIMATE"===t.type){var P=t.payload,F=P.completed,j=P.dropDuration,z=P.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ll(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:j,newHomeClientOffset:z,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},nc=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},rc=function(){return{type:"COLLECTION_STARTING",payload:null}},oc=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},ic=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},ac=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},lc=function(e){return{type:"MOVE",payload:e}},sc=function(){return{type:"MOVE_UP",payload:null}},cc=function(){return{type:"MOVE_DOWN",payload:null}},uc=function(){return{type:"MOVE_RIGHT",payload:null}},dc=function(){return{type:"MOVE_LEFT",payload:null}},hc=function(e){return{type:"DROP_COMPLETE",payload:e}},fc=function(e){return{type:"DROP",payload:e}},pc="cubic-bezier(.2,1,.1,1)",vc=0,gc=.7,mc=.75,yc="0.2s cubic-bezier(0.2, 0, 0, 1)",bc={fluid:"opacity "+yc,snap:"transform "+yc+", opacity "+yc,drop:function(e){var t=e+"s "+pc;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+yc,placeholder:"height "+yc+", width "+yc+", margin "+yc},Cc=function(e){return Pl(e,Dl)?null:"translate("+e.x+"px, "+e.y+"px)"},wc=Cc,xc=.33,Ec=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var o=t(),i=r.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){"DROP_PENDING"===o.phase&&o.isWaiting&&Ll(!1),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&Ll(!1);var a=o.critical,l=o.dimensions,s=l.draggables[o.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,o=e.home,i=e.viewport,a=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:Ko({},r,{displaced:ss}),didDropInsideDroppable:!0}:{impact:$s({draggables:t,impact:a,destination:o,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,h=d?rs(u):null,f=d?os(u):null,p={index:a.draggable.index,droppableId:a.droppable.id},v={draggableId:s.descriptor.id,type:s.descriptor.type,source:p,reason:i,mode:o.movementMode,destination:h,combine:f},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,o=e.viewport,i=e.afterCritical,a=r.draggables,l=r.droppables,s=Fs(t),c=s?l[s]:null,u=l[n.descriptor.droppableId],d=Xs({impact:t,draggable:n,draggables:a,afterCritical:i,droppable:c||u,viewport:o});return Bl(d,n.client.borderBox.center)}({impact:u,draggable:s,dimensions:l,viewport:o.viewport,afterCritical:o.afterCritical}),m={critical:o.critical,afterCritical:o.afterCritical,result:v,impact:u};if(!Pl(o.current.client.offset,g)||Boolean(v.combine)){var y=function(e){var t=e.reason,n=zl(e.current,e.destination);if(n<=0)return xc;if(n>=1500)return.55;var r=xc+n/1500*.22000000000000003;return Number(("CANCEL"===t?.6*r:r).toFixed(2))}({current:o.current.client.offset,destination:g,reason:i});n({type:"DROP_ANIMATE",payload:{newHomeClientOffset:g,dropDuration:y,completed:m}})}else n(hc({completed:m}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(r)}}},Sc=function(){return{x:window.pageXOffset,y:window.pageYOffset}};var Lc=function(e){var t=function(e){var t,n=e.onWindowScroll,r=Cl((function(){n(Sc())})),o=(t=r,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||t()}}),i=xl;function a(){return i!==xl}return{start:function(){a()&&Ll(!1),i=El(window,[o])},stop:function(){a()||Ll(!1),r.cancel(),i(),i=xl},isActive:a}}({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},Oc=function(e,t){t()},Ic=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},_c=function(e,t,n,r){if(e){var o=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),o=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return o.wasCalled=function(){return t},o}(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}else n(r(t))},Tc=function(e,t){var n=function(e,t){var n,r=(n=[],{add:function(e){var t=setTimeout((function(){return function(e){var t=ql(n,(function(t){return t.timerId===e}));-1===t&&Ll(!1),n.splice(t,1)[0].callback()}(t)})),r={timerId:t,callback:e};n.push(r)},flush:function(){if(n.length){var e=[].concat(n);n.length=0,e.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}),o=null,i=function(n){o||Ll(!1),o=null,Oc(0,(function(){return _c(e().onDragEnd,n,t,Rl)}))};return{beforeCapture:function(t,n){o&&Ll(!1),Oc(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){o&&Ll(!1),Oc(0,(function(){var r=e().onBeforeDragStart;r&&r(Ic(t,n))}))},start:function(n,i){o&&Ll(!1);var a=Ic(n,i);o={mode:i,lastCritical:n,lastLocation:a.source,lastCombine:null},r.add((function(){Oc(0,(function(){return _c(e().onDragStart,a,t,Ml)}))}))},update:function(n,i){var a=rs(i),l=os(i);o||Ll(!1);var s=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(n,o.lastCritical);s&&(o.lastCritical=n);var c,u,d=(u=a,!(null==(c=o.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(o.lastLocation=a);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(o.lastCombine,l);if(h&&(o.lastCombine=l),s||d||h){var f=Ko({},Ic(n,o.mode),{combine:l,destination:a});r.add((function(){Oc(0,(function(){return _c(e().onDragUpdate,f,t,Nl)}))}))}},flush:function(){o||Ll(!1),r.flush()},drop:i,abort:function(){if(o){var e=Ko({},Ic(o.lastCritical,o.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var o=r.payload.critical;return n.beforeStart(o,r.payload.movementMode),t(r),void n.start(o,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var i=r.payload.completed.result;return n.flush(),t(r),void n.drop(i)}if(t(r),"FLUSH"!==r.type){var a=e.getState();"DRAGGING"===a.phase&&n.update(a.critical,a.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Ac=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Ll(!1),e.dispatch(hc({completed:r.completed}))}else t(n)}}},Mc=function(e){var t=null,n=null;return function(r){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(o),"DROP_ANIMATE"===o.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=El(window,[i])}))}}}},Nc=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(fc({reason:r.reason})))}}}},Rc=si,Dc=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,o=e.width,i=Bl({x:n,y:t},{x:o,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},kc=function(){var e=document.documentElement;return e||Ll(!1),e},Bc=function(){var e=kc();return Dc({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})};function Pc(e,t,n){return n.descriptor.id!==t.id&&n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var Fc,jc,zc=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},o=null,i=function(){o||(n.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=r,i=e.additions,a=e.removals,l=e.modified,s=Object.keys(i).map((function(e){return t.draggable.getById(e).getDimension(Dl)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(l).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:s,removals:Object.keys(a),modified:c};r={additions:{},removals:{},modified:{}},n.publish(u)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){n||Ll(!1);var o=n.critical.draggable;"ADDITION"===t.type&&Pc(e,o,t.value)&&r.add(t.value),"REMOVAL"===t.type&&Pc(e,o,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,o){e.droppable.exists(r)||Ll(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:o})},updateDroppableIsCombineEnabled:function(r,o){n&&(e.droppable.exists(r)||Ll(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:o}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,o){n&&(e.droppable.exists(r)||Ll(!1),t.updateDroppableScroll({id:r,newScroll:o}))},startPublishing:function(t){n&&Ll(!1);var r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},l=e.subscribe(o);return n={critical:a,unsubscribe:l},function(e){var t,n,r,o,i,a,l,s=e.critical,c=e.scrollOptions,u=e.registry,d=(t=Sc(),n=Bc(),r=t.y,o=t.x,a=(i=kc()).clientWidth,l=i.clientHeight,{frame:ll({top:r,left:o,right:o+a,bottom:r+l}),scroll:{initial:t,current:t,max:n,diff:{value:Dl,displacement:Dl}}}),h=d.scroll.current,f=s.droppable,p=u.droppable.getAllByType(f.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(h,c)})),v=u.draggable.getAllByType(s.draggable.type).map((function(e){return e.getDimension(h)}));return{dimensions:{draggables:Jl(v),droppables:Ql(p)},critical:s,viewport:d}}({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},Gc=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},Hc=function(e){window.scrollBy(e.x,e.y)},Wc=bl((function(e){return es(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),Uc=function(e){return Math.pow(e,2)},Vc=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,o=n-t;return 0===o?0:(r-t)/o},Yc=360,$c=1200,Xc=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,o=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return 28;if(e===t.startScrollingFrom)return 1;var n=Vc({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=28*Uc(1-n);return Math.ceil(r)}(t,n);return 0===i?0:o?Math.max(function(e,t){var n=t,r=$c,o=Date.now()-n;if(o>=$c)return e;if(o<Yc)return 1;var i=Vc({startOfRange:Yc,endOfRange:r,current:o}),a=e*Uc(i);return Math.ceil(a)}(i,r),1):i},qc=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:.25*e[t.size],maxScrollValueAt:.05*e[t.size]}}(t,o);return n[o.end]<n[o.start]?Xc({distanceToEdge:n[o.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i}):-1*Xc({distanceToEdge:n[o.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i})},Kc=Hl((function(e){return 0===e?0:e})),Zc=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,o=e.center,i=e.shouldUseTimeDampening,a={top:o.y-n.top,right:n.right-o.x,bottom:n.bottom-o.y,left:o.x-n.left},l=qc({container:n,distanceToEdges:a,dragStartTime:t,axis:fs,shouldUseTimeDampening:i}),s=qc({container:n,distanceToEdges:a,dragStartTime:t,axis:ps,shouldUseTimeDampening:i}),c=Kc({x:s,y:l});if(Pl(c,Dl))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,o=n.height>t.height,i=n.width>t.width;return i||o?i&&o?null:{x:i?0:r.x,y:o?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?Pl(u,Dl)?null:u:null},Qc=Hl((function(e){return 0===e?0:e>0?1:-1})),Jc=(Fc=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,o=kl(t,r),i={x:Fc(o.x,n.x),y:Fc(o.y,n.y)};return Pl(i,Dl)?null:i}),eu=function(e){var t=e.max,n=e.current,r=e.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=Qc(r),a=Jc({max:o,current:n,change:i});return!a||0!==i.x&&0===a.x||0!==i.y&&0===a.y},tu=function(e,t){return eu({current:e.scroll.current,max:e.scroll.max,change:t})},nu=function(e,t){var n=e.frame;return!!n&&eu({current:n.scroll.current,max:n.scroll.max,change:t})},ru=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,a=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var s=function(e){var t=e.viewport,n=e.subject,r=e.center,o=e.shouldUseTimeDampening,i=Zc({dragStartTime:e.dragStartTime,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return i&&tu(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:l,center:a,shouldUseTimeDampening:r});if(s)return void o(s)}var c=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var o=r[n];return o.frame?o:null}var i=function(e,t){return Kl(Wc(t),(function(t){return t.frame||Ll(!1),Gs(t.frame.pageMarginBox)(e)}))}(t,r);return i}({center:a,destination:Fs(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var l=Zc({dragStartTime:o,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i});return l&&nu(t,l)?l:null}({dragStartTime:n,droppable:c,subject:l,center:a,shouldUseTimeDampening:r});u&&i(c.descriptor.id,u)}},ou=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow;return function(e){var o=e.scrollJumpRequest;if(o){var i=Fs(e.impact);i||Ll(!1);var a=function(e,t){if(!nu(e,t))return t;var r=function(e,t){var n=e.frame;return n&&nu(e,t)?Jc({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var o=Bl(t,r);return n(e.descriptor.id,o),Bl(t,o)}(e.dimensions.droppables[i],o);if(a){var l=e.viewport,s=function(e,t,n){if(!e)return n;if(!tu(t,n))return n;var o=function(e,t){if(!tu(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Jc({current:r,max:n,change:t})}(t,n);if(!o)return r(n),null;var i=Bl(n,o);return r(i),Bl(n,i)}(e.isWindowScrollAllowed,l,a);s&&function(e,n){var r=kl(e.current.client.selection,n);t({client:r})}(e,s)}}}},iu={base:jc="data-rbd-drag-handle",draggableId:jc+"-draggable-id",contextId:jc+"-context-id"},au=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),lu=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),su="data-rbd-scroll-container-context-id",cu=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},uu="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,du=function(){var e=document.querySelector("head");return e||Ll(!1),e},hu=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};var fu=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function pu(e){return e instanceof fu(e).HTMLElement}function vu(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,i=r(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Ll(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return Xl(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=o(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return t||Ll(!1),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return Xl(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var gu=a().createContext(null),mu=function(){var e=document.body;return e||Ll(!1),e},yu={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},bu=0,Cu={separator:"::"};function wu(e,t){return void 0===t&&(t=Cu),il((function(){return""+e+t.separator+bu++}),[t.separator,e])}var xu=a().createContext(null);function Eu(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e})),t}var Su,Lu,Ou=((Su={})[13]=!0,Su[9]=!0,Su),Iu=function(e){Ou[e.keyCode]&&e.preventDefault()},_u=function(){var e="visibilitychange";return"undefined"==typeof document?e:Kl([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),Tu={type:"IDLE"};function Au(){}var Mu=((Lu={})[34]=!0,Lu[33]=!0,Lu[36]=!0,Lu[35]=!0,Lu);var Nu={type:"IDLE"},Ru={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Du(e,t){if(null==t)return!1;if(Boolean(Ru[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Du(e,t.parentElement)}function ku(e,t){var n=t.target;return!!pu(n)&&Du(e,n)}var Bu=function(e){return ll(e.getBoundingClientRect()).center},Pu=function(){var e="matches";return"undefined"==typeof document?e:Kl([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function Fu(e,t){return null==e?null:e[Pu](t)?e:Fu(e.parentElement,t)}function ju(e,t){return e.closest?e.closest(t):Fu(e,t)}function zu(e){e.preventDefault()}function Gu(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function Hu(e){var t=e.lockAPI,n=e.store,r=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=r.draggable.findById(o);return!!i&&!!i.options.isEnabled&&!!Gc(n.getState(),o)}var Wu=[function(e){var t=(0,i.useRef)(Tu),n=(0,i.useRef)(xl),r=il((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,l,{sourceEvent:t});if(o){t.preventDefault();var i={x:t.clientX,y:t.clientY};n.current(),u(o,i)}}}}}}),[e]),o=il((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),a=al((function(){n.current=El(window,[o,r],{passive:!1,capture:!0})}),[o,r]),l=al((function(){"IDLE"!==t.current.type&&(t.current=Tu,n.current(),a())}),[a]),s=al((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),c=al((function(){var e=function(e){var t=e.cancel,n=e.completed,r=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,i=e.clientY;if(0===t){var a={x:n,y:i},l=r();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(a);if("PENDING"!==l.type&&Ll(!1),s=l.point,c=a,Math.abs(c.x-s.x)>=5||Math.abs(c.y-s.y)>=5){var s,c;e.preventDefault();var u=l.actions.fluidLift(a);o({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Iu(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Ll(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:_u,fn:t}]}({cancel:s,completed:l,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=El(window,e,{capture:!0,passive:!1})}),[s,l]),u=al((function(e,n){"IDLE"!==t.current.type&&Ll(!1),t.current={type:"PENDING",point:n,actions:e},c()}),[c]);uu((function(){return a(),function(){n.current()}}),[a])},function(e){var t=(0,i.useRef)(Au),n=il((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var o=e.findClosestDraggableId(n);if(o){var i=e.tryGetLock(o,s,{sourceEvent:n});if(i){n.preventDefault();var a=!0,l=i.snapLift();t.current(),t.current=El(window,function(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(Mu[r.keyCode]?r.preventDefault():Iu(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:_u,fn:n}]}(l,s),{capture:!0,passive:!1})}}}function s(){a||Ll(!1),a=!1,t.current(),r()}}}}),[e]),r=al((function(){t.current=El(window,[n],{passive:!1,capture:!0})}),[n]);uu((function(){return r(),function(){t.current()}}),[r])},function(e){var t=(0,i.useRef)(Nu),n=(0,i.useRef)(xl),r=al((function(){return t.current}),[]),o=al((function(e){t.current=e}),[]),a=il((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,s,{sourceEvent:t});if(o){var i=t.touches[0],a={x:i.clientX,y:i.clientY};n.current(),h(o,a)}}}}}}),[e]),l=al((function(){n.current=El(window,[a],{capture:!0,passive:!1})}),[a]),s=al((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(Nu),n.current(),l())}),[l,o]),c=al((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),u=al((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:r},o=El(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var o=e.touches[0],i={x:o.clientX,y:o.clientY};e.preventDefault(),n.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Ll(!1);var o=e.touches[0];if(o&&o.force>=.15){var i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:_u,fn:t}]}(t),e),i=El(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:_u,fn:t}]}(t),e);n.current=function(){o(),i()}}),[c,r,s]),d=al((function(){var e=r();"PENDING"!==e.type&&Ll(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,o]),h=al((function(e,t){"IDLE"!==r().type&&Ll(!1);var n=setTimeout(d,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()}),[u,r,o,d]);uu((function(){return l(),function(){n.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(Nu))}}),[r,l,o]),uu((function(){return El(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function Uu(e){var t=e.contextId,n=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,l=[].concat(a?Wu:[],o||[]),s=(0,i.useState)((function(){return function(){var e=null;function t(){e||Ll(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Ll(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=al((function(e,t){e.isDragging&&!t.isDragging&&s.tryAbandon()}),[s]);uu((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();c(e,t),e=t}))}),[s,n,c]),uu((function(){return s.tryAbandon}),[s.tryAbandon]);for(var u=al((function(e){return Hu({lockAPI:s,registry:r,store:n,draggableId:e})}),[s,r,n]),d=al((function(e,o,i){return function(e){var t=e.lockAPI,n=e.contextId,r=e.store,o=e.registry,i=e.draggableId,a=e.forceSensorStop,l=e.sourceEvent;if(!Hu({lockAPI:t,store:r,registry:o,draggableId:i}))return null;var s=o.draggable.getById(i),c=function(e,t){var n="["+au.contextId+'="'+e+'"]',r=Kl(Zl(document.querySelectorAll(n)),(function(e){return e.getAttribute(au.id)===t}));return r&&pu(r)?r:null}(n,s.descriptor.id);if(!c)return null;if(l&&!s.options.canDragInteractiveElements&&ku(c,l))return null;var u=t.claim(a||xl),d="PRE_DRAG";function h(){return s.options.shouldRespectForcePress}function f(){return t.isActive(u)}var p=function(e,t){Gu({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function v(e){function n(){t.release(),d="COMPLETED"}function o(t,o){if(void 0===o&&(o={shouldBlockNextClick:!1}),e.cleanup(),o.shouldBlockNextClick){var i=El(window,[{eventName:"click",fn:zu,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}n(),r.dispatch(fc({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Ll(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",Ko({isActive:function(){return Gu({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return Gu({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=Cl((function(e){p((function(){return lc({client:e})}))}));return Ko({},v({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return p(sc)},moveRight:function(){return p(uc)},moveDown:function(){return p(cc)},moveLeft:function(){return p(dc)}};return v({liftActionArgs:{id:i,clientSelection:Bu(c),movementMode:"SNAP"},cleanup:xl,actions:e})},abort:function(){Gu({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}}}({lockAPI:s,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:o,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})}),[t,s,r,n]),h=al((function(e){return function(e,t){var n=function(e,t){var n,r=t.target;if(!((n=r)instanceof fu(n).Element))return null;var o=function(e){return"["+iu.contextId+'="'+e+'"]'}(e),i=ju(r,o);return i&&pu(i)?i:null}(e,t);return n?n.getAttribute(iu.draggableId):null}(t,e)}),[t]),f=al((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),p=al((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))}),[s,n]),v=al(s.isClaimed,[s]),g=il((function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:v}}),[u,d,h,f,p,v]),m=0;m<l.length;m++)l[m](g)}function Vu(e){return e.current||Ll(!1),e.current}function Yu(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,o=e.nonce,l=e.dragHandleUsageInstructions,s=(0,i.useRef)(null),c=Eu(e),u=al((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(c.current)}),[c]),d=function(e){var t=il((function(){return function(e){return"rbd-announcement-"+e}(e)}),[e]),n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Ko(e.style,yu),mu().appendChild(e),function(){setTimeout((function(){var t=mu();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),al((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),h=function(e){var t=e.contextId,n=e.text,r=wu("hidden-text",{separator:"-"}),o=il((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e}),[r,t]);return(0,i.useEffect)((function(){var e=document.createElement("div");return e.id=o,e.textContent=n,e.style.display="none",mu().appendChild(e),function(){var t=mu();t.contains(e)&&t.removeChild(e)}}),[o,n]),o}({contextId:t,text:l}),f=function(e,t){var n=il((function(){return function(e){var t,n,r,o=(t=e,function(e){return"["+e+'="'+t+'"]'}),i=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(iu.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),a=[(r="\n      transition: "+bc.outOfTheWay+";\n    ",{selector:o(au.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),i,{selector:o(lu.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:cu(a,"always"),resting:cu(a,"resting"),dragging:cu(a,"dragging"),dropAnimating:cu(a,"dropAnimating"),userCancel:cu(a,"userCancel")}}(e)}),[e]),r=(0,i.useRef)(null),o=(0,i.useRef)(null),a=al(bl((function(e){var t=o.current;t||Ll(!1),t.textContent=e})),[]),l=al((function(e){var t=r.current;t||Ll(!1),t.textContent=e}),[]);uu((function(){(r.current||o.current)&&Ll(!1);var i=hu(t),s=hu(t);return r.current=i,o.current=s,i.setAttribute("data-rbd-always",e),s.setAttribute("data-rbd-dynamic",e),du().appendChild(i),du().appendChild(s),l(n.always),a(n.resting),function(){var e=function(e){var t=e.current;t||Ll(!1),du().removeChild(t),e.current=null};e(r),e(o)}}),[t,l,a,n.always,n.resting,e]);var s=al((function(){return a(n.dragging)}),[a,n.dragging]),c=al((function(e){a("DROP"!==e?n.userCancel:n.dropAnimating)}),[a,n.dropAnimating,n.userCancel]),u=al((function(){o.current&&a(n.resting)}),[a,n.resting]);return il((function(){return{dragging:s,dropping:c,resting:u}}),[s,c,u])}(t,o),p=al((function(e){Vu(s).dispatch(e)}),[]),v=il((function(){return li({publishWhileDragging:nc,updateDroppableScroll:oc,updateDroppableIsEnabled:ic,updateDroppableIsCombineEnabled:ac,collectionStarting:rc},p)}),[p]),g=function(){var e=il(vu,[]);return(0,i.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),m=il((function(){return zc(g,v)}),[g,v]),y=il((function(){return e=Ko({scrollWindow:Hc,scrollDroppable:m.scrollDroppable},li({move:lc},p)),t=e.scrollDroppable,n=e.scrollWindow,r=e.move,o=function(e){var t=e.scrollDroppable,n=Cl(e.scrollWindow),r=Cl(t),o=null,i=function(e){o||Ll(!1);var t=o,i=t.shouldUseTimeDampening,a=t.dragStartTime;ru({state:e,scrollWindow:n,scrollDroppable:r,dragStartTime:a,shouldUseTimeDampening:i})};return{start:function(e){o&&Ll(!1);var t=Date.now(),n=!1,r=function(){n=!0};ru({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},n&&i(e)},stop:function(){o&&(n.cancel(),r.cancel(),o=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),i=ou({move:r,scrollWindow:n,scrollDroppable:t}),{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop};var e,t,n,r,o,i}),[m.scrollDroppable,p]),b=function(e){var t=(0,i.useRef)({}),n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(!1),a=al((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),l=al((function(t){var n=function(e,t){var n="["+iu.contextId+'="'+e+'"]',r=Zl(document.querySelectorAll(n));if(!r.length)return null;var o=Kl(r,(function(e){return e.getAttribute(iu.draggableId)===t}));return o&&pu(o)?o:null}(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),s=al((function(e,t){n.current===e&&(n.current=t)}),[]),c=al((function(){r.current||o.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=n.current;e&&l(e)})))}),[l]),u=al((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(iu.draggableId)===e&&(n.current=e)}),[]);return uu((function(){return o.current=!0,function(){o.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]),il((function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:s}}),[a,u,c,s])}(t),C=il((function(){return function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,o=e.styleMarshal,i=e.getResponders,a=e.announce,l=e.autoScroller;return ii(tc,Rc(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(ei(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return r=si.apply(void 0,i)(n.dispatch),Jo(Jo({},n),{},{dispatch:r})}}}((t=o,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var i=o.payload,a=i.id,l=i.clientSelection,s=i.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(hc({completed:c.completed})),"IDLE"!==n().phase&&Ll(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:s}});var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===s}},d=e.startPublishing(u),h=d.critical,f=d.dimensions,p=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:h,dimensions:f,clientSelection:l,movementMode:s,viewport:p}})}else t(o)}}}}(n),Ec,Ac,Mc,Nc,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var o=t.getState();return"DRAGGING"!==o.phase&&Ll(!1),void e.start(o)}n(r),e.scroll(t.getState())}}}}(l),Lc,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),Tc(i,a))))}({announce:d,autoScroller:y,dimensionMarshal:m,focusMarshal:b,getResponders:u,styleMarshal:f})}),[d,y,m,b,u,f]);s.current=C;var w=al((function(){var e=Vu(s);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),x=al((function(){var e=Vu(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(il((function(){return{isDragging:x,tryAbort:w}}),[x,w]));var E=al((function(e){return Gc(Vu(s).getState(),e)}),[]),S=al((function(){return zs(Vu(s).getState())}),[]),L=il((function(){return{marshal:m,focus:b,contextId:t,canLift:E,isMovementAllowed:S,dragHandleUsageInstructionsId:h,registry:g}}),[t,m,h,b,E,S,g]);return Uu({contextId:t,store:C,registry:g,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,i.useEffect)((function(){return w}),[w]),a().createElement(xu.Provider,{value:L},a().createElement(pi,{context:gu,store:C},e.children))}var $u=0;function Xu(e){var t=il((function(){return""+$u++}),[]),n=e.dragHandleUsageInstructions||"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n";return a().createElement(Ol,null,(function(r){return a().createElement(Yu,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var qu=function(e){return function(t){return e===t}},Ku=qu("scroll"),Zu=qu("auto"),Qu=function(e,t){return t(e.overflowX)||t(e.overflowY)},Ju=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Qu(n,Ku)||Qu(n,Zu)}(t)?t:e(t.parentElement)},ed=function(e){return{x:e.scrollLeft,y:e.scrollTop}},td=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},nd={passive:!1},rd={passive:!0},od=function(e){return e.shouldPublishImmediately?nd:rd};function id(e){var t=(0,i.useContext)(e);return t||Ll(!1),t}var ad=function(e){return e&&e.env.closestScrollable||null};function ld(){}var sd={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},cd=a().memo((function(e){var t=(0,i.useRef)(null),n=al((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),r=e.animate,o=e.onTransitionEnd,l=e.onClose,s=e.contextId,c=(0,i.useState)("open"===e.animate),u=c[0],d=c[1];(0,i.useEffect)((function(){return u?"open"!==r?(n(),d(!1),ld):t.current?ld:(t.current=setTimeout((function(){t.current=null,d(!1)})),n):ld}),[r,u,n]);var h=al((function(e){"height"===e.propertyName&&(o(),"close"===r&&l())}),[r,l,o]),f=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,o=function(e){var t=e.placeholder;return e.isAnimatingOpenOnMount||"close"===e.animate?sd:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?bc.placeholder:null}}({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return a().createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":s,onTransitionEnd:h,ref:e.innerRef})})),ud=a().createContext(null),dd=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return qo(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(a().PureComponent),hd=function(e,t){return t?bc.drop(t.duration):e?bc.snap:bc.fluid},fd=function(e,t){return e?t?vc:gc:null};function pd(e){return"DRAGGING"===e.type?(r=(n=e).dimension.client,o=n.offset,i=n.combineWith,a=n.dropping,l=Boolean(i),s=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(n),u=(c=Boolean(a))?function(e,t){var n=Cc(e);return n?t?n+" scale("+mc+")":n:null}(o,l):wc(o),{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:hd(s,a),transform:u,opacity:fd(l,c),zIndex:c?4500:5e3,pointerEvents:"none"}):{transform:wc((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,n,r,o,i,a,l,s,c,u}function vd(e){e.preventDefault()}var gd=function(e,t){return e===t},md=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function yd(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var bd={mapped:{type:"SECONDARY",offset:Dl,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:yd(null)}},Cd=rl((function(){var e,t,n,r=(e=bl((function(e,t){return{x:e,y:t}})),t=bl((function(e,t,n,r,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=bl((function(e,n,r,o,i,a,l){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:l,snapshot:t(n,o,i,a,null)}}})),function(r,o){if(r.isDragging){if(r.critical.draggable.id!==o.draggableId)return null;var i=r.current.client.offset,a=r.dimensions.draggables[o.draggableId],l=Fs(r.impact),s=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(i.x,i.y),r.movementMode,a,o.isClone,l,s,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==o.draggableId)return null;var h=o.isClone,f=r.dimensions.draggables[o.draggableId],p=d.result,v=p.mode,g=md(p),m=function(e){return e.combine?e.combine.draggableId:null}(p),y={duration:r.dropDuration,curve:pc,moveTo:r.newHomeClientOffset,opacity:m?vc:null,scale:m?mc:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:y,draggingOver:g,combineWith:m,mode:v,forceShouldAnimate:null,snapshot:t(v,h,g,m,y)}}}return null}),o=function(){var e=bl((function(e,t){return{x:e,y:t}})),t=bl(yd),n=bl((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(Dl,e,!0):null},o=function(t,o,i,a){var l=i.displaced.visible[t],s=Boolean(a.inVirtualList&&a.effected[t]),c=os(i),u=c&&c.draggableId===t?o:null;if(!l){if(!s)return r(u);if(i.displaced.invisible[t])return null;var d=Fl(a.displacedBy.point),h=e(d.x,d.y);return n(h,u,!0)}if(s)return r(u);var f=i.displacedBy.point,p=e(f.x,f.y);return n(p,u,l.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:o(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||o(e,t)||bd}}),{dropAnimationFinished:function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}}},null,{context:gu,pure:!0,areStatePropsEqual:gd})((function(e){var t=(0,i.useRef)(null),n=al((function(e){t.current=e}),[]),r=al((function(){return t.current}),[]),o=id(xu),a=o.contextId,l=o.dragHandleUsageInstructionsId,s=o.registry,c=id(ud),u=c.type,d=c.droppableId,h=il((function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}}),[e.draggableId,e.index,u,d]),f=e.children,p=e.draggableId,v=e.isEnabled,g=e.shouldRespectForcePress,m=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,C=e.dropAnimationFinished;y||function(e){var t=wu("draggable"),n=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,l=e.shouldRespectForcePress,s=e.isEnabled,c=il((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:s}}),[a,s,l]),u=al((function(e){var t=o();return t||Ll(!1),function(e,t,n){void 0===n&&(n=Dl);var r=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=vl(o,r),a=pl(i,n);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(n,t,e)}),[n,o]),d=il((function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}}),[n,u,c,t]),h=(0,i.useRef)(d),f=(0,i.useRef)(!0);uu((function(){return r.draggable.register(h.current),function(){return r.draggable.unregister(h.current)}}),[r.draggable]),uu((function(){if(f.current)f.current=!1;else{var e=h.current;h.current=d,r.draggable.update(d,e)}}),[d,r.draggable])}(il((function(){return{descriptor:h,registry:s,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:g,isEnabled:v}}),[h,s,r,m,g,v]));var w=il((function(){return v?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:vd}:null}),[a,l,p,v]),x=al((function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&C()}),[C,b]),E=il((function(){var e=pd(b),t="DRAGGING"===b.type&&b.dropping?x:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:w}}),[a,w,p,b,x,n]),S=il((function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}}),[h.droppableId,h.id,h.index,h.type]);return f(E,b.snapshot,S)}));function wd(e){return id(ud).isUsingCloneFor!==e.draggableId||e.isClone?a().createElement(Cd,e):null}function xd(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return a().createElement(wd,Ko({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var Ed=function(e,t){return e===t.droppable.type},Sd=function(e,t){return t.draggables[e.draggable.id]},Ld={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Ll(!1),document.body}},Od=rl((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Ko({},e,{shouldAnimatePlaceholder:!1}),n=bl((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=bl((function(r,o,i,a,l,s){var c=l.descriptor.id;if(l.descriptor.droppableId===r){var u=s?{render:s,dragging:n(l.descriptor)}:null,d={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!o)return t;if(!a)return e;var h={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}}));return function(n,o){var i=o.droppableId,a=o.type,l=!o.isDropDisabled,s=o.renderClone;if(n.isDragging){var c=n.critical;if(!Ed(a,c))return t;var u=Sd(c,n.dimensions),d=Fs(n.impact)===i;return r(i,l,d,d,u,s)}if("DROP_ANIMATING"===n.phase){var h=n.completed;if(!Ed(a,h.critical))return t;var f=Sd(h.critical,n.dimensions);return r(i,l,md(h.result)===i,Fs(h.impact)===i,f,s)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!Ed(a,p.critical))return t;var v=Fs(p.impact)===i,g=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),m=p.critical.droppable.id===i;return v?g?e:t:m?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:gu,pure:!0,areStatePropsEqual:gd})((function(e){var t=(0,i.useContext)(xu);t||Ll(!1);var n=t.contextId,r=t.isMovementAllowed,o=(0,i.useRef)(null),l=(0,i.useRef)(null),c=e.children,u=e.droppableId,d=e.type,h=e.mode,f=e.direction,p=e.ignoreContainerClipping,v=e.isDropDisabled,g=e.isCombineEnabled,m=e.snapshot,y=e.useClone,b=e.updateViewportMaxScroll,C=e.getContainerForClone,w=al((function(){return o.current}),[]),x=al((function(e){o.current=e}),[]);al((function(){return l.current}),[]);var E=al((function(e){l.current=e}),[]),S=al((function(){r()&&b({maxScroll:Bc()})}),[r,b]);!function(e){var t=(0,i.useRef)(null),n=id(xu),r=wu("droppable"),o=n.registry,a=n.marshal,l=Eu(e),s=il((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,i.useRef)(s),u=il((function(){return bl((function(e,n){t.current||Ll(!1);var r={x:e,y:n};a.updateDroppableScroll(s.id,r)}))}),[s.id,a]),d=al((function(){var e=t.current;return e&&e.env.closestScrollable?ed(e.env.closestScrollable):Dl}),[]),h=al((function(){var e=d();u(e.x,e.y)}),[d,u]),f=il((function(){return Cl(h)}),[h]),p=al((function(){var e=t.current,n=ad(e);e&&n||Ll(!1),e.scrollOptions.shouldPublishImmediately?h():f()}),[f,h]),v=al((function(e,r){t.current&&Ll(!1);var o=l.current,i=o.getDroppableRef();i||Ll(!1);var a,c={closestScrollable:Ju(a=i),isFixedOnPage:td(a)},u={ref:i,descriptor:s,env:c,scrollOptions:r};t.current=u;var d=function(e){var t=e.ref,n=e.descriptor,r=e.env,o=e.windowScroll,i=e.direction,a=e.isDropDisabled,l=e.isCombineEnabled,s=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=gl(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,a=o+t.scrollWidth,l=sl({top:r,right:a,bottom:i,left:o},n.border);return dl({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=pl(u,o),h=function(){if(!c)return null;var e=gl(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:pl(e,o),scroll:ed(c),scrollSize:t,shouldClipSubject:s}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,a=e.client,l=e.page,s=e.closest,c=function(){if(!s)return null;var e=s.scrollSize,t=s.client,n=Dc({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:Dl,displacement:Dl}}}}(),u="vertical"===i?fs:ps;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:o,axis:u,isEnabled:n,client:a,page:l,frame:c,subject:Yl({page:l,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:i,client:u,page:d,closest:h});return f}({ref:i,descriptor:s,env:c,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),h=c.closestScrollable;return h&&(h.setAttribute(su,n.contextId),h.addEventListener("scroll",p,od(u.scrollOptions))),d}),[n.contextId,s,p,l]),g=al((function(){var e=t.current,n=ad(e);return e&&n||Ll(!1),ed(n)}),[]),m=al((function(){var e=t.current;e||Ll(!1);var n=ad(e);t.current=null,n&&(f.cancel(),n.removeAttribute(su),n.removeEventListener("scroll",p,od(e.scrollOptions)))}),[p,f]),y=al((function(e){var n=t.current;n||Ll(!1);var r=ad(n);r||Ll(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),b=il((function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:g,dragStopped:m,scroll:y}}),[m,v,g,y]),C=il((function(){return{uniqueId:r,descriptor:s,callbacks:b}}),[b,s,r]);uu((function(){return c.current=C.descriptor,o.droppable.register(C),function(){t.current&&m(),o.droppable.unregister(C)}}),[b,s,m,C,a,o.droppable]),uu((function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),uu((function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}({droppableId:u,type:d,mode:h,direction:f,isDropDisabled:v,isCombineEnabled:g,ignoreContainerClipping:p,getDroppableRef:w});var L=a().createElement(dd,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,o=e.animate;return a().createElement(cd,{placeholder:r,onClose:t,innerRef:E,animate:o,contextId:n,onTransitionEnd:S})})),O=il((function(){return{innerRef:x,placeholder:L,droppableProps:{"data-rbd-droppable-id":u,"data-rbd-droppable-context-id":n}}}),[n,u,L,x]),I=y?y.dragging.draggableId:null,_=il((function(){return{droppableId:u,type:d,isUsingCloneFor:I}}),[u,I,d]);return a().createElement(ud.Provider,{value:_},c(O,m),function(){if(!y)return null;var e=y.dragging,t=y.render,n=a().createElement(wd,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return s().createPortal(n,C())}())}));Od.defaultProps=Ld;const Id=(...e)=>(0,r.d5G)("switcher",...e),_d=e=>Id("content","table"===e?"one-dimension":"three-dimensions"),Td=(e,t)=>"table"===e||t===Wo.Values,Ad="item",Md=({dragHandleProps:e,fieldType:t,id:n,displayName:r,selectable:l,checked:s,parentId:c,className:u,disabled:d,onVisibleItemChange:h})=>{const f=(0,i.useRef)(),[p,v]=(0,i.useState)(!1);(0,i.useEffect)((()=>{v(f.current.offsetWidth<f.current.scrollWidth)}),[]);const g=null!=r?r:n;return a().createElement("div",_(I({},e),{className:ao(Id(Ad),u,{unchecked:!s})}),l&&a().createElement(o.Checkbox,{disabled:d,checked:s,onChange:e=>null==h?void 0:h(t,e.target.checked,n,c)}),p?a().createElement(o.Tooltip,{title:g,placement:"bottomRight",overlayClassName:Id("tooltip")},a().createElement("div",{className:Id(Ad,"text"),ref:f},g)):a().createElement("div",{className:Id(Ad,"text"),ref:f},g))};Md.defaultProps={checked:!0,disabled:!1};const Nd=({fieldType:e,item:{id:t,displayName:n,checked:r=!0,children:o=[]},expandable:i,expandChildren:l,isDragDisabled:s,selectable:c,index:u,draggingItemId:d,onVisibleItemChange:h})=>a().createElement(xd,{draggableId:t,index:u,isDragDisabled:s},((u,f)=>a().createElement("div",_(I({},u.draggableProps),{ref:u.innerRef,className:ao(Id(c?"checkable-list":"normal-list"),{dragging:f.isDragging,"disable-dragging":s})}),a().createElement(Md,{dragHandleProps:u.dragHandleProps,fieldType:e,id:t,displayName:n,checked:r,onVisibleItemChange:h,selectable:c,className:ao(c?"checkable-item":"normal-item",{"item-collapse":!l})}),i&&l&&!Mr(o)&&d!==t&&a().createElement("div",{className:ao("child-items",{"item-hidden":!l})},o.map((n=>a().createElement(Md,{key:n.id,id:n.id,fieldType:e,displayName:n.displayName,disabled:!r,checked:n.checked,parentId:t,selectable:c,onVisibleItemChange:h,className:"checkable-item"}))))))),Rd="dimension",Dd=a().memo((e=>{const t=e,{fieldType:n,crossRows:i=!1,selectable:l=!1,expandable:s=!1,expandText:c=(0,r.agQ)("展开子项"),allowEmpty:u=!0,items:d=[],droppableType:h,text:f,icon:p}=t,v=T(t,["fieldType","crossRows","selectable","expandable","expandText","allowEmpty","items","droppableType","text","icon"]),[g,m]=a().useState(!0),y=!u&&1===d.length;return a().createElement("div",{className:ao(Id(Rd),{"long-dimension":i})},a().createElement("div",{className:Id(Rd,"header")},a().createElement("div",{className:"title"},a().createElement(p,null)," ",a().createElement("span",null,f)),s&&a().createElement("div",{className:"expand-option"},a().createElement(o.Checkbox,{checked:g,onChange:e=>{m(e.target.checked)}}),a().createElement("span",{className:"description"},c))),a().createElement(Od,{droppableId:n,type:h},((e,t)=>a().createElement("div",_(I({ref:e.innerRef},e.droppableProps),{className:ao(Id(Rd,"items"),{[Id(Rd,"items-highlight")]:t.isDraggingOver,[Id(Rd,"long-items")]:i})}),d.map(((e,t)=>a().createElement(Nd,I({key:e.id,index:t,fieldType:n,item:e,expandable:s,expandChildren:g,selectable:l,isDragDisabled:y},v)))),e.placeholder))))}));Dd.displayName="Dimension";const kd="content",Bd=a().memo((e=>{const t=e,{innerContentClassName:n,contentTitleText:i=(0,r.agQ)("行列切换"),resetText:l=(0,r.agQ)("恢复默认"),allowExchangeHeader:s=!0,onToggleVisible:c,onSubmit:d,sheetType:h}=t,f=T(t,["innerContentClassName","contentTitleText","resetText","allowExchangeHeader","onToggleVisible","onSubmit","sheetType"]),p=((e=!0)=>({[Wo.Rows]:{text:(0,r.agQ)("行头"),icon:No,droppableType:e?Uo.Dimensions:Uo.Rows},[Wo.Cols]:{text:(0,r.agQ)("列头"),icon:Ro,droppableType:e?Uo.Dimensions:Uo.Cols},[Wo.Values]:{text:(0,r.agQ)("值"),icon:Do,droppableType:Uo.Measures}}))(s),v=(e=>{return t=e,r={},n=ur(n="items"),hr(t,(function(e,t,o){ze(r,t,n(e,t,o))})),r;var t,n,r})(f),[g,m]=a().useState(v),[y,b]=a().useState(null),C=(e,t,n,r)=>{const o=((e=[],t,n,r)=>{const o=I({},e.find((e=>e.id===(null!=r?r:n))));return r?o.children=Ir(o.children,(e=>_(I({},e),{checked:e.id===n?t:e.checked}))):(o.checked=t,o.children=Ir(o.children,(e=>_(I({},e),{checked:t})))),e.map((e=>e.id===o.id?o:e))})(g[e],t,n,r);m(_(I({},g),{[e]:o}))},w=Nr(v,g),x=Vo.filter((e=>"table"!==h||e===Wo.Cols));return a().createElement(Xu,{onBeforeCapture:e=>{b(e.draggableId)},onDragEnd:({destination:e,source:t})=>{if(b(null),!e)return;if(e.droppableId===t.droppableId&&e.index===t.index)return;const n=((e=[],t=[],n,r)=>{if(r.droppableId===n.droppableId){const e=[...t],[o]=e.splice(n.index,1);return e.splice(r.index,0,o),{[r.droppableId]:e}}const o=[...e],i=[...t],[a]=o.splice(n.index,1);return i.splice(r.index,0,a),{[n.droppableId]:o,[r.droppableId]:i}})(g[t.droppableId],g[e.droppableId],t,e);m(I(I({},g),n))}},a().createElement("div",{className:ao(n,Id(kd))},a().createElement("header",{className:Id(kd,"header")},i),a().createElement("main",{className:ao(Id(kd,"main"),_d(h))},x.map((e=>a().createElement(Dd,I(_(I({},f[e]),{key:e,fieldType:e,items:g[e],crossRows:Td(h,e),draggingItemId:y,onVisibleItemChange:C}),p[e]))))),a().createElement("footer",{className:Id(kd,"footer")},a().createElement(o.Button,{type:"text",icon:a().createElement(u.Z,null),className:Id(kd,"footer","reset-button"),disabled:w,onClick:()=>{m(v)}},l),a().createElement("div",{className:Id(kd,"footer","actions")},a().createElement(o.Button,{className:"action-button",onClick:c},(0,r.agQ)("取消")),a().createElement(o.Button,{className:"action-button",type:"primary",disabled:w,onClick:()=>{c(),null==d||d((e=>{const t=e=>{const t=e=>Kt(Ir(e,(e=>{var n=e,{children:r}=n,o=T(n,["children"]);return[I({},o),...t(r)]}))),n=t(e);return{items:n,hideItems:wr(n,(e=>!1===e.checked))}};return{[Wo.Rows]:t(e[Wo.Rows]),[Wo.Cols]:t(e[Wo.Cols]),[Wo.Values]:t(e[Wo.Values])}})(g))}},(0,r.agQ)("确定"))))))}));Bd.displayName="SwitcherContent",Bd.defaultProps={sheetType:"pivot"};const Pd=e=>{var t=e,{title:n,popover:l,disabled:s}=t,c=T(t,["title","popover","disabled"]);const[u,d]=(0,i.useState)(!1),h=()=>{d((e=>!e))};return a().createElement(o.Popover,I({visible:!s&&u,content:a().createElement(Bd,_(I({},c),{onToggleVisible:h})),onVisibleChange:h,trigger:"click",placement:"bottomLeft",destroyTooltipOnHide:!0},l),(0,i.isValidElement)(n)?n:a().createElement(o.Button,{className:Id("entry-button"),size:"small",disabled:s,icon:a().createElement(Po,null)},n||(0,r.agQ)("行列切换")))},Fd=e=>{var t,n=e,{sheet:o,dataCfg:i,options:l}=n,s=T(n,["sheet","dataCfg","options"]);const[c,u]=a().useState((()=>{var e;return $o(o,i,null==(e=null==l?void 0:l.interaction)?void 0:e.hiddenColumnFields)}));return ro((()=>{var e;u($o(o,i,null==(e=null==l?void 0:l.interaction)?void 0:e.hiddenColumnFields))}),[o,i,null==(t=null==l?void 0:l.interaction)?void 0:t.hiddenColumnFields]),a().createElement(Pd,I(I({sheetType:Yo(o),onSubmit:e=>{var t;const{fields:n,hiddenColumnFields:i}=((e,t)=>{const n=e instanceof r.HZt;return{fields:Vo.reduce(((e,r)=>{var o,i,a,l;const s=null!=(i=null==(o=t[r])?void 0:o.items)?i:[],c=null!=(l=null==(a=t[r])?void 0:a.hideItems)?l:[];return e[r]=wr(s,(e=>!c.find((t=>!n&&t.id===e.id)))).map((e=>e.id)),e}),{}),hiddenColumnFields:n?t[Wo.Cols].hideItems.map((e=>e.id)):void 0}})(o,e);o.setDataCfg({fields:I(I({},o.dataCfg.fields),n)}),i&&o.setOptions({interaction:{hiddenColumnFields:i}}),o.render(),u(((e,t,n=[],r=[])=>{const{fields:o,hiddenFields:i}=(e=>function(e,t,n){var r=X(e)?Jt:Xr,o=arguments.length<3;return r(e,ur(t),n,o,pr)}(e,((e,t,n)=>(e.fields[n]=Ir(t.items,"id"),e.hiddenFields.push(...Ir(t.hideItems,"id")),e)),{fields:{},hiddenFields:[]}))(t);return $o(e,{fields:o,meta:n},i.concat(r))})(o,e,null==(t=o.dataCfg)?void 0:t.meta,i))}},s),c))},jd=a().memo((e=>{var t=e,{className:n,title:r,width:i,description:l,exportCfg:s,advancedSortCfg:c,switcherCfg:u,sheet:d,extra:h,dataCfg:f,options:p}=t,v=T(t,["className","title","width","description","exportCfg","advancedSortCfg","switcherCfg","sheet","extra","dataCfg","options"]);return a().createElement(o.PageHeader,I({className:ao("s2-header",n),style:{width:i},ghost:!1,title:r,extra:a().createElement(a().Fragment,null,h,u.open&&a().createElement(Fd,I({sheet:d,dataCfg:f,options:p},u)),c.open&&a().createElement(Ho,I({sheet:d},c)),s.open&&a().createElement(Fo,I({key:"export",sheet:d},s)))},v),l)}));jd.displayName="Header",jd.defaultProps={exportCfg:{open:!1},advancedSortCfg:{open:!1},switcherCfg:{open:!1}};const zd=`${r.vhY}-pagination`,Gd=({pagination:e,onShowSizeChange:t,onChange:n})=>{if(Mr(e))return null;const{total:i,pageSize:l}=e,s=i/l>5;return a().createElement("div",{className:zd},a().createElement(o.Pagination,_(I({size:"small",defaultCurrent:1,showSizeChanger:!0,showQuickJumper:s},e),{onShowSizeChange:t,onChange:n})),a().createElement("span",{className:`${zd}-count`,title:`${(0,r.agQ)("共计")}${i}${(0,r.agQ)("条")}`},(0,r.agQ)("共计"),i||" - ",(0,r.agQ)("条")))};Gd.displayName="S2Pagination";const Hd=a().forwardRef(((e,t)=>{const{dataCfg:n,options:i,header:l}=e,{s2Ref:s,loading:c,containerRef:u,pagination:d,wrapperRef:h}=Lo(e),[f,p]=a().useState(s.current);return a().useEffect((()=>{t&&(t.current=s.current)}),[t,s]),a().useEffect((()=>p(s.current)),[p,s]),a().createElement(a().StrictMode,null,a().createElement(Oo.Provider,{value:f},a().createElement(o.Spin,{spinning:c,wrapperClassName:`${r.vhY}-spin`},a().createElement("div",{ref:h,className:`${r.vhY}-wrapper`},l&&a().createElement(jd,_(I({},l),{sheet:s.current,width:i.width,dataCfg:(0,r.Unm)(n),options:xo(i)})),a().createElement("div",{ref:u,className:`${r.vhY}-container`}),d.showPagination&&a().createElement(Gd,{pagination:d.pagination,onChange:d.onChange,onShowSizeChange:d.onShowSizeChange}),e.children))))}));Hd.displayName="BaseSheet",Hd.defaultProps={options:{},adaptive:!1,showPagination:!1};const Wd=a().memo((e=>{const t=a().useRef();return a().createElement(Hd,_(I({},e),{ref:t}))}));Wd.displayName="TableSheet";class Ud extends r.f4X{drawTextShape(){ee(this.getMeta().fieldValue)?(0,r.qPk)(this):super.drawTextShape()}}const Vd=e=>new Ud(e,e.spreadsheet),Yd={dataCell:{text:{fontSize:12,fontFamily:r.utx,fill:"rgba(0, 0, 0, 0.85)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},minorText:{fontSize:11,fontFamily:r.utx,fill:"rgba(0, 0, 0, 0.45)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},derivedMeasureText:{mainUp:"#F46649",mainDown:"#2AA491",minorUp:"#f9ae9e",minorDown:"#a9dad2"},bolderText:{fontSize:12,fontFamily:r.utx,fill:"rgba(0, 0, 0, 1)",fontWeight:(0,r.EDF)()?"bold":520,textBaseline:"middle",textAlign:"left"}}},$d=a().memo((e=>{const t=e,{options:n,themeCfg:o}=t,i=T(t,["options","themeCfg"]),l=a().useRef(),s=a().useMemo((()=>(0,r._Ge)(n,{dataCell:Vd,showDefaultHeaderActionIcon:!1,style:{colCfg:{hideMeasureColumn:!0}}})),[n]),c=a().useMemo((()=>(0,r._Ge)({},o,{theme:Yd})),[o]);return a().createElement(Hd,I({options:s,themeCfg:c,ref:l},i))}));$d.displayName="GridAnalysisSheet";class Xd extends r.X0t{constructor(e,t,n){super(e,t,n)}drawTextShape(){const e=this.getMeta(),t=(0,r.D6R)(null==e?void 0:e.value);if(!X(t))return super.drawTextShape();const{formattedValue:n}=this.getFormattedFieldValue(),o=n!==(null==e?void 0:e.value)?[[n]]:[t];(0,r.qPk)(this,{values:o},!1)}}class qd extends r.f4X{drawTextShape(){ee(this.getMeta().fieldValue)?(0,r.qPk)(this):super.drawTextShape()}}class Kd extends r.O9R{processDataCfg(e){var t,n;e.fields.rows=[r.CoU],e.fields.valueInCols=!1;const o=e,{data:i,meta:a}=o,l=T(o,["data","meta"]),s=[];br(i,(e=>{let t=!1;var n;null==(n=e)||dr(n,yr(((n,o)=>{ee(n)&&(s.push(_(I({},e),{[r.CoU]:o,[r.__x]:n})),t=!0)})),wt),t||s.push(e)}));const c=(null==(n=null==(t=this.spreadsheet)?void 0:t.options)?void 0:n.cornerExtraFieldText)||(0,r.agQ)("数值"),u=[...a,{field:r.CoU,name:c}];return I({data:Zr(s),meta:u},l)}}const Zd=({cell:e,label:t})=>{const n=e.getMeta();if(n.isLeaf&&0!==n.level)return null;const r=n.spreadsheet.dataSet.getFieldName(n.field),o=se(t)?t(e,r):t,i=null!=o?o:r;return a().createElement("div",{className:ao(R(),R("col"))},a().createElement("span",{className:R("name")},i),a().createElement("span",{className:R("value")},n.value))},Qd=({cell:e,label:t,showOriginalValue:n,renderDerivedValue:o})=>{var i;const l=e.getMeta(),s=null==l?void 0:l.fieldValue,c=(e=>{var t;const n=Sr(e.spreadsheet.getRowNodes(),{rowIndex:e.rowIndex});return e.spreadsheet.dataSet.getFieldDescription(null==n?void 0:n.field)||(null==(t=null==n?void 0:n.extra)?void 0:t.description)})(l),u=(e=>{const t=Sr(e.spreadsheet.getRowNodes(),{rowIndex:e.rowIndex});return e.spreadsheet.dataSet.getFieldName((null==t?void 0:t.valueFiled)||(null==t?void 0:t.value))})(l),d=se(t)?t(e,u):t,h=null!=d?d:u,f=(e=>Sr(e.spreadsheet.getColumnNodes(),{colIndex:e.colIndex,isLeaf:!0}))(l),[,...p]=a().useMemo((()=>{try{return JSON.parse(null==f?void 0:f.value)}catch{return[]}}),[null==f?void 0:f.value]),{placeholder:v,style:g}=l.spreadsheet.options,m=null==(i=g.cellCfg)?void 0:i.valuesCfg,[y,...b]=Lr(null==s?void 0:s.values)||[s],[C,...w]=Lr(Vt(s,null==m?void 0:m.originalValueField))||[y],x=(0,r.o3g)(l,v),E=(null==m?void 0:m.showOriginalValue)||n;return a().createElement("div",{className:ao(R(),R("data"))},a().createElement("div",{className:R("header")},a().createElement("span",{className:"header-label"},h),a().createElement("span",null,null!=y?y:x)),E&&a().createElement("div",{className:R("original-value")},Rr(C)?x:C),!Mr(b)&&a().createElement(a().Fragment,null,a().createElement("div",{className:R("divider")}),a().createElement("ul",{className:R("derived-values")},b.map(((t,n)=>{var i;const l=Rr(t)||""===t,s=(0,r.Pyr)(t),c=!l&&!s,u=w[n];return a().createElement("li",{className:"derived-value-item",key:n},a().createElement("span",{className:"derived-value-label"},p[n]),a().createElement("span",{className:ao("derived-value-group",{"derived-value-trend-up":s,"derived-value-trend-down":c})},!l&&a().createElement("span",{className:"derived-value-trend-icon"}),null!=(i=null==o?void 0:o(t,u,e))?i:a().createElement("span",{className:"derived-value-content"},null!=t?t:x)))})))),c&&a().createElement("div",{className:R("description")},(0,r.agQ)("说明"),": ",c))};Qd.defaultProps={showOriginalValue:!1};const Jd=({cell:e,label:t})=>{const{field:n,spreadsheet:o,value:i,extra:l}=e.getMeta(),s=se(t)?t(e,i):t,c=null!=s?s:i,u=o.dataSet.getFieldDescription(n)||(null==l?void 0:l.description);return a().createElement("div",{className:ao(R(),R("row"))},a().createElement("div",{className:R("value")},c),u&&a().createElement("div",{className:R("description")},(0,r.agQ)("说明"),": ",u))},eh=a().memo((e=>{const t=e,{options:n,themeCfg:o,dataCfg:i}=t,l=T(t,["options","themeCfg","dataCfg"]),s=a().useRef(),c=a().useMemo((()=>{var e,t,r;if(Mr(i))return{};let o=!1,l="tree";Mr(null==(e=null==i?void 0:i.fields)?void 0:e.rows)&&!Mr(null==(t=null==i?void 0:i.fields)?void 0:t.customTreeItems)&&(l="customTree"),1===qr(null==(r=null==i?void 0:i.fields)?void 0:r.values)&&"customTree"!==n.hierarchyType&&(o=!0);const s=e=>(t,r)=>{var o,i,a,l;const s=null!=(l=null==(i=null==(o=n.tooltip)?void 0:o[e])?void 0:i.content)?l:null==(a=n.tooltip)?void 0:a.content;return se(s)?null==s?void 0:s(t,r):s};return{dataCell:e=>new qd(e,e.spreadsheet),colCell:(e,t,n)=>new Xd(e,t,n),dataSet:e=>new Kd(e),showDefaultHeaderActionIcon:!1,hierarchyType:l,style:{colCfg:{hideMeasureColumn:o}},interaction:{autoResetSheetStyle:!0,brushSelection:!1,selectedCellMove:!1,multiSelection:!1,rangeSelection:!1},tooltip:{operation:{hiddenColumns:!0},row:{content:(e,t)=>{var n;return null!=(n=s("row")(e,t))?n:a().createElement(Jd,{cell:e})}},col:{content:(e,t)=>{var n;return null!=(n=s("row")(e,t))?n:a().createElement(Zd,{cell:e})}},data:{content:(e,t)=>{const n=e.getMeta().fieldValue,r=s("data")(e,t);return Rr(r)?X(null==n?void 0:n.values)?a().createElement(Qd,{cell:e}):a().createElement(a().Fragment,null):r}}}}}),[i,n.hierarchyType,n.tooltip]),u=a().useMemo((()=>{var e;const t={fields:{valueInCols:qr(null==(e=null==i?void 0:i.fields)?void 0:e.values)<=1}};return(0,r._Ge)(i,t)}),[i]),d=a().useMemo((()=>(0,r._Ge)(n,c)),[n,c]);return a().createElement(Hd,I({options:d,themeCfg:o,dataCfg:u,ref:s},l))}));eh.displayName="StrategySheet";const th=e=>{var t=e,{className:n,titleText:l=(0,r.agQ)("选择下钻维度"),clearButtonText:s=(0,r.agQ)("恢复默认"),searchText:c=(0,r.agQ)("搜索字段"),extra:u,drillFields:d,dataSet:h,disabledFields:f,getDrillFields:p,setDrillFields:v}=t,g=T(t,["className","titleText","clearButtonText","searchText","extra","drillFields","dataSet","disabledFields","getDrillFields","setDrillFields"]);const m={text:a().createElement(Bo,null),location:a().createElement(Ao,null),date:a().createElement(_o,null)},y=()=>h.map((e=>(e.disabled=!(!f||!f.includes(e.value)),e))),[b,C]=(0,i.useState)(y()),w=e=>{const{value:t}=e.target;if(t){const e=new RegExp(t,"gi"),n=h.filter((t=>e.test(t.name)));C([...n])}else C([...h])};return(0,i.useEffect)((()=>{C(y())}),[f]),a().createElement(o.ConfigProvider,null,a().createElement("div",I({className:ao("s2-drill-down",n)},g),a().createElement("header",{className:"s2-drill-down-header"},a().createElement("div",null,l),a().createElement(o.Button,{type:"link",disabled:Mr(d),onClick:e=>{e.stopPropagation(),p&&p([]),v&&v([])}},s)),a().createElement(o.Input,{className:"s2-drill-down-search",placeholder:c,onChange:w,onPressEnter:w,prefix:a().createElement(ko,null),allowClear:!0}),Mr(b)&&a().createElement(o.Empty,{imageStyle:{height:"64px"},className:"s2-drill-down-empty"}),u,a().createElement(o.Menu,{className:"s2-drill-down-menu",selectedKeys:d,onSelect:e=>{const t=null==e?void 0:e.selectedKeys;p&&p([...t]),v&&v([...t])}},b.map((e=>a().createElement(o.Menu.Item,{key:e.value,disabled:e.disabled,className:"s2-drill-down-menu-item",icon:e.icon?e.icon:m[e.type]},e.name))))))},nh=["drillConfig","displayCondition","drillItemsNum"];function rh(e,t,n,r,o){if(r){const e=document.querySelector(`#${r}`);if(e&&l.unmountComponentAtNode(e)&&e.parentNode)return void e.parentNode.removeChild(e)}const a=document.createElement("div");let s,c;function u(...e){l.unmountComponentAtNode(a)&&a.parentNode&&(a.parentNode.removeChild(a),o&&o())}function d(...e){u.call(null,...e),c()}r&&(a.id=r),document.body.appendChild(a);const h=new Promise(((e,t)=>{s=e,c=t})).then((e=>(d(),e)));return setTimeout((()=>{l.render(i.createElement(Oo.Provider,{value:n},i.createElement(e,{onCancel:d,resolver:s,params:t})),a)})),h}function oh(e){const{params:t,resolver:n}=e,r=Io(),{event:l,onChange:s,CustomComponent:c}=t,u=l.target.cfg.parent,{left:d,top:h,width:f,height:p}=(0,i.useMemo)((()=>{const e=(null==r?void 0:r.container.cfg.container).getBoundingClientRect();return{left:window.scrollX+e.left,top:window.scrollY+e.top,width:e.width,height:e.height}}),[null==r?void 0:r.container.cfg.container]),{x:v,y:g,width:m,height:y}=(0,i.useMemo)((()=>{const e=r.facet.getScrollOffset(),t=$r(u.getMeta(),["x","y","width","height"]);return t.x-=e.scrollX||0,t.y-=(e.scrollY||0)-(r.getColumnNodes()[0]||{height:0}).height,t}),[u,r]),[b,C]=(0,i.useState)(u.getMeta().fieldValue),w=(0,i.useRef)(null),x=(0,i.useRef)(null);(0,i.useEffect)((()=>{setTimeout((()=>{x.current&&x.current.click(),w.current&&w.current.focus()}))}),[]);const E=()=>{const{rowIndex:e,valueField:t}=u.getMeta();r.dataSet.originData[e][t]=b,r.render(!0),s&&s(r.dataSet.originData),n(!0)},S=a().useMemo((()=>({left:v,top:g,width:m,height:y,zIndex:1e3})),[]);return a().createElement("div",{ref:x,style:{zIndex:500,position:"absolute",overflow:"hidden",left:d,top:h,width:f,height:p}},c?a().createElement(c,{cell:u,spreadsheet:r,value:b,style:S,onChange:e=>{C(e)},onSave:E}):a().createElement(o.Input.TextArea,{required:!0,style:S,className:"s2-edit-cell",value:b,ref:w,onChange:e=>{C(e.target.value)},onBlur:E,onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),E())}}))}function ih({onChange:e,CustomComponent:t}){const n=Io(),o=(0,i.useCallback)((r=>{rh(oh,{event:r,onChange:e,CustomComponent:t},n)}),[n]);return So(r.ch4.DATA_CELL_DOUBLE_CLICK,o,n),null}const ah=a().memo((e=>a().createElement(Hd,_(I({},e),{sheetType:"table"}),a().createElement(ih,{onChange:()=>{}}))));ah.displayName="EditableSheet";const lh=a().memo((e=>{const t=e,{options:n}=t,o=T(t,["options"]),{dataCfg:l,partDrillDown:s}=o,c=a().useRef(),[u,d]=a().useState([]),h=(f=({sheetInstance:e,cacheDrillFields:t,disabledFields:n,event:o})=>{const i=a().createElement(th,_(I({},null==s?void 0:s.drillConfig),{setDrillFields:d,drillFields:t,disabledFields:n}));if(o){const{showTooltip:t}=(0,r.Hu7)(e,o);if(!t)return;e.showTooltip({position:{x:o.clientX,y:o.clientY},content:i})}},(p=(0,i.useRef)(f)).current=f,p);var f,p;const v=a().useMemo((()=>((e,t,n)=>{var o;const i=(null==(o=null==e?void 0:e.headerActionIcons)?void 0:o.length)?[...e.headerActionIcons]:[];if(!Mr(t)){const e={belongsCell:"rowCell",iconNames:["DrillDownIcon"],defaultHide:!0,displayCondition:t.displayCondition||eo,action:e=>{const{iconName:t,meta:o,event:i}=e;"DrillDownIcon"===t&&(o.spreadsheet.store.set("drillDownNode",o),(e=>{const{meta:t,event:n,callback:o}=e,{spreadsheet:i}=t;i.store.set("drillDownNode",t);const{drillDownDataCache:a,drillDownCurrentCache:l}=Jr(i,t),s=(null==l?void 0:l.drillField)?[null==l?void 0:l.drillField]:[],c=[];a.forEach((e=>{t.id.includes(e.rowId)&&t.id!==e.rowId&&c.push(e.drillField)})),n&&i.emit(r.ch4.GLOBAL_ACTION_ICON_CLICK,n),o({sheetInstance:i,cacheDrillFields:s,disabledFields:c,event:n})})({meta:o,event:i,callback:n}))}};i.push(e)}return _(I({},e),{headerActionIcons:i})})(n,s,(e=>h.current(e)))),[n,s,h]),g=e=>{var t;null==(t=c.current)||t.clearDrillDownData(e)};a().useEffect((()=>{var e,t;null==(e=c.current)||e.hideTooltip(),Mr(u)?g(null==(t=c.current.store.get("drillDownNode"))?void 0:t.id):(e=>{const{fetchData:t,spreadsheet:n,drillFields:r,drillItemsNum:o=-1}=e;n.store.set("drillItemsNum",o);const i=n.store.get("drillDownNode"),{drillDownDataCache:a,drillDownCurrentCache:l}=Jr(n,i);let s=Un(a,4);l&&(s=wr(a,(e=>e.rowId!==i.id))),t&&t(i,r).then((e=>{const{drillData:t,drillField:r}=e;if(n.dataSet.transformDrillDownData(r,t,i),!Mr(t)){const e=i.level+1,o={rowId:i.id,drillLevel:e,drillData:t,drillField:r};s.push(o),n.store.set("drillDownDataCache",s)}n.interaction.reset(),n.render(!1)}))})({rows:l.fields.rows,drillFields:u,fetchData:null==s?void 0:s.fetchData,drillItemsNum:null==s?void 0:s.drillItemsNum,spreadsheet:c.current})}),[u]),a().useEffect((()=>{var e;ee(null==s?void 0:s.clearDrillDown)&&g(null==(e=null==s?void 0:s.clearDrillDown)?void 0:e.rowId)}),[null==s?void 0:s.clearDrillDown]);const m=(e=>{const t=a().useRef(e),n=nh.map((t=>null==e?void 0:e[t]));return a().useCallback((n=>{const r=t.current,o=!!nh.find((t=>!Object.is(null==e?void 0:e[t],null==r?void 0:r[t])));return t.current=e,{reloadData:o||n.reloadData,reBuildDataSet:n.reBuildDataSet}}),n)})(s);return a().createElement(Hd,_(I({},o),{options:v,onSheetUpdate:m,ref:c}))}));lh.displayName="PivotSheet";const sh=a().forwardRef(((e,t)=>{const{sheetType:n}=e,i=a().useMemo((()=>_(I({},e),{onMounted:n=>{var r;t&&(t.current=n),null==(r=e.onMounted)||r.call(e,n)}})),[e,t]),l=a().useMemo((()=>{switch(n){case"table":return a().createElement(Wd,I({},i));case"gridAnalysis":return a().createElement($d,I({},i));case"strategy":return a().createElement(eh,I({},i));case"editable":return a().createElement(ah,I({},i));default:return a().createElement(lh,I({},i))}}),[n,i]),s="zh_CN"===(0,r.VQD)()?v:b;return a().createElement(a().StrictMode,null,a().createElement(o.ConfigProvider,{locale:s},l))})),ch=a().memo(sh);ch.displayName="SheetComponent"},926:(e,t,n)=>{"use strict";n.d(t,{AfN:()=>vb,CoU:()=>oi,D6R:()=>_C,EDF:()=>Eb,F1h:()=>JC,HZt:()=>OL,Hu7:()=>CS,IZo:()=>uS,LRf:()=>YC,N6r:()=>xL,NO_:()=>mb,O9R:()=>OS,Pyr:()=>xC,TA7:()=>SL,Teh:()=>ai,Unm:()=>wx,VQD:()=>pb,WNh:()=>qy,X0t:()=>zw,_Ge:()=>bx,__x:()=>ri,agQ:()=>gb,c8d:()=>ew,ch4:()=>ei,d5G:()=>xS,f4X:()=>lw,o3g:()=>LC,q7_:()=>jb,qPk:()=>OC,utx:()=>db,vQq:()=>VC,vhY:()=>Ri}),e=n.hmd(e);var r=Object.freeze({__proto__:null,get Base(){return Co},get Circle(){return wo},get Ellipse(){return Eo},get Image(){return Lo},get Line(){return _o},get Marker(){return Mo},get Path(){return zo},get Polygon(){return Ho},get Polyline(){return Uo},get Rect(){return Yo},get Text(){return Xo}}),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},l=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},s={}.toString,c=function(e,t){return s.call(e)==="[object "+t+"]"},u=function(e){return c(e,"Function")},d=function(e){return null==e},h=function(e){return Array.isArray?Array.isArray(e):c(e,"Array")},f=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function p(e,t){if(e)if(h(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(f(e))for(var o in e)if(e.hasOwnProperty(o)&&!1===t(e[o],o))break}var v=function(e){return"object"==typeof e&&null!==e},g=function(e){if(h(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},m=function(e){if(h(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},y=function(e){return c(e,"String")},b=function(e){return c(e,"Number")},C=function(e,t){return(e%t+t)%t},w=Math.PI/180,x=function(e){return w*e},E=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return p(e,(function(n,r){u(e)&&"prototype"===r||t.push(n)})),t},S=function(e){var t=function(e){return d(e)?"":e.toString()}(e);return t.charAt(0).toUpperCase()+t.substring(1)};function L(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function O(e,t,n,r){return t&&L(e,t),n&&L(e,n),r&&L(e,r),e}var I,_=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(y(e)||y(t))return!1;if(l(e)||l(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=_(e[r],t[r]));r++);return n}if(v(e)||v(t)){var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(n=!0,r=0;r<o.length&&(n=_(e[o[r]],t[o[r]]));r++);return n}return!1},T={},A=function(e){return T[e=e||"g"]?T[e]+=1:T[e]=1,e+T[e]},M=function(){};!function(e,t){if(!u(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var l=e.apply(this,r);return a.set(i,l),l};n.cache=new Map}((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return I||(I=document.createElement("canvas").getContext("2d")),I.font=[i,a,o,n+"px",r].join(" "),I.measureText(y(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,o++)r[o]=i[a];return r}([e],E(t)).join("")}));var N="\t\n\v\f\r   ᠎             　\u2028\u2029",R=new RegExp("([a-z])["+N+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+N+"]*,?["+N+"]*)+)","ig"),D=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+N+"]*,?["+N+"]*","ig"),k=function(e){if(!e)return null;if(h(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(R,(function(r,o,i){var a=[],l=o.toLowerCase();if(i.replace(D,(function(e,t){t&&a.push(+t)})),"m"===l&&a.length>2&&(n.push([o].concat(a.splice(0,2))),l="l",o="m"===o?"l":"L"),"o"===l&&1===a.length&&n.push([o,a[0]]),"r"===l)n.push([o].concat(a));else for(;a.length>=t[l]&&(n.push([o].concat(a.splice(0,t[l]))),t[l]););return e})),n},B=function(e,t){for(var n=[],r=0,o=e.length;o-2*!t>r;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4===r?i[3]={x:+e[0],y:+e[1]}:o-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n},P=function(e,t,n,r,o){var i=[];if(null===o&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==o){var a=Math.PI/180,l=e+n*Math.cos(-r*a),s=e+n*Math.cos(-o*a);i=[["M",l,t+n*Math.sin(-r*a)],["A",n,n,0,+(o-r>180),0,s,t+n*Math.sin(-o*a)]]}else i=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return i},F=function(e){if(!(e=k(e))||!e.length)return[["M",0,0]];var t,n,r=[],o=0,i=0,a=0,l=0,s=0;"M"===e[0][0]&&(a=o=+e[0][1],l=i=+e[0][2],s++,r[0]=["M",o,i]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,d=void 0,h=s,f=e.length;h<f;h++){if(r.push(u=[]),(t=(d=e[h])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+d[6]+o,u[7]=+d[7]+i;break;case"V":u[1]=+d[1]+i;break;case"H":u[1]=+d[1]+o;break;case"R":for(var p=2,v=(n=[o,i].concat(d.slice(1))).length;p<v;p++)n[p]=+n[p]+o,n[++p]=+n[p]+i;r.pop(),r=r.concat(B(n,c));break;case"O":r.pop(),(n=P(o,i,d[1],d[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(P(o,i,d[1],d[2],d[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+d[1]+o,l=+d[2]+i;break;default:for(p=1,v=d.length;p<v;p++)u[p]=+d[p]+(p%2?o:i)}else if("R"===t)n=[o,i].concat(d.slice(1)),r.pop(),r=r.concat(B(n,c)),u=["R"].concat(d.slice(-2));else if("O"===t)r.pop(),(n=P(o,i,d[1],d[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(P(o,i,d[1],d[2],d[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,m=d.length;g<m;g++)u[g]=d[g];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":o=+a,i=+l;break;case"H":o=u[1];break;case"V":i=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];break;default:o=u[u.length-2],i=u[u.length-1]}}return r},j=function(e,t,n,r){return[e,t,n,r,n,r]},z=function(e,t,n,r,o,i){var a=1/3,l=2/3;return[a*e+l*n,a*t+l*r,a*o+l*n,a*i+l*r,o,i]},G=function(e,t,n,r,o,i,a,l,s,c){n===r&&(n+=1);var u,d,h,f,p,v=120*Math.PI/180,g=Math.PI/180*(+o||0),m=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)d=c[0],h=c[1],f=c[2],p=c[3];else{e=(u=y(e,t,-g)).x,t=u.y,l=(u=y(l,s,-g)).x,s=u.y,e===l&&t===s&&(l+=1,s+=1);var b=(e-l)/2,C=(t-s)/2,w=b*b/(n*n)+C*C/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var x=n*n,E=r*r,S=(i===a?-1:1)*Math.sqrt(Math.abs((x*E-x*C*C-E*b*b)/(x*C*C+E*b*b)));f=S*n*C/r+(e+l)/2,p=S*-r*b/n+(t+s)/2,d=Math.asin(((t-p)/r).toFixed(9)),h=Math.asin(((s-p)/r).toFixed(9)),d=e<f?Math.PI-d:d,h=l<f?Math.PI-h:h,d<0&&(d=2*Math.PI+d),h<0&&(h=2*Math.PI+h),a&&d>h&&(d-=2*Math.PI),!a&&h>d&&(h-=2*Math.PI)}var L=h-d;if(Math.abs(L)>v){var O=h,I=l,_=s;h=d+v*(a&&h>d?1:-1),l=f+n*Math.cos(h),s=p+r*Math.sin(h),m=G(l,s,n,r,o,0,a,I,_,[h,O,f,p])}L=h-d;var T=Math.cos(d),A=Math.sin(d),M=Math.cos(h),N=Math.sin(h),R=Math.tan(L/4),D=4/3*n*R,k=4/3*r*R,B=[e,t],P=[e+D*A,t-k*T],F=[l+D*N,s-k*M],j=[l,s];if(P[0]=2*B[0]-P[0],P[1]=2*B[1]-P[1],c)return[P,F,j].concat(m);for(var z=[],H=0,W=(m=[P,F,j].concat(m).join().split(",")).length;H<W;H++)z[H]=H%2?y(m[H-1],m[H],g).y:y(m[H],m[H+1],g).x;return z},H=function(e,t){var n,r=F(e),o=t&&F(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],s=[],c="",u="",d=function(e,t,n){var r,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(G.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,o=2*t.y-t.by):(r=t.x,o=t.y),e=["C",r,o].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(z(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(z(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(j(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(j(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(j(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(j(t.x,t.y,t.X,t.Y))}return e},h=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)l[t]="A",o&&(s[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),n=Math.max(r.length,o&&o.length||0)}},f=function(e,t,i,a,l){e&&t&&"M"===e[l][0]&&"M"!==t[l][0]&&(t.splice(l,0,["M",a.x,a.y]),i.bx=0,i.by=0,i.x=e[l][1],i.y=e[l][2],n=Math.max(r.length,o&&o.length||0))};n=Math.max(r.length,o&&o.length||0);for(var p=0;p<n;p++){r[p]&&(c=r[p][0]),"C"!==c&&(l[p]=c,p&&(u=l[p-1])),r[p]=d(r[p],i,u),"A"!==l[p]&&"C"===c&&(l[p]="C"),h(r,p),o&&(o[p]&&(c=o[p][0]),"C"!==c&&(s[p]=c,p&&(u=s[p-1])),o[p]=d(o[p],a,u),"A"!==s[p]&&"C"===c&&(s[p]="C"),h(o,p)),f(r,o,i,a,p),f(o,r,a,i,p);var v=r[p],g=o&&o[p],m=v.length,y=o&&g.length;i.x=v[m-2],i.y=v[m-1],i.bx=parseFloat(v[m-4])||i.x,i.by=parseFloat(v[m-3])||i.y,a.bx=o&&(parseFloat(g[y-4])||a.x),a.by=o&&(parseFloat(g[y-3])||a.y),a.x=o&&g[y-2],a.y=o&&g[y-1]}return o?[r,o]:r},W=/,?([a-z]),?/gi,U=function(e){return e.join(",").replace(W,"$1")},V=function(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n},Y=function(e,t,n,r,o,i,a,l,s){null===s&&(s=1);for(var c=(s=s>1?1:s<0?0:s)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var p=c*u[f]+c,v=V(p,e,n,o,a),g=V(p,t,r,i,l),m=v*v+g*g;h+=d[f]*Math.sqrt(m)}return c*h},$=function(e,t,n,r,o,i,a,l){for(var s,c,u,d,h=[],f=[[],[]],p=0;p<2;++p)if(0===p?(c=6*e-12*n+6*o,s=-3*e+9*n-9*o+3*a,u=3*n-3*e):(c=6*t-12*r+6*i,s=-3*t+9*r-9*i+3*l,u=3*r-3*t),Math.abs(s)<1e-12){if(Math.abs(c)<1e-12)continue;(d=-u/c)>0&&d<1&&h.push(d)}else{var v=c*c-4*u*s,g=Math.sqrt(v);if(!(v<0)){var m=(-c+g)/(2*s);m>0&&m<1&&h.push(m);var y=(-c-g)/(2*s);y>0&&y<1&&h.push(y)}}for(var b,C=h.length,w=C;C--;)b=1-(d=h[C]),f[0][C]=b*b*b*e+3*b*b*d*n+3*b*d*d*o+d*d*d*a,f[1][C]=b*b*b*t+3*b*b*d*r+3*b*d*d*i+d*d*d*l;return f[0][w]=e,f[1][w]=t,f[0][w+1]=a,f[1][w+1]=l,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},X=function(e,t,n,r,o,i,a,l){if(!(Math.max(e,n)<Math.min(o,a)||Math.min(e,n)>Math.max(o,a)||Math.max(t,r)<Math.min(i,l)||Math.min(t,r)>Math.max(i,l))){var s=(e-n)*(i-l)-(t-r)*(o-a);if(s){var c=((e*r-t*n)*(o-a)-(e-n)*(o*l-i*a))/s,u=((e*r-t*n)*(i-l)-(t-r)*(o*l-i*a))/s,d=+c.toFixed(2),h=+u.toFixed(2);if(!(d<+Math.min(e,n).toFixed(2)||d>+Math.max(e,n).toFixed(2)||d<+Math.min(o,a).toFixed(2)||d>+Math.max(o,a).toFixed(2)||h<+Math.min(t,r).toFixed(2)||h>+Math.max(t,r).toFixed(2)||h<+Math.min(i,l).toFixed(2)||h>+Math.max(i,l).toFixed(2)))return{x:c,y:u}}}},q=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},K=function(e,t,n,r,o){if(o)return[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]];var i=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return i.parsePathArray=U,i},Z=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:K(e,t,n,r),vb:[e,t,n,r].join(" ")}},Q=function(e,t,n,r,o,i,a,l){h(e)||(e=[e,t,n,r,o,i,a,l]);var s=$.apply(null,e);return Z(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},J=function(e,t,n,r,o,i,a,l,s){var c=1-s,u=Math.pow(c,3),d=Math.pow(c,2),h=s*s,f=h*s,p=e+2*s*(n-e)+h*(o-2*n+e),v=t+2*s*(r-t)+h*(i-2*r+t),g=n+2*s*(o-n)+h*(a-2*o+n),m=r+2*s*(i-r)+h*(l-2*i+r);return{x:u*e+3*d*s*n+3*c*s*s*o+f*a,y:u*t+3*d*s*r+3*c*s*s*i+f*l,m:{x:p,y:v},n:{x:g,y:m},start:{x:c*e+s*n,y:c*t+s*r},end:{x:c*o+s*a,y:c*i+s*l},alpha:90-180*Math.atan2(p-g,v-m)/Math.PI}},ee=function(e,t,n){if(r=Q(e),o=Q(t),r=Z(r),o=Z(o),!(q(o,r.x,r.y)||q(o,r.x2,r.y)||q(o,r.x,r.y2)||q(o,r.x2,r.y2)||q(r,o.x,o.y)||q(r,o.x2,o.y)||q(r,o.x,o.y2)||q(r,o.x2,o.y2)||(r.x<o.x2&&r.x>o.x||o.x<r.x2&&o.x>r.x)&&(r.y<o.y2&&r.y>o.y||o.y<r.y2&&o.y>r.y)))return n?0:[];for(var r,o,i=~~(Y.apply(0,e)/8),a=~~(Y.apply(0,t)/8),l=[],s=[],c={},u=n?0:[],d=0;d<i+1;d++){var h=J.apply(0,e.concat(d/i));l.push({x:h.x,y:h.y,t:d/i})}for(d=0;d<a+1;d++)h=J.apply(0,t.concat(d/a)),s.push({x:h.x,y:h.y,t:d/a});for(d=0;d<i;d++)for(var f=0;f<a;f++){var p=l[d],v=l[d+1],g=s[f],m=s[f+1],y=Math.abs(v.x-p.x)<.001?"y":"x",b=Math.abs(m.x-g.x)<.001?"y":"x",C=X(p.x,p.y,v.x,v.y,g.x,g.y,m.x,m.y);if(C){if(c[C.x.toFixed(4)]===C.y.toFixed(4))continue;c[C.x.toFixed(4)]=C.y.toFixed(4);var w=p.t+Math.abs((C[y]-p[y])/(v[y]-p[y]))*(v.t-p.t),x=g.t+Math.abs((C[b]-g[b])/(m[b]-g[b]))*(m.t-g.t);w>=0&&w<=1&&x>=0&&x<=1&&(n?u+=1:u.push({x:C.x,y:C.y,t1:w,t2:x}))}}return u};function te(e,t){var n=[],r=[];return e.length&&function e(t,o){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var i=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),i[a]=[(1-o)*t[a][0]+o*t[a+1][0],(1-o)*t[a][1]+o*t[a+1][1]];e(i,o)}}(e,t),{left:n,right:r.reverse()}}var ne=function(e,t){if(e.length!==t.length)return!1;var n=!0;return p(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function re(e,t,n){var r=null,o=n;return t<o&&(o=t,r="add"),e<o&&(o=e,r="del"),{type:r,min:o}}var oe=function(e,t){var n=function(e,t){var n,r,o=e.length,i=t.length,a=0;if(0===o||0===i)return null;for(var l=[],s=0;s<=o;s++)l[s]=[],l[s][0]={min:s};for(var c=0;c<=i;c++)l[0][c]={min:c};for(s=1;s<=o;s++)for(n=e[s-1],c=1;c<=i;c++){r=t[c-1],a=ne(n,r)?0:1;var u=l[s-1][c].min+1,d=l[s][c-1].min+1,h=l[s-1][c-1].min+a;l[s][c]=re(u,d,h)}return l}(e,t),r=e.length,o=t.length,i=[],a=1,l=1;if(n[r][o].min!==r){for(var s=1;s<=r;s++){var c=n[s][s].min;l=s;for(var u=a;u<=o;u++)n[s][u].min<c&&(c=n[s][u].min,l=u);a=l,n[s][a].type&&i.push({index:s-1,type:n[s][a].type})}for(s=i.length-1;s>=0;s--)a=i[s].index,"add"===i[s].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var d=o-(r=e.length);if(r<o)for(s=0;s<d;s++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function ie(e,t,n){for(var r,o=[].concat(e),i=1/(n+1),a=ae(t)[0],l=1;l<=n;l++)i*=l,0===(r=Math.floor(e.length*i))?o.unshift([a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]):o.splice(r,0,[a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]);return o}function ae(e){var t=[];switch(e[0]){case"M":case"L":case"T":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var le=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=ae(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},se=Object.freeze({__proto__:null,catmullRomToBezier:B,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,o=n/r,i=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<r-n;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var l=Math.floor(o*a);i[l]=(i[l]||0)+1}var s=i.reduce((function(t,r,o){return o===n?t.concat(e[n]):t.concat(function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var o=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var i=r,a=1/n,l=0;l<n-1;l++){var s=te(i,a/(1-a*l));o.push(s.left),i=s.right}return o.push(i),o.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var o=[].concat(e);"M"===o[0]&&(o[0]="L");for(var i=0;i<=n-1;i++)r.push(o)}return r}(e[o],e[o+1],r))}),[]);return s.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||s.push("Z"),s},fillPathByDiff:oe,formatPath:le,intersection:function(e,t){return function(e,t,n){var r,o,i,a,l,s,c,u,d,h;e=H(e),t=H(t);for(var f=[],p=0,v=e.length;p<v;p++){var g=e[p];if("M"===g[0])r=l=g[1],o=s=g[2];else{"C"===g[0]?(d=[r,o].concat(g.slice(1)),r=d[6],o=d[7]):(d=[r,o,r,o,l,s,l,s],r=l,o=s);for(var m=0,y=t.length;m<y;m++){var b=t[m];if("M"===b[0])i=c=b[1],a=u=b[2];else{"C"===b[0]?(h=[i,a].concat(b.slice(1)),i=h[6],a=h[7]):(h=[i,a,i,a,c,u,c,u],i=c,a=u);for(var C=ee(d,h,n),w=0,x=C.length;w<x;w++)C[w].segment1=p,C[w].segment2=m,C[w].bez1=d,C[w].bez2=h;f=f.concat(C)}}}}return f}(e,t)},parsePathArray:U,parsePathString:k,pathToAbsolute:F,pathToCurve:H,rectPath:K}),ce=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}(),ue=function(e,t){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ue(e,t)};function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var he=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._events[e]||[],i=this._events["*"]||[],a=function(r){for(var o=r.length,i=0;i<o;i++)if(r[i]){var a=r[i],l=a.callback;a.once&&(r.splice(i,1),0===r.length&&delete t._events[e],o--,i--),l.apply(t,n)}};a(o),a(i)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,o=0;o<r;o++)n[o].callback===t&&(n.splice(o,1),r--,o--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}();function fe(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var pe="undefined"!=typeof window&&void 0!==window.document;function ve(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function ge(e){return e.cfg.visible&&e.cfg.capture}var me=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=O(r,t),n}return de(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(he),ye=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},be=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Ce=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},we=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},xe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ee=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Se=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Le(e){var t=function(e){return""!==e&&Ee.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new we;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=ye(ye([],o,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-o.length),!0)):o=[];var i=o.join("."),a=function(e){for(var t=0,n=Se.length;t<n;t++){var r=Se[t],o=r[0];if(r[1].exec(e))return o}return null}(e),l=xe.exec(e);return l&&l[1]?new Ce(n,i,a,l[1]):new be(n,i,a)}var Oe,Ie="undefined"!=typeof Float32Array?Float32Array:Array;function _e(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],l=t[4],s=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],v=n[3],g=n[4],m=n[5],y=n[6],b=n[7],C=n[8];return e[0]=h*r+f*a+p*c,e[1]=h*o+f*l+p*u,e[2]=h*i+f*s+p*d,e[3]=v*r+g*a+m*c,e[4]=v*o+g*l+m*u,e[5]=v*i+g*s+m*d,e[6]=y*r+b*a+C*c,e[7]=y*o+b*l+C*u,e[8]=y*i+b*s+C*d,e}function Te(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}function Ae(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),_e(e,r,t)}function Me(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),_e(e,r,t)}function Ne(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),_e(e,r,t)}function Re(e,t,n){return _e(e,n,t)}function De(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,o=t.length;r<o;r++){var i=t[r];switch(i[0]){case"t":Ae(n,n,[i[1],i[2]]);break;case"s":Ne(n,n,[i[1],i[2]]);break;case"r":Me(n,n,i[1]);break;case"m":Re(n,n,i[1])}}return n}function ke(e,t){var n=[],r=e[0],o=e[1],i=e[2],a=e[3],l=e[4],s=e[5],c=e[6],u=e[7],d=e[8],h=t[0],f=t[1],p=t[2],v=t[3],g=t[4],m=t[5],y=t[6],b=t[7],C=t[8];return n[0]=h*r+f*a+p*c,n[1]=h*o+f*l+p*u,n[2]=h*i+f*s+p*d,n[3]=v*r+g*a+m*c,n[4]=v*o+g*l+m*u,n[5]=v*i+g*s+m*d,n[6]=y*r+b*a+C*c,n[7]=y*o+b*l+C*u,n[8]=y*i+b*s+C*d,n}function Be(e,t){var n=[],r=t[0],o=t[1];return n[0]=e[0]*r+e[3]*o+e[6],n[1]=e[1]*r+e[4]*o+e[7],n}function Pe(e){var t=[],n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],l=e[5],s=e[6],c=e[7],u=e[8],d=u*a-l*c,h=-u*i+l*s,f=c*i-a*s,p=n*d+r*h+o*f;return p?(p=1/p,t[0]=d*p,t[1]=(-u*r+o*c)*p,t[2]=(l*r-o*a)*p,t[3]=h*p,t[4]=(u*n-o*s)*p,t[5]=(-l*n+o*i)*p,t[6]=f*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Oe=new Ie(3),Ie!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0),function(){var e=new Ie(2);Ie!=Float32Array&&(e[0]=0,e[1]=0)}();var Fe=De,je="matrix",ze=["zIndex","capture","visible","type"],Ge=["repeat"];function He(e,t){var n={},r=t.attrs;for(var o in e)n[o]=r[o];return n}function We(e,t){var n={},r=t.attr();return p(e,(function(e,t){-1!==Ge.indexOf(t)||_(r[t],e)||(n[t]=e)})),n}function Ue(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,o=t.duration,i=Object.prototype.hasOwnProperty;return p(e,(function(e){n+r<e.startTime+e.delay+e.duration&&o>e.delay&&p(t.toAttrs,(function(t,n){i.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var Ve=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return O(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return de(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1];if(!r)return this.attrs;if(f(r)){for(var i in r)this.setAttr(i,r[i]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,o),this.afterAttrsChange(((e={})[r]=o,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(fe(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(je,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(je)},t.prototype.setMatrix=function(e){this.attr(je,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?ke(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t,n=this.attr("matrix");t=e&&n?ke(e,n):n||e,this.set("totalMatrix",t),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?Be(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=Pe(t);if(n)return Be(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[S(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){return this.cfg.clipShape||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};p(t,(function(e,r){h(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)h(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return p(ze,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var o,i,a,l,s,c=e[0],d=e[1],h=e[2],p=void 0===h?"easeLinear":h,v=e[3],g=void 0===v?M:v,m=e[4],y=void 0===m?0:m;u(c)?(o=c,c={}):f(c)&&c.onFrame&&(o=c.onFrame,i=c.repeat),f(d)?(d=(s=d).duration,p=s.easing||"easeLinear",y=s.delay||0,i=s.repeat||i||!1,g=s.callback||M,a=s.pauseCallback||M,l=s.resumeCallback||M):(b(g)&&(y=g,g=null),u(p)?(g=p,p="easeLinear"):p=p||"easeLinear");var C=We(c,this),w={fromAttrs:He(C,this),toAttrs:C,duration:d,easing:p,repeat:i,callback:g,pauseCallback:a,resumeCallback:l,delay:y,startTime:n.getTime(),id:A(),onFrame:o,pathFormatted:!1};r.length>0?r=Ue(r,w):n.addAnimator(this),r.push(w),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),p(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return p(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return p(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,o=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var i=function(e){var i=o[e],l=i.get("name");if(l){if((i.isGroup()||i.isCanvas&&i.isCanvas())&&n&&ve(i,n))return"break";h(l)?p(l,(function(e){r.emitDelegateEvent(i,e,t)})):a.emitDelegateEvent(i,l,t)}},a=this,l=0;l<o.length&&"break"!==i(l);l++);},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),o=t+":"+n.type;(r[o]||r["*"])&&(n.name=o,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(o,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=Fe(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=Fe(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=Fe(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,o=this.getMatrix(),i=Fe(o,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(i),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),o=Fe(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(o),this},t}(me),Ye={};function $e(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){$e(e,t)}))}}function Xe(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){Xe(e,t)}))}}var qe,Ke,Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return de(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,o=[],i=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(p(a,(function(e){var t=e.getBBox();o.push(t.minX,t.maxX),i.push(t.minY,t.maxY)})),e=m(o),t=g(o),n=m(i),r=g(i)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,o=[],i=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(p(a,(function(e){var t=e.getCanvasBBox();o.push(t.minX,t.maxX),i.push(t.minY,t.maxY)})),e=m(o),t=g(o),n=m(i),r=g(i)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){p(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];f(n)?r=n:r.type=n;var o=Ye[r.type];o||(o=S(r.type),Ye[r.type]=o);var i=this.getShapeBase(),a=new i[o](r);return this.add(a),a},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],o=e[1];if(u(r))n=new r(o||{parent:this});else{var i=r||{},a=this.getGroupBase();n=new a(i)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!ge(this))return null;var r,o=this.getChildren();if(this.isCanvas())r=this._findShape(o,e,t,n);else{var i=[e,t,1];i=this.invertFromMatrix(i),this.isClipped(i[0],i[1])||(r=this._findShape(o,i[0],i[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var o=null,i=e.length-1;i>=0;i--){var a=e[i];if(ge(a)&&(a.isGroup()?o=a.getShape(t,n,r):a.isHit(t,n)&&(o=a)),o)break}return o},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),o=e.getParent();o&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),fe(e.getChildren(),t)}(o,e,!1),e.set("parent",this),t&&$e(e,t),r&&Xe(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();p(t,(function(e,t){return e._INDEX=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return p(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return p(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(Ve),Qe=0,Je=0,et=0,tt=0,nt=0,rt=0,ot="object"==typeof performance&&performance.now?performance:Date,it="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function at(){return nt||(it(lt),nt=ot.now()+rt)}function lt(){nt=0}function st(){this._call=this._time=this._next=null}function ct(e,t,n){var r=new st;return r.restart(e,t,n),r}function ut(){nt=(tt=ot.now())+rt,Qe=Je=0;try{!function(){at(),++Qe;for(var e,t=qe;t;)(e=nt-t._time)>=0&&t._call.call(null,e),t=t._next;--Qe}()}finally{Qe=0,function(){for(var e,t,n=qe,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:qe=t);Ke=e,ht(r)}(),nt=0}}function dt(){var e=ot.now(),t=e-tt;t>1e3&&(rt-=t,tt=e)}function ht(e){Qe||(Je&&(Je=clearTimeout(Je)),e-nt>24?(e<1/0&&(Je=setTimeout(ut,e-ot.now()-rt)),et&&(et=clearInterval(et))):(et||(tt=ot.now(),et=setInterval(dt,1e3)),Qe=1,it(ut)))}function ft(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vt(){}st.prototype=ct.prototype={constructor:st,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?at():+n)+(null==t?0:+t),this._next||Ke===this||(Ke?Ke._next=this:qe=this,Ke=this),this._call=e,this._time=n,ht()},stop:function(){this._call&&(this._call=null,this._time=1/0,ht())}};var gt=.7,mt=1/gt,yt="\\s*([+-]?\\d+)\\s*",bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ct="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wt=/^#([0-9a-f]{3,8})$/,xt=new RegExp("^rgb\\("+[yt,yt,yt]+"\\)$"),Et=new RegExp("^rgb\\("+[Ct,Ct,Ct]+"\\)$"),St=new RegExp("^rgba\\("+[yt,yt,yt,bt]+"\\)$"),Lt=new RegExp("^rgba\\("+[Ct,Ct,Ct,bt]+"\\)$"),Ot=new RegExp("^hsl\\("+[bt,Ct,Ct]+"\\)$"),It=new RegExp("^hsla\\("+[bt,Ct,Ct,bt]+"\\)$"),_t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Tt(){return this.rgb().formatHex()}function At(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Nt(t):3===n?new Bt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Rt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xt.exec(e))?new Bt(t[1],t[2],t[3],1):(t=Et.exec(e))?new Bt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=St.exec(e))?Rt(t[1],t[2],t[3],t[4]):(t=Lt.exec(e))?Rt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ot.exec(e))?zt(t[1],t[2]/100,t[3]/100,1):(t=It.exec(e))?zt(t[1],t[2]/100,t[3]/100,t[4]):_t.hasOwnProperty(e)?Nt(_t[e]):"transparent"===e?new Bt(NaN,NaN,NaN,0):null}function Nt(e){return new Bt(e>>16&255,e>>8&255,255&e,1)}function Rt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bt(e,t,n,r)}function Dt(e){return e instanceof vt||(e=Mt(e)),e?new Bt((e=e.rgb()).r,e.g,e.b,e.opacity):new Bt}function kt(e,t,n,r){return 1===arguments.length?Dt(e):new Bt(e,t,n,null==r?1:r)}function Bt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Pt(){return"#"+jt(this.r)+jt(this.g)+jt(this.b)}function Ft(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function jt(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function zt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,n,r)}function Gt(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof vt||(e=Mt(e)),!e)return new Ht;if(e instanceof Ht)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,l=i-o,s=(i+o)/2;return l?(a=t===i?(n-r)/l+6*(n<r):n===i?(r-t)/l+2:(t-n)/l+4,l/=s<.5?i+o:2-i-o,a*=60):l=s>0&&s<1?0:a,new Ht(a,l,s,e.opacity)}function Ht(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ut(e){return function(){return e}}function Vt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Ut(isNaN(e)?t:e)}ft(vt,Mt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Tt,formatHex:Tt,formatHsl:function(){return Gt(this).formatHsl()},formatRgb:At,toString:At}),ft(Bt,kt,pt(vt,{brighter:function(e){return e=null==e?mt:Math.pow(mt,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?gt:Math.pow(gt,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pt,formatHex:Pt,formatRgb:Ft,toString:Ft})),ft(Ht,(function(e,t,n,r){return 1===arguments.length?Gt(e):new Ht(e,t,n,null==r?1:r)}),pt(vt,{brighter:function(e){return e=null==e?mt:Math.pow(mt,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?gt:Math.pow(gt,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Bt(Wt(e>=240?e-240:e+120,o,r),Wt(e,o,r),Wt(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Yt=function e(t){var n=function(e){return 1==(e=+e)?Vt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ut(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=kt(e)).r,(t=kt(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Vt(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function $t(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function Xt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qt(e,t){return(Xt(t)?$t:Kt)(e,t)}function Kt(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=rn(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}function Zt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Jt(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=rn(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var en=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tn=new RegExp(en.source,"g");function nn(e,t){var n,r,o,i=en.lastIndex=tn.lastIndex=0,a=-1,l=[],s=[];for(e+="",t+="";(n=en.exec(e))&&(r=tn.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),l[a]?l[a]+=o:l[++a]=o),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,s.push({i:a,x:Qt(n,r)})),i=tn.lastIndex;return i<t.length&&(o=t.slice(i),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function rn(e,t){var n,r=typeof t;return null==t||"boolean"===r?Ut(t):("number"===r?Qt:"string"===r?(n=Mt(t))?(t=n,Yt):nn:t instanceof Mt?Yt:t instanceof Date?Zt:Xt(t)?$t:Array.isArray(t)?Kt:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Jt:Qt)(e,t)}function on(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function an(e){return e*e*e}function ln(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sn=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),cn=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),un=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),dn=Math.PI,hn=dn/2;function fn(e){return(1-Math.cos(dn*e))/2}function pn(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function vn(e){return((e*=2)<=1?pn(1-e):2-pn(e-1))/2}function gn(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var mn=7.5625;function yn(e){return(e=+e)<.36363636363636365?mn*e*e:e<.7272727272727273?mn*(e-=.5454545454545454)*e+.75:e<.9090909090909091?mn*(e-=.8181818181818182)*e+.9375:mn*(e-=.9545454545454546)*e+.984375}var bn=1.70158,Cn=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(bn),wn=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(bn),xn=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(bn),En=2*Math.PI,Sn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return t*pn(- --e)*Math.sin((r-e)/n)}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),Ln=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return 1-t*pn(e=+e)*Math.sin((e+r)/n)}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),On=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return((e=2*e-1)<0?t*pn(-e)*Math.sin((r-e)/n):2-t*pn(e)*Math.sin((r+e)/n))/2}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),In=Object.freeze({__proto__:null,easeLinear:function(e){return+e},easeQuad:on,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:on,easeCubic:ln,easeCubicIn:an,easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:ln,easePoly:un,easePolyIn:sn,easePolyOut:cn,easePolyInOut:un,easeSin:fn,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*hn)},easeSinOut:function(e){return Math.sin(e*hn)},easeSinInOut:fn,easeExp:vn,easeExpIn:function(e){return pn(1-+e)},easeExpOut:function(e){return 1-pn(e)},easeExpInOut:vn,easeCircle:gn,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:gn,easeBounce:yn,easeBounceIn:function(e){return 1-yn(1-e)},easeBounceOut:yn,easeBounceInOut:function(e){return((e*=2)<=1?1-yn(1-e):yn(e-1)+1)/2},easeBack:xn,easeBackIn:Cn,easeBackOut:wn,easeBackInOut:xn,easeElastic:Ln,easeElasticIn:Sn,easeElasticOut:Ln,easeElasticInOut:On}),_n={},Tn=[1,0,0,0,1,0,0,0,1];function An(e,t,n){var r,o=t.startTime;if(n<o+t.delay||t._paused)return!1;var i,a=t.duration,l=t.easing,s=_n[(i=l).toLowerCase()]||In[i];if(n=n-o-t.delay,t.repeat)r=s(r=n%a/a);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=s(r)}if(t.onFrame){var c=t.onFrame(r);e.attr(c)}else!function(e,t,n){var r={},o=t.fromAttrs,i=t.toAttrs;if(!e.destroyed){var a,l;for(var s in i)if(!_(o[s],i[s]))if("path"===s){var c=i[s],d=o[s];c.length>d.length?(c=k(i[s]),d=k(o[s]),d=oe(d,c),d=le(d,c),t.fromAttrs.path=d,t.toAttrs.path=c):t.pathFormatted||(c=k(i[s]),d=k(o[s]),d=le(d,c),t.fromAttrs.path=d,t.toAttrs.path=c,t.pathFormatted=!0),r[s]=[];for(var h=0;h<c.length;h++){for(var f=c[h],p=d[h],v=[],g=0;g<f.length;g++)b(f[g])&&p&&b(p[g])?(a=rn(p[g],f[g]),v.push(a(n))):v.push(f[g]);r[s].push(v)}}else if("matrix"===s){var m=qt(o[s]||Tn,i[s]||Tn)(n);r[s]=m}else["fill","stroke","fillStyle","strokeStyle"].includes(s)&&(l=i[s],/^[r,R,L,l]{1}[\s]*\(/.test(l))?r[s]=i[s]:u(i[s])||(a=rn(o[s],i[s]),r[s]=a(n));e.attr(r)}}(e,t,r);return!1}var Mn=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=ct((function(o){if(r.current=o,r.animators.length>0){for(var i=r.animators.length-1;i>=0;i--)if((e=r.animators[i]).destroyed)r.removeAnimator(i);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)n=t[a],An(e,n,o)&&(t.splice(a,1),n.callback&&n.callback());0===t.length&&r.removeAnimator(i)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),Nn=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Rn(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function Dn(e,t,n){if(n.bubbles){var r=void 0,o=!1;if("mouseenter"===t?(r=n.fromShape,o=!0):"mouseleave"===t&&(o=!0,r=n.toShape),e.isCanvas()&&o)return;if(r&&ve(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var kn=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");p(Nn,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");p(Nn,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,o,i){var a=new ce(e,t);return a.fromShape=o,a.toShape=i,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),o=this["_on"+e],i=!1;if(o)o.call(this,n,r,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(i=!0,a&&this._emitEvent(e,t,n,a,a,null),this._emitEvent(e,t,n,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(i||(this.currentShape=r),r&&!r.get("destroyed")){var l=this.canvas;l.get("el").style.cursor=r.attr("cursor")||l.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var o=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,o){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),o||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),o&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,o=this.currentShape,i=this.draggingShape;if(this.dragging)i&&this._emitDragoverEvents(n,e,o,t,!1),this._emitEvent("drag",n,e,i);else{var a=this.mousedownPoint;if(a){var l=this.mousedownShape,s=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-e.clientX,u=a.clientY-e.clientY;s>120||c*c+u*u>40?l&&l.get("draggable")?((i=this.mousedownShape).set("capture",!1),this.draggingShape=i,this.dragging=!0,this._emitEvent("dragstart",n,e,i),this.mousedownShape=null,this.mousedownPoint=null):!l&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,o,i){var a=this._getEventObj(e,t,n,r,o,i);if(r){a.shape=r,Rn(r,e,a);for(var l=r.getParent();l;)l.emitDelegation(e,a),a.propagationStopped||Dn(l,e,a),a.propagationPath.push(l),l=l.getParent()}else Rn(this.canvas,e,a)},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),Bn="undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?Le(navigator.userAgent):"undefined"!=typeof process&&process.version?new function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}(process.version.slice(1)):null,Pn=Bn&&"firefox"===Bn.name,Fn=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return de(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");y(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new kn({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new Mn(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");pe&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");pe&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(Pn&&!d(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!d(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(Ze),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return de(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var o=n[r];t.add(o.clone())}return t},t}(Ze),zn=function(e){function t(t){return e.call(this,t)||this}return de(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,o=e.maxX,i=e.maxY;if(t){var a=Be(t,[e.minX,e.minY]),l=Be(t,[e.maxX,e.minY]),s=Be(t,[e.minX,e.maxY]),c=Be(t,[e.maxX,e.maxY]);n=Math.min(a[0],l[0],s[0],c[0]),o=Math.max(a[0],l[0],s[0],c[0]),r=Math.min(a[1],l[1],s[1],c[1]),i=Math.max(a[1],l[1],s[1],c[1])}var u=this.attrs;if(u.shadowColor){var d=u.shadowBlur,h=void 0===d?0:d,f=u.shadowOffsetX,p=void 0===f?0:f,v=u.shadowOffsetY,g=void 0===v?0:v,m=n-h+p,y=o+h+p,b=r-h+g,C=i+h+g;n=Math.min(n,m),o=Math.max(o,y),r=Math.min(r,b),i=Math.max(i,C)}return{x:n,y:r,minX:n,minY:r,maxX:o,maxY:i,width:o-n,height:i-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),o=[e,t,1],i=(o=this.invertFromMatrix(o))[0],a=o[1],l=this._isInBBox(i,a);if(this.isOnlyHitBox())return l;if(l&&!this.isClipped(i,a)){if(this.isInShape(i,a))return!0;if(n&&n.isHit(i,a))return!0;if(r&&r.isHit(i,a))return!0}return!1},t}(Ve),Gn=new Map;function Hn(e,t){Gn.set(e,t)}function Wn(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Un(e){var t=e.attr(),n=t.x,r=t.y,o=t.r;return{x:n-o,y:r-o,width:2*o,height:2*o}}function Vn(e){return Math.min.apply(null,e)}function Yn(e){return Math.max.apply(null,e)}function $n(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function Xn(e,t){return Math.abs(e-t)<.001}function qn(e,t){var n=Vn(e),r=Vn(t);return{x:n,y:r,width:Yn(e)-n,height:Yn(t)-r}}function Kn(e){return(e+2*Math.PI)%(2*Math.PI)}var Zn=function(e,t,n,r){return $n(e,t,n,r)},Qn=function(e,t,n,r,o){return{x:(1-o)*e+o*n,y:(1-o)*t+o*r}},Jn=function(e,t,n,r,o,i){var a=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(a,[0,0]))return Math.sqrt((o-e)*(o-e)+(i-t)*(i-t));var l=[-a[1],a[0]];!function(e,t){var n=t[0],r=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o}(l,l);var s=[o-e,i-t];return Math.abs(function(e,t){return e[0]*t[0]+e[1]*t[1]}(s,l))};function er(e,t,n,r,o,i){var a,l=1/0,s=[n,r],c=20;i&&i>200&&(c=i/10);for(var u=1/c,d=u/10,h=0;h<=c;h++){var f=h*u,p=[o.apply(null,e.concat([f])),o.apply(null,t.concat([f]))];(y=$n(s[0],s[1],p[0],p[1]))<l&&(a=f,l=y)}if(0===a)return{x:e[0],y:t[0]};if(1===a){var v=e.length;return{x:e[v-1],y:t[v-1]}}for(l=1/0,h=0;h<32&&!(d<1e-4);h++){var g=a-d,m=a+d,y=(p=[o.apply(null,e.concat([g])),o.apply(null,t.concat([g]))],$n(s[0],s[1],p[0],p[1]));if(g>=0&&y<l)a=g,l=y;else{var b=[o.apply(null,e.concat([m])),o.apply(null,t.concat([m]))],C=$n(s[0],s[1],b[0],b[1]);m<=1&&C<l?(a=m,l=C):d*=.5}}return{x:o.apply(null,e.concat([a])),y:o.apply(null,t.concat([a]))}}function tr(e,t,n,r){var o=1-r;return o*o*e+2*r*o*t+r*r*n}function nr(e,t,n){var r=e+n-2*t;if(Xn(r,0))return[.5];var o=(e-t)/r;return o<=1&&o>=0?[o]:[]}function rr(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function or(e,t,n,r,o,i,a){var l=tr(e,n,o,a),s=tr(t,r,i,a),c=Qn(e,t,n,r,a),u=Qn(n,r,o,i,a);return[[e,t,c.x,c.y,l,s],[l,s,u.x,u.y,o,i]]}function ir(e,t,n,r,o,i,a){if(0===a)return($n(e,t,n,r)+$n(n,r,o,i)+$n(e,t,o,i))/2;var l=or(e,t,n,r,o,i,.5),s=l[0],c=l[1];return s.push(a-1),c.push(a-1),ir.apply(null,s)+ir.apply(null,c)}var ar={box:function(e,t,n,r,o,i){var a=nr(e,n,o)[0],l=nr(t,r,i)[0],s=[e,o],c=[t,i];return void 0!==a&&s.push(tr(e,n,o,a)),void 0!==l&&c.push(tr(t,r,i,l)),qn(s,c)},length:function(e,t,n,r,o,i){return ir(e,t,n,r,o,i,3)},nearestPoint:function(e,t,n,r,o,i,a,l){return er([e,n,o],[t,r,i],a,l,tr)},pointDistance:function(e,t,n,r,o,i,a,l){var s=this.nearestPoint(e,t,n,r,o,i,a,l);return $n(s.x,s.y,a,l)},interpolationAt:tr,pointAt:function(e,t,n,r,o,i,a){return{x:tr(e,n,o,a),y:tr(t,r,i,a)}},divide:function(e,t,n,r,o,i,a){return or(e,t,n,r,o,i,a)},tangentAngle:function(e,t,n,r,o,i,a){var l=rr(e,n,o,a),s=rr(t,r,i,a);return Kn(Math.atan2(s,l))}};function lr(e,t,n,r,o){var i=1-o;return i*i*i*e+3*t*o*i*i+3*n*o*o*i+r*o*o*o}function sr(e,t,n,r,o){var i=1-o;return 3*(i*i*(t-e)+2*i*o*(n-t)+o*o*(r-n))}function cr(e,t,n,r){var o,i,a,l=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,c=3*t-3*e,u=[];if(Xn(l,0))Xn(s,0)||(o=-c/s)>=0&&o<=1&&u.push(o);else{var d=s*s-4*l*c;Xn(d,0)?u.push(-s/(2*l)):d>0&&(i=(-s-(a=Math.sqrt(d)))/(2*l),(o=(-s+a)/(2*l))>=0&&o<=1&&u.push(o),i>=0&&i<=1&&u.push(i))}return u}function ur(e,t,n,r,o,i,a,l,s){var c=lr(e,n,o,a,s),u=lr(t,r,i,l,s),d=Qn(e,t,n,r,s),h=Qn(n,r,o,i,s),f=Qn(o,i,a,l,s),p=Qn(d.x,d.y,h.x,h.y,s),v=Qn(h.x,h.y,f.x,f.y,s);return[[e,t,d.x,d.y,p.x,p.y,c,u],[c,u,v.x,v.y,f.x,f.y,a,l]]}function dr(e,t,n,r,o,i,a,l,s){if(0===s)return function(e,t){for(var n=0,r=e.length,o=0;o<r;o++)n+=$n(e[o],t[o],e[(o+1)%r],t[(o+1)%r]);return n/2}([e,n,o,a],[t,r,i,l]);var c=ur(e,t,n,r,o,i,a,l,.5),u=c[0],d=c[1];return u.push(s-1),d.push(s-1),dr.apply(null,u)+dr.apply(null,d)}var hr={extrema:cr,box:function(e,t,n,r,o,i,a,l){for(var s=[e,a],c=[t,l],u=cr(e,n,o,a),d=cr(t,r,i,l),h=0;h<u.length;h++)s.push(lr(e,n,o,a,u[h]));for(h=0;h<d.length;h++)c.push(lr(t,r,i,l,d[h]));return qn(s,c)},length:function(e,t,n,r,o,i,a,l){return dr(e,t,n,r,o,i,a,l,3)},nearestPoint:function(e,t,n,r,o,i,a,l,s,c,u){return er([e,n,o,a],[t,r,i,l],s,c,lr,u)},pointDistance:function(e,t,n,r,o,i,a,l,s,c,u){var d=this.nearestPoint(e,t,n,r,o,i,a,l,s,c,u);return $n(d.x,d.y,s,c)},interpolationAt:lr,pointAt:function(e,t,n,r,o,i,a,l,s){return{x:lr(e,n,o,a,s),y:lr(t,r,i,l,s)}},divide:function(e,t,n,r,o,i,a,l,s){return ur(e,t,n,r,o,i,a,l,s)},tangentAngle:function(e,t,n,r,o,i,a,l,s){var c=sr(e,n,o,a,s),u=sr(t,r,i,l,s);return Kn(Math.atan2(u,c))}};function fr(e,t,n,r,o,i){return n*Math.cos(o)*Math.cos(i)-r*Math.sin(o)*Math.sin(i)+e}function pr(e,t,n,r,o,i){return n*Math.sin(o)*Math.cos(i)+r*Math.cos(o)*Math.sin(i)+t}var vr=function(e,t,n,r,o,i,a){for(var l=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,o),s=1/0,c=-1/0,u=[i,a],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var h=l+d;i<a?i<h&&h<a&&u.push(h):a<h&&h<i&&u.push(h)}for(d=0;d<u.length;d++){var f=fr(e,0,n,r,o,u[d]);f<s&&(s=f),f>c&&(c=f)}var p=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,o),v=1/0,g=-1/0,m=[i,a];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var y=p+d;i<a?i<y&&y<a&&m.push(y):a<y&&y<i&&m.push(y)}for(d=0;d<m.length;d++){var b=pr(0,t,n,r,o,m[d]);b<v&&(v=b),b>g&&(g=b)}return{x:s,y:v,width:c-s,height:g-v}};function gr(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function mr(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=gr(t,n.getCanvasBBox())),r&&(t=gr(t,r.getCanvasBBox())),t}var yr=null;function br(){if(!yr){var e=document.createElement("canvas");e.width=1,e.height=1,yr=e.getContext("2d")}return yr}function Cr(e,t,n){var r=1;if(y(e)&&(r=e.split("\n").length),r>1){var o=function(e,t){return t?t-e:.14*e}(t,n);return t*r+o*(r-1)}return t}function wr(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var xr=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Er=/[^\s\,]+/gi,Sr="\t\n\v\f\r   ᠎             　\u2028\u2029",Lr=new RegExp("([a-z])["+Sr+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Sr+"]*,?["+Sr+"]*)+)","ig"),Or=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Sr+"]*,?["+Sr+"]*","ig"),Ir=/[a-z]/;function _r(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Tr(e){var t=function(e){if(!e)return null;if(h(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Lr,(function(e,r,o){var i=[],a=r.toLowerCase();if(o.replace(Or,(function(e,t){t&&i.push(+t)})),"m"===a&&i.length>2&&(n.push([r].concat(i.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===i.length&&n.push([r,i[0]]),"r"===a)n.push([r].concat(i));else for(;i.length>=t[a]&&(n.push([r].concat(i.splice(0,t[a]))),t[a]););return""})),n}(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var o=t[r][0];if(Ir.test(o)||["V","H","T","S"].indexOf(o)>=0){n=!0;break}}if(!n)return t;var i=[],a=0,l=0,s=0,c=0,u=0,d=t[0];"M"!==d[0]&&"m"!==d[0]||(s=a=+d[1],c=l=+d[2],u++,i[0]=["M",a,l]),r=u;for(var f=t.length;r<f;r++){var p=t[r],v=i[r-1],g=[],m=(o=p[0]).toUpperCase();if(o!==m)switch(g[0]=m,m){case"A":g[1]=p[1],g[2]=p[2],g[3]=p[3],g[4]=p[4],g[5]=p[5],g[6]=+p[6]+a,g[7]=+p[7]+l;break;case"V":g[1]=+p[1]+l;break;case"H":g[1]=+p[1]+a;break;case"M":s=+p[1]+a,c=+p[2]+l,g[1]=s,g[2]=c;break;default:for(var y=1,b=p.length;y<b;y++)g[y]=+p[y]+(y%2?a:l)}else g=t[r];switch(m){case"Z":a=+s,l=+c;break;case"H":g=["L",a=g[1],l];break;case"V":g=["L",a,l=g[1]];break;case"T":a=g[1],l=g[2];var C=_r([v[1],v[2]],[v[3],v[4]]);g=["Q",C[0],C[1],a,l];break;case"S":a=g[g.length-2],l=g[g.length-1];var w=v.length,x=_r([v[w-4],v[w-3]],[v[w-2],v[w-1]]);g=["C",x[0],x[1],g[1],g[2],a,l];break;case"M":s=g[g.length-2],c=g[g.length-1];break;default:a=g[g.length-2],l=g[g.length-1]}i.push(g)}return i}function Ar(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Mr(e,t){return Ar(e)*Ar(t)?(e[0]*t[0]+e[1]*t[1])/(Ar(e)*Ar(t)):1}function Nr(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Mr(e,t))}function Rr(e,t){return e[0]===t[0]&&e[1]===t[1]}function Dr(e,t){var n=t[1],r=t[2],o=C(x(t[3]),2*Math.PI),i=t[4],a=t[5],l=e[0],s=e[1],c=t[6],u=t[7],d=Math.cos(o)*(l-c)/2+Math.sin(o)*(s-u)/2,h=-1*Math.sin(o)*(l-c)/2+Math.cos(o)*(s-u)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;i===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?v*-r*d/n:0,y=(l+c)/2+Math.cos(o)*g-Math.sin(o)*m,b=(s+u)/2+Math.sin(o)*g+Math.cos(o)*m,w=[(d-g)/n,(h-m)/r],E=[(-1*d-g)/n,(-1*h-m)/r],S=Nr([1,0],w),L=Nr(w,E);return Mr(w,E)<=-1&&(L=Math.PI),Mr(w,E)>=1&&(L=0),0===a&&L>0&&(L-=2*Math.PI),1===a&&L<0&&(L+=2*Math.PI),{cx:y,cy:b,rx:Rr(e,[c,u])?0:n,ry:Rr(e,[c,u])?0:r,startAngle:S,endAngle:S+L,xRotation:o,arcFlag:i,sweepFlag:a}}function kr(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Br(e){e=function(e){var t=e||[];return h(t)?t:y(t)?(p(t=t.match(xr),(function(e,n){if((e=e.match(Er))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}p(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e);for(var t=[],n=null,r=null,o=null,i=0,a=e.length,l=0;l<a;l++){var s=e[l];r=e[l+1];var c=s[0],u={command:c,prePoint:n,params:s,startTangent:null,endTangent:null};switch(c){case"M":o=[s[1],s[2]],i=l;break;case"A":var d=Dr(n,s);u.arcParams=d}if("Z"===c)n=o,r=e[i+1];else{var f=s.length;n=[s[f-2],s[f-1]]}r&&"Z"===r[0]&&(r=e[i],t[i]&&(t[i].prePoint=n)),u.currentPoint=n,t[i]&&Rr(n,t[i].currentPoint)&&(t[i].prePoint=u.prePoint);var v=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=v;var g=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[g[0]-n[0],g[1]-n[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]];else if("Q"===c){var m=[s[1],s[2]];u.startTangent=[g[0]-m[0],g[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c)m=kr((w=t[l-1]).currentPoint,g),"Q"===w.command?(u.command="Q",u.startTangent=[g[0]-m[0],g[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[g[0]-n[0],g[1]-n[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]);else if("C"===c){var b=[s[1],s[2]],C=[s[3],s[4]];u.startTangent=[g[0]-b[0],g[1]-b[1]],u.endTangent=[n[0]-C[0],n[1]-C[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[b[0]-C[0],b[1]-C[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[C[0]-b[0],C[1]-b[1]])}else if("S"===c){var w;b=kr((w=t[l-1]).currentPoint,g),C=[s[1],s[2]],"C"===w.command?(u.command="C",u.startTangent=[g[0]-b[0],g[1]-b[1]],u.endTangent=[n[0]-C[0],n[1]-C[1]]):(u.command="SQ",u.startTangent=[g[0]-C[0],g[1]-C[1]],u.endTangent=[n[0]-C[0],n[1]-C[1]])}else if("A"===c){var x=.001,E=u.arcParams||{},S=E.cx,L=void 0===S?0:S,O=E.cy,I=void 0===O?0:O,_=E.rx,T=void 0===_?0:_,A=E.ry,M=void 0===A?0:A,N=E.sweepFlag,R=void 0===N?0:N,D=E.startAngle,k=void 0===D?0:D,B=E.endAngle,P=void 0===B?0:B;0===R&&(x*=-1);var F=T*Math.cos(k-x)+L,j=M*Math.sin(k-x)+I;u.startTangent=[F-o[0],j-o[1]];var z=T*Math.cos(k+P+x)+L,G=M*Math.sin(k+P-x)+I;u.endTangent=[g[0]-z,g[1]-G]}t.push(u)}return t}function Pr(e,t){var n,r,o=e.prePoint,i=e.currentPoint,a=e.nextPoint,l=Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2),s=Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2),c=Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2),u=Math.acos((l+s-c)/(2*Math.sqrt(l)*Math.sqrt(s)));if(!u||0===Math.sin(u)||(n=u,0,void 0===r&&(r=1e-5),Math.abs(n-0)<r))return{xExtra:0,yExtra:0};var d=Math.abs(Math.atan2(a[1]-i[1],a[0]-i[0])),h=Math.abs(Math.atan2(a[0]-i[0],a[1]-i[1]));return d=d>Math.PI/2?Math.PI-d:d,h=h>Math.PI/2?Math.PI-h:h,{xExtra:Math.cos(u/2-d)*(t/2*(1/Math.sin(u/2)))-t/2||0,yExtra:Math.cos(h-u/2)*(t/2*(1/Math.sin(u/2)))-t/2||0}}function Fr(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function jr(e,t,n,r,o,i){return o>=e&&o<=e+n&&i>=t&&i<=t+r}function zr(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function Gr(e,t){return e[0]===t[0]&&e[1]===t[1]}Hn("rect",Wn),Hn("image",Wn),Hn("circle",Un),Hn("marker",Un),Hn("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}var a=qn(n,r),l=a.x,s=a.y,c={minX:l,minY:s,maxX:l+a.width,maxY:s+a.height};return{x:(c=mr(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Hn("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}return qn(n,r)})),Hn("text",(function(e){var t=e.attr(),n=t.x,r=t.y,o=t.text,i=t.fontSize,a=t.lineHeight,l=t.font;l||(l=wr(t));var s,c=function(e,t){var n=br(),r=0;return d(e)||""===e||(n.save(),n.font=t,y(e)&&e.includes("\n")?p(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(o,l);if(c){var u=t.textAlign,h=t.textBaseline,f=Cr(o,i,a),v={x:n,y:r-f};u&&("end"===u||"right"===u?v.x-=c:"center"===u&&(v.x-=c/2)),h&&("top"===h?v.y+=f:"middle"===h&&(v.y+=f/2)),s={x:v.x,y:v.y,width:c,height:f}}else s={x:n,y:r,width:0,height:0};return s})),Hn("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,o=function(e,t){for(var n=[],r=[],o=[],i=0;i<e.length;i++){var a=(v=e[i]).currentPoint,l=v.params,s=v.prePoint,c=void 0;switch(v.command){case"Q":c=ar.box(s[0],s[1],l[1],l[2],l[3],l[4]);break;case"C":c=hr.box(s[0],s[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var u=v.arcParams;c=vr(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(v.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===v.command||"M"===v.command)&&v.prePoint&&v.nextPoint&&o.push(v)}n=n.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0})),r=r.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}));var d=m(n),h=m(r),f=g(n),p=g(r);if(0===o.length)return{x:d,y:h,width:f-d,height:p-h};for(i=0;i<o.length;i++){var v;(a=(v=o[i]).currentPoint)[0]===d?d-=Pr(v,t).xExtra:a[0]===f&&(f+=Pr(v,t).xExtra),a[1]===h?h-=Pr(v,t).yExtra:a[1]===p&&(p+=Pr(v,t).yExtra)}return{x:d,y:h,width:f-d,height:p-h}}(e.get("segments")||Br(n),r),i=o.x,a=o.y,l={minX:i,minY:a,maxX:i+o.width,maxY:a+o.height};return{x:(l=mr(e,l)).minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}})),Hn("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2,a={minX:Math.min(n,o),maxX:Math.max(n,o),minY:Math.min(r,i),maxY:Math.max(r,i)};return{x:(a=mr(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Hn("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,o=t.rx,i=t.ry;return{x:n-o,y:r-i,width:2*o,height:2*i}}));var Hr=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Wr=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ur=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Vr=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Yr(e,t){p(e.match(Vr),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function $r(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(y(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,o,i=Hr.exec(n),a=parseFloat(i[1])%360*(Math.PI/180),l=i[2],s=t.getBBox();a>=0&&a<.5*Math.PI?(r={x:s.minX,y:s.minY},o={x:s.maxX,y:s.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:s.maxX,y:s.minY},o={x:s.minX,y:s.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:s.maxX,y:s.maxY},o={x:s.minX,y:s.minY}):(r={x:s.minX,y:s.maxY},o={x:s.maxX,y:s.minY});var c=Math.tan(a),u=c*c,d=(o.x-r.x+c*(o.y-r.y))/(u+1)+r.x,h=c*(o.x-r.x+c*(o.y-r.y))/(u+1)+r.y,f=e.createLinearGradient(r.x,r.y,d,h);return Yr(l,f),f}(e,t,n);if("r"===n[0])return function(e,t,n){var r=Wr.exec(n),o=parseFloat(r[1]),i=parseFloat(r[2]),a=parseFloat(r[3]),l=r[4];if(0===a){var s=l.match(Vr);return s[s.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,d=c.maxY-c.minY,h=Math.sqrt(u*u+d*d)/2,f=e.createRadialGradient(c.minX+u*o,c.minY+d*i,0,c.minX+u/2,c.minY+d/2,a*h);return Yr(l,f),f}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,o,i=Ur.exec(n),a=i[1],l=i[2];function s(){r=e.createPattern(o,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return o=new Image,l.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=l,o.complete?s():(o.onload=s,o.src=o.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function Xr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function qr(e,t){return Xr(e)*Xr(t)?(e[0]*t[0]+e[1]*t[1])/(Xr(e)*Xr(t)):1}function Kr(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(qr(e,t))}function Zr(e,t){var n=t[1],r=t[2],o=C(x(t[3]),2*Math.PI),i=t[4],a=t[5],l=e[0],s=e[1],c=t[6],u=t[7],d=Math.cos(o)*(l-c)/2+Math.sin(o)*(s-u)/2,h=-1*Math.sin(o)*(l-c)/2+Math.cos(o)*(s-u)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;i===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*h/r:0,m=n?v*-r*d/n:0,y=(l+c)/2+Math.cos(o)*g-Math.sin(o)*m,b=(s+u)/2+Math.sin(o)*g+Math.cos(o)*m,w=[(d-g)/n,(h-m)/r],E=[(-1*d-g)/n,(-1*h-m)/r],S=Kr([1,0],w),L=Kr(w,E);return qr(w,E)<=-1&&(L=Math.PI),qr(w,E)>=1&&(L=0),0===a&&L>0&&(L-=2*Math.PI),1===a&&L<0&&(L+=2*Math.PI),{cx:y,cy:b,rx:Gr(e,[c,u])?0:n,ry:Gr(e,[c,u])?0:r,startAngle:S,endAngle:S+L,xRotation:o,arcFlag:i,sweepFlag:a}}var Qr=Math.sin,Jr=Math.cos,eo=Math.atan2,to=Math.PI;function no(e,t,n,r,o,i,a){var l=t.stroke,s=t.lineWidth,c=eo(r-i,n-o),u=new zo({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Jr(to/6)+","+10*Qr(to/6)+" L0,0 L"+10*Jr(to/6)+",-"+10*Qr(to/6),stroke:l,lineWidth:s}});u.translate(o,i),u.rotateAtPoint(o,i,c),e.set(a?"startArrowShape":"endArrowShape",u)}function ro(e,t,n,r,o,i,l){var s=t.startArrow,c=t.endArrow,u=t.stroke,d=t.lineWidth,h=l?s:c,f=h.d,p=h.fill,v=h.stroke,g=h.lineWidth,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(h,["d","fill","stroke","lineWidth"]),y=eo(r-i,n-o);f&&(o-=Jr(y)*f,i-=Qr(y)*f);var b=new zo({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:a(a({},m),{stroke:v||u,lineWidth:g||d,fill:p})});b.translate(o,i),b.rotateAtPoint(o,i,y),e.set(l?"startArrowShape":"endArrowShape",b)}function oo(e,t,n,r,o){var i=eo(r-t,n-e);return{dx:Jr(i)*o,dy:Qr(i)*o}}function io(e,t,n,r,o,i){"object"==typeof t.startArrow?ro(e,t,n,r,o,i,!0):t.startArrow?no(e,t,n,r,o,i,!0):e.set("startArrowShape",null)}function ao(e,t,n,r,o,i){"object"==typeof t.endArrow?ro(e,t,n,r,o,i,!1):t.endArrow?no(e,t,n,r,o,i,!1):e.set("startArrowShape",null)}var lo={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function so(e,t){var n=t.attr();for(var r in n){var o=n[r],i=lo[r]?lo[r]:r;"matrix"===i&&o?e.transform(o[0],o[1],o[3],o[4],o[6],o[7]):"lineDash"===i&&e.setLineDash?h(o)&&e.setLineDash(o):("strokeStyle"===i||"fillStyle"===i?o=$r(e,t,o):"globalAlpha"===i&&(o*=e.globalAlpha),e[i]=o)}}function co(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];o.cfg.visible?o.draw(e,n):o.skipDraw()}}function uo(e,t,n){var r=e.get("refreshElements");p(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?po(t):ho(t,n)}function ho(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&po(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&ho(r.cfg.children,t);else{var o=vo(r,t);r.cfg.refresh=o,o&&r.isGroup()&&ho(r.cfg.children,t)}}}function fo(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&fo(n.cfg.children)}}function po(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&po(r.get("children"))}}function vo(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&zr(n,t)}function go(e,t,n,r){var o=n.path,i=n.startArrow,a=n.endArrow;if(o){var l=[0,0],s=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<o.length;u++){var d=o[u],h=d[0];if(0===u&&i&&i.d)c=oo((f=e.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],i.d);else if(u===o.length-2&&"Z"===o[u+1][0]&&a&&a.d)"Z"===o[u+1][0]&&(c=oo((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d));else if(u===o.length-1&&a&&a.d){var f;"Z"!==o[0]&&(c=oo((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d))}var p=c.dx,v=c.dy;switch(h){case"M":t.moveTo(d[1]-p,d[2]-v),s=[d[1],d[2]];break;case"L":t.lineTo(d[1]-p,d[2]-v);break;case"Q":t.quadraticCurveTo(d[1],d[2],d[3]-p,d[4]-v);break;case"C":t.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-p,d[6]-v);break;case"A":var g=void 0;r?(g=r[u])||(g=Zr(l,d),r[u]=g):g=Zr(l,d);var m=g.cx,y=g.cy,b=g.rx,C=g.ry,w=g.startAngle,x=g.endAngle,E=g.xRotation,S=g.sweepFlag;if(t.ellipse)t.ellipse(m,y,b,C,E,w,x,1-S);else{var L=b>C?b:C,O=b>C?1:b/C,I=b>C?C/b:1;t.translate(m,y),t.rotate(E),t.scale(O,I),t.arc(0,0,L,w,x,1-S),t.scale(1/O,1/I),t.rotate(-E),t.translate(-m,-y)}break;case"Z":t.closePath()}if("Z"===h)l=s;else{var _=d.length;l=[d[_-2],d[_-1]]}}}}function mo(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}var yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCanvasChange=function(e){mo(this,e)},t.prototype.getShapeBase=function(){return r},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),so(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];p(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var o=m(t),i=g(t),a=m(n),l=g(n);r={minX:o,minY:a,x:o,y:a,maxX:i,maxY:l,width:i-o,height:l-a};var s=this.cfg.canvas;if(s){var c=s.getViewRange();this.set("isInView",zr(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),so(e,this),this._applyClip(e,this.getClip()),co(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(jn),bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return r},t.prototype.getGroupBase=function(){return yo},t.prototype.onCanvasChange=function(e){mo(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=function(e){return Gn.get(e)}(e),r=n(this),o=t/2,i=r.x-o,a=r.y-o,l=r.x+r.width+o,s=r.y+r.height+o;return{x:i,minX:i,y:a,minY:a,width:r.width+t,height:r.height+t,maxX:l,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),so(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!zr(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),so(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=zr(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,i=t.fillOpacity;this.isFill()&&(d(i)||1===i?this.fill(e):(e.globalAlpha=i,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(d(o)||1===o||(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,o)},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(zn),Co=bo,wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=i.x,l=i.y,s=i.r,c=o/2,u=Fr(a,l,e,t);return r&&n?u<=s+c:r?u<=s:!!n&&u>=s-c&&u<=s+c},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.r;e.beginPath(),e.arc(n,r,o,0,2*Math.PI,!1),e.closePath()},t}(Co);function xo(e,t,n,r){return e/(n*n)+t/(r*r)}var Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=o/2,l=i.x,s=i.y,c=i.rx,u=i.ry,d=(e-l)*(e-l),h=(t-s)*(t-s);return r&&n?xo(d,h,c+a,u+a)<=1:r?xo(d,h,c,u)<=1:!!n&&xo(d,h,c-a,u-a)>=1&&xo(d,h,c+a,u+a)<=1},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.rx,i=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,o,i,0,0,2*Math.PI,!1);else{var a=o>i?o:i,l=o>i?1:o/i,s=o>i?i/o:1;e.save(),e.translate(n,r),e.scale(l,s),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(Co);function So(e){return e instanceof HTMLElement&&y(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var Lo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(y(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):So(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,o=t.width,i=t.height,a=t.sx,l=t.sy,s=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||So(u))&&(d(a)||d(l)||d(s)||d(c)?e.drawImage(u,n,r,o,i):e.drawImage(u,a,l,s,c,n,r,o,i))},t}(Co);function Oo(e,t,n,r,o,i,a){var l=Math.min(e,n),s=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),d=o/2;return i>=l-d&&i<=s+d&&a>=c-d&&a<=u+d&&Jn(e,t,n,r,i,a)<=o/2}var Io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,o=e.y2,i=e.startArrow,a=e.endArrow;i&&io(this,e,r,o,t,n),a&&ao(this,e,t,n,r,o)},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){if(!n||!o)return!1;var i=this.attr();return Oo(i.x1,i.y1,i.x2,i.y2,o,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.startArrow,l=t.endArrow,s={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(s=oo(n,r,o,i,t.startArrow.d)),l&&l.d&&(c=oo(n,r,o,i,t.endArrow.d)),e.beginPath(),e.moveTo(n+s.dx,r+s.dy),e.lineTo(o-c.dx,i-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,o=e.y2;return Zn(t,n,r,o)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2;return Qn(n,r,o,i,e)},t}(Co),_o=Io,To={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return d(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),o=r.x,i=r.y,a=r.symbol||"circle",l=this._getR(r);if(u(a))n=Tr(n=(e=a)(o,i,l));else{if(!(e=t.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=e(o,i,l)}return n},t.prototype.createPath=function(e){go(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=To,t}(Co),Mo=Ao;function No(e,t,n){var r=br();return e.createPath(r),r.isPointInPath(t,n)}function Ro(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function Do(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function ko(e,t,n){var r=!1,o=e.length;if(o<=2)return!1;for(var i=0;i<o;i++){var a=e[i],l=e[(i+1)%o];if(Do(a,l,[t,n]))return!0;Ro(a[1]-n)>0!=Ro(l[1]-n)>0&&Ro(t-(n-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(r=!r)}return r}function Bo(e,t,n,r,o,i,a,l){var s=(Math.atan2(l-t,a-e)+2*Math.PI)%(2*Math.PI);if(s<r||s>o)return!1;var c={x:e+n*Math.cos(s),y:t+n*Math.sin(s)};return Fr(c.x,c.y,a,l)<=i/2}var Po=De,Fo=a({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var o=e[r][0];if("C"===o||"A"===o||"Q"===o){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],o=[],i=0;i<t;i++){var a=e[i],l=a[0];"M"===l?(o.length&&(r.push(o),o=[]),o.push([a[1],a[2]])):"Z"===l?o.length&&(n.push(o),o=[]):o.push([a[1],a[2]])}return o.length>0&&r.push(o),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,o){for(var i=!1,a=t/2,l=0;l<e.length;l++){var s=e[l],c=s.currentPoint,u=s.params,d=s.prePoint,h=s.box;if(!h||jr(h.x-a,h.y-a,h.width+t,h.height+t,n,r)){switch(s.command){case"L":case"Z":i=Oo(d[0],d[1],c[0],c[1],t,n,r);break;case"Q":i=ar.pointDistance(d[0],d[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":i=hr.pointDistance(d[0],d[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,o)<=t/2;break;case"A":var f=s.arcParams,p=f.cx,v=f.cy,g=f.rx,m=f.ry,y=f.startAngle,b=f.endAngle,C=f.xRotation,w=[n,r,1],x=g>m?g:m;Te(w,w,Po(null,[["t",-p,-v],["r",-C],["s",1/(g>m?1:g/m),1/(g>m?m/g:1)]])),i=Bo(0,0,x,y,b,t,w[0],w[1])}if(i)break}}return i}},se);function jo(e,t,n){for(var r=!1,o=0;o<e.length&&!(r=ko(e[o],t,n));o++);return r}var zo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=Tr(e);var t=Fo.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Br(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&io(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]),r&&ao(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.getSegments(),a=this.get("hasArc"),l=!1;if(n){var s=this.getTotalLength();l=Fo.isPointInStroke(i,o,e,t,s)}if(!l&&r)if(a)l=No(this,e,t);else{var c=this.attr("path"),u=Fo.extractPolygons(c);l=jo(u.polygons,e,t)||jo(u.polylines,e,t)}return l},t.prototype.createPath=function(e){go(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return d(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var o=this.get("curve");if(!r||0===r.length)return o?{x:o[0][1],y:o[0][2]}:null;p(r,(function(r,o){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=o)}));var i=o[n];if(d(i)||d(n))return null;var a=i.length,l=o[n+1];return hr.pointAt(i[a-2],i[a-1],l[1],l[2],l[3],l[4],l[5],l[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Fo.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,o=0,i=0,a=[],l=this.get("curve");l&&(p(l,(function(e,t){n=l[t+1],r=e.length,n&&(o+=hr.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",o),0!==o?(p(l,(function(s,c){n=l[c+1],r=s.length,n&&((e=[])[0]=i/o,t=hr.length(s[r-2],s[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),i+=t||0,e[1]=i/o,a.push(e))})),this.set("tCache",a)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([n[0]-o[0],n[1]-o[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,o=t[n-1].currentPoint,i=t[n-1].endTangent;e=[],i?(e.push([o[0]-i[0],o[1]-i[1]]),e.push([o[0],o[1]])):(e.push([r[0],r[1]]),e.push([o[0],o[1]]))}return e},t}(Co);function Go(e,t,n,r,o){var i=e.length;if(i<2)return!1;for(var a=0;a<i-1;a++)if(Oo(e[a][0],e[a][1],e[a+1][0],e[a+1][1],t,n,r))return!0;if(o){var l=e[0],s=e[i-1];if(Oo(l[0],l[1],s[0],s[1],t,n,r))return!0}return!1}var Ho=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr().points,a=!1;return n&&(a=Go(i,o,e,t,!0)),!a&&r&&(a=ko(i,e,t)),a},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(Co),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,o=t.endArrow,i=n.length,a=n[0][0],l=n[0][1],s=n[i-1][0],c=n[i-1][1];r&&io(this,e,n[1][0],n[1][1],a,l),o&&ao(this,e,n[i-2][0],n[i-2][1],s,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!(!n||!o)&&Go(this.attr().points,o,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,o=t.endArrow,i=n.length;if(!(n.length<2)){var a,l=n[0][0],s=n[0][1],c=n[i-1][0],u=n[i-1][1];r&&r.d&&(l+=(a=oo(l,s,n[1][0],n[1][1],r.d)).dx,s+=a.dy),o&&o.d&&(c-=(a=oo(n[i-2][0],n[i-2][1],c,u,o.d)).dx,u-=a.dy),e.beginPath(),e.moveTo(l,s);for(var d=0;d<i-1;d++){var h=n[d];e.lineTo(h[0],h[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return d(t)?(this.set("totalLength",function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];t+=$n(r[0],r[1],o[0],o[1])}return t}(e)}(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),p(o,(function(r,o){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=o)})),Qn(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,o=0,i=[];p(e,(function(a,l){e[l+1]&&((n=[])[0]=o/t,r=Zn(a[0],a[1],e[l+1][0],e[l+1][1]),o+=r,n[1]=o/t,i.push(n))})),this.set("tCache",i)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(Co),Uo=Wo,Vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=i.x,l=i.y,s=i.width,c=i.height,u=i.radius;if(u){var d=!1;return n&&(d=function(e,t,n,r,o,i,a,l){return Oo(e+o,t,e+n-o,t,i,a,l)||Oo(e+n,t+o,e+n,t+r-o,i,a,l)||Oo(e+n-o,t+r,e+o,t+r,i,a,l)||Oo(e,t+r-o,e,t+o,i,a,l)||Bo(e+n-o,t+o,o,1.5*Math.PI,2*Math.PI,i,a,l)||Bo(e+n-o,t+r-o,o,0,.5*Math.PI,i,a,l)||Bo(e+o,t+r-o,o,.5*Math.PI,Math.PI,i,a,l)||Bo(e+o,t+o,o,Math.PI,1.5*Math.PI,i,a,l)}(a,l,s,c,u,o,e,t)),!d&&r&&(d=No(this,e,t)),d}var h=o/2;return r&&n?jr(a-h,l-h,s+h,c+h,e,t):r?jr(a,l,s,c,e,t):n?function(e,t,n,r,o,i,a){var l=o/2;return jr(e-l,t-l,n,o,i,a)||jr(e+n-l,t-l,o,r,i,a)||jr(e+l,t+r-l,n,o,i,a)||jr(e-l,t+l,o,r,i,a)}(a,l,s,c,o,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.width,i=t.height,a=t.radius;if(e.beginPath(),0===a)e.rect(n,r,o,i);else{var l=function(e){var t=0,n=0,r=0,o=0;return h(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,[t,n,r,o]}(a),s=l[0],c=l[1],u=l[2],d=l[3];e.moveTo(n+s,r),e.lineTo(n+o-c,r),0!==c&&e.arc(n+o-c,r+c,c,-Math.PI/2,0),e.lineTo(n+o,r+i-u),0!==u&&e.arc(n+o-u,r+i-u,u,0,Math.PI/2),e.lineTo(n+d,r+i),0!==d&&e.arc(n+d,r+i-d,d,Math.PI/2,Math.PI),e.lineTo(n,r+s),0!==s&&e.arc(n+s,r+s,s,Math.PI,1.5*Math.PI),e.closePath()}},t}(Co),Yo=Vo,$o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return a(a({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=wr(e)},t.prototype._setText=function(e){var t=null;y(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,o=this.attrs,i=o.textBaseline,a=o.x,l=o.y,s=1*o.fontSize,c=this._getSpaceingY(),u=Cr(o.text,o.fontSize,o.lineHeight);p(t,(function(t,o){r=l+o*(c+s)-u+s,"middle"===i&&(r+=u-s-(u-s)/2),"top"===i&&(r+=u-s),d(t)||(n?e.fillText(t,a,r):e.strokeText(t,a,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,o=n.y,i=this.get("textArr");if(i)this._drawTextArr(e,i,t);else{var a=n.text;d(a)||(t?e.fillText(a,r,o):e.strokeText(a,r,o))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,i=t.fillOpacity;this.isStroke()&&n>0&&(d(o)||1===o||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(d(i)||1===i?this.fill(e):(e.globalAlpha=i,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(Co),Xo=$o;function qo(e,t,n){var r,o,i=e.getTotalMatrix();if(i){var a=(r=[t,n,1],(o=i)?Be(Pe(o),r):r);return[a[0],a[1]]}return[t,n]}function Ko(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!ge(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=qo(e,t,n),o=r[0],i=r[1];if(e.isClipped(o,i))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=a.minX&&t<=a.maxX&&n>=a.minY&&n<=a.maxY}function Zo(e,t,n){if(!Ko(e,t,n))return null;for(var r=null,o=e.getChildren(),i=o.length-1;i>=0;i--){var a=o[i];if(a.isGroup())r=Zo(a,t,n);else if(Ko(a,t,n)){var l=a,s=qo(a,t,n),c=s[0],u=s[1];l.isInShape(c,u)&&(r=a)}if(r)break}return r}var Qo,Jo,ei,ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return r},t.prototype.getGroupBase=function(){return yo},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),o=this.get("el"),i=this.getPixelRatio();o.width=i*t,o.height=i*n,i>1&&r.scale(i,i)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?Zo(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();return t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],o=[];return p(e,(function(e){var i=function(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var o=e.get("cacheCanvasBBox"),i=o&&!(!o.width||!o.height),a=e.getCanvasBBox(),l=a&&!(!a.width||!a.height);i&&l?(r=a,t=(n=o)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):i?t=o:l&&(t=a)}return t}(e);i&&(t.push(i.minX),n.push(i.minY),r.push(i.maxX),o.push(i.maxY))})),{minX:m(t),minY:m(n),maxX:g(r),maxY:g(o)}}(t),e&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&zr(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)))),e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),so(e,this),co(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),so(e,this),uo(this,n,r),co(e,n,r),e.restore()):t.length&&fo(t),p(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Fn);!function(e){e.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",e.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",e.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",e.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",e.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",e.HOVER_EVENT="interaction:hover",e.TREND_ICON_CLICK="interaction:trend-icon-click"}(Qo||(Qo={})),function(e){e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_OUT="mouseout",e.MOUSE_LEAVE="mouseleave",e.MOUSE_UP="mouseup",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.CLICK="click",e.HOVER="hover",e.DOUBLE_CLICK="dblclick",e.CONTEXT_MENU="contextmenu"}(Jo||(Jo={})),function(e){e.ROW_CELL_HOVER="row-cell:hover",e.ROW_CELL_CLICK="row-cell:click",e.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",e.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",e.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",e.ROW_CELL_MOUSE_UP="row-cell:mouse-up",e.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",e.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",e.ROW_CELL_SCROLL="row-cell:scroll",e.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",e.COL_CELL_HOVER="col-cell:hover",e.COL_CELL_CLICK="col-cell:click",e.COL_CELL_DOUBLE_CLICK="col-cell:double-click",e.COL_CELL_CONTEXT_MENU="col-cell:context-menu",e.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",e.COL_CELL_MOUSE_UP="col-cell:mouse-up",e.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",e.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",e.DATA_CELL_HOVER="data-cell:hover",e.DATA_CELL_CLICK="data-cell:click",e.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",e.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",e.DATA_CELL_MOUSE_UP="data-cell:mouse-up",e.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",e.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",e.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",e.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",e.DATA_CELL_SELECT_MOVE="data-cell:select-move",e.CORNER_CELL_HOVER="corner-cell:hover",e.CORNER_CELL_CLICK="corner-cell:click",e.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",e.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",e.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",e.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",e.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",e.MERGED_CELLS_HOVER="merged-cells:hover",e.MERGED_CELLS_CLICK="merged-cells:click",e.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",e.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",e.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",e.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",e.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",e.RANGE_SORT="sort:range-sort",e.RANGE_SORTED="sort:range-sorted",e.RANGE_FILTER="filter:range-filter",e.RANGE_FILTERED="filter:range-filtered",e.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",e.LAYOUT_CELL_SCROLL="layout:cell-scroll",e.LAYOUT_PAGINATION="layout:pagination",e.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",e.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",e.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",e.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",e.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",e.LAYOUT_AFTER_RENDER="layout:after-render",e.LAYOUT_BEFORE_RENDER="layout:before-render",e.LAYOUT_DESTROY="layout:destroy",e.LAYOUT_RESIZE="layout:resize",e.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",e.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",e.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",e.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",e.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",e.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",e.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",e.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",e.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",e.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",e.GLOBAL_KEYBOARD_UP="global:keyboard-up",e.GLOBAL_COPIED="global:copied",e.GLOBAL_MOUSE_UP="global:mouse-up",e.GLOBAL_MOUSE_MOVE="global:mouse-move",e.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",e.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",e.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",e.GLOBAL_CONTEXT_MENU="global:context-menu",e.GLOBAL_CLICK="global:click",e.GLOBAL_DOUBLE_CLICK="global:double-click",e.GLOBAL_SELECTED="global:selected",e.GLOBAL_HOVER="global:hover",e.GLOBAL_RESET="global:reset",e.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",e.GLOBAL_SCROLL="global:scroll"}(ei||(ei={}));var ni,ri="$$value$$",oi="$$extra$$",ii="$$extra_column$$",ai="$$total$$",li="$$series_number$$",si="mergedCellsGroup",ci="frozenRowGroup",ui="frozenColGroup",di="frozenTrailingRowGroup",hi="frozenTrailingColGroup",fi="frozenTopGroup",pi="frozenBottomGroup",vi="rowResizeAreaGroup",gi="rowFrozenResizeAreaGroup",mi="frozenSplitLine",yi="rowIndexResizeAreaGroup",bi="cornerResizeAreaGroup",Ci="colResizeAreaGroup",wi="colFrozenResizeAreaGroup",xi="gridGroup",Ei="horizontal-resize-area-",Si="root",Li="[&]",Oi="-",Ii=/^root\[&\]*/;!function(e){e.Line="line",e.Bar="bar",e.Bullet="bullet"}(ni||(ni={}));var _i,Ti,Ai,Mi="square",Ni="...",Ri="antv-s2",Di="valueRanges",ki={},Bi="#000000",Pi="#FFFFFF",Fi={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};!function(e){e.ROW="row",e.COL="col",e.TRAILING_ROW="trailingRow",e.TRAILING_COL="trailingCol",e.SCROLL="scroll",e.TOP="top",e.BOTTOM="bottom"}(Ti||(Ti={})),function(e){e.FROZEN_COL="frozenCol",e.FROZEN_ROW="frozenRow",e.FROZEN_TRAILING_COL="frozenTrailingCol",e.FROZEN_TRAILING_ROW="frozenTrailingRow"}(Ai||(Ai={}));var ji=((_i={})[Ti.ROW]="frozenRowGroup",_i[Ti.COL]="frozenColGroup",_i[Ti.TRAILING_COL]="frozenTrailingColGroup",_i[Ti.TRAILING_ROW]="frozenTrailingRowGroup",_i[Ti.SCROLL]="panelScrollGroup",_i[Ti.TOP]="frozenTopGroup",_i[Ti.BOTTOM]="frozenBottomGroup",_i),zi="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,Gi="object"==typeof self&&self&&self.Object===Object&&self,Hi=zi||Gi||Function("return this")(),Wi=Hi.Symbol,Ui=Object.prototype,Vi=Ui.hasOwnProperty,Yi=Ui.toString,$i=Wi?Wi.toStringTag:void 0,Xi=Object.prototype.toString,qi=Wi?Wi.toStringTag:void 0;function Ki(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qi&&qi in Object(e)?function(e){var t=Vi.call(e,$i),n=e[$i];try{e[$i]=void 0;var r=!0}catch(e){}var o=Yi.call(e);return r&&(t?e[$i]=n:delete e[$i]),o}(e):function(e){return Xi.call(e)}(e)}function Zi(e){return null!=e&&"object"==typeof e}function Qi(e){return"symbol"==typeof e||Zi(e)&&"[object Symbol]"==Ki(e)}function Ji(e){return"number"==typeof e?e:Qi(e)?NaN:+e}function ea(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var ta=Array.isArray,na=Wi?Wi.prototype:void 0,ra=na?na.toString:void 0;function oa(e){if("string"==typeof e)return e;if(ta(e))return ea(e,oa)+"";if(Qi(e))return ra?ra.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ia(e,t){return function(n,r){var o;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(o=n),void 0!==r){if(void 0===o)return r;"string"==typeof n||"string"==typeof r?(n=oa(n),r=oa(r)):(n=Ji(n),r=Ji(r)),o=e(n,r)}return o}}var aa=ia((function(e,t){return e+t}),0),la=/\s/;function sa(e){for(var t=e.length;t--&&la.test(e.charAt(t)););return t}var ca=/^\s+/;function ua(e){return e?e.slice(0,sa(e)+1).replace(ca,""):e}function da(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ha=/^[-+]0x[0-9a-f]+$/i,fa=/^0b[01]+$/i,pa=/^0o[0-7]+$/i,va=parseInt;function ga(e){if("number"==typeof e)return e;if(Qi(e))return NaN;if(da(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=da(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ua(e);var n=fa.test(e);return n||pa.test(e)?va(e.slice(2),n?2:8):ha.test(e)?NaN:+e}function ma(e){return e?Infinity===(e=ga(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ya(e){var t=ma(e),n=t%1;return t==t?n?t-n:t:0}function ba(e){return e}function Ca(e){if(!da(e))return!1;var t=Ki(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var wa,xa=Hi["__core-js_shared__"],Ea=(wa=/[^.]+$/.exec(xa&&xa.keys&&xa.keys.IE_PROTO||""))?"Symbol(src)_1."+wa:"",Sa=Function.prototype.toString;function La(e){if(null!=e){try{return Sa.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Oa=/^\[object .+?Constructor\]$/,Ia=Function.prototype,_a=Object.prototype,Ta=Ia.toString,Aa=_a.hasOwnProperty,Ma=RegExp("^"+Ta.call(Aa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Na(e){return!(!da(e)||function(e){return!!Ea&&Ea in e}(e))&&(Ca(e)?Ma:Oa).test(La(e))}function Ra(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Na(n)?n:void 0}var Da=Ra(Hi,"WeakMap"),ka=Da&&new Da,Ba=ka?function(e,t){return ka.set(e,t),e}:ba,Pa=Ba,Fa=Object.create,ja=function(){function e(){}return function(t){if(!da(t))return{};if(Fa)return Fa(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),za=ja;function Ga(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=za(e.prototype),r=e.apply(n,t);return da(r)?r:n}}function Ha(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Wa=Math.max;function Ua(e,t,n,r){for(var o=-1,i=e.length,a=n.length,l=-1,s=t.length,c=Wa(i-a,0),u=Array(s+c),d=!r;++l<s;)u[l]=t[l];for(;++o<a;)(d||o<i)&&(u[n[o]]=e[o]);for(;c--;)u[l++]=e[o++];return u}var Va=Math.max;function Ya(e,t,n,r){for(var o=-1,i=e.length,a=-1,l=n.length,s=-1,c=t.length,u=Va(i-l,0),d=Array(u+c),h=!r;++o<u;)d[o]=e[o];for(var f=o;++s<c;)d[f+s]=t[s];for(;++a<l;)(h||o<i)&&(d[f+n[a]]=e[o++]);return d}function $a(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function Xa(){}function qa(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ka(){}qa.prototype=za(Xa.prototype),qa.prototype.constructor=qa;var Za=ka?function(e){return ka.get(e)}:Ka,Qa=Za,Ja={},el=Object.prototype.hasOwnProperty;function tl(e){for(var t=e.name+"",n=Ja[t],r=el.call(Ja,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function nl(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function rl(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function ol(e){if(e instanceof qa)return e.clone();var t=new nl(e.__wrapped__,e.__chain__);return t.__actions__=rl(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}nl.prototype=za(Xa.prototype),nl.prototype.constructor=nl;var il=Object.prototype.hasOwnProperty;function al(e){if(Zi(e)&&!ta(e)&&!(e instanceof qa)){if(e instanceof nl)return e;if(il.call(e,"__wrapped__"))return ol(e)}return new nl(e)}function ll(e){var t=tl(e),n=al[t];if("function"!=typeof n||!(t in qa.prototype))return!1;if(e===n)return!0;var r=Qa(n);return!!r&&e===r[0]}al.prototype=Xa.prototype,al.prototype.constructor=al;var sl=Date.now;function cl(e){var t=0,n=0;return function(){var r=sl(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ul=cl(Pa),dl=/\{\n\/\* \[wrapped with (.+)\] \*/,hl=/,? & /,fl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function pl(e){return function(){return e}}var vl=function(){try{var e=Ra(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),gl=vl,ml=gl?function(e,t){return gl(e,"toString",{configurable:!0,enumerable:!1,value:pl(t),writable:!0})}:ba,yl=cl(ml);function bl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Cl(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function wl(e){return e!=e}function xl(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Cl(e,wl,n)}function El(e,t){return!(null==e||!e.length)&&xl(e,t,0)>-1}var Sl=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Ll(e,t,n){var r=t+"";return yl(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(fl,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return bl(Sl,(function(n){var r="_."+n[0];t&n[1]&&!El(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(dl);return t?t[1].split(hl):[]}(r),n)))}function Ol(e,t,n,r,o,i,a,l,s,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=[e,t,o,u?i:void 0,u?a:void 0,u?void 0:i,u?void 0:a,l,s,c],h=n.apply(void 0,d);return ll(e)&&ul(h,d),h.placeholder=r,Ll(h,e,t)}function Il(e){return e.placeholder}var _l=/^(?:0|[1-9]\d*)$/;function Tl(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&_l.test(e))&&e>-1&&e%1==0&&e<t}var Al=Math.min;function Ml(e,t){for(var n=e.length,r=Al(t.length,n),o=rl(e);r--;){var i=t[r];e[r]=Tl(i,n)?o[i]:void 0}return e}var Nl="__lodash_placeholder__";function Rl(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==Nl||(e[n]=Nl,i[o++]=n)}return i}function Dl(e,t,n,r,o,i,a,l,s,c){var u=128&t,d=1&t,h=2&t,f=24&t,p=512&t,v=h?void 0:Ga(e);return function g(){for(var m=arguments.length,y=Array(m),b=m;b--;)y[b]=arguments[b];if(f)var C=Il(g),w=$a(y,C);if(r&&(y=Ua(y,r,o,f)),i&&(y=Ya(y,i,a,f)),m-=w,f&&m<c){var x=Rl(y,C);return Ol(e,t,Dl,g.placeholder,n,y,x,l,s,c-m)}var E=d?n:this,S=h?E[e]:e;return m=y.length,l?y=Ml(y,l):p&&m>1&&y.reverse(),u&&s<m&&(y.length=s),this&&this!==Hi&&this instanceof g&&(S=v||Ga(S)),S.apply(E,y)}}var kl="__lodash_placeholder__",Bl=Math.min,Pl=Math.max;function Fl(e,t,n,r,o,i,a,l){var s=2&t;if(!s&&"function"!=typeof e)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=o=void 0),a=void 0===a?a:Pl(ya(a),0),l=void 0===l?l:ya(l),c-=o?o.length:0,64&t){var u=r,d=o;r=o=void 0}var h=s?void 0:Qa(e),f=[e,t,n,r,o,u,d,i,a,l];if(h&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!a)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var l=t[3];if(l){var s=e[3];e[3]=s?Ua(s,l,t[4]):l,e[4]=s?Rl(e[3],kl):t[4]}(l=t[5])&&(s=e[5],e[5]=s?Ya(s,l,t[6]):l,e[6]=s?Rl(e[5],kl):t[6]),(l=t[7])&&(e[7]=l),128&r&&(e[8]=null==e[8]?t[8]:Bl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(f,h),e=f[0],t=f[1],n=f[2],r=f[3],o=f[4],!(l=f[9]=void 0===f[9]?s?0:e.length:Pl(f[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?function(e,t,n){var r=Ga(e);return function o(){for(var i=arguments.length,a=Array(i),l=i,s=Il(o);l--;)a[l]=arguments[l];var c=i<3&&a[0]!==s&&a[i-1]!==s?[]:Rl(a,s);return(i-=c.length)<n?Ol(e,t,Dl,o.placeholder,void 0,a,c,void 0,void 0,n-i):Ha(this&&this!==Hi&&this instanceof o?r:e,this,a)}}(e,t,l):32!=t&&33!=t||o.length?Dl.apply(void 0,f):function(e,t,n,r){var o=1&t,i=Ga(e);return function t(){for(var a=-1,l=arguments.length,s=-1,c=r.length,u=Array(c+l),d=this&&this!==Hi&&this instanceof t?i:e;++s<c;)u[s]=r[s];for(;l--;)u[s++]=arguments[++a];return Ha(d,o?n:this,u)}}(e,t,n,r);else var p=function(e,t,n){var r=1&t,o=Ga(e);return function t(){return(this&&this!==Hi&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return Ll((h?Pa:ul)(p,f),e,t)}function jl(e,t,n){return t=n?void 0:t,Fl(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function zl(e,t,n){"__proto__"==t&&gl?gl(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gl(e,t){return e===t||e!=e&&t!=t}var Hl=Object.prototype.hasOwnProperty;function Wl(e,t,n){var r=e[t];Hl.call(e,t)&&Gl(r,n)&&(void 0!==n||t in e)||zl(e,t,n)}function Ul(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var l=t[i],s=r?r(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),o?zl(n,l,s):Wl(n,l,s)}return n}var Vl=Math.max;function Yl(e,t,n){return t=Vl(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Vl(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),Ha(e,this,l)}}function $l(e,t){return yl(Yl(e,t,ba),e+"")}function Xl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ql(e){return null!=e&&Xl(e.length)&&!Ca(e)}function Kl(e,t,n){if(!da(n))return!1;var r=typeof t;return!!("number"==r?ql(n)&&Tl(t,n.length):"string"==r&&t in n)&&Gl(n[t],e)}function Zl(e){return $l((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Kl(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,i)}return t}))}var Ql=Object.prototype;function Jl(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ql)}function es(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function ts(e){return Zi(e)&&"[object Arguments]"==Ki(e)}var ns=Object.prototype,rs=ns.hasOwnProperty,os=ns.propertyIsEnumerable,is=ts(function(){return arguments}())?ts:function(e){return Zi(e)&&rs.call(e,"callee")&&!os.call(e,"callee")};function as(){return!1}var ls="object"==typeof exports&&exports&&!exports.nodeType&&exports,ss=ls&&e&&!e.nodeType&&e,cs=ss&&ss.exports===ls?Hi.Buffer:void 0,us=(cs?cs.isBuffer:void 0)||as,ds={};function hs(e){return function(t){return e(t)}}ds["[object Float32Array]"]=ds["[object Float64Array]"]=ds["[object Int8Array]"]=ds["[object Int16Array]"]=ds["[object Int32Array]"]=ds["[object Uint8Array]"]=ds["[object Uint8ClampedArray]"]=ds["[object Uint16Array]"]=ds["[object Uint32Array]"]=!0,ds["[object Arguments]"]=ds["[object Array]"]=ds["[object ArrayBuffer]"]=ds["[object Boolean]"]=ds["[object DataView]"]=ds["[object Date]"]=ds["[object Error]"]=ds["[object Function]"]=ds["[object Map]"]=ds["[object Number]"]=ds["[object Object]"]=ds["[object RegExp]"]=ds["[object Set]"]=ds["[object String]"]=ds["[object WeakMap]"]=!1;var fs="object"==typeof exports&&exports&&!exports.nodeType&&exports,ps=fs&&e&&!e.nodeType&&e,vs=ps&&ps.exports===fs&&zi.process,gs=function(){try{return ps&&ps.require&&ps.require("util").types||vs&&vs.binding&&vs.binding("util")}catch(e){}}(),ms=gs&&gs.isTypedArray,ys=ms?hs(ms):function(e){return Zi(e)&&Xl(e.length)&&!!ds[Ki(e)]},bs=Object.prototype.hasOwnProperty;function Cs(e,t){var n=ta(e),r=!n&&is(e),o=!n&&!r&&us(e),i=!n&&!r&&!o&&ys(e),a=n||r||o||i,l=a?es(e.length,String):[],s=l.length;for(var c in e)!t&&!bs.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Tl(c,s))||l.push(c);return l}function ws(e,t){return function(n){return e(t(n))}}var xs=ws(Object.keys,Object),Es=Object.prototype.hasOwnProperty;function Ss(e){if(!Jl(e))return xs(e);var t=[];for(var n in Object(e))Es.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ls(e){return ql(e)?Cs(e):Ss(e)}var Os=Object.prototype.hasOwnProperty,Is=Zl((function(e,t){if(Jl(t)||ql(t))Ul(t,Ls(t),e);else for(var n in t)Os.call(t,n)&&Wl(e,n,t[n])})),_s=Is,Ts=Object.prototype.hasOwnProperty;function As(e){return ql(e)?Cs(e,!0):function(e){if(!da(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Jl(e),n=[];for(var r in e)("constructor"!=r||!t&&Ts.call(e,r))&&n.push(r);return n}(e)}var Ms=Zl((function(e,t){Ul(t,As(t),e)})),Ns=Ms,Rs=Zl((function(e,t,n,r){Ul(t,As(t),e,r)})),Ds=Rs,ks=Zl((function(e,t,n,r){Ul(t,Ls(t),e,r)})),Bs=ks,Ps=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fs=/^\w*$/;function js(e,t){if(ta(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qi(e))||Fs.test(e)||!Ps.test(e)||null!=t&&e in Object(t)}var zs=Ra(Object,"create"),Gs=Object.prototype.hasOwnProperty,Hs=Object.prototype.hasOwnProperty;function Ws(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Us(e,t){for(var n=e.length;n--;)if(Gl(e[n][0],t))return n;return-1}Ws.prototype.clear=function(){this.__data__=zs?zs(null):{},this.size=0},Ws.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ws.prototype.get=function(e){var t=this.__data__;if(zs){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Gs.call(t,e)?t[e]:void 0},Ws.prototype.has=function(e){var t=this.__data__;return zs?void 0!==t[e]:Hs.call(t,e)},Ws.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zs&&void 0===t?"__lodash_hash_undefined__":t,this};var Vs=Array.prototype.splice;function Ys(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ys.prototype.clear=function(){this.__data__=[],this.size=0},Ys.prototype.delete=function(e){var t=this.__data__,n=Us(t,e);return!(n<0||(n==t.length-1?t.pop():Vs.call(t,n,1),--this.size,0))},Ys.prototype.get=function(e){var t=this.__data__,n=Us(t,e);return n<0?void 0:t[n][1]},Ys.prototype.has=function(e){return Us(this.__data__,e)>-1},Ys.prototype.set=function(e,t){var n=this.__data__,r=Us(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var $s=Ra(Hi,"Map");function Xs(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function qs(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ks(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ks.Cache||qs),n}qs.prototype.clear=function(){this.size=0,this.__data__={hash:new Ws,map:new($s||Ys),string:new Ws}},qs.prototype.delete=function(e){var t=Xs(this,e).delete(e);return this.size-=t?1:0,t},qs.prototype.get=function(e){return Xs(this,e).get(e)},qs.prototype.has=function(e){return Xs(this,e).has(e)},qs.prototype.set=function(e,t){var n=Xs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ks.Cache=qs;var Zs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qs=/\\(\\)?/g,Js=function(e){var t=Ks((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Zs,(function(e,n,r,o){t.push(r?o.replace(Qs,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),ec=Js;function tc(e){return null==e?"":oa(e)}function nc(e,t){return ta(e)?e:js(e,t)?[e]:ec(tc(e))}function rc(e){if("string"==typeof e||Qi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function oc(e,t){for(var n=0,r=(t=nc(t,e)).length;null!=e&&n<r;)e=e[rc(t[n++])];return n&&n==r?e:void 0}function ic(e,t,n){var r=null==e?void 0:oc(e,t);return void 0===r?n:r}function ac(e,t){for(var n=-1,r=t.length,o=Array(r),i=null==e;++n<r;)o[n]=i?void 0:ic(e,t[n]);return o}function lc(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var sc=Wi?Wi.isConcatSpreadable:void 0;function cc(e){return ta(e)||is(e)||!!(sc&&e&&e[sc])}function uc(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=cc),o||(o=[]);++i<a;){var l=e[i];t>0&&n(l)?t>1?uc(l,t-1,n,r,o):lc(o,l):r||(o[o.length]=l)}return o}function dc(e){return null!=e&&e.length?uc(e,1):[]}function hc(e){return yl(Yl(e,void 0,dc),e+"")}var fc=hc(ac),pc=ws(Object.getPrototypeOf,Object),vc=Function.prototype,gc=Object.prototype,mc=vc.toString,yc=gc.hasOwnProperty,bc=mc.call(Object);function Cc(e){if(!Zi(e)||"[object Object]"!=Ki(e))return!1;var t=pc(e);if(null===t)return!0;var n=yc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&mc.call(n)==bc}function wc(e){if(!Zi(e))return!1;var t=Ki(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Cc(e)}var xc=$l((function(e,t){try{return Ha(e,void 0,t)}catch(e){return wc(e)?e:new Error(e)}})),Ec=xc;function Sc(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=ya(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var Lc=$l((function(e,t,n){var r=1;if(n.length){var o=Rl(n,Il(Lc));r|=32}return Fl(e,r,t,n,o)}));Lc.placeholder={};var Oc=Lc,Ic=hc((function(e,t){return bl(t,(function(t){t=rc(t),zl(e,t,Oc(e[t],e))})),e})),_c=Ic,Tc=$l((function(e,t,n){var r=3;if(n.length){var o=Rl(n,Il(Tc));r|=32}return Fl(t,r,e,n,o)}));Tc.placeholder={};var Ac=Tc;function Mc(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}function Nc(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Mc(e,t,n)}var Rc=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Dc(e){return Rc.test(e)}var kc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Bc="\\ud83c[\\udffb-\\udfff]",Pc="[^\\ud800-\\udfff]",Fc="(?:\\ud83c[\\udde6-\\uddff]){2}",jc="[\\ud800-\\udbff][\\udc00-\\udfff]",zc="(?:"+kc+"|"+Bc+")?",Gc="[\\ufe0e\\ufe0f]?",Hc=Gc+zc+"(?:\\u200d(?:"+[Pc,Fc,jc].join("|")+")"+Gc+zc+")*",Wc="(?:"+[Pc+kc+"?",kc,Fc,jc,"[\\ud800-\\udfff]"].join("|")+")",Uc=RegExp(Bc+"(?="+Bc+")|"+Wc+Hc,"g");function Vc(e){return Dc(e)?function(e){return e.match(Uc)||[]}(e):function(e){return e.split("")}(e)}function Yc(e){return function(t){var n=Dc(t=tc(t))?Vc(t):void 0,r=n?n[0]:t.charAt(0),o=n?Nc(n,1).join(""):t.slice(1);return r[e]()+o}}var $c=Yc("toUpperCase");function Xc(e){return $c(tc(e).toLowerCase())}function qc(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Kc(e){return function(t){return null==e?void 0:e[t]}}var Zc=Kc({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Qc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jc=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function eu(e){return(e=tc(e))&&e.replace(Qc,Zc).replace(Jc,"")}var tu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ru="a-z\\xdf-\\xf6\\xf8-\\xff",ou="A-Z\\xc0-\\xd6\\xd8-\\xde",iu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",au="["+iu+"]",lu="\\d+",su="["+ru+"]",cu="[^\\ud800-\\udfff"+iu+lu+"\\u2700-\\u27bf"+ru+ou+"]",uu="(?:\\ud83c[\\udde6-\\uddff]){2}",du="[\\ud800-\\udbff][\\udc00-\\udfff]",hu="["+ou+"]",fu="(?:"+su+"|"+cu+")",pu="(?:"+hu+"|"+cu+")",vu="(?:['’](?:d|ll|m|re|s|t|ve))?",gu="(?:['’](?:D|LL|M|RE|S|T|VE))?",mu="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",yu="[\\ufe0e\\ufe0f]?",bu=yu+mu+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",uu,du].join("|")+")"+yu+mu+")*",Cu="(?:"+["[\\u2700-\\u27bf]",uu,du].join("|")+")"+bu,wu=RegExp([hu+"?"+su+"+"+vu+"(?="+[au,hu,"$"].join("|")+")",pu+"+"+gu+"(?="+[au,hu+fu,"$"].join("|")+")",hu+"?"+fu+"+"+vu,hu+"+"+gu,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu,Cu].join("|"),"g");function xu(e,t,n){return e=tc(e),void 0===(t=n?void 0:t)?function(e){return nu.test(e)}(e)?function(e){return e.match(wu)||[]}(e):function(e){return e.match(tu)||[]}(e):e.match(t)||[]}var Eu=RegExp("['’]","g");function Su(e){return function(t){return qc(xu(eu(t).replace(Eu,"")),e,"")}}var Lu=Su((function(e,t,n){return t=t.toLowerCase(),e+(n?Xc(t):t)})),Ou=Hi.isFinite,Iu=Math.min;function _u(e){var t=Math[e];return function(e,n){if(e=ga(e),(n=null==n?0:Iu(ya(n),292))&&Ou(e)){var r=(tc(e)+"e").split("e");return+((r=(tc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Tu=_u("ceil");function Au(e){var t=al(e);return t.__chain__=!0,t}var Mu=Math.ceil,Nu=Math.max;function Ru(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Du(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ga(n))==n?n:0),void 0!==t&&(t=(t=ga(t))==t?t:0),Ru(ga(e),t,n)}function ku(e){var t=this.__data__=new Ys(e);this.size=t.size}function Bu(e,t){return e&&Ul(t,Ls(t),e)}ku.prototype.clear=function(){this.__data__=new Ys,this.size=0},ku.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ku.prototype.get=function(e){return this.__data__.get(e)},ku.prototype.has=function(e){return this.__data__.has(e)},ku.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ys){var r=n.__data__;if(!$s||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qs(r)}return n.set(e,t),this.size=n.size,this};var Pu="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fu=Pu&&e&&!e.nodeType&&e,ju=Fu&&Fu.exports===Pu?Hi.Buffer:void 0,zu=ju?ju.allocUnsafe:void 0;function Gu(e,t){if(t)return e.slice();var n=e.length,r=zu?zu(n):new e.constructor(n);return e.copy(r),r}function Hu(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Wu(){return[]}var Uu=Object.prototype.propertyIsEnumerable,Vu=Object.getOwnPropertySymbols,Yu=Vu?function(e){return null==e?[]:(e=Object(e),Hu(Vu(e),(function(t){return Uu.call(e,t)})))}:Wu,$u=Yu,Xu=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)lc(t,$u(e)),e=pc(e);return t}:Wu,qu=Xu;function Ku(e,t,n){var r=t(e);return ta(e)?r:lc(r,n(e))}function Zu(e){return Ku(e,Ls,$u)}function Qu(e){return Ku(e,As,qu)}var Ju=Ra(Hi,"DataView"),ed=Ra(Hi,"Promise"),td=Ra(Hi,"Set"),nd="[object Map]",rd="[object Promise]",od="[object Set]",id="[object WeakMap]",ad="[object DataView]",ld=La(Ju),sd=La($s),cd=La(ed),ud=La(td),dd=La(Da),hd=Ki;(Ju&&hd(new Ju(new ArrayBuffer(1)))!=ad||$s&&hd(new $s)!=nd||ed&&hd(ed.resolve())!=rd||td&&hd(new td)!=od||Da&&hd(new Da)!=id)&&(hd=function(e){var t=Ki(e),n="[object Object]"==t?e.constructor:void 0,r=n?La(n):"";if(r)switch(r){case ld:return ad;case sd:return nd;case cd:return rd;case ud:return od;case dd:return id}return t});var fd=hd,pd=Object.prototype.hasOwnProperty,vd=Hi.Uint8Array;function gd(e){var t=new e.constructor(e.byteLength);return new vd(t).set(new vd(e)),t}var md=/\w*$/,yd=Wi?Wi.prototype:void 0,bd=yd?yd.valueOf:void 0;function Cd(e,t){var n=t?gd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function wd(e){return"function"!=typeof e.constructor||Jl(e)?{}:za(pc(e))}var xd=gs&&gs.isMap,Ed=xd?hs(xd):function(e){return Zi(e)&&"[object Map]"==fd(e)},Sd=gs&&gs.isSet,Ld=Sd?hs(Sd):function(e){return Zi(e)&&"[object Set]"==fd(e)},Od="[object Arguments]",Id="[object Function]",_d="[object Object]",Td={};function Ad(e,t,n,r,o,i){var a,l=1&t,s=2&t,c=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!da(e))return e;var u=ta(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&pd.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return rl(e,a)}else{var d=fd(e),h=d==Id||"[object GeneratorFunction]"==d;if(us(e))return Gu(e,l);if(d==_d||d==Od||h&&!o){if(a=s||h?{}:wd(e),!l)return s?function(e,t){return Ul(e,qu(e),t)}(e,function(e,t){return e&&Ul(t,As(t),e)}(a,e)):function(e,t){return Ul(e,$u(e),t)}(e,Bu(a,e))}else{if(!Td[d])return o?e:{};a=function(e,t,n){var r,o,i,a=e.constructor;switch(t){case"[object ArrayBuffer]":return gd(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?gd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Cd(e,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(i=new(o=e).constructor(o.source,md.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return r=e,bd?Object(bd.call(r)):{}}}(e,d,l)}}i||(i=new ku);var f=i.get(e);if(f)return f;i.set(e,a),Ld(e)?e.forEach((function(r){a.add(Ad(r,t,n,r,e,i))})):Ed(e)&&e.forEach((function(r,o){a.set(o,Ad(r,t,n,o,e,i))}));var p=u?void 0:(c?s?Qu:Zu:s?As:Ls)(e);return bl(p||e,(function(r,o){p&&(r=e[o=r]),Wl(a,o,Ad(r,t,n,o,e,i))})),a}function Md(e){return Ad(e,4)}function Nd(e){return Ad(e,5)}function Rd(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}function Dd(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return lc(ta(n)?rl(n):[n],uc(t,1))}function kd(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qs;++t<n;)this.add(e[t])}function Bd(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Pd(e,t){return e.has(t)}function Fd(e,t,n,r,o,i){var a=1&n,l=e.length,s=t.length;if(l!=s&&!(a&&s>l))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=2&n?new kd:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,i):r(p,v,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!Bd(t,(function(e,t){if(!Pd(f,t)&&(p===e||o(p,e,n,r,i)))return f.push(t)}))){h=!1;break}}else if(p!==v&&!o(p,v,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function jd(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function zd(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}Td[Od]=Td["[object Array]"]=Td["[object ArrayBuffer]"]=Td["[object DataView]"]=Td["[object Boolean]"]=Td["[object Date]"]=Td["[object Float32Array]"]=Td["[object Float64Array]"]=Td["[object Int8Array]"]=Td["[object Int16Array]"]=Td["[object Int32Array]"]=Td["[object Map]"]=Td["[object Number]"]=Td[_d]=Td["[object RegExp]"]=Td["[object Set]"]=Td["[object String]"]=Td["[object Symbol]"]=Td["[object Uint8Array]"]=Td["[object Uint8ClampedArray]"]=Td["[object Uint16Array]"]=Td["[object Uint32Array]"]=!0,Td["[object Error]"]=Td[Id]=Td["[object WeakMap]"]=!1,kd.prototype.add=kd.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},kd.prototype.has=function(e){return this.__data__.has(e)};var Gd=Wi?Wi.prototype:void 0,Hd=Gd?Gd.valueOf:void 0,Wd=Object.prototype.hasOwnProperty,Ud="[object Arguments]",Vd="[object Array]",Yd="[object Object]",$d=Object.prototype.hasOwnProperty;function Xd(e,t,n,r,o){return e===t||(null==e||null==t||!Zi(e)&&!Zi(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=ta(e),l=ta(t),s=a?Vd:fd(e),c=l?Vd:fd(t),u=(s=s==Ud?Yd:s)==Yd,d=(c=c==Ud?Yd:c)==Yd,h=s==c;if(h&&us(e)){if(!us(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new ku),a||ys(e)?Fd(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new vd(e),new vd(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Gl(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=jd;case"[object Set]":var s=1&r;if(l||(l=zd),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=Fd(l(e),l(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(Hd)return Hd.call(e)==Hd.call(t)}return!1}(e,t,s,n,r,o,i);if(!(1&n)){var f=u&&$d.call(e,"__wrapped__"),p=d&&$d.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,g=p?t.value():t;return i||(i=new ku),o(v,g,n,r,i)}}return!!h&&(i||(i=new ku),function(e,t,n,r,o,i){var a=1&n,l=Zu(e),s=l.length;if(s!=Zu(t).length&&!a)return!1;for(var c=s;c--;){var u=l[c];if(!(a?u in t:Wd.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<s;){var v=e[u=l[c]],g=t[u];if(r)var m=a?r(g,v,u,t,e,i):r(v,g,u,e,t,i);if(!(void 0===m?v===g||o(v,g,n,r,i):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,i))}(e,t,n,r,Xd,o))}function qd(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var s=(l=n[o])[0],c=e[s],u=l[1];if(a&&l[2]){if(void 0===c&&!(s in e))return!1}else{var d=new ku;if(r)var h=r(c,u,s,e,t,d);if(!(void 0===h?Xd(u,c,3,r,d):h))return!1}}return!0}function Kd(e){return e==e&&!da(e)}function Zd(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Kd(o)]}return t}function Qd(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function Jd(e){var t=Zd(e);return 1==t.length&&t[0][2]?Qd(t[0][0],t[0][1]):function(n){return n===e||qd(n,e,t)}}function eh(e,t){return null!=e&&t in Object(e)}function th(e,t,n){for(var r=-1,o=(t=nc(t,e)).length,i=!1;++r<o;){var a=rc(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Xl(o)&&Tl(a,o)&&(ta(e)||is(e))}function nh(e,t){return null!=e&&th(e,t,eh)}function rh(e,t){return js(e)&&Kd(t)?Qd(rc(e),t):function(n){var r=ic(n,e);return void 0===r&&r===t?nh(n,e):Xd(t,r,3)}}function oh(e){return function(t){return null==t?void 0:t[e]}}function ih(e){return js(e)?oh(rc(e)):function(e){return function(t){return oc(t,e)}}(e)}function ah(e){return"function"==typeof e?e:null==e?ba:"object"==typeof e?ta(e)?rh(e[0],e[1]):Jd(e):ih(e)}function lh(e){var t=null==e?0:e.length,n=ah;return e=t?ea(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],$l((function(n){for(var r=-1;++r<t;){var o=e[r];if(Ha(o[0],this,n))return Ha(o[1],this,n)}}))}function sh(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var o=n[r],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function ch(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function uh(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),l=a.length;l--;){var s=a[e?l:++o];if(!1===n(i[s],s,i))break}return t}}var dh=uh();function hh(e,t){return e&&dh(e,t,Ls)}function fh(e,t){return function(n,r){if(null==n)return n;if(!ql(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}var ph=fh(hh);function vh(e,t,n,r){return ph(e,(function(e,o,i){t(r,e,n(e),i)})),r}function gh(e,t){return function(n,r){var o=ta(n)?ch:vh,i=t?t():{};return o(n,e,ah(r),i)}}var mh=Object.prototype.hasOwnProperty,yh=gh((function(e,t,n){mh.call(e,n)?++e[n]:zl(e,n,1)}));function bh(e,t,n){var r=Fl(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=bh.placeholder,r}function Ch(e,t,n){var r=Fl(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=Ch.placeholder,r}bh.placeholder={},Ch.placeholder={};var wh=function(){return Hi.Date.now()},xh=Math.max,Eh=Math.min;function Sh(e,t,n){var r,o,i,a,l,s,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){return c=e,l=setTimeout(g,t),u?f(e):a}function v(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=i}function g(){var e=wh();if(v(e))return m(e);l=setTimeout(g,function(e){var n=t-(e-s);return d?Eh(n,i-(e-c)):n}(e))}function m(e){return l=void 0,h&&r?f(e):(r=o=void 0,a)}function y(){var e=wh(),n=v(e);if(r=arguments,o=this,s=e,n){if(void 0===l)return p(s);if(d)return clearTimeout(l),l=setTimeout(g,t),f(s)}return void 0===l&&(l=setTimeout(g,t)),a}return t=ga(t)||0,da(n)&&(u=!!n.leading,i=(d="maxWait"in n)?xh(ga(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=s=o=l=void 0},y.flush=function(){return void 0===l?a:m(wh())},y}var Lh=Object.prototype,Oh=Lh.hasOwnProperty,Ih=$l((function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&Kl(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=As(i),l=-1,s=a.length;++l<s;){var c=a[l],u=e[c];(void 0===u||Gl(u,Lh[c])&&!Oh.call(e,c))&&(e[c]=i[c])}return e})),_h=Ih;function Th(e,t,n){(void 0!==n&&!Gl(e[t],n)||void 0===n&&!(t in e))&&zl(e,t,n)}function Ah(e){return Zi(e)&&ql(e)}function Mh(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Nh(e){return Ul(e,As(e))}function Rh(e,t,n,r,o){e!==t&&dh(t,(function(i,a){if(o||(o=new ku),da(i))!function(e,t,n,r,o,i,a){var l=Mh(e,n),s=Mh(t,n),c=a.get(s);if(c)Th(e,n,c);else{var u=i?i(l,s,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=ta(s),f=!h&&us(s),p=!h&&!f&&ys(s);u=s,h||f||p?ta(l)?u=l:Ah(l)?u=rl(l):f?(d=!1,u=Gu(s,!0)):p?(d=!1,u=Cd(s,!0)):u=[]:Cc(s)||is(s)?(u=l,is(l)?u=Nh(l):da(l)&&!Ca(l)||(u=wd(s))):d=!1}d&&(a.set(s,u),o(u,s,r,i,a),a.delete(s)),Th(e,n,u)}}(e,t,a,n,Rh,r,o);else{var l=r?r(Mh(e,a),i,a+"",e,t,o):void 0;void 0===l&&(l=i),Th(e,a,l)}}),As)}function Dh(e,t,n,r,o,i){return da(e)&&da(t)&&(i.set(t,e),Rh(e,t,void 0,Dh,i),i.delete(t)),e}var kh=Zl((function(e,t,n,r){Rh(e,t,n,r)})),Bh=kh,Ph=$l((function(e){return e.push(void 0,Dh),Ha(Bh,void 0,e)}));function Fh(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}var jh=$l((function(e,t){return Fh(e,1,t)})),zh=jh,Gh=$l((function(e,t,n){return Fh(e,ga(t)||0,n)})),Hh=Gh;function Wh(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Uh(e,t,n,r){var o=-1,i=El,a=!0,l=e.length,s=[],c=t.length;if(!l)return s;n&&(t=ea(t,hs(n))),r?(i=Wh,a=!1):t.length>=200&&(i=Pd,a=!1,t=new kd(t));e:for(;++o<l;){var u=e[o],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;s.push(u)}else i(t,d,r)||s.push(u)}return s}var Vh=$l((function(e,t){return Ah(e)?Uh(e,uc(t,1,Ah,!0)):[]})),Yh=Vh;function $h(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Xh=$l((function(e,t){var n=$h(t);return Ah(n)&&(n=void 0),Ah(e)?Uh(e,uc(t,1,Ah,!0),ah(n)):[]})),qh=Xh,Kh=$l((function(e,t){var n=$h(t);return Ah(n)&&(n=void 0),Ah(e)?Uh(e,uc(t,1,Ah,!0),void 0,n):[]})),Zh=Kh,Qh=ia((function(e,t){return e/t}),1);function Jh(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Mc(e,r?0:i,r?i+1:o):Mc(e,r?i+1:0,r?o:i)}function ef(e){return"function"==typeof e?e:ba}function tf(e,t){return(ta(e)?bl:ph)(e,ef(t))}function nf(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var rf=uh(!0);function of(e,t){return e&&rf(e,t,Ls)}var af=fh(of,!0);function lf(e,t){return(ta(e)?nf:af)(e,ef(t))}function sf(e,t,n){e=tc(e),t=oa(t);var r=e.length,o=n=void 0===n?r:Ru(ya(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t}function cf(e){return function(t){var n=fd(t);return"[object Map]"==n?jd(t):"[object Set]"==n?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return ea(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var uf=cf(Ls),df=cf(As),hf=Kc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ff=/[&<>"']/g,pf=RegExp(ff.source);function vf(e){return(e=tc(e))&&pf.test(e)?e.replace(ff,hf):e}var gf=/[\\^$.*+?()[\]{}|]/g,mf=RegExp(gf.source);function yf(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function bf(e,t){var n=!0;return ph(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function Cf(e,t,n){var r=ta(e)?yf:bf;return n&&Kl(e,t,n)&&(t=void 0),r(e,ah(t))}function wf(e){return e?Ru(ya(e),0,4294967295):0}function xf(e,t){var n=[];return ph(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function Ef(e,t){return(ta(e)?Hu:xf)(e,ah(t))}function Sf(e){return function(t,n,r){var o=Object(t);if(!ql(t)){var i=ah(n);t=Ls(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}var Lf=Math.max;function Of(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ya(n);return o<0&&(o=Lf(r+o,0)),Cl(e,ah(t),o)}var If=Sf(Of);function _f(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}var Tf=Math.max,Af=Math.min;function Mf(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=ya(n),o=n<0?Tf(r+o,0):Af(o,r-1)),Cl(e,ah(t),o,!0)}var Nf=Sf(Mf);function Rf(e){return e&&e.length?e[0]:void 0}function Df(e,t){var n=-1,r=ql(e)?Array(e.length):[];return ph(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function kf(e,t){return(ta(e)?ea:Df)(e,ah(t))}var Bf=_u("floor");function Pf(e){return hc((function(t){var n=t.length,r=n,o=nl.prototype.thru;for(e&&t.reverse();r--;){var i=t[r];if("function"!=typeof i)throw new TypeError("Expected a function");if(o&&!a&&"wrapper"==tl(i))var a=new nl([],!0)}for(r=a?r:n;++r<n;){var l=tl(i=t[r]),s="wrapper"==l?Qa(i):void 0;a=s&&ll(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[tl(s[0])].apply(a,s[3]):1==i.length&&ll(i)?a[l]():a.thru(i)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&ta(r))return a.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}var Ff=Pf(),jf=Pf(!0);function zf(e,t){return null==e?e:dh(e,ef(t),As)}function Gf(e,t){return Hu(t,(function(t){return Ca(e[t])}))}var Hf=Object.prototype.hasOwnProperty,Wf=gh((function(e,t,n){Hf.call(e,n)?e[n].push(t):zl(e,n,[t])}));function Uf(e,t){return e>t}function Vf(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}var Yf=Vf(Uf),$f=Vf((function(e,t){return e>=t})),Xf=Object.prototype.hasOwnProperty;function qf(e,t){return null!=e&&Xf.call(e,t)}function Kf(e,t){return null!=e&&th(e,t,qf)}var Zf=Math.max,Qf=Math.min;function Jf(e,t,n){return t=ma(t),void 0===n?(n=t,t=0):n=ma(n),function(e,t,n){return e>=Qf(t,n)&&e<Zf(t,n)}(e=ga(e),t,n)}function ep(e){return"string"==typeof e||!ta(e)&&Zi(e)&&"[object String]"==Ki(e)}function tp(e,t){return ea(t,(function(t){return e[t]}))}function np(e){return null==e?[]:tp(e,Ls(e))}var rp=Math.max;function op(e,t,n,r){e=ql(e)?e:np(e),n=n&&!r?ya(n):0;var o=e.length;return n<0&&(n=rp(o+n,0)),ep(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&xl(e,t,n)>-1}var ip=Math.max;function ap(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ya(n);return o<0&&(o=ip(r+o,0)),xl(e,t,o)}var lp=Math.min;function sp(e,t,n){for(var r=n?Wh:El,o=e[0].length,i=e.length,a=i,l=Array(i),s=1/0,c=[];a--;){var u=e[a];a&&t&&(u=ea(u,hs(t))),s=lp(u.length,s),l[a]=!n&&(t||o>=120&&u.length>=120)?new kd(a&&u):void 0}u=e[0];var d=-1,h=l[0];e:for(;++d<o&&c.length<s;){var f=u[d],p=t?t(f):f;if(f=n||0!==f?f:0,!(h?Pd(h,p):r(c,p,n))){for(a=i;--a;){var v=l[a];if(!(v?Pd(v,p):r(e[a],p,n)))continue e}h&&h.push(p),c.push(f)}}return c}function cp(e){return Ah(e)?e:[]}var up=$l((function(e){var t=ea(e,cp);return t.length&&t[0]===e[0]?sp(t):[]})),dp=$l((function(e){var t=$h(e),n=ea(e,cp);return t===$h(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?sp(n,ah(t)):[]})),hp=$l((function(e){var t=$h(e),n=ea(e,cp);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?sp(n,void 0,t):[]}));function fp(e,t){return function(n,r){return function(e,t,n,r){return hh(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}var pp=Object.prototype.toString,vp=fp((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pp.call(t)),e[t]=n}),pl(ba)),gp=Object.prototype,mp=gp.hasOwnProperty,yp=gp.toString,bp=fp((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=yp.call(t)),mp.call(e,t)?e[t].push(n):e[t]=[n]}),ah);function Cp(e,t){return t.length<2?e:oc(e,Mc(t,0,-1))}function wp(e,t,n){var r=null==(e=Cp(e,t=nc(t,e)))?e:e[rc($h(t))];return null==r?void 0:Ha(r,e,n)}var xp=$l(wp),Ep=$l((function(e,t,n){var r=-1,o="function"==typeof t,i=ql(e)?Array(e.length):[];return ph(e,(function(e){i[++r]=o?Ha(t,e,n):wp(e,t,n)})),i})),Sp=Ep,Lp=gs&&gs.isArrayBuffer,Op=Lp?hs(Lp):function(e){return Zi(e)&&"[object ArrayBuffer]"==Ki(e)};function Ip(e){return!0===e||!1===e||Zi(e)&&"[object Boolean]"==Ki(e)}var _p=gs&&gs.isDate,Tp=_p?hs(_p):function(e){return Zi(e)&&"[object Date]"==Ki(e)},Ap=Object.prototype.hasOwnProperty;function Mp(e){if(null==e)return!0;if(ql(e)&&(ta(e)||"string"==typeof e||"function"==typeof e.splice||us(e)||ys(e)||is(e)))return!e.length;var t=fd(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Jl(e))return!Ss(e).length;for(var n in e)if(Ap.call(e,n))return!1;return!0}function Np(e,t){return Xd(e,t)}var Rp=Hi.isFinite;function Dp(e){return"number"==typeof e&&e==ya(e)}function kp(e){return"number"==typeof e||Zi(e)&&"[object Number]"==Ki(e)}function Bp(e){return kp(e)&&e!=+e}var Pp=xa?Ca:as;function Fp(e){return null==e}var jp=gs&&gs.isRegExp,zp=jp?hs(jp):function(e){return Zi(e)&&"[object RegExp]"==Ki(e)};function Gp(e){return void 0===e}var Hp=Array.prototype.join,Wp=Su((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Up=gh((function(e,t,n){zl(e,n,t)})),Vp=Math.max,Yp=Math.min,$p=Su((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Xp=Yc("toLowerCase");function qp(e,t){return e<t}var Kp=Vf(qp),Zp=Vf((function(e,t){return e<=t}));function Qp(e,t){var n={};return t=ah(t),hh(e,(function(e,r,o){zl(n,t(e,r,o),e)})),n}function Jp(e){return Jd(Ad(e,1))}function ev(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===l?a==a&&!Qi(a):n(a,l)))var l=a,s=i}return s}function tv(e){return e&&e.length?ev(e,ba,Uf):void 0}function nv(e,t){return e&&e.length?ev(e,ah(t),Uf):void 0}function rv(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function ov(e,t){var n=null==e?0:e.length;return n?rv(e,t)/n:NaN}var iv=Zl((function(e,t,n){Rh(e,t,n)})),av=iv,lv=$l((function(e,t){return function(n){return wp(n,e,t)}})),sv=lv,cv=$l((function(e,t){return function(n){return wp(e,n,t)}})),uv=cv;function dv(e){return e&&e.length?ev(e,ba,qp):void 0}function hv(e,t,n){var r=Ls(t),o=Gf(t,r),i=!(da(n)&&"chain"in n&&!n.chain),a=Ca(e);return bl(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=rl(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,lc([this.value()],arguments))})})),e}var fv=ia((function(e,t){return e*t}),1);function pv(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var vv=Wi?Wi.iterator:void 0;function gv(e){if(!e)return[];if(ql(e))return ep(e)?Vc(e):rl(e);if(vv&&e[vv])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[vv]());var t=fd(e);return("[object Map]"==t?jd:"[object Set]"==t?zd:np)(e)}function mv(e,t){var n=e.length;if(n)return Tl(t+=t<0?n:0,n)?e[t]:void 0}function yv(e,t){return null==(e=Cp(e,t=nc(t,e)))||delete e[rc($h(t))]}function bv(e){return Cc(e)?void 0:e}var Cv=hc((function(e,t){var n={};if(null==e)return n;var r=!1;t=ea(t,(function(t){return t=nc(t,e),r||(r=t.length>1),t})),Ul(e,Qu(e),n),r&&(n=Ad(n,7,bv));for(var o=t.length;o--;)yv(n,t[o]);return n})),wv=Cv;function xv(e,t,n,r){if(!da(e))return e;for(var o=-1,i=(t=nc(t,e)).length,a=i-1,l=e;null!=l&&++o<i;){var s=rc(t[o]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=a){var u=l[s];void 0===(c=r?r(u,s,l):void 0)&&(c=da(u)?u:Tl(t[o+1])?[]:{})}Wl(l,s,c),l=l[s]}return e}function Ev(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],l=oc(e,a);n(l,a)&&xv(i,nc(a,e),l)}return i}function Sv(e,t){if(null==e)return{};var n=ea(Qu(e),(function(e){return[e]}));return t=ah(t),Ev(e,n,(function(e,n){return t(e,n[0])}))}function Lv(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=Qi(e),a=void 0!==t,l=null===t,s=t==t,c=Qi(t);if(!l&&!c&&!i&&e>t||i&&a&&s&&!l&&!c||r&&a&&s||!n&&s||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||l&&n&&o||!a&&o||!s)return-1}return 0}function Ov(e,t,n){t=t.length?ea(t,(function(e){return ta(e)?function(t){return oc(t,1===e.length?e[0]:e)}:e})):[ba];var r=-1;return t=ea(t,hs(ah)),function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,l=n.length;++r<a;){var s=Lv(o[r],i[r]);if(s)return r>=l?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(Df(e,(function(e,n,o){return{criteria:ea(t,(function(t){return t(e)})),index:++r,value:e}})))}function Iv(e,t,n,r){return null==e?[]:(ta(t)||(t=null==t?[]:[t]),ta(n=r?void 0:n)||(n=null==n?[]:[n]),Ov(e,t,n))}function _v(e){return hc((function(t){return t=ea(t,hs(ah)),$l((function(n){var r=this;return e(t,(function(e){return Ha(e,r,n)}))}))}))}var Tv=_v(ea),Av=$l,Mv=Math.min,Nv=Av((function(e,t){var n=(t=1==t.length&&ta(t[0])?ea(t[0],hs(ah)):ea(uc(t,1),hs(ah))).length;return $l((function(r){for(var o=-1,i=Mv(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Ha(e,this,r)}))})),Rv=Nv,Dv=_v(yf),kv=_v(Bd),Bv=Math.floor;function Pv(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Bv(t/2))&&(e+=e)}while(t);return n}var Fv=oh("length"),jv="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zv="\\ud83c[\\udffb-\\udfff]",Gv="[^\\ud800-\\udfff]",Hv="(?:\\ud83c[\\udde6-\\uddff]){2}",Wv="[\\ud800-\\udbff][\\udc00-\\udfff]",Uv="(?:"+jv+"|"+zv+")?",Vv="[\\ufe0e\\ufe0f]?",Yv=Vv+Uv+"(?:\\u200d(?:"+[Gv,Hv,Wv].join("|")+")"+Vv+Uv+")*",$v="(?:"+[Gv+jv+"?",jv,Hv,Wv,"[\\ud800-\\udfff]"].join("|")+")",Xv=RegExp(zv+"(?="+zv+")|"+$v+Yv,"g");function qv(e){return Dc(e)?function(e){for(var t=Xv.lastIndex=0;Xv.test(e);)++t;return t}(e):Fv(e)}var Kv=Math.ceil;function Zv(e,t){var n=(t=void 0===t?" ":oa(t)).length;if(n<2)return n?Pv(t,e):t;var r=Pv(t,Kv(e/qv(t)));return Dc(t)?Nc(Vc(r),0,e).join(""):r.slice(0,e)}var Qv=Math.ceil,Jv=Math.floor,eg=/^\s+/,tg=Hi.parseInt,ng=$l((function(e,t){return Fl(e,32,void 0,t,Rl(t,Il(ng)))}));ng.placeholder={};var rg=ng,og=$l((function(e,t){return Fl(e,64,void 0,t,Rl(t,Il(og)))}));og.placeholder={};var ig=og,ag=gh((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),lg=hc((function(e,t){return null==e?{}:function(e,t){return Ev(e,t,(function(t,n){return nh(e,n)}))}(e,t)})),sg=lg;function cg(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}var ug=Array.prototype.splice;function dg(e,t,n,r){var o=r?cg:xl,i=-1,a=t.length,l=e;for(e===t&&(t=rl(t)),n&&(l=ea(e,hs(n)));++i<a;)for(var s=0,c=t[i],u=n?n(c):c;(s=o(l,u,s,r))>-1;)l!==e&&ug.call(l,s,1),ug.call(e,s,1);return e}function hg(e,t){return e&&e.length&&t&&t.length?dg(e,t):e}var fg=$l(hg),pg=Array.prototype.splice;function vg(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;Tl(o)?pg.call(e,o,1):yv(e,o)}}return e}var gg=hc((function(e,t){var n=null==e?0:e.length,r=ac(e,t);return vg(e,ea(t,(function(e){return Tl(e,n)?+e:e})).sort(Lv)),r})),mg=gg,yg=Math.floor,bg=Math.random;function Cg(e,t){return e+yg(bg()*(t-e+1))}var wg=parseFloat,xg=Math.min,Eg=Math.random,Sg=Math.ceil,Lg=Math.max;function Og(e){return function(t,n,r){return r&&"number"!=typeof r&&Kl(t,n,r)&&(n=r=void 0),t=ma(t),void 0===n?(n=t,t=0):n=ma(n),function(e,t,n,r){for(var o=-1,i=Lg(Sg((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:ma(r),e)}}var Ig=Og(),_g=Og(!0),Tg=hc((function(e,t){return Fl(e,256,void 0,void 0,void 0,t)})),Ag=Tg;function Mg(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Ng(e,t,n){var r=ta(e)?qc:Mg,o=arguments.length<3;return r(e,ah(t),n,o,ph)}function Rg(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Dg(e,t,n){return t=(n?Kl(e,t,n):void 0===t)?1:ya(t),Pv(tc(e),t)}var kg=Array.prototype.reverse;function Bg(e){return null==e?e:kg.call(e)}var Pg=_u("round");function Fg(e){var t=e.length;return t?e[Cg(0,t-1)]:void 0}function jg(e){return Fg(np(e))}function zg(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var i=Cg(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}function Gg(e,t){return zg(rl(e),Ru(t,0,e.length))}function Hg(e,t){var n=np(e);return zg(n,Ru(t,0,n.length))}function Wg(e,t,n){return null==e?e:xv(e,t,n)}function Ug(e){return zg(rl(e))}function Vg(e){return zg(np(e))}function Yg(e){if(null==e)return 0;if(ql(e))return ep(e)?qv(e):e.length;var t=fd(e);return"[object Map]"==t||"[object Set]"==t?e.size:Ss(e).length}var $g=Su((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function Xg(e,t){var n;return ph(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}var qg=$l((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Kl(e,t[0],t[1])?t=[]:n>2&&Kl(t[0],t[1],t[2])&&(t=[t[0]]),Ov(e,uc(t,1),[])})),Kg=qg,Zg=Math.floor,Qg=Math.min;function Jg(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,l=null===t,s=Qi(t),c=void 0===t;o<i;){var u=Zg((o+i)/2),d=n(e[u]),h=void 0!==d,f=null===d,p=d==d,v=Qi(d);if(a)var g=r||p;else g=c?p&&(r||h):l?p&&h&&(r||!f):s?p&&h&&!f&&(r||!v):!f&&!v&&(r?d<=t:d<t);g?o=u+1:i=u}return Qg(i,4294967294)}function em(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!Qi(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return Jg(e,t,ba,n)}function tm(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],l=t?t(a):a;if(!n||!Gl(l,s)){var s=l;i[o++]=0===a?0:a}}return i}function nm(e,t,n){return n&&"number"!=typeof n&&Kl(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=tc(e))&&("string"==typeof t||null!=t&&!zp(t))&&!(t=oa(t))&&Dc(e)?Nc(Vc(e),0,n):e.split(t,n):[]}var rm=Math.max,om=Su((function(e,t,n){return e+(n?" ":"")+$c(t)}));function im(){return!0}var am=ia((function(e,t){return e-t}),0),lm=Object.prototype,sm=lm.hasOwnProperty;function cm(e,t,n,r){return void 0===e||Gl(e,lm[n])&&!sm.call(r,n)?t:e}var um={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function dm(e){return"\\"+um[e]}var hm=/<%=([\s\S]+?)%>/g,fm={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:hm,variable:"",imports:{_:{escape:vf}}},pm=/\b__p \+= '';/g,vm=/\b(__p \+=) '' \+/g,gm=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mm=/[()=,{}\[\]\/\s]/,ym=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bm=/($^)/,Cm=/['\n\r\u2028\u2029\\]/g,wm=Object.prototype.hasOwnProperty;function xm(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return da(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Sh(e,t,{leading:r,maxWait:t,trailing:o})}function Em(e,t){return t(e)}var Sm=4294967295,Lm=Math.min;function Om(e,t){var n=e;return n instanceof qa&&(n=n.value()),qc(t,(function(e,t){return t.func.apply(t.thisArg,lc([e],t.args))}),n)}function Im(){return Om(this.__wrapped__,this.__actions__)}function _m(e){return tc(e).toUpperCase()}function Tm(e,t){for(var n=e.length;n--&&xl(t,e[n],0)>-1;);return n}function Am(e,t){for(var n=-1,r=e.length;++n<r&&xl(t,e[n],0)>-1;);return n}function Mm(e,t,n){if((e=tc(e))&&(n||void 0===t))return ua(e);if(!e||!(t=oa(t)))return e;var r=Vc(e),o=Vc(t);return Nc(r,Am(r,o),Tm(r,o)+1).join("")}var Nm=/^\s+/,Rm=/\w*$/,Dm=Kc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),km=/&(?:amp|lt|gt|quot|#39);/g,Bm=RegExp(km.source),Pm=td&&1/zd(new td([,-0]))[1]==1/0?function(e){return new td(e)}:Ka,Fm=Pm;function jm(e,t,n){var r=-1,o=El,i=e.length,a=!0,l=[],s=l;if(n)a=!1,o=Wh;else if(i>=200){var c=t?null:Fm(e);if(c)return zd(c);a=!1,o=Pd,s=new kd}else s=t?[]:l;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var h=s.length;h--;)if(s[h]===d)continue e;t&&s.push(d),l.push(u)}else o(s,d,n)||(s!==l&&s.push(d),l.push(u))}return l}var zm=$l((function(e){return jm(uc(e,1,Ah,!0))})),Gm=$l((function(e){var t=$h(e);return Ah(t)&&(t=void 0),jm(uc(e,1,Ah,!0),ah(t))})),Hm=$l((function(e){var t=$h(e);return t="function"==typeof t?t:void 0,jm(uc(e,1,Ah,!0),void 0,t)}));function Wm(e){return e&&e.length?jm(e):[]}var Um=0;function Vm(e,t){return null==e||yv(e,t)}var Ym=Math.max;function $m(e){if(!e||!e.length)return[];var t=0;return e=Hu(e,(function(e){if(Ah(e))return t=Ym(e.length,t),!0})),es(t,(function(t){return ea(e,oh(t))}))}function Xm(e,t){if(!e||!e.length)return[];var n=$m(e);return null==t?n:ea(n,(function(e){return Ha(t,void 0,e)}))}function qm(e,t,n,r){return xv(e,t,n(oc(e,t)),r)}var Km=Su((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zm=$l((function(e,t){return Ah(e)?Uh(e,t):[]})),Qm=Zm,Jm=hc((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ac(t,e)};return!(t>1||this.__actions__.length)&&r instanceof qa&&Tl(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Em,args:[o],thisArg:void 0}),new nl(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)})),ey=Jm;function ty(e,t,n){var r=e.length;if(r<2)return r?jm(e[0]):[];for(var o=-1,i=Array(r);++o<r;)for(var a=e[o],l=-1;++l<r;)l!=o&&(i[o]=Uh(i[o]||a,e[l],t,n));return jm(uc(i,1),t,n)}var ny=$l((function(e){return ty(Hu(e,Ah))})),ry=$l((function(e){var t=$h(e);return Ah(t)&&(t=void 0),ty(Hu(e,Ah),ah(t))})),oy=$l((function(e){var t=$h(e);return t="function"==typeof t?t:void 0,ty(Hu(e,Ah),void 0,t)})),iy=$l($m);function ay(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var l=r<i?t[r]:void 0;n(a,e[r],l)}return a}var ly,sy,cy,uy,dy=$l((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Xm(e,n)})),hy={chunk:function(e,t,n){t=(n?Kl(e,t,n):void 0===t)?1:Nu(ya(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,a=Array(Mu(r/t));o<r;)a[i++]=Mc(e,o,o+=t);return a},compact:Rd,concat:Dd,difference:Yh,differenceBy:qh,differenceWith:Zh,drop:function(e,t,n){var r=null==e?0:e.length;return r?Mc(e,(t=n||void 0===t?1:ya(t))<0?0:t,r):[]},dropRight:function(e,t,n){var r=null==e?0:e.length;return r?Mc(e,0,(t=r-(t=n||void 0===t?1:ya(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?Jh(e,ah(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?Jh(e,ah(t),!0):[]},fill:function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Kl(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=ya(n))<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:ya(r))<0&&(r+=o),r=n>r?0:wf(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},findIndex:Of,findLastIndex:Mf,first:Rf,flatten:dc,flattenDeep:function(e){return null!=e&&e.length?uc(e,1/0):[]},flattenDepth:function(e,t){return null!=e&&e.length?uc(e,t=void 0===t?1:ya(t)):[]},fromPairs:function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},head:Rf,indexOf:ap,initial:function(e){return null!=e&&e.length?Mc(e,0,-1):[]},intersection:up,intersectionBy:dp,intersectionWith:hp,join:function(e,t){return null==e?"":Hp.call(e,t)},last:$h,lastIndexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return void 0!==n&&(o=(o=ya(n))<0?Vp(r+o,0):Yp(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Cl(e,wl,o,!0)},nth:function(e,t){return e&&e.length?mv(e,ya(t)):void 0},pull:fg,pullAll:hg,pullAllBy:function(e,t,n){return e&&e.length&&t&&t.length?dg(e,t,ah(n)):e},pullAllWith:function(e,t,n){return e&&e.length&&t&&t.length?dg(e,t,void 0,n):e},pullAt:mg,remove:function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=ah(t);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return vg(e,o),n},reverse:Bg,slice:function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Kl(e,t,n)?(t=0,n=r):(t=null==t?0:ya(t),n=void 0===n?r:ya(n)),Mc(e,t,n)):[]},sortedIndex:function(e,t){return em(e,t)},sortedIndexBy:function(e,t,n){return Jg(e,t,ah(n))},sortedIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var r=em(e,t);if(r<n&&Gl(e[r],t))return r}return-1},sortedLastIndex:function(e,t){return em(e,t,!0)},sortedLastIndexBy:function(e,t,n){return Jg(e,t,ah(n),!0)},sortedLastIndexOf:function(e,t){if(null!=e&&e.length){var n=em(e,t,!0)-1;if(Gl(e[n],t))return n}return-1},sortedUniq:function(e){return e&&e.length?tm(e):[]},sortedUniqBy:function(e,t){return e&&e.length?tm(e,ah(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Mc(e,1,t):[]},take:function(e,t,n){return e&&e.length?Mc(e,0,(t=n||void 0===t?1:ya(t))<0?0:t):[]},takeRight:function(e,t,n){var r=null==e?0:e.length;return r?Mc(e,(t=r-(t=n||void 0===t?1:ya(t)))<0?0:t,r):[]},takeRightWhile:function(e,t){return e&&e.length?Jh(e,ah(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?Jh(e,ah(t)):[]},union:zm,unionBy:Gm,unionWith:Hm,uniq:Wm,uniqBy:function(e,t){return e&&e.length?jm(e,ah(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?jm(e,void 0,t):[]},unzip:$m,unzipWith:Xm,without:Qm,xor:ny,xorBy:ry,xorWith:oy,zip:iy,zipObject:function(e,t){return ay(e||[],t||[],Wl)},zipObjectDeep:function(e,t){return ay(e||[],t||[],xv)},zipWith:dy},fy={countBy:yh,each:tf,eachRight:lf,every:Cf,filter:Ef,find:If,findLast:Nf,flatMap:function(e,t){return uc(kf(e,t),1)},flatMapDeep:function(e,t){return uc(kf(e,t),1/0)},flatMapDepth:function(e,t,n){return n=void 0===n?1:ya(n),uc(kf(e,t),n)},forEach:tf,forEachRight:lf,groupBy:Wf,includes:op,invokeMap:Sp,keyBy:Up,map:kf,orderBy:Iv,partition:ag,reduce:Ng,reduceRight:function(e,t,n){var r=ta(e)?Rg:Mg,o=arguments.length<3;return r(e,ah(t),n,o,af)},reject:function(e,t){return(ta(e)?Hu:xf)(e,pv(ah(t)))},sample:function(e){return(ta(e)?Fg:jg)(e)},sampleSize:function(e,t,n){return t=(n?Kl(e,t,n):void 0===t)?1:ya(t),(ta(e)?Gg:Hg)(e,t)},shuffle:function(e){return(ta(e)?Ug:Vg)(e)},size:Yg,some:function(e,t,n){var r=ta(e)?Bd:Xg;return n&&Kl(e,t,n)&&(t=void 0),r(e,ah(t))},sortBy:Kg},py=wh,vy={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=ya(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:jl,before:Sc,bind:Oc,bindKey:Ac,curry:bh,curryRight:Ch,debounce:Sh,defer:zh,delay:Hh,flip:function(e){return Fl(e,512)},memoize:Ks,negate:pv,once:function(e){return Sc(2,e)},overArgs:Rv,partial:rg,partialRight:ig,rearg:Ag,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return $l(e,t=void 0===t?t:ya(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:rm(ya(t),0),$l((function(n){var r=n[t],o=Nc(n,0,t);return r&&lc(o,r),Ha(e,this,o)}))},throttle:xm,unary:function(e){return jl(e,1)},wrap:function(e,t){return rg(ef(t),e)}},gy={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return ta(e)?e:[e]},clone:Md,cloneDeep:Nd,cloneDeepWith:function(e,t){return Ad(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return Ad(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||sh(e,t,Ls(t))},eq:Gl,gt:Yf,gte:$f,isArguments:is,isArray:ta,isArrayBuffer:Op,isArrayLike:ql,isArrayLikeObject:Ah,isBoolean:Ip,isBuffer:us,isDate:Tp,isElement:function(e){return Zi(e)&&1===e.nodeType&&!Cc(e)},isEmpty:Mp,isEqual:Np,isEqualWith:function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Xd(e,t,void 0,n):!!r},isError:wc,isFinite:function(e){return"number"==typeof e&&Rp(e)},isFunction:Ca,isInteger:Dp,isLength:Xl,isMap:Ed,isMatch:function(e,t){return e===t||qd(e,t,Zd(t))},isMatchWith:function(e,t,n){return n="function"==typeof n?n:void 0,qd(e,t,Zd(t),n)},isNaN:Bp,isNative:function(e){if(Pp(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Na(e)},isNil:Fp,isNull:function(e){return null===e},isNumber:kp,isObject:da,isObjectLike:Zi,isPlainObject:Cc,isRegExp:zp,isSafeInteger:function(e){return Dp(e)&&e>=-9007199254740991&&e<=9007199254740991},isSet:Ld,isString:ep,isSymbol:Qi,isTypedArray:ys,isUndefined:Gp,isWeakMap:function(e){return Zi(e)&&"[object WeakMap]"==fd(e)},isWeakSet:function(e){return Zi(e)&&"[object WeakSet]"==Ki(e)},lt:Kp,lte:Zp,toArray:gv,toFinite:ma,toInteger:ya,toLength:wf,toNumber:ga,toPlainObject:Nh,toSafeInteger:function(e){return e?Ru(ya(e),-9007199254740991,9007199254740991):0===e?e:0},toString:tc},my={add:aa,ceil:Tu,divide:Qh,floor:Bf,max:tv,maxBy:nv,mean:function(e){return ov(e,ba)},meanBy:function(e,t){return ov(e,ah(t))},min:dv,minBy:function(e,t){return e&&e.length?ev(e,ah(t),qp):void 0},multiply:fv,round:Pg,subtract:am,sum:function(e){return e&&e.length?rv(e,ba):0},sumBy:function(e,t){return e&&e.length?rv(e,ah(t)):0}},yy=Du,by=Jf,Cy={assign:_s,assignIn:Ns,assignInWith:Ds,assignWith:Bs,at:fc,create:function(e,t){var n=za(e);return null==t?n:Bu(n,t)},defaults:_h,defaultsDeep:Ph,entries:uf,entriesIn:df,extend:Ns,extendWith:Ds,findKey:function(e,t){return _f(e,ah(t),hh)},findLastKey:function(e,t){return _f(e,ah(t),of)},forIn:zf,forInRight:function(e,t){return null==e?e:rf(e,ef(t),As)},forOwn:function(e,t){return e&&hh(e,ef(t))},forOwnRight:function(e,t){return e&&of(e,ef(t))},functions:function(e){return null==e?[]:Gf(e,Ls(e))},functionsIn:function(e){return null==e?[]:Gf(e,As(e))},get:ic,has:Kf,hasIn:nh,invert:vp,invertBy:bp,invoke:xp,keys:Ls,keysIn:As,mapKeys:Qp,mapValues:function(e,t){var n={};return t=ah(t),hh(e,(function(e,r,o){zl(n,r,t(e,r,o))})),n},merge:av,mergeWith:Bh,omit:wv,omitBy:function(e,t){return Sv(e,pv(ah(t)))},pick:sg,pickBy:Sv,result:function(e,t,n){var r=-1,o=(t=nc(t,e)).length;for(o||(o=1,e=void 0);++r<o;){var i=null==e?void 0:e[rc(t[r])];void 0===i&&(r=o,i=n),e=Ca(i)?i.call(e):i}return e},set:Wg,setWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:xv(e,t,n,r)},toPairs:uf,toPairsIn:df,transform:function(e,t,n){var r=ta(e),o=r||us(e)||ys(e);if(t=ah(t),null==n){var i=e&&e.constructor;n=o?r?new i:[]:da(e)&&Ca(i)?za(pc(e)):{}}return(o?bl:hh)(e,(function(e,r,o){return t(n,e,r,o)})),n},unset:Vm,update:function(e,t,n){return null==e?e:qm(e,t,ef(n))},updateWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:qm(e,t,ef(n),r)},values:np,valuesIn:function(e){return null==e?[]:tp(e,As(e))}},wy={at:ey,chain:Au,commit:function(){return new nl(this.value(),this.__chain__)},lodash:al,next:function(){void 0===this.__values__&&(this.__values__=gv(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,n=this;n instanceof Xa;){var r=ol(n);r.__index__=0,r.__values__=void 0,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof qa){var t=e;return this.__actions__.length&&(t=new qa(this)),(t=t.reverse()).__actions__.push({func:Em,args:[Bg],thisArg:void 0}),new nl(t,this.__chain__)}return this.thru(Bg)},tap:function(e,t){return t(e),e},thru:Em,toIterator:function(){return this},toJSON:Im,value:Im,valueOf:Im,wrapperChain:function(){return Au(this)}},xy={camelCase:Lu,capitalize:Xc,deburr:eu,endsWith:sf,escape:vf,escapeRegExp:function(e){return(e=tc(e))&&mf.test(e)?e.replace(gf,"\\$&"):e},kebabCase:Wp,lowerCase:$p,lowerFirst:Xp,pad:function(e,t,n){e=tc(e);var r=(t=ya(t))?qv(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Zv(Jv(o),n)+e+Zv(Qv(o),n)},padEnd:function(e,t,n){e=tc(e);var r=(t=ya(t))?qv(e):0;return t&&r<t?e+Zv(t-r,n):e},padStart:function(e,t,n){e=tc(e);var r=(t=ya(t))?qv(e):0;return t&&r<t?Zv(t-r,n)+e:e},parseInt:function(e,t,n){return n||null==t?t=0:t&&(t=+t),tg(tc(e).replace(eg,""),t||0)},repeat:Dg,replace:function(){var e=arguments,t=tc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:$g,split:nm,startCase:om,startsWith:function(e,t,n){return e=tc(e),n=null==n?0:Ru(ya(n),0,e.length),t=oa(t),e.slice(n,n+t.length)==t},template:function(e,t,n){var r=fm.imports._.templateSettings||fm;n&&Kl(e,t,n)&&(t=void 0),e=tc(e),t=Ds({},t,r,cm);var o,i,a=Ds({},t.imports,r.imports,cm),l=Ls(a),s=tp(a,l),c=0,u=t.interpolate||bm,d="__p += '",h=RegExp((t.escape||bm).source+"|"+u.source+"|"+(u===hm?ym:bm).source+"|"+(t.evaluate||bm).source+"|$","g"),f=wm.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,n,r,a,l,s){return r||(r=a),d+=e.slice(c,s).replace(Cm,dm),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),l&&(i=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t})),d+="';\n";var p=wm.call(t,"variable")&&t.variable;if(p){if(mm.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(pm,""):d).replace(vm,"$1").replace(gm,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Ec((function(){return Function(l,f+"return "+d).apply(void 0,s)}));if(v.source=d,wc(v))throw v;return v},templateSettings:fm,toLower:function(e){return tc(e).toLowerCase()},toUpper:_m,trim:Mm,trimEnd:function(e,t,n){if((e=tc(e))&&(n||void 0===t))return e.slice(0,sa(e)+1);if(!e||!(t=oa(t)))return e;var r=Vc(e);return Nc(r,0,Tm(r,Vc(t))+1).join("")},trimStart:function(e,t,n){if((e=tc(e))&&(n||void 0===t))return e.replace(Nm,"");if(!e||!(t=oa(t)))return e;var r=Vc(e);return Nc(r,Am(r,Vc(t))).join("")},truncate:function(e,t){var n=30,r="...";if(da(t)){var o="separator"in t?t.separator:o;n="length"in t?ya(t.length):n,r="omission"in t?oa(t.omission):r}var i=(e=tc(e)).length;if(Dc(e)){var a=Vc(e);i=a.length}if(n>=i)return e;var l=n-qv(r);if(l<1)return r;var s=a?Nc(a,0,l).join(""):e.slice(0,l);if(void 0===o)return s+r;if(a&&(l+=s.length-l),zp(o)){if(e.slice(l).search(o)){var c,u=s;for(o.global||(o=RegExp(o.source,tc(Rm.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;s=s.slice(0,void 0===d?l:d)}}else if(e.indexOf(oa(o),l)!=l){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+r},unescape:function(e){return(e=tc(e))&&Bm.test(e)?e.replace(km,Dm):e},upperCase:Km,upperFirst:$c,words:xu},Ey={attempt:Ec,bindAll:_c,cond:lh,conforms:function(e){return function(e){var t=Ls(e);return function(n){return sh(n,e,t)}}(Ad(e,1))},constant:pl,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:Ff,flowRight:jf,identity:ba,iteratee:function(e){return ah("function"==typeof e?e:Ad(e,1))},matches:Jp,matchesProperty:function(e,t){return rh(e,Ad(t,1))},method:sv,methodOf:uv,mixin:hv,noop:Ka,nthArg:function(e){return e=ya(e),$l((function(t){return mv(t,e)}))},over:Tv,overEvery:Dv,overSome:kv,property:ih,propertyOf:function(e){return function(t){return null==e?void 0:oc(e,t)}},range:Ig,rangeRight:_g,stubArray:Wu,stubFalse:as,stubObject:function(){return{}},stubString:function(){return""},stubTrue:im,times:function(e,t){if((e=ya(e))<1||e>9007199254740991)return[];var n=Sm,r=Lm(e,Sm);t=ef(t),e-=Sm;for(var o=es(r,t);++n<e;)t(n);return o},toPath:function(e){return ta(e)?ea(e,rc):Qi(e)?[e]:rl(ec(tc(e)))},uniqueId:function(e){var t=++Um;return tc(e)+t}},Sy=Math.max,Ly=Math.min,Oy=Math.min,Iy=4294967295,_y=Array.prototype,Ty=Object.prototype.hasOwnProperty,Ay=Wi?Wi.iterator:void 0,My=Math.max,Ny=Math.min,Ry=function(e){return function(t,n,r){if(null==r){var o=da(n),i=o&&Ls(n),a=i&&i.length&&Gf(n,i);(a?a.length:o)||(r=n,n=t,t=this)}return e(t,n,r)}}(hv);al.after=vy.after,al.ary=vy.ary,al.assign=Cy.assign,al.assignIn=Cy.assignIn,al.assignInWith=Cy.assignInWith,al.assignWith=Cy.assignWith,al.at=Cy.at,al.before=vy.before,al.bind=vy.bind,al.bindAll=Ey.bindAll,al.bindKey=vy.bindKey,al.castArray=gy.castArray,al.chain=wy.chain,al.chunk=hy.chunk,al.compact=hy.compact,al.concat=hy.concat,al.cond=Ey.cond,al.conforms=Ey.conforms,al.constant=Ey.constant,al.countBy=fy.countBy,al.create=Cy.create,al.curry=vy.curry,al.curryRight=vy.curryRight,al.debounce=vy.debounce,al.defaults=Cy.defaults,al.defaultsDeep=Cy.defaultsDeep,al.defer=vy.defer,al.delay=vy.delay,al.difference=hy.difference,al.differenceBy=hy.differenceBy,al.differenceWith=hy.differenceWith,al.drop=hy.drop,al.dropRight=hy.dropRight,al.dropRightWhile=hy.dropRightWhile,al.dropWhile=hy.dropWhile,al.fill=hy.fill,al.filter=fy.filter,al.flatMap=fy.flatMap,al.flatMapDeep=fy.flatMapDeep,al.flatMapDepth=fy.flatMapDepth,al.flatten=hy.flatten,al.flattenDeep=hy.flattenDeep,al.flattenDepth=hy.flattenDepth,al.flip=vy.flip,al.flow=Ey.flow,al.flowRight=Ey.flowRight,al.fromPairs=hy.fromPairs,al.functions=Cy.functions,al.functionsIn=Cy.functionsIn,al.groupBy=fy.groupBy,al.initial=hy.initial,al.intersection=hy.intersection,al.intersectionBy=hy.intersectionBy,al.intersectionWith=hy.intersectionWith,al.invert=Cy.invert,al.invertBy=Cy.invertBy,al.invokeMap=fy.invokeMap,al.iteratee=Ey.iteratee,al.keyBy=fy.keyBy,al.keys=Ls,al.keysIn=Cy.keysIn,al.map=fy.map,al.mapKeys=Cy.mapKeys,al.mapValues=Cy.mapValues,al.matches=Ey.matches,al.matchesProperty=Ey.matchesProperty,al.memoize=vy.memoize,al.merge=Cy.merge,al.mergeWith=Cy.mergeWith,al.method=Ey.method,al.methodOf=Ey.methodOf,al.mixin=Ry,al.negate=pv,al.nthArg=Ey.nthArg,al.omit=Cy.omit,al.omitBy=Cy.omitBy,al.once=vy.once,al.orderBy=fy.orderBy,al.over=Ey.over,al.overArgs=vy.overArgs,al.overEvery=Ey.overEvery,al.overSome=Ey.overSome,al.partial=vy.partial,al.partialRight=vy.partialRight,al.partition=fy.partition,al.pick=Cy.pick,al.pickBy=Cy.pickBy,al.property=Ey.property,al.propertyOf=Ey.propertyOf,al.pull=hy.pull,al.pullAll=hy.pullAll,al.pullAllBy=hy.pullAllBy,al.pullAllWith=hy.pullAllWith,al.pullAt=hy.pullAt,al.range=Ey.range,al.rangeRight=Ey.rangeRight,al.rearg=vy.rearg,al.reject=fy.reject,al.remove=hy.remove,al.rest=vy.rest,al.reverse=hy.reverse,al.sampleSize=fy.sampleSize,al.set=Cy.set,al.setWith=Cy.setWith,al.shuffle=fy.shuffle,al.slice=hy.slice,al.sortBy=fy.sortBy,al.sortedUniq=hy.sortedUniq,al.sortedUniqBy=hy.sortedUniqBy,al.split=xy.split,al.spread=vy.spread,al.tail=hy.tail,al.take=hy.take,al.takeRight=hy.takeRight,al.takeRightWhile=hy.takeRightWhile,al.takeWhile=hy.takeWhile,al.tap=wy.tap,al.throttle=vy.throttle,al.thru=Em,al.toArray=gy.toArray,al.toPairs=Cy.toPairs,al.toPairsIn=Cy.toPairsIn,al.toPath=Ey.toPath,al.toPlainObject=gy.toPlainObject,al.transform=Cy.transform,al.unary=vy.unary,al.union=hy.union,al.unionBy=hy.unionBy,al.unionWith=hy.unionWith,al.uniq=hy.uniq,al.uniqBy=hy.uniqBy,al.uniqWith=hy.uniqWith,al.unset=Cy.unset,al.unzip=hy.unzip,al.unzipWith=hy.unzipWith,al.update=Cy.update,al.updateWith=Cy.updateWith,al.values=Cy.values,al.valuesIn=Cy.valuesIn,al.without=hy.without,al.words=xy.words,al.wrap=vy.wrap,al.xor=hy.xor,al.xorBy=hy.xorBy,al.xorWith=hy.xorWith,al.zip=hy.zip,al.zipObject=hy.zipObject,al.zipObjectDeep=hy.zipObjectDeep,al.zipWith=hy.zipWith,al.entries=Cy.toPairs,al.entriesIn=Cy.toPairsIn,al.extend=Cy.assignIn,al.extendWith=Cy.assignInWith,Ry(al,al),al.add=my.add,al.attempt=Ey.attempt,al.camelCase=xy.camelCase,al.capitalize=xy.capitalize,al.ceil=my.ceil,al.clamp=yy,al.clone=gy.clone,al.cloneDeep=gy.cloneDeep,al.cloneDeepWith=gy.cloneDeepWith,al.cloneWith=gy.cloneWith,al.conformsTo=gy.conformsTo,al.deburr=xy.deburr,al.defaultTo=Ey.defaultTo,al.divide=my.divide,al.endsWith=xy.endsWith,al.eq=gy.eq,al.escape=xy.escape,al.escapeRegExp=xy.escapeRegExp,al.every=fy.every,al.find=fy.find,al.findIndex=hy.findIndex,al.findKey=Cy.findKey,al.findLast=fy.findLast,al.findLastIndex=hy.findLastIndex,al.findLastKey=Cy.findLastKey,al.floor=my.floor,al.forEach=fy.forEach,al.forEachRight=fy.forEachRight,al.forIn=Cy.forIn,al.forInRight=Cy.forInRight,al.forOwn=Cy.forOwn,al.forOwnRight=Cy.forOwnRight,al.get=Cy.get,al.gt=gy.gt,al.gte=gy.gte,al.has=Cy.has,al.hasIn=Cy.hasIn,al.head=hy.head,al.identity=ba,al.includes=fy.includes,al.indexOf=hy.indexOf,al.inRange=by,al.invoke=Cy.invoke,al.isArguments=gy.isArguments,al.isArray=ta,al.isArrayBuffer=gy.isArrayBuffer,al.isArrayLike=gy.isArrayLike,al.isArrayLikeObject=gy.isArrayLikeObject,al.isBoolean=gy.isBoolean,al.isBuffer=gy.isBuffer,al.isDate=gy.isDate,al.isElement=gy.isElement,al.isEmpty=gy.isEmpty,al.isEqual=gy.isEqual,al.isEqualWith=gy.isEqualWith,al.isError=gy.isError,al.isFinite=gy.isFinite,al.isFunction=gy.isFunction,al.isInteger=gy.isInteger,al.isLength=gy.isLength,al.isMap=gy.isMap,al.isMatch=gy.isMatch,al.isMatchWith=gy.isMatchWith,al.isNaN=gy.isNaN,al.isNative=gy.isNative,al.isNil=gy.isNil,al.isNull=gy.isNull,al.isNumber=gy.isNumber,al.isObject=da,al.isObjectLike=gy.isObjectLike,al.isPlainObject=gy.isPlainObject,al.isRegExp=gy.isRegExp,al.isSafeInteger=gy.isSafeInteger,al.isSet=gy.isSet,al.isString=gy.isString,al.isSymbol=gy.isSymbol,al.isTypedArray=gy.isTypedArray,al.isUndefined=gy.isUndefined,al.isWeakMap=gy.isWeakMap,al.isWeakSet=gy.isWeakSet,al.join=hy.join,al.kebabCase=xy.kebabCase,al.last=$h,al.lastIndexOf=hy.lastIndexOf,al.lowerCase=xy.lowerCase,al.lowerFirst=xy.lowerFirst,al.lt=gy.lt,al.lte=gy.lte,al.max=my.max,al.maxBy=my.maxBy,al.mean=my.mean,al.meanBy=my.meanBy,al.min=my.min,al.minBy=my.minBy,al.stubArray=Ey.stubArray,al.stubFalse=Ey.stubFalse,al.stubObject=Ey.stubObject,al.stubString=Ey.stubString,al.stubTrue=Ey.stubTrue,al.multiply=my.multiply,al.nth=hy.nth,al.noop=Ey.noop,al.now=py,al.pad=xy.pad,al.padEnd=xy.padEnd,al.padStart=xy.padStart,al.parseInt=xy.parseInt,al.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Kl(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ma(e),void 0===t?(t=e,e=0):t=ma(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Eg();return xg(e+o*(t-e+wg("1e-"+((o+"").length-1))),t)}return Cg(e,t)},al.reduce=fy.reduce,al.reduceRight=fy.reduceRight,al.repeat=xy.repeat,al.replace=xy.replace,al.result=Cy.result,al.round=my.round,al.sample=fy.sample,al.size=fy.size,al.snakeCase=xy.snakeCase,al.some=fy.some,al.sortedIndex=hy.sortedIndex,al.sortedIndexBy=hy.sortedIndexBy,al.sortedIndexOf=hy.sortedIndexOf,al.sortedLastIndex=hy.sortedLastIndex,al.sortedLastIndexBy=hy.sortedLastIndexBy,al.sortedLastIndexOf=hy.sortedLastIndexOf,al.startCase=xy.startCase,al.startsWith=xy.startsWith,al.subtract=my.subtract,al.sum=my.sum,al.sumBy=my.sumBy,al.template=xy.template,al.times=Ey.times,al.toFinite=gy.toFinite,al.toInteger=ya,al.toLength=gy.toLength,al.toLower=xy.toLower,al.toNumber=gy.toNumber,al.toSafeInteger=gy.toSafeInteger,al.toString=gy.toString,al.toUpper=xy.toUpper,al.trim=xy.trim,al.trimEnd=xy.trimEnd,al.trimStart=xy.trimStart,al.truncate=xy.truncate,al.unescape=xy.unescape,al.uniqueId=Ey.uniqueId,al.upperCase=xy.upperCase,al.upperFirst=xy.upperFirst,al.each=fy.forEach,al.eachRight=fy.forEachRight,al.first=hy.head,Ry(al,(ly={},hh(al,(function(e,t){Ty.call(al.prototype,t)||(ly[t]=e)})),ly),{chain:!1}),al.VERSION="4.17.21",(al.templateSettings=xy.templateSettings).imports._=al,bl(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){al[e].placeholder=al})),bl(["drop","take"],(function(e,t){qa.prototype[e]=function(n){n=void 0===n?1:My(ya(n),0);var r=this.__filtered__&&!t?new qa(this):this.clone();return r.__filtered__?r.__takeCount__=Ny(n,r.__takeCount__):r.__views__.push({size:Ny(n,Iy),type:e+(r.__dir__<0?"Right":"")}),r},qa.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),bl(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;qa.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ah(e),type:n}),t.__filtered__=t.__filtered__||r,t}})),bl(["head","last"],(function(e,t){var n="take"+(t?"Right":"");qa.prototype[e]=function(){return this[n](1).value()[0]}})),bl(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");qa.prototype[e]=function(){return this.__filtered__?new qa(this):this[n](1)}})),qa.prototype.compact=function(){return this.filter(ba)},qa.prototype.find=function(e){return this.filter(e).head()},qa.prototype.findLast=function(e){return this.reverse().find(e)},qa.prototype.invokeMap=$l((function(e,t){return"function"==typeof e?new qa(this):this.map((function(n){return wp(n,e,t)}))})),qa.prototype.reject=function(e){return this.filter(pv(ah(e)))},qa.prototype.slice=function(e,t){e=ya(e);var n=this;return n.__filtered__&&(e>0||t<0)?new qa(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ya(t))<0?n.dropRight(-t):n.take(t-e)),n)},qa.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qa.prototype.toArray=function(){return this.take(Iy)},hh(qa.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=al[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(al.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof qa,s=a[0],c=l||ta(t),u=function(e){var t=o.apply(al,lc([e],a));return r&&d?t[0]:t};c&&n&&"function"==typeof s&&1!=s.length&&(l=c=!1);var d=this.__chain__,h=!!this.__actions__.length,f=i&&!d,p=l&&!h;if(!i&&c){t=p?t:new qa(this);var v=e.apply(t,a);return v.__actions__.push({func:Em,args:[u],thisArg:void 0}),new nl(v,d)}return f&&p?e.apply(this,a):(v=this.thru(u),f?r?v.value()[0]:v.value():v)})})),bl(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_y[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);al.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(ta(o)?o:[],e)}return this[n]((function(n){return t.apply(ta(n)?n:[],e)}))}})),hh(qa.prototype,(function(e,t){var n=al[t];if(n){var r=n.name+"";Ty.call(Ja,r)||(Ja[r]=[]),Ja[r].push({name:t,func:n})}})),Ja[Dl(void 0,2).name]=[{name:"wrapper",func:void 0}],qa.prototype.clone=function(){var e=new qa(this.__wrapped__);return e.__actions__=rl(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rl(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rl(this.__views__),e},qa.prototype.reverse=function(){if(this.__filtered__){var e=new qa(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},qa.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ta(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ly(t,e+a);break;case"takeRight":e=Sy(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,l=i.end,s=l-a,c=r?l:a-1,u=this.__iteratees__,d=u.length,h=0,f=Oy(s,this.__takeCount__);if(!n||!r&&o==s&&f==s)return Om(e,this.__actions__);var p=[];e:for(;s--&&h<f;){for(var v=-1,g=e[c+=t];++v<d;){var m=u[v],y=m.iteratee,b=m.type,C=y(g);if(2==b)g=C;else if(!C){if(1==b)continue e;break e}}p[h++]=g}return p},al.prototype.at=wy.at,al.prototype.chain=wy.wrapperChain,al.prototype.commit=wy.commit,al.prototype.next=wy.next,al.prototype.plant=wy.plant,al.prototype.reverse=wy.reverse,al.prototype.toJSON=al.prototype.valueOf=al.prototype.value=wy.value,al.prototype.first=al.prototype.head,Ay&&(al.prototype[Ay]=wy.toIterator),function(e){e.CORNER_CELL_CLICK="cornerCellClick",e.DATA_CELL_CLICK="dataCellClick",e.MERGED_CELLS_CLICK="mergedCellsClick",e.ROW_COLUMN_CLICK="rowColumnClick",e.ROW_TEXT_CLICK="rowTextClick",e.HOVER="hover",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.COL_ROW_RESIZE="rowColResize",e.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",e.RANGE_SELECTION="rangeSelection",e.SELECTED_CELL_MOVE="selectedCellMove"}(sy||(sy={})),function(e){e.ALL_SELECTED="allSelected",e.SELECTED="selected",e.UNSELECTED="unselected",e.HOVER="hover",e.HOVER_FOCUS="hoverFocus",e.HIGHLIGHT="highlight",e.SEARCH_RESULT="searchResult",e.PREPARE_SELECT="prepareSelect"}(cy||(cy={})),function(e){e.DATA_CELL="dataCell",e.HEADER_CELL="headerCell",e.ROW_CELL="rowCell",e.COL_CELL="colCell",e.CORNER_CELL="cornerCell",e.MERGED_CELL="mergedCell"}(uy||(uy={}));var Dy,ky,By,Py,Fy={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},jy={textShape:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},zy="interactionStateInfo";!function(e){e.CLICK="click",e.UN_DRAGGED="unDragged",e.DRAGGED="dragged"}(Dy||(Dy={})),function(e){e.SHIFT="Shift",e.COPY="c",e.ESC="Escape",e.META="Meta",e.CONTROL="Control",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(ky||(ky={})),function(e){e.ASC="ASC",e.DESC="DESC"}(By||(By={})),function(e){e.HOVER="hover",e.CLICK="click",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.MULTI_SELECTION="multiSelection",e.RESIZE="resize"}(Py||(Py={}));var Gy,Hy,Wy,Uy,Vy,Yy,$y={x:{value:0,scroll:!1},y:{value:0,scroll:!1}};!function(e){e.CONTENT="content",e.CANVAS="canvas"}(Gy||(Gy={})),function(e){e.LEADING="leading",e.TRAILING="trailing"}(Hy||(Hy={})),function(e){e.Horizontal="col",e.Vertical="row"}(Wy||(Wy={})),function(e){e.Field="field",e.Cell="cell",e.Tree="tree",e.Series="series"}(Uy||(Uy={})),function(e){e.ALL="all",e.CURRENT="current"}(Vy||(Vy={})),function(e){e.Adaptive="adaptive",e.ColAdaptive="colAdaptive",e.Compact="compact"}(Yy||(Yy={}));var Xy={layoutWidthType:Yy.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},qy={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:800},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:Gy.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:Vy.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:Xy,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Oi,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},Ky=function(e,t){return Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ky(e,t)};function Zy(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ky(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qy=function(){return Qy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qy.apply(this,arguments)};function Jy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function eb(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function tb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function nb(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var rb={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,o=0,i=t.round,a=t.min,l=t.max,s=t.random;function c(e,s){if(s=s||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,s);var u=function(e){var o,i,s,c={r:0,g:0,b:0},u=1,d=null,h=null,f=null,p=!1,v=!1;return"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,o=!1;if(I[e])e=I[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=z.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=z.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=z.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=z.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=z.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=z.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=z.hex8.exec(e))?{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:B(t[4]),format:o?"name":"hex8"}:(t=z.hex6.exec(e))?{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:o?"name":"hex"}:(t=z.hex4.exec(e))?{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:o?"name":"hex8"}:!!(t=z.hex3.exec(e))&&{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:o?"name":"hex"}}(e)),"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(o=e.r,i=e.g,s=e.b,c={r:255*A(o,255),g:255*A(i,255),b:255*A(s,255)},p=!0,v="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(d=D(e.s),h=D(e.v),c=function(e,n,r){e=6*A(e,360),n=A(n,100),r=A(r,100);var o=t.floor(e),i=e-o,a=r*(1-n),l=r*(1-i*n),s=r*(1-(1-i)*n),c=o%6;return{r:255*[r,l,a,a,s,r][c],g:255*[s,r,r,l,a,a][c],b:255*[a,a,s,r,r,l][c]}}(e.h,d,h),p=!0,v="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(d=D(e.s),f=D(e.l),c=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=A(e,360),t=A(t,100),n=A(n,100),0===t)r=o=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;r=a(s,l,e+1/3),o=a(s,l,e),i=a(s,l,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,d,f),p=!0,v="hsl"),e.hasOwnProperty("a")&&(u=e.a)),u=T(u),{ok:p,format:e.format||v,r:a(255,l(c.r,0)),g:a(255,l(c.g,0)),b:a(255,l(c.b,0)),a:u}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=i(100*this._a)/100,this._format=s.format||u.format,this._gradientType=s.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=u.ok,this._tc_id=o++}function u(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var r,o,i=l(e,t,n),s=a(e,t,n),c=(i+s)/2;if(i==s)r=o=0;else{var u=i-s;switch(o=c>.5?u/(2-i-s):u/(i+s),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:c}}function d(e,t,n){e=A(e,255),t=A(t,255),n=A(n,255);var r,o,i=l(e,t,n),s=a(e,t,n),c=i,u=i-s;if(o=0===i?0:u/i,i==s)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:c}}function h(e,t,n,r){var o=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function f(e,t,n,r){return[R(k(r)),R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=M(n.s),c(n)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=M(n.s),c(n)}function g(e){return c(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=M(n.l),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=l(0,a(255,n.r-i(-t/100*255))),n.g=l(0,a(255,n.g-i(-t/100*255))),n.b=l(0,a(255,n.b-i(-t/100*255))),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=M(n.l),c(n)}function C(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function w(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function E(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function S(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),o=360/n,i=[c(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(c(r));return i}function O(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],l=1/t;t--;)a.push(c({h:r,s:o,v:i})),i=(i+l)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,o=this.toRgb();return e=o.r/255,n=o.g/255,r=o.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=T(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var a=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16)),R(k(r))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*A(this._r,255))+"%",g:i(100*A(this._g,255))+"%",b:i(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*A(this._r,255))+"%, "+i(100*A(this._g,255))+"%, "+i(100*A(this._b,255))+"%)":"rgba("+i(100*A(this._r,255))+"%, "+i(100*A(this._g,255))+"%, "+i(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=c(e);n="#"+f(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:D(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:s(),g:s(),b:s()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),o=c(t).toRgb(),i=n/100;return c({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},c.readability=function(e,n){var r=c(e),o=c(n);return(t.max(r.getLuminance(),o.getLuminance())+.05)/(t.min(r.getLuminance(),o.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,o,i=c.readability(e,t);switch(o=!1,r=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},c.mostReadable=function(e,t,n){var r,o,i,a,l=null,s=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>s&&(s=r,l=c(t[u]));return c.isReadable(e,l,{level:i,size:a})||!o?l:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var I=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(I);function T(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function A(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=a(n,l(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function M(e){return a(1,l(0,e))}function N(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function D(e){return e<=1&&(e=100*e+"%"),e}function k(e){return t.round(255*parseFloat(e)).toString(16)}function B(e){return N(e)/255}var P,F,j,z=(F="[\\s|\\(]+("+(P="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",j="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",{CSS_UNIT:new RegExp(P),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(e){return!!z.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(rb);var ob,ib=rb.exports,ab=[95,85,75,30,15,0,15,30,45,60,80],lb=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],sb=function(e){void 0===e&&(e={});var t=Array.from(Array(15)).fill(Pi),n=e.basicColorRelations,r=void 0===n?[]:n,o=function(e){for(var t=[],n=0;n<11;n++){var r=ab[n];t.push(_m(0===r?e:ib.mix(e,n<5?"#FFFFFF":"#000000",r).toHexString()))}return t}(e.brandColor);return r.forEach((function(e){t[e.basicColorIndex]=o[e.standardColorIndex]})),lb.forEach((function(e){var n=e.fontColorIndex,r=e.bgColorIndex;t[n]=ib(t[r]).getBrightness()>220?Bi:Pi})),Qy(Qy({},e),{basicColors:t})},cb=sb({brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]}),ub={default:sb({brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]}),colorful:cb,gray:sb({brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]})},db="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",hb="zh_CN",fb={zh_CN:{小计:"小计",总计:"总计",总和:"总和",项:"项",已选择:"已选择",序号:"序号",度量:"度量",数值:"数值",共计:"共计",条:"条",趋势:"趋势",隐藏:"隐藏",组内升序:"组内升序",升序:"升序",降序:"降序",组内降序:"组内降序",不排序:"不排序"},en_US:{小计:"Total",总计:"Total",总和:"SUM",项:"items",已选择:"selected",序号:"Index",度量:"Measure",数值:"Measure",共计:"Total",条:"",隐藏:"Hide",趋势:"Trend",组内升序:"Group ASC",组内降序:"Group DESC",升序:"ASC",降序:"DESC",不排序:"No order"}},pb=function(){return hb},vb=function(e){fb=av({},fb,e)},gb=function(e,t){return void 0===t&&(t=e),ic(fb,[hb,e],t)},mb="".concat(Ri,"-tooltip"),yb="".concat(mb,"-container"),bb="".concat(yb,"-show"),Cb="".concat(yb,"-hide"),wb=("".concat(mb,"-operation"),15);function xb(e){return"mobile"===e||/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function Eb(){return/windows/i.test(navigator.userAgent)}!function(e){e[e.ALL=0]="ALL",e[e.COL=1]="COL",e[e.ROW=2]="ROW"}(ob||(ob={}));var Sb=function(){function e(e){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var t=e.id,n=e.key,r=e.value,o=e.label,i=e.parent,a=e.level,l=e.rowIndex,s=e.isTotals,c=e.isGrandTotals,u=e.isSubTotals,d=e.isCollapsed,h=e.hierarchy,f=e.isPivotMode,p=e.seriesNumberWidth,v=e.field,g=e.spreadsheet,m=e.query,y=e.belongsCell,b=e.inCollapseNode,C=e.isTotalMeasure,w=e.isLeaf,x=e.extra;this.id=t,this.key=n,this.value=r,this.label=o||r,this.parent=i,this.level=a,this.rowIndex=l,this.isTotals=s,this.isCollapsed=d,this.hierarchy=h,this.isPivotMode=f,this.seriesNumberWidth=p,this.field=v,this.spreadsheet=g,this.query=m,this.belongsCell=y,this.inCollapseNode=b,this.isTotalMeasure=C,this.isLeaf=w,this.isGrandTotals=c,this.isSubTotals=u,this.config={x:0,y:0,width:0,height:0,colIndex:-1,children:[],padding:0,id:"",key:"",value:"",label:""},this.extra=x}return e.getFieldPath=function(e,t){if(e&&!e.isTotals||e&&t){for(var n=e.parent,r=[e.field];n&&n.id!==Si;)r.push(n.field),n=n.parent;return r.reverse()}return[]},e.getAllLeaveNodes=function(e){var t=[];if(e.isLeaf)return[e];for(var n=nb([],tb(e.children),!1),r=n.shift();r;)r.isLeaf?t.push(r):n.unshift.apply(n,nb([],tb(r.children),!1)),r=n.shift();return t},e.getAllChildrenNodes=function(e){var t=[];if(e.isLeaf)return[e];for(var n=nb([],tb(e.children||[]),!1),r=n.shift();r;)t.push(r),n.unshift.apply(n,nb([],tb(r.children),!1)),r=n.shift();return t},e.getAllBranch=function(e){for(var t=[],n=this.getAllLeaveNodes(e),r=n.shift(),o=[];r;){o.unshift(r);for(var i=r.parent;i&&!Np(i,e);)o.unshift(i),i=i.parent;t.push(o),r=n.shift(),o=[]}return t},e.blankNode=function(){return new e({id:"",key:"",value:""})},e.rootNode=function(){return new e({id:"root",key:"",value:""})},e.prototype.toJSON=function(){return wv(this,["config","hierarchy","parent","spreadsheet"])},e.prototype.getHeadLeafChild=function(){for(var e=this;!Mp(e.children);)e=Rf(e.children);return e},e}(),Lb=function(){function e(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return e.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter((function(e){return e.isLeaf}))},e.prototype.getNodes=function(e){return void 0!==e?this.allNodesWithoutRoot.filter((function(t){return t.level===e})):this.allNodesWithoutRoot},e.prototype.getNodesLessThanLevel=function(e){return this.allNodesWithoutRoot.filter((function(t){return t.level<=e}))},e.prototype.pushNode=function(e,t){void 0===t&&(t=-1),-1===t?this.allNodesWithoutRoot.push(e):this.allNodesWithoutRoot.splice(t,0,e)},e.prototype.pushIndexNode=function(e){this.indexNode.push(e)},e.prototype.getIndexNodes=function(){return this.indexNode},e}(),Ob=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.label=e,this.isSubTotals=t,this.isGrandTotals=n};function Ib(e,t){for(var n={},r=e;r&&r.key;)r.isTotals&&!t||(n[r.key]=r.value),r=r.parent;return n}var _b=function(e,t,n,r){return t.layoutArrange?t.layoutArrange(t.spreadsheet,n,r,e):e},Tb=function(e,t,n,r){var o=!0,i=function(e,n,o){void 0===n&&(n=-1),void 0===o&&(o=-1),-1===n?(t.children.push(e),r.pushNode(e)):(t.children.splice(n,0,e),r.pushNode(e,o))};if(e.layoutHierarchy){var a=e.layoutHierarchy(e.spreadsheet,n);if(a){var l=!!Ip(null==a?void 0:a.delete)&&(null==a?void 0:a.delete);o=!l;var s=a.push,c=a.unshift,u=t.children.length,d=r.getNodes().length;Mp(c)||(tf(c,(function(e){i(e)})),u=t.children.length,d=r.getNodes().length),Mp(s)||tf(s,(function(e){i(e)})),l||i(n,u,d)}else i(n)}else i(n);return o},Ab=function(e,t,n){(null==e?void 0:e.layoutCoordinate)&&((null==t?void 0:t.isLeaf)||(null==n?void 0:n.isLeaf))&&(null==e||e.layoutCoordinate(e.spreadsheet,t,n))},Mb=function(e){this.label=e},Nb=function(e){var t,n=e.addTotalMeasureInTotal,r=e.addMeasureInTotalQuery,o=e.parentNode,i=e.currentField,a=e.fields,l=e.facetCfg,s=e.hierarchy,c=a.indexOf(i),u=l.dataSet,d=l.values,h=l.spreadsheet,f=[],p={};if(o.isTotals)n&&(p=Ib(o.parent,!0),f.push.apply(f,nb([],tb(d.map((function(e){return new Mb(e)}))),!1)));else{p=Ib(o,!0);var v=u.getDimensionValues(i,p),g=_b(v,l,o,i);f.push.apply(f,nb([],tb(g||[]),!1));var m=u.getFieldName(i);Mp(f)&&(i===oi?f.push.apply(f,nb([],tb(null===(t=u.fields)||void 0===t?void 0:t.values),!1)):f.push(m)),function(e,t,n){var r,o,i,a,l=null!==(a=null===(i=n.colCfg)||void 0===i?void 0:i.hideMeasureColumn)&&void 0!==a&&a,s=n.dataSet.fields.valueInCols;try{for(var c=eb(e),u=c.next();!u.done;u=c.next()){var d=u.value;l&&s&&t===oi&&e.splice(e.indexOf(d),1)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}(f,i,l),function(e){var t,n,r,o=e.isFirstField,i=e.currentField,a=e.fieldValues,l=e.lastField,s=e.spreadsheet.getTotalsConfig(o?i:l);o?(null==s?void 0:s.showGrandTotals)&&(n=s.reverseLayout?"unshift":"push",r=new Ob(s.label,!1,!0)):(null==s?void 0:s.showSubTotals)&&(al.size(a)>1||!1!==al.get(s,"showSubTotals.always"))&&i!==oi&&(n=s.reverseSubLayout?"unshift":"push",r=new Ob(s.subLabel,!0)),null===(t=a[n])||void 0===t||t.call(a,r)}({currentField:i,lastField:a[c-1],isFirstField:0===c,fieldValues:f,spreadsheet:h})}var y=h.store.get("hiddenColumnsDetail"),b=function(e){for(var t=e.getColumnLeafNodes(),n=new Set,r=0;r<t.length;r++)if(n.add(t[r].value),n.size>1)return!1;return 1===n.size}(h),C=f.filter((function(e){return!Gp(e)&&(!!Mp(y)||y.every((function(t){return t.hideColumnNodes.every((function(t){var n=t.field===oi,r=t.field===ii;return n||r||b?t.parent.id!==o.id&&t.parent.value!==e:t.value!==e}))})))}));Db({currentField:i,fields:a,fieldValues:C,facetCfg:l,hierarchy:s,parentNode:o,level:c,query:p,addMeasureInTotalQuery:r,addTotalMeasureInTotal:n})},Rb=function(e,t){return"".concat(e).concat(Li).concat(t)},Db=function(e){var t,n,r,o,i,a,l,s,c,u=e.currentField,d=e.fields,h=e.fieldValues,f=e.facetCfg,p=e.hierarchy,v=e.parentNode,g=e.level,m=e.query,y=e.addMeasureInTotalQuery,b=e.addTotalMeasureInTotal,C=f.spreadsheet,w=f.collapsedCols,x=f.colCfg;try{for(var E=eb(h.entries()),S=E.next();!S.done;S=E.next()){var L=tb(S.value,2),O=L[0],I=L[1],_=I instanceof Ob,T=I instanceof Mb,A=void 0,M=void 0,N=!1,R=!1,D=!1,k=u;if(_){var B=I;R=B.isGrandTotals,D=B.isSubTotals,A=gb(I.label),y?(M=Qy(Qy({},m),((r={})[oi]=null===(l=null==C?void 0:C.dataSet)||void 0===l?void 0:l.fields.values[0],r)),N=!0):(M=m,b||(N=!0))}else if(T)A=gb(I.label),M=Qy(Qy({},m),((o={})[oi]=A,o)),k=oi,N=!0;else if(C.isTableMode())A=I,k=d[O],M=Qy(Qy({},m),((i={})[k]=A,i)),N=!0;else{A=I,M=Qy(Qy({},m),((a={})[u]=A,a));var P=null===(c=null===(s=C.dataCfg.fields)||void 0===s?void 0:s.valueInCols)||void 0===c||c,F=(null==x?void 0:x.hideMeasureColumn)&&P&&op(d,oi)?2:1;N=g===d.length-F}var j=Rb(v.id,A);if(!j)return;var z=!!Ip(null==w?void 0:w[j])&&(null==w?void 0:w[j]),G=new Sb({id:j,key:k,value:A,level:g,field:k,parent:v,isTotals:_,isGrandTotals:R,isSubTotals:D,isTotalMeasure:T,isCollapsed:z,hierarchy:p,query:M,spreadsheet:C,isLeaf:N||z}),H=Tb(f,v,G,p);!(g>p.maxLevel)||R||v.isGrandTotals||v.isSubTotals||G.isSubTotals||(p.sampleNodesForAllLevels.push(G),p.sampleNodeForLastLevel=G,p.maxLevel=g),N||z||!H?(G.isLeaf=!0,p.pushIndexNode(G),G.rowIndex=p.getIndexNodes().length-1):Nb({addTotalMeasureInTotal:b,addMeasureInTotalQuery:y,parentNode:G,currentField:d[g+1],fields:d,facetCfg:f,hierarchy:p})}}catch(e){t={error:e}}finally{try{S&&!S.done&&(n=E.return)&&n.call(E)}finally{if(t)throw t.error}}},kb=function(){function e(){var e=this;this.debug=!1,this.debugCallback=function(t,n){if(e.debug){var r=performance.now();n();var o=performance.now();console.log(t,"".concat(o-r," ms"))}else n()},this.logger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.debug&&console.log.apply(console,nb([t],tb(n),!1))}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setDebug=function(e){this.debug=e},e}(),Bb=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↓" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5">↓</tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↑" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5">↑</tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',GroupNone:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">\n    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">\n        <g id="编组-39" transform="translate(3064.500000, 667.000000)">\n            <g id="编组-36" transform="translate(80.500000, 44.000000)">\n                <g id="不排序" transform="translate(130.000000, 13.000000)">\n                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>\n                </g>\n            </g>\n        </g>\n    </g>q\n</g>\n</svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="16910">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="16911">\n\t</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="17026">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="17027">\n\t</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>编组 8备份 3</title>\n    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">\n                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>'}),Pb={},Fb=function(e,t){Pb[$p(e)]=t},jb=function(e){return Pb[$p(e)]};Ls(Bb).forEach((function(e){Fb(e,Bb[e])}));var zb,Gb,Hb,Wb="<svg",Ub={},Vb=function(e){function t(t){var n=e.call(this,t)||this;return n.hasSupportSuffix=function(e){return[".png",".jpg",".gif",".svg"].some((function(t){return null==e?void 0:e.endsWith(t)}))},n.render(),n}return Zy(t,e),t.prototype.getImage=function(e,t,n){var r=this;return new Promise((function(o,i){var a=new Image;a.onload=function(){Ub[t]=a,o(a)},a.onerror=function(e){i(e)};var l=jb(e);l&&(l.includes("data:image/svg+xml")||r.hasSupportSuffix(l))?a.src=l:l&&(n&&(l=(l=l.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),l=l.replace(Wb,"".concat(Wb,' fill="').concat(n,'"')),a.src="data:image/svg+xml;utf-8,".concat(encodeURIComponent(l)))}))},t.prototype.render=function(){var e=this,n=this.cfg,r=n.name,o=n.fill,i=Md(this.cfg),a=Qy(Qy({},wv(i,"fill")),{type:t.type}),l=new Lo({attrs:a}),s="".concat(r,"-").concat(o),c=Ub[s];c?(l.attr("img",c),this.addShape("image",l)):this.getImage(r,s,o).then((function(t){l.attr("img",t),e.addShape("image",l)})).catch((function(e){console.warn("GuiIcon ".concat(r," load error"),e)})),this.iconImageShape=l},t.type="__GUI_ICON__",t}(yo);!function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT"}(zb||(zb={})),function(e){e.SUM="SUM",e.MIN="MIN",e.MAX="MAX",e.AVG="AVG"}(Gb||(Gb={})),function(e){e.Row="row",e.Col="col",e.Series="series"}(Hb||(Hb={}));var Yb=function(){function e(){this.store=new Map}return e.prototype.set=function(e,t){return this.store.set(e,t)},e.prototype.get=function(e,t){var n;return null!==(n=this.store.get(e))&&void 0!==n?n:t},e.prototype.clear=function(){this.store.clear()},e.prototype.size=function(){return this.store.size},e}(),$b=function(e,t,n){return e.sort((function(e,r){n&&(e=n(e),r=n(r));var o=t.indexOf(e),i=t.indexOf(r);return-1===o&&-1===i?0:-1===o?1:-1===i?-1:o-i}))},Xb=function(e){return Ef(e,(function(e){return!Gp(e)&&"undefined"!==e}))},qb=function(e){var t;return null===(t=Ls(e))||void 0===t?void 0:t.reduce((function(t,n){var r=ic(e,n);return Array.isArray(r)?t=t.concat(qb(r)):null==t||t.push(r),t}),[])},Kb=function(e){var t=[];if(Array.isArray(e))for(var n=("undefined"in e),r=e.length+(n?1:0),o=0,i=function(){var n=o===e.length?e[void 0]:e[o];o++,n&&"undefined"in n?Ls(n).forEach((function(e){t.push(n[e])})):Array.isArray(n)?t.push.apply(t,nb([],tb(n),!1)):t.push(n)};o<r;)i();else t.push(e);return t},Zb=function(e,t){var n=[];return null==e||e.forEach((function(e,r){void 0===e&&t[r]&&n.push(t[r])})),n},Qb=function(e,t){return!Cf(e,(function(e){return t[e]}))};function Jb(e,t){var n=t.rows,r=t.columns;return Ng(e,(function(e,t){return Qb([].concat(n).concat(r),t)&&e.push(t),e}),[])}"KMBTP".split("");var eC=function(e){return Number.parseFloat((ga(e)||0).toPrecision(16))},tC=function(e,t,n){if(void 0===n&&(n=0),!Object.values(e).find((function(e){return e>0})))return e;var r=Qy({},e);r.frozenColCount>=t&&(r.frozenColCount=t);var o=t-r.frozenColCount;r.frozenTrailingColCount>o&&(r.frozenTrailingColCount=o),r.frozenRowCount>=n&&(r.frozenRowCount=n);var i=n-r.frozenRowCount;return r.frozenTrailingRowCount>i&&(r.frozenTrailingRowCount=i),r};function nC(e,t,n){var r;return null===(r=null==e?void 0:e.addShape)||void 0===r?void 0:r.call(e,"rect",Qy({zIndex:1,attrs:t},n||{}))}function rC(e,t){var n;return null===(n=null==e?void 0:e.addShape)||void 0===n?void 0:n.call(e,"circle",{attrs:t})}function oC(e,t,n,r,o,i,a){var l;return!Mp(t)&&e&&tf(t,(function(t){e.contain(t)&&e.removeChild(t,!0)})),null===(l=null==e?void 0:e.addShape)||void 0===l?void 0:l.call(e,"text",{attrs:Qy(Qy({x:n,y:r,text:o},i),a)})}function iC(e,t,n){var r;return null===(r=null==e?void 0:e.addShape)||void 0===r?void 0:r.call(e,"line",{zIndex:100,attrs:Qy(Qy({},t),n)})}function aC(e,t,n){e&&Wg(e,"attrs.".concat(t),n)}function lC(e,t){var n=new Vb(t);return null==e||e.add(n),n}function sC(e,t,n,r,o){var i=new Vb(Qy(Qy({name:r?"Plus":"Minus"},t),{fill:n}));return Ca(o)&&i.on("click",o),null==e||e.add(i),i}var cC="s2-offscreen-canvas",uC=function(e){var t;return null!==(t=null==e?void 0:e.position)&&void 0!==t?t:"right"},dC=function(e,t){var n,r,o,i=e.data,a=e.encode,l=e.type,s=t.getMeta(),c=s.x,u=s.y,d=s.height,h=s.width,f=t.getStyle(uy.DATA_CELL),p=f.cell,v=f.miniChart,g=[],m=kf(i,(function(e){return g.push(null==e?void 0:e[a.y]),{x:e[a.x],y:e[a.y]}})),y=tv(g),b=dv(g),C=y-b,w=c+p.padding.left,x=c+h-p.padding.right,E=u+p.padding.top,S=u+d-p.padding.bottom,L=S-E,O=l===ni.Bar?(x-w-(g.length-1)*(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding))/g.length+(null===(r=null==v?void 0:v.bar)||void 0===r?void 0:r.intervalPadding):null!==(o=(x-w)/(g.length-1))&&void 0!==o?o:0,I=[],_=kf(m,(function(e,t){var n,r,o=w+t*O;if(r=0!==C?S-((null==e?void 0:e.y)-b)/C*L:b>0?E:S,l===ni.Bar){var i=void 0,a=void 0;b<0&&y>0&&0!==C?(i=S-(0-b)/C*L,a=Math.abs(r-i),(null==e?void 0:e.y)<0&&(r=i)):(i=b<0?E:S,a=0===(C=tv([Math.abs(y),Math.abs(b)]))?L:Math.abs((null==e?void 0:e.y)-0)/C*L,r=i);var s=O-(null===(n=null==v?void 0:v.bar)||void 0===n?void 0:n.intervalPadding);I.push([s,a])}return[o,r]}));return{points:_,box:I}},hC=function(e,t,n){var r=Number(t)-Number(e);return Number.isNaN(r)||Number(e)<0?n.bad:r<=.1?n.good:r>.1&&r<=.2?n.satisfactory:n.bad},fC=function(e,t){switch(null==t?void 0:t.type){case ni.Line:!function(e,t){if(!Mp(null==e?void 0:e.data)&&!Mp(t)){var n=t.getStyle(uy.DATA_CELL).miniChart.line,r=n.point,o=n.linkLine,i=dC(e,t).points;!function(e,t){var n;null===(n=null==e?void 0:e.addShape)||void 0===n||n.call(e,"polyline",{attrs:t})}(t,{points:i,stroke:o.fill,lineWidth:o.size,opacity:o.opacity});for(var a=0;a<i.length;a++)rC(t,{x:i[a][0],y:i[a][1],r:r.size,fill:r.fill,fillOpacity:r.opacity})}}(t,e);break;case ni.Bar:!function(e,t){if(!Mp(null==e?void 0:e.data)&&!Mp(t))for(var n=t.getStyle(uy.DATA_CELL).miniChart.bar,r=dC(e,t),o=r.points,i=r.box,a=0;a<o.length;a++)nC(t,{x:o[a][0],y:o[a][1],width:i[a][0],height:i[a][1],fill:n.fill,fillOpacity:n.opacity})}(t,e);break;default:!function(e,t){var n;if(!Mp(e)){var r=t.getStyle(uy.DATA_CELL),o=r.miniChart.bullet,i=t.getMeta(),a=i.x,l=i.y,s=i.height,c=i.width,u=i.spreadsheet,d=o.progressBar,h=o.comparativeMeasure,f=o.rangeColors,p=o.backgroundColor,v=e.measure,g=e.target,m=Math.max(Number(v),0),y=Math.max(Number(g),0),b=function(e,t){var n,r;void 0===t&&(t={min:0,max:0});var o=Number(e);if(Number.isNaN(o))return e;var i=null!==(n=null==t?void 0:t.min)&&void 0!==n?n:t,a=null!==(r=null==t?void 0:t.max)&&void 0!==r?r:t;return new Intl.NumberFormat("en-US",{minimumFractionDigits:i,maximumFractionDigits:a,useGrouping:!1,style:"percent"}).format(o)}(v,2),C=(null==d?void 0:d.widthPercent)>1?(null==d?void 0:d.widthPercent)/100:null==d?void 0:d.widthPercent,w=r.cell.padding,x=c-w.left-w.right,E=C*x,S=x-E,L=a+c-w.right-E,O=l+s/2-d.height/2;nC(t,{x:L,y:O,width:E,height:d.height,fill:p,textBaseline:r.text.textBaseline});var I=ic(t.getMeta(),"spreadsheet.options.bullet.getRangeColor"),_=Math.max(Math.min(E*m,E),0);nC(t,{x:L,y:O+(d.height-d.innerHeight)/2,width:_,height:d.innerHeight,fill:null!==(n=null==I?void 0:I(m,y))&&void 0!==n?n:hC(m,y,f)});var T=L+E*y;iC(t,{x1:T,y1:l+(s-h.height)/2,x2:T,y2:l+(s-h.height)/2+h.height},{stroke:(null==h?void 0:h.fill)||(null==h?void 0:h.color),lineWidth:h.width,opacity:null==h?void 0:h.opacity}),oC(t,[],L-w.right,l+s/2,wC({measureTextWidth:u.measureTextWidth,text:b,maxWidth:S-w.right,fontParam:r.text}),r.text)}}(t,e)}},pC=function(e,t){var n=e.x,r=e.y,o=e.width,i=e.height,a=o-(null==t?void 0:t.left)-(null==t?void 0:t.right),l=i-(null==t?void 0:t.top)-(null==t?void 0:t.bottom);return{x:n+(null==t?void 0:t.left),y:r+(null==t?void 0:t.top),width:a,height:l}},vC=function(e){return av({size:0,position:"right",margin:{left:0,right:0}},e)},gC=function(e,t){return e-(t=vC(t)).size-t.margin.right-t.margin.left},mC=function(e,t,n){var r=e.y,o=e.height;void 0===n&&(n=0);var i=0;switch(t){case"top":i=r;break;case"middle":i=r+o/2-n/2;break;default:i=r+o-n}return i},yC=function(e,t,n,r,o){void 0===n&&(n=0),void 0===o&&(o=1);var i,a,l=e.x,s=e.width,c=t.textAlign,u=t.textBaseline,d=vC(r),h=d.size,f=d.margin,p=d.position,v=o*(h+f.left)+(o?f.right:0);switch(c){case"left":i=l+("left"===p?v:0),a=l+("left"===p?f.left:n+f.left);break;case"center":var g=l+s/2-(v-("left"===p?f.left:f.right)+n)/2;i=g+n/2+("left"===p?v-f.left:0),a=g+("left"===p?0:n+f.left);break;default:i=l+s-("right"===p?v:0),a=l+s-("right"===p?v-f.left:n+v-f.left)}return{text:{x:i,y:mC(e,u,0)},icon:{x:a,y:mC(e,u,h)}}},bC=function(e,t,n){var r,o,i,a,l,s=t.x,c=t.y,u=t.width,d=t.height,h=n.horizontalBorderWidth,f=n.horizontalBorderColorOpacity,p=n.horizontalBorderColor,v=n.verticalBorderWidth,g=n.verticalBorderColor,m=n.verticalBorderColorOpacity;if(e===zb.TOP||e===zb.BOTTOM){var y;o=y=e===zb.TOP?c+v/2:c+d-v/2,a=y,r=s,i=s+u,l={lineWidth:h,stroke:p,strokeOpacity:f}}if(e===zb.LEFT||e===zb.RIGHT){var b;r=b=e===zb.LEFT?s+h/2:s+u-h/2,i=b,o=c,a=c+d,l={lineWidth:v,stroke:g,strokeOpacity:m}}return{position:{x1:r,x2:i,y1:o,y2:a},style:l}},CC=(Ks((function(e,t){if(void 0===e&&(e=""),!t)return 0;var n,r=(n=document.getElementById(cC),n||((n=document.createElement("canvas")).id=cC,n.style.display="none",document.body.appendChild(n),n)).getContext("2d"),o=t,i=o.fontSize,a=o.fontFamily,l=o.fontWeight,s=o.fontStyle,c=o.fontVariant;return r.font=[s,c,l,"".concat(i,"px"),a].join(" ").trim(),r.measureText("".concat(e)).width}),(function(e,t){return nb([e],tb(np(t)),!1).join("")})),function(e,t,n,r){var o,i=e(Ni,r);o=ep(t)?t:tc(t);var a,l,s=n,c=[];if(e(t,r)<=n)return t;for(var u=!0;u;){if((l=e(a=o.substr(0,16),r))+i>s&&l>s){u=!1;break}if(c.push(a),s-=l,!(o=o.substr(16)))return c.join("")}for(var d=!0;d;){if((l=e(a=o.substr(0,1),r))+i>s){d=!1;break}if(c.push(a),s-=l,!(o=o.substr(1)))return c.join("")}return"".concat(c.join(""),"...")}),wC=function(e){var t=e.measureTextWidth,n=e.text,r=e.maxWidth,o=e.fontParam,i=e.priorityParam,a=e.placeholder,l={},s=null!=a?a:Oi,c=Fp(n)||""===n?s:"".concat(n),u=i;if(o&&ta(o)?u=o:l=o||{},!u||!u.length)return CC(t,c,r,l);var d=[],h=[c];u.forEach((function(e){h.forEach((function(t,n){var r=-1,o=t.match(new RegExp(e));if(o){var i=o[0];r=o.index,d.push(i);var a=r+i.length,l=[t.slice(0,r),t.slice(a)].filter((function(e){return!!e}));h.splice.apply(h,nb([n,1],tb(l),!1))}}))})),h=d.concat(h);var f=c,p=t(Ni,l),v=r;return h.forEach((function(e){if(v<=0){var n=f.indexOf(e),r=f.slice(n-3,n);if(r&&r!==Ni){var o=t(e,l);f=f.replace(e,o>p?Ni:e)}else f=f.replace(e,"");v-=p}else if(o=t(e,l),v<o&&o>p){var i=CC(t,e,v,l);f=f.replace(e,i),v=0}else v-=o})),f},xC=function(e){return kp(e)?e>=0:!!e&&!Mm(e).startsWith("-")},EC=function(e,t,n,r){void 0===r&&(r="left");var o=t.right,i=t.left,a=n||0;return"left"===r?e+o/2+a:"right"===r?e-o/2-a:e+i/2+a},SC=function(e){var t=e.rowIndex,n=e.colIndex,r=e.meta,o=e.data,i=e.textStyle,a=e.textCondition,l=i.fill;return(null==a?void 0:a.mapping)&&(l=null==a?void 0:a.mapping(o,{rowIndex:t,colIndex:n,meta:r}).fill),Qy(Qy({},i),{fill:l})},LC=function(e,t){return Ca(t)?t(e):t},OC=function(e,t,n){var r,o,i,a;void 0===n&&(n=!0);var l=e.getContentArea(),s=l.x,c=l.y,u=l.height,d=l.width,h=t||e.getMeta().fieldValue,f=h.values,p=e.getMeta().spreadsheet,v=p.options,g=p.measureTextWidth,m=v.style.cellCfg.valuesCfg,y=null===(o=null===(r=null==v?void 0:v.conditions)||void 0===r?void 0:r.text)||void 0===o?void 0:o[0],b=null===(a=null===(i=null==v?void 0:v.conditions)||void 0===i?void 0:i.icon)||void 0===a?void 0:a[0];if(ta(f)){var C=null==m?void 0:m.widthPercent,w=0;if(null==h?void 0:h.label){var x=e.getStyle(uy.DATA_CELL).bolderText;oC(e,[],s,c+(w=u/(f.length+1))/2,wC({measureTextWidth:g,text:h.label,maxWidth:d,fontParam:x}),x)}for(var E,S=function(e){var t,n,r=e.getMeta().isTotals,o=null===(n=(t=e).isMeasureField)||void 0===n?void 0:n.call(t),i=e.getStyle(o?uy.COL_CELL:uy.DATA_CELL);return{cellStyle:i,textStyle:o?i.measureText:r?i.bolderText:i.text}}(e),L=S.cellStyle,O=S.textStyle,I=null==L?void 0:L.icon,_=b&&b.mapping&&{size:null==I?void 0:I.size,margin:null==I?void 0:I.margin,position:null==b?void 0:b.position},T=function(e,t,n){for(var r,o,i,a=e.x,l=e.y,s=e.width,c=e.height/Yg(t),u=[],d=0,h=kf(n,(function(e){return e>1?e/100:e})),f=0;f<Yg(t);f++){o=l+c*f;var p=[];r=a,d=0;for(var v=0;v<Yg(t[f]);v++)i=Mp(h)?s/Yg(t[0]):s*h[v],r=EC(a,{left:0,right:0},d,"left"),d+=i,p.push({x:r,y:o,width:i,height:c});u.push(p)}return u}({x:s,y:c+w,height:u-w,width:d},f,C),A=0;A<f.length;A++)for(var M=Md(f[A]),N=0;N<M.length;N++){E=M[N];var R=n?SC({rowIndex:A,colIndex:N,meta:null==e?void 0:e.getMeta(),data:E,textStyle:O,textCondition:y}):O,D=(null==e?void 0:e.getMeta().spreadsheet.options).placeholder,k=LC(null==e?void 0:e.getMeta(),D),B=gC(T[A][N].width,I),P=wC({measureTextWidth:g,text:E,maxWidth:B,fontParam:R,placeholder:k}),F=g(P,O),j=yC(T[A][N],O,F,_,b?1:0);if(oC(e,[],j.text.x,j.text.y,P,R),b&&n){var z=null==b?void 0:b.mapping(E,{rowIndex:A,colIndex:N,meta:null==e?void 0:e.getMeta()});z&&lC(e,Qy(Qy({},j.icon),{name:z.icon,width:null==I?void 0:I.size,height:null==I?void 0:I.size,fill:z.fill}))}}}else fC(e,f)},IC=function(e,t){return void 0===t&&(t=1),e.width*t},_C=function(e){try{return JSON.parse(e)}catch(e){return null}};function TC(e,t){return!(!e||!t)&&String(e).toLowerCase()===String(t).toLowerCase()}var AC,MC=function(e,t){var n=e.getColumnNodes().find((function(e){return e.id===t}));return e.isPivotMode()?null==n?void 0:n.value:null==n?void 0:n.field},NC=function(e,t){var n=t.getColumnNodes().find((function(t){return t.colIndex===e})),r=MC(t,n.id);return t.options.interaction.copyWithFormat?t.dataSet.getFieldFormatter(r):function(e){return e}},RC=function(e,t,n){return NC(e.colIndex,n)(function(e,t,n){var r;if(n.isPivotMode()){var o=tb(function(e,t){var n=e.rowIndex,r=e.colIndex;return[t.getRowNodes().find((function(e){return e.rowIndex===n})),t.getColumnNodes().find((function(e){return e.colIndex===r}))]}(e,n),2),i=o[0],a=o[1];return n.dataSet.getCellData({query:Qy(Qy({},i.query),a.query),rowNode:i,isTotals:i.isTotals||i.isTotalMeasure||a.isTotals||a.isTotalMeasure})[ri]}var l=function(e,t){var n=t.getColumnNodes().find((function(t){return t.colIndex===e}));return MC(t,n.id)}(e.colIndex,n);return null===(r=t[e.rowIndex])||void 0===r?void 0:r[l]}(e,t,n))},DC=function(e){return/\n/.test(e)?'"'+e.replace(/\r\n?/g,"\n").replace(/"/g,"'")+'"':e},kC=function(e,t){var n=e.split(Li);return t?n.slice(n.length-t):(n.shift(),n)};!function(e){e.PLAIN="text/plain",e.HTML="text/html"}(AC||(AC={}));var BC=function(e){return{type:AC.PLAIN,content:kf(e,(function(e){return e.join("\t")})).join("\r\n")}},PC=function(e){return{type:AC.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat((t=e,"tr",t.map((function(e){return"<".concat("tr",">").concat(function(e,t){return e.map((function(e){return"<".concat("td",">").concat(vf(e),"</").concat("td",">")})).join("")}(e),"</").concat("tr",">")})).join("")),"</tbody></table>")};var t},FC=function(e,t,n){var r,o,i,a,l,s,c=null!==(o=null===(r=e[0])||void 0===r?void 0:r.length)&&void 0!==o?o:0,u=null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0,d=null!==(l=null===(a=n[0])||void 0===a?void 0:a.length)&&void 0!==l?l:0,h=null!==(s=n.length)&&void 0!==s?s:0,f=c+d,p=u+h,v=Array.from(Array(p),(function(){return new Array(f)}));return v=kf(v,(function(r,o){return kf(r,(function(r,i){return i>=0&&i<c&&o>=0&&o<u?"":i>=c&&i<=f&&o>=0&&o<u?t[o][i-c]:i>=0&&i<c&&o>=u&&o<p?e[o-u][i]:i>=c&&i<=f&&o>=u&&o<p?n[o-u][i-c]:void 0}))})),[BC(v),PC(v)]},jC=function(e,t,n){return kf(e,(function(e){return t.map((function(t){var r=n.dataSet.getCellData({query:Qy(Qy({},e.query),t.query),rowNode:e,isTotals:e.isTotals||e.isTotalMeasure||t.isTotals||t.isTotalMeasure});return NC(t.colIndex,n)(r[ri])}))}))};function zC(e,t,n){return e.options.interaction.copyWithHeader?function(e,t,n){var r=kf(t,(function(e){return kC(e.id)})),o=iy.apply(void 0,nb([],tb(kf(n,(function(e){return kC(e.id)}))),!1)),i=jC(t,n,e);return FC(r,o,i)}(e,t,n):function(e,t,n){var r=jC(t,n,e);return[BC(r),PC(r)]}(e,t,n)}var GC=function(e,t,n){return t.isPivotMode()?function(e,t){var n=e.getRowNodes().filter((function(e){return e.isLeaf})),r=e.getColumnNodes().filter((function(e){return e.isLeaf}));return zC(e,n,t.length?t.reduce((function(e,t){return e.push.apply(e,nb([],tb(r.filter((function(e){return e.id.startsWith(t.id)}))),!1)),e}),[]):r)}(t,n):function(e,t){var n=e.dataSet.getDisplayDataSet(),r=t.length?t.map((function(t){return{field:MC(e,t.id),formatter:NC(t.colIndex,e)}})):e.dataCfg.fields.columns.map((function(t){return e.getColumnNodes().find((function(e){return e.field===t}))})).map((function(t){return{field:MC(e,t.id),formatter:NC(t.colIndex,e)}})),o=n.map((function(e){return r.map((function(t){var n=t.field,r=t.formatter;return DC(r(e[n]))}))}));return[BC(o),PC(o)]}(t,n)};function HC(e,t){var n,r,o=t.filter((function(e){return e.type===uy.COL_CELL})),i=t.filter((function(e){return e.type===uy.ROW_CELL})),a=e.dataSet.getDisplayDataSet();if(!e.isPivotMode()||!e.isHierarchyTreeType()){if(e.interaction.getCurrentStateName()===cy.ALL_SELECTED)r=GC(0,e,[]);else if(o.length)r=GC(0,e,o);else if(i.length)r=function(e,t,n){return t.isPivotMode()?function(e,t){var n=e.getRowNodes().filter((function(e){return e.isLeaf})),r=e.getColumnNodes().filter((function(e){return e.isLeaf}));return zC(e,t.reduce((function(e,t){return e.push.apply(e,nb([],tb(n.filter((function(e){return e.id.startsWith(t.id)}))),!1)),e}),[]),r)}(t,n):function(e,t){var n=e.dataSet.getDisplayDataSet().filter((function(e,n){return t.map((function(e){return e.rowIndex})).includes(n)})).map((function(t){return Object.keys(t).map((function(t){return e.getColumnNodes().find((function(e){return e.field===t}))})).filter(Boolean).map((function(n){return DC(NC(n.colIndex,e)(t[n.field]))}))}));return[BC(n),PC(n)]}(t,n)}(0,e,i);else{if(!t.length)return;var l=function(e){if(!(null==e?void 0:e.length))return[];var t=tb([{row:1/0,col:1/0},{row:0,col:0}],2),n=t[0],r=t[1];e.forEach((function(e){var t=e.rowIndex,o=e.colIndex;n.col=Math.min(o,n.col),n.row=Math.min(t,n.row),r.col=Math.max(o,r.col),r.row=Math.max(t,r.row)}));var o=tb([r.row-n.row+1,r.col-n.col+1],2),i=o[0],a=o[1],l=new Array(i).fill("").map((function(){return new Array(a).fill("")}));return e.forEach((function(e){var t=e.rowIndex,r=e.colIndex,o=tb([t-n.row,r-n.col],2),i=o[0],a=o[1];l[i][a]=e})),l}(t);r=(null===(n=e.options.interaction)||void 0===n?void 0:n.copyWithHeader)?function(e,t,n){var r=iy.apply(void 0,nb([],tb(kf(e[0],(function(e){var t,n,r=null!==(n=null===(t=e.id.split(Oi))||void 0===t?void 0:t[1])&&void 0!==n?n:"";return kC(r)}))),!1)),o=kf(e,(function(e){var t,n,r=null!==(n=null===(t=e[0].id.split(Oi))||void 0===t?void 0:t[0])&&void 0!==n?n:"";return kC(r)})),i=kf(e,(function(e){return kf(e,(function(e){return RC(e,t,n)}))}));return FC(o,r,i)}(l,a,e):function(e,t,n){var r=t.map((function(t){return t.map((function(t){return DC(RC(t,e,n))}))}));return[BC(r),PC(r)]}(a,l,e)}return r}}function WC(e){return e?'"'.concat("string"==typeof e?e.replace(/"/g,'""'):e,'"'):e}var UC=function(e){return new Promise((function(t,n){var r;r=Array.isArray(e)?ic(e.filter((function(e){return e.type===AC.PLAIN})),"[0].content",""):e.content||"";var o=document.createElement("textarea");o.value=r,document.body.appendChild(o),o.focus({preventScroll:!0}),o.select();var i=document.execCommand("copy");document.body.removeChild(o),i?t():n()}))},VC=function(e,t){var n;return void 0===t&&(t=!1),n="string"==typeof e?{content:e,type:AC.PLAIN}:e,navigator.clipboard&&window.ClipboardItem&&!t?function(e){return navigator.clipboard.write([new ClipboardItem([].concat(e).reduce((function(e,t){var n,r=t.type,o=t.content;return Qy(Qy({},e),((n={})[r]=new Blob([o],{type:r}),n))}),{}))]).catch((function(){return UC(e)}))}(n):UC(n)},YC=function(e,t){try{var n=document.createElement("a");n.download="".concat(t,".csv");var r=new Blob(["\ufeff".concat(e)],{type:"text/csv;charset=utf-8"});n.href=URL.createObjectURL(r),n.click(),URL.revokeObjectURL(n.href)}catch(e){console.error(e)}},$C=function(e,t,n){if(!e)return"";var r=e.fieldValue,o=e.valueField,i=e.data;return da(r)?function(e){var t=(null==e?void 0:e.label)?[null==e?void 0:e.label]:[],n=null==e?void 0:e.values;return Mp(n)||tf(n,(function(e){t.push(e.join(" "))})),t.join("$")}(r):n?t.dataSet.getFieldFormatter(o)(r,i):"".concat(r)},XC=function(e,t,n,r){var o=[];if(e){var i=e.fieldValue,a=e.valueField,l=e.data;if(da(i))return o=function(e,t){var n,r,o,i;return t?null===(i=null==e?void 0:e.values)||void 0===i?void 0:i[0]:null!==(r=null===(n=null==e?void 0:e.originalValues)||void 0===n?void 0:n[0])&&void 0!==r?r:null===(o=null==e?void 0:e.values)||void 0===o?void 0:o[0]}(i,r),o;if(Fp(i)&&n.length>1)return o.push.apply(o,nb([],tb(n),!1)),o;if(r){var s=t.dataSet.getFieldFormatter(a);o.push(s(i,l))}else o.push(i)}else o.push.apply(o,nb([],tb(n),!1));return o.join("    ")},qC=function(e){var t=_C(e);return ta(t)?t:e},KC=function(e,t,n){var r=qC(t.label),o=ta(r)?r.length:1,i=n.options.placeholder,a=Ca(i)?i(e):i;return Array(o).fill(a)},ZC=function(e){var t,n,r,o,i=null===(r=null===(n=null===(t=e.spreadsheet)||void 0===t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter)||void 0===r?void 0:r.call(n,e.field);return null!==(o=null==i?void 0:i(e.label))&&void 0!==o?o:e.label},QC=function(e){var t=[],n=function(e){if(e.id!==Si){var r=ZC(e);return t.unshift(r),(null==e?void 0:e.parent)?n(e.parent):void 0}};return n(e),t},JC=function(e,t,n){var r,o,i,a,l,s=function(e){var t,n;return"object"==typeof e?{isFormatHeader:null!==(t=e.isFormatHeader)&&void 0!==t&&t,isFormatData:null!==(n=e.isFormatData)&&void 0!==n&&n}:{isFormatHeader:null!=e&&e,isFormatData:null!=e&&e}}(n),c=s.isFormatHeader,u=s.isFormatData,d=null===(l=null==e?void 0:e.facet)||void 0===l?void 0:l.layoutResult,h=d.rowsHierarchy,f=d.rowLeafNodes,p=d.colLeafNodes,v=d.getCellMeta,g=h.maxLevel,m=e.dataCfg.fields.valueInCols,y=h.sampleNodesForAllLevels.map((function(t){return e.dataSet.getFieldName(t.key)})),b=f.reduce((function(e,t){var n,r=(null!==(n=t.level)&&void 0!==n?n:0)+1;return r>e?r:e}),0),C=[],w=0;if(e.isPivotMode()){var x=f.filter((function(e){return 0!==e.height}));try{for(var E=eb(x),S=E.next();!S.done;S=E.next()){var L=S.value,O=[];c?O=QC(L):(L.label=Mm(null==L?void 0:L.label),O=L.id.replace(Ii,"").split(Li));var I=g+1-O.length;I>0&&O.push.apply(O,nb([],tb(new Array(I)),!1));var _=e.dataSet.getFieldName($h(O));O[O.length-1]=_;try{for(var T=(i=void 0,eb(p)),A=T.next();!A.done;A=T.next()){var M=A.value;if(m){var N=v(L.rowIndex,M.colIndex);O.push($C(N,e,u))}else{N=v(L.rowIndex,M.colIndex);var R=KC(N,M,e),D=XC(N,e,R,u);ta(D)?O=O.concat.apply(O,nb([],tb(D),!1)):O.push(D)}}}catch(e){i={error:e}}finally{try{A&&!A.done&&(a=T.return)&&a.call(T)}finally{if(i)throw i.error}}w=tv([O.length,w]);var k=O.map((function(e){return WC(e)})).join(t);C.push(k)}}catch(e){r={error:e}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(r)throw r.error}}}else C=function(e,t,n){var r,o,i,a=e.dataSet.getDisplayDataSet(),l=(null===(i=e.dataCfg)||void 0===i?void 0:i.fields).columns,s=[],c=function(r,o){var i=[];i=n?l.map((function(t){return WC(e.dataSet.getFieldFormatter(t)(o[t],o))})):l.map((function(e){return WC(o[e])})),e.options.showSeriesNumber&&(i=[WC(r+1)].concat(i)),s.push(i.join(t))};try{for(var u=eb(a.entries()),d=u.next();!d.done;d=u.next()){var h=tb(d.value,2);c(h[0],h[1])}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return s}(e,t,u);var B=[];if(Mp(p)&&!e.isPivotMode())B=[y];else{var P=0,F=Md(p).map((function(t){for(var n=t,r=[];void 0!==n.level;){var o=qC(n.label);ta(o)?P=tv([P,Yg(o)]):o=c&&e.isPivotMode()?ZC(n):o,r.push(o),n=n.parent}return r}));P>1&&(F=function(e){return e.map((function(e){return e.map((function(t){return ta(t)?t:nb([t],tb(new Array(e[0].length-1)),!1)}))}))}(F));for(var j=tv(F.map((function(e){return e.length}))),z=[],G=function(t){var n=F.map((function(e){return e.length<j?nb(nb([],tb(new Array(j-e.length)),!1),tb(e),!1):e})).map((function(e){return e[t]})).map((function(t){return e.dataSet.getFieldName(t)}));z.push(dc(n))},H=j-1;H>=0;H-=1)G(H);B=z.map((function(t,n){var r,o;if(e.isPivotMode()){var i=e.facet.cornerHeader.cfg,a=i.columns,l=i.rows,s=i.data.filter((function(e){return e.cornerType===Hb.Col}));if(n<z.length-1)return nb(nb(nb([],tb(Array(g).fill("")),!1),[(null===(o=s.find((function(e){return e.field===a[n]})))||void 0===o?void 0:o.label)||""],!1),tb(t),!1);var c=l.slice(0,b);return c.length<b&&c.unshift.apply(c,nb([],tb(Array(b-c.length).fill("")),!1)),nb(nb([],tb(c.map((function(t){return e.dataSet.getFieldName(t)||""}))),!1),tb(t),!1)}return n<z.length?(r=Array(b).fill("")).concat.apply(r,nb([],tb(t),!1)):y.concat.apply(y,nb([],tb(t),!1))}))}var W=B.map((function(e){var n=w-e.length;return n>0&&e.unshift.apply(e,nb([],tb(new Array(n)),!1)),e.map((function(e){return WC(e)})).join(t)})).join("\r\n");return[W].concat(C).join("\r\n")},ew=function(e){var t,n,r,o,i,a,l=null===(r=null===(n=null===(t=e.target)||void 0===t?void 0:t.attrs)||void 0===n?void 0:n.appendInfo)||void 0===r?void 0:r.cellData,s=null===(i=(o=e.target).get)||void 0===i?void 0:i.call(o,"parent");return{target:s,viewMeta:(null===(a=null==s?void 0:s.getMeta)||void 0===a?void 0:a.call(s))||l,event:e}},tw=function(e,t,n){var r,o=e.split(Li);if(n)r=[e];else{r=[Rb(o[0],o[1])];for(var i=2;i<o.length;i+=1)r.push(Rb(r[i-2],o[i]))}var a=Ef(t,(function(e){var t;return r.includes(null===(t=e.getMeta())||void 0===t?void 0:t.id)}));return a},nw=function(e,t,n){e&&tf(tw(e,t),(function(e){e.updateByState(n)}))},rw=function(e){function t(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=e.call(this,{})||this;return i.actualTextWidth=0,i.stateShapes=new Map,i.meta=t,i.spreadsheet=n,i.theme=n.theme,i.conditions=i.spreadsheet.options.conditions,i.handleRestOptions.apply(i,nb([],tb(r),!1)),i.initCell(),i}return Zy(t,e),t.prototype.getMeta=function(){return this.meta},t.prototype.setMeta=function(e){this.meta=e},t.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},t.prototype.getTextAndIconPosition=function(e){void 0===e&&(e=1);var t=this.getTextStyle(),n=this.getIconStyle();return yC(this.getContentArea(),t,this.actualTextWidth,n,e)},t.prototype.getActualText=function(){return this.actualText},t.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.getStyle=function(e){return ic(this.theme,e||this.cellType)},t.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},t.prototype.shouldDrawResizeAreaByType=function(e,t){var n=this.spreadsheet.options.interaction.resize;return Ip(n)?n:Ca(n.visible)?n.visible(t):n[e]},t.prototype.getCellArea=function(){var e=this.meta;return{x:e.x,y:e.y,height:e.height,width:e.width}},t.prototype.getContentArea=function(){var e=this.getStyle()||this.theme.dataCell,t=(null==e?void 0:e.cell).padding;return pC(this.getCellArea(),t)},t.prototype.getIconPosition=function(e){return void 0===e&&(e=1),this.getTextAndIconPosition(e).icon},t.prototype.drawTextShape=function(){var e=this.getFormattedFieldValue().formattedValue,t=this.getMaxTextWidth(),n=this.getTextStyle(),r=this.spreadsheet,o=r.options.placeholder,i=r.measureTextWidth,a=LC(this,o),l=wC({measureTextWidth:i,text:e,maxWidth:t,fontParam:n,placeholder:a});this.actualText=l,this.actualTextWidth=i(l,n);var s=this.getTextPosition();this.textShape=oC(this,[this.textShape],s.x,s.y,l,n)},t.prototype.drawLinkFieldShape=function(e,t){if(e){if(!xb(this.spreadsheet.options.style.device)){var n=this.getTextStyle(),r=this.getTextPosition().x;"center"===n.textAlign?r-=this.actualTextWidth/2:"right"===n.textAlign&&(r-=this.actualTextWidth);var o=this.textShape.getBBox().maxY;this.linkFieldShape=iC(this,{x1:r,y1:o+1,x2:r+this.actualTextWidth,y2:o+1},{stroke:t,lineWidth:1})}this.textShape.attr({fill:t,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},t.prototype.updateByState=function(e,t){var n=this;this.spreadsheet.interaction.setInteractedCells(t),tf(ic(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e)),(function(e,t){Ls(Sv(jy,(function(e){return op(e,t)}))).forEach((function(r){var o=n.stateShapes.has(r),i=o?n.stateShapes.get(r):n[r];o&&!i.get("visible")&&i.set("visible",!0),"interactiveBorderShape"===r&&"borderWidth"===t&&kp(e)&&tf(n.getInteractiveBorderShapeStyle(e),(function(e,t){aC(i,t,e)})),aC(i,Fy[t],e)}))}))},t.prototype.getInteractiveBorderShapeStyle=function(e){var t=this.getCellArea(),n=t.x,r=t.y,o=t.height,i=t.width,a=this.theme.dataCell.cell,l=a.horizontalBorderWidth,s=a.verticalBorderWidth;return{x:n+s/2+e/2,y:r+l/2+e/2,width:i-s-e,height:o-l-e}},t.prototype.hideInteractionShape=function(){this.stateShapes.forEach((function(e){aC(e,Fy.backgroundOpacity,0),aC(e,Fy.backgroundColor,"transparent"),aC(e,Fy.borderOpacity,0),aC(e,Fy.borderWidth,1),aC(e,Fy.borderColor,"transparent")}))},t.prototype.clearUnselectedState=function(){aC(this.backgroundShape,Fy.backgroundOpacity,1),aC(this.textShape,Fy.textOpacity,1),aC(this.linkFieldShape,Fy.opacity,1)},t.prototype.getTextShape=function(){return this.textShape},Object.defineProperty(t.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),t.prototype.drawConditionIconShapes=function(){var e,t=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.icon);if(t&&t.mapping){var n=this.mappingValue(t),r=this.getIconPosition(),o=this.theme.dataCell.icon.size;Mp(null==n?void 0:n.icon)||(this.conditionIconShape=lC(this,Qy(Qy({},r),{name:n.icon,width:o,height:o,fill:n.fill})))}},t.prototype.getTextConditionFill=function(e){var t,n,r=e.fill,o=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.text);return(null==o?void 0:o.mapping)&&(r=(null===(n=this.mappingValue(o))||void 0===n?void 0:n.fill)||e.fill),r},t}(yo),ow=function(e,t){return t?t(e[oi],e[ri]):e[ri]},iw=function(e,t){var n=t.getMeta().id;return e.some((function(e){return Np(e.id,n)}))},aw=function(e,t){return"".concat(e,"-").concat(t)},lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),t.prototype.handleByStateName=function(e,t){iw(e,this)&&this.updateByState(t)},t.prototype.handleSearchResult=function(e){iw(e,this)&&(If(e,(function(e){return null==e?void 0:e.isTarget})).id===this.getMeta().id?this.updateByState(cy.HIGHLIGHT):this.updateByState(cy.SEARCH_RESULT))},t.prototype.handleSelect=function(e){var t;switch(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.type){case uy.COL_CELL:this.changeRowColSelectState("colIndex");break;case uy.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case uy.DATA_CELL:iw(e,this)?this.updateByState(cy.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(cy.UNSELECTED)}},t.prototype.handleHover=function(e){var t=Rf(e);if(t.type===uy.DATA_CELL){if(this.spreadsheet.options.interaction.hoverHighlight){var n=this.meta.colIndex,r=this.meta.rowIndex;n===(null==t?void 0:t.colIndex)||r===(null==t?void 0:t.rowIndex)?this.updateByState(cy.HOVER):this.hideInteractionShape()}Np(t.id,this.getMeta().id)&&this.updateByState(cy.HOVER_FOCUS)}else this.hideInteractionShape()},t.prototype.update=function(){var e=this.spreadsheet.interaction.getCurrentStateName(),t=this.spreadsheet.interaction.getCells();if(e!==cy.ALL_SELECTED){if(!Mp(t)&&e)switch(e){case cy.SELECTED:this.handleSelect(t);break;case cy.HOVER_FOCUS:case cy.HOVER:this.handleHover(t);break;case cy.SEARCH_RESULT:this.handleSearchResult(t);break;default:this.handleByStateName(t,e)}}else this.updateByState(cy.SELECTED)},t.prototype.setMeta=function(t){e.prototype.setMeta.call(this,t),this.initCell()},t.prototype.initCell=function(){this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},t.prototype.getDefaultTextFill=function(e){var t=e.fill,n=this.getBackgroundColor(),r=n.backgroundColor,o=n.intelligentReverseTextColor;return ib(r).getBrightness()<=220&&e.fill===Bi&&o&&(t=Pi),t},t.prototype.getTextStyle=function(){var e=this.meta.isTotals?this.theme.dataCell.bolderText:this.theme.dataCell.text,t=this.getTextConditionFill(Qy(Qy({},e),{fill:this.getDefaultTextFill(e)}));return Qy(Qy({},e),{fill:t})},t.prototype.getIconStyle=function(){var e,t=this.theme.dataCell.icon,n=t.size,r=t.margin,o=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.icon);return o&&o.mapping&&{size:n,margin:r,position:uC(o)}},t.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=function(e){var t,n,r,o,i,a;if(!Mp(e)){var l=e.getCellArea(),s=l.x,c=l.y,u=l.height,d=l.width,h=e.findFieldCondition(null===(t=e.cellConditions)||void 0===t?void 0:t.interval);if(h&&h.mapping){var f=e.mappingValue(h);if(!f)return;var p=f.isCompare?f:e.valueRangeByField,v=eC(p.minValue),g=eC(p.maxValue),m=eC(e.getMeta().fieldValue);if(m<v||m>g)return;var y=null!==(r=null===(n=e.getStyle().miniChart.interval)||void 0===n?void 0:n.height)&&void 0!==r?r:e.getStyle().cell.miniBarChartHeight,b=null!==(i=null===(o=e.getStyle().miniChart.interval)||void 0===o?void 0:o.fill)&&void 0!==i?i:e.getStyle().cell.miniBarChartFillColor,C=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),e=eC(e),t=eC(t);var n=e>=0,r=t>=0&&e<=0,o=r?0:n?e:t,i=t-e;return function(t){var a=n?0:1;return{zeroScale:r?Du(Math.abs(0-e)/i,0,1):a,scale:Du((t-o)/i,-1,1)}}}(v,g),w=C(m);return nC(e,{x:s+d*w.zeroScale,y:c+u/2-y/2,width:d*w.scale,height:y,fill:null!==(a=f.fill)&&void 0!==a?a:b})}}}(this)},t.prototype.shouldHideRowSubtotalData=function(){var e,t=(null!==(e=this.spreadsheet.options.totals)&&void 0!==e?e:{}).row,n=void 0===t?{}:t,r=this.meta.rowIndex,o=this.spreadsheet.facet.layoutResult.rowLeafNodes[r],i=!(null==o?void 0:o.isGrandTotals)&&(null==o?void 0:o.isTotals);return"tree"===this.spreadsheet.options.hierarchyType&&!n.showSubTotals&&i},t.prototype.getFormattedFieldValue=function(){var e=this.meta,t=e.rowId,n=e.valueField,r=e.fieldValue,o=e.data,i=this.spreadsheet.dataSet.getFieldMeta(t)?t:n;return{value:r,formattedValue:this.spreadsheet.dataSet.getFieldFormatter(i)(r,o,this.meta)}},t.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return gC(e,this.getIconStyle())},t.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},t.prototype.getBackgroundColor=function(){var e,t=this.getStyle().cell,n=t.crossBackgroundColor,r=t.backgroundColorOpacity,o=this.getStyle().cell.backgroundColor;if(n&&this.meta.rowIndex%2==0&&(o=n),this.shouldHideRowSubtotalData())return{backgroundColor:o,backgroundColorOpacity:r};var i=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.background),a=!1;if(i&&i.mapping){var l=this.mappingValue(i);l&&(o=l.fill,a=l.intelligentReverseTextColor)}return{backgroundColor:o,backgroundColorOpacity:r,intelligentReverseTextColor:a}},t.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),t=e.backgroundColor,n=e.backgroundColorOpacity;this.backgroundShape=nC(this,Qy(Qy({},this.getCellArea()),{fill:t,fillOpacity:n}))},t.prototype.drawInteractiveBorderShape=function(){var e=this.getCellArea(),t=e.x,n=e.y,r=e.height,o=e.width;this.stateShapes.set("interactiveBorderShape",nC(this,{x:t+1,y:n+1,width:o-2,height:r-2},{visible:!1}))},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",nC(this,Qy({},this.getCellArea()),{visible:!1}))},t.prototype.changeRowColSelectState=function(e){var t=this.spreadsheet.interaction,n=ic(this.meta,e),r=t.getState(),o=r.nodes,i=void 0===o?[]:o,a=r.cells,l=void 0===a?[]:a;nb(nb([],tb(i),!1),tb(l),!1).find((function(t){return ic(t,e)===n}))?this.updateByState(cy.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(cy.UNSELECTED):this.hideInteractionShape()},t.prototype.drawBorderShape=function(){var e=this;[zb.BOTTOM,zb.RIGHT].forEach((function(t){var n=bC(t,e.getCellArea(),e.getStyle().cell),r=n.position,o=n.style;iC(e,r,o)}))},t.prototype.findFieldCondition=function(e){var t=this;return Nf(e,(function(e){return e.field instanceof RegExp?e.field.test(t.meta.valueField):e.field===t.meta.valueField}))},t.prototype.mappingValue=function(e){var t=this.meta.fieldValue;return null==e?void 0:e.mapping(t,this.meta.data)},t.prototype.updateByState=function(t){if(e.prototype.updateByState.call(this,t,this),t===cy.UNSELECTED){var n=ic(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t));n&&(aC(this.conditionIntervalShape,Fy.backgroundOpacity,n.backgroundOpacity),aC(this.conditionIconShape,Fy.opacity,n.opacity))}},t.prototype.clearUnselectedState=function(){e.prototype.clearUnselectedState.call(this),aC(this.conditionIntervalShape,Fy.backgroundOpacity,1),aC(this.conditionIconShape,Fy.opacity,1)},t.prototype.drawLeftBorder=function(){var e=bC(zb.LEFT,this.getCellArea(),this.getStyle().cell);iC(this,e.position,e.style)},t}(rw),sw=function(e){function t(t,n,r){return e.call(this,r,t,n)||this}return Zy(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=tb(e,1),r=n[0];this.cells=r},Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.MERGED_CELL},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.initCell=function(){this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},t.prototype.drawBackgroundShape=function(){var e=uw(this.cells),t=this.theme.dataCell.cell;this.backgroundShape=function(e,t){var n;return null===(n=null==e?void 0:e.addShape)||void 0===n?void 0:n.call(e,"polygon",{attrs:t})}(this,{points:e,stroke:t.horizontalBorderColor,fill:t.backgroundColor,lineHeight:t.horizontalBorderWidth})},t.prototype.drawTextShape=function(){Mp(this.meta)||(da(this.meta.fieldValue)?OC(this):e.prototype.drawTextShape.call(this))},t}(lw),cw=function(e,t){return If(t,(function(t){return Np(t[0],e[1])}))},uw=function(e){var t,n,r=[];e.forEach((function(e){var t=e.getMeta(),n=t.x,o=t.y,i=t.width,a=t.height;r=r.concat(function(e,t,n,r){var o=[e,t],i=[e+n,t],a=[e+n,t+r],l=[e,t+r];return[[o,i],[i,a],[a,l],[l,o]]}(n,o,i,a))})),n=[],tf(t=r,(function(e){var r=[e[1],e[0]];JSON.stringify(t).includes(JSON.stringify(r))||n.push(e)}));for(var o=[],i=(r=n)[0],a=i,l=[];!Np(i,l);)o=o.concat(a),a=l=cw(a,r);return o},dw=function(e,t,n){var r;void 0===n&&(n=[]);var o=function(e,t){var n,r=[],o=[];return tf(e,(function(e){var i=If(t,(function(t){var n,r=null===(n=null==t?void 0:t.getMeta)||void 0===n?void 0:n.call(t);if((null==r?void 0:r.colIndex)===(null==e?void 0:e.colIndex)&&(null==r?void 0:r.rowIndex)===(null==e?void 0:e.rowIndex))return t}));i?(r.push(i),n=(null==e?void 0:e.showText)?null==i?void 0:i.getMeta():n):o.push(e)})),{cells:r,invisibleCellInfo:o,cellsMeta:n}}(n,e),i=o.cellsMeta,a=o.cells,l=o.invisibleCellInfo,s=i,c=a;if((null==l?void 0:l.length)>0&&l.length<n.length){var u=function(e,t){var n,r=[];return tf(e,(function(e){var o,i,a,l=null===(i=null===(o=null==t?void 0:t.facet)||void 0===o?void 0:o.layoutResult)||void 0===i?void 0:i.getCellMeta(e.rowIndex,e.colIndex);if(l){var s=null===(a=null==t?void 0:t.facet)||void 0===a?void 0:a.cfg.dataCell(l);n=(null==e?void 0:e.showText)?l:n,r.push(s)}})),{cells:r,cellsMeta:n}}(l,t),d=u.cells,h=u.cellsMeta;s=s||h,c=a.concat(d)}return Mp(a)||s||(s=null===(r=c[0])||void 0===r?void 0:r.getMeta()),{cells:c,viewMeta:s}},hw=function(e,t){return Zh(e,t,(function(e,t){return Np(e.viewMeta.id,t.viewMeta.id)}))},fw=function(e){return e.includes(Li)?"id":"field"},pw=function(e,t){void 0===t&&(t=[]);var n=e.getInitColumnLeafNodes();return Rd(t.map((function(e){var t=fw(e);return n.find((function(n){return n[t]===e}))})))},vw=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=function(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),e.setOptions({interaction:{hiddenColumnFields:t}}),e.interaction.reset(),e.store.set("hiddenColumnsDetail",n),e.render(!1,{reBuildHiddenColumnsDetail:!1})};if(Mp(t)&&n)r();else{var o=e.store.get("hiddenColumnsDetail",[]),i=e.options.interaction.hiddenColumnFields;if(!Np(t,i)||n){var a=Wm(nb(nb([],tb(t),!1),tb(i),!1)),l=function(e,t){if(void 0===t&&(t=[]),Mp(t))return{prev:null,next:null};var n=e.getInitColumnLeafNodes(),r=pw(e,t).map((function(e){return null==e?void 0:e.colIndex})),o=Math.max.apply(Math,nb([],tb(r),!1)),i=Math.min.apply(Math,nb([],tb(r),!1)),a=n.find((function(e){return e.colIndex===o+1}));return{prev:n.find((function(e){return e.colIndex===i-1}))||null,next:a||null}}(e,t),s={hideColumnNodes:pw(e,t),displaySiblingNode:l},c=nb(nb([],tb(o),!1),[s],!1);e.emit(ei.LAYOUT_COLS_HIDDEN,s,c),r(a,c)}}},gw=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1),Mp(t)&&n&&vw(e,t,!0);var r=function(e){var t=e.dataCfg.fields.columns,n=void 0===t?[]:t;return e.isTableMode()?n:e.getInitColumnLeafNodes().map((function(e){return e.id}))}(e),o=function(e,t){if(Mp(t))return[];var n=Number.NEGATIVE_INFINITY;return e.reduce((function(e,r,o){if(!t.includes(r))return e;if(o===n+1)$h(e).push(r);else{var i=[r];e.push(i)}return n=o,e}),[])}(r,t);o.forEach((function(t){vw(e,t,n)}))},mw=function(e,t){return function(e){var t=function(e){return(null==e?void 0:e.next)||(null==e?void 0:e.prev)}(e);return null==t?void 0:t.id}(e)===t},yw=function(e){var t=e.type,n=e.id,r=e.theme,o=e.width,i=e.height,a=Jy(e,["type","id","theme","width","height"]),l=t===Wy.Horizontal?r.size:null,s=t===Wy.Vertical?r.size:null;return{fill:r.background,fillOpacity:r.backgroundOpacity,cursor:"".concat(t,"-resize"),width:l,height:s,appendInfo:Qy(Qy({},a),{isResizeArea:!0,type:t,id:n,width:o,height:i,size:r.size})}},bw=function(e,t){if(e.foregroundGroup)return e.foregroundGroup.findById(t)||e.foregroundGroup.addGroup({id:t,zIndex:5})},Cw=function(e,t,n){var r=null!=n?n:{},o=r.scrollX,i=void 0===o?0:o,a=r.scrollY,l=void 0===a?0:a,s=!(e.x-i>t.x+t.width||e.x+e.width-i<t.x),c=!(e.y-l>t.y+t.height||e.y+e.height-l<t.y);return s&&c},ww=function(e,t,n){var r=If(e,(function(e){return function(e,t,n){if(!e)return!1;var r=e.iconNames,o=e.displayCondition,i=e.belongsCell;return!Mp(r)&&i===n&&(!o||r.some((function(e){return o(t,e)})))}(e,t,n)}));if(r){var o=r.iconNames;return r.displayCondition&&(o=o.filter((function(e){return r.displayCondition(t,e)}))),Qy(Qy({},r),{iconNames:o})}},xw=function(e,t){var n=e.label;return Np(e.field,oi)?{formattedValue:t||n,value:n}:{formattedValue:n,value:n}};function Ew(e,t){return t.map((function(t){var n=e[t];return void 0===n?n:"".concat(n)}))}function Sw(e){return e.map((function(e){var t=null==e?void 0:e.split(Li);return t[(null==t?void 0:t.length)-1]||e}))}function Lw(e){var t=e.rowDimensionValues,n=e.colDimensionValues,r=e.careUndefined,o=e.isFirstCreate,i=e.onFirstCreate,a=e.rowFields,l=e.colFields,s=e.rowPivotMeta,c=e.colPivotMeta,u=function(e,t,n,s){void 0===t&&(t=!0);for(var c=t?n:s,u=t?a:l,d=[],h=0;h<e.length;h++){var f=e[h];if(!c.has(f))if(o)c.set(f,{level:c.size,children:new Map}),null==i||i({isRow:t,dimension:null==u?void 0:u[h],dimensionPath:e.slice(0,h+1)});else{var p=c.get(f);if(p&&d.push(p.level),!r)break}var v=c.get(f);Gp(f)&&r?d.push(f):d.push(null==v?void 0:v.level),v&&(o&&(v.childField=null==u?void 0:u[h+1]),c=null==v?void 0:v.children)}return d},d=u(t,!0,s,c),h=u(n,!1,s,c);return d.concat.apply(d,nb([],tb(h),!1))}function Ow(e,t){return Ng(e,(function(e,n){return e.push(t[n]),e}),[])}function Iw(e){var t=e.rows,n=e.columns,r=e.originData,o=void 0===r?[]:r,i=e.indexesData,a=void 0===i?[]:i,l=e.totalData,s=void 0===l?[]:l,c=e.sortedDimensionValues,u=e.rowPivotMeta,d=e.colPivotMeta,h=[],f=new Set(up(t,n)),p=function(e){var t=e.isRow,n=e.dimension,r=e.dimensionPath;!t&&f.has(n)||(c[n]||(c[n]=[])).push(r.map((function(e){return"".concat(e)})).join(Li))};return o.concat(s).forEach((function(e){var r=Lw({rowDimensionValues:Ew(e,t),colDimensionValues:Ew(e,n),rowPivotMeta:u,colPivotMeta:d,isFirstCreate:!0,onFirstCreate:p,careUndefined:(null==s?void 0:s.length)>0,rowFields:t,colFields:n});h.push(r),Wg(a,r,e)})),{paths:h,indexesData:a,rowPivotMeta:u,colPivotMeta:d,sortedDimensionValues:c}}function _w(e,t){if(e&&t){var n=t.split(Li),r=$h(n),o=e;tf(n,(function(e,t){var n=o.get(e);return n?(e===r?(n.children=new Map,n.childField=void 0):o=n.children,!0):0===t&&e===Si}))}}var Tw=function(e){return"ASC"===_m(e)},Aw=function(e){return"DESC"===_m(e)},Mw=function(e){return!Bp(Number(e))},Nw=function(e,t,n){var r=Tw(t)?1:-1,o=["-",void 0];return null==e?void 0:e.sort((function(e,t){var i=e,a=t;if(n){if(i=e[n],a=t[n],Mw(i)&&Mw(a))return(Number(i)-Number(a))*r;if(i&&(null==o?void 0:o.includes(null==i?void 0:i.toString())))return-r;if(Number(i)&&(null==o?void 0:o.includes(null==a?void 0:a.toString())))return r}return Fp(i)||Fp(a)?i?r:-r:i.toString().localeCompare(a.toString(),"zh")*r}))},Rw=function(e,t,n){return n?function(e,t){var n;return null===(n=null==e?void 0:e.filter((function(e){return!(null==t?void 0:t.includes(e))})))||void 0===n?void 0:n.concat(t)}(t,Wm(e)):nb([],tb(new Set(nb(nb([],tb(e),!1),tb(t),!1))),!1)},Dw=function(e){var t=e.sortByValues,n=e.originValues,r=n.filter((function(e){return t.find((function(t){return sf(e,t)}))})).map((function(e){var t=e.split(Li);return t.length>1?[t.slice(0,t.length-1).join(Li),t[t.length-1]]:t})),o=Array.from(new Set(r.map((function(e){return e[0]}))));r.sort((function(e,n){var r=e.slice(0,e.length-1),i=n.slice(0,n.length-1);return r.join()!==i.join()?o.indexOf(r[0])-o.indexOf(i[0]):t.indexOf(e[e.length-1])-t.indexOf(n[n.length-1])}));var i=r.map((function(e){return e.join(Li)}));return $b(n,i)},kw=function(e){var t=e.sortParam,n=e.originValues,r=e.measureValues,o=e.dataSet,i=t.sortFunc,a=t.sortMethod,l=t.sortBy,s=n,c={originValues:n,measureValues:r,sortParam:t,dataSet:o};return i?s=function(e){var t=e.originValues,n=e.measureValues,r=e.sortParam,o=e.dataSet,i=r.sortFunc,a=r.sortFieldId,l=r.sortMethod,s=i(Qy({data:n},r));return(null==s?void 0:s.length)?(o.fields.rows.indexOf(a)>0||o.fields.columns.indexOf(a)>0)&&!op(s[0],Li)?Dw({sortByValues:s,originValues:t}):Rw(s,t,Tw(l)):t}(c):l?s=Dw({sortByValues:l,originValues:n}):(Tw(a)||Aw(a))&&(s=function(e){var t,n=e.sortParam,r=e.measureValues,o=e.originValues,i=e.dataSet,a=n.sortByMeasure,l=n.query,s=n.sortFieldId,c=n.sortMethod,u=i.fields,d=u.rows,h=u.columns,f=d.includes(s);return t=a?function(e,t,n){var r,o=t.slice(0,t.indexOf(e)+1);return null===(r=n.map((function(e){return o.map((function(t){return e[t]})).join("".concat(Li))})))||void 0===r?void 0:r.filter((function(e){return e}))}(s,f?d:h,Nw(r,c,a===ai?l[oi]:a)):kf(Nw(r,c)),Rw(t,o,Tw(c))}(c)),s},Bw=function(e){return e.filter((function(e){return e!==oi}))},Pw=function(e){var t,n=e.dataSet,r=e.sortParam,o=e.originValues;return t=e.isSortByMeasure?function(e){var t=e.dataSet,n=e.sortParam,r=e.originValues,o=t.fields,i=n.sortByMeasure,a=n.query,l=n.sortFieldId,s=t.getMultiData(a);if(i!==ai){var c=Dd(o.rows,o.columns);return s.filter((function(e){var t=new Set(Ls(e));return c.every((function(e){return t.has(e)}))}))}var u=op(o.rows,l),d=Bw(u?o.rows:o.columns),h=Bw(u?o.columns:o.rows),f=d[d.indexOf(l)+1],p=Ls(a),v=h.filter((function(e){return!p.includes(e)})),g=s.filter((function(e){var t=new Set(Ls(e));return!!t.has(l)&&!t.has(f)&&v.every((function(e){return!t.has(e)}))}));return Mp(g)?Rd(kf(r,(function(e){var n=function(e,t,n){var r,o={};if(op(e,Li))for(var i=nm(e,Li),a=(null===(r=null==t?void 0:t.rows)||void 0===r?void 0:r.includes(n))?t.rows:t.columns,l=0;l<=ap(a,n);l++)o[a[l]]=i[l];else o[n]=e;return o}(e,o,l);return t.getTotalValue(Qy(Qy({},a),n))}))):g}(e):o,kw({sortParam:r,originValues:o,measureValues:t,dataSet:n})},Fw=function(e,t){if(null==e?void 0:e.sortMethod){if(Tw(null==e?void 0:e.sortMethod))return"groupAsc";if(Aw(null==e?void 0:e.sortMethod))return"groupDesc"}if(t)return"SortDown"},jw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=tb(e,1),r=n[0];this.headerConfig=Qy({},r);var o=this.meta,i=o.value,a=o.query,l=this.spreadsheet.dataCfg.sortParams,s=this.isSortCell(),c=If(nb([],tb(l),!1).reverse(),(function(e){return s&&(null==e?void 0:e.sortByMeasure)===i&&Np(ic(e,"query"),a)})),u=Fw(c,s);this.headerConfig.sortParam=Qy(Qy(Qy({},this.headerConfig.sortParam),c||{query:a}),{type:u})},t.prototype.initCell=function(){this.actionIcons=[],this.hasDefaultHiddenIcon=!1},t.prototype.getInteractiveBorderShapeStyle=function(e){var t=this.getCellArea(),n=t.x,r=t.y,o=t.height;return{x:n+e,y:r+e,width:t.width-2*e,height:o-2*e}},t.prototype.getFormattedFieldValue=function(){var e=this.meta.label,t=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field),n=this.spreadsheet.isTableMode();return{formattedValue:t&&!n?t(e,void 0,this.meta):e,value:e}},t.prototype.getActionIconCfg=function(){return ww(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},t.prototype.showSortIcon=function(){var e=this.spreadsheet,t=e.options,n=Mp(e.dataCfg.fields.values);if(t.showDefaultHeaderActionIcon&&!n){var r=this.headerConfig.sortParam,o=this.meta.query;return o&&Np(null==r?void 0:r.query,o)&&(null==r?void 0:r.type)&&"none"!==(null==r?void 0:r.type)}return!1},t.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var e=this.getActionIconCfg();return e?e.iconNames.length:0},t.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon;return(e.size+e.margin.left)*this.getActionIconsCount()},t.prototype.drawSortIcons=function(){var e=this;if(this.showSortIcon()){var t=this.getStyle(),n=t.icon,r=t.text,o=this.getTextConditionFill(r),i=this.headerConfig.sortParam,a=this.getIconPosition(),l=new Vb(Qy(Qy({name:ic(i,"type","none")},a),{width:n.size,height:n.size,fill:o}));l.on("click",(function(t){e.spreadsheet.emit(ei.GLOBAL_ACTION_ICON_CLICK,t),e.spreadsheet.handleGroupSort(t,e.meta)})),this.add(l),this.actionIcons.push(l)}},t.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},t.prototype.addActionIcon=function(e){var t=this,n=e.x,r=e.y,o=e.iconName,i=e.defaultHide,a=e.action,l=e.onClick,s=e.onHover,c=this.getStyle(),u=c.icon,d=c.text,h=this.getTextConditionFill(d),f=(null==u?void 0:u.fill)||h,p=new Vb({name:o,x:n,y:r,width:null==u?void 0:u.size,height:null==u?void 0:u.size,fill:f});p.set("visible",!i),p.on("mouseover",(function(e){t.spreadsheet.emit(ei.GLOBAL_ACTION_ICON_HOVER,e),null==s||s({hovering:!0,iconName:o,meta:t.meta,event:e})})),p.on("mouseleave",(function(e){t.spreadsheet.emit(ei.GLOBAL_ACTION_ICON_HOVER_OFF,e),null==s||s({hovering:!1,iconName:o,meta:t.meta,event:e})})),p.on("click",(function(e){var n;t.spreadsheet.emit(ei.GLOBAL_ACTION_ICON_CLICK,e),null===(n=l||a)||void 0===n||n({iconName:o,meta:t.meta,event:e})})),this.actionIcons.push(p),this.add(p)},t.prototype.drawActionIcons=function(){var e=this;if(this.showSortIcon())this.drawSortIcons();else{var t=this.getActionIconCfg();if(t){var n=t.iconNames,r=t.action,o=t.onClick,i=t.onHover,a=t.defaultHide,l=this.getIconPosition(n.length),s=this.getStyle().icon,c=s.size,u=s.margin;tf(n,(function(t,n){var s=l.x+n*c+n*u.left,d=l.y,h="function"==typeof a?a(e.meta,t):a;h&&(e.hasDefaultHiddenIcon=!0),e.addActionIcon({iconName:t,x:s,y:d,defaultHide:h,action:r,onClick:o,onHover:i})}))}}},t.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),t=e.backgroundColor,n=e.backgroundColorOpacity;this.backgroundShape=nC(this,Qy(Qy({},this.getCellArea()),{fill:t,fillOpacity:n}))},t.prototype.isSortCell=function(){var e,t,n,r=null===(t=null===(e=this.meta.spreadsheet)||void 0===e?void 0:e.isValueInCols)||void 0===t?void 0:t.call(e),o=this.meta.level===(null===(n=this.meta.hierarchy)||void 0===n?void 0:n.maxLevel);return r?o&&this.cellType===uy.COL_CELL:o&&this.cellType===uy.ROW_CELL},t.prototype.handleByStateName=function(e,t){iw(e,this)&&this.updateByState(t)},t.prototype.handleSearchResult=function(e){iw(e,this)&&(If(e,(function(e){return null==e?void 0:e.isTarget})).id===this.getMeta().id?this.updateByState(cy.HIGHLIGHT):this.updateByState(cy.SEARCH_RESULT))},t.prototype.handleHover=function(e){var t;iw(e,this)&&(this.updateByState(cy.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.id))},t.prototype.handleSelect=function(e,t){iw(e,this)&&this.updateByState(cy.SELECTED),op(kf(t,"id"),this.meta.id)&&this.updateByState(cy.SELECTED)},t.prototype.getTextStyle=function(){var e,t=this.getStyle(),n=t.text,r=t.bolderText,o=t.measureText;e=this.isMeasureField()?o||n:this.isBolderText()?r:n;var i=this.getTextConditionFill(e);return Qy(Qy({},e),{fill:i})},t.prototype.getBackgroundColor=function(){var e,t,n=(null===(e=this.getStyle())||void 0===e?void 0:e.cell)||{},r=n.backgroundColor,o=n.backgroundColorOpacity,i=r,a=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background);if(a&&a.mapping){var l=this.mappingValue(a);l&&(i=l.fill)}return{backgroundColor:i,backgroundColorOpacity:o}},t.prototype.toggleActionIcon=function(e){if(this.getMeta().id===e){var t=[];tf(this.actionIcons,(function(e){e.get("visible")||(e.set("visible",!0),t.push(e))})),this.spreadsheet.store.set("visibleActionIcons",t)}},t.prototype.update=function(){var e=this.spreadsheet.interaction,t=null==e?void 0:e.getState(),n=null==e?void 0:e.getCells();if(Rf(n))switch(null==t?void 0:t.stateName){case cy.SELECTED:this.handleSelect(n,null==t?void 0:t.nodes);break;case cy.HOVER_FOCUS:case cy.HOVER:this.handleHover(n);break;case cy.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,null==t?void 0:t.stateName)}},t.prototype.updateByState=function(t){e.prototype.updateByState.call(this,t,this)},t.prototype.hideInteractionShape=function(){e.prototype.hideInteractionShape.call(this)},t.prototype.isMeasureField=function(){return[oi,ii].includes(this.meta.field)},t.prototype.mappingValue=function(e){var t=this.getMeta().label;return null==e?void 0:e.mapping(t,this.meta)},t.prototype.findFieldCondition=function(e){var t=this;return Nf(e,(function(e){return e.field instanceof RegExp?e.field.test(t.meta.field):e.field===t.meta.field}))},t}(rw),zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.COL_CELL},enumerable:!1,configurable:!0}),t.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",nC(this,Qy({},this.getCellArea()),{visible:!1}))},t.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",nC(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getActionIconsWidth()},t.prototype.getIconPosition=function(){if(this.meta.isLeaf)return e.prototype.getIconPosition.call(this,this.getActionIconsCount());var t=this.getIconStyle(),n=t.margin.left,r=this.getTextStyle(),o=this.textPosition,i=o.x,a=o.y-t.size/2;return"left"===r.textAlign?{x:i+this.actualTextWidth+n,y:a}:"right"===r.textAlign?{x:i+n,y:a}:{x:i+this.actualTextWidth/2+n,y:a}},t.prototype.isBolderText=function(){var e=this.meta,t=e.isLeaf;return!(!e.isTotals&&t)},t.prototype.getTextPosition=function(){var e,t=this.meta.isLeaf,n=this.headerConfig,r=n.width,o=n.scrollContainsRowHeader,i=n.cornerWidth,a=n.scrollX,l=this.getTextStyle(),s=this.getContentArea(),c=this.getIconStyle();if(t)return yC(s,l,this.actualTextWidth,c,this.getActionIconsCount()).text;var u={start:a-(o?i:0),width:r+(o?i:0)},d=this.getTextStyle().textAlign,h=function(e,t,n){void 0===n&&(n={left:0,right:0});var r=Qy({},e);return"left"===t?(r.start+=n.left,r.width-=n.left):"right"===t&&(r.width-=n.right),r}(u,d,null===(e=this.getStyle().cell)||void 0===e?void 0:e.padding),f=this.getActionIconsWidth(),p=this.actualTextWidth+f,v=function(e,t,n){var r,o,i=t.start+t.width,a=e.start+e.width;if(t.start<=e.start&&i>=a)r=e.start+e.width/2,o=e.width;else if(t.start<=e.start)r=(l=t.width-(e.start-t.start))<n?i-n/2:i-l/2,o=l;else if(i>=a){var l;r=(l=t.width-(i-a))<n?t.start+n/2:t.start+l/2,o=l}else r=t.start+t.width/2,o=t.width;return{start:r,width:o}}(h,{start:s.x,width:s.width},p),g=function(e,t,n,r){var o=t+n,i=e.start;if("center"===r)return i-n/2;var a=e.width-o>0?e.width/2:o/2;return"left"===r?i-a:i+a-n}(v,this.actualTextWidth,f,d),m=s.y+s.height/2;return this.textPosition={x:g,y:m},this.textPosition},t.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,t=e.size,n=e.margin,r=this.getActionIconsCount();return(t+n.left)*r+(r>0?n.right:0)},t.prototype.getColResizeAreaKey=function(){return this.meta.key},t.prototype.getColResizeArea=function(){return bw(this.spreadsheet,Ci)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(Ei).concat(this.meta.key)},t.prototype.drawHorizontalResizeArea=function(){var e,t;if(0!==(null===(t=null===(e=this.spreadsheet.options.style)||void 0===e?void 0:e.colCfg)||void 0===t?void 0:t.height)&&this.shouldDrawResizeAreaByType("colCellVertical",this)){var n=this.headerConfig,r=n.cornerWidth,o=n.viewportWidth,i=this.meta,a=i.y,l=i.height,s=this.getResizeAreaStyle(),c=this.getColResizeArea(),u=this.getHorizontalResizeAreaName();if(!c.find((function(e){return e.attrs.name===u}))){var d=r+o;c.addShape("rect",{attrs:Qy(Qy({},yw({theme:s,type:Wy.Vertical,id:this.getColResizeAreaKey(),effect:Uy.Field,offsetX:0,offsetY:a,width:d,height:l,meta:this.meta})),{name:u,x:0,y:a+l-s.size/2,width:d})})}}},t.prototype.shouldAddVerticalResizeArea=function(){var e=this.meta,t=e.x,n=e.y,r=e.width,o=e.height,i=this.headerConfig,a=i.scrollX,l=i.scrollY,s=i.scrollContainsRowHeader,c=i.cornerWidth,u=i.height,d=i.width,h=this.getResizeAreaStyle(),f={x:t+r-h.size/2,y:n,width:h.size,height:o};return Cw(f,{x:s?-c:0,y:0,width:s?c+d:d,height:u},{scrollX:a,scrollY:l})},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,t=e.x,n=e.y,r=this.headerConfig,o=r.scrollX,i=r.position;return{x:i.x+t-o,y:i.y+n}},t.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("colCellHorizontal",this)){var e=this.meta,t=e.label,n=e.width,r=e.height,o=this.getResizeAreaStyle(),i=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var a=this.getVerticalResizeAreaOffset(),l=a.x,s=a.y;i.addShape("rect",{attrs:Qy(Qy({},yw({theme:o,type:Wy.Horizontal,effect:Uy.Cell,id:t,offsetX:l,offsetY:s,width:n,height:r,meta:this.meta})),{x:l+n-o.size/2,y:s,height:r})})}}},t.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},t.prototype.drawHorizontalBorder=function(){var e=bC(zb.TOP,this.meta,this.theme.colCell.cell);iC(this,e.position,e.style)},t.prototype.drawVerticalBorder=function(e){var t=bC(e,this.meta,this.theme.colCell.cell);iC(this,t.position,t.style)},t.prototype.drawBorders=function(){var e=this.spreadsheet,t=e.options,n=e.isTableMode;0===this.meta.colIndex&&n()&&!t.showSeriesNumber&&this.drawVerticalBorder(zb.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(zb.RIGHT)},t.prototype.hasHiddenColumnCell=function(){var e=this,t=this.spreadsheet.options,n=t.interaction.hiddenColumnFields,r=void 0===n?[]:n,o=t.tooltip.operation,i=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return!(Mp(i)||Mp(r)||!o.hiddenColumns||!i.find((function(t){return mw(null==t?void 0:t.displaySiblingNode,e.meta.id)})))},t.prototype.getExpandIconTheme=function(){return this.getStyle().icon},t.prototype.addExpandColumnSplitLine=function(){var e=this.meta,t=e.x,n=e.y,r=e.width,o=e.height,i=this.theme.splitLine,a=i.horizontalBorderColor,l=i.horizontalBorderWidth,s=i.horizontalBorderColorOpacity,c=this.isLastColumn()?t+r-l:t;iC(this,{x1:c,y1:n,x2:c,y2:n+o},{stroke:a,lineWidth:l,strokeOpacity:s})},t.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcon())},t.prototype.addExpandColumnIcon=function(){var e=this,t=this.getExpandColumnIconConfig();lC(this,Qy(Qy({},t),{name:"ExpandColIcon",cursor:"pointer"})).on("click",(function(){e.spreadsheet.emit(ei.LAYOUT_COLS_EXPANDED,e.meta)}))},t.prototype.getExpandColumnIconConfig=function(){var e=this.getExpandIconTheme().size,t=this.getCellArea(),n=t.x,r=t.y,o=t.width,i=t.height,a=n-e;return{x:this.isLastColumn()?a+o:a,y:r+i/2-e/2,width:2*e,height:e}},t.prototype.isLastColumn=function(){return e=this.spreadsheet,t=this.meta.id,n=e.getColumnNodes(),r=e.getInitColumnLeafNodes(),o=fw(t),ic($h(n),o)===t&&ic($h(r),o)!==t;var e,t,n,r,o},t}(jw),Gw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textShapes=[],t}return Zy(t,e),t.prototype.isBolderText=function(){return this.meta.cornerType===Hb.Col},Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.CORNER_CELL},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.initCell=function(){e.prototype.initCell.call(this),this.textShapes=[],this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea()},t.prototype.drawCellText=function(){this.drawTextShape()},t.prototype.drawTextShape=function(){var e=this.getContentArea().x,t=this.getCellArea(),n=t.y,r=t.height,o=this.getTextStyle(),i=this.getCornerText(),a=this.getMaxTextWidth(),l=LC(this.meta,this.spreadsheet.options.placeholder),s=this.spreadsheet.measureTextWidth,c=wC({measureTextWidth:s,text:i,maxWidth:a,fontParam:o,placeholder:l});this.actualText=c;var u=c.indexOf(Ni),d=c,h="";if(-1!==u&&this.spreadsheet.isHierarchyTreeType()){var f=u+(/iPhone/gi.test(navigator.userAgent)&&812===window.screen.height&&375===window.screen.width?1:0);d=i.substr(0,f),h=i.slice(f),h=wC({measureTextWidth:s,text:h,maxWidth:a,fontParam:o})}var p,v,g=(p={x:e+this.getTreeIconWidth(),y:n,width:a,height:r},v=o,yC(p,v).text).x,m=n+(Mp(h)?r/2:r/4);this.textShapes.push(oC(this,[this.textShapes[0]],g,m,d,o)),Mp(h)||this.textShapes.push(oC(this,[this.textShapes[1]],g,n+.75*r,h,o)),this.actualTextWidth=tv([s(d,o),s(h,o)])},t.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()&&this.meta.cornerType!==Hb.Col){var t=this.headerConfig.hierarchyCollapse,n=this.getStyle().icon.size,r=this.getTextStyle(),o=r.textBaseline,i=r.fill,a=this.getContentArea();this.treeIcon=sC(this,{x:a.x,y:mC(a,o,n),width:n,height:n},i,t,(function(){e.headerConfig.spreadsheet.store.set("scrollY",0),e.headerConfig.spreadsheet.emit(ei.LAYOUT_TREE_ROWS_COLLAPSE_ALL,t)}))}},t.prototype.drawBorderShape=function(){var e=this;[zb.TOP,zb.LEFT].forEach((function(t){var n=bC(t,e.getCellArea(),e.getStyle().cell),r=n.position,o=n.style;iC(e,r,o)}))},t.prototype.isLastRowCornerCell=function(){var e=this.meta,t=e.cornerType,n=e.field,r=this.headerConfig.rows;return t===Hb.Row&&(this.spreadsheet.isHierarchyTreeType()||$h(r)===n)},t.prototype.getResizeAreaEffect=function(){return this.meta.cornerType===Hb.Series?Uy.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?Uy.Tree:Uy.Field},t.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var e=this.getResizeAreaStyle(),t=bw(this.spreadsheet,bi),n=this.headerConfig,r=n.position,o=n.scrollX,i=n.scrollY,a=n.width,l=n.height,s=this.meta,c=s.x,u=s.y,d=s.width,h=s.height,f=s.field,p=s.cornerType,v={x:c+d-e.size/2,y:u,width:e.size,height:h},g={x:0,y:0,width:a,height:l};if(p!==Hb.Col&&Cw(v,g,{scrollX:o,scrollY:i})){var m=r.x+c-o,y=r.y+(this.isLastRowCornerCell()?0:u);t.addShape("rect",{attrs:Qy(Qy({},yw({theme:e,id:f,type:Wy.Horizontal,effect:this.getResizeAreaEffect(),offsetX:m,offsetY:y,width:d,height:h,meta:this.meta})),{x:m+d-e.size/2,y,height:this.isLastRowCornerCell()?l:h})})}}},t.prototype.showTreeIcon=function(){var e;return this.spreadsheet.isHierarchyTreeType()&&0===(null===(e=this.meta)||void 0===e?void 0:e.x)},t.prototype.getIconPosition=function(){var e,t,n=null===(t=null===(e=this.textShapes)||void 0===e?void 0:e[0])||void 0===t?void 0:t.cfg.attrs,r=this.getTextStyle(),o=r.textBaseline,i=r.textAlign,a=this.getStyle().icon,l=a.size,s=a.margin;return{x:(null==n?void 0:n.x)+lh([[Jp("center"),pl(this.actualTextWidth/2)],[Jp("right"),pl(0)],[im,pl(this.actualTextWidth)]])(i)+s.left,y:mC(this.getContentArea(),o,l)}},t.prototype.getTreeIconWidth=function(){var e=this.getStyle().icon,t=e.size,n=e.margin;return this.showTreeIcon()?t+n.right:0},t.prototype.getTextStyle=function(){var e=this.getStyle(),t=e.text,n=e.bolderText,r=this.isBolderText()?t:n,o=this.getTextConditionFill(r);return Qy(Qy({},r),{fill:o})},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTreeIconWidth()-this.getActionIconsWidth()},t.prototype.getTextPosition=function(){return{x:0,y:0}},t.prototype.getFormattedFieldValue=function(){return xw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},t.prototype.getCornerText=function(){var e;return Np(this.meta.label,oi)?(null===(e=this.spreadsheet.options)||void 0===e?void 0:e.cornerText)||gb("指标"):this.getFormattedFieldValue().formattedValue},t}(jw),Hw=function(){function e(e){this.EVENT="gesture",this.gm=e}return e.prototype.do=function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break;case"touchcancel":this.onTouchCancel(e);break;default:return}},e.prototype.emit=function(e){this.gm.emit(this.EVENT,e)},e}(),Ww=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="pan",t}return Zy(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y,r=t-this.preX,o=n-this.preY;this.preX=t,this.preY=n,this.emit({x:t,y:n,deltaX:r,deltaY:o,event:e})},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.preX=t,this.preY=n},t}(Hw),Uw="object"==typeof performance&&performance.now?performance:Date,Vw={Pan:Ww,Press:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="press",t}return Zy(t,e),t.prototype.onTouchCancel=function(e){this.clearTimeout()},t.prototype.onTouchEnd=function(e){this.clearTimeout()},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y;(t-this.touchStartX>10||n-this.touchStartY>10)&&this.clearTimeout()},t.prototype.onTouchStart=function(e){var t=this;this.clearTimeout();var n=e.x,r=e.y;this.touchStartTime=Uw.now(),this.touchStartX=n,this.touchStartY=r,this.pressTimeout=window.setTimeout((function(){t.emit({x:n,y:r,event:e})}),300)},t.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},t}(Hw),Swipe:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return Zy(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){var t=this.speedX,n=this.speedY;if(Uw.now()-this.latestMoveTime<100){var r=e.x,o=e.y;this.emit({x:r,y:o,speedX:t,speedY:n,event:e})}},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y,r=Uw.now(),o=t-this.preX,i=n-this.preY,a=r-this.ms;this.speedX=o/a,this.speedY=i/a,this.latestMoveTime=r},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.speedX=this.speedY=0,this.preX=t,this.preY=n,this.ms=Uw.now()},t}(Hw),Tap:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="tap",t}return Zy(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){var t=e.x,n=e.y;t-this.touchStartX<2&&n-this.touchStartY<2&&Uw.now()-this.touchStartTime<300&&this.emit({x:t,y:n,event:e})},t.prototype.onTouchMove=function(e){},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.touchStartTime=Uw.now(),this.touchStartX=t,this.touchStartY=n},t}(Hw)},Yw=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.onTouchStart=function(e){r.preventEvent(e),r.element.on("touchmove",r.onTouchMove),r.element.on("touchend",r.onTouchEnd),r.element.on("touchcancel",r.onTouchCancel),r.emit("touchdown",e),r.doGestures(e)},r.onTouchMove=function(e){r.preventEvent(e),r.emit("touchmove",e),r.doGestures(e)},r.onTouchEnd=function(e){r.preventEvent(e),r.emit("touchend",e),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(e)},r.onTouchCancel=function(e){r.preventEvent(e),r.emit("touchcancel",e),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(e)},r.element=t,r.options=n,r.initialGestures(),r.bindTouchStart(),r}return Zy(t,e),t.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},t.prototype.initialGestures=function(){var e=this,t=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=t.map((function(t){return new(0,Vw[t])(e)}))},t.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},t.prototype.preventEvent=function(e){var t=e.type;(this.options.prevents||[]).includes(t)&&e.preventDefault()},t.prototype.doGestures=function(e){this.gestures.forEach((function(t){t.do(e)}))},t}(he),$w=an,Xw="wheel",qw=function(e){function t(t){var n=e.call(this)||this;return n.rafMs=0,n.onPan=function(e){n.raf&&cancelAnimationFrame(n.raf);var t=e.deltaX,r=e.deltaY,o=n.getWrapperEvent(e,t,r);n.emit(Xw,o)},n.onSwipe=function(e){var t=e.speedX,r=e.speedY;n.rafMs=Uw.now(),n.ms=n.rafMs,0===t&&0===r||n.rafInertia(e)},n.element=t,n.gm=new Yw(t,{gestures:["Pan","Swipe"]}),n.gm.on("swipe",n.onSwipe),n.gm.on("pan",n.onPan),n}return Zy(t,e),t.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},t.prototype.rafInertia=function(e){var t=this,n=e.speedX,r=e.speedY;this.raf=window.requestAnimationFrame((function(){var o=Uw.now(),i=(o-t.ms)/800;if(i<1){i=$w(1-i);var a=o-t.rafMs,l=n*i*a,s=r*i*a,c=t.getWrapperEvent(e,l,s);t.emit(Xw,c),t.rafMs=o,t.rafInertia(e)}}))},t.prototype.getWrapperEvent=function(e,t,n){return Qy(Qy({},e),{deltaX:-t,deltaY:-n})},t}(he),Kw=function(e,t,n,r,o){var i=n+r;return e+o>=i?e:i<e+(t+o)/2?n+r-o:n>e+(t-o)/2?e+t-n>o?n:e+t-o:e+(t-o)/2},Zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.gm)||void 0===t||t.destroy()},t.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},t.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",nC(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",nC(this,Qy({},this.getCellArea()),{visible:!1}))},t.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},t.prototype.showTreeLeafNodeAlignDot=function(){var e;return(null===(e=this.spreadsheet.options.style)||void 0===e?void 0:e.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},t.prototype.getParentTreeIconCfg=function(){if(this.showTreeLeafNodeAlignDot()&&this.spreadsheet.isHierarchyTreeType()&&this.meta.isLeaf)return ic(this.meta,"parent.belongsCell.treeIcon.cfg")},t.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()){var t=this.meta,n=t.isCollapsed,r=t.id,o=t.hierarchy,i=this.getContentArea().x,a=this.getTextStyle().fill,l=this.getStyle().icon.size,s=i+this.getContentIndent(),c=this.getIconYPosition();this.treeIcon=sC(this,{x:s,y:c,width:l,height:l},a,n,(function(){if(!xb()){if(!n){var t=e.spreadsheet.store.get("scrollY"),i=e.spreadsheet.facet.panelBBox.viewportHeight||0,a=(c=e.meta,u=0,null==(d=c.children)||d.forEach((function(e){u+=e.height||0})),u),l=o.height-a;if(t>0&&t+i>l){var s=l-i;e.spreadsheet.store.set("scrollY",s>0?s:0)}}var c,u,d;e.spreadsheet.emit(ei.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:e.meta})}})),xb()&&(this.gm=new Yw(this,{gestures:["Tap"]}),this.gm.on("tap",(function(){e.spreadsheet.emit(ei.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:e.meta})})))}},t.prototype.drawTreeLeafNodeAlignDot=function(){var e=this.getParentTreeIconCfg();if(e){var t=this.getStyle().icon,n=t.size,r=t.margin,o=e.x+n+r.right,i=this.getTextPosition().y,a=this.getTextStyle(),l=a.fill,s=a.fontSize,c=n/5;this.treeLeafNodeAlignDot=rC(this,{x:o+n/2,y:i+(s-c)/2,r:c,fill:l,fillOpacity:.3})}},t.prototype.isBolderText=function(){var e=this.meta,t=e.isLeaf,n=e.isTotals,r=e.level;return!t&&0===r||n},t.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkFieldShape()},t.prototype.drawLinkFieldShape=function(){var t=this.headerConfig.linkFields,n=void 0===t?[]:t,r=this.getTextStyle().linkTextFill;e.prototype.drawLinkFieldShape.call(this,n.includes(this.meta.key),r)},t.prototype.drawRectBorder=function(){var e=this,t=this.getCellArea().x,n=this.getContentIndent(),r=this.spreadsheet.isHierarchyTreeType()?t:t+n;[zb.BOTTOM,zb.LEFT].forEach((function(t){var n=bC(t,Qy(Qy({},e.getCellArea()),{x:r}),e.getStyle().cell),o=n.position,i=n.style;iC(e,o,i)}))},t.prototype.drawResizeAreaInLeaf=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("rowCellVertical",this)){var e=this.getCellArea(),t=e.x,n=e.y,r=e.width,o=e.height,i=this.getResizeAreaStyle(),a=bw(this.spreadsheet,vi),l=this.headerConfig,s=l.position,c=l.seriesNumberWidth,u=l.width,d=l.viewportHeight,h=l.scrollX,f=l.scrollY,p={x:t,y:n+o-i.size/2,width:r,height:i.size};if(Cw(p,{x:0,y:0,width:u,height:d},{scrollX:h,scrollY:f})){var v=s.x+t-h+c,g=s.y+n-f,m=this.spreadsheet.isFrozenRowHeader()?u-c-(t-h):r;a.addShape("rect",{attrs:Qy(Qy({},yw({id:this.meta.id,theme:i,type:Wy.Vertical,effect:Uy.Cell,offsetX:v,offsetY:g,width:r,height:o,meta:this.meta})),{x:v,y:g+o-i.size/2,width:m})})}}},t.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var e=this.getStyle(),t=e.icon,n=e.cell,r=t.size+t.margin.right,o=this.meta.parent,i=0;o;)0!==o.height&&(i+=r),o=o.parent;return this.showTreeLeafNodeAlignDot()&&(i+=this.isTreeLevel()?0:n.padding.right+t.margin.right),i},t.prototype.getTextIndent=function(){var e=this.getStyle().icon,t=e.size,n=e.margin;return this.getContentIndent()+(this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?t+n.right:0)},t.prototype.isTreeLevel=function(){return If(ic(this.meta,"parent.children"),(function(e){return!e.isLeaf}))},t.prototype.getIconPosition=function(){var e=this.textShape.cfg.attrs,t=e.x,n=e.y,r=e.textAlign,o=this.getStyle().icon.margin.left;return"left"===r?{x:t+this.actualTextWidth+o,y:n}:"right"===r?{x:t+o,y:n}:{x:t+this.actualTextWidth/2+o,y:n}},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTextIndent()-this.getActionIconsWidth()},t.prototype.getTextArea=function(){var e=this.getContentArea(),t=this.getTextIndent();return Qy(Qy({},e),{x:e.x+t,width:e.width-t})},t.prototype.getTextPosition=function(){var e=this.getTextArea(),t=this.headerConfig,n=t.scrollY,r=t.viewportHeight,o=this.getTextStyle().fontSize,i=Kw(e.y,e.height,n,r,o);return{x:yC(e,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x,y:i}},t.prototype.getIconYPosition=function(){var e=this.getTextPosition().y,t=this.getStyle().icon.size;return e+(this.getTextStyle().fontSize-t)/2},t}(jw),Qw=function(e,t){return t>0&&e<t},Jw=function(e,t,n){return t>0&&e>=n-t},ex=function(e,t,n){return n>0&&e<t+n},tx=function(e,t,n){return n>0&&e>=t+1-n},nx=function(e,t,n,r,o,i){var a=Of(n,(function(t,r){var a=e-(Fp(i)?0:i)+o.x;return a>=t&&a<n[r+1]}),0);a=Math.max(a,0);var l=Of(n,(function(t,r){var i=o.width+e+o.x;return i>=t&&i<n[r+1]}),a);l=Math.min(-1===l?1/0:l,n.length-2);var s=r.getIndexRange(t+o.y,o.height+t+o.y);return[a,l,s.start,s.end]},rx=function(e,t,n){var r,o,i=null==e?void 0:e.getMatrix(),a=null!==(r=null==i?void 0:i[6])&&void 0!==r?r:0,l=null!==(o=null==i?void 0:i[7])&&void 0!==o?o:0;null==e||e.translate(t-a,n-l)},ox=function(e,t){var n,r=null==e?void 0:e.getMatrix(),o=null!==(n=null==r?void 0:r[6])&&void 0!==n?n:0;null==e||e.translate(t-o,0)},ix=function(e,t,n){var r,o,i=(null===(r=n.icon.margin)||void 0===r?void 0:r.left)||0,a=(null===(o=n.icon.margin)||void 0===o?void 0:o.right)||0,l=e.store.get("hiddenColumnsDetail",[]),s=!1,c=!1;l.forEach((function(e){var n,r,o,i;(null===(r=null===(n=null==e?void 0:e.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===t&&(s=!0),(null===(i=null===(o=null==e?void 0:e.displaySiblingNode)||void 0===o?void 0:o.next)||void 0===i?void 0:i.field)===t&&(c=!0)}));var u=ic(n,"icon.size");return{left:c?u+a:0,right:s?u+i:0}},ax=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=tb(e,1),r=n[0];this.headerConfig=Qy({},r);var o=this.meta.field,i=this.spreadsheet.dataCfg.sortParams,a=If(i,(function(e){return(null==e?void 0:e.sortFieldId)===o})),l=Fw(a,!0);this.headerConfig.sortParam=Qy(Qy(Qy({},this.headerConfig.sortParam),a||{}),{type:l})},t.prototype.isFrozenCell=function(){var e=this.spreadsheet.options,t=e.frozenColCount,n=e.frozenTrailingColCount,r=this.meta.colIndex,o=this.spreadsheet.facet.layoutResult.colLeafNodes;return Qw(r,t)||Jw(r,n,o.length)},t.prototype.getFormattedFieldValue=function(){return xw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},t.prototype.shouldAddVerticalResizeArea=function(){return!!this.isFrozenCell()||e.prototype.shouldAddVerticalResizeArea.call(this)},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,t=e.x,n=e.y,r=this.headerConfig,o=r.scrollX,i=r.position;return this.isFrozenCell()?{x:t,y:n}:{x:i.x+t-o,y:i.y+n}},t.prototype.getColResizeArea=function(){return this.isFrozenCell()?bw(this.spreadsheet,wi):e.prototype.getColResizeArea.call(this)},t.prototype.isSortCell=function(){return!0},t.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},t.prototype.getTextStyle=function(){var e=this.getStyle();return null==e?void 0:e.bolderText},t.prototype.getContentArea=function(){var e,t=((null===(e=this.getStyle())||void 0===e?void 0:e.cell)||this.theme.dataCell.cell).padding,n=Qy({},t),r=ix(this.spreadsheet,this.meta.field,this.getStyle());return r.left&&(n.left=(n.left||0)+r.left),r.right&&(n.right=(n.right||0)+r.right),pC(this.getCellArea(),n)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(Ei).concat("table-col-cell")},t.prototype.drawBackgroundShape=function(){var e=this.getStyle().cell.backgroundColor;this.backgroundShape=nC(this,Qy(Qy({},this.getCellArea()),{fill:e}))},t}(zw),lx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.getStyle=function(e){return e?this.theme[e]:ic(this,"theme.cornerCell")},t.prototype.showSortIcon=function(){return!1},t.prototype.drawLeftBorder=function(){var e=bC(zb.LEFT,this.getCellArea(),this.getStyle().cell);iC(this,e.position,e.style)},t.prototype.drawBorders=function(){e.prototype.drawBorders.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},t}(ax),sx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkFieldShape()},t.prototype.drawLinkFieldShape=function(){var t=this.spreadsheet.options.interaction.linkFields,n=void 0===t?[]:t,r=this.theme.rowCell.text.linkTextFill;e.prototype.drawLinkFieldShape.call(this,n.includes(this.meta.valueField),r)},t.prototype.drawBorderShape=function(){e.prototype.drawBorderShape.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},t.prototype.shouldDrawResizeArea=function(){return 0===this.meta.colIndex},t.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var e=this.getCellArea(),t=e.x,n=e.y,r=e.width,o=e.height,i=this.meta.rowIndex,a=this.getResizeAreaStyle(),l=this.spreadsheet.options,s=l.frozenRowCount,c=l.frozenTrailingRowCount,u=this.spreadsheet.facet.getCellRange(),d=ex(i,u.start,s),h=tx(i,u.end,c),f=d||h?gi:vi,p=bw(this.spreadsheet,f),v=this.spreadsheet.facet.layoutResult.colsHierarchy.height,g=this.spreadsheet.facet.getScrollOffset().scrollY,m=this.spreadsheet.facet.getPaginationScrollY(),y=n+(h?0:v);h||(y-=d?m:g+m),p.addShape("rect",{attrs:Qy(Qy({},yw({id:String(this.meta.rowIndex),theme:a,type:Wy.Vertical,effect:Uy.Cell,offsetX:t,offsetY:y,width:r,height:o,meta:this.meta})),{x:t,y:y+o-a.size/2,width:r})})}},t}(lw),cx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return uy.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},t}(sx),ux=function(e){return[ky.META,ky.CONTROL].includes(e.key)},dx=function(e){var t=e.getMeta();return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:e.cellType}};function hx(e,t){var n=Math.min(e.rowIndex,t.rowIndex),r=Math.max(e.rowIndex,t.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(e.colIndex,t.colIndex)},end:{rowIndex:r,colIndex:Math.max(e.colIndex,t.colIndex)}}}function fx(e){var t=e.rowId,n=e.colId,r=e.spreadsheet,o=r.interaction;if(nw(n,o.getAllColHeaderCells(),cy.SELECTED),t){var i=function(e,t){var n=t.interaction,r=t.facet,o=t.options;if(t.isTableMode()){if(!o.showSeriesNumber)return[];var i=r.layoutResult.colLeafNodes[0].id,a=aw(String(e.rowIndex),i),l=[],s=n.getAllCells().find((function(e){return e.getMeta().id===a}));return s&&s instanceof cx&&l.push(s),l}return tw(e.rowId,n.getAllRowHeaderCells(),t.isHierarchyTreeType())}(e,r);tf(i,(function(e){e.updateByState(cy.SELECTED)}))}}var px,vx,gx=function(e){var t=e.store.get("visibleActionIcons"),n=e.interaction.getInteractedCells(),r=e.interaction.getState().cells;return!(Mp(n)&&Mp(r)&&Mp(t))&&(tf(t,(function(e){e.set("visible",!1)})),e.store.set("visibleActionIcons",[]),tf(n,(function(e){e.hideInteractionShape()})),e.interaction.resetState(),e.options.interaction.selectedCellsSpotlight&&tf(e.interaction.getPanelGroupAllUnSelectedDataCells()||[],(function(e){e.clearUnselectedState()})),!0)},mx=function(e,t,n){var r,o,i=n.facet,a=i.panelBBox.width,l=null==i?void 0:i.frozenGroupInfo,s=null!==(r=null==l?void 0:l.frozenCol.width)&&void 0!==r?r:0,c=null!==(o=null==l?void 0:l.frozenTrailingCol.width)&&void 0!==o?o:0,u=i.layoutResult.colLeafNodes[e];return t===Hy.LEADING?u.x-s:u.x+u.width-(a-c)},yx=function(e,t,n){var r,o,i=n.facet,a=i.viewCellHeights.getCellOffsetY,l=a(e+1),s=i.panelBBox.height,c=null==i?void 0:i.frozenGroupInfo,u=null!==(r=null==c?void 0:c.frozenRow.height)&&void 0!==r?r:0,d=null!==(o=null==c?void 0:c.frozenTrailingRow.height)&&void 0!==o?o:0;return t===Hy.LEADING?a(e)-u:l-(s-d)},bx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e,t){if(ta(e)&&ta(t))return t},r=nb(nb([],tb(e),!1),[n],!1);return Bh.apply(void 0,nb([{}],tb(r),!1))},Cx=function(e){var t=["rows","columns","values"].reduce((function(t,n){var r=e[n],o=Wm(r);return Np(o,r)||console.warn("fields.".concat(n,":[").concat(r,"] should be unique")),t[n]=o,t}),{});return Qy(Qy({},e),t)},wx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=bx.apply(void 0,nb([Fi],tb(e),!1));return n.fields=Cx(n.fields),Mp(n.fields.customTreeItems)&&!Mp(n.fields.values)||(n.fields.valueInCols=!1),n},xx=function(e){return bx(qy,e)},Ex=9e15,Sx=1e9,Lx="0123456789abcdef",Ox="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ix="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",_x={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ex,maxE:Ex,crypto:!1},Tx=!0,Ax="[DecimalError] ",Mx=Ax+"Invalid argument: ",Nx=Ax+"Precision limit exceeded",Rx=Ax+"crypto unavailable",Dx="[object Decimal]",kx=Math.floor,Bx=Math.pow,Px=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Fx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,jx=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zx=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gx=1e7,Hx=Ox.length-1,Wx=Ix.length-1,Ux={toStringTag:Dx};function Vx(e){var t,n,r,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)(n=7-(r=e[t]+"").length)&&(i+=nE(n)),i+=r;(n=7-(r=(a=e[t])+"").length)&&(i+=nE(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}function Yx(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Mx+e)}function $x(e,t,n,r){var o,i,a,l;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=7,o=0):(o=Math.ceil((t+1)/7),t%=7),i=Bx(10,7-t),l=e[o]%i|0,null==r?t<3?(0==t?l=l/100|0:1==t&&(l=l/10|0),a=n<4&&99999==l||n>3&&49999==l||5e4==l||0==l):a=(n<4&&l+1==i||n>3&&l+1==i/2)&&(e[o+1]/i/100|0)==Bx(10,t-2)-1||(l==i/2||0==l)&&0==(e[o+1]/i/100|0):t<4?(0==t?l=l/1e3|0:1==t?l=l/100|0:2==t&&(l=l/10|0),a=(r||n<4)&&9999==l||!r&&n>3&&4999==l):a=((r||n<4)&&l+1==i||!r&&n>3&&l+1==i/2)&&(e[o+1]/i/1e3|0)==Bx(10,t-3)-1,a}function Xx(e,t,n){for(var r,o,i=[0],a=0,l=e.length;a<l;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=Lx.indexOf(e.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}Ux.absoluteValue=Ux.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Kx(e)},Ux.ceil=function(){return Kx(new this.constructor(this),this.e+1,2)},Ux.clampedTo=Ux.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Mx+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},Ux.comparedTo=Ux.cmp=function(e){var t,n,r,o,i=this,a=i.d,l=(e=new i.constructor(e)).d,s=i.s,c=e.s;if(!a||!l)return s&&c?s!==c?s:a===l?0:!a^s<0?1:-1:NaN;if(!a[0]||!l[0])return a[0]?s:l[0]?-c:0;if(s!==c)return s;if(i.e!==e.e)return i.e>e.e^s<0?1:-1;for(t=0,n=(r=a.length)<(o=l.length)?r:o;t<n;++t)if(a[t]!==l[t])return a[t]>l[t]^s<0?1:-1;return r===o?0:r>o^s<0?1:-1},Ux.cosine=Ux.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,o;if(t.isZero())return t;(r=t.d.length)<32?o=(1/hE(4,n=Math.ceil(r/3))).toString():(n=16,o="2.3283064365386962890625e-10"),e.precision+=n,t=dE(e,1,t.times(o),new e(1));for(var i=n;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,fE(r,n)),r.precision=e,r.rounding=t,Kx(2==vx||3==vx?n.neg():n,e,t,!0)):new r(1):new r(NaN)},Ux.cubeRoot=Ux.cbrt=function(){var e,t,n,r,o,i,a,l,s,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(Tx=!1,(i=u.s*Bx(u.s*u,1/3))&&Math.abs(i)!=1/0?r=new d(i.toString()):(n=Vx(u.d),(i=((e=u.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=Bx(n,1/3),e=kx((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=u.s),a=(e=d.precision)+3;;)if(c=(s=(l=r).times(l).times(l)).plus(u),r=qx(c.plus(u).times(l),c.plus(s),a+2,1),Vx(l.d).slice(0,a)===(n=Vx(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(o||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Kx(r,e+1,1),t=!r.times(r).times(r).eq(u));break}if(!o&&(Kx(l,e+1,0),l.times(l).times(l).eq(u))){r=l;break}a+=4,o=1}return Tx=!0,Kx(r,e,d.rounding,t)},Ux.decimalPlaces=Ux.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-kx(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},Ux.dividedBy=Ux.div=function(e){return qx(this,new this.constructor(e))},Ux.dividedToIntegerBy=Ux.divToInt=function(e){var t=this.constructor;return Kx(qx(this,new t(e),0,1,1),t.precision,t.rounding)},Ux.equals=Ux.eq=function(e){return 0===this.cmp(e)},Ux.floor=function(){return Kx(new this.constructor(this),this.e+1,3)},Ux.greaterThan=Ux.gt=function(e){return this.cmp(e)>0},Ux.greaterThanOrEqualTo=Ux.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Ux.hyperbolicCosine=Ux.cosh=function(){var e,t,n,r,o,i=this,a=i.constructor,l=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return l;n=a.precision,r=a.rounding,a.precision=n+Math.max(i.e,i.sd())+4,a.rounding=1,(o=i.d.length)<32?t=(1/hE(4,e=Math.ceil(o/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=dE(a,1,i.times(t),new a(1),!0);for(var s,c=e,u=new a(8);c--;)s=i.times(i),i=l.minus(s.times(u.minus(s.times(u))));return Kx(i,a.precision=n,a.rounding=r,!0)},Ux.hyperbolicSine=Ux.sinh=function(){var e,t,n,r,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(o.e,o.sd())+4,i.rounding=1,(r=o.d.length)<3)o=dE(i,2,o,o,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,o=dE(i,2,o=o.times(1/hE(5,e)),o,!0);for(var a,l=new i(5),s=new i(16),c=new i(20);e--;)a=o.times(o),o=o.times(l.plus(a.times(s.times(a).plus(c))))}return i.precision=t,i.rounding=n,Kx(o,t,n,!0)},Ux.hyperbolicTangent=Ux.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,qx(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},Ux.inverseCosine=Ux.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),o=n.precision,i=n.rounding;return-1!==r?0===r?t.isNeg()?eE(n,o,i):new n(0):new n(NaN):t.isZero()?eE(n,o+4,i).times(.5):(n.precision=o+6,n.rounding=1,t=t.asin(),e=eE(n,o+4,i).times(.5),n.precision=o,n.rounding=i,e.minus(t))},Ux.inverseHyperbolicCosine=Ux.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Tx=!1,n=n.times(n).minus(1).sqrt().plus(n),Tx=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},Ux.inverseHyperbolicSine=Ux.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Tx=!1,n=n.times(n).plus(1).sqrt().plus(n),Tx=!0,r.precision=e,r.rounding=t,n.ln())},Ux.inverseHyperbolicTangent=Ux.atanh=function(){var e,t,n,r,o=this,i=o.constructor;return o.isFinite()?o.e>=0?new i(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(e=i.precision,t=i.rounding,r=o.sd(),Math.max(r,e)<2*-o.e-1?Kx(new i(o),e,t,!0):(i.precision=n=r-o.e,o=qx(o.plus(1),new i(1).minus(o),n+e,1),i.precision=e+4,i.rounding=1,o=o.ln(),i.precision=e,i.rounding=t,o.times(.5))):new i(NaN)},Ux.inverseSine=Ux.asin=function(){var e,t,n,r,o=this,i=o.constructor;return o.isZero()?new i(o):(t=o.abs().cmp(1),n=i.precision,r=i.rounding,-1!==t?0===t?((e=eE(i,n+4,r).times(.5)).s=o.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,o=o.div(new i(1).minus(o.times(o)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,o.times(2)))},Ux.inverseTangent=Ux.atan=function(){var e,t,n,r,o,i,a,l,s,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=Wx)return(a=eE(u,d+4,h).times(.25)).s=c.s,a}else{if(!c.s)return new u(NaN);if(d+4<=Wx)return(a=eE(u,d+4,h).times(.5)).s=c.s,a}for(u.precision=l=d+10,u.rounding=1,e=n=Math.min(28,l/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Tx=!1,t=Math.ceil(l/7),r=1,s=c.times(c),a=new u(c),o=c;-1!==e;)if(o=o.times(s),i=a.minus(o.div(r+=2)),o=o.times(s),void 0!==(a=i.plus(o.div(r+=2))).d[t])for(e=t;a.d[e]===i.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),Tx=!0,Kx(a,u.precision=d,u.rounding=h,!0)},Ux.isFinite=function(){return!!this.d},Ux.isInteger=Ux.isInt=function(){return!!this.d&&kx(this.e/7)>this.d.length-2},Ux.isNaN=function(){return!this.s},Ux.isNegative=Ux.isNeg=function(){return this.s<0},Ux.isPositive=Ux.isPos=function(){return this.s>0},Ux.isZero=function(){return!!this.d&&0===this.d[0]},Ux.lessThan=Ux.lt=function(e){return this.cmp(e)<0},Ux.lessThanOrEqualTo=Ux.lte=function(e){return this.cmp(e)<1},Ux.logarithm=Ux.log=function(e){var t,n,r,o,i,a,l,s,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new u(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(o=n[0];o%10==0;)o/=10;i=1!==o}if(Tx=!1,a=lE(c,l=d+5),r=t?Jx(u,l+10):lE(e,l),$x((s=qx(a,r,l,1)).d,o=d,h))do{if(a=lE(c,l+=10),r=t?Jx(u,l+10):lE(e,l),s=qx(a,r,l,1),!i){+Vx(s.d).slice(o+1,o+15)+1==1e14&&(s=Kx(s,d+1,0));break}}while($x(s.d,o+=10,h));return Tx=!0,Kx(s,d,h)},Ux.minus=Ux.sub=function(e){var t,n,r,o,i,a,l,s,c,u,d,h,f=this,p=f.constructor;if(e=new p(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new p(e.d||f.s!==e.s?f:NaN):e=new p(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,h=e.d,l=p.precision,s=p.rounding,!c[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!c[0])return new p(3===s?-0:0);e=new p(f)}return Tx?Kx(e,l,s):e}if(n=kx(e.e/7),u=kx(f.e/7),c=c.slice(),i=u-n){for((d=i<0)?(t=c,i=-i,a=h.length):(t=h,n=u,a=c.length),i>(r=Math.max(Math.ceil(l/7),a)+2)&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for((d=(r=c.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(c[r]!=h[r]){d=c[r]<h[r];break}i=0}for(d&&(t=c,c=h,h=t,e.s=-e.s),a=c.length,r=h.length-a;r>0;--r)c[a++]=0;for(r=h.length;r>i;){if(c[--r]<h[r]){for(o=r;o&&0===c[--o];)c[o]=Gx-1;--c[o],c[r]+=Gx}c[r]-=h[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=Qx(c,n),Tx?Kx(e,l,s):e):new p(3===s?-0:0)},Ux.modulo=Ux.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?Kx(new r(n),r.precision,r.rounding):(Tx=!1,9==r.modulo?(t=qx(n,e.abs(),0,3,1)).s*=e.s:t=qx(n,e,0,r.modulo,1),t=t.times(e),Tx=!0,n.minus(t))},Ux.naturalExponential=Ux.exp=function(){return aE(this)},Ux.naturalLogarithm=Ux.ln=function(){return lE(this)},Ux.negated=Ux.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Kx(e)},Ux.plus=Ux.add=function(e){var t,n,r,o,i,a,l,s,c,u,d=this,h=d.constructor;if(e=new h(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new h(e.d||d.s===e.s?d:NaN)):e=new h(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(c=d.d,u=e.d,l=h.precision,s=h.rounding,!c[0]||!u[0])return u[0]||(e=new h(d)),Tx?Kx(e,l,s):e;if(i=kx(d.e/7),r=kx(e.e/7),c=c.slice(),o=i-r){for(o<0?(n=c,o=-o,a=u.length):(n=u,r=i,a=c.length),o>(a=(i=Math.ceil(l/7))>a?i+1:a+1)&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((a=c.length)-(o=u.length)<0&&(o=a,n=u,u=c,c=n),t=0;o;)t=(c[--o]=c[o]+u[o]+t)/Gx|0,c[o]%=Gx;for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=Qx(c,r),Tx?Kx(e,l,s):e},Ux.precision=Ux.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Mx+e);return n.d?(t=tE(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},Ux.round=function(){var e=this,t=e.constructor;return Kx(new t(e),e.e+1,t.rounding)},Ux.sine=Ux.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:dE(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=dE(e,2,t=t.times(1/hE(5,n)),t);for(var o,i=new e(5),a=new e(16),l=new e(20);n--;)o=t.times(t),t=t.times(i.plus(o.times(a.times(o).minus(l))));return t}(r,fE(r,n)),r.precision=e,r.rounding=t,Kx(vx>2?n.neg():n,e,t,!0)):new r(NaN)},Ux.squareRoot=Ux.sqrt=function(){var e,t,n,r,o,i,a=this,l=a.d,s=a.e,c=a.s,u=a.constructor;if(1!==c||!l||!l[0])return new u(!c||c<0&&(!l||l[0])?NaN:l?a:1/0);for(Tx=!1,0==(c=Math.sqrt(+a))||c==1/0?(((t=Vx(l)).length+s)%2==0&&(t+="0"),c=Math.sqrt(t),s=kx((s+1)/2)-(s<0||s%2),r=new u(t=c==1/0?"5e"+s:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+s)):r=new u(c.toString()),n=(s=u.precision)+3;;)if(r=(i=r).plus(qx(a,i,n+2,1)).times(.5),Vx(i.d).slice(0,n)===(t=Vx(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Kx(r,s+1,1),e=!r.times(r).eq(a));break}if(!o&&(Kx(i,s+1,0),i.times(i).eq(a))){r=i;break}n+=4,o=1}return Tx=!0,Kx(r,s,u.rounding,e)},Ux.tangent=Ux.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=qx(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,Kx(2==vx||4==vx?n.neg():n,e,t,!0)):new r(NaN)},Ux.times=Ux.mul=function(e){var t,n,r,o,i,a,l,s,c,u=this,d=u.constructor,h=u.d,f=(e=new d(e)).d;if(e.s*=u.s,!(h&&h[0]&&f&&f[0]))return new d(!e.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*e.s:e.s/0);for(n=kx(u.e/7)+kx(e.e/7),(s=h.length)<(c=f.length)&&(i=h,h=f,f=i,a=s,s=c,c=a),i=[],r=a=s+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,o=s+r;o>r;)l=i[o]+f[r]*h[o-r-1]+t,i[o--]=l%Gx|0,t=l/Gx|0;i[o]=(i[o]+t)%Gx|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=Qx(i,n),Tx?Kx(e,d.precision,d.rounding):e},Ux.toBinary=function(e,t){return pE(this,2,e,t)},Ux.toDecimalPlaces=Ux.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(Yx(e,0,Sx),void 0===t?t=r.rounding:Yx(t,0,8),Kx(n,e+n.e+1,t))},Ux.toExponential=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=Zx(r,!0):(Yx(e,0,Sx),void 0===t?t=o.rounding:Yx(t,0,8),n=Zx(r=Kx(new o(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},Ux.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return void 0===e?n=Zx(o):(Yx(e,0,Sx),void 0===t?t=i.rounding:Yx(t,0,8),n=Zx(r=Kx(new i(o),e+o.e+1,t),!1,e+r.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n},Ux.toFraction=function(e){var t,n,r,o,i,a,l,s,c,u,d,h,f=this,p=f.d,v=f.constructor;if(!p)return new v(f);if(c=n=new v(1),r=s=new v(0),a=(i=(t=new v(r)).e=tE(p)-f.e-1)%7,t.d[0]=Bx(10,a<0?7+a:a),null==e)e=i>0?t:c;else{if(!(l=new v(e)).isInt()||l.lt(c))throw Error(Mx+l);e=l.gt(t)?i>0?t:c:l}for(Tx=!1,l=new v(Vx(p)),u=v.precision,v.precision=i=7*p.length*2;d=qx(l,t,0,1,1),1!=(o=n.plus(d.times(r))).cmp(e);)n=r,r=o,o=c,c=s.plus(d.times(o)),s=o,o=t,t=l.minus(d.times(o)),l=o;return o=qx(e.minus(n),r,0,1,1),s=s.plus(o.times(c)),n=n.plus(o.times(r)),s.s=c.s=f.s,h=qx(c,r,i,1).minus(f).abs().cmp(qx(s,n,i,1).minus(f).abs())<1?[c,r]:[s,n],v.precision=u,Tx=!0,h},Ux.toHexadecimal=Ux.toHex=function(e,t){return pE(this,16,e,t)},Ux.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:Yx(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Tx=!1,n=qx(n,e,0,t,1).times(e),Tx=!0,Kx(n)):(e.s=n.s,n=e),n},Ux.toNumber=function(){return+this},Ux.toOctal=function(e,t){return pE(this,8,e,t)},Ux.toPower=Ux.pow=function(e){var t,n,r,o,i,a,l=this,s=l.constructor,c=+(e=new s(e));if(!(l.d&&e.d&&l.d[0]&&e.d[0]))return new s(Bx(+l,c));if((l=new s(l)).eq(1))return l;if(r=s.precision,i=s.rounding,e.eq(1))return Kx(l,r,i);if((t=kx(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return o=rE(s,l,n,r),e.s<0?new s(1).div(o):Kx(o,r,i);if((a=l.s)<0){if(t<e.d.length-1)return new s(NaN);if(0==(1&e.d[t])&&(a=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=a,l}return(t=0!=(n=Bx(+l,c))&&isFinite(n)?new s(n+"").e:kx(c*(Math.log("0."+Vx(l.d))/Math.LN10+l.e+1)))>s.maxE+1||t<s.minE-1?new s(t>0?a/0:0):(Tx=!1,s.rounding=l.s=1,n=Math.min(12,(t+"").length),(o=aE(e.times(lE(l,r+n)),r)).d&&$x((o=Kx(o,r+5,1)).d,r,i)&&(t=r+10,+Vx((o=Kx(aE(e.times(lE(l,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(o=Kx(o,r+1,0))),o.s=a,Tx=!0,s.rounding=i,Kx(o,r,i))},Ux.toPrecision=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=Zx(r,r.e<=o.toExpNeg||r.e>=o.toExpPos):(Yx(e,1,Sx),void 0===t?t=o.rounding:Yx(t,0,8),n=Zx(r=Kx(new o(r),e,t),e<=r.e||r.e<=o.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},Ux.toSignificantDigits=Ux.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(Yx(e,1,Sx),void 0===t?t=n.rounding:Yx(t,0,8)),Kx(new n(this),e,t)},Ux.toString=function(){var e=this,t=e.constructor,n=Zx(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Ux.truncated=Ux.trunc=function(){return Kx(new this.constructor(this),this.e+1,1)},Ux.valueOf=Ux.toJSON=function(){var e=this,t=e.constructor,n=Zx(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var qx=function(){function e(e,t,n){var r,o=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+o,e[i]=r%n|0,o=r/n|0;return o&&e.unshift(o),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,o,i,a,l,s){var c,u,d,h,f,p,v,g,m,y,b,C,w,x,E,S,L,O,I,_,T=r.constructor,A=r.s==o.s?1:-1,M=r.d,N=o.d;if(!(M&&M[0]&&N&&N[0]))return new T(r.s&&o.s&&(M?!N||M[0]!=N[0]:N)?M&&0==M[0]||!N?0*A:A/0:NaN);for(s?(f=1,u=r.e-o.e):(s=Gx,f=7,u=kx(r.e/f)-kx(o.e/f)),I=N.length,L=M.length,y=(m=new T(A)).d=[],d=0;N[d]==(M[d]||0);d++);if(N[d]>(M[d]||0)&&u--,null==i?(x=i=T.precision,a=T.rounding):x=l?i+(r.e-o.e)+1:i,x<0)y.push(1),p=!0;else{if(x=x/f+2|0,d=0,1==I){for(h=0,N=N[0],x++;(d<L||h)&&x--;d++)E=h*s+(M[d]||0),y[d]=E/N|0,h=E%N|0;p=h||d<L}else{for((h=s/(N[0]+1)|0)>1&&(N=e(N,h,s),M=e(M,h,s),I=N.length,L=M.length),S=I,C=(b=M.slice(0,I)).length;C<I;)b[C++]=0;(_=N.slice()).unshift(0),O=N[0],N[1]>=s/2&&++O;do{h=0,(c=t(N,b,I,C))<0?(w=b[0],I!=C&&(w=w*s+(b[1]||0)),(h=w/O|0)>1?(h>=s&&(h=s-1),1==(c=t(v=e(N,h,s),b,g=v.length,C=b.length))&&(h--,n(v,I<g?_:N,g,s))):(0==h&&(c=h=1),v=N.slice()),(g=v.length)<C&&v.unshift(0),n(b,v,C,s),-1==c&&(c=t(N,b,I,C=b.length))<1&&(h++,n(b,I<C?_:N,C,s)),C=b.length):0===c&&(h++,b=[0]),y[d++]=h,c&&b[0]?b[C++]=M[S]||0:(b=[M[S]],C=1)}while((S++<L||void 0!==b[0])&&x--);p=void 0!==b[0]}y[0]||y.shift()}if(1==f)m.e=u,px=p;else{for(d=1,h=y[0];h>=10;h/=10)d++;m.e=d+u*f-1,Kx(m,l?i+m.e+1:i,a,p)}return m}}();function Kx(e,t,n,r){var o,i,a,l,s,c,u,d,h,f=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(o=1,l=d[0];l>=10;l/=10)o++;if((i=t-o)<0)i+=7,a=t,s=(u=d[h=0])/Bx(10,o-a-1)%10|0;else if((h=Math.ceil((i+1)/7))>=(l=d.length)){if(!r)break e;for(;l++<=h;)d.push(0);u=s=0,o=1,a=(i%=7)-7+1}else{for(u=l=d[h],o=1;l>=10;l/=10)o++;s=(a=(i%=7)-7+o)<0?0:u/Bx(10,o-a-1)%10|0}if(r=r||t<0||void 0!==d[h+1]||(a<0?u:u%Bx(10,o-a-1)),c=n<4?(s||r)&&(0==n||n==(e.s<0?3:2)):s>5||5==s&&(4==n||r||6==n&&(i>0?a>0?u/Bx(10,o-a):0:d[h-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,c?(t-=e.e+1,d[0]=Bx(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=h,l=1,h--):(d.length=h+1,l=Bx(10,7-i),d[h]=a>0?(u/Bx(10,o-a)%Bx(10,a)|0)*l:0),c)for(;;){if(0==h){for(i=1,a=d[0];a>=10;a/=10)i++;for(a=d[0]+=l,l=1;a>=10;a/=10)l++;i!=l&&(e.e++,d[0]==Gx&&(d[0]=1));break}if(d[h]+=l,d[h]!=Gx)break;d[h--]=0,l=1}for(i=d.length;0===d[--i];)d.pop()}return Tx&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function Zx(e,t,n){if(!e.isFinite())return sE(e);var r,o=e.e,i=Vx(e.d),a=i.length;return t?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+nE(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):o<0?(i="0."+nE(-o-1)+i,n&&(r=n-a)>0&&(i+=nE(r))):o>=a?(i+=nE(o+1-a),n&&(r=n-o-1)>0&&(i=i+"."+nE(r))):((r=o+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(o+1===a&&(i+="."),i+=nE(r))),i}function Qx(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function Jx(e,t,n){if(t>Hx)throw Tx=!0,n&&(e.precision=n),Error(Nx);return Kx(new e(Ox),t,1,!0)}function eE(e,t,n){if(t>Wx)throw Error(Nx);return Kx(new e(Ix),t,n,!0)}function tE(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function nE(e){for(var t="";e--;)t+="0";return t}function rE(e,t,n,r){var o,i=new e(1),a=Math.ceil(r/7+4);for(Tx=!1;;){if(n%2&&vE((i=i.times(t)).d,a)&&(o=!0),0===(n=kx(n/2))){n=i.d.length-1,o&&0===i.d[n]&&++i.d[n];break}vE((t=t.times(t)).d,a)}return Tx=!0,i}function oE(e){return 1&e.d[e.d.length-1]}function iE(e,t,n){for(var r,o=new e(t[0]),i=0;++i<t.length;){if(!(r=new e(t[i])).s){o=r;break}o[n](r)&&(o=r)}return o}function aE(e,t){var n,r,o,i,a,l,s,c=0,u=0,d=0,h=e.constructor,f=h.rounding,p=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Tx=!1,s=p):s=t,l=new h(.03125);e.e>-2;)e=e.times(l),d+=5;for(s+=r=Math.log(Bx(2,d))/Math.LN10*2+5|0,n=i=a=new h(1),h.precision=s;;){if(i=Kx(i.times(e),s,1),n=n.times(++u),Vx((l=a.plus(qx(i,n,s,1))).d).slice(0,s)===Vx(a.d).slice(0,s)){for(o=d;o--;)a=Kx(a.times(a),s,1);if(null!=t)return h.precision=p,a;if(!(c<3&&$x(a.d,s-r,f,c)))return Kx(a,h.precision=p,f,Tx=!0);h.precision=s+=10,n=i=l=new h(1),u=0,c++}a=l}}function lE(e,t){var n,r,o,i,a,l,s,c,u,d,h,f=1,p=e,v=p.d,g=p.constructor,m=g.rounding,y=g.precision;if(p.s<0||!v||!v[0]||!p.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=p.s?NaN:v?0:p);if(null==t?(Tx=!1,u=y):u=t,g.precision=u+=10,r=(n=Vx(v)).charAt(0),!(Math.abs(i=p.e)<15e14))return c=Jx(g,u+2,y).times(i+""),p=lE(new g(r+"."+n.slice(1)),u-10).plus(c),g.precision=y,null==t?Kx(p,y,m,Tx=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Vx((p=p.times(e)).d)).charAt(0),f++;for(i=p.e,r>1?(p=new g("0."+n),i++):p=new g(r+"."+n.slice(1)),d=p,s=a=p=qx(p.minus(1),p.plus(1),u,1),h=Kx(p.times(p),u,1),o=3;;){if(a=Kx(a.times(h),u,1),Vx((c=s.plus(qx(a,new g(o),u,1))).d).slice(0,u)===Vx(s.d).slice(0,u)){if(s=s.times(2),0!==i&&(s=s.plus(Jx(g,u+2,y).times(i+""))),s=qx(s,new g(f),u,1),null!=t)return g.precision=y,s;if(!$x(s.d,u-10,m,l))return Kx(s,g.precision=y,m,Tx=!0);g.precision=u+=10,c=a=p=qx(d.minus(1),d.plus(1),u,1),h=Kx(p.times(p),u,1),o=l=1}s=c,o+=2}}function sE(e){return String(e.s*e.s/0)}function cE(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(o=t.length;48===t.charCodeAt(o-1);--o);if(t=t.slice(r,o)){if(o-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=7;r<o;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=o;for(;r--;)t+="0";e.d.push(+t),Tx&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function uE(e,t){var n,r,o,i,a,l,s,c,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),zx.test(t))return cE(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Fx.test(t))n=16,t=t.toLowerCase();else if(Px.test(t))n=2;else{if(!jx.test(t))throw Error(Mx+t);n=8}for((i=t.search(/p/i))>0?(s=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),a=(i=t.indexOf("."))>=0,r=e.constructor,a&&(i=(l=(t=t.replace(".","")).length)-i,o=rE(r,new r(n),i,2*i)),i=u=(c=Xx(t,n,Gx)).length-1;0===c[i];--i)c.pop();return i<0?new r(0*e.s):(e.e=Qx(c,u),e.d=c,Tx=!1,a&&(e=qx(e,o,4*l)),s&&(e=e.times(Math.abs(s)<54?Bx(2,s):rS.pow(2,s))),Tx=!0,e)}function dE(e,t,n,r,o){var i,a,l,s,c=e.precision,u=Math.ceil(c/7);for(Tx=!1,s=n.times(n),l=new e(r);;){if(a=qx(l.times(s),new e(t++*t++),c,1),l=o?r.plus(a):r.minus(a),r=qx(a.times(s),new e(t++*t++),c,1),void 0!==(a=l.plus(r)).d[u]){for(i=u;a.d[i]===l.d[i]&&i--;);if(-1==i)break}i=l,l=r,r=a,a=i}return Tx=!0,a.d.length=u+1,a}function hE(e,t){for(var n=e;--t;)n*=e;return n}function fE(e,t){var n,r=t.s<0,o=eE(e,e.precision,1),i=o.times(.5);if((t=t.abs()).lte(i))return vx=r?4:1,t;if((n=t.divToInt(o)).isZero())vx=r?3:2;else{if((t=t.minus(n.times(o))).lte(i))return vx=oE(n)?r?2:3:r?4:1,t;vx=oE(n)?r?1:4:r?3:2}return t.minus(o).abs()}function pE(e,t,n,r){var o,i,a,l,s,c,u,d,h,f=e.constructor,p=void 0!==n;if(p?(Yx(n,1,Sx),void 0===r?r=f.rounding:Yx(r,0,8)):(n=f.precision,r=f.rounding),e.isFinite()){for(p?(o=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):o=t,(a=(u=Zx(e)).indexOf("."))>=0&&(u=u.replace(".",""),(h=new f(1)).e=u.length-a,h.d=Xx(Zx(h),10,o),h.e=h.d.length),i=s=(d=Xx(u,10,o)).length;0==d[--s];)d.pop();if(d[0]){if(a<0?i--:((e=new f(e)).d=d,e.e=i,d=(e=qx(e,h,n,r,0,o)).d,i=e.e,c=px),a=d[n],l=o/2,c=c||void 0!==d[n+1],c=r<4?(void 0!==a||c)&&(0===r||r===(e.s<0?3:2)):a>l||a===l&&(4===r||c||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,c)for(;++d[--n]>o-1;)d[n]=0,n||(++i,d.unshift(1));for(s=d.length;!d[s-1];--s);for(a=0,u="";a<s;a++)u+=Lx.charAt(d[a]);if(p){if(s>1)if(16==t||8==t){for(a=16==t?4:3,--s;s%a;s++)u+="0";for(s=(d=Xx(u,o,t)).length;!d[s-1];--s);for(a=1,u="1.";a<s;a++)u+=Lx.charAt(d[a])}else u=u.charAt(0)+"."+u.slice(1);u=u+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)u="0"+u;u="0."+u}else if(++i>s)for(i-=s;i--;)u+="0";else i<s&&(u=u.slice(0,i)+"."+u.slice(i))}else u=p?"0p+0":"0";u=(16==t?"0x":2==t?"0b":8==t?"0o":"")+u}else u=sE(e);return e.s<0?"-"+u:u}function vE(e,t){if(e.length>t)return e.length=t,!0}function gE(e){return new this(e).abs()}function mE(e){return new this(e).acos()}function yE(e){return new this(e).acosh()}function bE(e,t){return new this(e).plus(t)}function CE(e){return new this(e).asin()}function wE(e){return new this(e).asinh()}function xE(e){return new this(e).atan()}function EE(e){return new this(e).atanh()}function SE(e,t){e=new this(e),t=new this(t);var n,r=this.precision,o=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?eE(this,r,o):new this(0)).s=e.s:!e.d||t.isZero()?(n=eE(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(qx(e,t,i,1)),t=eE(this,i,1),this.precision=r,this.rounding=o,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(qx(e,t,i,1)):(n=eE(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function LE(e){return new this(e).cbrt()}function OE(e){return Kx(e=new this(e),e.e+1,2)}function IE(e,t,n){return new this(e).clamp(t,n)}function _E(e){if(!e||"object"!=typeof e)throw Error(Ax+"Object expected");var t,n,r,o=!0===e.defaults,i=["precision",1,Sx,"rounding",0,8,"toExpNeg",-Ex,0,"toExpPos",0,Ex,"maxE",0,Ex,"minE",-Ex,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],o&&(this[n]=_x[n]),void 0!==(r=e[n])){if(!(kx(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(Mx+n+": "+r);this[n]=r}if(n="crypto",o&&(this[n]=_x[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(Mx+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Rx);this[n]=!0}else this[n]=!1}return this}function TE(e){return new this(e).cos()}function AE(e){return new this(e).cosh()}function ME(e,t){return new this(e).div(t)}function NE(e){return new this(e).exp()}function RE(e){return Kx(e=new this(e),e.e+1,3)}function DE(){var e,t,n=new this(0);for(Tx=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Tx=!0,new this(1/0);n=t}return Tx=!0,n.sqrt()}function kE(e){return e instanceof rS||e&&e.toStringTag===Dx||!1}function BE(e){return new this(e).ln()}function PE(e,t){return new this(e).log(t)}function FE(e){return new this(e).log(2)}function jE(e){return new this(e).log(10)}function zE(){return iE(this,arguments,"lt")}function GE(){return iE(this,arguments,"gt")}function HE(e,t){return new this(e).mod(t)}function WE(e,t){return new this(e).mul(t)}function UE(e,t){return new this(e).pow(t)}function VE(e){var t,n,r,o,i=0,a=new this(1),l=[];if(void 0===e?e=this.precision:Yx(e,1,Sx),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)(o=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:l[i++]=o%1e7;else{if(!crypto.randomBytes)throw Error(Rx);for(t=crypto.randomBytes(r*=4);i<r;)(o=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(l.push(o%1e7),i+=4);i=r/4}else for(;i<r;)l[i++]=1e7*Math.random()|0;for(e%=7,(r=l[--i])&&e&&(o=Bx(10,7-e),l[i]=(r/o|0)*o);0===l[i];i--)l.pop();if(i<0)n=0,l=[0];else{for(n=-1;0===l[0];n-=7)l.shift();for(r=1,o=l[0];o>=10;o/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=l,a}function YE(e){return Kx(e=new this(e),e.e+1,this.rounding)}function $E(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function XE(e){return new this(e).sin()}function qE(e){return new this(e).sinh()}function KE(e){return new this(e).sqrt()}function ZE(e,t){return new this(e).sub(t)}function QE(){var e=0,t=arguments,n=new this(t[e]);for(Tx=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Tx=!0,Kx(n,this.precision,this.rounding)}function JE(e){return new this(e).tan()}function eS(e){return new this(e).tanh()}function tS(e){return Kx(e=new this(e),e.e+1,1)}Ux[Symbol.for("nodejs.util.inspect.custom")]=Ux.toString,Ux[Symbol.toStringTag]="Decimal";var nS,rS=Ux.constructor=function e(t){var n,r,o;function i(e){var t,n,r,o=this;if(!(o instanceof i))return new i(e);if(o.constructor=i,kE(e))return o.s=e.s,void(Tx?!e.d||e.e>i.maxE?(o.e=NaN,o.d=null):e.e<i.minE?(o.e=0,o.d=[0]):(o.e=e.e,o.d=e.d.slice()):(o.e=e.e,o.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return o.s=1/e<0?-1:1,o.e=0,void(o.d=[0]);if(e<0?(e=-e,o.s=-1):o.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(Tx?t>i.maxE?(o.e=NaN,o.d=null):t<i.minE?(o.e=0,o.d=[0]):(o.e=t,o.d=[e]):(o.e=t,o.d=[e]))}return 0*e!=0?(e||(o.s=NaN),o.e=NaN,void(o.d=null)):cE(o,e.toString())}if("string"!==r)throw Error(Mx+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),o.s=-1):(43===n&&(e=e.slice(1)),o.s=1),zx.test(e)?cE(o,e):uE(o,e)}if(i.prototype=Ux,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=_E,i.clone=e,i.isDecimal=kE,i.abs=gE,i.acos=mE,i.acosh=yE,i.add=bE,i.asin=CE,i.asinh=wE,i.atan=xE,i.atanh=EE,i.atan2=SE,i.cbrt=LE,i.ceil=OE,i.clamp=IE,i.cos=TE,i.cosh=AE,i.div=ME,i.exp=NE,i.floor=RE,i.hypot=DE,i.ln=BE,i.log=PE,i.log10=jE,i.log2=FE,i.max=zE,i.min=GE,i.mod=HE,i.mul=WE,i.pow=UE,i.random=VE,i.round=YE,i.sign=$E,i.sin=XE,i.sinh=qE,i.sqrt=KE,i.sub=ZE,i.sum=QE,i.tan=JE,i.tanh=eS,i.trunc=tS,void 0===t&&(t={}),t&&!0!==t.defaults)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<o.length;)t.hasOwnProperty(r=o[n++])||(t[r]=this[r]);return i.config(t),i}(_x);Ox=new rS(Ox),Ix=new rS(Ix);var oS,iS=function(e){return"number"==typeof e?Number.isNaN(e):!e||"string"!=typeof e||Number.isNaN(Number(e))},aS=function(e,t,n){return void 0===n&&(n=!1),(null==e?void 0:e.length)?e.reduce((function(e,r){var o=ic(r,t),i=iS(o);if(n&&i)return e;var a=i?0:o;return e.push(new rS(a)),e}),[]):[]},lS=function(e,t){var n=aS(e,t);return n.length?rS.sum.apply(rS,nb([],tb(n),!1)).toNumber():0},sS=function(e,t,n){var r=aS(t,n,!0);if(null==r?void 0:r.length)return rS[e].apply(rS,nb([],tb(r),!1)).toNumber()},cS=((nS={})[Gb.SUM]=lS,nS[Gb.MIN]=function(e,t){return sS("min",e,t)},nS[Gb.MAX]=function(e,t){return sS("max",e,t)},nS[Gb.AVG]=function(e,t){var n=aS(e,t);return(null==n?void 0:n.length)?rS.sum.apply(rS,nb([],tb(n),!1)).dividedBy(n.length).toNumber():0},nS),uS=function(e){return Qy({operator:{onClick:Ka,menus:[]},enterable:!0,enableFormat:!0},e)},dS=function(e){return Qy(Qy({},null==e?void 0:e.colQuery),null==e?void 0:e.rowQuery)},hS=function(e,t){var n;if(e){var r=t.style,o=t.className,i=void 0===o?[]:o,a=t.visible;if(r&&Object.assign(e.style,r),i.length){var l=i.filter(Boolean);(n=e.classList).add.apply(n,nb([],tb(l),!1))}e.classList.toggle(bb,a),e.classList.toggle(Cb,!a)}},fS=function(e,t){var n,r=null===(n=null==e?void 0:e.dataSet)||void 0===n?void 0:n.getFieldFormatter(t);return function(e,t){return o=kp(n=r(e,t))&&Number.isNaN(n),i=""===n,Fp(n)||o||i?"-":n;var n,o,i}},pS=function(e,t){var n,r=t.data,o=t.field,i=t.valueField,a=t.useCompleteDataForFormatter,l=void 0===a||a,s=null===(n=null==e?void 0:e.dataSet)||void 0===n?void 0:n.getFieldName(o),c=fS(e,o),u=da(r[o])?JSON.stringify(r[o]):r[o];return{name:s,value:c(i||u,l?r:void 0)}},vS=function(e,t,n){return kf(Ef(Dd([],t),(function(e){return e!==oi&&n[e]})),(function(t){return pS(e,{data:n,field:t,useCompleteDataForFormatter:!1})}))},gS=function(e,t,n){void 0===n&&(n=!0);var r=[];return tf(t,(function(t,o){tf(e,(function(e){n||-1===e.colIndex?n&&-1!==e.rowIndex&&r.push([e.rowIndex,o]):r.push([o,e.colIndex])}))})),r},mS=function(e){var t=e.spreadsheet,n=e.getShowValue,r=e.targetCell,o=e.options,i=void 0===o?{}:o,a=[],l={},s=t.isTableMode();return s&&(null==i?void 0:i.showSingleTips)?[{selectedData:t.dataSet.getMultiData({}),name:"",value:""}]:(tf(function(e,t,n){var r,o=null===(r=e.facet)||void 0===r?void 0:r.layoutResult,i=function(e){var n=null==t?void 0:t.getMeta(),r=null==n?void 0:n.isTotals,i=(null==t?void 0:t.cellType)===uy.COL_CELL,a=(null==t?void 0:t.cellType)===uy.ROW_CELL;if(!i&&!a)return!1;var l=o.colNodes.find((function(t){return t.colIndex===e.colIndex})),s=o.rowNodes.find((function(t){return t.rowIndex===e.rowIndex})),c=i?null==s?void 0:s.isTotals:null==l?void 0:l.isTotals;return!r&&(null==e?void 0:e.isTotals)||r&&c};if(n){var a=function(e,t){var n,r=t.rowLeafNodes,o=t.colLeafNodes,i=e.interaction.getState(),a=i.nodes,l=void 0===a?[]:a,s=i.cells,c=void 0===s?[]:s,u=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.type;return u===uy.COL_CELL?gS(l,r,!1):u===uy.ROW_CELL?gS(l,o):[]}(e,o);return Rd(kf(a,(function(e){var t=tb(e,2),n=t[0],r=t[1],a=o.getCellMeta(n,r);if(!i(a))return(null==a?void 0:a.data)||dS(a)})))}return e.interaction.getCells().filter((function(e){var t=o.getCellMeta(e.rowIndex,e.colIndex);return!i(t)})).map((function(e){var t=o.getCellMeta(e.rowIndex,e.colIndex);return(null==t?void 0:t.data)||dS(t)}))}(t,r,i.showSingleTips),(function(e){var t;l[null==e?void 0:e[oi]]?null===(t=l[null==e?void 0:e[oi]])||void 0===t||t.push(e):l[null==e?void 0:e[oi]]=[e]})),Qp(l,(function(e,r){var o,c=function(e,t,n){var r;if(n)return gb("总计");var o=null===(r=null==e?void 0:e.dataSet)||void 0===r?void 0:r.getFieldName(t);return o&&"undefined"!==o?o:""}(t,r,null==i?void 0:i.isTotals),u=null==n?void 0:n(e,ri);if(s)u="";else if(Cf(e,(function(e){return iS(ic(e,ri))}))){var d=t.options.placeholder;u=LC(l,d)}else{var h=fS(t,r),f=lS(e,ri);u=null!==(o=null==h?void 0:h(f,e))&&void 0!==o?o:parseFloat(f.toPrecision(16))}a.push({selectedData:e,name:c,value:u})})),a)},yS=function(e){var t=e.spreadsheet,n=e.cellInfos,r=void 0===n?[]:n,o=e.options,i=void 0===o?{}:o,a=e.getShowValue,l=e.targetCell,s=null,c=null,u=null,d=function(e){if(e){var t=e.getMeta();if(!t.isTotals){var n=If(t.spreadsheet.dataCfg.meta,{field:t.field||t.value||t.valueField}),r=null==n?void 0:n.field;return t.spreadsheet.dataSet.getFieldDescription(r)}}}(l),h=r[0]||{};if(null==i?void 0:i.hideSummary)if(i.showSingleTips){var f=fS(t,h.valueField)(h.value),p=i.enableFormat?t.dataSet.getFieldName(h.value)||f:t.dataSet.getFieldName(h.valueField);h.name=p||""}else c=function(e,t,n){var r,o,i,a,l=(n||{}).isTotals,s=[],c=[];if(t){var u=null===(o=null===(r=null==e?void 0:e.dataSet)||void 0===r?void 0:r.fields)||void 0===o?void 0:o.columns,d=null===(a=null===(i=null==e?void 0:e.dataSet)||void 0===i?void 0:i.fields)||void 0===a?void 0:a.rows;s=vS(e,u,t),c=vS(e,d,t)}return Mp(s)&&Mp(c)&&l&&(s=[{value:gb("总计")}]),{cols:s,rows:c}}(t,h,i),u=function(e,t,n){if(t){var r=n.isTotals,o=t[oi],i=t[o],a=[];if(r)a.push(pS(e,{data:t,field:o,valueField:ic(t,ri)}));else if(function(e){return da(e)&&"values"in e}(i)&&e.getTooltipDataItemMappingCallback()){var l=ow(t,e.getTooltipDataItemMappingCallback());tf(l,(function(t,n){a.push(pS(e,{data:l,field:n}))}))}else a.push(pS(e,{data:t,field:o}));return a}}(t,h,i);else s=mS({spreadsheet:t,options:i,targetCell:l,getShowValue:a});var v=h||{};return{summaries:s,interpretation:v.interpretation,infos:v.infos,tips:v.tips,name:v.name,headInfo:c,details:u,description:d}},bS=function(e){if(!e.interaction.isSelectedState())return[];var t=e.dataCfg.fields.valueInCols;return e.interaction.getCells().reduce((function(n,r){var o=e.facet.layoutResult.getCellMeta(null==r?void 0:r.rowIndex,null==r?void 0:r.colIndex),i=dS(o);if(Mp(o)||Mp(i))return[];var a=Qy(Qy({},i),{colIndex:t?o.colIndex:null,rowIndex:t?null:o.rowIndex});return n.find((function(e){return Np(a,e)}))||n.push(a),n}),[])},CS=function(e,t){var n;if(t&&e){var r=null===(n=e.getCellType)||void 0===n?void 0:n.call(e,null==t?void 0:t.target);return function(e,t){void 0===e&&(e={});var n=function(t){return bx(e,t)},r=e.col,o=e.row,i=e.data,a=e.corner;return t===uy.COL_CELL?n(r):t===uy.ROW_CELL?n(o):t===uy.DATA_CELL?n(i):t===uy.CORNER_CELL?n(a):Qy({},e)}(e.options.tooltip,r)}},wS=function(e,t){var n=t.defaultMenus,r=void 0===n?[]:n,o=t.cell,i=function(e){return void 0===e&&(e=[]),e.filter((function(e){var t;return Ca(e.visible)?e.visible(o):null===(t=e.visible)||void 0===t||t})).map((function(e){return e.children&&(e.children=i(e.children)),e}))},a=i(e.menus);return{onClick:e.onClick,menus:Rd(nb(nb([],tb(r),!1),tb(a),!1))}},xS=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"".concat(Ri,"-").concat(e.join("-"))},ES=function(){function e(e){var t=this;this.getFieldMeta=Ks((function(e,n){return If(t.meta||n,(function(t){return t.field===e}))})),this.spreadsheet=e}return e.prototype.getFieldName=function(e){return ic(this.getFieldMeta(e,this.meta),"name",e)},e.prototype.getFieldFormatter=function(e){return ic(this.getFieldMeta(e,this.meta),"formatter",ba)},e.prototype.getFieldDescription=function(e){return ic(this.getFieldMeta(e,this.meta),"description")},e.prototype.setDataCfg=function(e){this.getFieldMeta.cache.clear();var t=this.processDataCfg(e),n=t.fields,r=t.meta,o=t.data,i=t.totalData,a=t.sortParams,l=t.filterParams;this.fields=n,this.meta=r,this.originData=o,this.totalData=i,this.sortParams=a,this.filterParams=l,this.displayData=this.originData,this.indexesData=[]},e.prototype.getDisplayDataSet=function(){return this.displayData},e.prototype.getValueRangeByField=function(e){var t,n,r,o=(n=this.spreadsheet,r=e,n.store.get(Di,ki)[r]);if(o)return o;var i=Rd(kf(this.originData,(function(t){var n=t[e];return Fp(n)?null:Number.parseFloat(n)}))),a={maxValue:tv(i),minValue:dv(i)};return function(e,t){var n=e.store.get(Di,ki);e.store.set(Di,Qy(Qy({},n),t))}(this.spreadsheet,((t={})[e]=a,t)),a},e.prototype.moreThanOneValue=function(){var e,t;return(null===(t=null===(e=this.fields)||void 0===e?void 0:e.values)||void 0===t?void 0:t.length)>1},e}(),SS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDimensionValuesSort=function(){tf(t.sortParams,(function(e){var n=e.sortFieldId,r=e.sortByMeasure;if(n){var o=nb([],tb(t.sortedDimensionValues[n]||[]),!1),i=Pw({dataSet:t,sortParam:e,originValues:o,isSortByMeasure:!Mp(r)});t.sortedDimensionValues[n]=i}}))},t.getCustomData=function(e){for(var n,r=!1,o=t.indexesData,i=function(t){var i=e[t];r?o=Gp(i)?Kb(o):null===(n=np(o))||void 0===n?void 0:n.map((function(e){return e&&ic(e,i)})):Gp(i)?r=!0:o=null==o?void 0:o[i]},a=0;a<e.length;a++)i(a);return o},t.getTotalStatus=function(e){var n=t.fields,r=n.columns,o=n.rows,i=function(t,n){if(n){var r=If(t,(function(t){return!Kf(e,t)}));return r&&r!==Rf(t)}return Cf(t,(function(t){return!Kf(e,t)}))},a=function(e,t){return t?e.filter((function(e){return e!==oi})):e};return{isRowTotal:i(a(o,!t.spreadsheet.isValueInCols())),isRowSubTotal:i(o,!0),isColTotal:i(a(r,t.spreadsheet.isValueInCols())),isColSubTotal:i(r,!0)}},t}return Zy(t,e),t.prototype.setDataCfg=function(t){var n=this;e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.totalData=[].concat(Jb(t.data,t.fields)).concat(this.totalData),kb.getInstance().debugCallback("Transform Data",(function(){var e=n.fields,t=Iw({rows:e.rows,columns:e.columns,originData:n.originData,totalData:n.totalData,indexesData:n.indexesData,sortedDimensionValues:n.sortedDimensionValues,rowPivotMeta:n.rowPivotMeta,colPivotMeta:n.colPivotMeta}).indexesData;n.indexesData=t})),this.handleDimensionValuesSort()},t.prototype.transformDrillDownData=function(e,t,n){var r,o=this,i=this.fields,a=i.columns,l=i.values,s=nb(nb([],tb(Sb.getFieldPath(n,!0)),!1),[e],!1),c=this.spreadsheet.store,u=this.standardTransform(t,l),d=Jb(u,{columns:this.fields.columns,rows:s}),h=Yh(u,d),f=null==n?void 0:n.id,p=null!==(r=c.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;p.has(f)&&(tf(p.get(f),(function(e){Vm(o.indexesData,e)})),_w(this.rowPivotMeta,f));var v=Iw({rows:s,columns:a,originData:h,totalData:d,indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),g=v.paths,m=v.indexesData,y=v.rowPivotMeta,b=v.colPivotMeta,C=v.sortedDimensionValues;this.indexesData=m,this.rowPivotMeta=y,this.colPivotMeta=b,this.sortedDimensionValues=C,p.set(f,g),c.set("drillDownIdPathMap",p)},t.prototype.clearDrillDownData=function(e){var t=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(r){var o=n.get("drillDownDataCache",[]);if(e){var i=r.get(e);i&&tf(i,(function(e){Vm(t.indexesData,e)})),_w(this.rowPivotMeta,e),r.delete(e);var a=Ef(o,(function(e){return r.has(null==e?void 0:e.rowId)}));n.set("drillDownDataCache",a);var l=a.map((function(e){return null==e?void 0:e.drillLevel})),s=n.get("drillDownFieldInLevel",[]).filter((function(e){return op(l,null==e?void 0:e.drillLevel)}));n.set("drillDownFieldInLevel",s)}else{r.clear();var c=this.spreadsheet.store.get("originalDataCfg");Mp(c)||this.spreadsheet.setDataCfg(c),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}n.set("drillDownIdPathMap",r)}},t.prototype.standardTransform=function(e,t){if(Mp(t))return e;var n=[];return tf(t,(function(t){tf(e,(function(e){var r;Kf(e,t)&&n.push(Qy(Qy({},e),((r={})[oi]=t,r[ri]=e[t],r)))}))})),n},t.prototype.processDataCfg=function(e){var t,n,r=e.data,o=e.meta,i=void 0===o?[]:o,a=e.fields,l=e.sortParams,s=void 0===l?[]:l,c=e.totalData,u=a.columns,d=a.rows,h=a.values,f=a.valueInCols,p=a.customValueOrder,v=u,g=d;f?v=this.isCustomMeasuresPosition(p)?this.handleCustomMeasuresOrder(p,v):Wm(nb(nb([],tb(u),!1),[oi],!1)):g=this.isCustomMeasuresPosition(p)?this.handleCustomMeasuresOrder(p,g):Wm(nb(nb([],tb(d),!1),[oi],!1));var m=(null===(n=null===(t=this.spreadsheet)||void 0===t?void 0:t.options)||void 0===n?void 0:n.cornerExtraFieldText)||gb("数值"),y={field:oi,name:m,formatter:function(e){return function(e){var t=If(i,(function(t){return t.field===e}));return ic(t,"name",e)}(e)}},b=nb(nb([],tb(i),!1),[y],!1),C=this.standardTransform(r,h),w=this.standardTransform(c,h);return{data:C,meta:b,fields:Qy(Qy({},a),{rows:g,columns:v,values:h}),totalData:w,sortParams:s}},t.prototype.getDimensionValues=function(e,t){var n,r,o,i,a=this.fields||{},l=a.rows,s=void 0===l?[]:l,c=a.columns,u=void 0===c?[]:c,d=new Map,h=[];if(op(s,e)?(d=this.rowPivotMeta,h=s):op(u,e)&&(d=this.colPivotMeta,h=u),!Mp(t)){var f=[],p=[],v=function(e){var n=ic(t,e);p.push("".concat(n));var r=p.join("".concat(Li));if(d.has(n)&&!Gp(n)){var a=null===(o=d.get(n))||void 0===o?void 0:o.childField;if(d=d.get(n).children,If(g.sortParams,(function(e){return e.sortFieldId===a}))&&g.sortedDimensionValues[a]){var l=null===(i=g.sortedDimensionValues[a])||void 0===i?void 0:i.filter((function(e){return null==e?void 0:e.includes(r)}));f=Sw(nb([],tb(l),!1))}else f=nb([],tb(d.keys()),!1)}},g=this;try{for(var m=eb(h),y=m.next();!y.done;y=m.next())v(y.value)}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}return Mp(f)?[]:Xb($b(nb([],tb(d.keys()),!1),f))}return this.sortedDimensionValues[e]?Xb(Sw(nb([],tb(this.sortedDimensionValues[e]),!1))):Xb(nb([],tb(d.keys()),!1))},t.prototype.getTotalValue=function(e){var t,n,r=function(e,t){var n=e.isRowTotal,r=e.isRowSubTotal,o=e.isColTotal,i=e.isColSubTotal,a=t||{},l=a.row,s=a.col,c=l||{},u=c.calcTotals,d=void 0===u?{}:u,h=c.calcSubTotals,f=void 0===h?{}:h,p=s||{},v=p.calcTotals,g=void 0===v?{}:v,m=p.calcSubTotals,y=void 0===m?{}:m,b=function(e,t){if((e.aggregation||e.calcFunc)&&t)return{aggregation:e.aggregation,calcFunc:e.calcFunc}};return b(g,o)||b(y,i)||b(d,n)||b(f,r)}(this.getTotalStatus(e),null===(n=this.spreadsheet.options)||void 0===n?void 0:n.totals)||{},o=r.aggregation,i=r.calcFunc,a=cS[o];if(a||i){var l=this.getMultiData(e),s=void 0;return i?s=i(e,l):a&&(s=a(l,ri)),Qy(Qy({},e),((t={})[ri]=s,t[e[oi]]=s,t))}},t.prototype.getCellData=function(e){var t,n,r,o=e||{},i=o.query,a=o.rowNode,l=o.isTotals,s=void 0!==l&&l,c=this.fields,u=c.columns,d=c.rows,h=d,f=null===(t=this.spreadsheet)||void 0===t?void 0:t.store.get("drillDownIdPathMap"),p=Array.from(null!==(n=null==f?void 0:f.keys())&&void 0!==n?n:[]).some((function(e){return a.id.startsWith(e)}));s&&!p||(h=null!==(r=Sb.getFieldPath(a,p))&&void 0!==r?r:d);var v=Lw({rowDimensionValues:Ow(h,i),colDimensionValues:Ow(u,i),careUndefined:s||Qb([].concat(d).concat(u),i),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),g=ic(this.indexesData,v);return g||(s?this.getTotalValue(i):g)},t.prototype.getMultiData=function(e,t,n,r){var o;if(Mp(e))return Rd(qb(this.indexesData));var i=this.fields,a=i.rows,l=i.columns,s=i.values,c=Ow(Mp(r)?a:a.concat(r),e),u=Ow(l,e),d=Lw({rowDimensionValues:c,colDimensionValues:u,careUndefined:!0,isFirstCreate:!0,rowFields:a,colFields:l,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),h=this.getCustomData(d),f=Rd(Kb(h));if(t){var p=[],v=Zb(c,a),g=Zb(u,l);if(n)p=v;else if(1===(null===(o=Ls(e))||void 0===o?void 0:o.length)&&Kf(e,oi))p=g;else{var m=function(e){return null==(t=null==e?void 0:e.filter((function(e){return!(null==s?void 0:s.includes(e))})))?void 0:t.every((function(e){return Gp(e)}));var t},y=m(u),b=m(c);p=y?v:b?g:nb(nb([],tb(v),!1),tb(g),!1)}f=f.filter((function(e){return!(null==p?void 0:p.find((function(t){var n;return t!==oi&&(null===(n=Ls(e))||void 0===n?void 0:n.includes(t))})))}))}return f||[]},t.prototype.getFieldFormatter=function(t,n){return t===ai?this.getFieldFormatterForTotalValue(n):e.prototype.getFieldFormatter.call(this,t)},t.prototype.getFieldFormatterForTotalValue=function(t){var n;return!this.spreadsheet.isValueInCols()&&t&&(n=ic(t.rowQuery,oi)),n=null!=n?n:ic(this.fields.values,0),e.prototype.getFieldFormatter.call(this,n)},t.prototype.handleCustomMeasuresOrder=function(e,t){var n=Wm(nb([],tb(t),!1));return t.length>=e?(n.splice(e,0,oi),n):nb(nb([],tb(n),!1),[oi],!1)},t.prototype.isCustomMeasuresPosition=function(e){return kp(e)},t}(ES),LS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDimensionValueFilter=function(){tf(t.filterParams,(function(e){var n=e.filterKey,r=e.filteredValues,o=e.customFilter,i=function(e){return!op(r,e[n])};t.displayData=nb(nb(nb([],tb(t.getStartRows()),!1),tb(Ef(t.getMovableRows(),(function(e){return o?o(e)&&i(e):i(e)}))),!1),tb(t.getEndRows()),!1)}))},t.handleDimensionValuesSort=function(){tf(t.sortParams,(function(e){var n=e.sortFieldId,r=e.sortBy,o=e.sortFunc,i=e.sortMethod,a=e.query;if(n){var l=t.getMovableRows(),s=[];if(a){var c=[];l.forEach((function(e){for(var t=Object.keys(a),n=!0,r=0;r<t.length;r++){var o=t[r];if(e[o]!==a[o]){n=!1,s.push(e);break}}n&&c.push(e)})),l=c}var u=l;if(o)u=o(Qy(Qy({},e),{data:l}));else if(r&&!Ca(r)){var d=nb([],tb(r),!1).reverse();u=l.sort((function(e,t){var r=d.indexOf(e[n]);return d.indexOf(t[n])-r}))}else(Tw(i)||Aw(i))&&(u=Iv(l,[(Ca(r)?r:null)||n],[i.toLocaleLowerCase()]));s.length&&(u=nb(nb([],tb(u),!1),tb(s),!1)),t.displayData=nb(nb(nb([],tb(t.getStartRows()),!1),tb(u),!1),tb(t.getEndRows()),!1)}}))},t}return Zy(t,e),t.prototype.processDataCfg=function(e){return e},t.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},t.prototype.getStartRows=function(){var e=(this.spreadsheet.options||{}).frozenRowCount;return e?this.displayData.slice(0,e):[]},t.prototype.getEndRows=function(){var e=(this.spreadsheet.options||{}).frozenTrailingRowCount;return e?this.displayData.slice(-e):[]},t.prototype.getMovableRows=function(){var e=this.displayData,t=this.spreadsheet.options||{},n=t.frozenTrailingRowCount,r=t.frozenRowCount;return e.slice(r||0,-n||void 0)},t.prototype.getDimensionValues=function(e,t){return[]},t.prototype.getCellData=function(e){var t=e.query;if(0!==this.displayData.length||0!==t.rowIndex){var n=this.displayData[t.rowIndex];return"col"in t?n[t.col]:n}},t.prototype.getMultiData=function(e,t){return this.displayData},t}(ES),OS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.getCellData=function(e){var t=e.query,n=this.fields,r=n.columns,o=n.rows,i=Lw({rowDimensionValues:Ow(o,t),colDimensionValues:Ow(r,t),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,isFirstCreate:!0,careUndefined:!0,rowFields:o,colFields:r});return ic(this.indexesData,i)},t.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map;var n=this.fields,r=Iw({rows:n.rows,columns:n.columns,originData:this.originData,totalData:[],indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}).indexesData;this.indexesData=r,this.handleDimensionValuesSort()},t.prototype.processDataCfg=function(e){e.fields.rows=[oi],e.fields.valueInCols=!1;var t=e.data,n=Jy(e,["data"]),r=e.fields.values,o=[];return tf(t,(function(e){Mp(up(Ls(e),r))?o.push(e):tf(r,(function(t){var n;Kf(e,t)&&o.push(Qy(Qy({},e),((n={})[oi]=t,n[ri]=e[t],n)))}))})),Qy({data:Wm(o)},n)},t}(SS);!function(e){e.ScrollChange="scroll-change",e.ScrollEnd="scroll-end"}(oS||(oS={}));var IS=function(e){function t(t){var n=e.call(this,t)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.getCoordinatesWithBBoxExtraPadding=function(){var e=n.theme.size,t=n.isHorizontal?0:e/2,r=n.isHorizontal?e:e/2;return{start:n.thumbOffset+t,end:n.thumbOffset+n.thumbLen-r}},n.current=function(){var e=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-e)},n.updateThumbLen=function(e){if(n.thumbLen!==e){n.thumbLen=e;var t=n.getCoordinatesName();n.thumbShape.attr(t.to,n.thumbOffset+e),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(e,t){var r;void 0===t&&(t=!0);var o=n.validateRange(e);if(n.thumbOffset!==o||0===o){n.thumbOffset=o;var i=n.getCoordinatesName(),a=i.from,l=i.to,s=n.getCoordinatesWithBBoxExtraPadding(),c=s.start,u=s.end;n.thumbShape.attr(((r={})[a]=c,r[l]=u,r)),t&&n.emitScrollChange(o/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(e){var t;n.updateThumbOffset(e,!1),null===(t=n.get("canvas"))||void 0===t||t.draw()},n.emitScrollChange=function(e,t){void 0===t&&(t=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){n.emit(oS.ScrollChange,{offset:e,updateThumbOffset:t})}))},n.addEventListener=function(e,t,n){return null==e||e.addEventListener(t,n,!1),{remove:function(){null==e||e.removeEventListener(t,n,!1)}}},n.addEvent=function(e,t,r){e.on(t,r),n.eventHandlers.push({target:e,type:t,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var e=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(e),n.thumbShape=n.createThumbShape(e),e},n.createTrackShape=function(e){var t=n.theme,r=t.lineCap,o=void 0===r?"round":r,i=t.trackColor,a=t.size,l={lineWidth:a,stroke:i,lineCap:o};return n.isHorizontal?e.addShape("line",{attrs:Qy(Qy({},l),{x1:0,y1:a/2,x2:n.trackLen,y2:a/2})}):e.addShape("line",{attrs:Qy(Qy({},l),{x1:a/2,y1:0,x2:a/2,y2:n.trackLen})})},n.createThumbShape=function(e){var t=n.theme,r=t.size,o=t.lineCap,i=void 0===o?"round":o,a={lineWidth:r,stroke:t.thumbColor,lineCap:i,cursor:"default"},l=n.getCoordinatesWithBBoxExtraPadding(),s=l.start,c=l.end;return n.isHorizontal?e.addShape("line",{attrs:Qy(Qy({},a),{x1:s,y1:r/2,x2:c,y2:r/2})}):e.addShape("line",{attrs:Qy(Qy({},a),{x1:r/2,y1:s,x2:r/2,y2:c})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(e){return function(t){t.preventDefault(),n.isMobile=e;var r=n.isMobile?ic(t,"touches.0",t):t,o=r.clientX,i=r.clientY;n.startPos=n.isHorizontal?o:i,n.bindLaterEvent()}},n.bindLaterEvent=function(){var e=n.get("canvas"),t=document.body,r=[];n.isMobile?(r=[n.addEventListener(t,"touchmove",n.onMouseMove),n.addEventListener(t,"touchend",n.onMouseUp),n.addEventListener(t,"touchcancel",n.onMouseUp)],n.addEvent(e,"touchend",n.onMouseUp),n.addEvent(e,"touchcancel",n.onMouseUp)):(r=[n.addEventListener(t,"mousemove",n.onMouseMove),n.addEventListener(t,"mouseup",n.onMouseUp),n.addEventListener(t,"mouseleave",n.onMouseUp)],n.addEvent(e,"mouseup",n.onMouseUp)),n.clearEvents=function(){r.forEach((function(e){null==e||e.remove()})),tf(n.eventHandlers,(function(e){var t;null===(t=e.target)||void 0===t||t.off(e.type,e.handler)})),n.eventHandlers.length=0}},n.onTrackClick=function(e){var t=n.isHorizontal?e.x-n.position.x-n.thumbLen/2:e.y-n.position.y-n.thumbLen/2,r=n.validateRange(t);n.updateThumbOffset(r)},n.onMouseMove=function(e){e.preventDefault();var t=n.isMobile?ic(e,"touches.0",e):e,r=t.clientX,o=t.clientY,i=n.isHorizontal?r:o,a=i-n.startPos;n.startPos=i,n.updateThumbOffset(n.thumbOffset+a)},n.onMouseUp=function(e){var t;n.emit(oS.ScrollEnd,{}),e.preventDefault(),null===(t=n.clearEvents)||void 0===t||t.call(n)},n.onTrackMouseOver=function(){var e=n.theme,t=e.thumbHoverColor,r=e.hoverSize;n.thumbShape.attr("stroke",t),n.thumbShape.attr("lineWidth",r)},n.onTrackMouseOut=function(){var e=n.theme,t=e.thumbColor,r=e.size;n.thumbShape.attr("stroke",t),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(e){var t=e;return e+n.thumbLen>n.trackLen?t=n.trackLen-n.thumbLen:e+n.thumbLen<n.thumbLen&&(t=0),t};var r=t.isHorizontal,o=void 0!==r&&r,i=t.trackLen,a=t.thumbLen,l=t.position,s=t.minThumbLen,c=void 0===s?32:s,u=t.thumbOffset,d=void 0===u?0:u,h=t.theme,f=t.scrollTargetMaxOffset;return n.isHorizontal=o,n.thumbOffset=d,n.trackLen=i,n.thumbLen=a,n.position=l,n.minThumbLen=c,n.theme=h,n.scrollTargetMaxOffset=f,n.initScrollBar(),n}return Zy(t,e),t}(yo),_S=function(e,t,n){return e.filter((function(e){return e.level>=t})).map((function(e){return e[n]})).reduce((function(e,t){return e+t}),0)},TS=function(e,t,n){if(n<=0)return{start:0,end:0};var r=Of(e,(function(n,r){return t>=n&&t<e[r+1]}),0);r=Math.max(r,0);var o=n===t?r:Of(e,(function(t,r){return n>t&&n<=e[r+1]}),r);return{start:r,end:o=Math.min(-1===o?1/0:o,e.length-2)}},AS=function(e,t){var n=t.width,r=t.originalWidth,o=Math.min(r-n,e);return o<0?0:o},MS=function(e,t,n){var r=Math.min(t-n,e);return r<0?0:r},NS=function(e,t){if(void 0===e&&(e=[]),Mp(e))return[];var n=[];return e.forEach((function(e){e instanceof t&&n.push(e),e instanceof yo&&e.getChildren().forEach((function(e){e instanceof t&&n.push(e)}))})),n},RS=function(e,t,n){return n.slice(e,t+1).map((function(e){return e.x+e.width}))},DS=function(e,t,n){for(var r=[],o=e;o<t+1;o++)r.push(n.getCellOffsetY(o+1));return r},kS=function(e,t,n){var r=tb(n,4),o=r[0],i=r[1],a=r[2],l=r[3];return e>=o&&e<=i&&t>=a&&t<=l},BS=function(e){for(var t=tb(e,4),n=t[0],r=t[1],o=t[2],i=t[3],a=[],l=n;l<=r;l+=1)for(var s=o;s<=i;s+=1)a.push([l,s]);return a},PS=function(e,t){void 0===t&&(t=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=e,this.spreadsheet=e.spreadsheet,this.layoutResult=e.layoutResult,t&&this.calculateBBox()},FS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.calculateBBox=function(){var e=this.getCornerBBoxWidth(),t=this.getCornerBBoxHeight();this.width=e,this.height=t,this.maxX=e,this.maxY=t},t.prototype.getCornerBBoxHeight=function(){var e=this.layoutResult.colsHierarchy;return this.originalHeight=Math.floor(e.height),this.originalHeight},t.prototype.getCornerBBoxWidth=function(){var e=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(e.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},t.prototype.adjustCornerBBoxWidth=function(){var e=this.layoutResult.colsHierarchy,t=this.spreadsheet.options.width,n=.5*t,r=null==e?void 0:e.width,o=t-this.originalWidth;if(this.originalWidth<=n||r<=o)return this.originalWidth;var i;return i=r<=t-n?this.originalWidth-(r-o):n,Math.floor(i)},t}(PS),jS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var e=this.facet.cornerBBox,t={x:Math.floor(e.maxX),y:Math.floor(e.maxY)},n=this.spreadsheet.theme.scrollBar.size,r=this.spreadsheet.options,o=r.width,i=r.height,a=Math.max(0,o-t.x),l=Math.max(0,i-t.y-n);this.x=t.x,this.y=t.y,this.width=a,this.height=l,this.viewportHeight=Math.abs(Math.floor(Math.min(l,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(a,this.originalWidth))),this.maxX=t.x+this.viewportWidth,this.maxY=t.y+this.viewportHeight,this.minX=t.x,this.minY=t.y;var s=this.spreadsheet.options,c=s.frozenTrailingColCount,u=s.frozenTrailingRowCount;c>0&&(this.viewportWidth=this.width,this.maxX=t.x+this.width),u>0&&(this.viewportHeight=this.height,this.maxY=t.y+this.height)},t}(PS),zS=function(e){function t(t){var n=e.call(this,t)||this;return n.isHeaderCellInViewport=function(e,t,n,r){return e+t>=n&&n+r>=e},n.headerConfig=t,n}return Zy(t,e),t.prototype.clearResizeAreaGroup=function(e){var t=this.get("parent"),n=null==t?void 0:t.findById(e);null==n||n.clear()},t.prototype.render=function(e){this.clearResizeAreaGroup(e),this.clear(),this.layout(),this.offset(),this.clip()},t.prototype.onScrollXY=function(e,t,n){this.headerConfig.scrollX=e,this.headerConfig.scrollY=t,this.render(n)},t.prototype.onRowScrollX=function(e,t){this.headerConfig.scrollX=e,this.render(t)},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(yo),GS=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollGroup=n.addGroup({name:"colScrollGroup",zIndex:3}),n}return Zy(t,e),t.prototype.onColScroll=function(e,t){this.headerConfig.scrollX!==e&&(this.headerConfig.scrollX=e,this.render(t))},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.height,r=e.scrollX,o=e.spreadsheet.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:o?r:0,y:0,width:o?t:t+r,height:n}})},t.prototype.clear=function(){var e,t;null===(e=this.scrollGroup)||void 0===e||e.clear(),null===(t=this.background)||void 0===t||t.remove(!0)},t.prototype.getCellInstance=function(e,t,n){return new zw(e,t,n)},t.prototype.getCellGroup=function(e){return this.scrollGroup},t.prototype.isColCellInRect=function(e){var t=this.headerConfig,n=t.spreadsheet,r=t.cornerWidth,o=t.width,i=t.scrollX;return o+i>e.x&&i-(n.isFrozenRowHeader()?0:r)<e.x+e.width},t.prototype.layout=function(){var e=this,t=this.headerConfig,n=t.data,r=t.spreadsheet,o=r.options.colCell;tf(n,(function(t){var n=t;if(e.isColCellInRect(n)){var i=(null==o?void 0:o(n,r,e.headerConfig))||e.getCellInstance(n,r,e.headerConfig);n.belongsCell=i,e.getCellGroup(n).add(i)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.position,n=e.scrollX;ox(this.scrollGroup,t.x-n)},t}(zS),HS=function(e){function t(t){return e.call(this,t)||this}return Zy(t,e),t.getCornerHeader=function(e,n,r,o,i,a){var l=e.width,s=e.height,c=n.originalWidth,u=n.originalHeight,d=n.width,h=n.height;return new t({data:this.getCornerNodes({x:n.x,y:n.y},c,u,o.rows,o.columns,i.rowsHierarchy,i.colsHierarchy,o.dataSet,r,a),position:{x:n.x,y:n.y},width:d,height:h,originalHeight:u,originalWidth:c,viewportWidth:l,viewportHeight:s,hierarchyType:o.hierarchyType,hierarchyCollapse:o.hierarchyCollapse,rows:o.rows,columns:o.columns,seriesNumberWidth:r,spreadsheet:a})},t.getCornerNodes=function(e,t,n,r,o,i,a,l,s,c){var u,d,h,f,p=[];if(s&&(null==a?void 0:a.sampleNodeForLastLevel)){var v=new Sb({id:"",key:"series-number-node",value:gb("序号")});v.x=null==e?void 0:e.x,v.y=null===(u=null==a?void 0:a.sampleNodeForLastLevel)||void 0===u?void 0:u.y,v.width=s,v.height=null===(d=null==a?void 0:a.sampleNodeForLastLevel)||void 0===d?void 0:d.height,v.isPivotMode=!0,v.cornerType=Hb.Series,p.push(v)}if(null==a?void 0:a.sampleNodeForLastLevel)if(c.isHierarchyTreeType()){var g=c.store.get("drillDownFieldInLevel",[]).map((function(e){return e.drillField})),m=new Sb({key:"",id:"",value:r.filter((function(e){return!op(g,e)})).map((function(e){return l.getFieldName(e)})).join("/")});m.x=e.x+s,m.y=null===(h=null==a?void 0:a.sampleNodeForLastLevel)||void 0===h?void 0:h.y,m.width=t-s,m.height=null===(f=null==a?void 0:a.sampleNodeForLastLevel)||void 0===f?void 0:f.height,m.seriesNumberWidth=s,m.isPivotMode=!0,m.spreadsheet=c,m.cornerType=Hb.Row,p.push(m)}else i.sampleNodesForAllLevels.forEach((function(e){var t=r[e.level],n=new Sb({key:t,id:"",value:l.getFieldName(t)});n.x=e.x+s,n.y=a.sampleNodeForLastLevel.y,n.width=e.width,n.height=a.sampleNodeForLastLevel.height,n.field=t,n.isPivotMode=!0,n.cornerType=Hb.Row,n.spreadsheet=c,p.push(n)}));return a.sampleNodesForAllLevels.forEach((function(n){if(n.level<a.maxLevel){var r=o[n.level],i=new Sb({key:r,id:"",value:l.getFieldName(r)});i.x=e.x,i.y=n.y,i.width=t,i.height=n.height,i.field=r,i.isPivotMode=!0,i.cornerType=Hb.Col,i.spreadsheet=c,p.push(i)}})),p},t.prototype.onCorScroll=function(e,t){this.headerConfig.scrollX=e,this.render(t)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.layout=function(){this.renderCells()},t.prototype.renderCells=function(){var e,t,n,r,o=this,i=this.headerConfig,a=i.data,l=i.spreadsheet,s=null===(t=null===(e=null==l?void 0:l.facet)||void 0===e?void 0:e.cfg)||void 0===t?void 0:t.cornerHeader,c=null===(r=null===(n=null==l?void 0:l.facet)||void 0===n?void 0:n.cfg)||void 0===r?void 0:r.cornerCell;s?s(this,l,this.headerConfig):a.forEach((function(e){var t;c&&(t=c(e,o.headerConfig.spreadsheet,o.headerConfig)),Mp(t)&&(t=new Gw(e,o.headerConfig.spreadsheet,o.headerConfig)),o.add(t)}))},t.prototype.offset=function(){var e=this.headerConfig.scrollX;ox(this,-e)},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.height,r=e.scrollX;this.setClip({type:"rect",attrs:{x:r,y:0,width:t,height:n}})},t}(zS),WS=function(e){function t(t){var n=e.call(this,t)||this;return n.render(),n}return Zy(t,e),t.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},t.prototype.render=function(){this.clear(),this.layout()},t.prototype.onBorderScroll=function(e){this.cfg.scrollX=e;var t=this.cfg.position;rx(this,t.x-e,0),this.render()},t.prototype.onChangeShadowVisibility=function(e,t){this.cfg.showViewportLeftShadow=e>0,this.cfg.showViewportRightShadow=Math.floor(e)<Math.floor(t),this.render()},t.prototype.addCornerRightBorder=function(){var e,t=this.cfg;if(t.isPivotMode){var n=t.width,r=t.height,o=t.viewportHeight,i=t.position,a=null===(e=t.spreadsheet.theme)||void 0===e?void 0:e.splitLine,l=i.x+n,s=i.y,c=i.y+r+o;this.addShape("line",{attrs:{x1:l,y1:s,x2:l,y2:c,stroke:a.verticalBorderColor,lineWidth:a.verticalBorderWidth,opacity:a.verticalBorderColorOpacity}})}},t.prototype.addCornerBottomBorder=function(){var e,t=this.cfg,n=t.width,r=t.height,o=t.viewportWidth,i=t.position,a=t.scrollX,l=t.scrollContainsRowHeader,s=null===(e=t.spreadsheet.theme)||void 0===e?void 0:e.splitLine,c=i.x,u=c+n+o+(l?a:0),d=i.y+r-1;this.addShape("line",{attrs:{x1:c,y1:d,x2:u,y2:d,stroke:s.horizontalBorderColor,lineWidth:s.horizontalBorderWidth,opacity:s.horizontalBorderColorOpacity}})},t.prototype.addSplitLineShadow=function(){var e,t=this.cfg,n=t.isPivotMode,r=t.spreadsheet,o=null===(e=r.theme)||void 0===e?void 0:e.splitLine;n&&o.showShadow&&r.isFrozenRowHeader()&&(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},t.prototype.addSplitLineLeftShadow=function(){var e,t,n;if(this.cfg.showViewportLeftShadow){var r=this.cfg,o=r.width,i=r.height,a=r.viewportHeight,l=r.position,s=null===(e=r.spreadsheet.theme)||void 0===e?void 0:e.splitLine,c=l.x+o,u=l.y;this.addShape("rect",{attrs:{x:c,y:u,width:s.shadowWidth,height:a+i,fill:"l (0) 0:".concat(null===(t=s.shadowColors)||void 0===t?void 0:t.left," 1:").concat(null===(n=s.shadowColors)||void 0===n?void 0:n.right)}})}},t.prototype.addSplitLineRightShadow=function(){var e,t,n;if(this.cfg.showViewportRightShadow){var r=this.cfg,o=r.width,i=r.height,a=r.viewportHeight,l=r.viewportWidth,s=r.position,c=null===(e=r.spreadsheet.theme)||void 0===e?void 0:e.splitLine,u=s.x+o+l-c.shadowWidth,d=s.y;this.addShape("rect",{attrs:{x:u,y:d,width:c.shadowWidth,height:a+i,fill:"l (0) 0:".concat(null===(t=c.shadowColors)||void 0===t?void 0:t.right," 1:").concat(null===(n=c.shadowColors)||void 0===n?void 0:n.left)}})}},t}(yo),US=function(e){function t(t){return e.call(this,t)||this}return Zy(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gm&&this.gm.destroy()},t.prototype.layout=function(){var e,t,n=this,r=this.headerConfig,o=r.data,i=r.spreadsheet,a=r.width,l=r.viewportHeight,s=r.seriesNumberWidth,c=r.scrollY,u=r.scrollX,d=null===(t=null===(e=null==i?void 0:i.facet)||void 0===e?void 0:e.cfg)||void 0===t?void 0:t.rowCell;tf(o,(function(e){if(function(e){return l+c>e.y&&c<e.y+e.height&&a-s+u>e.x&&u-s<e.x+e.width}(e)&&0!==e.height){var t=void 0;d&&(t=d(e,i,n.headerConfig)),Mp(t)&&i.isPivotMode()&&(t=new Zw(e,i,n.headerConfig)),e.belongsCell=t,n.add(t)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.scrollX,n=e.scrollY,r=e.position,o=e.seriesNumberWidth;rx(this,r.x-t+o,r.y-n)},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.viewportHeight,r=e.scrollX,o=e.scrollY,i=e.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:r-i,y:o,width:t,height:n}})},t}(zS),VS=function(e){function t(t){return e.call(this,t)||this}return Zy(t,e),t.getSeriesNumberHeader=function(e,n,r,o,i){var a=e.height,l=e.viewportHeight,s=[],c=o.isHierarchyTreeType();return r.forEach((function(e){if(!e.isTotals||c){var t=new Sb({id:"",key:"",value:"".concat(s.length+1)});t.x=e.x,t.y=e.y,t.height=e.height,t.width=n,s.push(t)}})),new t({width:i,height:a,viewportWidth:i,viewportHeight:l,position:{x:0,y:e.y},data:s,spreadsheet:o})},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.viewportHeight,r=e.scrollY;this.setClip({type:"rect",attrs:{x:0,y:r,width:t,height:n}})},t.prototype.layout=function(){var e=this,t=this.headerConfig,n=t.data,r=t.scrollY,o=t.viewportHeight;t.spreadsheet.isPivotMode&&this.addBackGround();var i=this.addGroup();tf(n,(function(t){var n=t.y,a=t.height,l=t.isLeaf;if(e.isHeaderCellInViewport(n,a,r,o)){var s=e.addGroup();e.addText(s,t),e.add(s),l||e.addBorder(i,t)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.scrollY,n=e.scrollX,r=e.position;rx(this,r.x-n,r.y-t),this.backgroundShape&&this.backgroundShape.translate(r.x,r.y+t),this.leftBorderShape&&this.leftBorderShape.translate(r.x,r.y+t)},t.prototype.addBackGround=function(){var e=this.getStyle().cell,t=this.headerConfig,n=t.position,r=t.width,o=t.viewportHeight;this.backgroundShape=nC(this,{x:n.x,y:-n.y,width:r,height:o,fill:e.backgroundColor,stroke:"transparent",opacity:e.backgroundColorOpacity});var i=bC(zb.LEFT,{x:n.x,y:-n.y,width:r,height:o},e),a=i.position,l=i.style;this.leftBorderShape=iC(this,a,l)},t.prototype.addBorder=function(e,t){var n=this.getStyle().cell,r=bC(zb.BOTTOM,t,n);iC(e,r.position,r.style)},t.prototype.getStyle=function(){return this.headerConfig.spreadsheet.theme.rowCell},t.prototype.addText=function(e,t){var n=this.headerConfig,r=n.scrollY,o=n.viewportHeight,i=Qy(Qy({},this.getStyle().seriesText),{textBaseline:"top"}),a=t.label,l=t.x,s=t.y,c=t.width,u=t.height,d=this.getTextPadding(a,c),h=Kw(s+d.top,u-d.top-d.bottom,r,o,i.fontSize);e.addShape("text",{attrs:Qy(Qy({x:l+d.left,y:h,text:a},i),{cursor:"pointer"})})},t.prototype.getTextPadding=function(e,t){var n=this.getStyle(),r=this.headerConfig.spreadsheet.measureTextWidth(e,n.seriesText),o=Math.max(Math.abs((t-r)/2),4);return Qy(Qy({},n.cell.padding),{left:o,right:o})},t}(zS),YS=function(){function e(e){var t=this;this.scrollFrameId=null,this.hideScrollBar=function(){var e,n,r;null===(e=t.hRowScrollBar)||void 0===e||e.hide(),null===(n=t.hScrollBar)||void 0===n||n.hide(),null===(r=t.vScrollBar)||void 0===r||r.hide()},this.delayHideScrollBar=Sh(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){xb()&&t.delayHideScrollBar()},this.showVerticalScrollBar=function(){var e;null===(e=t.vScrollBar)||void 0===e||e.show()},this.showHorizontalScrollBar=function(){var e,n;null===(e=t.hRowScrollBar)||void 0===e||e.show(),null===(n=t.hScrollBar)||void 0===n||n.show()},this.onContainerWheel=function(){t.onContainerWheelForPc(),t.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var e=t.spreadsheet.getCanvasElement();null==e||e.addEventListener("wheel",t.onWheel)},this.onContainerWheelForMobile=function(){t.mobileWheel=new qw(t.spreadsheet.container),t.mobileWheel.on("wheel",(function(e){t.spreadsheet.hideTooltip();var n=e.event,r=e.deltaX,o=e.deltaY,i=e.x,a=e.y;t.onWheel(Qy(Qy({},n),{deltaX:r,deltaY:o,offsetX:i,offsetY:a}))}))},this.bindEvents=function(){t.onContainerWheel(),t.emitPaginationEvent()},this.setScrollOffset=function(e){Object.keys(e).forEach((function(n){var r=e[n];Gp(r)||t.spreadsheet.store.set(n,Math.floor(r))}))},this.getScrollOffset=function(){var e=t.spreadsheet.store;return{scrollX:e.get("scrollX",0),scrollY:e.get("scrollY",0),hRowScrollX:e.get("hRowScrollX",0)}},this.emitPaginationEvent=function(){var e=t.cfg.pagination;if(e){var n=e.current,r=void 0===n?1:n,o=e.pageSize,i=t.viewCellHeights.getTotalLength(),a=Math.floor((i-1)/o)+1;t.cfg.spreadsheet.emit(ei.LAYOUT_PAGINATION,{pageSize:o,pageCount:a,total:i,current:r})}},this.unbindEvents=function(){var e=t.spreadsheet.getCanvasElement();null==e||e.removeEventListener("wheel",t.onWheel),t.mobileWheel.destroy()},this.clipPanelGroup=function(){var e;t.foregroundGroup=t.spreadsheet.foregroundGroup,t.backgroundGroup=t.spreadsheet.backgroundGroup,t.panelGroup=t.spreadsheet.panelGroup;var n=t.panelBBox,r=n.width,o=n.height;null===(e=t.spreadsheet.panelScrollGroup)||void 0===e||e.setClip({type:"rect",attrs:{x:0,y:t.cornerBBox.height,width:r,height:o}})},this.calculateCellWidthHeight=function(){var e=Ng(t.layoutResult.colLeafNodes,(function(e,t){return e.push($h(e)+t.width),e}),[0]);t.viewCellWidths=e,t.viewCellHeights=t.getViewCellHeights(t.layoutResult)},this.getRealScrollX=function(e,n){return void 0===n&&(n=0),t.cfg.spreadsheet.isScrollContainsRowHeader()?e:n},this.calculatePanelBBox=function(){t.panelBBox=new jS(t,!0)},this.getRealWidth=function(){return $h(t.viewCellWidths)},this.getRealHeight=function(){var e=t.cfg.pagination,n=t.viewCellHeights;if(e){var r=t.getCellRange(),o=r.start,i=r.end;return n.getCellOffsetY(i+1)-n.getCellOffsetY(o)}return n.getTotalHeight()},this.clearAllGroup=function(){for(var e=t.panelGroup.getChildren()||[],n=e.length-1;n>=0;n--){var r=e[n];r instanceof yo?r.set("children",[]):e[n].remove()}t.foregroundGroup.set("children",[]),t.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(e,n,r){var o,i;void 0===e&&(e={}),void 0===n&&(n=200);var a=t.getAdjustedScrollOffset({scrollX:(null===(o=e.offsetX)||void 0===o?void 0:o.value)||0,scrollY:(null===(i=e.offsetY)||void 0===i?void 0:i.value)||0}),l=a.scrollX,s=a.scrollY;t.timer&&t.timer.stop();var c=Object.values(t.getScrollOffset()),u=qt(c,[void 0===l?c[0]:l,void 0===s?c[1]:s]);t.timer=ct((function(e){var o=Math.min(e/n,1),i=tb(u(o),2),a=i[0],l=i[1];t.setScrollOffset({scrollX:a,scrollY:l}),t.startScroll(),e>n&&(t.timer.stop(),null==r||r())}))},this.scrollImmediately=function(e){var n,r;void 0===e&&(e={});var o=t.getAdjustedScrollOffset({scrollX:(null===(n=e.offsetX)||void 0===n?void 0:n.value)||0,scrollY:(null===(r=e.offsetY)||void 0===r?void 0:r.value)||0}),i=o.scrollX,a=o.scrollY;t.setScrollOffset({scrollX:i,scrollY:a}),t.startScroll()},this.startScroll=function(e){var n,r;void 0===e&&(e=!1);var o=t.getScrollOffset(),i=o.scrollX,a=o.scrollY;null===(n=t.hScrollBar)||void 0===n||n.onlyUpdateThumbOffset(t.getScrollBarOffset(i,t.hScrollBar)),null===(r=t.vScrollBar)||void 0===r||r.onlyUpdateThumbOffset(t.getScrollBarOffset(a,t.vScrollBar)),t.dynamicRenderCell(e)},this.getRendererHeight=function(){var e=t.getCellRange(),n=e.start,r=e.end;return t.viewCellHeights.getCellOffsetY(r+1)-t.viewCellHeights.getCellOffsetY(n)},this.getAdjustedScrollOffset=function(e){var n=e.scrollX,r=e.scrollY,o=e.hRowScrollX;return{scrollX:MS(n,t.layoutResult.colsHierarchy.width,t.panelBBox.width),scrollY:MS(r,t.getRendererHeight(),t.panelBBox.height),hRowScrollX:AS(o,t.cornerBBox)}},this.renderRowScrollBar=function(e){if(!t.cfg.spreadsheet.isScrollContainsRowHeader()&&t.cornerBBox.width<t.cornerBBox.originalWidth){var n=t.cornerBBox.originalWidth-t.cornerBBox.width,r=t.getScrollbarPosition().maxY,o=t.spreadsheet.theme.splitLine.verticalBorderWidth,i=t.cornerBBox.width*t.cornerBBox.width/t.cornerBBox.originalWidth,a=i-o;t.hRowScrollBar=new IS({isHorizontal:!0,trackLen:t.cornerBBox.width,thumbLen:a,position:{x:t.cornerBBox.minX+t.scrollBarSize/2,y:r},thumbOffset:e*(t.cornerBBox.width-i)/n,theme:t.scrollBarTheme,scrollTargetMaxOffset:n}),t.hRowScrollBar.on(oS.ScrollChange,(function(e){var r,o,i=e.offset,a=t.getValidScrollBarOffset(i,n),l=Math.floor(a);t.setScrollOffset({hRowScrollX:l}),null===(r=t.rowHeader)||void 0===r||r.onRowScrollX(l,vi),null===(o=t.rowIndexHeader)||void 0===o||o.onRowScrollX(l,yi),t.cornerHeader.onRowScrollX(l,bi);var s=t.getScrollBarOffset(l,t.hRowScrollBar),c={scrollX:s,scrollY:0};t.hRowScrollBar.updateThumbOffset(s,!1),t.spreadsheet.emit(ei.ROW_CELL_SCROLL,c),t.spreadsheet.emit(ei.GLOBAL_SCROLL,c)})),t.foregroundGroup.add(t.hRowScrollBar)}},this.getValidScrollBarOffset=function(e,t){return Du(e,0,t)},this.renderHScrollBar=function(e,n,r){if(Math.floor(e)<Math.floor(n)){var o=t.scrollBarSize/2,i=t.getScrollbarPosition().maxY,a=e+(t.cfg.spreadsheet.isScrollContainsRowHeader()?t.cornerBBox.width:0),l={x:t.panelBBox.minX+(t.cfg.spreadsheet.isScrollContainsRowHeader()?-t.cornerBBox.width+o:o),y:i},s=n+(t.cfg.spreadsheet.isScrollContainsRowHeader()?t.cornerBBox.width:0),c=s-a,u=a/s*a;t.hScrollBar=new IS({isHorizontal:!0,trackLen:a,thumbLen:u,position:l,thumbOffset:r*(a-u)/c,theme:t.scrollBarTheme,scrollTargetMaxOffset:c}),t.hScrollBar.on(oS.ScrollChange,(function(e){var n=e.offset,r=e.updateThumbOffset,o=t.getValidScrollBarOffset(n,c);r&&t.hScrollBar.updateThumbOffset(t.getScrollBarOffset(o,t.hScrollBar),!1),t.setScrollOffset({scrollX:o}),t.dynamicRenderCell()})),t.foregroundGroup.add(t.hScrollBar)}},this.getScrollbarPosition=function(){var e=t.panelBBox,n=e.maxX,r=e.maxY,o=t.getCanvasHW(),i=o.width,a=o.height,l=t.spreadsheet.options.interaction.scrollbarPosition===Gy.CONTENT;return{maxX:(l?n:i)-t.scrollBarSize,maxY:l?r:a-t.scrollBarSize}},this.renderVScrollBar=function(e,n,r){if(e<n){var o=Math.max(e/n*e,32),i=n-e,a=t.getScrollbarPosition().maxX;t.vScrollBar=new IS({isHorizontal:!1,trackLen:e,thumbLen:o,thumbOffset:r*(e-o)/i,position:{x:a,y:t.panelBBox.minY},theme:t.scrollBarTheme,scrollTargetMaxOffset:i}),t.vScrollBar.on(oS.ScrollChange,(function(e){var n=e.offset,r=e.updateThumbOffset,o=t.getValidScrollBarOffset(n,i);r&&t.vScrollBar.updateThumbOffset(t.getScrollBarOffset(o,t.vScrollBar),!1),t.setScrollOffset({scrollY:o}),t.dynamicRenderCell()})),t.foregroundGroup.add(t.vScrollBar)}},this.getScrollBarOffset=function(e,t){return e*(t.trackLen-t.thumbLen)/t.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(e){var n=e.offsetX,r=e.offsetY;return n>t.panelBBox.minX&&n<t.panelBBox.maxX&&r>t.panelBBox.minY&&r<t.panelBBox.maxY},this.isScrollOverTheCornerArea=function(e){var n=e.offsetX,r=e.offsetY;return n>t.cornerBBox.minX&&n<t.cornerBBox.maxX&&r>t.cornerBBox.minY&&r<t.cornerBBox.maxY+t.panelBBox.height},this.updateHorizontalRowScrollOffset=function(e){var n,r=e.offset,o=e.offsetX,i=e.offsetY;t.isScrollOverTheCornerArea({offsetX:o,offsetY:i})&&(null===(n=t.hRowScrollBar)||void 0===n||n.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(e){var n,r=e.offset,o=e.offsetX,i=e.offsetY;t.hRowScrollBar&&!t.isScrollOverThePanelArea({offsetX:o,offsetY:i})||null===(n=t.hScrollBar)||void 0===n||n.emitScrollChange(r)},this.isScrollToLeft=function(e){var n=e.deltaX,r=e.offsetX,o=e.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var i=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:o,offsetX:r})||t.hRowScrollBar.thumbOffset<=0,a=!t.hScrollBar||t.hScrollBar.thumbOffset<=0;return n<=0&&a&&i},this.isScrollToRight=function(e){var n,r,o,i,a,l,s=e.deltaX,c=e.offsetX,u=e.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var d=t.spreadsheet.isFrozenRowHeader()?null===(n=t.panelBBox)||void 0===n?void 0:n.width:null===(r=t.panelBBox)||void 0===r?void 0:r.maxX,h=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:u,offsetX:c})||(null===(o=t.hRowScrollBar)||void 0===o?void 0:o.thumbOffset)+(null===(i=t.hRowScrollBar)||void 0===i?void 0:i.thumbLen)>=t.cornerBBox.width,f=t.hRowScrollBar&&t.isScrollOverTheCornerArea({offsetX:c,offsetY:u})||(null===(a=t.hScrollBar)||void 0===a?void 0:a.thumbOffset)+(null===(l=t.hScrollBar)||void 0===l?void 0:l.thumbLen)>=d;return s>=0&&f&&h},this.isScrollToTop=function(e){var n;return!t.vScrollBar||e<=0&&(null===(n=t.vScrollBar)||void 0===n?void 0:n.thumbOffset)<=0},this.isScrollToBottom=function(e){var n,r,o;return!t.vScrollBar||e>=0&&(null===(n=t.vScrollBar)||void 0===n?void 0:n.thumbOffset)+(null===(r=t.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(o=t.panelBBox)||void 0===o?void 0:o.height)},this.isVerticalScrollOverTheViewport=function(e){return!t.isScrollToTop(e)&&!t.isScrollToBottom(e)},this.isHorizontalScrollOverTheViewport=function(e){return!t.isScrollToLeft(e)&&!t.isScrollToRight(e)},this.isScrollOverTheViewport=function(e){var n=e.deltaY,r=e.deltaX;return!(e.offsetY<=t.cornerBBox.maxY)&&(0!==n?t.isVerticalScrollOverTheViewport(n):0!==r&&t.isHorizontalScrollOverTheViewport(e))},this.cancelScrollFrame=function(){return!(xb()&&t.scrollFrameId||(cancelAnimationFrame(t.scrollFrameId),0))},this.clearScrollFrameIdOnMobile=function(){xb()&&(t.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(e){"auto"!==t.spreadsheet.options.interaction.overscrollBehavior&&t.stopScrollChaining(e)},this.stopScrollChaining=function(e){var t,n,r;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),null===(r=null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.preventDefault)||void 0===r||r.call(n)},this.onWheel=function(e){var n=t.spreadsheet.options.interaction,r=e.deltaX,o=e.deltaY,i=e.offsetX,a=e.offsetY,l=tb(function(e,t,n){var r=Math.abs(e/t),o=r>2?0:t;return[(r<=.5?0:e)*n.horizontal,o*n.vertical]}(r,o,n.scrollSpeedRatio),2),s=l[0],c=l[1];t.spreadsheet.hideTooltip(),t.spreadsheet.interaction.clearHoverTimer(),t.isScrollOverTheViewport({deltaX:s,deltaY:c,offsetX:i,offsetY:a})?(t.stopScrollChaining(e),t.spreadsheet.interaction.addIntercepts([Py.HOVER]),t.cancelScrollFrame()&&(t.scrollFrameId=requestAnimationFrame((function(){var e,n=t.getScrollOffset(),r=n.scrollX,o=n.scrollY,l=n.hRowScrollX;0!==s&&(t.showHorizontalScrollBar(),t.updateHorizontalRowScrollOffset({offsetX:i,offsetY:a,offset:s+l}),t.updateHorizontalScrollOffset({offsetX:i,offsetY:a,offset:s+r})),0!==c&&(t.showVerticalScrollBar(),null===(e=t.vScrollBar)||void 0===e||e.emitScrollChange(c+o)),t.delayHideScrollbarOnMobile(),t.clearScrollFrameIdOnMobile()})))):t.stopScrollChainingIfNeeded(e)},this.addCell=function(e){var n=t.spreadsheet.panelScrollGroup;null==n||n.add(e)},this.realCellRender=function(e,n){var r=t.calculateXYIndexes(e,n);kb.getInstance().logger("renderIndex:",t.preCellIndexes,r);var o,i,a,l,s=(o=t.preCellIndexes,i=r,a=[],l=[],Object.keys(i).forEach((function(e){var t=function(e,t){var n=[],r=[];if(Mp(e))return Mp(t)?{add:n,remove:r}:{add:BS(t),remove:r};if(Mp(t))return{add:n,remove:BS(e)};for(var o=tb(e,4),i=o[0],a=o[1],l=o[2],s=o[3],c=tb(t,4),u=c[0],d=c[1],h=c[2],f=c[3],p=i;p<=a;p++)for(var v=l;v<=s;v++)kS(p,v,t)||r.push([p,v]);for(p=u;p<=d;p+=1)for(v=h;v<=f;v+=1)kS(p,v,e)||n.push([p,v]);return{add:n,remove:r}}((null==o?void 0:o[e])||[],i[e]),n=t.add,r=t.remove;a.push.apply(a,nb([],tb(n),!1)),l.push.apply(l,nb([],tb(r),!1))})),{add:a,remove:l}),c=s.add,u=s.remove;kb.getInstance().debugCallback("Data Cell Render",(function(){tf(c,(function(e){var n=tb(e,2),r=n[0],o=n[1],i=t.layoutResult.getCellMeta(o,r);if(i){var a=t.cfg.dataCell(i);a.set("name","".concat(r,"-").concat(o)),t.addCell(a)}}));var e=NS(t.panelGroup.getChildren(),lw);tf(u,(function(t){var n=tb(t,2),r=n[0],o=n[1],i=If(e,(function(e){return e.get("name")==="".concat(r,"-").concat(o)}));null==i||i.remove(!0)})),kb.getInstance().logger("Render Cell Panel: ".concat(null==e?void 0:e.length,", Add: ").concat(null==c?void 0:c.length,", Remove: ").concat(null==u?void 0:u.length))})),t.preCellIndexes=r},this.getGridInfo=function(){var e=tb(t.preCellIndexes.center,4),n=e[0],r=e[1],o=e[2],i=e[3];return{cols:RS(n,r,t.layoutResult.colLeafNodes),rows:DS(o,i,t.viewCellHeights)}},this.onAfterScroll=Sh((function(){t.spreadsheet.interaction.isSelectedState()||t.spreadsheet.interaction.removeIntercepts([Py.HOVER])}),300),this.cfg=e,this.spreadsheet=e.spreadsheet,this.init()}return Object.defineProperty(e.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),e.prototype.getCellCustomWidth=function(e,t){return Ca(t)?null==t?void 0:t(e):t},e.prototype.getCellDraggedWidth=function(e){var t=this.cfg.colCfg;return ic(null==t?void 0:t.widthByFieldValue,"".concat(e.value),e.width)},e.prototype.render=function(){this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell()},e.prototype.adjustScrollOffset=function(){var e=this.getAdjustedScrollOffset(this.getScrollOffset()),t=e.scrollX,n=e.scrollY,r=e.hRowScrollX;this.setScrollOffset({scrollX:t,scrollY:n,hRowScrollX:r})},e.prototype.getSeriesNumberWidth=function(){return this.cfg.showSeriesNumber?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},e.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},e.prototype.getContentHeight=function(){var e=this.layoutResult,t=e.rowsHierarchy,n=e.colsHierarchy;return t.height+n.height},e.prototype.updateScrollOffset=function(e){var t,n,r,o;void 0===(null===(t=e.offsetX)||void 0===t?void 0:t.value)?void 0!==(null===(r=e.offsetY)||void 0===r?void 0:r.value)&&((null===(o=e.offsetY)||void 0===o?void 0:o.animate)?this.scrollWithAnimation(e):this.scrollImmediately(e)):(null===(n=e.offsetX)||void 0===n?void 0:n.animate)?this.scrollWithAnimation(e):this.scrollImmediately(e)},e.prototype.getPaginationScrollY=function(){var e=this.cfg.pagination;if(e){var t=e.current,n=void 0===t?1:t,r=e.pageSize,o=this.viewCellHeights,i=Math.max((n-1)*r,0);return o.getCellOffsetY(i)}return 0},e.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},e.prototype.calculateXYIndexes=function(e,t){var n=this.panelBBox,r=n.viewportHeight,o=n.viewportWidth;return{center:nx(e,t,this.viewCellWidths,this.viewCellHeights,{width:o,height:r,x:0,y:0},this.getRealScrollX(this.cornerBBox.width))}},e.prototype.calculateCornerBBox=function(){this.cornerBBox=new FS(this,!0)},e.prototype.getCellRange=function(){var e=this.cfg.pagination;return function(e,t){var n=e,r=0,o=n.getTotalLength()-1;if(t){var i=t.current,a=void 0===i?1:i,l=t.pageSize;r=Math.max((a-1)*l,0),o=Math.min(a*l-1,n.getTotalLength()-1)}return{start:r,end:o}}(this.viewCellHeights,e)},e.prototype.clip=function(e,t){var n,r=this.spreadsheet.isFrozenRowHeader();null===(n=this.spreadsheet.panelScrollGroup)||void 0===n||n.setClip({type:"rect",attrs:{x:r?e:0,y:t,width:this.panelBBox.width+(r?0:e),height:this.panelBBox.height}})},e.prototype.translateRelatedGroups=function(e,t,n){var r,o;rx(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-e,this.cornerBBox.height-t),null===(r=this.rowHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(e,n),t,vi),null===(o=this.rowIndexHeader)||void 0===o||o.onScrollXY(this.getRealScrollX(e,n),t,yi),this.cornerHeader.onCorScroll(this.getRealScrollX(e,n),bi),this.centerFrame.onChangeShadowVisibility(e,this.getRealWidth()-this.panelBBox.width),this.centerFrame.onBorderScroll(this.getRealScrollX(e)),this.columnHeader.onColScroll(e,Ci)},e.prototype.init=function(){var e=this;kb.getInstance().debugCallback("Header Layout",(function(){e.layoutResult=e.doLayout(),e.saveInitColumnLeafNodes(e.layoutResult.colLeafNodes),e.spreadsheet.emit(ei.LAYOUT_AFTER_HEADER_LAYOUT,e.layoutResult)})),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},e.prototype.renderBackground=function(){var e=this.getCanvasHW(),t=e.width,n=e.height,r=this.spreadsheet.theme.background,o=r.color,i=r.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:o,opacity:i,x:0,y:0,width:t,height:n}})},e.prototype.renderScrollBars=function(){var e=this.getScrollOffset(),t=e.scrollX,n=e.scrollY,r=e.hRowScrollX,o=this.panelBBox,i=o.width,a=o.height,l=this.layoutResult.colsHierarchy.width,s=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(i,l,t),this.renderVScrollBar(a,s,n)},e.prototype.renderHeaders=function(){var e=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),e>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},e.prototype.getRowHeader=function(){var e,t,n;if(!this.rowHeader){var r=this.panelBBox,o=r.y,i=r.viewportHeight,a=r.viewportWidth,l=r.height,s=this.getSeriesNumberWidth();return new US({width:this.cornerBBox.width,height:l,viewportWidth:a,viewportHeight:i,position:{x:0,y:o},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:null!==(n=null===(t=null===(e=this.cfg.spreadsheet.options)||void 0===e?void 0:e.interaction)||void 0===t?void 0:t.linkFields)&&void 0!==n?n:[],seriesNumberWidth:s,spreadsheet:this.spreadsheet})}return this.rowHeader},e.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,t=e.x,n=e.width,r=e.viewportHeight,o=e.viewportWidth;return new GS({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:r,position:{x:t,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:HS.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},e.prototype.getSeriesNumberHeader=function(){return VS.getSeriesNumberHeader(this.panelBBox,this.getSeriesNumberWidth(),this.layoutResult.rowsHierarchy.getNodes(0),this.spreadsheet,this.cornerBBox.width)},e.prototype.getCenterFrame=function(){var e;if(!this.centerFrame){var t=this.panelBBox,n=t.viewportWidth,r=t.viewportHeight,o=this.cornerBBox.width,i=this.cornerBBox.height,a=null===(e=this.cfg)||void 0===e?void 0:e.frame,l={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:o,height:i,viewportWidth:n,viewportHeight:r,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return a?a(l):new WS(l)}return this.centerFrame},e.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},e.prototype.dynamicRenderCell=function(e){var t=this.getScrollOffset(),n=t.scrollX,r=t.scrollY,o=t.hRowScrollX,i=r+this.getPaginationScrollY(),a=MS(i,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,a),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,a,o),this.clip(n,a),e||this.emitScrollEvent({scrollX:n,scrollY:a}),this.onAfterScroll()},e.prototype.emitScrollEvent=function(e){this.spreadsheet.emit(ei.LAYOUT_CELL_SCROLL,e),this.spreadsheet.emit(ei.GLOBAL_SCROLL,e)},e.prototype.saveInitColumnLeafNodes=function(e){void 0===e&&(e=[]);var t=this.spreadsheet,n=t.store,r=t.options.interaction.hiddenColumnFields;e.length+r.length!==n.get("initColumnLeafNodes",[]).length&&n.set("initColumnLeafNodes",e)},e}(),$S=function(e){var t,n,r,o=e.facetCfg,i=e.customTreeItems,a=void 0===i?[]:i,l=e.level,s=e.parentNode,c=e.hierarchy,u=o.spreadsheet,d=o.collapsedRows,h=o.hierarchyCollapse;try{for(var f=eb(a),p=f.next();!p.done;p=f.next()){var v=p.value,g=v.key,m=v.title,y=v.collapsed,b=v.children,C=Jy(v,["key","title","collapsed","children"]),w=((r={})[oi]=g,r),x=Rb(s.id,m),E=null!=y&&y,S=ic(d,x),L=null!=S?S:h||E,O=new Sb({id:x,key:g,label:m,value:m,level:l,parent:s,field:g,isTotals:!1,isCollapsed:L,hierarchy:c,query:w,spreadsheet:u,extra:C});l>c.maxLevel&&(c.maxLevel=l),Mp(b)&&(O.isLeaf=!0);var I=Tb(o,s,O,c);Mp(b)||L||!I||$S({facetCfg:o,parentNode:O,level:l+1,hierarchy:c,customTreeItems:b})}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}},XS="root[&]".length,qS=function(e){var t,n,r,o,i,a,l,s=e.parentNode,c=e.currentField,u=e.level,d=e.facetCfg,h=e.hierarchy,f=e.pivotMeta,p=d.spreadsheet,v=d.dataSet,g=d.collapsedRows,m=d.hierarchyCollapse,y=d.rowExpandDepth,b=s.query,C=s.id,w=(null===(o=p.dataCfg.fields.rows)||void 0===o?void 0:o.length)<=u,x=(null===(i=null==v?void 0:v.sortedDimensionValues)||void 0===i?void 0:i[c])||[],E=Xb(Array.from(f.keys())),S=$b(E,x,(function(e){return Si===C?e:Rb(C,e).slice(XS)})),L=_b(S,d,s,c),O=p.store.get("drillItemsNum");w&&O>0&&(L=L.slice(0,O)),0===u&&function(e,t,n){var r=e.getTotalsConfig(t);r.showGrandTotals&&n[r.reverseLayout?"unshift":"push"](new Ob(r.label,!1,!0))}(p,c,L);try{for(var I=eb(L),_=I.next();!_.done;_=I.next()){var T=_.value,A=T instanceof Ob,M=A?null:f.get(T),N=void 0,R=b,D=!1,k=!1;if(A){var B=T;D=B.isGrandTotals,k=B.isSubTotals,N=gb(T.label),R=b}else N=T,R=Qy(Qy({},b),((r={})[c]=N,r));var P=Rb(C,N),F=null==g?void 0:g[P],j=kp(y)?u>y:null,z=null!==(a=null!=F?F:j)&&void 0!==a?a:m,G=new Sb({id:P,key:c,label:N,value:N,level:u,parent:s,field:c,isTotals:A,isGrandTotals:D,isSubTotals:k,isCollapsed:z,hierarchy:h,query:R,spreadsheet:p});u>h.maxLevel&&(h.maxLevel=u);var H=!(null===(l=null==M?void 0:M.children)||void 0===l?void 0:l.size);(H||A)&&(G.isLeaf=!0),H||(G.isTotals=!0);var W=Tb(d,s,G,h);H||z||A||!W||qS({level:u+1,currentField:M.childField,pivotMeta:M.children,facetCfg:d,parentNode:G,hierarchy:h})}}catch(e){t={error:e}}finally{try{_&&!_.done&&(n=I.return)&&n.call(I)}finally{if(t)throw t.error}}},KS=function(e){var t,n,r=e.isValueInCols,o=e.moreThanOneValue,i=e.rootNode,a=e.facetCfg,l=e.hierarchy,s=e.fields;e.isRowHeader?(t=!r&&o,n=!r&&!o):(t=r&&o,n=r&&!o),Nb({addTotalMeasureInTotal:t,addMeasureInTotalQuery:n,parentNode:i,currentField:s[0],fields:s,facetCfg:a,hierarchy:l})},ZS=function(e){var t=e.isRowHeader,n=e.facetCfg,r=n.spreadsheet,o=n.rows,i=void 0===o?[]:o,a=n.columns,l=void 0===a?[]:a,s=r.dataCfg.fields.valueInCols,c=r.isPivotMode(),u=n.dataSet.moreThanOneValue(),d=Sb.rootNode(),h=new Lb,f={isValueInCols:s,isPivotMode:c,moreThanOneValue:u,rootNode:d,hierarchy:h,spreadsheet:r,facetCfg:n,fields:t?i:l,isRowHeader:t};return t?function(e){e.spreadsheet.isHierarchyTreeType()?function(e){var t=e.facetCfg,n=e.rootNode,r=e.hierarchy,o=t.hierarchyType,i=t.rows,a=t.dataSet;"tree"===o?qS({level:0,currentField:i[0],pivotMeta:a.rowPivotMeta,facetCfg:t,parentNode:n,hierarchy:r}):function(e){var t=e.facetCfg,n=e.rootNode,r=e.hierarchy,o=t.dataSet.fields.customTreeItems;$S({customTreeItems:o,facetCfg:t,level:0,parentNode:n,hierarchy:r})}(e)}(e):KS(e)}(f):function(e){var t=e.isPivotMode,n=e.hierarchy,r=e.rootNode,o=e.facetCfg;t?KS(e):function(e){var t=e.facetCfg,n=e.hierarchy,r=e.parentNode,o=t.columns,i=t.spreadsheet,a=t.dataSet,l=i.store.get("hiddenColumnsDetail"),s=null==t?void 0:t.showSeriesNumber,c=o.filter((function(e){return!l||l.every((function(t){return t.hideColumnNodes.every((function(t){return t.field!==e}))}))})),u=nb([],tb(c),!1),d=kf(c,(function(e){return a.getFieldName(e)}));s&&(u.unshift(li),d.unshift(gb("序号"))),Db({currentField:u[0],fields:u,fieldValues:d,facetCfg:t,hierarchy:n,parentNode:r,level:0,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1})}({parentNode:r,hierarchy:n,facetCfg:o})}(f),{hierarchy:h,leafNodes:t&&r.isHierarchyTreeType()?h.getNodes():h.getLeaves()}},QS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),Object.defineProperty(t.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),t.prototype.doLayout=function(){var e=ZS({isRowHeader:!0,facetCfg:this.cfg}),t=e.leafNodes,n=e.hierarchy,r=ZS({isRowHeader:!1,facetCfg:this.cfg}),o=r.leafNodes,i=r.hierarchy;this.calculateNodesCoordinate(t,n,o,i);var a=this.cfg,l=a.dataSet,s=a.spreadsheet,c={colNodes:i.getNodes(),colsHierarchy:i,rowNodes:n.getNodes(),rowsHierarchy:n,rowLeafNodes:t,colLeafNodes:o,getCellMeta:function(e,n){var r,i,a,c=e||0,u=n||0,d=t[c],h=o[u];if(!d||!h)return null;var f,p=d.query,v=h.query,g=d.isTotals||d.isTotalMeasure||h.isTotals||h.isTotalMeasure,m=s.options.hierarchyType,y=null!==(i=ic(s,"facet.cfg.colCfg.hideMeasureColumn"))&&void 0!==i&&i&&"customTree"!==m?((r={})[oi]=null===(a=l.fields.values)||void 0===a?void 0:a[0],r):{},b=av({},p,v,y),C=l.getCellData({query:b,rowNode:d,isTotals:g}),w=null;return Mp(C)?f=ic(b,[oi],""):(f=ic(C,[oi],""),w=ic(C,[ri],null),g&&(f=ic(b,[oi],""),w=ic(C,f,null))),{spreadsheet:s,x:h.x,y:d.y,width:h.width,height:d.height,data:C,rowIndex:c,colIndex:u,isTotals:g,valueField:f,fieldValue:w,rowQuery:p,colQuery:v,rowId:d.id,colId:h.id,id:aw(d.id,h.id)}},spreadsheet:s};return function(e,t){var n=null==e?void 0:e.layoutDataPosition;if(n){var r=t.getCellMeta,o=n(e.spreadsheet,r);return Qy(Qy({},t),{getCellMeta:o})}return t}(this.cfg,c)},t.prototype.calculateNodesCoordinate=function(e,t,n,r){this.calculateRowNodesCoordinate(e,t,n),this.calculateColNodesCoordinate(n,r,e,t.width)},t.prototype.calculateColNodesCoordinate=function(e,t,n,r){var o,i,a,l,s=this.cfg.spreadsheet,c=Sb.blankNode(),u=t.getNodes();try{for(var d=eb(t.sampleNodesForAllLevels),h=d.next();!h.done;h=d.next()){var f=h.value;f.height=this.getColNodeHeight(f),t.height+=f.height}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}for(var p=0,v=function(o){var i=u[o];if(i.isLeaf&&(i.colIndex=p,p+=1,i.x=c.x+c.width,i.width=g.calculateColLeafNodesWidth(i,e,n,r),t.width+=i.width,c=i),0===i.level)i.y=0;else{var l=t.sampleNodesForAllLevels.find((function(e){return e.level===i.level-1}));i.y=null!==(a=(null==l?void 0:l.y)+(null==l?void 0:l.height))&&void 0!==a?a:0}i.height=g.getColNodeHeight(i),Ab(g.cfg,null,i)},g=this,m=0;m<u.length;m++)v(m);this.autoCalculateColNodeWidthAndX(e),Mp(null===(l=s.options.totals)||void 0===l?void 0:l.col)||(this.adjustTotalNodesCoordinate(t),this.adjustSubTotalNodesCoordinate(t))},t.prototype.autoCalculateColNodeWidthAndX=function(e){for(var t=null,n=e.slice(0);n.length;){var r=n.shift().parent;t!==r&&r&&(n.push(r),r.x=r.children[0].x,r.width=r.children.map((function(e){return e.width})).reduce((function(e,t){return e+t}),0),t=r)}},t.prototype.calculateColLeafNodesWidth=function(e,t,n,r){var o,i,a,l,s,c=this.cfg,u=c.colCfg,d=c.dataSet,h=c.filterDisplayDataItem,f=this.getCellDraggedWidth(e);if(f)return f;var p=this.getCellCustomWidth(e,null==u?void 0:u.width);if(!Fp(p))return p;if(this.spreadsheet.getLayoutWidthType()===Yy.Compact){for(var v=this.spreadsheet.theme.colCell,g=v.bolderText,m=v.cell,y=v.icon,b=this.spreadsheet.dataSet.getFieldFormatter(e.field),C=null!==(o=null==b?void 0:b(e.value))&&void 0!==o?o:e.label,w=this.getExpectedCellIconWidth(uy.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,y),x=this.spreadsheet.measureTextWidthRoughly(C)+w,E=void 0,S=0,L=0;L<50;L++){var O=n[L];if(O){var I=d.getCellData({query:Qy(Qy({},e.query),O.query),rowNode:O,isTotals:e.isTotals||e.isTotalMeasure||O.isTotals||O.isTotalMeasure});if(I){var _=ow(I,h),T=null!==(a=null===(i=this.spreadsheet.dataSet.getFieldFormatter(I[oi]))||void 0===i?void 0:i(_))&&void 0!==a?a:_,A="".concat(T),M=this.spreadsheet.measureTextWidthRoughly(A);M>S&&(E=A,S=M)}}}var N=x>S,R=N?C:E,D=N?w:0;return kb.getInstance().logger("Max Label In Col:",e.field,R),this.spreadsheet.measureTextWidth(R,g)+(null===(l=m.padding)||void 0===l?void 0:l.left)+(null===(s=m.padding)||void 0===s?void 0:s.right)+D}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(e,t,n):this.getAdaptGridColWidth(t,r)},t.prototype.getColNodeHeight=function(e){var t=this.cfg.colCfg;return ic(t,"heightByField.".concat(e.key))||t.height},t.prototype.getExpectedCellIconWidth=function(e,t,n){var r,o=0;if(t)o=1;else{var i=ww(kf(this.spreadsheet.options.headerActionIcons,(function(e){return Qy(Qy({},e),{displayCondition:function(){return!0}})})),null,e);o=null!==(r=null==i?void 0:i.iconNames.length)&&void 0!==r?r:0}return o?o*(n.size+n.margin.left)+n.margin.right:0},t.prototype.calculateRowNodesCoordinate=function(e,t,n){var r,o,i,a,l,s,c,u,d,h,f=this.cfg,p=f.cellCfg,v=f.spreadsheet,g=v.isHierarchyTreeType(),m=ic(v,"options.style.rowCfg.heightByField",{}),y=null!==(i=t.sampleNodesForAllLevels)&&void 0!==i?i:[];if(g)t.width=this.getTreeRowHeaderWidth();else try{for(var b=eb(t.sampleNodesForAllLevels),C=b.next();!C.done;C=b.next()){var w=C.value;w.width=this.calculateGridRowNodesWidth(w,n),t.width+=w.width;var x=null!==(a=y[w.level-1])&&void 0!==a?a:{x:0,width:0};w.x=(null==x?void 0:x.x)+(null==x?void 0:x.width)}}catch(e){r={error:e}}finally{try{C&&!C.done&&(o=b.return)&&o.call(b)}finally{if(r)throw r.error}}for(var E=Sb.blankNode(),S=t.getNodes(),L=0;L<S.length;L++){var O=S[L];if((g||!g&&O.isLeaf)&&(null!==(l=O.rowIndex)&&void 0!==l||(O.rowIndex=L),null!==(s=O.colIndex)&&void 0!==s||(O.colIndex=L),O.y=E.y+E.height,O.height=(null!==(c=m[O.id])&&void 0!==c?c:p.height)+(null===(u=this.rowCellTheme.padding)||void 0===u?void 0:u.top)+(null===(d=this.rowCellTheme.padding)||void 0===d?void 0:d.bottom),E=O,t.height+=O.height),g||0===O.level?O.x=0:(x=y[O.level-1],O.x=(null==x?void 0:x.x)+(null==x?void 0:x.width)),g)O.width=this.getTreeRowHeaderWidth();else{var I=y[O.level];O.width=null==I?void 0:I.width}Ab(this.cfg,O,null)}g||(this.autoCalculateRowNodeHeightAndY(e),Mp(null===(h=v.options.totals)||void 0===h?void 0:h.row)||(this.adjustTotalNodesCoordinate(t,!0),this.adjustSubTotalNodesCoordinate(t,!0)))},t.prototype.autoCalculateRowNodeHeightAndY=function(e){for(var t=null,n=e.slice(0);n.length;){var r=n.shift().parent;t!==r&&r&&(n.push(r),r.y=r.children[0].y,r.height=r.children.map((function(e){return e.height})).reduce((function(e,t){return e+t}),0),t=r)}},t.prototype.adjustTotalNodesCoordinate=function(e,t){var n,r,o,i=this.cfg.dataSet.moreThanOneValue(),a=e.maxLevel,l=If(e.getNodes(0),(function(e){return e.isGrandTotals}));if(l instanceof Sb){var s=l.children;if(t)l.width=e.width,tf(s,(function(t){t.x=e.getNodes(a)[0].x}));else if(a>1||a<=1&&!i){var c=null!==(r=null===(n=null==s?void 0:s[0])||void 0===n?void 0:n.height)&&void 0!==r?r:0;l.height=e.height-c;var u=null===(o=If(e.getNodes(a),(function(e){return!e.isTotalMeasure})))||void 0===o?void 0:o.y;tf(s,(function(e){e.y=u}))}}},t.prototype.adjustSubTotalNodesCoordinate=function(e,t){var n=e.getNodes().filter((function(e){return e.isSubTotals}));if(!Mp(n)){var r=e.maxLevel;tf(n,(function(n){var o,i,a,l=n.children;if(t)n.width=_S(e.sampleNodesForAllLevels,n.level,"width"),tf(l,(function(t){t.x=e.getNodes(r)[0].x}));else{var s=_S(e.sampleNodesForAllLevels,n.level,"height"),c=null!==(i=null===(o=null==l?void 0:l[0])||void 0===o?void 0:o.height)&&void 0!==i?i:0;n.height=s-c,tf(l,(function(t){t.y=e.getNodes(r)[0].y}));var u=null===(a=If(e.getNodes(r),(function(e){return!e.isTotalMeasure})))||void 0===a?void 0:a.y;tf(l,(function(e){e.y=u}))}}))}},t.prototype.calculateGridRowNodesWidth=function(e,t){var n=this.cfg,r=n.rowCfg,o=n.spreadsheet,i=ic(r,"widthByField.".concat(e.key));if(i)return i;var a=this.getCellCustomWidth(e,null==r?void 0:r.width);return Fp(a)?o.getLayoutWidthType()!==Yy.Adaptive?this.getCompactGridRowWidth(e):this.getAdaptGridColWidth(t):a},t.prototype.getAdaptTreeColWidth=function(e,t,n){var r=this.getCanvasHW().width-this.getSeriesNumberWidth(),o=Math.min(r/2,this.getTreeRowHeaderWidth()),i=Math.max(1,t.length),a=this.cfg.cellCfg;return Math.max(IC(a,this.getColLabelLength(e,n)),(r-o)/i)},t.prototype.getColLabelLength=function(e,t){var n,r=_C(null==e?void 0:e.value);if(ta(r))return r.length;for(var o=1,i=0;i<50;i++){var a=t[i];if(!a)return o;for(var l=this.cfg.dataSet.getCellData({query:Qy(Qy({},e.query),a.query),rowNode:a,isTotals:e.isTotals||e.isTotalMeasure||a.isTotals||a.isTotalMeasure}),s=Ls(l),c=0;c<s.length;c++){var u=l[s[c]],d=Yg(null===(n=null==u?void 0:u.values)||void 0===n?void 0:n[0]);d>o&&(o=d)}}return o},t.prototype.getAdaptGridColWidth=function(e,t){var n=this.cfg,r=n.rows,o=n.cellCfg,i=r.length,a=e.length,l=this.getCanvasHW().width-this.getSeriesNumberWidth(),s=Math.max(1,i+a);return t?Math.max(IC(o),(l-t)/a):Math.max(IC(o),l/s)},t.prototype.getTreeRowHeaderWidth=function(){var e,t,n,r,o=this.cfg,i=o.rows,a=o.dataSet,l=o.rowCfg,s=o.treeRowsWidth,c=null!=s?s:null==l?void 0:l.treeRowsWidth;if(c)return c;var u=this.getCellCustomWidth(null,null==l?void 0:l.width);if(u)return u;var d=i.map((function(e){return a.getFieldName(e)})).join("/"),h=this.spreadsheet.theme.cornerCell,f=h.bolderText,p=h.icon,v=this.spreadsheet.measureTextWidth(d,f)+2*p.size+(null===(e=p.margin)||void 0===e?void 0:e.left)+(null===(t=p.margin)||void 0===t?void 0:t.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right);return Math.max(null!=c?c:120,v)},t.prototype.getCompactGridRowWidth=function(e){var t,n=this,r=this.cfg,o=r.dataSet,i=r.spreadsheet,a=i.theme.rowCell,l=a.bolderText,s=a.icon,c=a.cell,u=i.theme.cornerCell,d=u.bolderText,h=u.icon,f=u.cell,p=e.field,v=e.isLeaf,g=this.getExpectedCellIconWidth(uy.ROW_CELL,!i.isValueInCols()&&v&&i.options.showDefaultHeaderActionIcon,s),m=null===(t=o.getDimensionValues(p))||void 0===t?void 0:t.slice(0,50).map((function(e){var t,r;return null!==(r=null===(t=n.spreadsheet.dataSet.getFieldFormatter(p))||void 0===t?void 0:t(e))&&void 0!==r?r:e})),y=nv(m,(function(e){return"".concat(e).length})),b=i.measureTextWidth(y,l)+g+c.padding.left+c.padding.right,C=o.getFieldName(p),w=this.getExpectedCellIconWidth(uy.CORNER_CELL,!1,h),x=i.measureTextWidth(C,d)+w+f.padding.left+f.padding.right;return kb.getInstance().logger("Max Label In Row:",p,b>x?y:C),Math.max(b,x)},t.prototype.getViewCellHeights=function(e){var t=Ng(e.rowLeafNodes,(function(e,t){return e.push($h(e)+t.height),e}),[0]);return{getTotalHeight:function(){return $h(t)},getCellOffsetY:function(e){return t[e]},getTotalLength:function(){return t.length-1},getIndexRange:function(e,n){return TS(t,e,n)}}},t}(YS),JS=function(e){function t(t){var n,r=this;(r=e.call(this,t)||this).getScrollGroupClipBBox=function(){var e,t=r.headerConfig,n=t.width,o=t.height,i=t.scrollX,a=t.spreadsheet,l=a.options;if(!l.frozenColCount&&!l.frozenTrailingColCount)return{x:i,y:0,width:n,height:o};for(var s=null===(e=a.facet)||void 0===e?void 0:e.layoutResult.colLeafNodes,c=tC(a.options,s.length),u=c.frozenColCount,d=c.frozenTrailingColCount,h=0,f=0,p=0;p<u;p++)h+=s[p].width;for(p=0;p<d;p++)f+=s[s.length-1-p].width;return{x:i+h,y:0,width:n-h-f,height:o}};var o=null===(n=r.headerConfig.spreadsheet)||void 0===n?void 0:n.options,i=o.frozenColCount,a=o.frozenTrailingColCount;return i&&(r.frozenColGroup=r.addGroup({name:"colFrozenGroup",zIndex:4})),a&&(r.frozenTrailingColGroup=r.addGroup({name:"colFrozenTrailingGroup",zIndex:4})),r}return Zy(t,e),t.prototype.isFrozenCell=function(e){var t=this.headerConfig.spreadsheet,n=null==t?void 0:t.options,r=n.frozenColCount,o=n.frozenTrailingColCount,i=e.colIndex,a=null==t?void 0:t.facet.layoutResult.colLeafNodes;return Qw(i,r)||Jw(i,o,a.length)},t.prototype.clear=function(){var t,n,r=this.headerConfig.spreadsheet;e.prototype.clear.call(this),null===(t=this.frozenTrailingColGroup)||void 0===t||t.clear(),null===(n=this.frozenColGroup)||void 0===n||n.clear();var o=null==r?void 0:r.foregroundGroup.findById(wi);null==o||o.clear()},t.prototype.getCellInstance=function(e,t,n){return e.field===li?new lx(e,t,n):new ax(e,t,n)},t.prototype.getCellGroup=function(e){var t,n=this.headerConfig.spreadsheet,r=null==n?void 0:n.options,o=r.frozenColCount,i=r.frozenTrailingColCount,a=null===(t=null==n?void 0:n.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes.length;return Qw(e.colIndex,o)?this.frozenColGroup:Jw(e.colIndex,i,a)?this.frozenTrailingColGroup:this.scrollGroup},t.prototype.isColCellInRect=function(t){var n,r=this.headerConfig.spreadsheet,o=null==r?void 0:r.options,i=o.frozenColCount,a=o.frozenTrailingColCount,l=null===(n=null==r?void 0:r.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length;return!(!Qw(t.colIndex,i)&&!Jw(t.colIndex,a,l))||e.prototype.isColCellInRect.call(this,t)},t.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},t}(GS),eL=function(e){function t(t){var n,r=e.call(this,t)||this;r.frozenGroupInfo=((n={})[Ai.FROZEN_COL]={width:0},n[Ai.FROZEN_ROW]={height:0},n[Ai.FROZEN_TRAILING_ROW]={height:0},n[Ai.FROZEN_TRAILING_COL]={width:0},n),r.panelScrollGroupIndexes=[],r.onSortHandler=function(e){var t=r.spreadsheet,n=e;Array.isArray(e)||(n=[e]);var o=t.dataCfg.sortParams||[];n=n.map((function(e){var t,n,r=Qy(Qy({},e),{sortFieldId:null!==(t=e.sortKey)&&void 0!==t?t:e.sortFieldId}),i=null!==(n=o.find((function(e){return e.sortFieldId===r.sortFieldId})))&&void 0!==n?n:{};return Qy(Qy({},i),r)}));var i=o.filter((function(e){return!n.find((function(t){return t.sortFieldId===e.sortFieldId}))}));Wg(t.dataCfg,"sortParams",nb(nb([],tb(i),!1),tb(n),!1)),t.setDataCfg(t.dataCfg),t.render(!0),t.emit(ei.RANGE_SORTED,t.dataSet.getDisplayDataSet())},r.onFilterHandler=function(e){var t=r.spreadsheet,n=!e.filteredValues||0===e.filteredValues.length,o=t.dataCfg.filterParams||[],i=o.findIndex((function(t){return t.filterKey===e.filterKey}));-1!==i?n?o.splice(i):o[i]=e:o.push(e),Wg(t.dataCfg,"filterParams",o),t.render(!0),t.emit(ei.RANGE_FILTERED,t.dataSet.getDisplayDataSet())},r.initFrozenGroupPosition=function(){var e=r.getScrollOffset(),t=e.scrollY,n=e.scrollX,o=r.getPaginationScrollY();rx(r.spreadsheet.frozenRowGroup,r.cornerBBox.width-n,r.cornerBBox.height-o),rx(r.spreadsheet.frozenColGroup,r.cornerBBox.width,r.cornerBBox.height-t-o),rx(r.spreadsheet.frozenTrailingColGroup,r.cornerBBox.width,r.cornerBBox.height-t-o),rx(r.spreadsheet.frozenTopGroup,r.cornerBBox.width,r.cornerBBox.height-o)},r.getTotalHeightForRange=function(e,t){if(e<0||t<0)return 0;if(r.rowOffsets)return r.rowOffsets[t+1]-r.rowOffsets[e];for(var n=0,o=e;o<t+1;o++)n+=r.getDefaultCellHeight();return n},r.getShadowFill=function(e){var t,n,o=ic(r.cfg,"spreadsheet.theme.splitLine");return"l (".concat(e,") 0:").concat(null===(t=o.shadowColors)||void 0===t?void 0:t.left," 1:").concat(null===(n=o.shadowColors)||void 0===n?void 0:n.right)},r.renderFrozenGroupSplitLine=function(e,t){var n,o=r.panelBBox,i=o.width,a=o.height,l=o.viewportWidth,s=o.viewportHeight,c=r.cornerBBox.height,u=r.layoutResult.colLeafNodes,d=r.getCellRange(),h=d.end-d.start,f=tC(r.spreadsheet.options,u.length,h),p=f.frozenRowCount,v=f.frozenColCount,g=f.frozenTrailingColCount,m=f.frozenTrailingRowCount,y=Math.floor(t-r.getPaginationScrollY()),b=Math.max(0,$h(r.viewCellWidths)-l),C=Math.max(0,r.viewCellHeights.getCellOffsetY(d.end+1)-r.viewCellHeights.getCellOffsetY(d.start)-s);null===(n=r.foregroundGroup.findById(mi))||void 0===n||n.remove();var w,x,E,S=ic(r.cfg,"spreadsheet.theme.splitLine"),L=r.foregroundGroup.addGroup({id:mi,zIndex:4}),O={lineWidth:null==S?void 0:S.verticalBorderWidth,stroke:null==S?void 0:S.verticalBorderColor,opacity:null==S?void 0:S.verticalBorderColorOpacity},I={lineWidth:null==S?void 0:S.horizontalBorderWidth,stroke:null==S?void 0:S.horizontalBorderColor,opacity:null==S?void 0:S.horizontalBorderColorOpacity};if(v>0&&(iC(L,{x1:w=u.reduce((function(e,t,n){return n<v?e+t.width:e}),0),x2:w,y1:c,y2:c+(x=m>0?a:s)},Qy({},O)),S.showShadow&&e>0&&L.addShape("rect",{attrs:{x:w,y:c,width:S.shadowWidth,height:x,fill:r.getShadowFill(0)}})),p>0){var _=c+r.getTotalHeightForRange(d.start,d.start+p-1);iC(L,{x1:0,x2:E=g>0?i:l,y1:_,y2:_},Qy({},I)),S.showShadow&&y>0&&L.addShape("rect",{attrs:{x:0,y:_,width:E,height:S.shadowWidth,fill:r.getShadowFill(90)}})}(g>0&&(iC(L,{x1:w=i-(E=u.reduceRight((function(e,t,n){return n>=u.length-g?e+t.width:e}),0)),x2:w,y1:c,y2:c+(x=m?a:s)},Qy({},O)),S.showShadow&&Math.floor(e)<Math.floor(b)&&L.addShape("rect",{attrs:{x:w-S.shadowWidth,y:c,width:S.shadowWidth,height:x,fill:r.getShadowFill(180)}})),m>0)&&(_=r.panelBBox.maxY-r.getTotalHeightForRange(d.end-m+1,d.end),iC(L,{x1:0,x2:E=g>0?i:l,y1:_,y2:_},Qy({},I)),S.showShadow&&y<Math.floor(C)&&L.addShape("rect",{attrs:{x:0,y:_-S.shadowWidth,width:E,height:S.shadowWidth,fill:r.getShadowFill(270)}}));r.foregroundGroup.sort()},r.renderFrozenPanelCornerGroup=function(){var e=r.layoutResult.colLeafNodes.length,t=r.getCellRange(),n=tC(r.spreadsheet.options,e,t.end-t.start+1),o=function(e,t,n){for(var r,o=e.frozenColCount,i=e.frozenRowCount,a=e.frozenTrailingColCount,l=e.frozenTrailingRowCount,s=((r={})[Ti.TOP]=[],r[Ti.BOTTOM]=[],r),c=0;c<o;c++){for(var u=n.start;u<n.start+i;u++)s[Ti.TOP].push({x:c,y:u});if(l>0)for(u=0;u<l;u++){var d=n.end-u;s[Ti.BOTTOM].push({x:c,y:d})}}for(c=0;c<a;c++){var h=t-1-c;for(u=n.start;u<n.start+i;u++)s[Ti.TOP].push({x:h,y:u});if(l>0)for(u=0;u<l;u++)d=n.end-u,s[Ti.BOTTOM].push({x:h,y:d})}return s}({frozenRowCount:n.frozenRowCount,frozenColCount:n.frozenColCount,frozenTrailingRowCount:n.frozenTrailingRowCount,frozenTrailingColCount:n.frozenTrailingColCount},e,t);Object.keys(o).forEach((function(e){var t=o[e],n=r.spreadsheet[ji[e]];n&&t.forEach((function(e){r.addFrozenCell(e.x,e.y,n)}))}))},r.addFrozenCell=function(e,t,n){var o=r.layoutResult.getCellMeta(t,e);if(o.isFrozenCorner=!0,o){var i=r.cfg.dataCell(o);n.add(i)}},r.addCell=function(e){var t=r.spreadsheet.options,n=t.frozenRowCount,o=t.frozenColCount,i=t.frozenTrailingRowCount,a=t.frozenTrailingColCount,l=r.layoutResult.colsHierarchy.getLeaves().length,s=r.getCellRange(),c=function(e,t,n,r){var o=t.frozenColCount,i=t.frozenRowCount,a=t.frozenTrailingColCount,l=t.frozenTrailingRowCount,s=e.colIndex,c=e.rowIndex;return ex(c,r.start,i)?Ti.ROW:tx(c,r.end,l)?Ti.TRAILING_ROW:Qw(s,o)?Ti.COL:Jw(s,a,n)?Ti.TRAILING_COL:Ti.SCROLL}(e.getMeta(),{frozenRowCount:n,frozenColCount:o,frozenTrailingRowCount:i,frozenTrailingColCount:a},l,s),u=ji[c];u&&r.spreadsheet[u].add(e)},r.getFrozenOptions=function(){var e=r.layoutResult.colLeafNodes.length,t=r.getCellRange();return tC(r.cfg,e,t.end-t.start+1)};var o=r.spreadsheet;return o.on(ei.RANGE_SORT,r.onSortHandler),o.on(ei.RANGE_FILTER,r.onFilterHandler),r}return Zy(t,e),Object.defineProperty(t.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t=this.spreadsheet;t.off(ei.RANGE_SORT,this.onSortHandler),t.off(ei.RANGE_FILTER,this.onFilterHandler),e.prototype.destroy.call(this)},t.prototype.calculateCornerBBox=function(){var e=this.layoutResult.colsHierarchy,t=Math.floor(e.height);this.cornerBBox=new FS(this),this.cornerBBox.height=t,this.cornerBBox.maxY=t},t.prototype.doLayout=function(){var e=this,t=this.cfg,n=t.dataSet,r=t.spreadsheet,o=new Lb,i=ZS({isRowHeader:!1,facetCfg:this.cfg}),a=i.leafNodes,l=i.hierarchy;this.calculateColNodesCoordinate(a,l);var s={colNodes:l.getNodes(),colsHierarchy:l,rowNodes:o.getNodes(),rowsHierarchy:o,rowLeafNodes:o.getLeaves(),colLeafNodes:a,getCellMeta:function(t,o){var i,l,s=e.cfg.showSeriesNumber,c=a[o],u=e.getCellHeight(t),d=e.getCellRange(),h=tC(e.cfg,a.length,d.end-d.start+1).frozenTrailingRowCount,f=c.x,p=e.viewCellHeights.getCellOffsetY(t);return tx(t,d.end,h)&&(p=e.panelBBox.maxY-e.getTotalHeightForRange(t,d.end)),l=s&&c.field===li?t+1:n.getCellData({query:{col:c.field,rowIndex:t}}),{spreadsheet:r,x:f,y:p,width:c.width,height:u,data:(i={},i[c.field]=l,i),rowIndex:t,colIndex:o,isTotals:!1,colId:c.id,rowId:String(t),valueField:c.field,fieldValue:l,id:aw(String(t),c.id)}},spreadsheet:r};return s},t.prototype.getAdaptiveColWidth=function(e){var t=this.cfg.cellCfg,n=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==Yy.Compact){var r=this.getSeriesNumberWidth(),o=e.length-(n?1:0),i=this.getCanvasHW().width-r;return Math.max(null==t?void 0:t.width,i/Math.max(1,o))}return null==t?void 0:t.width},t.prototype.getColNodeHeight=function(){var e=this.cfg.colCfg;return np(null==e?void 0:e.heightByField)[0]||(null==e?void 0:e.height)},t.prototype.calculateColNodesCoordinate=function(e,t){var n,r,o,i=Sb.blankNode(),a=t.getNodes();try{for(var l=eb(t.sampleNodesForAllLevels),s=l.next();!s.done;s=l.next()){var c=s.value;c.height=this.getColNodeHeight(),t.height+=c.height}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}for(var u=tC(null===(o=this.spreadsheet)||void 0===o?void 0:o.options,a.length).frozenTrailingColCount,d=this.getAdaptiveColWidth(e),h=0;h<a.length;h++)(p=a[h]).colIndex=h,p.x=i.x+i.width,p.width=this.calculateColLeafNodesWidth(p,d),i=p,p.y=0,p.height=this.getColNodeHeight(),Ab(this.cfg,null,p),t.width+=p.width;i=Sb.blankNode();var f=this.getCanvasHW().width;if(u>0)for(h=1;h<=a.length;h++){var p;(p=a[a.length-h]).colIndex>=e.length-u&&(p.colIndex===a.length-1?p.x=f-p.width:p.x=i.x-p.width,i=p)}},t.prototype.calculateColLeafNodesWidth=function(e,t){var n,r=this.cfg,o=r.colCfg,i=r.dataSet,a=r.spreadsheet,l=this.spreadsheet.getLayoutWidthType(),s=this.getCellDraggedWidth(e);if(s)return s;var c,u,d,h,f,p,v=this.getCellCustomWidth(e,null==o?void 0:o.width);if(!Fp(v))return v;if(l===Yy.Compact){var g=i.getDisplayDataSet(),m=e.label,y=(null===(n=null==g?void 0:g.map((function(t){return"".concat(t[e.key])})))||void 0===n?void 0:n.slice(0,50))||[];y.push(m);var b=nv(y,(function(e){return a.measureTextWidthRoughly(e)})),C=a.theme.colCell.bolderText,w=a.theme.dataCell,x=w.text,E=w.cell;kb.getInstance().logger("Max Label In Col:",e.field,b),c=m===b?a.measureTextWidth(b,C)+(u=this.spreadsheet,d=e,h=a.theme.colCell,f=ic(h,"cell.padding"),p=ix(u,d.field,h),f.left+f.right+function(e,t,n,r){var o,i,a,l=ic(r,"size"),s=ic(r,"margin");return(a=e.options.showDefaultHeaderActionIcon?1:null!==(i=null===(o=ww(e.options.headerActionIcons,t,n))||void 0===o?void 0:o.iconNames.length)&&void 0!==i?i:0)*(l+s.left)+(a>0?s.right:0)}(u,d,uy.COL_CELL,ic(h,"icon"))+p.left+p.right):a.measureTextWidth(b,x)+E.padding.left+E.padding.right+1}else c=t;return e.field===li&&(c=this.getSeriesNumberWidth()),c},t.prototype.getDefaultCellHeight=function(){var e=this.cfg.cellCfg;return null==e?void 0:e.height},t.prototype.getCellHeight=function(e){if(this.rowOffsets){var t=ic(this.spreadsheet,"options.style.rowCfg.heightByField",{})[String(e)];if(t)return t}return this.getDefaultCellHeight()},t.prototype.initRowOffsets=function(){var e=this,t=this.cfg.dataSet,n=ic(this.spreadsheet,"options.style.rowCfg.heightByField",{});if(Object.keys(n).length){var r=t.getDisplayDataSet();this.rowOffsets=[0];var o=0;r.forEach((function(t,r){var i,a=null!==(i=n[String(r)])&&void 0!==i?i:e.getDefaultCellHeight(),l=o+a;e.rowOffsets.push(l),o=l}))}},t.prototype.getViewCellHeights=function(){var e=this,t=this.cfg.dataSet;this.initRowOffsets();var n=this.getDefaultCellHeight();return{getTotalHeight:function(){return e.rowOffsets?$h(e.rowOffsets):n*t.getDisplayDataSet().length},getCellOffsetY:function(t){if(t<=0)return 0;if(e.rowOffsets)return e.rowOffsets[t];for(var r=0,o=0;o<t;o++)r+=n;return r},getTotalLength:function(){return t.getDisplayDataSet().length},getIndexRange:function(t,r){if(e.rowOffsets)return TS(e.rowOffsets,t,r);var o=Math.floor(t/n),i=r%n==0?r/n-1:Math.floor(r/n);return{start:Math.max(0,o),end:Math.max(0,i)}}}},t.prototype.init=function(){e.prototype.init.call(this);var t=this.panelBBox,n=t.width,r=t.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:r}})},t.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,t=e.x,n=e.width,r=e.viewportHeight,o=e.viewportWidth;return new JS({width:n,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:r,cornerWidth:this.cornerBBox.width,position:{x:t,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.updateRowResizeArea=function(){var e=this.spreadsheet,t=e.foregroundGroup,n=ic(e.options,"interaction.resize");if(Ip(n)?n:null==n?void 0:n.rowCellVertical){var r=t.findById(vi),o=t.findById(gi);r&&r.set("children",[]),o&&o.set("children",[]),NS(this.panelGroup.getChildren(),sx).filter((function(e){return e.shouldDrawResizeArea()})).forEach((function(e){e.drawResizeArea()}))}},t.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),e.prototype.render.call(this),this.initFrozenGroupPosition()},t.prototype.calculateFrozenGroupInfo=function(){var e=this.getFrozenOptions(),t=e.frozenColCount,n=e.frozenRowCount,r=e.frozenTrailingColCount,o=e.frozenTrailingRowCount,i=this.layoutResult.colLeafNodes,a=this.viewCellHeights,l=this.getCellRange(),s=this.frozenGroupInfo,c=s.frozenCol,u=s.frozenTrailingCol,d=s.frozenRow,h=s.frozenTrailingRow;t>0&&(c.width=i[t-1].x+i[t-1].width-0,c.range=[0,t-1]),n>0&&(d.height=a.getCellOffsetY(l.start+n)-a.getCellOffsetY(l.start),d.range=[l.start,l.start+n-1]),r>0&&(u.width=i[i.length-1].x-i[i.length-r].x+i[i.length-1].width,u.range=[i.length-r,i.length-1]),o>0&&(h.height=a.getCellOffsetY(l.end+1)-a.getCellOffsetY(l.end+1-o),h.range=[l.end-o+1,l.end])},t.prototype.getRowHeader=function(){return null},t.prototype.getSeriesNumberHeader=function(){return null},t.prototype.translateRelatedGroups=function(t,n,r){var o=this,i=this.spreadsheet,a=i.frozenColGroup,l=i.frozenTrailingColGroup;[i.frozenRowGroup,i.frozenTrailingRowGroup].forEach((function(e){ox(e,o.cornerBBox.width-t)})),[a,l].forEach((function(e){!function(e,t){var n,r=null==e?void 0:e.getMatrix(),o=null!==(n=null==r?void 0:r[7])&&void 0!==n?n:0;null==e||e.translate(0,t-o)}(e,o.cornerBBox.height-n)})),e.prototype.translateRelatedGroups.call(this,t,n,r),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(t,n)},t.prototype.calculateXYIndexes=function(e,t){var n=this.layoutResult.colLeafNodes.length,r=this.getCellRange(),o=this.panelBBox,i=o.viewportHeight,a=o.viewportWidth,l=this.getFrozenOptions(),s=l.frozenColCount,c=l.frozenRowCount,u=l.frozenTrailingColCount,d=l.frozenTrailingRowCount,h={width:a,height:i,x:0,y:0};if(u>0||s>0){var f=this.frozenGroupInfo,p=f.frozenTrailingCol,v=f.frozenCol;h.width-=p.width+v.width,h.x+=v.width}if(d>0||c>0){var g=this.frozenGroupInfo,m=g.frozenRow,y=g.frozenTrailingRow;h.height<m.height+y.height?(h.height=0,h.y=0):(h.height-=m.height+y.height,h.y+=m.height)}var b=nx(e,t,this.viewCellWidths,this.viewCellHeights,h,this.getRealScrollX(this.cornerBBox.width));return this.panelScrollGroupIndexes=b,function(e,t,n,r){var o=t.frozenColCount,i=t.frozenRowCount,a=t.frozenTrailingColCount,l=t.frozenTrailingRowCount,s=nb([],tb(e),!1);Qw(s[0],o)&&(s[0]=o),Jw(s[1],a,n)&&(s[1]=n-a-1),ex(s[2],r.start,i)&&(s[2]=r.start+i),tx(s[3],r.end,l)&&(s[3]=r.end-l);var c=nb([],tb(s),!1);c[2]=r.start,c[3]=r.start+i-1;var u=nb([],tb(s),!1);u[0]=0,u[1]=o-1;var d=nb([],tb(s),!1);d[2]=r.end+1-l,d[3]=r.end;var h=nb([],tb(s),!1);return h[0]=n-a,h[1]=n-1,{center:s,frozenRow:c,frozenCol:u,frozenTrailingCol:h,frozenTrailingRow:d}}(b,{frozenColCount:s,frozenRowCount:c,frozenTrailingColCount:u,frozenTrailingRowCount:d},n,r)},t.prototype.clip=function(e,t){var n,r,o=this.layoutResult.colLeafNodes,i=this.getPaginationScrollY(),a=this.spreadsheet,l=a.frozenRowGroup,s=a.frozenColGroup,c=a.frozenTrailingColGroup,u=a.frozenTrailingRowGroup,d=a.panelScrollGroup,h=s.getBBox().width,f=l.getBBox().height,p=c.getBBox(),v=u.getBBox().height,g=this.panelBBox.width-h-c.getBBox().width,m=this.panelBBox.height-f-v;d.setClip({type:"rect",attrs:{x:e+h,y:t+f,width:g,height:m}}),l.setClip({type:"rect",attrs:{x:e+h,y:i,width:g,height:f}}),u.setClip({type:"rect",attrs:{x:e+h,y:u.getBBox().minY,width:g,height:v}});var y={y:t+f,height:m};s.setClip({type:"rect",attrs:Qy(Qy({},y),{x:0,width:h})}),c.setClip({type:"rect",attrs:Qy(Qy({},y),{x:p.minX,width:p.width})});var b=this.spreadsheet.foregroundGroup.findById(vi);b&&b.setClip({type:"rect",attrs:{x:0,y:f+this.cornerBBox.height,width:null!==(r=null===(n=null==o?void 0:o[0])||void 0===n?void 0:n.width)&&void 0!==r?r:0,height:m}})},t.prototype.updatePanelScrollGroup=function(){var t=this;e.prototype.updatePanelScrollGroup.call(this),[Ai.FROZEN_COL,Ai.FROZEN_ROW,Ai.FROZEN_TRAILING_COL,Ai.FROZEN_TRAILING_ROW].forEach((function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var o=tb(t.frozenGroupInfo[e].range,2),i=o[0],a=o[1];if(n=t.gridInfo.cols,r=DS(i,a,t.viewCellHeights),e===Ai.FROZEN_TRAILING_ROW){var l=t.spreadsheet.frozenTrailingRowGroup.getBBox().minY;r=function(e,t,n,r){var o=DS(e,t,r),i=r.getCellOffsetY(e);return o.map((function(e){return e-i+n}))}(i,a,Math.ceil(l),t.viewCellHeights)}}else{var s=tb(t.frozenGroupInfo[e].range,2),c=s[0],u=s[1];n=RS(c,u,t.layoutResult.colLeafNodes),r=t.gridInfo.rows}t.spreadsheet["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}}))},t}(YS),tL=function(e){function t(t){var n=e.call(this,t)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(e,t){void 0===t&&(t=xi);var r=n.getBBox(),o=n.s2,i=o.theme,a=o.isTableMode,l=i.dataCell.cell,s=a()&&(t===xi||t===ui);n.gridGroup&&n.findById(t)||(n.gridGroup=n.addGroup({id:t})),n.gridGroup.clear(),n.gridInfo=e,s&&n.gridInfo.cols.unshift(0);var c=l.verticalBorderWidth,u=l.verticalBorderWidth/2;n.gridInfo.cols.forEach((function(e){iC(n.gridGroup,{x1:e,x2:e,y1:Math.ceil(r.minY+u),y2:Math.floor(r.maxY-u)},{stroke:l.verticalBorderColor,strokeOpacity:l.verticalBorderColorOpacity,lineWidth:c,lineCap:Mi})}));var d=l.horizontalBorderWidth,h=l.horizontalBorderWidth/2;n.gridInfo.rows.forEach((function(e){iC(n.gridGroup,{x1:Math.ceil(r.minX+h),x2:Math.floor(r.maxX-h),y1:e,y2:e},{stroke:l.horizontalBorderColor,strokeOpacity:l.horizontalBorderColorOpacity,lineWidth:d,lineCap:Mi})})),n.gridGroup.toFront()},n.s2=t.s2,n}return Zy(t,e),t}(yo),nL=function(e){function t(t){var n=e.call(this,t)||this;return n.initMergedCellsGroup(),n}return Zy(t,e),t.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(si)||(this.mergedCellsGroup=this.addGroup({id:si}))},t.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),function(e,t){var n,r=null===(n=e.options)||void 0===n?void 0:n.mergedCellsInfo;if(!Mp(r)){var o=e.interaction.getPanelGroupAllDataCells();if(!Mp(o)){var i=[];r.forEach((function(t){var n=dw(o,e,t);n.cells.length>0&&i.push(n)}));var a=t.getChildren(),l=function(e){return kf(e,(function(e){return{cells:e.cells,viewMeta:e.getMeta()}}))}(a),s=hw(l,i),c=hw(i,l);tf(s,(function(e){var t=If(a,(function(t){return Np(t.getMeta().id,e.viewMeta.id)}));null==t||t.remove(!0)})),tf(c,(function(n){var r=n.cells,o=n.viewMeta;t.add(new sw(e,r,o))}))}}}(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},t.prototype.addMergeCell=function(e){var t;null===(t=this.mergedCellsGroup)||void 0===t||t.add(e)},t.prototype.update=function(e){this.updateGrid(e),this.updateMergedCells()},t}(tL),rL=function(){function e(e){var t=this;this.isLinkFieldText=function(e){var n=t.getCellAppendInfo(e);return null==n?void 0:n.isLinkFieldText},this.spreadsheet=e,this.bindEvents()}return e.prototype.getCellAppendInfo=function(e){var t,n;return(null===(t=null==e?void 0:e.attr)||void 0===t?void 0:t.call(e,"appendInfo"))||(null===(n=null==e?void 0:e.attrs)||void 0===n?void 0:n.appendInfo)||{}},e.prototype.reset=function(){},e}(),oL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(ei.DATA_CELL_CLICK,(function(t){var n;t.stopPropagation();var r=e.spreadsheet,o=r.interaction,i=r.options;if(o.clearHoverTimer(),!o.hasIntercepts([Py.CLICK]))if(e.isLinkFieldText(t.target))e.emitLinkFieldClickEvent(t);else{var a=e.spreadsheet.getCell(t.target),l=a.getMeta();l&&(o.addIntercepts([Py.HOVER]),o.isSelectedCell(a)?1===(null===(n=t.originalEvent)||void 0===n?void 0:n.detail)&&o.reset():(o.changeState({cells:[dx(a)],stateName:cy.SELECTED}),e.spreadsheet.emit(ei.GLOBAL_SELECTED,[a]),e.showTooltip(t,l),i.interaction.selectedCellHighlight&&fx(l)))}}))},t.prototype.getTooltipOperator=function(e,t){var n=this,r={key:"trend",text:gb("趋势"),icon:"Trend"},o=this.spreadsheet.getCell(e.target),i=CS(this.spreadsheet,e).operation,a=i.trend&&Qy(Qy({},r),{onClick:function(){n.spreadsheet.emit(ei.DATA_CELL_TREND_ICON_CLICK,Qy(Qy({},t),{record:n.spreadsheet.isTableMode()?n.spreadsheet.dataSet.getCellData({query:{rowIndex:t.rowIndex}}):void 0})),n.spreadsheet.hideTooltip()}});return wS(i,{defaultMenus:[a],cell:o})},t.prototype.showTooltip=function(e,t){var n=t.data,r=t.isTotals,o=void 0!==r&&r,i=t.value,a=t.fieldValue,l=t.field,s=t.valueField,c=n,u=this.spreadsheet.isTableMode(),d=[(u?Qy(Qy({},c),{value:i||a,valueField:l||s}):c)||Qy(Qy({},t.rowQuery),t.colQuery)],h=this.getTooltipOperator(e,t);this.spreadsheet.showTooltipWithInfo(e,d,{isTotals:o,operator:h,enterable:!0,hideSummary:!0,showSingleTips:u})},t.prototype.emitLinkFieldClickEvent=function(e){var t=this.getCellAppendInfo(e.target).cellData,n=t.valueField,r=t.data;this.spreadsheet.emit(ei.GLOBAL_LINK_FIELD_JUMP,{key:n,record:Object.assign({rowIndex:t.rowIndex},r)})},t}(rL),iL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(ei.MERGED_CELLS_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.interaction;n.hasIntercepts([Py.CLICK])||n.addIntercepts([Py.HOVER])}))},t}(rL),aL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t.handleRowColClick=function(e){if(e.stopPropagation(),!t.isLinkFieldText(e.target)){var n=t.spreadsheet,r=n.interaction,o=n.options,i=t.spreadsheet.getCell(e.target),a=!(!o.interaction.multiSelection||!t.isMultiSelection);r.selectHeaderCell({cell:i,isMultiSelection:a})&&t.showTooltip(e)}},t.getHideColumnField=function(e){return t.spreadsheet.isTableMode()?e.field:e.id},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand()},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_DOWN,(function(t){ux(t)&&(e.isMultiSelection=!0)}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_UP,(function(t){ux(t)&&(e.isMultiSelection=!1,e.spreadsheet.interaction.removeIntercepts([Py.CLICK]))}))},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(ei.ROW_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(ei.COL_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},t.prototype.showTooltip=function(e){var t=CS(this.spreadsheet,e),n=t.operation;if(t.showTooltip){var r=this.spreadsheet.interaction,o=r.isSelectedState()?kf(r.getActiveCells(),(function(e){var t=e.getMeta();return _s({},t.query||{},sg(t,["colIndex","rowIndex"]))})):[],i=this.getTooltipOperator(e,n);this.spreadsheet.showTooltipWithInfo(e,o,{showSingleTips:!0,operator:i})}},t.prototype.getTooltipOperator=function(e,t){var n=this,r=this.spreadsheet.getCell(e.target),o=r.getMeta(),i=r.cellType===uy.COL_CELL,a=1===this.spreadsheet.getColumnLeafNodes().length,l={key:"hiddenColumns",text:gb("隐藏"),icon:"EyeOutlined"},s=i&&!a&&o.isLeaf&&t.hiddenColumns&&Qy(Qy({},l),{onClick:function(){n.hideSelectedColumns()}});return wS(t,{defaultMenus:[s],cell:r})},t.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(ei.LAYOUT_COLS_EXPANDED,(function(t){e.handleExpandIconClick(t)}))},t.prototype.hideSelectedColumns=function(){var e=this.spreadsheet.interaction.getActiveCells().map((function(e){return e.getMeta()})).map(this.getHideColumnField);gw(this.spreadsheet,e,!0)},t.prototype.handleExpandIconClick=function(e){var t=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=(t.find((function(t){var n=t.displaySiblingNode;return mw(n,e.id)}))||{}).hideColumnNodes,r=void 0===n?[]:n,o=this.spreadsheet.options.interaction.hiddenColumnFields,i=r.map(this.getHideColumnField),a=Yh(o,i),l=t.filter((function(t){var n=t.displaySiblingNode;return!mw(n,e.id)}));this.spreadsheet.setOptions({interaction:{hiddenColumnFields:a}}),this.spreadsheet.store.set("hiddenColumnsDetail",l),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},t}(rL),lL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRowData=function(e){var n,r=e.getHeadLeafChild(),o=t.spreadsheet.dataSet.getMultiData(null==r?void 0:r.query,null==r?void 0:r.isTotals,!0)[0];return Qy(Qy({},o),{rowIndex:null!==(n=e.rowIndex)&&void 0!==n?n:r.rowIndex})},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindRowCellClick()},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(ei.ROW_CELL_CLICK,(function(t){if(!e.spreadsheet.interaction.hasIntercepts([Py.CLICK])&&e.isLinkFieldText(t.target)){var n=e.getCellAppendInfo(t.target).cellData,r=n.key,o=e.getRowData(n);e.spreadsheet.emit(ei.GLOBAL_LINK_FIELD_JUMP,{key:r,record:o})}}))},t}(rL),sL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.bindEvents=function(){this.bindCornerCellClick()},t.prototype.bindCornerCellClick=function(){var e=this;this.spreadsheet.on(ei.CORNER_CELL_CLICK,(function(){var t=e.spreadsheet,n=t.interaction,r=t.tooltip;n.reset(),n.addIntercepts([Py.HOVER]),setTimeout((function(){r.visible||n.removeIntercepts([Py.HOVER])}))}))},t}(rL),cL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},t.prototype.updateRowColCells=function(e){var t=e.rowId,n=e.colId,r=this.spreadsheet.interaction;nw(n,r.getAllColHeaderCells(),cy.HOVER),t&&tf(tw(t,r.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType()),(function(e){e.updateByState(cy.HOVER)}))},t.prototype.changeStateToHoverFocus=function(e,t,n){var r,o=this,i=this.spreadsheet.interaction,a=this.spreadsheet.options.interaction,l=a.hoverFocus;i.clearHoverTimer();var s=function(){if(!i.hasIntercepts([Py.HOVER])){i.changeState({cells:[dx(e)],stateName:cy.HOVER_FOCUS});var r=o.spreadsheet.isTableMode(),l={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:r};a.hoverHighlight&&o.updateRowColCells(n);var s=o.getCellData(n,r);o.spreadsheet.showTooltipWithInfo(t,s,l)}},c=800;if(Ip(l)||(c=null!==(r=null==l?void 0:l.duration)&&void 0!==r?r:800),0===c)s();else{var u=window.setTimeout((function(){return s()}),c);i.setHoverTimer(u)}},t.prototype.handleHeaderHover=function(e){var t=this.spreadsheet.getCell(e.target);if(!Mp(t)){var n=this.spreadsheet.interaction;n.clearHoverTimer(),n.isActiveCell(t)||(n.changeState({cells:[dx(t)],stateName:cy.HOVER}),t.update(),this.showEllipsisTooltip(e,t))}},t.prototype.showEllipsisTooltip=function(e,t){if(t&&t.getActualText()!==t.getFieldValue()){var n=t.getMeta(),r={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:!0,enableFormat:this.spreadsheet.isPivotMode()},o=this.getCellData(n,!0);this.spreadsheet.showTooltipWithInfo(e,o,r)}},t.prototype.getCellData=function(e,t){void 0===e&&(e={});var n=e.data,r=e.query,o=e.value,i=e.field,a=e.fieldValue,l=e.valueField,s=e.rowQuery,c=e.colQuery,u=n;return t?[Qy(Qy({},r),{value:o||a,valueField:i||l})]:[u||Qy(Qy({},s),c)]},t.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(ei.DATA_CELL_HOVER,(function(t){var n=e.spreadsheet.getCell(t.target);if(!Mp(n)){var r=e.spreadsheet,o=r.interaction,i=r.options.interaction,a=null==n?void 0:n.getMeta();o.isActiveCell(n)||(o.changeState({cells:[dx(n)],stateName:cy.HOVER}),i.hoverHighlight&&e.updateRowColCells(a),i.hoverFocus&&e.changeStateToHoverFocus(n,t,a))}}))},t.prototype.bindRowCellHover=function(){var e=this;this.spreadsheet.on(ei.ROW_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},t.prototype.bindColCellHover=function(){var e=this;this.spreadsheet.on(ei.COL_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},t.prototype.bindCornerCellHover=function(){var e=this;this.spreadsheet.on(ei.CORNER_CELL_HOVER,(function(t){var n=e.spreadsheet.getCell(t.target);e.showEllipsisTooltip(t,n)}))},t}(rL),uL=function(){function e(e){var t=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(e){return e instanceof Lo&&e.attrs.type===Vb.type},this.onCanvasMousedown=function(e){if(t.target=e.target,t.spreadsheet.interaction.clearHoverTimer(),t.isResizeArea(e)){t.spreadsheet.emit(ei.LAYOUT_RESIZE_MOUSE_DOWN,e);var n=function(n){if(!t.spreadsheet.getCanvasElement())return!1;t.spreadsheet.getCanvasElement()!==n.target&&(e.clientX=n.clientX,e.clientY=n.clientY,e.originalEvent=n,t.spreadsheet.emit(ei.LAYOUT_RESIZE_MOUSE_MOVE,e))};return window.addEventListener("mousemove",n),void window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",n)}),{once:!0})}switch(t.spreadsheet.getCellType(e.target)){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_MOUSE_DOWN,e);break;case uy.ROW_CELL:t.spreadsheet.emit(ei.ROW_CELL_MOUSE_DOWN,e);break;case uy.COL_CELL:t.spreadsheet.emit(ei.COL_CELL_MOUSE_DOWN,e);break;case uy.CORNER_CELL:t.spreadsheet.emit(ei.CORNER_CELL_MOUSE_DOWN,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_MOUSE_DOWN,e)}},this.onCanvasMousemove=function(e){if(t.isResizeArea(e))return t.activeResizeArea(e),void t.spreadsheet.emit(ei.LAYOUT_RESIZE_MOUSE_MOVE,e);t.resetResizeArea();var n=t.spreadsheet.getCell(e.target);if(n){var r=n.cellType;switch(r){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_MOUSE_MOVE,e);break;case uy.ROW_CELL:t.spreadsheet.emit(ei.ROW_CELL_MOUSE_MOVE,e);break;case uy.COL_CELL:t.spreadsheet.emit(ei.COL_CELL_MOUSE_MOVE,e);break;case uy.CORNER_CELL:t.spreadsheet.emit(ei.CORNER_CELL_MOUSE_MOVE,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_MOUSE_MOVE,e)}if(!t.hasBrushSelectionIntercepts())switch(t.spreadsheet.emit(ei.GLOBAL_HOVER,e),r){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_HOVER,e);break;case uy.ROW_CELL:t.spreadsheet.emit(ei.ROW_CELL_HOVER,e);break;case uy.COL_CELL:t.spreadsheet.emit(ei.COL_CELL_HOVER,e);break;case uy.CORNER_CELL:t.spreadsheet.emit(ei.CORNER_CELL_HOVER,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_HOVER,e)}}},this.onCanvasMouseup=function(e){if(t.isResizeArea(e))t.spreadsheet.emit(ei.LAYOUT_RESIZE_MOUSE_UP,e);else{var n=t.spreadsheet.getCell(e.target);if(n){var r=n.cellType;if(t.target===e.target){var o=t.isGuiIconShape(e.target);switch(r){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_CLICK,e);break;case uy.ROW_CELL:if(o)break;t.spreadsheet.emit(ei.ROW_CELL_CLICK,e);break;case uy.COL_CELL:if(o)break;t.spreadsheet.emit(ei.COL_CELL_CLICK,e);break;case uy.CORNER_CELL:if(o)break;t.spreadsheet.emit(ei.CORNER_CELL_CLICK,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_CLICK,e)}}switch(r){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_MOUSE_UP,e);break;case uy.ROW_CELL:t.spreadsheet.emit(ei.ROW_CELL_MOUSE_UP,e);break;case uy.COL_CELL:t.spreadsheet.emit(ei.COL_CELL_MOUSE_UP,e);break;case uy.CORNER_CELL:t.spreadsheet.emit(ei.CORNER_CELL_MOUSE_UP,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_MOUSE_UP,e)}}}},this.onCanvasClick=function(e){t.spreadsheet.emit(ei.GLOBAL_CLICK,e)},this.onCanvasDoubleClick=function(e){var n=t.spreadsheet;if(t.isResizeArea(e))n.emit(ei.LAYOUT_RESIZE_MOUSE_UP,e);else{n.emit(ei.GLOBAL_DOUBLE_CLICK,e);var r=n.getCell(e.target);if(r){var o=r.cellType;if(t.target===e.target)switch(o){case uy.DATA_CELL:n.emit(ei.DATA_CELL_DOUBLE_CLICK,e);break;case uy.ROW_CELL:n.emit(ei.ROW_CELL_DOUBLE_CLICK,e);break;case uy.COL_CELL:n.emit(ei.COL_CELL_DOUBLE_CLICK,e);break;case uy.CORNER_CELL:n.emit(ei.CORNER_CELL_DOUBLE_CLICK,e);break;case uy.MERGED_CELL:n.emit(ei.MERGED_CELLS_DOUBLE_CLICK,e)}}}},this.onCanvasMouseout=function(e){if(t.isAutoResetSheetStyle&&!(null==e?void 0:e.shape)){var n=t.spreadsheet.interaction;n.isSelectedState()||n.intercepts.size>0||n.reset()}},this.onCanvasContextMenu=function(e){var n=t.spreadsheet;if(t.isResizeArea(e))n.emit(ei.LAYOUT_RESIZE_MOUSE_UP,e);else switch(n.emit(ei.GLOBAL_CONTEXT_MENU,e),t.spreadsheet.getCellType(e.target)){case uy.DATA_CELL:t.spreadsheet.emit(ei.DATA_CELL_CONTEXT_MENU,e);break;case uy.ROW_CELL:t.spreadsheet.emit(ei.ROW_CELL_CONTEXT_MENU,e);break;case uy.COL_CELL:t.spreadsheet.emit(ei.COL_CELL_CONTEXT_MENU,e);break;case uy.CORNER_CELL:t.spreadsheet.emit(ei.CORNER_CELL_CONTEXT_MENU,e);break;case uy.MERGED_CELL:t.spreadsheet.emit(ei.MERGED_CELLS_CONTEXT_MENU,e)}},this.spreadsheet=e,this.bindEvents()}return Object.defineProperty(e.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),e.prototype.bindEvents=function(){var e=this;this.clearAllEvents(),this.addCanvasEvent(Jo.CLICK,this.onCanvasClick),this.addCanvasEvent(Jo.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(Jo.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(Jo.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(Jo.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(Jo.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(Jo.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(ei.GLOBAL_ACTION_ICON_CLICK,(function(){e.spreadsheet.interaction.addIntercepts([Py.HOVER]),e.spreadsheet.interaction.clearState()})),this.addDomEventListener(window,Jo.CLICK,(function(t){e.resetSheetStyle(t),e.isCanvasEffect=e.isMouseOnTheCanvasContainer(t)})),this.addDomEventListener(window,Jo.KEY_DOWN,(function(t){e.onKeyboardCopy(t),e.onKeyboardEsc(t),e.spreadsheet.emit(ei.GLOBAL_KEYBOARD_DOWN,t)})),this.addDomEventListener(window,Jo.KEY_UP,(function(t){e.spreadsheet.emit(ei.GLOBAL_KEYBOARD_UP,t)})),this.addDomEventListener(window,Jo.MOUSE_UP,(function(t){e.spreadsheet.emit(ei.GLOBAL_MOUSE_UP,t)})),this.addDomEventListener(window,Jo.MOUSE_MOVE,(function(t){e.spreadsheet.emit(ei.GLOBAL_MOUSE_MOVE,t)}))},e.prototype.onKeyboardCopy=function(e){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&TC(e.key,ky.COPY)&&(e.metaKey||e.ctrlKey)){var t=function(e){var t,n,r,o,i=e.interaction,a=i.getState().cells||[],l=null!==(t=i.getInteractedCells())&&void 0!==t?t:[];return(n=!Mp(l)&&Cf(l,(function(e){return e.cellType===uy.ROW_CELL||e.cellType===uy.COL_CELL}))?function(e){var t,n=function(e){var t=new Set;return tf(e,(function(e){var n=e.getMeta().level;t.has(n)||t.add(n)})),t}(e),r=null!==(t=tv(Array.from(n)))&&void 0!==t?t:0,o=function(e,t){return Ef(e,(function(e){var n=e.getMeta(),r=n.level===t,o=n.isTotals&&Mp(n.children);return r||o}))}(e,r),i=e[0].cellType===uy.COL_CELL,a=function(e,t,n){return kf(e,(function(e){var r=e.getMeta(),o=r.id,i=r.label,a=r.isTotals,l=r.level,s=o;return a&&l!==t&&(s=o+Li+Dg(i,t-l)),kC(s,n.size)}))}(o,r,n);return i&&(a=iy.apply(void 0,nb([],tb(a),!1))),[BC(a),PC(a)]}(l):HC(e,a))&&VC(n),r=n,void 0===(o=AC.PLAIN)&&(o=AC.PLAIN),Array.isArray(o)?[].concat(r).filter((function(e){return o.includes(e.type)})).map((function(e){return e.content})):[].concat(r).filter((function(e){return(null==e?void 0:e.type)===o})).map((function(e){return e.content}))[0]||""}(this.spreadsheet);Fp(t)||this.spreadsheet.emit(ei.GLOBAL_COPIED,t)}},e.prototype.onKeyboardEsc=function(e){this.isCanvasEffect&&TC(e.key,ky.ESC)&&this.resetSheetStyle(e)},e.prototype.resetSheetStyle=function(e){if(this.isAutoResetSheetStyle&&this.spreadsheet){var t=this.spreadsheet.interaction;t.hasIntercepts([Py.BRUSH_SELECTION,Py.COL_BRUSH_SELECTION,Py.ROW_BRUSH_SELECTION])?t.removeIntercepts([Py.BRUSH_SELECTION,Py.ROW_BRUSH_SELECTION,Py.COL_BRUSH_SELECTION]):this.isMouseOnTheTooltip(e)||this.isMouseOnTheCanvasContainer(e)||(this.spreadsheet.emit(ei.GLOBAL_RESET,e),t.reset())}},e.prototype.isMouseOnTheCanvasContainer=function(e){if(e instanceof MouseEvent){var t=this.spreadsheet.getCanvasElement();if(!t)return!1;var n=t.getBoundingClientRect()||{},r=n.x,o=n.y,i=this.getContainerRect(),a=i.width,l=i.height;return t.contains(e.target)&&e.clientX<=r+a&&e.clientY<=o+l}return!1},e.prototype.getContainerRect=function(){var e,t=(null===(e=this.spreadsheet.facet)||void 0===e?void 0:e.panelBBox)||{},n=t.maxX,r=t.maxY,o=this.spreadsheet.options,i=o.width,a=o.height;return{width:Math.min(i,n),height:Math.min(a,r)}},e.prototype.isMouseOnTheTooltip=function(e){var t,n,r,o;if(!CS(this.spreadsheet,e).showTooltip)return!1;var i=(null===(r=null===(n=null===(t=this.spreadsheet.tooltip)||void 0===t?void 0:t.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},a=i.x,l=i.y,s=i.width,c=i.height;return e.target instanceof Node&&this.spreadsheet.tooltip.visible?function(e,t){for(var n=!1,r=t;r&&r!==document.body;){if(e===r){n=!0;break}r=r.parentElement}return n}(null===(o=this.spreadsheet.tooltip)||void 0===o?void 0:o.container,e.target):e instanceof MouseEvent&&e.clientX>=a&&e.clientX<=a+s&&e.clientY>=l&&e.clientY<=l+c},e.prototype.isResizeArea=function(e){var t=ic(e.target,"attrs.appendInfo");return null==t?void 0:t.isResizeArea},e.prototype.activeResizeArea=function(e){this.resetResizeArea();var t=e.target;this.spreadsheet.store.set("activeResizeArea",t),t.attr(Fy.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},e.prototype.resetResizeArea=function(){var e=this.spreadsheet.store.get("activeResizeArea");Mp(e)||e.attr(Fy.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",e)},e.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Py.HOVER,Py.BRUSH_SELECTION,Py.ROW_BRUSH_SELECTION,Py.COL_BRUSH_SELECTION])},e.prototype.clear=function(){this.unbindEvents()},e.prototype.unbindEvents=function(){this.clearAllEvents()},e.prototype.addCanvasEvent=function(e,t){var n;null===(n=this.canvasContainer)||void 0===n||n.on(e,t),this.canvasEventHandlers.push({type:e,handler:t})},e.prototype.addS2Event=function(e,t){this.spreadsheet.on(e,t),this.s2EventHandlers.push({type:e,handler:t})},e.prototype.addDomEventListener=function(e,t,n){if(e.addEventListener){var r=this.spreadsheet.options.interaction.eventListenerOptions;e.addEventListener(t,n,r),this.domEventListeners.push({target:e,type:t,handler:n,options:r})}else console.error("Please make sure ".concat(e," has addEventListener function"))},e.prototype.clearAllEvents=function(){var e=this;tf(this.canvasEventHandlers,(function(t){var n,r=t.type,o=t.handler;null===(n=e.canvasContainer)||void 0===n||n.off(r,o)})),tf(this.s2EventHandlers,(function(t){var n=t.type,r=t.handler;e.spreadsheet.off(n,r)})),tf(this.domEventListeners,(function(e){e.target.removeEventListener(e.type,e.handler,e.options)})),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},e}(),dL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRangeSelection=!1,t.handleColClick=function(e){e.stopPropagation();var n=t.spreadsheet.interaction,r=t.spreadsheet.getCell(e.target),o=null==r?void 0:r.getMeta();if(!Fp(null==o?void 0:o.x)){n.addIntercepts([Py.HOVER]);var i=[dx(r)],a=t.spreadsheet.store.get("lastClickedCell");if(t.isRangeSelection&&a&&a.cellType===r.cellType&&a.getMeta().level===r.getMeta().level){var l=tb([t.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,t.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),s=l[0],c=l[1],u=hx(a.getMeta(),r.getMeta()),d=u.start,h=u.end;r instanceof lw?i=t.handleSeriesNumberRowSelected(d.rowIndex,h.rowIndex,r):r.cellType===uy.ROW_CELL&&r.getMeta().level===s?i=t.handleRowSelected(d.rowIndex,h.rowIndex,r):r.cellType===uy.COL_CELL&&r.getMeta().level===c&&(i=t.handleColSelected(d.colIndex,h.colIndex,r)),n.changeState({cells:i,stateName:cy.SELECTED})}else t.spreadsheet.store.set("lastClickedCell",r);var f=i.map((function(e){return e.id}));n.updateCells(n.getRowColActiveCells(f)),t.spreadsheet.emit(ei.GLOBAL_SELECTED,n.getActiveCells())}},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp()},t.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Py.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_DOWN,(function(t){t.key===ky.SHIFT&&(e.isRangeSelection=!0,e.spreadsheet.interaction.addIntercepts([Py.CLICK]))}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_UP,(function(t){t.key===ky.SHIFT&&e.reset()}))},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(ei.ROW_CELL_CLICK,(function(t){e.handleColClick(t)})),this.spreadsheet.on(ei.COL_CELL_CLICK,(function(t){e.handleColClick(t)}))},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(ei.DATA_CELL_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.getCell(t.target),r=n.getMeta(),o=e.spreadsheet.interaction;if(r){var i=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&(null==i?void 0:i.cellType)===n.cellType){var a=hx(i.getMeta(),n.getMeta()),l=a.start,s=a.end,c=Ig(l.colIndex,s.colIndex+1).flatMap((function(t){var r=e.spreadsheet.facet.layoutResult.colLeafNodes[t].id;return Ig(l.rowIndex,s.rowIndex+1).map((function(o){return{id:(e.spreadsheet.facet.getSeriesNumberWidth()||e.spreadsheet.isTableMode()?String(o):e.spreadsheet.facet.layoutResult.rowLeafNodes[o].id)+"-"+r,colIndex:t,rowIndex:o,type:n.cellType}}))}));o.addIntercepts([Py.CLICK,Py.HOVER]),o.changeState({cells:c,stateName:cy.SELECTED}),e.spreadsheet.showTooltipWithInfo(t,bS(e.spreadsheet)),e.spreadsheet.emit(ei.GLOBAL_SELECTED,o.getActiveCells())}else e.spreadsheet.store.set("lastClickedCell",n)}}))},t.prototype.handleSeriesNumberRowSelected=function(e,t,n){var r=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return Ig(e,t+1).map((function(e){return{id:String(e)+"-"+r,colIndex:0,rowIndex:e,type:n.cellType}}))},t.prototype.handleRowSelected=function(e,t,n){return this.spreadsheet.facet.layoutResult.rowNodes.filter((function(n){return Jf(n.rowIndex,e,t+1)})).map((function(e){return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,type:n.cellType}}))},t.prototype.handleColSelected=function(e,t,n){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter((function(n){return Jf(n.colIndex,e,t+1)})).map((function(e){return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,type:n.cellType}}))},t}(rL),hL=[ky.ARROW_LEFT,ky.ARROW_RIGHT,ky.ARROW_UP,ky.ARROW_DOWN],fL=function(e){function t(t){return e.call(this,t)||this}return Zy(t,e),t.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},t.prototype.bindEvents=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_DOWN,(function(t){if(e.isCanvasEffect()){var n=t.shiftKey,r=t.metaKey,o=!1,i=!1,a=!1;hL.includes(t.key)&&(r&&n?(o=!1,i=!0,a=!1):r?(o=!0,i=!0,a=!0):n?(o=!1,i=!1,a=!1):(o=!0,i=!1,a=!0),e.handleMove({event:t,changeStartCell:o,isJumpMode:i,isSingleSelection:a}))}})),this.spreadsheet.on(ei.DATA_CELL_CLICK,(function(t){var n=e.spreadsheet.getCell(t.target).getMeta();n&&(e.startCell=e.getCellMetaFromViewMeta(n),e.endCell=e.startCell)}))},t.prototype.getCellMetaFromViewMeta=function(e){return{rowIndex:e.rowIndex,colIndex:e.colIndex,id:e.id,type:uy.DATA_CELL}},t.prototype.handleMove=function(e){var t=e.event,n=e.changeStartCell,r=e.isJumpMode,o=e.isSingleSelection,i=this,a=i.spreadsheet,l=i.startCell,s=i.endCell,c=n?l:s,u=this.getMoveInfo(t.key,c,r);if(u){var d=tb([u.row,u.col],2),h=d[0],f=d[1];this.scrollToActiveCell(a,h,f);var p=this.generateCellMeta(a,h,f),v=o?[p]:this.getRangeCells(a,l,p);!function(e,t){var n=e.interaction;n.changeState({stateName:cy.SELECTED,cells:t}),e.emit(ei.GLOBAL_SELECTED,n.getActiveCells())}(a,v),n&&(this.startCell=p),this.endCell=p,this.spreadsheet.emit(ei.DATA_CELL_SELECT_MOVE,v)}},t.prototype.generateCellMeta=function(e,t,n){var r=e.isTableMode,o=e.facet.layoutResult,i=o.colLeafNodes,a=o.rowLeafNodes,l=r()?String(t):a[t].id,s=i[n].id;return{rowIndex:t,colIndex:n,id:aw(l,s),type:uy.DATA_CELL}},t.prototype.getRangeCells=function(e,t,n){for(var r=hx(t,n),o=r.start,i=o.rowIndex,a=o.colIndex,l=r.end,s=l.rowIndex,c=l.colIndex,u=[],d=i;d<=s;d++)for(var h=a;h<=c;h++)u.push(this.generateCellMeta(e,d,h));return u},t.prototype.getMoveInfo=function(e,t,n){var r=this.spreadsheet,o=r.options,i=o.frozenColCount,a=void 0===i?0:i,l=o.frozenRowCount,s=void 0===l?0:l,c=o.frozenTrailingColCount,u=void 0===c?0:c,d=o.frozenTrailingRowCount,h=void 0===d?0:d,f=r.facet.layoutResult,p=f.rowLeafNodes,v=tb([0+a,f.colLeafNodes.length-u-1],2),g=v[0],m=v[1],y=tb([0+s,(r.isTableMode()?r.dataSet.getDisplayDataSet().length:p.length)-h-1],2),b=y[0],C=y[1];if(t)switch(e){case ky.ARROW_RIGHT:if(t.colIndex+1>m)return;return{row:t.rowIndex,col:n?m:t.colIndex+1};case ky.ARROW_LEFT:if(t.colIndex-1<g)return;return{row:t.rowIndex,col:n?g:t.colIndex-1};case ky.ARROW_UP:if(t.rowIndex-1<b)return;return{row:n?b:t.rowIndex-1,col:t.colIndex};case ky.ARROW_DOWN:if(t.rowIndex+1>C)return;return{row:n?C:t.rowIndex+1,col:t.colIndex}}},t.prototype.calculateOffset=function(e,t,n){var r=e.options,o=r.frozenRowCount,i=void 0===o?0:o,a=r.frozenTrailingRowCount,l=void 0===a?0:a,s=e.facet,c=e.frozenColGroup,u=e.frozenTrailingColGroup,d=e.frozenRowGroup,h=e.frozenTrailingRowGroup,f=s.layoutResult.colLeafNodes,p=s.getScrollOffset(),v=p.scrollX,g=p.scrollY,m=s.panelBBox,y=m.viewportHeight,b=m.viewportWidth,C=ic(e,"theme.splitLine"),w=c?Math.floor(c.getBBox().width-C.verticalBorderWidth/2):0,x=u?Math.floor(u.getBBox().width):0,E=d?Math.floor(d.getBBox().height-C.horizontalBorderWidth/2):0,S=h?Math.floor(h.getBBox().height):0,L=nx(v,g,s.viewCellWidths,s.viewCellHeights,{width:b-w-x,height:y-E-S,x:w,y:E},s.getRealScrollX(s.cornerBBox.width)),O=-1,I=-1,_=f.find((function(e){return e.colIndex===n}));return n<=L[0]?O=_.x-w:n>=L[1]&&n<f.length-l&&(O=_.x+_.width-b+x),t<=L[2]?I=s.viewCellHeights.getCellOffsetY(t-i):t>=L[3]&&(I=s.viewCellHeights.getCellOffsetY(t+1)+S-y),{offsetX:O,offsetY:I}},t.prototype.scrollToActiveCell=function(e,t,n){var r=this.calculateOffset(e,t,n),o=r.offsetX,i=r.offsetY,a=e.facet,l=e.facet.getScrollOffset(),s=l.scrollX,c=l.scrollY;a.scrollWithAnimation({offsetX:{value:o>-1?o:s},offsetY:{value:i>-1?i:c}})},t}(rL),pL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.brushSelectionStage=Dy.UN_DRAGGED,t.brushSelectionMinimumMoveDistance=5,t.scrollAnimationComplete=!0,t.mouseMoveDistanceFromCanvas=0,t.setMoveDistanceFromCanvas=function(e,n,r){var o=0;if(n&&(o=e.x),r){var i=e.y;o=n?Math.max(i,o):i}t.mouseMoveDistanceFromCanvas=o},t.formatBrushPointForScroll=function(e){var n,r,o,i,a=e.x,l=e.y,s=t.spreadsheet.facet,c=s.panelBBox,u=c.minX,d=c.minY,h=c.maxX,f=c.maxY,p=(null===(n=t.endBrushPoint)||void 0===n?void 0:n.x)+a,v=(null===(r=t.endBrushPoint)||void 0===r?void 0:r.y)+l,g=!0,m=!0,y=null===(i=null===(o=s.vScrollBar)||void 0===o?void 0:o.getBBox())||void 0===i?void 0:i.width;return p>h?p=h-y-2:p<u?p=u+2:g=!1,v>f?v=f-2:v<=d?v=d+2:m=!1,{x:{value:p,needScroll:g},y:{value:v,needScroll:m}}},t.autoScrollIntervalId=null,t.autoScrollConfig=Nd($y),t.validateYIndex=function(e){var n,r,o=t.spreadsheet.facet,i=o.frozenGroupInfo,a=0,l=null===(n=null==i?void 0:i.frozenRow)||void 0===n?void 0:n.range;if(l&&(a=l[1]+1),e<a)return null;var s=o.getCellRange().end,c=null===(r=null==i?void 0:i.frozenTrailingRow)||void 0===r?void 0:r.range;return c&&(s=c[0]-1),e>s?null:e},t.validateXIndex=function(e){var n,r,o=t.spreadsheet.facet,i=o.frozenGroupInfo,a=0,l=null===(n=null==i?void 0:i.frozenCol)||void 0===n?void 0:n.range;if(l&&(a=l[1]+1),e<a)return null;var s=o.layoutResult.colLeafNodes.length-1,c=null===(r=null==i?void 0:i.frozenTrailingCol)||void 0===r?void 0:r.range;return c&&(s=c[0]-1),e>s?null:e},t.adjustNextColIndexWithFrozen=function(e,n){var r=t.spreadsheet,o=r.facet,i=r.dataSet,a=r.options,l=i.getDisplayDataSet().length,s=o.layoutResult.colLeafNodes.length,c=tC(a,s,l),u=c.frozenTrailingColCount,d=c.frozenColCount,h=o.panelScrollGroupIndexes;return u>0&&n===Hy.TRAILING&&Jw(e,u,s)?h[1]:d>0&&n===Hy.LEADING&&Qw(e,d)?h[0]:e},t.adjustNextRowIndexWithFrozen=function(e,n){var r=t.spreadsheet,o=r.facet,i=r.dataSet,a=r.options,l=i.getDisplayDataSet().length,s=o.layoutResult.colLeafNodes.length,c=o.getCellRange(),u=tC(a,s,l),d=u.frozenTrailingRowCount,h=u.frozenRowCount,f=o.panelScrollGroupIndexes;return d>0&&n===Hy.TRAILING&&tx(e,c.end,d)?f[3]:h>0&&n===Hy.LEADING&&ex(e,c.start,h)?f[2]:e},t.getNextScrollDelta=function(e){var n=t.spreadsheet.facet.getScrollOffset(),r=n.scrollX,o=n.scrollY,i=0,a=0;if(e.y.scroll){var l=e.y.value>0?Hy.TRAILING:Hy.LEADING,s=t.adjustNextRowIndexWithFrozen(t.endBrushPoint.rowIndex,l);a=Fp(c=t.validateYIndex(s+(e.y.value>0?1:-1)))?0:yx(c,l,t.spreadsheet)-o}if(e.x.scroll){l=e.x.value>0?Hy.TRAILING:Hy.LEADING;var c,u=t.adjustNextColIndexWithFrozen(t.endBrushPoint.colIndex,l);i=Fp(c=t.validateXIndex(u+(e.x.value>0?1:-1)))?0:mx(c,l,t.spreadsheet)-r}return{x:i,y:a}},t.onScrollAnimationComplete=function(){t.scrollAnimationComplete=!0,t.brushSelectionStage!==Dy.UN_DRAGGED&&t.renderPrepareSelected(t.endBrushPoint)},t.autoScroll=function(){if(t.brushSelectionStage!==Dy.UN_DRAGGED&&t.scrollAnimationComplete){var e=t.autoScrollConfig,n=t.spreadsheet.facet.getScrollOffset(),r={offsetX:{value:n.scrollX,animate:!0},offsetY:{value:n.scrollY,animate:!0}},o=t.getNextScrollDelta(e),i=o.x,a=o.y;if(0!==a||0!==i){e.y.scroll&&(r.offsetY.value+=a),e.x.scroll&&(r.offsetX.value+=i,r.offsetX.value<0&&(r.offsetX.value=0)),t.scrollAnimationComplete=!1;var l=3;e.x.scroll&&(l=1),t.spreadsheet.facet.scrollWithAnimation(r,Math.max(16,300-t.mouseMoveDistanceFromCanvas*l),t.onScrollAnimationComplete)}else t.clearAutoScroll()}},t.handleScroll=xm((function(e,n){if(t.brushSelectionStage!==Dy.UN_DRAGGED){var r=t.formatBrushPointForScroll({x:e,y:n}),o=r.x,i=o.value,a=o.needScroll,l=r.y,s=l.value,c=l.needScroll,u=t.autoScrollConfig;c&&(u.y.value=n,u.y.scroll=!0),a&&(u.x.value=e,u.x.scroll=!0),t.setMoveDistanceFromCanvas({x:e,y:n},a,c),t.renderPrepareSelected({x:i,y:s}),(c||a)&&(t.clearAutoScroll(),t.autoScroll(),t.autoScrollIntervalId=setInterval(t.autoScroll,16))}}),30),t.clearAutoScroll=function(){t.autoScrollIntervalId&&(clearInterval(t.autoScrollIntervalId),t.autoScrollIntervalId=null,t.resetScrollDelta())},t.onUpdateCells=function(e,t){return t()},t.showPrepareSelectedCells=function(){t.brushRangeCells=t.getBrushRangeCells(),t.spreadsheet.interaction.changeState({cells:kf(t.brushRangeCells,(function(e){return dx(e)})),stateName:cy.PREPARE_SELECT,force:!0,onUpdateCells:t.onUpdateCells})},t.renderPrepareSelected=function(e){var n=e.x,r=e.y,o=t.spreadsheet.container.getShape(n,r),i=t.spreadsheet.getCell(o);if(i&&(i instanceof lw||i instanceof Zw||i instanceof zw)){var a=i.getMeta(),l=a.rowIndex,s=a.colIndex,c=a.x,u=a.y;t.endBrushPoint={x:n,y:r,rowIndex:l,colIndex:s,headerY:u,headerX:c};var d=t.spreadsheet.interaction;d.addIntercepts([Py.HOVER]),d.clearStyleIndependent(),t.isValidBrushSelection()&&(t.showPrepareSelectedCells(),t.updatePrepareSelectMask())}},t.getSelectedCellMetas=function(e){},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.getPrepareSelectMaskTheme=function(){var e;return null===(e=this.spreadsheet.theme)||void 0===e?void 0:e.prepareSelectMask},t.prototype.initPrepareSelectMaskShape=function(){var e=this.spreadsheet.foregroundGroup;if(e){e.removeChild(this.prepareSelectMaskShape);var t=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=e.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:null==t?void 0:t.backgroundColor,fillOpacity:null==t?void 0:t.backgroundOpacity,zIndex:5},capture:!1})}},t.prototype.setBrushSelectionStage=function(e){this.brushSelectionStage=e},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW(),n=t.height,r=t.width,o=this.spreadsheet.facet.panelBBox,i=o.minX,a=o.minY;return e.x>i&&e.x<r&&e.y>a&&e.y<n},t.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(Dy.UN_DRAGGED)},t.prototype.isValidBrushSelection=function(){var e=this.getBrushRange(),t=e.start,n=e.end;return n.x-t.x>this.brushSelectionMinimumMoveDistance||n.y-t.y>this.brushSelectionMinimumMoveDistance},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},t.prototype.updatePrepareSelectMask=function(){var e=this.getBrushRange();this.prepareSelectMaskShape.attr({x:e.start.x,y:e.start.y,width:e.width,height:e.height}),this.prepareSelectMaskShape.show()},t.prototype.hidePrepareSelectMaskShape=function(){var e;null===(e=this.prepareSelectMaskShape)||void 0===e||e.hide()},t.prototype.resetScrollDelta=function(){this.autoScrollConfig=Nd($y)},t.prototype.getBrushPoint=function(e){var t=this.spreadsheet.facet.getScrollOffset(),n=t.scrollY,r=t.scrollX,o={x:null==e?void 0:e.x,y:null==e?void 0:e.y},i=this.spreadsheet.getCell(e.target).getMeta(),a=i.colIndex,l=i.rowIndex;return Qy(Qy({},o),{rowIndex:l,colIndex:a,scrollY:n,scrollX:r})},t.prototype.getBrushRange=function(){var e,t,n,r,o,i,a,l,s,c,u,d,h,f,p,v,g=this.spreadsheet.facet.getScrollOffset(),m=g.scrollX,y=g.scrollY,b=Math.min(this.startBrushPoint.rowIndex,null===(e=this.endBrushPoint)||void 0===e?void 0:e.rowIndex),C=Math.max(this.startBrushPoint.rowIndex,null===(t=this.endBrushPoint)||void 0===t?void 0:t.rowIndex),w=Math.min(this.startBrushPoint.colIndex,null===(n=this.endBrushPoint)||void 0===n?void 0:n.colIndex),x=Math.max(this.startBrushPoint.colIndex,null===(r=this.endBrushPoint)||void 0===r?void 0:r.colIndex),E=this.startBrushPoint.x+this.startBrushPoint.scrollX-m,S=this.startBrushPoint.y+this.startBrushPoint.scrollY-y,L=Math.min(E,null===(o=this.endBrushPoint)||void 0===o?void 0:o.x),O=Math.max(E,null===(i=this.endBrushPoint)||void 0===i?void 0:i.x),I=Math.min(S,null===(a=this.endBrushPoint)||void 0===a?void 0:a.y),_=Math.max(S,null===(l=this.endBrushPoint)||void 0===l?void 0:l.y),T=Math.min(null===(s=this.startBrushPoint)||void 0===s?void 0:s.headerX,null===(c=this.endBrushPoint)||void 0===c?void 0:c.headerX),A=Math.max(null===(u=this.startBrushPoint)||void 0===u?void 0:u.headerX,null===(d=this.endBrushPoint)||void 0===d?void 0:d.headerX);return{start:{rowIndex:b,colIndex:w,x:L,y:I,headerX:T,headerY:Math.min(null===(h=this.startBrushPoint)||void 0===h?void 0:h.headerY,null===(f=this.endBrushPoint)||void 0===f?void 0:f.headerY)},end:{rowIndex:C,colIndex:x,x:O,y:_,headerX:A,headerY:Math.max(null===(p=this.startBrushPoint)||void 0===p?void 0:p.headerY,null===(v=this.endBrushPoint)||void 0===v?void 0:v.headerY)},width:O-L,height:_-I}},t.prototype.getBrushRangeCells=function(){var e=this;return this.setDisplayedCells(),this.displayedCells.filter((function(t){var n=t.getMeta();return e.isInBrushRange(n)}))},t.prototype.mouseDown=function(e){var t;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),this.spreadsheet.interaction.hasIntercepts([Py.CLICK])||(this.setBrushSelectionStage(Dy.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(e))},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Py.BRUSH_SELECTION])},t.prototype.bindMouseUp=function(e){var t=this;void 0===e&&(e=!1),this.spreadsheet.on(ei.GLOBAL_MOUSE_UP,(function(n){if(t.brushSelectionStage===Dy.DRAGGED){if(e&&t.clearAutoScroll(),t.isValidBrushSelection()){t.addBrushIntercepts(),t.updateSelectedCells();var r=bS(t.spreadsheet);t.spreadsheet.showTooltipWithInfo(n,r)}t.spreadsheet.interaction.getCurrentStateName()===cy.PREPARE_SELECT&&t.spreadsheet.interaction.reset(),t.resetDrag()}else t.resetDrag()})),this.spreadsheet.on(ei.GLOBAL_CONTEXT_MENU,(function(){t.brushSelectionStage!==Dy.UN_DRAGGED&&(t.spreadsheet.interaction.removeIntercepts([Py.HOVER]),t.resetDrag())}))},t.prototype.isInBrushRange=function(e){return!1},t.prototype.bindMouseDown=function(){},t.prototype.bindMouseMove=function(){},t.prototype.updateSelectedCells=function(){},t}(rL),vL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.getSelectedCellMetas=function(e){var n=[],r=t.spreadsheet.facet.layoutResult,o=r.rowLeafNodes,i=void 0===o?[]:o,a=r.colLeafNodes,l=void 0===a?[]:a,s=Ig(e.start.rowIndex,e.end.rowIndex+1),c=Ig(e.start.colIndex,e.end.colIndex+1);return s.forEach((function(e){c.forEach((function(r){var o=String(l[r].id),a=Mp(i)?String(e):String(i[e].id);n.push({colIndex:r,rowIndex:e,id:"".concat(a,"-").concat(o),type:uy.DATA_CELL,rowId:a,colId:o,spreadsheet:t.spreadsheet})}))})),n},t}return Zy(t,e),t.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(ei.DATA_CELL_MOUSE_DOWN,(function(n){e.prototype.mouseDown.call(t,n),t.resetScrollDelta()}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Dy.UN_DRAGGED){e.setBrushSelectionStage(Dy.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t);if(e.clearAutoScroll(),e.isPointInCanvas(n))e.renderPrepareSelected(n);else{var r=n.x-e.endBrushPoint.x,o=n.y-e.endBrushPoint.y;e.handleScroll(r,o)}}}))},t.prototype.isInBrushRange=function(e){var t=this.getBrushRange(),n=t.start,r=t.end,o=e.rowIndex,i=e.colIndex;return o>=n.rowIndex&&o<=r.rowIndex&&i>=n.colIndex&&i<=r.colIndex},t.prototype.updateSelectedCells=function(){var e=this.spreadsheet,t=e.interaction,n=e.options,r=this.getBrushRange(),o=this.getSelectedCellMetas(r);t.changeState({cells:o,stateName:cy.SELECTED}),n.interaction.selectedCellHighlight&&o.forEach((function(e){fx(e)}));var i=this.getScrollBrushRangeCells(o);this.spreadsheet.emit(ei.DATA_CELL_BRUSH_SELECTION,i),this.spreadsheet.emit(ei.GLOBAL_SELECTED,i),Mp(this.brushRangeCells)&&t.removeIntercepts([Py.HOVER])},t.prototype.getScrollBrushRangeCells=function(e){var t=this;return e.map((function(e){var n=t.brushRangeCells.find((function(t){var n=t.getMeta();return(null==n?void 0:n.id)===e.id}));if(n)return n;var r=t.spreadsheet.facet.layoutResult.getCellMeta(e.rowIndex,e.colIndex);return new lw(r,t.spreadsheet)}))},t.prototype.bindMouseUp=function(){e.prototype.bindMouseUp.call(this,!0)},t}(pL),gL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.isInBrushRange=function(e){var n=t.getBrushRange(),r=n.start,o=n.end,i=e.x,a=void 0===i?0:i,l=e.y,s=void 0===l?0:l;return a>=r.headerX&&a<=o.headerX&&s>=r.headerY&&s<=o.headerY},t.onUpdateCells=function(e){return e.updateCells(e.getAllColHeaderCells())},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.bindMouseDown=function(){var t=this;[ei.COL_CELL_MOUSE_DOWN].forEach((function(n){t.spreadsheet.on(n,(function(n){e.prototype.mouseDown.call(t,n)}))}))},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW().width,n=this.spreadsheet.facet.cornerBBox,r=n.width,o=n.minY,i=n.maxY;return e.x>=r&&e.x<=t&&e.y>=o&&e.y<=i},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(ei.COL_CELL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Dy.UN_DRAGGED){e.setBrushSelectionStage(Dy.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t.originalEvent);e.isPointInCanvas(n)&&e.renderPrepareSelected(n)}}))},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},t.prototype.getBrushPoint=function(t){var n=this.spreadsheet.getCell(t.target).getMeta(),r=n.x,o=n.y;return Qy(Qy({},e.prototype.getBrushPoint.call(this,t)),{headerX:r,headerY:o})},t.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:kf(this.brushRangeCells,dx),stateName:cy.SELECTED,onUpdateCells:function(e){e.updateCells(e.getAllColHeaderCells())}}),this.spreadsheet.emit(ei.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(ei.GLOBAL_SELECTED,this.brushRangeCells),Mp(this.brushRangeCells)&&e.removeIntercepts([Py.HOVER])},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Py.COL_BRUSH_SELECTION])},t}(pL),mL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.isInBrushRange=function(e){var n=t.getBrushRange(),r=n.start,o=n.end,i=e.x,a=void 0===i?0:i,l=e.y,s=void 0===l?0:l;return a>=r.headerX&&a<=o.headerX&&s>=r.headerY&&s<=o.headerY},t.onUpdateCells=function(e){return e.updateCells(e.getAllRowHeaderCells())},t}return Zy(t,e),t.prototype.bindMouseDown=function(){var t=this;[ei.ROW_CELL_MOUSE_DOWN].forEach((function(n){t.spreadsheet.on(n,(function(n){e.prototype.mouseDown.call(t,n)}))}))},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW().height,n=this.spreadsheet.facet.cornerBBox,r=n.minX,o=n.height,i=n.maxX;return e.x>=r&&e.x<=i&&e.y>=o&&e.y<=t},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(ei.ROW_CELL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Dy.UN_DRAGGED){e.setBrushSelectionStage(Dy.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t.originalEvent);e.isPointInCanvas(n)&&e.renderPrepareSelected(n)}}))},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},t.prototype.getBrushPoint=function(t){var n=this.spreadsheet.getCell(t.target).getMeta(),r=n.x,o=n.y;return Qy(Qy({},e.prototype.getBrushPoint.call(this,t)),{headerX:r,headerY:o})},t.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:kf(this.brushRangeCells,dx),stateName:cy.SELECTED,onUpdateCells:function(e){e.updateCells(e.getAllRowHeaderCells())}}),this.spreadsheet.emit(ei.ROW_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(ei.GLOBAL_SELECTED,this.brushRangeCells),Mp(this.brushRangeCells)&&e.removeIntercepts([Py.HOVER])},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Py.ROW_BRUSH_SELECTION])},t}(pL),yL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp()},t.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Py.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_DOWN,(function(t){ux(t)&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([Py.CLICK]))}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_KEYBOARD_UP,(function(t){ux(t)&&e.reset()}))},t.prototype.getSelectedCells=function(e){var t=e.getMeta().id,n=this.spreadsheet.interaction,r=n.getCells();return n.getCurrentStateName()!==cy.SELECTED&&(r=[]),r.find((function(e){return e.id===t}))?r.filter((function(e){return e.id!==t})):nb(nb([],tb(r),!1),[dx(e)],!1)},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(ei.DATA_CELL_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.getCell(t.target),r=n.getMeta(),o=e.spreadsheet.interaction;if(e.isMultiSelection&&r){var i=e.getSelectedCells(n);if(Mp(i))return o.clearState(),void e.spreadsheet.hideTooltip();o.addIntercepts([Py.CLICK,Py.HOVER]),e.spreadsheet.hideTooltip(),o.changeState({cells:i,stateName:cy.SELECTED}),e.spreadsheet.emit(ei.GLOBAL_SELECTED,o.getActiveCells()),e.spreadsheet.showTooltipWithInfo(t,bS(e.spreadsheet))}}))},t}(rL),bL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeStartPosition={},t.resizeMouseMove=function(e){var n,r;if(null===(n=t.resizeReferenceGroup)||void 0===n?void 0:n.get("visible")){null===(r=null==e?void 0:e.preventDefault)||void 0===r||r.call(e);var o=e.originalEvent,i=t.getResizeInfo(),a=t.resizeReferenceGroup.getChildren()||[];if(!Mp(a)){var l=tb(a,2)[1],s=tb(Md(l.attr("path")),2),c=s[0],u=s[1];i.type===Wy.Horizontal?t.updateHorizontalResizingEndGuideLinePosition(o,i,c,u):t.updateVerticalResizingEndGuideLinePosition(o,i,c,u),t.updateResizeGuideLineTheme(l),l.attr("path",[c,u])}}},t}return Zy(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var e=this.spreadsheet.options,t=e.width,n=e.height,r=this.getResizeAreaTheme(),o=r.guideLineColor,i={path:"",lineDash:r.guideLineDash,stroke:o,lineWidth:r.size};this.resizeReferenceGroup.addShape("path",{id:"RESIZE_START_GUIDE_LINE",attrs:i}),this.resizeReferenceGroup.addShape("path",{id:"RESIZE_END_GUIDE_LINE",attrs:i}),this.resizeReferenceGroup.addShape("rect",{id:"RESIZE_MASK",attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:t,height:n,fill:"transparent"}})}},t.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},t.prototype.setResizeTarget=function(e){this.resizeTarget=e},t.prototype.getGuideLineWidthAndHeight=function(){var e=this.spreadsheet.options,t=e.width,n=e.height,r=this.spreadsheet.facet.panelBBox,o=r.maxY,i=r.maxX;return{width:Math.min(i,t),height:Math.min(o,n)}},t.prototype.getResizeShapes=function(){var e;return(null===(e=this.resizeReferenceGroup)||void 0===e?void 0:e.get("children"))||[]},t.prototype.setResizeMaskCursor=function(e){var t=tb(this.getResizeShapes(),3)[2];null==t||t.attr("cursor",e)},t.prototype.updateResizeGuideLinePosition=function(e,t){var n=this.getResizeShapes();if(!Mp(n)){var r=tb(n,2),o=r[0],i=r[1],a=t.type,l=t.offsetX,s=t.offsetY,c=t.width,u=t.height,d=this.getGuideLineWidthAndHeight(),h=d.width,f=d.height;if(this.setResizeMaskCursor("".concat(a,"-resize")),a===Wy.Horizontal)return o.attr("path",[["M",l,s],["L",l,f]]),i.attr("path",[["M",l+c,s],["L",l+c,f]]),void(this.resizeStartPosition.offsetX=e.offsetX);o.attr("path",[["M",l,s],["L",h,s]]),i.attr("path",[["M",l,s+u],["L",h,s+u]]),this.resizeStartPosition.offsetY=e.offsetY}},t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(ei.LAYOUT_RESIZE_MOUSE_DOWN,(function(t){var n=t.target,r=t.originalEvent,o=e.getCellAppendInfo(t.target);e.spreadsheet.store.set("resized",!1),(null==o?void 0:o.isResizeArea)&&(e.spreadsheet.interaction.reset(),e.spreadsheet.interaction.addIntercepts([Py.RESIZE]),e.setResizeTarget(n),e.showResizeGroup(),e.updateResizeGuideLinePosition(r,o))}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(ei.LAYOUT_RESIZE_MOUSE_MOVE,(function(t){xm(e.resizeMouseMove,33)(t)}))},t.prototype.getResizeGuideLinePosition=function(){var e=tb(this.resizeReferenceGroup.getChildren()||[],2),t=e[0],n=e[1],r=(null==t?void 0:t.attr("path"))||[],o=(null==n?void 0:n.attr("path"))||[],i=tb(r[0]||[],3),a=i[1],l=void 0===a?0:a,s=i[2],c=void 0===s?0:s,u=tb(o[0]||[],3),d=u[1],h=void 0===d?0:d,f=u[2];return{start:{x:l,y:c},end:{x:h,y:void 0===f?0:f}}},t.prototype.getDisAllowResizeInfo=function(){var e,t=this.getResizeInfo(),n=this.spreadsheet.options.interaction.resize,r=t.width,o=t.height,i=t.resizedWidth,a=t.resizedHeight,l=null===(e=null==n?void 0:n.disable)||void 0===e?void 0:e.call(n,t);return{displayWidth:l?r:i,displayHeight:l?o:a,isDisabled:l}},t.prototype.getResizeWidthDetail=function(){var e,t,n=this.getResizeInfo(),r=this.getDisAllowResizeInfo().displayWidth;switch(n.effect){case Uy.Field:return{eventType:ei.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(e={},e[n.id]=r,e)}}};case Uy.Tree:return{eventType:ei.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:r,rowCfg:{treeRowsWidth:r}}};case Uy.Cell:return{eventType:ei.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(t={},t[n.id]=r,t)}}};case Uy.Series:return{eventType:ei.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:r};default:return null}},t.prototype.getResizeHeightDetail=function(){var e,t,n,r=this.spreadsheet.options,o=r.interaction.resize,i=r.style.rowCfg.heightByField,a=this.spreadsheet.theme.rowCell.cell.padding,l=this.getResizeInfo(),s=this.getDisAllowResizeInfo().displayHeight,c=s-a.top-a.bottom;switch(l.effect){case Uy.Field:return{eventType:ei.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(e={},e[l.id]=s,e)}}};case Uy.Cell:return n=i[String(l.id)]||(null==o?void 0:o.rowResizeType)===Vy.CURRENT?{rowCfg:{heightByField:(t={},t[l.id]=c,t)}}:{cellCfg:{height:c}},{eventType:ei.LAYOUT_RESIZE_ROW_HEIGHT,style:n};default:return null}},t.prototype.getResizeDetail=function(){return this.getResizeInfo().type===Wy.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},t.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},t.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},t.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(ei.GLOBAL_MOUSE_UP,(function(){var t;e.setResizeMaskCursor("default"),e.resizeReferenceGroup&&!Mp(null===(t=e.resizeReferenceGroup)||void 0===t?void 0:t.getChildren())&&(e.hideResizeGroup(),e.renderResizedResult())}))},t.prototype.updateResizeGuideLineTheme=function(e){var t=this.getResizeAreaTheme(),n=t.guideLineColor,r=t.guideLineDisableColor,o=this.getDisAllowResizeInfo().isDisabled;e.attr("stroke",o?r:n),this.setResizeMaskCursor(o?"no-drop":"default")},t.prototype.updateHorizontalResizingEndGuideLinePosition=function(e,t,n,r){var o=e.offsetX-this.resizeStartPosition.offsetX;t.width+o<28&&(o=-(t.width-28));var i=t.offsetX+t.width+o;n[1]=i,r[1]=i,this.resizeTarget.attr({x:i-t.size/2})},t.prototype.updateVerticalResizingEndGuideLinePosition=function(e,t,n,r){var o=e.offsetY-this.resizeStartPosition.offsetY;t.height+o<16&&(o=-(t.height-16));var i=t.offsetY+t.height+o;n[2]=i,r[2]=i,this.resizeTarget.attr({y:i-t.size/2})},t.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),t=this.getResizeDetail()||{},n=t.style,r=t.seriesNumberWidth,o=t.eventType,i={info:e,style:n};this.spreadsheet.emit(ei.LAYOUT_RESIZE,i),this.spreadsheet.emit(o,i),n&&this.spreadsheet.setOptions({style:n}),r&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:r}}),this.spreadsheet.store.set("resized",!0),this.render()},t.prototype.getResizeInfo=function(){var e=this.getCellAppendInfo(this.resizeTarget),t=this.getResizeGuideLinePosition(),n=t.start,r=t.end,o=Math.floor(r.x-n.x),i=Math.floor(r.y-n.y);return Qy(Qy({},e),{resizedWidth:o,resizedHeight:i})},t.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},t}(rL),CL=function(){function e(e){var t=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){t.interactions.forEach((function(e){e.reset()}))},this.selectAll=function(){t.changeState({stateName:cy.ALL_SELECTED})},this.getCellChildrenNodes=function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e),o=(null==e?void 0:e.cellType)===uy.ROW_CELL;return t.spreadsheet.isHierarchyTreeType()&&o?Sb.getAllLeaveNodes(r).filter((function(e){return e.rowIndex===r.rowIndex})):Sb.getAllChildrenNodes(r)},this.selectHeaderCell=function(e){var n;void 0===e&&(e={});var r=e.cell;if(!Mp(r)){var o=null===(n=null==r?void 0:r.getMeta)||void 0===n?void 0:n.call(r);if(o&&!Fp(null==o?void 0:o.x)){t.addIntercepts([Py.HOVER]);var i=t.spreadsheet.isHierarchyTreeType(),a=(null==r?void 0:r.cellType)===uy.COL_CELL,l=t.getState(),s=t.isSelectedCell(r),c=(null==e?void 0:e.isMultiSelection)&&t.isSelectedState(),u=s?[]:t.getCellChildrenNodes(r),d=s?[]:[dx(r)];if(c&&(d=Dd(null==l?void 0:l.cells,d),u=Dd(null==l?void 0:l.nodes,u),s&&(d=d.filter((function(e){return e.id!==o.id})),u=u.filter((function(e){return!(null==e?void 0:e.id.includes(o.id))})))),Mp(d))return t.reset(),void t.spreadsheet.emit(ei.GLOBAL_SELECTED,t.getActiveCells());var h=u.filter((function(e){return null==e?void 0:e.isLeaf}));t.changeState({cells:d,nodes:h,stateName:cy.SELECTED});var f=d.map((function(e){return e.id}));return t.updateCells(t.getRowColActiveCells(f)),i&&!a||t.highlightNodes(u),t.spreadsheet.emit(ei.GLOBAL_SELECTED,t.getActiveCells()),!0}}},this.highlightNodes=function(e){void 0===e&&(e=[]),e.forEach((function(e){var t;null===(t=null==e?void 0:e.belongsCell)||void 0===t||t.updateByState(cy.SELECTED,e.belongsCell)}))},this.mergeCells=function(e,n){!function(e,t,n){var r,o=t||function(e){var t=e.interaction.getActiveCells(),n=[];return tf(t,(function(e,t){var r=e.getMeta(),o=0===t?{showText:!0}:{};n.push(Qy(Qy({},o),{colIndex:null==r?void 0:r.colIndex,rowIndex:null==r?void 0:r.rowIndex}))})),n}(e);if((null==o?void 0:o.length)<=1)console.error("then merged cells must be more than one");else{var i=e.interaction.getPanelGroupAllDataCells(),a=dw(i,e,o),l=a.cells,s=a.viewMeta;if(!Mp(l)){var c=(null===(r=e.options)||void 0===r?void 0:r.mergedCellsInfo)||[];c.push(o),e.setOptions({mergedCellsInfo:c});var u=n?void 0:s;e.panelScrollGroup.addMergeCell(new sw(e,l,u))}}}(t.spreadsheet,e,n)},this.unmergeCell=function(e){!function(e,t){var n,r,o;if(t&&t.cellType===uy.MERGED_CELL){var i,a,l,s=(i=t,a=null===(n=e.options)||void 0===n?void 0:n.mergedCellsInfo,l=kf(i.cells,(function(e){return{colIndex:e.getMeta().colIndex,rowIndex:e.getMeta().rowIndex}})),Ef(a,(function(e){return!Np(e.map((function(e){return e.showText?{colIndex:e.colIndex,rowIndex:e.rowIndex}:e})),l)})));(null==s?void 0:s.length)!==(null===(o=null===(r=e.options)||void 0===r?void 0:r.mergedCellsInfo)||void 0===o?void 0:o.length)&&(e.setOptions({mergedCellsInfo:s}),t.remove(!0))}else console.error("unmergeCell: the ".concat(t," is not a MergedCell"))}(t.spreadsheet,e)},this.spreadsheet=e,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return e.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},e.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},e.prototype.setState=function(e){!function(e,t){var n=null==t?void 0:t.stateName;e.interaction.isEqualStateName(n)||(gx(e),e.hideTooltip(),e.store.set(zy,t))}(this.spreadsheet,e)},e.prototype.getState=function(){return this.spreadsheet.store.get(zy)||this.defaultState},e.prototype.setInteractedCells=function(e){var t=this.getInteractedCells().concat([e]),n=this.getState();n.interactedCells=t,this.setState(n)},e.prototype.getInteractedCells=function(){var e=this.getState();return(null==e?void 0:e.interactedCells)||[]},e.prototype.resetState=function(){this.spreadsheet.store.set(zy,this.defaultState)},e.prototype.getCurrentStateName=function(){return this.getState().stateName},e.prototype.isEqualStateName=function(e){return this.getCurrentStateName()===e},e.prototype.isStateOf=function(e){var t=this.getState();return(null==t?void 0:t.stateName)===e},e.prototype.isSelectedState=function(){return this.isStateOf(cy.SELECTED)},e.prototype.isAllSelectedState=function(){return this.isStateOf(cy.ALL_SELECTED)},e.prototype.isHoverFocusState=function(){return this.isStateOf(cy.HOVER_FOCUS)},e.prototype.isHoverState=function(){return this.isStateOf(cy.HOVER)},e.prototype.isActiveCell=function(e){return!!this.getCells().find((function(t){return e.getMeta().id===t.id}))},e.prototype.isSelectedCell=function(e){return this.isSelectedState()&&this.isActiveCell(e)},e.prototype.getCells=function(){var e=this.getState();return(null==e?void 0:e.cells)||[]},e.prototype.getActiveCells=function(){var e=this.getCells().map((function(e){return e.id})),t=this.getAllCells();return kf(e,(function(e){return If(t,(function(t){var n;return(null===(n=null==t?void 0:t.getMeta())||void 0===n?void 0:n.id)===e}))})).filter((function(e){return e}))},e.prototype.clearStyleIndependent=function(){(this.isSelectedState()||this.isHoverState()||this.isAllSelectedState())&&this.getPanelGroupAllDataCells().forEach((function(e){e.hideInteractionShape()}))},e.prototype.getPanelGroupAllUnSelectedDataCells=function(){var e=this;return this.getPanelGroupAllDataCells().filter((function(t){return!e.isActiveCell(t)}))},e.prototype.getPanelGroupAllDataCells=function(){var e;return NS(null===(e=this.spreadsheet.panelGroup)||void 0===e?void 0:e.getChildren(),lw)},e.prototype.getAllRowHeaderCells=function(){var e,t,n=((null===(e=this.spreadsheet.foregroundGroup)||void 0===e?void 0:e.getChildren())||[]).find((function(e){return e instanceof US})),r=(null===(t=null==n?void 0:n.cfg)||void 0===t?void 0:t.children)||[];return NS(r,Zw).filter((function(e){return e.cellType===uy.ROW_CELL}))},e.prototype.getAllColHeaderCells=function(){var e,t,n=((null===(e=this.spreadsheet.foregroundGroup)||void 0===e?void 0:e.getChildren())||[]).find((function(e){return e instanceof GS})),r=(null===(t=null==n?void 0:n.cfg)||void 0===t?void 0:t.children)||[];return NS(r,zw).filter((function(e){return e.cellType===uy.COL_CELL}))},e.prototype.getRowColActiveCells=function(e){return Dd(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter((function(t){return e.includes(t.getMeta().id)}))},e.prototype.getAllCells=function(){return Dd(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},e.prototype.hideColumns=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!0),gw(this.spreadsheet,e,t)},e.prototype.getBrushSelectionInfo=function(e){var t,n,r;return Ip(e)?{dataBrushSelection:e,rowBrushSelection:e,colBrushSelection:e}:{dataBrushSelection:null!==(t=null==e?void 0:e.data)&&void 0!==t&&t,rowBrushSelection:null!==(n=null==e?void 0:e.row)&&void 0!==n&&n,colBrushSelection:null!==(r=null==e?void 0:e.col)&&void 0!==r&&r}},e.prototype.getDefaultInteractions=function(){var e=this.spreadsheet.options.interaction,t=e.resize,n=e.brushSelection,r=e.multiSelection,o=e.rangeSelection,i=e.selectedCellMove,a=this.getBrushSelectionInfo(n),l=a.dataBrushSelection,s=a.rowBrushSelection,c=a.colBrushSelection;return[{key:sy.CORNER_CELL_CLICK,interaction:sL},{key:sy.DATA_CELL_CLICK,interaction:oL},{key:sy.ROW_COLUMN_CLICK,interaction:aL},{key:sy.ROW_TEXT_CLICK,interaction:lL},{key:sy.MERGED_CELLS_CLICK,interaction:iL},{key:sy.HOVER,interaction:cL,enable:!xb()},{key:sy.BRUSH_SELECTION,interaction:vL,enable:!xb()&&l},{key:sy.ROW_BRUSH_SELECTION,interaction:mL,enable:!xb()&&s},{key:sy.COL_BRUSH_SELECTION,interaction:gL,enable:!xb()&&c},{key:sy.COL_ROW_RESIZE,interaction:bL,enable:!xb()&&t},{key:sy.DATA_CELL_MULTI_SELECTION,interaction:yL,enable:!xb()&&r},{key:sy.RANGE_SELECTION,interaction:dL,enable:!xb()&&o},{key:sy.SELECTED_CELL_MOVE,interaction:fL,enable:!xb()&&i}]},e.prototype.registerInteractions=function(){var e=this,t=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear(),this.getDefaultInteractions().forEach((function(t){var n=t.key,r=t.interaction;!1!==t.enable&&e.interactions.set(n,new r(e.spreadsheet))})),Mp(t)||tf(t,(function(t){var n=t.interaction;e.interactions.set(t.key,new n(e.spreadsheet))}))},e.prototype.registerEventController=function(){this.eventController=new uL(this.spreadsheet)},e.prototype.draw=function(){this.spreadsheet.container.draw()},e.prototype.clearState=function(){gx(this.spreadsheet)&&this.draw()},e.prototype.changeState=function(e){var t=this,n=this.spreadsheet.interaction,r=e.cells,o=void 0===r?[]:r,i=e.force,a=e.stateName,l=e.onUpdateCells;Mp(o)&&a===cy.SELECTED?i&&n.changeState({cells:[],stateName:cy.UNSELECTED}):(this.getCurrentStateName()===cy.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(e),l?l(this,(function(){return t.updatePanelGroupAllDataCells()})):this.updatePanelGroupAllDataCells(),this.draw())},e.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},e.prototype.updateCells=function(e){void 0===e&&(e=[]),e.forEach((function(e){e.update()}))},e.prototype.addIntercepts=function(e){var t=this;void 0===e&&(e=[]),e.forEach((function(e){t.intercepts.add(e)}))},e.prototype.hasIntercepts=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.intercepts.has(e)}))},e.prototype.removeIntercepts=function(e){var t=this;void 0===e&&(e=[]),e.forEach((function(e){t.intercepts.delete(e)}))},e.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},e.prototype.setHoverTimer=function(e){this.hoverTimer=e},e.prototype.getHoverTimer=function(){return this.hoverTimer},e}(),wL=function(){function e(e){var t=this;this.viewport=window,this.init=function(){t.initDevicePixelRatioListener(),t.initDeviceZoomListener()},this.destroy=function(){t.removeDevicePixelRatioListener(),t.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var e;(null===(e=t.devicePixelRatioMedia)||void 0===e?void 0:e.removeEventListener)?t.devicePixelRatioMedia.removeEventListener("change",t.renderByDevicePixelRatioChanged):t.devicePixelRatioMedia.removeListener(t.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var e,n;xb()||null===(n=null===(e=t.viewport)||void 0===e?void 0:e.visualViewport)||void 0===n||n.addEventListener("resize",t.renderByZoomScale)},this.removeDeviceZoomListener=function(){var e,n;xb()||null===(n=null===(e=t.viewport)||void 0===e?void 0:e.visualViewport)||void 0===n||n.removeEventListener("resize",t.renderByZoomScale)},this.renderByDevicePixelRatioChanged=function(){t.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(e){void 0===e&&(e=window.devicePixelRatio);var n=t.spreadsheet,r=n.container,o=n.options,i=o.width,a=o.height,l=o.devicePixelRatio,s=t.spreadsheet.getCanvasElement();if(r.get("pixelRatio")!==e&&s){var c=Math.max(e,l,1);r.set("pixelRatio",c),r.changeSize(i,a),t.spreadsheet.render(!1)}},this.renderByZoomScale=Sh((function(e){var n=Math.ceil(e.target.scale);n>=1&&t.renderByDevicePixelRatio(n)}),350),this.spreadsheet=e}return e.prototype.initDevicePixelRatioListener=function(){var e;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(e=this.devicePixelRatioMedia)||void 0===e?void 0:e.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},e}(),xL=function(){function e(e){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=e}return e.prototype.show=function(e){var t,n,r,o=e.position,i=e.options,a=e.content,l=e.event,s=uS(i).enterable,c=this.spreadsheet.options.tooltip||{},u=c.autoAdjustBoundary,d=c.adjustPosition;this.visible=!0,this.options=e;var h=this.getContainer();this.renderContent(a);var f=function(e){var t=e.spreadsheet,n=e.position,r=e.tooltipContainer,o=e.autoAdjustBoundary,i=t.getCanvasElement(),a=n.x+wb,l=n.y+10;if(!o||!i)return{x:a,y:l};var s="body"===o,c=t.facet.panelBBox,u=c.maxX,d=c.maxY,h=t.options,f=h.width,p=h.height,v=i.getBoundingClientRect(),g=v.top,m=v.left,y=r.getBoundingClientRect(),b=y.width,C=y.height,w=document.body.getBoundingClientRect(),x=w.width,E=w.height,S=s?x:Math.min(f,u)+m,L=s?E:Math.min(p,d)+g;return a+b>=S&&(a=S-b),l+C>=L&&(l=L-C),{x:a,y:l}}({spreadsheet:this.spreadsheet,position:o,tooltipContainer:h,autoAdjustBoundary:u}),p=f.x,v=f.y;this.position=null!==(t=null==d?void 0:d({position:{x:p,y:v},event:l}))&&void 0!==t?t:{x:p,y:v},hS(h,{style:{left:"".concat(null===(n=this.position)||void 0===n?void 0:n.x,"px"),top:"".concat(null===(r=this.position)||void 0===r?void 0:r.y,"px"),pointerEvents:s?"all":"none"},visible:!0})},e.prototype.hide=function(){this.visible=!1,this.container&&(hS(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},e.prototype.destroy=function(){var e,t;this.visible=!1,this.container&&(this.resetPosition(),null===(t=(e=this.container).remove)||void 0===t||t.call(e),this.container=null)},e.prototype.renderContent=function(e){if(this.container){this.clearContent();var t=(this.spreadsheet.options.tooltip||{}).content,n=null!=e?e:t;Fp(n)||("string"!=typeof n?n instanceof Element&&this.container.appendChild(n):this.container.innerHTML=n)}},e.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},e.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&hS(this.container,{style:{pointerEvents:"none"}})},e.prototype.resetPosition=function(){this.position={x:0,y:0}},e.prototype.getContainer=function(){var e;if(!this.container){var t=this.spreadsheet.options.tooltip,n=(null===(e=t.getContainer)||void 0===e?void 0:e.call(t))||document.body,r=document.createElement("div");return hS(r,{style:t.style,className:[yb].concat(t.className)}),n.appendChild(r),this.container=r,this.container}return this.container},e}(),EL=function(e){function t(t,n,r){var o=e.call(this)||this;return o.store=new Yb,o.untypedOn=o.on,o.untypedEmit=o.emit,o.on=function(e,t){return o.untypedOn(e,t)},o.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.untypedEmit.apply(o,nb([e],tb(t),!1))},o.initHiddenColumnsDetail=function(){var e=o.options.interaction.hiddenColumnFields,t=o.store.get("hiddenColumnsDetail");Mp(e)&&Mp(t)||gw(o,e,!0)},o.measureText=Ks((function(e,t){var n;if(void 0===e&&(e=""),!t)return null;var r=null===(n=o.getCanvasElement())||void 0===n?void 0:n.getContext("2d"),i=t,a=i.fontSize,l=i.fontFamily,s=i.fontWeight,c=i.fontStyle,u=i.fontVariant;return r.font=[c,u,s,"".concat(a,"px"),l].join(" ").trim(),r.measureText(String(e))}),(function(e,t){return nb([e],tb(np(t)),!1).join("")})),o.measureTextWidth=function(e,t){void 0===e&&(e="");var n=o.measureText(e,t);return(null==n?void 0:n.width)||0},o.measureTextHeight=function(e,t){void 0===e&&(e="");var n=o.measureText(e,t);return n?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:0},o.measureTextWidthRoughly=function(e,t){var n,r;void 0===t&&(t={});var i=o.measureTextWidth("a",t),a=o.measureTextWidth("蚂",t),l=0;if(!e)return l;try{for(var s=eb(e),c=s.next();!c.done;c=s.next()){var u=c.value.charCodeAt(0);l+=u>=0&&u<=255?i:a}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return l},o.dataCfg=wx(n),o.options=xx(r),o.dataSet=o.getDataSet(o.options),o.setDebug(),o.initTooltip(),o.initGroups(t),o.bindEvents(),o.initInteraction(),o.initTheme(),o.initHdAdapter(),o.registerIcons(),o.setOverscrollBehavior(),o}return Zy(t,e),t.prototype.setOverscrollBehavior=function(){var e=this.options.interaction.overscrollBehavior,t=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior");t&&"auto"!==t?this.store.set("initOverscrollBehavior",t):e&&(document.body.style.overscrollBehavior=e)},t.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},t.prototype.setDebug=function(){kb.getInstance().setDebug(this.options.debug)},t.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},t.prototype.getMountContainer=function(e){var t=ep(e)?document.querySelector(e):e;if(!t)throw new Error("Target mount container is not a DOM element");return t},t.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new wL(this),this.hdAdapter.init())},t.prototype.initInteraction=function(){this.interaction=new CL(this)},t.prototype.initTooltip=function(){var e,t;this.tooltip=this.renderTooltip(),this.tooltip instanceof xL||console.warn("[Custom Tooltip]: ".concat(null===(t=null===(e=this.tooltip)||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.toString()," should be extends from BaseTooltip"))},t.prototype.renderTooltip=function(){var e,t;return(null===(t=null===(e=this.options.tooltip)||void 0===e?void 0:e.renderTooltip)||void 0===t?void 0:t.call(e,this))||new xL(this)},t.prototype.showTooltip=function(e){var t,n,r=e.content,o=e.event,i=this.getCell(null==o?void 0:o.target),a=Ca(r)?r(i,e):r;null===(n=(t=this.tooltip).show)||void 0===n||n.call(t,Qy(Qy({},e),{content:a}))},t.prototype.showTooltipWithInfo=function(e,t,n){var r=CS(this,e),o=r.showTooltip,i=r.content;if(o){var a=this.getCell(null==e?void 0:e.target),l=yS({spreadsheet:this,cellInfos:t,targetCell:a,options:Qy({enableFormat:!0},n)});this.showTooltip({data:l,position:{x:e.clientX,y:e.clientY},options:Qy({enterable:!0},n),event:e,content:i})}},t.prototype.hideTooltip=function(){var e,t;null===(t=(e=this.tooltip).hide)||void 0===t||t.call(e)},t.prototype.destroyTooltip=function(){var e,t;null===(t=(e=this.tooltip).destroy)||void 0===t||t.call(e)},t.prototype.registerIcons=function(){var e=this.options.customSVGIcons;Mp(e)||tf(e,(function(e){Fb(e.name,e.svg)}))},t.prototype.setDataCfg=function(e,t){this.store.set("originalDataCfg",e),this.dataCfg=t?wx(e):wx(this.dataCfg,e),this.store.set(Di,ki)},t.prototype.setOptions=function(e,t){this.hideTooltip(),this.options=t?xx(e):bx(this.options,e),this.registerIcons()},t.prototype.render=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t={}),this.getCanvasElement()){var n=t.reBuildDataSet,r=void 0!==n&&n,o=t.reBuildHiddenColumnsDetail,i=void 0===o||o;this.emit(ei.LAYOUT_BEFORE_RENDER),r&&(this.dataSet=this.getDataSet(this.options)),e&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),i&&this.initHiddenColumnsDetail(),this.emit(ei.LAYOUT_AFTER_RENDER)}},t.prototype.destroy=function(){var e,t,n,r,o;this.restoreOverscrollBehavior(),this.emit(ei.LAYOUT_DESTROY),null===(e=this.facet)||void 0===e||e.destroy(),null===(t=this.hdAdapter)||void 0===t||t.destroy(),null===(n=this.interaction)||void 0===n||n.destroy(),null===(r=this.store)||void 0===r||r.clear(),this.destroyTooltip(),this.clearCanvasEvent(),null===(o=this.container)||void 0===o||o.destroy(),function(){var e;null===(e=document.getElementById(cC))||void 0===e||e.remove()}()},t.prototype.setThemeCfg=function(e){void 0===e&&(e={});var t=(null==e?void 0:e.theme)||{},n=function(e){var t,n,r,o,i,a,l=(null==e?void 0:e.palette)||(a=null==e?void 0:e.name,ub[(a||"default").toLowerCase()]),s=l.basicColors,c=l.semanticColors,u=l.others,d=null===(t=null==e?void 0:e.spreadsheet)||void 0===t?void 0:t.isTableMode(),h=Eb()?"bold":700,f=function(){var e,t;return{bolderText:{fontFamily:db,fontSize:12,fontWeight:h,fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle"},text:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{crossBackgroundColor:s[1],backgroundColor:s[8],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:s[2],backgroundOpacity:.6,borderColor:s[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:null!==(e=null==u?void 0:u.results)&&void 0!==e?e:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(t=null==u?void 0:u.highlight)&&void 0!==t?t:s[6],backgroundOpacity:1},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:s[6],opacity:1},linkLine:{size:1.5,fill:s[6],opacity:.6}},bar:{intervalPadding:4,fill:s[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:s[13],opacity:.25},rangeColors:{good:null==c?void 0:c.green,satisfactory:c.yellow,bad:c.red},backgroundColor:"#E9E9E9"},interval:{height:12,fill:s[7]}},icon:{fill:s[13],downIconColor:c.red,upIconColor:c.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:db,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:d?"center":"left",textBaseline:"middle"},text:{fontFamily:db,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:s[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textAlign:d?"center":"left",textBaseline:"top"},bolderText:{fontFamily:db,fontSize:12,fontWeight:h,fill:s[14],linkTextFill:s[6],opacity:1,textAlign:d?"center":"left",textBaseline:"top"},text:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"top",textAlign:d?"center":"left"},cell:{backgroundColor:s[1],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(n=null==u?void 0:u.results)&&void 0!==n?n:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(r=null==u?void 0:u.highlight)&&void 0!==r?r:s[6],backgroundOpacity:1}}},icon:{fill:s[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:db,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:db,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:s[4],backgroundOpacity:.6},selected:{backgroundColor:s[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(o=null==u?void 0:u.results)&&void 0!==o?o:s[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(i=null==u?void 0:u.highlight)&&void 0!==i?i:s[6],backgroundOpacity:1}}},icon:{fill:s[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:f(),mergedCell:f(),resizeArea:{size:3,background:s[7],backgroundOpacity:0,guideLineColor:s[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:s[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",size:xb()?3:6,hoverSize:xb()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:s[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:s[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"}},prepareSelectMask:{backgroundColor:s[5],backgroundOpacity:.3},background:{color:s[8],opacity:1}}}(Qy(Qy({},e),{spreadsheet:this}));this.theme=bx(n,t)},t.prototype.setTheme=function(e){this.theme=bx(this.theme,e)},t.prototype.updatePagination=function(e){this.options=bx(this.options,{pagination:e}),this.store.set("scrollX",0),this.store.set("scrollY",0)},t.prototype.getContentHeight=function(){return this.facet.getContentHeight()},t.prototype.changeSize=function(e,t){void 0===e&&(e=this.options.width),void 0===t&&(t=this.options.height),this.changeSheetSize(e,t)},t.prototype.changeSheetSize=function(e,t){void 0===e&&(e=this.options.width),void 0===t&&(t=this.options.height);var n=this.getCanvasElement(),r=this.container.get("width"),o=this.container.get("height");(e!==r||t!==o)&&n&&(this.options=bx(this.options,{width:e,height:t}),this.container.changeSize(e,t))},t.prototype.getCanvasElement=function(){return this.container.get("el")},t.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},t.prototype.getRowNodes=function(e){return void 0===e&&(e=-1),-1===e?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter((function(t){return t.level===e}))},t.prototype.getRowLeafNodes=function(){var e;return(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.rowLeafNodes)||[]},t.prototype.getColumnNodes=function(e){var t;void 0===e&&(e=-1);var n=(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.colNodes)||[];return-1===e?n:n.filter((function(t){return t.level===e}))},t.prototype.getColumnLeafNodes=function(){var e;return(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.colLeafNodes)||[]},t.prototype.updateScrollOffset=function(e){this.facet.updateScrollOffset(bx({offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1}},e))},t.prototype.getTooltipDataItemMappingCallback=function(){var e;return null===(e=this.options)||void 0===e?void 0:e.mappingDisplayDataItem},t.prototype.getCell=function(e){for(var t,n=e;n&&!(n instanceof ti);){if(n instanceof rw)return n;n=null===(t=n.get)||void 0===t?void 0:t.call(n,"parent")}return null},t.prototype.getCellType=function(e){var t=this.getCell(e);return null==t?void 0:t.cellType},t.prototype.getTotalsConfig=function(e){var t=ic(this.options.totals,op(this.dataSet.fields.rows,e)?"row":"col",{});return{showSubTotals:!(!t.showSubTotals||!op(t.subTotalsDimensions,e))&&t.showSubTotals,showGrandTotals:t.showGrandTotals,reverseLayout:t.reverseLayout,reverseSubLayout:t.reverseSubLayout,label:t.label||gb("总计"),subLabel:t.subLabel||gb("小计")}},t.prototype.initGroups=function(e){var t=this.options,n=t.width,r=t.height,o=t.supportCSSTransform,i=t.devicePixelRatio;this.container=new ti({container:this.getMountContainer(e),width:n,height:r,localRefresh:!1,supportCSSTransform:o,pixelRatio:Math.max(i,1)}),this.backgroundGroup=this.container.addGroup({name:"backGroundGroup",zIndex:0}),this.panelGroup=this.container.addGroup({name:"panelGroup",zIndex:1}),this.foregroundGroup=this.container.addGroup({name:"foreGroundGroup",zIndex:3}),this.initPanelGroupChildren(),this.updateContainerStyle()},t.prototype.updateContainerStyle=function(){var e=this.getCanvasElement();e&&(e.style.display="block")},t.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new nL({name:"panelScrollGroup",zIndex:1,s2:this}),this.panelGroup.add(this.panelScrollGroup)},t.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},t.prototype.clearColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},t.prototype.clearCanvasEvent=function(){var e=this;zf(this.getEvents(),(function(t,n){e.off(n)}))},t.prototype.updateSortMethodMap=function(e,t,n){var r;void 0===n&&(n=!1);var o=n?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",Qy(Qy({},o),((r={})[e]=t,r)))},t.prototype.getMenuDefaultSelectedKeys=function(e){var t=ic(this.store.get("sortMethodMap"),e);return t?[t]:[]},t}(he),SL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t.prototype.getDataSet=function(e){var t=e.dataSet,n=e.hierarchyType;return t?t(this):"customTree"===n?new OS(this):new SS(this)},t.prototype.isPivotMode=function(){return!0},t.prototype.isTableMode=function(){return!1},t.prototype.isHierarchyTreeType=function(){var e=this.options.hierarchyType;return"tree"===e||"customTree"===e},t.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},t.prototype.isFrozenRowHeader=function(){var e;return null===(e=this.options)||void 0===e?void 0:e.frozenRowHeader},t.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},t.prototype.clearDrillDownData=function(e,t){this.dataSet instanceof SS&&(this.dataSet.clearDrillDownData(e),t||(this.interaction.reset(),this.render(!1)))},t.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,t=this.dataSet,n=t.fields,r=t.meta,o=this.options,i=o.style,a=o.dataCell;return Qy(Qy(Qy(Qy({},this.options),n),i),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(t){return new lw(t,e)}})},t.prototype.buildFacet=function(){var e,t=this.getFacetCfgFromDataSetAndOptions();null===(e=this.facet)||void 0===e||e.destroy(),this.facet=new QS(t),this.facet.render()},t.prototype.bindEvents=function(){this.off(ei.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(ei.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(ei.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(ei.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},t.prototype.handleRowCellCollapseTreeRows=function(e){var t,n=e.id,r=e.isCollapsed,o={style:{collapsedRows:(t={},t[n]=r,t)}};this.emit(ei.LAYOUT_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:null==e?void 0:e.node}),this.setOptions(o),this.render(!1),this.emit(ei.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:null==e?void 0:e.node})},t.prototype.handleTreeRowsCollapseAll=function(e){var t={style:{hierarchyCollapse:!e,collapsedRows:null,rowExpandDepth:null}};this.setOptions(t),this.render(!1)},t.prototype.groupSortByMethod=function(e,t){var n=this.dataCfg.fields,r=n.rows,o=n.columns,i=this.options.style.colCfg.hideMeasureColumn,a=this.isValueInCols()?$h(r):$h(o),l=t.query,s=t.value,c=Md(l),u=s;i&&this.isValueInCols()&&(u=this.dataSet.fields.values[0],c[oi]=u);var d={sortFieldId:a,sortMethod:e,sortByMeasure:u,query:c},h=this.dataCfg.sortParams.filter((function(e){return(null==e?void 0:e.sortFieldId)!==a}));this.updateSortMethodMap(t.id,e,!0);var f=nb(nb([],tb(h),!1),[d],!1);this.emit(ei.RANGE_SORT,f),this.setDataCfg(Qy(Qy({},this.dataCfg),{sortParams:f})),this.render()},t.prototype.handleGroupSort=function(e,t){var n=this;e.stopPropagation(),this.interaction.addIntercepts([Py.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==t?void 0:t.id),o={onClick:function(r){var o=r.key;n.groupSortByMethod(o,t),n.emit(ei.RANGE_SORTED,e)},menus:[{key:"asc",icon:"groupAsc",text:gb("组内升序")},{key:"desc",icon:"groupDesc",text:gb("组内降序")},{key:"none",text:gb("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},t}(EL),LL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zy(t,e),t}(tL),OL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSortTooltipClick=function(e,n){var r=e.key,o={sortFieldId:n.field,sortMethod:r};t.updateSortMethodMap(n.id,r),t.emit(ei.RANGE_SORT,[o])},t}return Zy(t,e),t.prototype.getDataSet=function(e){var t=e.dataSet;return t?t(this):new LS(this)},t.prototype.isPivotMode=function(){return!1},t.prototype.isTableMode=function(){return!0},t.prototype.isHierarchyTreeType=function(){return!1},t.prototype.isScrollContainsRowHeader=function(){return!1},t.prototype.isFrozenRowHeader=function(){return!1},t.prototype.clearDrillDownData=function(){},t.prototype.isValueInCols=function(){return!1},t.prototype.bindEvents=function(){},t.prototype.initPanelGroupChildren=function(){var t,n=this;e.prototype.initPanelGroupChildren.call(this);var r={zIndex:2,s2:this};t=tb([ci,ui,di,hi,fi,pi].map((function(e){var t=new LL(Qy({name:e},r));return n.panelGroup.add(t),t})),6),this.frozenRowGroup=t[0],this.frozenColGroup=t[1],this.frozenTrailingRowGroup=t[2],this.frozenTrailingColGroup=t[3],this.frozenTopGroup=t[4],this.frozenBottomGroup=t[5]},t.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,t=this.dataSet,n=t.fields,r=t.meta,o=this.options,i=o.style,a=o.dataCell;return Qy(Qy(Qy(Qy({},this.options),n),i),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(t){return e.options.showSeriesNumber&&0===t.colIndex?new cx(t,e):new sx(t,e)}})},t.prototype.buildFacet=function(){var e,t=this.getFacetCfgFromDataSetAndOptions();null===(e=this.facet)||void 0===e||e.destroy(),this.facet=new eL(t),this.facet.render()},t.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(ei.RANGE_SORT),this.off(ei.RANGE_FILTER)},t.prototype.handleGroupSort=function(e,t){var n=this;e.stopPropagation(),this.interaction.addIntercepts([Py.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==t?void 0:t.id),o={onClick:function(e){var r=e.key;n.onSortTooltipClick({key:r},t)},menus:[{key:"asc",icon:"groupAsc",text:gb("升序")},{key:"desc",icon:"groupDesc",text:gb("降序")},{key:"none",text:gb("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},t}(EL)},162:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"community-detection":"Community detection","community-detection.select-algo":"Select an algorithm to analysis","community-detection.k-core":"k-core","community-detection.k-core-tip":"Find the closely related community structure that conforms to the specified core degree k","community-detection.k-core.set-k":"set core degree k: ","community-detection.louvain":"louvain","community-detection.louvain-tip":"Community detection algorithm based on modularity","community-detection.i-louvain":"i-louvain","community-detection.i-louvain-tip":"Community detection algorithm based on modularity and inertial modularity (attribute similarity)","analysis-result":"Analysis result",analyse:"Analysis","download-csv":"Download CSV","community-index":"Community Index","node-name":"Node Name","data.no-data":"No data"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/ClusterTable/locale/en-US.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},860:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"community-detection":"社区发现","community-detection.select-algo":"选择分析算法","community-detection.k-core":"k-core算法","community-detection.k-core-tip":"找出符合指定核心度k的紧密关联的子图结构","community-detection.k-core.set-k":"设置核心度k：","community-detection.louvain":"louvain算法","community-detection.louvain-tip":"基于模块度的社区发现算法","community-detection.i-louvain":"i-louvain算法","community-detection.i-louvain-tip":"基于模块度和惯性模块度（属性相似度）的社区发现算法","analysis-result":"分析结果",analyse:"分析","download-csv":"下载为 CSV","community-index":"社区编号","node-name":"节点名称","data.no-data":"暂无数据"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/ClusterTable/locale/zh-CN.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},310:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"community-detection":"Community detection","select-algo":"Select an algorithm to analysis","k-core":"k-core","k-core-tip":"Find the closely related community structure that conforms to the specified core degree k","k-core.set-k":"set core degree k: ",louvain:"louvain","louvain-tip":"Community detection algorithm based on modularity","i-louvain":"i-louvain","i-louvain-tip":"Community detection algorithm based on modularity and inertial modularity (attribute similarity)","analysis-result":"Analysis result",analyse:"Analysis","download-csv":"Download CSV","community-index":"Community Index","node-name":"Node Name","data.no-data":"No data","connected-component":"Connected Component","connected-component-tip":"Community detection according to the connection of the graph","connected-component.all-connected":"The current graph is all connected","connected-component.has-single":"There are single nodes on the graph. They will not be devided into any community"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/CommunityDetection/locale/en-US.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},451:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"community-detection":"社区发现","select-algo":"选择分析算法","k-core":"k-core算法","k-core-tip":"找出符合指定核心度k的紧密关联的子图结构","k-core.set-k":"设置核心度k：",louvain:"louvain算法","louvain-tip":"基于模块度的社区发现算法","i-louvain":"i-louvain算法","i-louvain-tip":"基于模块度和惯性模块度（属性相似度）的社区发现算法","analysis-result":"分析结果",analyse:"分析","download-csv":"下载为 CSV","community-index":"社区编号","node-name":"节点名称","data.no-data":"暂无数据","connected-component":"连通子图算法","connected-component-tip":"根据连通性划分社区","connected-component.all-connected":"当前图整体连通，无非连通子图","connected-component.has-single":"当前图上存在孤点，将不参与社区划分"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/CommunityDetection/locale/zh-CN.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},135:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"itelligent-analysis.select-algo":"Select algorithm","itelligent-analysis.nodes-clustering.k-means":"k-means algorithm","itelligent-analysis.nodes-clustering.k-means-tip":"Cluster nodes into K clusters according to the distance between nodes","itelligent-analysis.nodes-clustering.k-means.set-k":"set K：","itelligent-analysis.nodes-clustering.k-means.set-distance-type":"Set Distance Type","itelligent-analysis.nodes-clustering.k-means.distance-type.euclideanDistance":"Euclidean distance of node attributes","analysis-result":"Analysis result",analyse:"Analysis","download-csv":"Download CSV","community-index":"Community Index","node-name":"Node Name","data.no-data":"No data",category:"Category"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/NodesClustering/locale/en-US.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},336:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"itelligent-analysis.select-algo":"选择分析算法","itelligent-analysis.nodes-clustering.k-means":"k-means算法","itelligent-analysis.nodes-clustering.k-means-tip":"根据节点之间的距离将节点聚成K个簇","itelligent-analysis.nodes-clustering.k-means.set-k":"设置k值：","itelligent-analysis.nodes-clustering.k-means.set-distance-type":"设置距离类型：","itelligent-analysis.nodes-clustering.k-means.distance-type.euclideanDistance":"节点属性的欧式距离","analysis-result":"分析结果",analyse:"分析","download-csv":"下载为 CSV","community-index":"社区编号","node-name":"节点名称","data.no-data":"暂无数据",category:"类别"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/NodesClustering/locale/zh-CN.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},334:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"itelligent-analysis.nodes-similarity":"Nodes Similarity","itelligent-analysis.select-algo":"Select algorithm","itelligent-analysis.nodes-similarity.nodes-cosine-similarity":"nodes-cosine-similarity algorithm","itelligent-analysis.nodes-similarity.nodes-cosine-similarity-tip":"Computing cosine similarity based on node properties","itelligent-analysis.nodes-similarity.select-seed-node":"Select seed node","itelligent-analysis.nodes-similarity.no-seed-node":"No seed node selected","itelligent-analysis.nodes-similarity.table-title.nodes-cosine-similarity":"cosine similarity",analyse:"Analysis","analysis-result":"Analysis result","download-csv":"Download CSV","community-index":"Community Index","node-name":"Node Name","node-id":"Node ID",index:"Index",max:"Max",min:"Min","data.no-data":"No data","seed-node-not-found":"Seed node not found"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/NodesSimilarity/locale/en-US.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},323:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={"itelligent-analysis.nodes-similarity":"社区发现","itelligent-analysis.select-algo":"选择分析算法","itelligent-analysis.nodes-similarity.nodes-cosine-similarity":"nodes-cosine-similarity算法","itelligent-analysis.nodes-similarity.nodes-cosine-similarity-tip":"基于节点属性计算余弦相似性","itelligent-analysis.nodes-similarity.select-seed-node":"选择种子节点","itelligent-analysis.nodes-similarity.no-seed-node":"未选择种子节点","itelligent-analysis.nodes-similarity.table-title.nodes-cosine-similarity":"余弦相似度",analyse:"分析","analysis-result":"分析结果","download-csv":"下载为 CSV","community-index":"社区编号","node-name":"节点名称","node-id":"节点id",index:"序号",max:"最大值",min:"最小值","data.no-data":"暂无数据","seed-node-not-found":"未找到种子节点"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/NodesSimilarity/locale/zh-CN.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},130:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={confirm:"Confirm","please-select":"Please select","add-property":"Add property","property-condition":"Property rule",optional:"Optional",node:"Node",edge:"Edge",source:"Source Node",target:"Target Node","relation-type":"Edge type","entity-type":"Node Type","not-empty":"Not empty",match:"Match",cancel:"Cancel","add-node":"Add node",save:"Save","delete-node":"Remove node","delete-relation":"Remove edge","contextmenu-add-relation":"Add edge",index:"Index","node-count":"Node num","edge-count":"Edge num","select-property":"Select property key","enter-property-value":"enter property value","build-pattern":"Build pattern","no-pattern":"No pattern","import-pattern":"Import pattern JSON","download-pattern":"Download pattern JSON","pattern-match":"Graph Pattern Match","no-result":"Node matches!","cannot-match-empty-pattern":"Cannot match with an empty pattern!","edit-pattern":"Edit pattern","extract-pattern":"Extract pattern","re-extract-pattern":"Re-extract pattern","extract-selecting":"Selecting subgraph...","extract-pattern-tip":"Drag from the blank area on the canvas to begin lasso selecting a sub-graph to be pattern","extract-pattern-tip-long":"Drag from the blank area on the canvas to begin lasso selecting a sub-graph or click selecting nodes and edges, selected sub-graph will be extracted to be a pattern. You could also drag the canvas while pressing SHIFT","add-template":"Add template","pattern-title":"Pattern-{value}","clone-title":"Clone pattern-{value}","create-edge-failed-no-edge-type":"Create relation failed. There is no type between node type {sourceType} and {targetType}","save-failed-must-connected":"Create pattern failed. The pattern should be connected","save-failed-edge-must-have-nodes":"Create pattern failed. The both end nodes should be selected for a selected edge","save-failed-no-empty-type":"Save pattern failed. Please assign the type for all the nodes and edges","save-failed-not-empty":"Save pattern failed. The pattern should not be empty. If you want to quit the editor, click Cancel button instead","select-node-before-edge":"Please select the source and target node type first","select-edge-before-property":"Please select the edge type first","no-edge-type-for-nodes":"There is no edge type between selected source and target node type","select-node-before-property":"Please select the node type first","result-title":"Pattern Match Result List","new-pattern":"New pattern","pattern-num-limit":"Add pattern failed. The number of the patterns is limited!","export-pattern":"Export the Pattern","extract-confirm-cancel":"Confirm to cancel","extract-confirm-cancel-content":"There are selected items. Canceling it means the selected sub-graph will not be extracted as pattern. Are you sure to cancel?"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/PatternMatch/locale/en-US.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},940:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={confirm:"确定","please-select":"请选择","add-property":"增加属性","property-condition":"属性条件",optional:"可选",node:"节点",edge:"边",source:"起点",target:"终点","relation-type":"边类型","entity-type":"节点类型","not-empty":"不可为空",match:"计算匹配",cancel:"取消","add-node":"添加节点",save:"保存","delete-node":"删除节点","delete-relation":"删除边","contextmenu-add-relation":"添加边",index:"序号","node-count":"节点数量","edge-count":"边数量","select-property":"选择属性","enter-property-value":"输入属性值","build-pattern":"构建模式","no-pattern":"暂无模式","import-pattern":"导入模式JSON","download-pattern":"下载模式JSON","pattern-match":"图模式匹配","no-result":"没有找到匹配！","cannot-match-empty-pattern":"无法匹配空模式！","edit-pattern":"编辑模式","extract-pattern":"抽取模式","re-extract-pattern":"重新圈选","extract-selecting":"选择子图中...","extract-pattern-tip":"从主图上拖拽圈选或点选内容并抽取为模式","extract-pattern-tip-long":"画布处于选择状态，你可以通过【圈选】或【点选】子图，被选中的子图将被抽取为模式。【按住 W】 可拖拽画布","add-template":"添加模版","pattern-title":"模式-{value}","clone-title":"复制模式-{value}","create-edge-failed-no-edge-type":"创建边失败。起点类型 {sourceType} 与终点类型 {targetType} 之间不存在边类型","save-failed-must-connected":"创建模式失败。模式必须是连通的","save-failed-edge-must-have-nodes":"创建模式失败。模式中不可以存在悬挂边","save-failed-no-empty-type":"保存模式失败，创建边失败。请为所有节点和边指定类型","save-failed-not-empty":"保存模式失败，模式不可为空。若希望放弃编辑器，请点击“取消”按钮","select-node-before-edge":"请先选择起点与终点的类型","select-edge-before-property":"请先选择边类型","no-edge-type-for-nodes":"起点类型与终点类型之间不存在边类型","select-node-before-property":"请先选择节点类型","result-title":"模式匹配结果列表","new-pattern":"新建模式","pattern-num-limit":"添加模式失败。模式数量已达上限！","export-pattern":"导出模式","extract-confirm-cancel":"确认退出抽取模式","extract-confirm-cancel-content":"已有选中内容，退出将不会将使用选中内容作为模式。确认退出吗？"};const i=o;var a,l;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/pomelo/Desktop/github/GraphInsight/packages/gi-assets-algorithm/src/PatternMatch/locale/zh-CN.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},608:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},942:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function l(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||o,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var c=Array.isArray(n);return c===Array.isArray(e)?c?s.arrayMerge(e,n,s):function(e,t,n){var o={};return n.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}(e,n,s):r(n,s)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var s=l;e.exports=s},770:t=>{"use strict";t.exports=e},618:e=>{"use strict";e.exports=t},725:e=>{"use strict";e.exports=n},24:e=>{"use strict";e.exports=r},314:e=>{"use strict";e.exports=o},479:e=>{"use strict";e.exports=i},721:e=>{"use strict";e.exports=a},537:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>r})},517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(537);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return l[e](n,n.exports,c),n.loaded=!0,n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{"use strict";c.r(u),c.d(u,{components:()=>Fo});var e=c(565);const t=function(e,t){var n=e.nodes,r=e.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){i[e.id]=t,o.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=i[n],l=i[r];!a&&0!==a||!l&&0!==l||(o[a][l]=1,t||(o[l][a]=1))})),o};var n=function(e,t){return e===t},r=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}();const o=function(){function e(e){void 0===e&&(e=n),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new r(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new r(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,o=void 0===r?void 0:r;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==n&&this.compare(i.value,n))return i;i=i.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),i=function(){function e(){this.linkedList=new o}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();var a=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));return"target"===n?r.filter((function(t){return t.source===e})).map((function(e){return e.target})):"source"===n?r.filter((function(t){return t.target===e})).map((function(e){return e.source})):r.map((function(t){return t.source===e?t.target:t.source}))},l=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))},s=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};var d=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,o=void 0===r?[]:r,i=[],l={},s={},c={},u=[],d=0,h=function e(t){s[t.id]=d,c[t.id]=d,d+=1,i.push(t),l[t.id]=!0;for(var r=a(t.id,o,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),h=function(o){var i=r[o];if(s[i]||0===s[i])l[i]&&(c[t.id]=Math.min(c[t.id],s[i]));else{var a=n.filter((function(e){return e.id===i}));a.length>0&&e(a[0]),c[t.id]=Math.min(c[t.id],c[i])}},f=0;f<r.length;f++)h(f);if(c[t.id]===s[t.id]){for(var p=[];i.length>0;){var v=i.pop();if(l[v.id]=!1,p.push(v),v===t)break}p.length>0&&u.push(p)}},f=0,p=n;f<p.length;f++){var v=p[f];s[v.id]||0===s[v.id]||h(v)}return u};function h(e,t){return t?d(e):function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,o=void 0===r?[]:r,i=[],l={},s=[],c=function e(t){s.push(t),l[t.id]=!0;for(var r=a(t.id,o),i=function(t){var o=r[t];if(!l[o]){var i=n.filter((function(e){return e.id===o}));i.length>0&&e(i[0])}},c=0;c<r.length;++c)i(c)},u=0;u<n.length;u++){var d=n[u];if(!l[d.id]){c(d);for(var h=[];s.length>0;)h.push(s.pop());i.push(h)}}return i}(e)}var f=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,o=e.edges,i=void 0===o?[]:o;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),i.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t};const p=f;function v(e,t,n,r){r.enter({current:t,previous:n});var o=e.edges;a(t,void 0===o?[]:o,"target").forEach((function(o){r.allowTraversal({previous:n,current:t,next:o})&&v(e,o,t,r)})),r.leave({current:t,previous:n})}function g(e,t,n){v(e,t,"",function(e){void 0===e&&(e={});var t,n=e,r=function(){},o=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||o,n.enter=e.enter||r,n.leave=e.leave||r,n}(n))}var m=function(e,t,n){var r,o;void 0===n&&(n=!0);for(var i=[],l=0,s=h(e,!1);l<s.length;l++){var c=s[l];if(c.length)for(var u=c[0],d=u.id,f=[u],p=((r={})[d]=u,r),v=((o={})[d]=new Set,o);f.length>0;)for(var g=f.pop(),m=g.id,y=a(m,e.edges),b=function(r){var o,a=y[r],l=e.nodes.find((function(e){return e.id===a}));if(a===m)i.push(((o={})[a]=g,o));else if(a in v){if(!v[m].has(l)){for(var s=!0,c=[l,g],u=p[m];v[a].size&&!v[a].has(u)&&(c.push(u),u!==p[u.id]);)u=p[u.id];if(c.push(u),t&&n?(s=!1,c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(s=!0)):t&&!n&&c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(s=!1),s){for(var d={},h=1;h<c.length;h+=1)d[c[h-1].id]=c[h];c.length&&(d[c[c.length-1].id]=c[0]),i.push(d)}v[a].add(g)}}else p[a]=g,f.push(l),v[a]=new Set([g])},C=0;C<y.length;C+=1)b(C)}return i},y=function(e,t,n){void 0===n&&(n=!0);for(var r=[],o=new Set,i=[],l=[],s={},c={},u=function e(a,c,u){var d=!1;if(t&&!1===n&&t.indexOf(a.id)>-1)return d;r.push(a),o.add(a);for(var h=u[a.id],f=0;f<h.length;f+=1)if((g=s[h[f]])===c){for(var p={},v=1;v<r.length;v+=1)p[r[v-1].id]=r[v];r.length&&(p[r[r.length-1].id]=r[0]),l.push(p),d=!0}else o.has(g)||e(g,c,u)&&(d=!0);if(d)!function(e){for(var t=[e];t.length>0;){var n=t.pop();o.has(n)&&(o.delete(n),i[n.id].forEach((function(e){t.push(e)})),i[n.id].clear())}}(a);else for(f=0;f<h.length;f+=1){var g=s[h[f]];i[g.id].has(a)||i[g.id].add(a)}return r.pop(),d},h=e.nodes,f=void 0===h?[]:h,p=0;p<f.length;p+=1){var v=f[p],g=v.id;c[g]=p,s[p]=v}if(t&&n){var m=function(e){var n=t[e];c[f[e].id]=c[n],c[n]=0,s[0]=f.find((function(e){return e.id===n})),s[c[f[e].id]]=f[e]};for(p=0;p<t.length;p++)m(p)}for(var y=function(r){for(var o,i,s=1/0,u=0;u<r.length;u+=1)for(var d=r[u],h=0;h<d.length;h++){var f=c[d[h].id];f<s&&(s=f,i=u)}var p=r[i],v=[];for(u=0;u<p.length;u+=1){var g=p[u];v[g.id]=[];for(var m=0,y=a(g.id,e.edges,"target").filter((function(e){return p.map((function(e){return e.id})).indexOf(e)>-1}));m<y.length;m++){var b=y[m];b!==g.id||!1===n&&t.indexOf(g.id)>-1?v[g.id].push(c[b]):l.push(((o={})[g.id]=g,o))}}return{component:p,adjList:v,minIdx:s}},b=0;b<f.length;){var C=f.filter((function(e){return c[e.id]>=b})),w=d({nodes:C,edges:e.edges}).filter((function(e){return e.length>1}));if(0===w.length)break;var x=y(w),E=x.minIdx,S=x.adjList,L=x.component;if(!(L.length>1))break;L.forEach((function(e){i[e.id]=new Set}));var O=s[E];if(t&&n&&-1===t.indexOf(O.id))return l;u(O,O,S),b=E+1}return l},b=function(e,t,n,r){return void 0===r&&(r=!0),t?y(e,n,r):m(e,n,r)};const C=function(e){var t=null,n=e.nodes,r={},o={},i={},a={};(void 0===n?[]:n).forEach((function(e){o[e.id]=e}));for(var l={enter:function(e){var n=e.current,a=e.previous;if(i[n]){t={};for(var l=n,s=a;s!==n;)t[l]=s,l=s,s=r[s];t[l]=s}else i[n]=n,delete o[n],r[n]=a},leave:function(e){var t=e.current;a[t]=t,delete i[t]},allowTraversal:function(e){var n=e.next;return!t&&!a[n]}};Object.keys(o).length;)g(e,Object.keys(o)[0],l);return t};function w(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var x={}.toString;const E=function(e,t){return x.call(e)==="[object "+t+"]"},S=function(e){return E(e,"Function")},L=function(e){return Array.isArray?Array.isArray(e):E(e,"Array")};Object.keys;var O=Array.prototype;O.splice,O.indexOf,Array.prototype.splice;const I=function(e){return E(e,"String")};function _(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];t.has(i)||(n.push(i),t.set(i,!0))}return n}Object.prototype.hasOwnProperty;Number.isInteger&&Number.isInteger,Math.PI,parseInt,Math.PI;const T=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return function(e,t){var n,r;if(e)if(L(e))for(var o=0,i=e.length;o<i&&!1!==t(e[o],o);o++);else if(r=typeof(n=e),null!==n&&"object"===r||"function"===r)for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}(e,(function(n,r){S(e)&&"prototype"===r||t.push(n)})),t};Object.prototype;var A=function(e){if("object"!=typeof e||null===e)return e;var t;if(L(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=A(e[n]):t[n]=e[n]}else for(var o in t={},e)"object"==typeof e[o]&&null!=e[o]?t[o]=A(e[o]):t[o]=e[o];return t};const M=A;Object.prototype.hasOwnProperty;const N=function(e){return"object"==typeof e&&null!==e},R=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)};var D=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(I(e)||I(t))return!1;if(R(e)||R(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=D(e[r],t[r]));r++);return n}if(N(e)||N(t)){var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(n=!0,r=0;r<o.length&&(n=D(e[o[r]],t[o[r]]));r++);return n}return!1};const k=D;var B;Object.prototype.hasOwnProperty,function(e,t){if(!S(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var l=e.apply(this,r);return a.set(i,l),l};n.cache=new Map}((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return B||(B=document.createElement("canvas").getContext("2d")),B.font=[i,a,o,n+"px",r].join(" "),B.measureText(I(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,o++)r[o]=i[a];return r}([e],T(t)).join("")})),function(){function e(){this.map={}}e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length}}();const P=function(e,t,n,r){var o=e.nodes,i=void 0===o?[]:o,a=e.edges,s=void 0===a?[]:a,c=[],u={},d={},h={};i.forEach((function(e,n){var r=e.id;c.push(r),d[r]=1/0,r===t&&(d[r]=0)}));for(var f=i.length,p=function(e){var t=function(e,t,n){for(var r,o=1/0,i=0;i<t.length;i++){var a=t[i].id;!n[a]&&e[a]<=o&&(o=e[a],r=t[i])}return r}(d,i,u),o=t.id;if(u[o]=!0,d[o]===1/0)return"continue";var a=[];a=n?function(e,t){return t.filter((function(t){return t.source===e}))}(o,s):l(o,s),a.forEach((function(e){var n=e.target,i=e.source,a=n===o?i:n,l=r&&e[r]?e[r]:1;d[a]>d[t.id]+l?(d[a]=d[t.id]+l,h[a]=[t.id]):d[a]===d[t.id]+l&&h[a].push(t.id)}))},v=0;v<f;v++)p();h[t]=[t];var g={};for(var m in d)d[m]!==1/0&&F(t,m,h,g);var y={};for(var m in g)y[m]=g[m][0];return{length:d,path:y,allPath:g}};function F(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var o=[],i=0,a=n[t];i<a.length;i++){var l=F(e,a[i],n,r);if(!l)return;for(var s=0,c=l;s<c.length;s++){var u=c[s];L(u)?o.push(w(w([],u,!0),[t],!1)):o.push([u,t])}}return r[t]=o,r[t]}const j=function(e,n){for(var r=t(e,n),o=[],i=r.length,a=0;a<i;a+=1){o[a]=[];for(var l=0;l<i;l+=1)a===l?o[a][l]=0:0!==r[a][l]&&r[a][l]?o[a][l]=r[a][l]:o[a][l]=1/0}for(var s=0;s<i;s+=1)for(a=0;a<i;a+=1)for(l=0;l<i;l+=1)o[a][l]>o[a][s]+o[s][l]&&(o[a][l]=o[a][s]+o[s][l]);return o};var z=function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+r[i];return new e(o)}},e.prototype.subtract=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-r[i];return new e(o)}},e.prototype.avg=function(t){var n=[];if(0!==t)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=Math.pow(this.arr[o]-e.arr[o],2);return r}},e.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=Math.pow(this.arr[o]-e.arr[o],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},e.prototype.normalize=function(){var t=[],n=M(this.arr);n.sort((function(e,t){return e-t}));var r=n[n.length-1],o=n[0];for(var i in this.arr)t[i]=(this.arr[i]-o)/(r-o);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=this.arr[o]*e.arr[o];return r}console.error("The two vectors are unequal in length.")},e.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},e}();const G=z;var H,W=function(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach((function(e){void 0===t&&n.push(e),void 0!==e[t]&&n.push(e[t])})),n};!function(e){e.EuclideanDistance="euclideanDistance"}(H||(H={}));var U=function(e,t,n){var r=function(e,t,n){var r=[];(null==t?void 0:t.length)?r=t:(e.forEach((function(e){r=r.concat(Object.keys(e))})),r=_(r));var o={};return r.forEach((function(t){var r=[];e.forEach((function(e){void 0!==e[t]&&""!==e[t]&&r.push(e[t])})),r.length&&!(null==n?void 0:n.includes(t))&&(o[t]=_(r))})),o}(e,t,n),o=[];if(!Object.keys(r).length)return o;var i=Object.values(r).every((function(e){return e.every((function(e){return"number"==typeof e}))}));return e.forEach((function(e,t){var n=[];Object.keys(r).forEach((function(t){var o=e[t],a=r[t],l=a.findIndex((function(e){return o===e})),s=[];if(i)s.push(o);else for(var c=0;c<a.length;c++)c===l?s.push(1):s.push(0);n=n.concat(s)})),o[t]=n})),o},V=function(e,t,n,r){void 0===n&&(n=H.EuclideanDistance);var o=0;return n===H.EuclideanDistance&&(o=new G(e).euclideanDistance(new G(t))),o},Y=function(e,t,n,r){for(var o=t.length,i=2*r,a=0,l=0;l<o;l++)for(var s=e[l].clusterId,c=0;c<o;c++)s===e[c].clusterId&&(a+=(t[l][c]||0)-(n[l]||0)*(n[c]||0)/i);return a*(1/i)},$=function(e,t){void 0===e&&(e=[]);for(var n=e.length,r=new G([]),o=0;o<n;o++)r=r.add(new G(t[o]));var i=r.avg(n);i.normalize();var a=0;for(o=0;o<n;o++)a+=(s=new G(t[o])).squareEuclideanDistance(i);var l=[];for(e.forEach((function(){l.push([])})),o=0;o<n;o++){var s=new G(t[o]);e[o].clusterInertial=0;for(var c=0;c<n;c++)if(o!==c){var u=new G(t[c]);l[o][c]=s.squareEuclideanDistance(u),e[o].clusterInertial+=l[o][c]}else l[o][c]=0}var d=0,h=2*n*a;for(o=0;o<n;o++){var f=e[o].clusterId;for(c=0;c<n;c++){var p=e[c].clusterId;o!==c&&f===p&&(d+=e[o].clusterInertial*e[c].clusterInertial/Math.pow(h,2)-l[o][c]/h)}}return Number(d.toFixed(4))};const X=function(e,n,r,o,i,a,l,s,c){void 0===n&&(n=!1),void 0===r&&(r="weight"),void 0===o&&(o=1e-4),void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===l&&(l=[]),void 0===s&&(s=["id"]),void 0===c&&(c=1);var u=e.nodes,d=void 0===u?[]:u,h=e.edges,f=void 0===h?[]:h,p=[];if(i){d.forEach((function(e,t){e.properties=e.properties||{},e.originIndex=t}));var v=[];d.every((function(e){return e.hasOwnProperty("nodeType")}))&&(v=Array.from(new Set(d.map((function(e){return e.nodeType})))),d.forEach((function(e){e.properties.nodeType=v.findIndex((function(t){return t===e.nodeType}))})));var g=W(d,a);p=U(g,l,s)}var m=1,y={},b={};d.forEach((function(e,t){var n=String(m++);e.clusterId=n,y[n]={id:n,nodes:[e]},b[e.id]={node:e,idx:t}}));var C=t(e,n),w=[],x={},E=0;C.forEach((function(e,t){var n=0,r=d[t].id;x[r]={},e.forEach((function(e,t){if(e){n+=e;var o=d[t].id;x[r][o]=e,E+=e}})),w.push(n)})),E/=2;for(var S=1/0,L=1/0,O=0,I=[],_={};;){S=i&&d.every((function(e){return e.hasOwnProperty("properties")}))?Y(d,C,w,E)+$(d,p)*c:Y(d,C,w,E),0===O&&(L=S,I=d,_=y);var T=S>0&&S>L&&S-L<o;if(S>L&&(I=d.map((function(e){return{node:e,clusterId:e.clusterId}})),_=M(y),L=S),T||O>100)break;O++,Object.keys(y).forEach((function(e){var t=0;f.forEach((function(n){var o=n.source,i=n.target,a=b[o].node.clusterId,l=b[i].node.clusterId;(a===e&&l!==e||l===e&&a!==e)&&(t+=n[r]||1)})),y[e].sumTot=t})),d.forEach((function(e,t){var n,o=y[e.clusterId],a=0,l=w[t]/(2*E),s=0,u=o.nodes;u.forEach((function(e){var n=b[e.id].idx;s+=C[t][n]||0}));var d=s-o.sumTot*l,h=u.filter((function(t){return t.id!==e.id})),v=[];h.forEach((function(e,t){v[t]=p[e.originIndex]}));var g=$(h,p)*c,m=x[e.id];if(Object.keys(m).forEach((function(r){var o=b[r].node.clusterId;if(o!==e.clusterId){var s=y[o],u=s.nodes;if(u&&u.length){var h=0;u.forEach((function(e){var n=b[e.id].idx;h+=C[t][n]||0}));var f=h-s.sumTot*l,v=u.concat([e]),m=[];v.forEach((function(e,t){m[t]=p[e.originIndex]}));var w=$(v,p)*c,x=f-d;i&&(x=f+w-(d+g)),x>a&&(a=x,n=s)}}})),a>0){n.nodes.push(e);var S=e.clusterId;e.clusterId=n.id;var L=o.nodes.indexOf(e);o.nodes.splice(L,1);var O=0,I=0;f.forEach((function(e){var t=e.source,o=e.target,i=b[t].node.clusterId,a=b[o].node.clusterId;(i===n.id&&a!==n.id||a===n.id&&i!==n.id)&&(O+=e[r]||1),(i===S&&a!==S||a===S&&i!==S)&&(I+=e[r]||1)})),n.sumTot=O,o.sumTot=I}}))}var A={},N=0;Object.keys(_).forEach((function(e){var t=_[e];if(t.nodes&&t.nodes.length){var n=String(N+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),_[n]=t,A[e]=n,delete _[e],N++)}else delete _[e]})),I.forEach((function(e){var t=e.node,n=e.clusterId;t&&(t.clusterId=n,t.clusterId&&A[t.clusterId]&&(t.clusterId=A[t.clusterId]))}));var R=[],D={};f.forEach((function(e){var t=e.source,n=e.target,o=e[r]||1,i=b[t].node.clusterId,a=b[n].node.clusterId;if(i&&a){var l="".concat(i,"---").concat(a);if(D[l])D[l].weight+=o,D[l].count++;else{var s={source:i,target:a,weight:o,count:1};D[l]=s,R.push(s)}}}));var k=[];return Object.keys(_).forEach((function(e){k.push(_[e])})),{clusters:k,clusterEdges:R}},q=function(e,t,n,r,o,i,a,l){return void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===o&&(o=void 0),void 0===i&&(i=[]),void 0===a&&(a=["id"]),void 0===l&&(l=1),X(e,t,n,r,!0,o,i,a,l)},K=function(e,t){var n;void 0===t&&(t=1);for(var r=M(e),o=r.nodes,i=void 0===o?[]:o,a=r.edges,l=void 0===a?[]:a,s=function(){var e=p({nodes:i,edges:l}),r=Object.keys(e);r.sort((function(t,n){var r,o;return(null===(r=e[t])||void 0===r?void 0:r.degree)-(null===(o=e[n])||void 0===o?void 0:o.degree)}));var o=r[0];if(!i.length||(null===(n=e[o])||void 0===n?void 0:n.degree)>=t)return"break";var a=i.findIndex((function(e){return e.id===o}));i.splice(a,1),l=l.filter((function(e){return!(e.source===o||e.target===o)}))};"break"!==s(););return{nodes:i,edges:l}};var Z=function(e,t,n){return e===H.EuclideanDistance?t[n]:[]};const Q=function(e,t,n,r,o,i){void 0===t&&(t=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=["id"]),void 0===i&&(i=H.EuclideanDistance);var a=e.nodes,l=void 0===a?[]:a,s=e.edges,c=void 0===s?[]:s,u={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(i===H.EuclideanDistance&&!l.every((function(e){return e.hasOwnProperty(n)})))return u;var d=[],h=[];if(i===H.EuclideanDistance&&(d=W(l,n),h=U(d,r,o)),!h.length)return u;for(var f=_(h.map((function(e){return e.join("")}))),p=Math.min(t,l.length,f.length),v=0;v<l.length;v++)l[v].originIndex=v;var g=[],m=[],y=[];for(v=0;v<p;v++)if(0===v){var b=Math.floor(Math.random()*l.length);i===H.EuclideanDistance?g[v]=h[b]:g[v]=[],m.push(b),y[v]=[l[b]],l[b].clusterId=String(v)}else{for(var C=-1/0,w=0,x=function(e){if(!m.includes(e)){for(var t=0,n=0;n<g.length;n++){var r=0;i===H.EuclideanDistance&&(r=V(h[l[e].originIndex],g[n],i)),t+=r}var o=t/g.length;o>C&&!g.find((function(t){return k(t,Z(i,h,l[e].originIndex))}))&&(C=o,w=e)}},E=0;E<l.length;E++)x(E);g[v]=Z(i,h,w),m.push(w),y[v]=[l[w]],l[w].clusterId=String(v)}for(var S=0;;){for(v=0;v<l.length;v++){var L=0,O=1/0;if(0!==S||!m.includes(v)){for(var I=0;I<g.length;I++){var T=0;i===H.EuclideanDistance&&(T=V(h[v],g[I],i)),T<O&&(O=T,L=I)}if(void 0!==l[v].clusterId)for(var A=y[Number(l[v].clusterId)].length-1;A>=0;A--)y[Number(l[v].clusterId)][A].id===l[v].id&&y[Number(l[v].clusterId)].splice(A,1);l[v].clusterId=String(L),y[L].push(l[v])}}var M=!1;for(v=0;v<y.length;v++){var N=y[v],R=new G([]);for(I=0;I<N.length;I++)R=R.add(new G(h[N[I].originIndex]));var D=R.avg(N.length);D.equal(new G(g[v]))||(M=!0,g[v]=D.getArr())}if(S++,l.every((function(e){return void 0!==e.clusterId}))&&M||S>=1e3)break}var B=[],P={};return c.forEach((function(e){var t,n,r=e.source,o=e.target,i=null===(t=l.find((function(e){return e.id===r})))||void 0===t?void 0:t.clusterId,a=null===(n=l.find((function(e){return e.id===o})))||void 0===n?void 0:n.clusterId,s="".concat(i,"---").concat(a);if(P[s])P[s].count++;else{var c={source:i,target:a,count:1};P[s]=c,B.push(c)}})),{clusters:y,clusterEdges:B}},J=function(e,t){var n=new G(t),r=n.norm2(),o=new G(e),i=o.norm2(),a=n.dot(o),l=r*i;return l?a/l:0},ee=function(e,t,n,r,o){void 0===e&&(e=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=[]);var i=M(e.filter((function(e){return e.id!==t.id}))),a=e.findIndex((function(e){return e.id===t.id})),l=W(e,n),s=U(l,r,o),c=s[a],u=[];return i.forEach((function(e,n){if(e.id!==t.id){var r=s[n],o=J(r,c);u.push(o),e.cosineSimilarity=o}})),i.sort((function(e,t){return t.cosineSimilarity-e.cosineSimilarity})),{allCosineSimilarity:u,similarNodes:i}};var te=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();const ne=te;var re=function(e,t){return e-t};const oe=function(){function e(e){void 0===e&&(e=re),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),o=this.getRight(e),i=this.list.length;null!==r&&r<i&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==o&&o<i&&this.compareFn(this.list[n],this.list[o])>0&&(n=o),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}();var ie=function(e,t){var n=[],r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return n;var s=o[0],c=new Set;c.add(s);var u=new oe((function(e,n){return t?e.weight-n.weight:0}));for(l(s.id,a).forEach((function(e){u.insert(e)}));!u.isEmpty();){var d=u.delMin(),h=d.source,f=d.target;c.has(h)&&c.has(f)||(n.push(d),c.has(h)||(c.add(h),l(h,a).forEach((function(e){u.insert(e)}))),c.has(f)||(c.add(f),l(f,a).forEach((function(e){u.insert(e)}))))}return n},ae=function(e,t){var n=[],r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return n;var l=a.map((function(e){return e}));t&&l.sort((function(e,t){return e.weight-t.weight}));for(var s=new ne(o.map((function(e){return e.id})));l.length>0;){var c=l.shift(),u=c.source,d=c.target;s.connected(u,d)||(n.push(c),s.union(u,d))}return n};var le="-1",se=function(e,t,n,r){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e,this.from=t,this.to=n,this.label=r},ce=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=le),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),ue=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new ce(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var o=new se(e,t,n,r);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),!this.directed){var i=new se(e,n,t,r);this.nodeMap[n].addEdge(i),this.edgeLabelMap[r].push(i)}}},e}(),de=function(){function e(e,t,n,r,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||le,edgeLabel:r||"-1",nodeLabel2:o||le}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),he=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,o){return this.dfsEdgeList.push(new de(e,t,n,r,o)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var n=new ue(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,o=e.nodeEdgeNodeLabel,i=o.nodeLabel1,a=o.edgeLabel,l=o.nodeLabel2;i!==le&&n.addNode(t,i),l!==le&&n.addNode(r,l),i!==le&&l!==i&&n.addEdge(void 0,t,r,a)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,o=n.toNode;r<o&&(void 0===e||o===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),fe=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),pe=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,o=e.minNodeNum,i=void 0===o?1:o,a=e.maxNodeNum,l=void 0===a?4:a,s=e.top,c=void 0===s?10:s,u=e.directed,d=void 0!==u&&u,h=e.verbose,f=void 0!==h&&h;this.graphs=t,this.dfsCode=new he,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=l,this.minNodeNum=i,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],o=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=o[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var o=e.nodeMap,i=o[n.to].edges,a=i.length,l=0;l<a;l++){var s=i[l];if(!r.hasEdge(s)&&s.to===t.from)if(this.directed){if(o[t.from].label<o[n.to].label||o[t.from].label===o[n.to].label&&t.label<=s.label)return s}else if(t.label<s.label||t.label===s.label&&o[t.to].label<=o[n.to].label)return s}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var o=[],i=t.to,a=e.nodeMap[i].edges,l=a.length,s=0;s<l;s++){var c=a[s],u=e.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&o.push(c)}return o},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var o=[],i=e.nodeMap,a=i[t.to].label,l=i[t.from].edges,s=l.length,c=0;c<s;c++){var u=l[c],d=i[u.to].label;t.to===u.to||n>d||r.hasNode(i[u.to])||(t.label<u.label||t.label===u.label&&a<=d)&&o.push(u)}return o},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],o=r.nodeLabel1,i=r.edgeLabel,a=r.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&i<t.edgeLabel||o===t.nodeLabel1&&i===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(-1,n),o=r.nodeMap,i=new he,a={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=o[e.to],i="".concat(t.label,"-").concat(e.label,"-").concat(n.label);a[i]||(a[i]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var l={graphId:r.id,edge:e,preNode:null};a[i].projected.push(l)}))}));var l=this.findMinLabel(a);if(l){i.dfsEdgeList.push(new de(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var s="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return function a(l){for(var s=i.buildRmpath(),c=i.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=i.dfsEdgeList[s[0]].toNode,d={},h=!1,f=0,p=n?-1:0,v=function(t){if(h)return"break";l.forEach((function(n){var o=new fe(n),a=e.findBackwardEdge(r,o.edges[s[t]],o.edges[s[0]],o);a&&(d[a.label]||(d[a.label]={projected:[],edgeLabel:a.label}),d[a.label].projected.push({graphId:r.id,edge:d,preNode:n}),f=i.dfsEdgeList[s[t]].fromNode,h=!0)}))},g=s.length-1;g>p&&"break"!==v(g);g--);if(h){var m=e.findMinLabel(d);i.dfsEdgeList.push(new de(u,f,le,m.edgeLabel,le));var y=i.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===i.dfsEdgeList[y]&&a(d[m.edgeLabel].projected)}var b={};h=!1;var C=0;l.forEach((function(t){var n=new fe(t),i=e.findForwardPureEdges(r,n.edges[s[0]],c,n);i.length>0&&(h=!0,C=u,i.forEach((function(e){var n="".concat(e.label,"-").concat(o[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var w=s.length,x=function(t){if(h)return"break";var n=s[t];l.forEach((function(t){var a=new fe(t),l=e.findForwardRmpathEdges(r,a.edges[n],c,a);l.length>0&&(h=!0,C=i.dfsEdgeList[n].fromNode,l.forEach((function(e){var n="".concat(e.label,"-").concat(o[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(g=0;g<w&&"break"!==x(g);g++);if(!h)return!0;var E=e.findMinLabel(b);i.dfsEdgeList.push(new de(C,u+1,le,E.edgeLabel,E.nodeLabel2));var S=i.dfsEdgeList.length-1;return t.dfsEdgeList[S]===i.dfsEdgeList[S]&&a(b["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(a[s].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(M(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[r[0]].toNode,i=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},l={};e.forEach((function(e){for(var s=t.graphs[e.graphId],c=s.nodeMap,u=new fe(e),d=r.length-1;d>=0;d--){var h=t.findBackwardEdge(s,u.edges[r[d]],u.edges[r[0]],u);if(h){var f="".concat(t.dfsCode.dfsEdgeList[r[d]].fromNode,"-").concat(h.label);l[f]||(l[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:h.label}),l[f].projected.push({graphId:e.graphId,edge:h,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(s,u.edges[r[0]],i,u).forEach((function(t){var n="".concat(o,"-").concat(t.label,"-").concat(c[t.to].label);a[n]||(a[n]={projected:[],fromNodeId:o,edgeLabel:t.label,nodeLabel2:c[t.to].label}),a[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(s,u.edges[r[n]],i,u).forEach((function(o){var i="".concat(t.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(o.label,"-").concat(c[o.to].label);a[i]||(a[i]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:o.label,nodeLabel2:c[o.to].label}),a[i].projected.push({graphId:e.graphId,edge:o,preNode:e})}))};for(d=0;d<r.length;d++)p(d)}})),Object.keys(l).forEach((function(e){var n=l[e],r=n.toNodeId,i=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new de(o,r,"-1",i,"-1")),t.subGraphMining(l[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var n=a[e],r=n.fromNodeId,i=n.edgeLabel,l=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new de(r,o+1,le,i,l)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,o={},i={},a={},l={};return Object.keys(e).forEach((function(n){var r=e[n],s=r.nodeMap;r.nodes.forEach((function(e,r){var c=e.label,u="".concat(n,"-").concat(c);if(!a[u]){var d=o[c]||0;d++,o[c]=d}a[u]={graphKey:n,label:c},e.edges.forEach((function(e){var r=c,o=s[e.to].label;if(!t&&r>o){var a=o;o=r,r=a}var u=e.label,d="".concat(n,"-").concat(r,"-").concat(u,"-").concat(o),h="".concat(r,"-").concat(u,"-").concat(o);if(!i[h]){var f=i[h]||0;f++,i[h]=f}l[d]={graphId:n,nodeLabel1:r,edgeLabel:u,nodeLabel2:o}}))}))})),Object.keys(o).forEach((function(e){if(!(o[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,n=(this.directed,{});Object.keys(t).forEach((function(r){var o=t[r],i=o.nodeMap;o.nodes.forEach((function(t){e.findForwardRootEdges(o,t).forEach((function(e){var o=i[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(o.label);n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:o.label});var l={graphId:r,edge:e,preNode:null};n[a].projected.push(l)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],o=r.projected,i=r.nodeLabel1,a=r.edgeLabel,l=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new de(0,1,i,a,l)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()}))}},e}(),ve="cluster";var ge=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var o=[],i=e.nodes;return t.forEach((function(e,t){o.push(me(i,e,t,n,r))})),o},me=function(e,t,n,r,o){var i=[n],a=[],l={};return t.forEach((function(t,s){if(t<=o&&n!==s){i.push(s),a.push(e[s]);var c=e[s][r];l[c]?(l[c].count++,l[c].dists.push(t)):l[c]={count:1,dists:[t]}}})),Object.keys(l).forEach((function(e){l[e].dists=l[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:l}},ye=function(e,t,n,r){var o=n.nodes;return r||(r={}),Object.keys(e).forEach((function(i){var a,l;if(!r||!r[i]){r[i]={nodes:[],edges:[]};var s=e[i],c=null===(a=t[s.start])||void 0===a?void 0:a.nodeIdxs,u=null===(l=t[s.end])||void 0===l?void 0:l.nodeIdxs;if(c&&u){var d=new Set(u),h=c.filter((function(e){return d.has(e)}));if(h&&h.length){for(var f={},p=h.length,v=0;v<p;v++){var g=o[h[v]];r[i].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[i].edges.push(e)}))}}}})),r},be=function(e,t,n,r){var o,i,a={};e.nodes.forEach((function(e){a[e.id]=e}));var l=0;return!(null===(o=null==t?void 0:t.edges)||void 0===o?void 0:o.length)||(null===(i=null==t?void 0:t.nodes)||void 0===i?void 0:i.length)<2?0:(e.edges.forEach((function(e){var o=a[e.source][n],i=a[e.target][n],s=null==t?void 0:t.nodes[0][n],c=null==t?void 0:t.nodes[1][n],u=null==t?void 0:t.edges[0][r];e[r]===u&&(o===s&&i===c||o===c&&i===s)&&l++})),l)},Ce=function(e,t){var n={},r={};return e.forEach((function(e,o){n[e.id]={idx:o,node:e,degree:0,inDegree:0,outDegree:0};var i=e[t];r[i]||(r[i]=[]),r[i].push(e)})),{nodeMap:n,nodeLabelMap:r}},we=function(e,t,n){var r={},o={};return e.forEach((function(e,i){r["".concat(s)]={idx:i,edge:e};var a=e[t];o[a]||(o[a]=[]),o[a].push(e);var l=n[e.source];l&&(l.degree++,l.outDegree++);var c=n[e.target];c&&(c.degree++,c.inDegree++)})),{edgeMap:r,edgeLabelMap:o}},xe=function(e,t,n){var r=t.length,o={};return t.forEach((function(t,i){for(var a=n?0:i+1,l=e[i].id,s=a;s<r;s++)if(i!==s){var c=e[s].id,u=t[s];o["".concat(l,"-").concat(c)]=u,n||(o["".concat(c,"-").concat(l)]=u)}})),o},Ee=function(e,t,n,r,o,i,a,l,s,c,u){var d,h="".concat(t.id,"-").concat(n.id);if(c&&c[h])return c[h];var f=u?u[h]:void 0;if(!f){var p=((d={})[h]={start:r[t.id].idx,end:r[n.id].idx,distance:o},d);f=(u=ye(p,i,e,u))[h]}return be(f,a,l,s)},Se=function(e,t,n,r){var o,i,a,l=null===(o=e[t])||void 0===o?void 0:o.degree,s=null===(i=e[t])||void 0===i?void 0:i.inDegree,c=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(l=1/0,s=1/0,c=1/0,r[t].forEach((function(e){var t=n[e.id].degree;l>t&&(l=t);var r=n[e.id].inDegree;s>r&&(s=r);var o=n[e.id].outDegree;c>o&&(c=o)})),e[t]={degree:l,inDegree:s,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:s,minPatternNodeLabelOutDegree:c}};var Le=function(){function e(e){void 0===e&&(e=10),this.linkedList=new o,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();const Oe={getAdjMatrix:t,breadthFirstSearch:function(e,t,n,r){void 0===r&&(r=!0);var o=function(e){void 0===e&&(e={});var t,n=e,r=function(){},o=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||o,n.enter=e.enter||r,n.leave=e.leave||r,n}(n),l=new i,s=e.edges,c=void 0===s?[]:s;l.enqueue(t);for(var u="",d=function(){var e=l.dequeue();o.enter({current:e,previous:u}),a(e,c,r?"target":void 0).forEach((function(t){o.allowTraversal({previous:u,current:e,next:t})&&l.enqueue(t)})),o.leave({current:e,previous:u}),u=e};!l.isEmpty();)d()},connectedComponent:h,getDegree:p,getInDegree:function(e,t){return f(e)[t]?f(e)[t].inDegree:0},getOutDegree:function(e,t){return f(e)[t]?f(e)[t].outDegree:0},detectCycle:C,detectDirectedCycle:C,detectAllCycles:b,detectAllDirectedCycle:y,detectAllUndirectedCycle:m,depthFirstSearch:g,dijkstra:P,findAllPath:function(e,t,n,r){var o;if(t===n)return[[t]];var i=e.edges,l=void 0===i?[]:i,s=[t],c=((o={})[t]=!0,o),u=[],d=[],h=r?a(t,l,"target"):a(t,l);for(u.push(h);s.length>0&&u.length>0;){var f=u[u.length-1];if(f.length){var p=f.shift();if(p&&(s.push(p),c[p]=!0,h=r?a(p,l,"target"):a(p,l),u.push(h.filter((function(e){return!c[e]})))),s[s.length-1]===n){var v=s.map((function(e){return e}));d.push(v),g=s.pop(),c[g]=!1,u.pop()}}else{var g=s.pop();c[g]=!1,u.pop()}}return d},findShortestPath:function(e,t,n,r,o){var i=P(e,t,r,o),a=i.length,l=i.path,s=i.allPath;return{length:a[n],path:l[n],allPath:s[n]}},floydWarshall:j,labelPropagation:function(e,n,r,o){void 0===n&&(n=!1),void 0===r&&(r="weight"),void 0===o&&(o=1e3);var i=e.nodes,a=void 0===i?[]:i,l=e.edges,c=void 0===l?[]:l,u={},d={};a.forEach((function(e,t){var n=s();e.clusterId=n,u[n]={id:n,nodes:[e]},d[e.id]={node:e,idx:t}}));var h=t(e,n),f=[],p={};h.forEach((function(e,t){var n=0,r=a[t].id;p[r]={},e.forEach((function(e,t){if(e){n+=e;var o=a[t].id;p[r][o]=e}})),f.push(n)}));for(var v=0,g=function(){var e=!1;if(a.forEach((function(t){var n={};Object.keys(p[t.id]).forEach((function(e){var r=p[t.id][e],o=d[e].node.clusterId;n[o]||(n[o]=0),n[o]+=r}));var r=-1/0,o=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],o=[e]):r===n[e]&&o.push(e)})),1!==o.length||o[0]!==t.clusterId){var i=o.indexOf(t.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){e=!0;var a=u[t.clusterId],l=a.nodes.indexOf(t);a.nodes.splice(l,1);var s=Math.floor(Math.random()*o.length),c=u[o[s]];c.nodes.push(t),t.clusterId=c.id}}})),!e)return"break";v++};v<o&&"break"!==g(););Object.keys(u).forEach((function(e){var t=u[e];t.nodes&&t.nodes.length||delete u[e]}));var m=[],y={};c.forEach((function(e){var t=e.source,n=e.target,o=e[r]||1,i=d[t].node.clusterId,a=d[n].node.clusterId,l="".concat(i,"---").concat(a);if(y[l])y[l].weight+=o,y[l].count++;else{var s={source:i,target:a,weight:o,count:1};y[l]=s,m.push(s)}}));var b=[];return Object.keys(u).forEach((function(e){b.push(u[e])})),{clusters:b,clusterEdges:m}},louvain:X,iLouvain:q,kCore:K,kMeans:Q,cosineSimilarity:J,nodesCosineSimilarity:ee,minimumSpanningTree:function(e,t,n){return n?{prim:ie,kruskal:ae}[n](e,t):ae(e,t)},pageRank:function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,o=1,i=0,l=1e3,s=e.nodes,c=void 0===s?[]:s,u=e.edges,d=void 0===u?[]:u,h=c.length,f={},v={},g=0;g<h;++g)f[y=(E=c[g]).id]=1/h,v[y]=1/h;for(var m=p(e);l>0&&o>t;){for(i=0,g=0;g<h;++g){var y=(E=c[g]).id;if(r=0,0===m[E.id].inDegree)f[y]=0;else{for(var b=a(y,d,"source"),C=0;C<b.length;++C){var w=b[C],x=m[w].outDegree;x>0&&(r+=v[w]/x)}f[y]=n*r,i+=f[y]}}for(i=(1-i)/h,o=0,g=0;g<h;++g){var E;r=f[y=(E=c[g]).id]+i,o+=Math.abs(r-v[y]),v[y]=r}l-=1}return v},getNeighbors:a,Stack:Le,GADDI:function(e,t,n,r,o,i,a){var l;if(void 0===n&&(n=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var s=e.nodes.length;if(s){var c=j(e,n),u=j(t,n),d=xe(e.nodes,c,n),h=xe(t.nodes,u,n),f=Ce(e.nodes,i),p=f.nodeMap,v=f.nodeLabelMap,g=Ce(t.nodes,i),m=g.nodeMap,y=g.nodeLabelMap;we(e.edges,a,p);var b=we(t.edges,a,m).edgeLabelMap,C=[];null==u||u.forEach((function(e){C=C.concat(e)})),o||(o=Math.max.apply(Math,w(w([],C,!1),[2],!1))),r||(r=o);var x=ge(e,c,i,r),E=ge(t,u,i,r),S=function(e,t,n,r,o){var i=Math.ceil(n/t),a={},l=0;return r.forEach((function(e,r){for(var s=0,c=0,u=e.nodeIdxs,d=e.neighborNum-1;s<i;){for(var h=u[1+Math.floor(Math.random()*d)],f=0;(a["".concat(r,"-").concat(h)]||a["".concat(h,"-").concat(r)])&&(h=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a["".concat(r,"-").concat(h)]={start:r,end:h,distance:o[r][h]},s++,++l>=n))return a;if(++c>2*t)break}s<i&&(i=(i+(i-s))/(t-r-1))})),a}(0,s,Math.min(100,s*(s-1)/2),x,c),L=ye(S,x,e),O=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,o=e.nodeLabelProp,i=void 0===o?ve:o,a=e.edgeLabelProp,l=void 0===a?ve:a,s=function(e,t,n,r){var o={};return Object.keys(e).forEach((function(i,a){var l=e[i],s=new ue(a,!0,t),c={};l.nodes.forEach((function(e,t){s.addNode(t,e[n]),c[e.id]=t})),l.edges.forEach((function(e,t){var n=c[e.source],o=c[e.target];s.addEdge(-1,n,o,e[r])})),s&&s.getNodeNum()&&(o[s.id]=s)})),o}(t,r,i,l),c=e.minSupport,u=e.maxNodeNum,d=e.minNodeNum,h=e.verbose,f=e.top,p=new pe({graphs:s,minSupport:c,maxNodeNum:u,minNodeNum:d,top:f,verbose:h,directed:r});p.run();var v=function(e,t,n){var r=[];return e.forEach((function(e){var o={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;o.nodes.push(((n={id:"".concat(e.id)})[t]=e.label,n))})),e.edges.forEach((function(e){var t;o.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[n]=e.label,t))})),r.push(o)})),r}(p.frequentSubgraphs,i,l);return v}({graphs:L,nodeLabelProp:i,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),I=O.length,_=[];O.forEach((function(e,t){_[t]={},Object.keys(L).forEach((function(n){var r=L[n],o=be(r,e,i,a);_[t][n]=o}))}));var T=function(e,t,n){for(var r=1/0,o=0,i=function(t){var n=e[t],i=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];i.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var l=0,s=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,s.push(t);var r=0,o=e.length;e.graphs.forEach((function(t,o){var i=n[t];e.graphs.forEach((function(e,t){o!==t&&(r+=Math.abs(i-n[e]))}))})),l+=r/=o*(o-1)/2})),l/=a.length;var c=0;s.forEach((function(e,t){s.forEach((function(n,r){t!==r&&(c+=Math.abs(e-n))})),c/=s.length*(s.length-1)/2}));var u=c-l;r<u&&(r=u,o=t)},a=0;a<t;a++)i(a);return{structure:n[o],structureCountMap:e[o]}}(_,I,O),A=T.structure,M=T.structureCountMap,N=t.nodes[0],R=[],D=null===(l=t.nodes[0])||void 0===l?void 0:l[i],k=-1/0;t.nodes.forEach((function(e){var t=e[i],n=v[t];(null==n?void 0:n.length)>k&&(k=n.length,R=n,D=t,N=e)}));var B={},F={},z={},G={},H={},W={};Object.keys(y).forEach((function(r,o){H[r]=[],n&&(W[r]=[]);var l=-1/0,s=y[r],c={};s.forEach((function(e){var t=h["".concat(N.id,"-").concat(e.id)];if(t&&H[r].push(t),l<t&&(l=t),c["".concat(N.id,"-").concat(e.id)]={start:0,end:m[e.id].idx,distance:t},n){var o=h["".concat(e.id,"-").concat(N.id)];o&&W[r].push(o)}})),H[r]=H[r].sort((function(e,t){return e-t})),n&&(W[r]=W[r].sort((function(e,t){return e-t}))),F=ye(c,E,t,F);var u=[];if(Object.keys(c).forEach((function(e){if(z[e])u.push(z[e]);else{var t=F[e];z[e]=be(t,A,i,a),u.push(z[e])}})),u=u.sort((function(e,t){return t-e})),G["".concat(N.id,"-").concat(r)]=u,r!==D)for(var f=function(t){var n=R[t],o=x[p[n.id].idx],l=o.nodeLabelCountMap[r],s=y[r].length;if(!l||l.count<s)return R.splice(t,1),"continue";for(var c=!1,h=0;h<s;h++)if(l.dists[h]>H[r][h]){c=!0;break}if(c)return R.splice(t,1),"continue";var f={};o.neighbors.forEach((function(e){var t=d["".concat(n.id,"-").concat(e.id)];f["".concat(n.id,"-").concat(e.id)]={start:p[n.id].idx,end:p[e.id].idx,distance:t}})),L=ye(f,x,e,L);var v=[];Object.keys(f).forEach((function(e){if(M[e])v.push(M[e]);else{var t=L[e];M[e]=be(t,A,i,a),v.push(M[e])}})),v=v.sort((function(e,t){return t-e}));var g=!1;for(h=0;h<s;h++)if(v[h]<u[h]){g=!0;break}return g?(R.splice(t,1),"continue"):void 0},v=((null==R?void 0:R.length)||0)-1;v>=0;v--)f(v)}));var U=[];null==R||R.forEach((function(r){for(var l=p[r.id].idx,s=me(e.nodes,c[l],l,i,o).neighbors,u=!1,h=s.length-1;h>=0;h--){if(s.length+1<t.nodes.length)return void(u=!0);var f=s[h],v=f[i];if(y[v]&&y[v].length)if(H[v]&&H[v].length){var g="".concat(r.id,"-").concat(f.id),b=d[g],C=H[v].length-1;if(b>H[v][C])s.splice(h,1);else{if(n){var w="".concat(f.id,"-").concat(r.id),E=d[w];if(C=W[v].length-1,E>W[v][C]){s.splice(h,1);continue}}var S=M[g]?M[g]:Ee(e,r,f,p,b,x,A,i,a,M,L),O="".concat(N.id,"-").concat(v);if(S<G[O][G[O].length-1])s.splice(h,1);else{var I=Se(B,v,m,y),_=I.minPatternNodeLabelDegree;I.minPatternNodeLabelInDegree,I.minPatternNodeLabelOutDegree,p[f.id].degree<_&&s.splice(h,1)}}}else s.splice(h,1);else s.splice(h,1)}u||U.push({nodes:[r].concat(s)})}));var V=P(t,N.id,!1).length,Y={};n?(Object.keys(V).forEach((function(e){var t=m[e].node[i];Y[t]?Y[t].push(V[e]):Y[t]=[V[e]]})),Object.keys(Y).forEach((function(e){Y[e].sort((function(e,t){return e-t}))}))):Y=H;for(var $=function(r){var o=U[r],l=o.nodes[0],s={},c={};o.nodes.forEach((function(e,t){c[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[i];s[n]?s[n]++:s[n]=1}));var u=[],d={};e.edges.forEach((function(e){c[e.source]&&c[e.target]&&(u.push(e),d[e[a]]?d[e[a]]++:d[e[a]]=1,c[e.source].degree++,c[e.target].degree++,c[e.source].outDegree++,c[e.target].inDegree++)}));for(var h=Object.keys(b).length,f=!1,v=0;v<h;v++){var g=Object.keys(b)[v];if(!d[g]||d[g]<b[g].length){f=!0;break}}if(f)return U.splice(r,1),"continue";var C=u.length;if(C<t.edges.length)return U.splice(r,1),"break";var w=!1,x=function(e){var t=u[e],r=t[a],o=b[r];if(!o||!o.length)return d[r]--,o&&d[r]<o.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue");var l=c[t.source].node[i],s=c[t.target].node[i],h=!1;return o.forEach((function(e){var t=m[e.source].node,r=m[e.target].node;t[i]===l&&r[i]===s&&(h=!0),n||t[i]!==s||r[i]!==l||(h=!0)})),h?void 0:(d[r]--,o&&d[r]<o.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue"))};for(v=C-1;v>=0&&"break"!==x(v);v--);if(w)return U.splice(r,1),"continue";o.edges=u;var E=P(o,o.nodes[0].id,!1).length;if(Object.keys(E).reverse().forEach((function(e){if(e!==o.nodes[0].id&&!w){if(E[e]===1/0){var t=c[e].node[i];if(s[t]--,s[t]<y[t].length)return void(w=!0);var n=o.nodes.indexOf(c[e].node);return o.nodes.splice(n,1),void(c[e]=void 0)}var r=p[e].node[i];if(!Y[r]||!Y[r].length||E[e]>Y[r][Y[r].length-1]){if(t=c[e].node[i],s[t]--,s[t]<y[t].length)return void(w=!0);n=o.nodes.indexOf(c[e].node),o.nodes.splice(n,1),c[e]=void 0}}})),w)return U.splice(r,1),"continue";for(var S=!0,L=0;S&&!w;){if(S=!1,n?c[l.id].degree<m[N.id].degree||c[l.id].inDegree<m[N.id].inDegree||c[l.id].outDegree<m[N.id].outDegree:c[l.id].degree<m[N.id].degree){w=!0;break}if(s[l[i]]<y[l[i]].length){w=!0;break}for(var O=o.nodes.length-1;O>=0;O--){var I=o.nodes[O],_=c[I.id].degree,T=c[I.id].inDegree,A=c[I.id].outDegree,M=I[i],R=Se(B,M,m,y),D=R.minPatternNodeLabelDegree,k=R.minPatternNodeLabelInDegree,F=R.minPatternNodeLabelOutDegree;if(n?_<D||T<k||A<F:_<D){if(s[I[i]]--,s[I[i]]<y[I[i]].length){w=!0;break}o.nodes.splice(O,1),c[I.id]=void 0,S=!0}}if(w||!S&&0!==L)break;for(var j=(C=u.length)-1;j>=0;j--){var z=u[j];if(!c[z.source]||!c[z.target]){u.splice(j,1);var G=z[a];if(d[G]--,c[z.source]&&(c[z.source].degree--,c[z.source].outDegree--),c[z.target]&&(c[z.target].degree--,c[z.target].inDegree--),b[G]&&d[G]<b[G].length){w=!0;break}S=!0}}L++}return w||w||o.nodes.length<t.nodes.length||u.length<t.edges.length?(U.splice(r,1),"continue"):void 0},X=U.length-1;X>=0&&"break"!==$(X);X--);var q=U.length,K=function(e){var t=U[e],n={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=U[e],r={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1}));var o=!0;Object.keys(r).length!==Object.keys(n).length?o=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(o=!1)})),o&&U.splice(e,1)},o=q-1;o>e;o--)r(o);q=U.length};for(X=0;X<=q-1;X++)K(X);return U}}}};var Ie=c(618),_e=c(725),Te=c.n(_e),Ae=c(721),Me=c(479),Ne=c(24),Re=c.n(Ne),De=c(517);const ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var Be=c(949),Pe=function(e,t){return Ne.createElement(Be.Z,(0,De.Z)((0,De.Z)({},e),{},{ref:t,icon:ke}))};Pe.displayName="DownloadOutlined";const Fe=Ne.forwardRef(Pe);var je=c(584);const ze=e=>{let t="导出数据.csv";return e&&(t=e.indexOf(".csv")>0?e:e+".csv"),t},Ge=(e,t)=>{const{data:n,titleForKey:r,title:o,showPureNumber:i=!1}=e,a=[];o&&o.length>0&&a.push(o.join(",")+"\n");for(let e=0;e<n.length;e++){const t=[];for(let o=0;o<r.length;o++){const a=n[e][r[o]]||"",l=isNaN(+a)||i?"":"\t";t.push(`"${l}${a}"`)}a.push(t.join(",")+"\n")}const l=document.createElement("a");l.download=t;const s=new Blob(["\ufeff"+a.join("")],{type:"text/csv"});return l.href=URL.createObjectURL(s),l.click(),a},He={formatFileName:ze,transformCSVData:(e,t)=>{const n=[],r=[];let o={};return t&&t.length>0&&t.forEach((e=>{r.push(e.dataIndex),n.push(e.title)})),e&&e.length>0&&(o={data:e,title:n,titleForKey:r}),o},exportCSV:Ge};var We=c(162),Ue=c(860),Ve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const Ye=(e,t)=>{var{id:n}=e,r=Ve(e,["id"]);void 0===t&&(t=window.localStorage.getItem("GI_locale")||"zh-CN");let o=("zh-CN"===t?Ue.Z[n]:We.Z[n])||n;return(0,Me.isEmpty)(r)||(o=null==o?void 0:o.replace(/\{.*?\}/g,(e=>r[e.replace(/\{/,"").replace(/\}/,"")]))),o};class $e extends Re().Component{render(){const e=this.props,{id:t,locale:n=this.context.locale}=e,r=Ve(e,["id","locale"]);return Ye(Object.assign({id:t},r),n)}}$e.contextType=_e.GraphinContext;class Xe extends Ne.Component{constructor(){super(...arguments),this.options={width:500,height:400,hierarchyType:"grid",showDefaultHeaderActionIcon:!1,style:{layoutWidthType:"colAdaptive",colCfg:{width:20}}},this.state={data:null,config:null},this.download=()=>{const{config:{resData:e,properties:t}={}}=this.state,{clusterTitle:n}=this.props,r=ze("cluster_result");Ge({data:e,title:[n,Ye({id:"node-name"})].concat(t),titleForKey:["clusterId","label"].concat(t)},r)},this.onRowCellClick=({viewMeta:e})=>{const{query:t,spreadsheet:n}=e,r=n.dataSet.getMultiData(t),{id:o,clusterId:i}=(null==r?void 0:r[0])||{},{focusNodeAndHighlightHull:a}=this.props;a&&a(o,i)}}static getDerivedStateFromProps(e,t){const{data:n,clusterTitle:r,properties:o}=e,{data:i}=t;if(!(0,Me.isEqual)(n,i)){const e=((e,t,n)=>{var r;const o=[];return null===(r=null==e?void 0:e.nodes)||void 0===r||r.forEach((e=>{var t;o.push(Object.assign(Object.assign(Object.assign({},e.properties||{}),{propertyId:null===(t=e.properties)||void 0===t?void 0:t.id}),e))})),o.sort(((e,t)=>Number(e.clusterId)-Number(t.clusterId))),{dataCfg:{fields:{rows:["clusterId","id"],values:n},meta:[{field:"clusterId",name:t},{field:"id",name:"id"}],data:o||[]},resData:o,properties:n}})(n,r,o);return{data:i,config:e}}return null}render(){const{config:{dataCfg:e}={}}=this.state;return Re().createElement(Re().Fragment,null,Re().createElement(Ae.Tooltip,{title:Re().createElement($e,{id:"download-csv"}),placement:"topRight"},Re().createElement(Fe,{style:{float:"right"},onClick:this.download})),Re().createElement("div",{className:"community-cluster-table-wrapper"},Re().createElement(je.dZ,{sheetType:"base",dataCfg:e,options:this.options||{},onRowCellClick:this.onRowCellClick})))}}function qe(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],l=t[4],s=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],v=n[3],g=n[4],m=n[5],y=n[6],b=n[7],C=n[8];return e[0]=h*r+f*a+p*c,e[1]=h*o+f*l+p*u,e[2]=h*i+f*s+p*d,e[3]=v*r+g*a+m*c,e[4]=v*o+g*l+m*u,e[5]=v*i+g*s+m*d,e[6]=y*r+b*a+C*c,e[7]=y*o+b*l+C*u,e[8]=y*i+b*s+C*d,e}function Ke(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),qe(e,r,t)}function Ze(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),qe(e,r,t)}function Qe(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),qe(e,r,t)}function Je(e,t,n){return qe(e,n,t)}const et="ADD_EDGE_ID";function tt(e,t,n){n.forEach((n=>{(null==t?void 0:t.hasState(n))&&(e.setItemState(t,n,!1),t.refresh())}))}const nt={scaleNodes:(e,t=600)=>{const{nodes:n=[],edges:r=[]}=e;if(!(null==n?void 0:n.length))return;let o=1/0,i=-1/0,a=1/0,l=-1/0;n.forEach((e=>{void 0!==e.x&&void 0!==e.y&&(e.x<o&&(o=e.x),e.x>i&&(i=e.x),e.y<a&&(a=e.y),e.y>l&&(l=e.y))}));const s=(i-o)/t,c=(l-a)/t,u=Math.max(s,c);return u<1?{nodes:n,edges:r}:{nodes:n.map((e=>Object.assign(Object.assign({},e),{x:e.x?e.x/u:void 0,y:e.y?e.y/u:void 0}))),edges:r}},focusNodeY:(e,t,n,r="center")=>{const o=t.getModel().y,i=e.getGroup();let a=i.getMatrix()||[1,0,0,0,1,0,0,0,1],l=0;l="top"===r?-o:(0,Me.isNumber)(r)?e.getPointByCanvas(0,r).y-o:e.getPointByCanvas(0,n/3).y-o;const s=l*a[4];let c=0,u=0;i.animate((e=>(u=s*e,a=function(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,o=t.length;r<o;r++){var i=t[r];switch(i[0]){case"t":Ke(n,n,[i[1],i[2]]);break;case"s":Qe(n,n,[i[1],i[2]]);break;case"r":Ze(n,n,i[1]);break;case"m":Je(n,n,i[1])}}return n}(a,[["t",0,u-c]]),c=u,{matrix:a})),{duration:500})},addEdge:(e,t)=>{const n=t.findById(e),r=t.findById(et);if(!n||r)return;const{centerX:o,centerY:i,width:a}=n.getBBox(),l={id:et,zIndex:-1,source:e,target:{x:o+a/2+25,y:i},type:"quadratic",curveLevel:0,style:{lineAppendWidth:30,endArrow:!0}};t.addItem("edge",l).toFront(),n.toFront()},exportGraphData:(e,t="graph-data")=>{if(!e||"object"!=typeof e)return;const n=JSON.stringify(e),r=document.createElement("a");r.download=t.includes(".json")?t:`${t}.json`;const o=new Blob([n],{type:"text/json"});return r.href=URL.createObjectURL(o),r.click(),n},clearItemsStates:(e,t,n)=>{t.forEach((t=>{try{tt(e,t,n)}catch(e){console.log("error :>> ",t,e)}}))},clearItemStates:tt},rt={getHullOptions:e=>({id:e.id||`${Math.random().toString(36).substr(2)}`,type:e.type||"bubble",members:e.members,padding:e.padding||10,style:e.style}),removeHulls:(e,t)=>{const n=null==t?void 0:t.get("hullMap");e&&(e.forEach((e=>{e&&(null==t||t.removeHull(e),n&&delete n[e.id])})),e=null)},drawHulls:(e,t,n)=>{if(n)return null==e||e.forEach((e=>{e.members=[...new Set(e.members)].filter((e=>n.findById(e)))})),t?t.forEach((e=>{e.updateData(e.members)})):t=null==e?void 0:e.map((e=>{const{members:t}=e;if(!((null==t?void 0:t.length)<1))return n.createHull(Object.assign(Object.assign({},e),{members:t}))})).filter((e=>!!e)),t}},ot=()=>"xxxxxxxxxxxx".replace(/[x]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),it={fittingString:(e,t,n)=>{const r=n/2+.5,o=t-75,{len:i,lenList:a}=function(e){let t=0;const n=[];for(let r=0;r<(null==e?void 0:e.length);r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2,n.push(t);return{len:t,lenList:n}}(e);if(i*r>o){const t=Math.floor((o-10)/r),n=a.findIndex((e=>e>t))-1,i=e.substring(0,n)+"…";return i===`${e}…`?e:i}return e},createUuid:ot},at={debounce:(e,t)=>{let n;return function(...r){clearTimeout(n),n=window.setTimeout((()=>{e(...r)}),t||50)}}},lt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},He),rt),nt),it),at);var st=c(310),ct=c(451),ut=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const dt=(e,t)=>{var{id:n}=e,r=ut(e,["id"]);void 0===t&&(t=window.localStorage.getItem("GI_locale")||"zh-CN");let o=("zh-CN"===t?ct.Z[n]:st.Z[n])||n;return(0,Me.isEmpty)(r)||(o=null==o?void 0:o.replace(/\{.*?\}/g,(e=>r[e.replace(/\{/,"").replace(/\}/,"")]))),o};class ht extends Re().Component{render(){const e=this.props,{id:t,locale:n=this.context.locale}=e,r=ut(e,["id","locale"]);return dt(Object.assign({id:t},r),n)}}ht.contextType=_e.GraphinContext;const{ClickSelect:ft}=_e.Behaviors;var pt;!function(e){e.KCore="k-core",e.louvain="louvain",e.iLouvain="i-louvain",e.ConnectedComponent="connected-component"}(pt||(pt={}));const vt={id:"CommunityDetection",name:"社区发现",category:"algorithm-analysis",type:"GIAC_CONTENT",desc:"通过 K-Core、Lopuvain、iLouvain",cover:"http://xxxx.jpg",icon:"icon-associate"},{GIAC_CONTENT_METAS:gt,deepClone:mt}=Ie.extra,yt=mt(gt);yt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=vt.name,yt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=vt.icon;const bt={info:vt,component:t=>{const n=(0,Ie.useContext)(),{data:r,graph:o}=n,[i,a]=(0,Ne.useState)(pt.KCore),[l,s]=(0,Ne.useState)(null),[c,u]=(0,Ne.useState)({nodes:[],edges:[]}),[d,f]=(0,Ne.useState)(2),[p,v]=(0,Ne.useState)(!1),[g,m]=(0,Ne.useState)(null),[y,b]=(0,Ne.useState)(!1),[C,w]=(0,Ne.useState)(null),[x,E]=(0,Ne.useState)([]),[S,L]=(0,Ne.useState)([]),O=[pt.louvain,pt.iLouvain,pt.ConnectedComponent];(0,Ne.useEffect)((()=>{u({nodes:(0,Me.cloneDeep)(o.getNodes()).map((e=>e.getModel())),edges:(0,Me.cloneDeep)(o.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))});const e={};r.nodes.forEach((t=>{Object.keys(t.data).forEach((t=>e[t]=!0))})),L(Object.keys(e))}),[r]);const I=[{name:pt.KCore,content:Re().createElement("div",{className:"community-detection-algo-body"},Re().createElement("span",null,Re().createElement(ht,{id:"k-core.set-k"})),Re().createElement(Ae.InputNumber,{min:1,value:d,style:{margin:"10px 20px"},onChange:e=>f(e)}))},{name:pt.louvain,content:Re().createElement(Re().Fragment,null)},{name:pt.iLouvain,content:Re().createElement(Re().Fragment,null)},{name:pt.ConnectedComponent,content:Re().createElement(Re().Fragment,null)}],_=()=>{lt.removeHulls(g,o),m(null)},T=(e,t,n)=>{t&&_();const r=e.map((e=>({id:e.id,type:"smooth-convex",members:e.nodes.map((e=>e.id)),style:e.id===n?{fill:"lightgreen",stroke:"green"}:void 0}))).map((e=>lt.getHullOptions(e))),i=lt.drawHulls(r,t?null:g,o);m(i)},A=(e,t)=>{o.getNodes().forEach((t=>{var n,r;const i=t.get("id"),a=null===(n=c.nodes)||void 0===n?void 0:n.find((e=>e.id===i));if(a&&!(null==e?void 0:e.includes(i))){const{size:e}=(null===(r=a.style)||void 0===r?void 0:r.keyshape)||{size:30};o.updateItem(t,{style:{keyshape:{size:e},icon:{size:e&&e/2}}})}})),t&&o.getEdges().forEach((e=>{var n,r;const i=e.getModel().id||"",a=null===(n=c.edges)||void 0===n?void 0:n.find((e=>e.id===i)),l=null===(r=null==a?void 0:a.style)||void 0===r?void 0:r.keyshape,s=null==l?void 0:l.lineWidth;a&&!(null==t?void 0:t.includes(i))&&o.updateItem(e,{style:{keyshape:Object.assign({lineWidth:s},l||{})}})})),o.getEdges().forEach((e=>{e.refresh()}))},M=()=>{C&&o.findById(C).hasState("active")&&o.setItemState(C,"active",!1)},N=(e,t)=>{M(),o.setItemState(e,"active",!0),T(x,!0,t),w(e)};return Re().createElement("div",{style:{background:"#fff"}},Re().createElement("div",{className:"community-detection-wrapper"},Re().createElement("div",{className:"top-info"},Re().createElement("p",{className:"community-detection-title"},Re().createElement(ht,{id:"select-algo"})),Re().createElement(e.Z,{onClick:()=>{A([],[]),s(null),_(),a(pt.KCore),M()}})),Re().createElement(Ae.Radio.Group,{onChange:e=>{A([],[]),s(null),_(),a(e.target.value)},value:i},I.map((e=>Re().createElement("div",{key:e.name},Re().createElement(Ae.Radio,{value:e.name,className:"community-detection-algo-radio"},Re().createElement("div",{className:"community-detection-algo-title"},Re().createElement("span",{className:"community-detection-algo-title-name"},Re().createElement(ht,{id:`${e.name}`})),Re().createElement("span",{className:"community-detection-algo-title-tip"},Re().createElement(ht,{id:`${e.name}-tip`})))),e.content)))),Re().createElement(Ae.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},loading:y,onClick:()=>{v(!0),b(!0),setTimeout((()=>{var e;const t=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>Object.assign(Object.assign({},e.data||{}),{label:e.label||e.data.label||e.data.name,id:e.id}))),edges:t.map((e=>Object.assign(Object.assign(Object.assign({},e),e.data||{}),{id:e.id||e.data.id})))}))(r);switch(i){case pt.KCore:if(!o||o.destroyed)return;const n=K(t,d)||{nodes:[],edges:[]},r=n.nodes.map((e=>e.id)),i=n.edges.map((e=>e.id)),a=null==c?void 0:c.nodes.filter((e=>r.includes(e.id))),l=(null==c?void 0:c.edges.filter((e=>{var t;return i.includes(null===(t=e.data)||void 0===t?void 0:t.id)})))||[];let u={nodes:a,edges:l};a.length!==(null===(e=null==c?void 0:c.nodes)||void 0===e?void 0:e.length)&&(u=lt.scaleNodes(u,600)),s(u),A([],[]),n.nodes.forEach((e=>{o.updateItem(e.id,{style:{keyshape:{size:50},icon:{size:50}}})})),n.edges.forEach((e=>{const t=o.getEdges().find((t=>t.getModel().data.id===e.data.id));if(!t)return;const{style:n={}}=t.getModel();o.updateItem(t,{style:{keyshape:Object.assign({lineWidth:2},n.keyshape||{})}})})),o.getEdges().forEach((e=>{e.refresh()}));break;case pt.louvain:const f=X(t,!1,"weight",.01).clusters;s(t),E(f),T(f);break;case pt.iLouvain:const p=q(t,!1,"weight",.01,"properties").clusters;s(t),E(p),T(p);break;case pt.ConnectedComponent:const v=h(t);if(v.length<=1)return Ae.message.info(dt({id:"connected-component.all-connected"})),void b(!1);const g=[];let m=!1;v.forEach(((e,t)=>{1!==e.length?(e.forEach((e=>e.clusterId=`${t}`)),g.push({id:`${t}`,nodes:e})):m=!0})),m&&Ae.message.info(dt({id:"connected-component.has-single"})),s(t),E(g),T(g)}b(!1)}),100)}},Re().createElement(ht,{id:"analyse"})),(()=>{var e;if(p)return y?Re().createElement(Ae.Spin,{spinning:!0},Re().createElement("div",{className:"kg-community-result-wrapper"})):(null===(e=null==l?void 0:l.nodes)||void 0===e?void 0:e.length)?O.includes(i)?Re().createElement("div",{className:"community-detection-result-wrapper"},Re().createElement("span",{className:"community-detection-title"},Re().createElement(ht,{id:"analysis-result"})),Re().createElement(Xe,{data:l,clusterTitle:dt({id:"community-index"}),focusNodeAndHighlightHull:N,properties:S})):i===pt.KCore?Re().createElement("div",{className:"community-detection-result-wrapper"},Re().createElement("p",{className:"community-detection-title"},Re().createElement(ht,{id:"analysis-result"})),Re().createElement("div",{className:"community-detection-graph-container"},Re().createElement(Te(),{data:l,height:300,layout:{type:"preset"},fitView:!0,animate:!1,minZoom:.1,layoutCache:!0},Re().createElement(ft,{disabled:!0})))):void 0:Re().createElement(Ae.Empty,{image:Ae.Empty.PRESENTED_IMAGE_SIMPLE,description:Re().createElement(ht,{id:"data.no-data"})})})()))},registerMeta:e=>Object.assign({},yt)};function Ct(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function wt(e){return!!e&&!!e[ln]}function xt(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===sn}(e)||Array.isArray(e)||!!e[an]||!!(null===(t=e.constructor)||void 0===t?void 0:t[an])||It(e)||_t(e))}function Et(e,t,n){void 0===n&&(n=!1),0===St(e)?(n?Object.keys:cn)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function St(e){var t=e[ln];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:It(e)?2:_t(e)?3:0}function Lt(e,t){return 2===St(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ot(e,t,n){var r=St(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function It(e){return tn&&e instanceof Map}function _t(e){return nn&&e instanceof Set}function Tt(e){return e.o||e.t}function At(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=un(e);delete t[ln];for(var n=cn(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Mt(e,t){return void 0===t&&(t=!1),Rt(e)||wt(e)||!xt(e)||(St(e)>1&&(e.set=e.add=e.clear=e.delete=Nt),Object.freeze(e),t&&Et(e,(function(e,t){return Mt(t,!0)}),!0)),e}function Nt(){Ct(2)}function Rt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Dt(e){var t=dn[e];return t||Ct(18,e),t}function kt(){return Jt}function Bt(e,t){t&&(Dt("Patches"),e.u=[],e.s=[],e.v=t)}function Pt(e){Ft(e),e.p.forEach(zt),e.p=null}function Ft(e){e===Jt&&(Jt=e.l)}function jt(e){return Jt={p:[],l:Jt,h:e,m:!0,_:0}}function zt(e){var t=e[ln];0===t.i||1===t.i?t.j():t.O=!0}function Gt(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Dt("ES5").S(t,e,r),r?(n[ln].P&&(Pt(t),Ct(4)),xt(e)&&(e=Ht(t,e),t.l||Ut(t,e)),t.u&&Dt("Patches").M(n[ln].t,e,t.u,t.s)):e=Ht(t,n,[]),Pt(t),t.u&&t.v(t.u,t.s),e!==on?e:void 0}function Ht(e,t,n){if(Rt(t))return t;var r=t[ln];if(!r)return Et(t,(function(o,i){return Wt(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ut(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=At(r.k):r.o;Et(3===r.i?new Set(o):o,(function(t,i){return Wt(e,r,o,t,i,n)})),Ut(e,o,!1),n&&e.u&&Dt("Patches").R(r,n,e.u,e.s)}return r.o}function Wt(e,t,n,r,o,i){if(wt(o)){var a=Ht(e,o,i&&t&&3!==t.i&&!Lt(t.D,r)?i.concat(r):void 0);if(Ot(n,r,a),!wt(a))return;e.m=!1}if(xt(o)&&!Rt(o)){if(!e.h.F&&e._<1)return;Ht(e,o),t&&t.A.l||Ut(e,o)}}function Ut(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Mt(t,n)}function Vt(e,t){var n=e[ln];return(n?Tt(n):e)[t]}function Yt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $t(e){e.P||(e.P=!0,e.l&&$t(e.l))}function Xt(e){e.o||(e.o=At(e.t))}function qt(e,t,n){var r=It(t)?Dt("MapSet").N(t,n):_t(t)?Dt("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:kt(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=hn;n&&(o=[r],i=fn);var a=Proxy.revocable(o,i),l=a.revoke,s=a.proxy;return r.k=s,r.j=l,s}(t,n):Dt("ES5").J(t,n);return(n?n.A:kt()).p.push(r),r}function Kt(e){return wt(e)||Ct(22,e),function e(t){if(!xt(t))return t;var n,r=t[ln],o=St(t);if(r){if(!r.P&&(r.i<4||!Dt("ES5").K(r)))return r.t;r.I=!0,n=Zt(t,o),r.I=!1}else n=Zt(t,o);return Et(n,(function(t,o){r&&function(e,t){return 2===St(e)?e.get(t):e[t]}(r.t,t)===o||Ot(n,t,e(o))})),3===o?new Set(n):n}(e)}function Zt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return At(e)}var Qt,Jt,en="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),tn="undefined"!=typeof Map,nn="undefined"!=typeof Set,rn="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,on=en?Symbol.for("immer-nothing"):((Qt={})["immer-nothing"]=!0,Qt),an=en?Symbol.for("immer-draftable"):"__$immer_draftable",ln=en?Symbol.for("immer-state"):"__$immer_state",sn=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),cn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,un=Object.getOwnPropertyDescriptors||function(e){var t={};return cn(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},dn={},hn={get:function(e,t){if(t===ln)return e;var n=Tt(e);if(!Lt(n,t))return function(e,t,n){var r,o=Yt(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!xt(r)?r:r===Vt(e.t,t)?(Xt(e),e.o[t]=qt(e.A.h,r,e)):r},has:function(e,t){return t in Tt(e)},ownKeys:function(e){return Reflect.ownKeys(Tt(e))},set:function(e,t,n){var r=Yt(Tt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=Vt(Tt(e),t),i=null==o?void 0:o[ln];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||Lt(e.t,t)))return!0;Xt(e),$t(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Vt(e.t,t)||t in e.t?(e.D[t]=!1,Xt(e),$t(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Tt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ct(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ct(12)}},fn={};Et(hn,(function(e,t){fn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),fn.deleteProperty=function(e,t){return fn.set.call(this,e,t,void 0)},fn.set=function(e,t,n){return hn.set.call(this,e[0],t,n,e[0])};var pn=function(){function e(e){var t=this;this.g=rn,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&Ct(6),void 0!==r&&"function"!=typeof r&&Ct(7),xt(e)){var l=jt(t),s=qt(t,e,void 0),c=!0;try{a=n(s),c=!1}finally{c?Pt(l):Ft(l)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Bt(l,r),Gt(e,l)}),(function(e){throw Pt(l),e})):(Bt(l,r),Gt(a,l))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===on&&(a=void 0),t.F&&Mt(a,!0),r){var u=[],d=[];Dt("Patches").M(e,a,u,d),r(u,d)}return a}Ct(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){xt(e)||Ct(8),wt(e)&&(e=Kt(e));var t=jt(this),n=qt(this,e,void 0);return n[ln].C=!0,Ft(t),n},t.finishDraft=function(e,t){var n=(e&&e[ln]).A;return Bt(n,t),Gt(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!rn&&Ct(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=Dt("Patches").$;return wt(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),vn=new pn,gn=vn.produce;vn.produceWithPatches.bind(vn),vn.setAutoFreeze.bind(vn),vn.setUseProxies.bind(vn),vn.applyPatches.bind(vn),vn.createDraft.bind(vn),vn.finishDraft.bind(vn);const mn=gn;function yn(e){var t=(0,Ne.useState)((function(){return Mt("function"==typeof e?e():e,!0)})),n=t[1];return[t[0],(0,Ne.useCallback)((function(e){n("function"==typeof e?mn(e):Mt(e))}),[])]}var bn=c(770);const Cn=[{label:"总度数",value:"totalDegree"},{label:"出度",value:"outDegree"},{label:"入度",value:"inDegree"}],wn=e=>{const{degree:t}=e,[n,r]=Re().useState("totalDegree");Re().useEffect((()=>{const e=[...t[n].entries()].map((e=>{const[t,n]=e;return{value:t,count:n}})),r=new bn.Scatter("gi-info-detection-degree-scatter",{data:e,height:300,xField:"value",yField:"count",interactions:[{type:"other-visible"}],size:5,pointStyle:{fill:"#5B8FF9"},xAxis:{title:{text:"度数"}},yAxis:{title:{text:"数量"}}});return r.render(),()=>{r.destroy()}}),[t,n]);const o=Re().createElement(Ae.Select,{options:Cn,value:n,onChange:e=>r(e)});return Re().createElement(Ae.Card,{title:"度数分布",extra:o},Re().createElement("div",{id:"gi-info-detection-degree-scatter"}))},xn={id:"InfoDetection",name:"信息检测",desc:"检测画布中孤立点、环等",icon:"icon-infomation",cover:"http://xxxx.jpg",category:"data-analysis",type:"GIAC_CONTENT"},{deepClone:En,GIAC_CONTENT_METAS:Sn}=Ie.extra,Ln=En(Sn);Ln.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=xn.name,Ln.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=xn.icon,Ln.GIAC_CONTENT.properties.GIAC_CONTENT.properties.tooltip.default=xn.desc,Ln.GIAC_CONTENT.properties.GIAC_CONTENT.properties.containerWidth.default="400px";const On={info:xn,component:()=>{const{data:e,graph:t}=(0,Ie.useContext)(),[n,r]=yn({isolateNodes:[],circles:[]}),[o,i]=yn({isolate:!1,circle:!1}),[a,l]=yn({inDegree:new Map,outDegree:new Map,totalDegree:new Map});return Re().useEffect((()=>{const n=e.nodes.filter((e=>0===t.findById(e.id).getEdges().length)),o=b(e,!1),i=new Map,a=new Map,s=new Map;e.nodes.forEach((e=>{const n=t.findById(e.id).getEdges(),r=n.length;let o=0,l=0;n.forEach((t=>{const{source:n}=t.getModel();n===e.id?l++:o++})),i.set(o,i.has(o)?i.get(o)+1:1),a.set(l,a.has(l)?a.get(l)+1:1),s.set(r,s.has(r)?s.get(r)+1:1)})),r((e=>{e.isolateNodes=n,e.circles=o})),l((e=>{e.inDegree=i,e.outDegree=a,e.totalDegree=s}))}),[e]),Re().useEffect((()=>{e.nodes.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!1)})),e.edges.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!1)})),o.isolate&&n.isolateNodes.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!0)})),o.circle&&n.circles.forEach((e=>{const n=Object.keys(e)[0];let r=n;do{t.setItemState(r,"active",!0);const n=e[r].id;t.findById(r).getEdges().forEach((e=>{const{source:o,target:i,id:a}=e.getModel();(o===r&&i==n||o==n&&i===r)&&t.setItemState(e.getID(),"active",!0)})),r=n}while(r!==n)}))}),[o]),Re().createElement("div",{className:"gi-info-detection"},Re().createElement(Ae.List,null,Re().createElement(Ae.List.Item,{key:"isolate",extra:Re().createElement("div",null,n.isolateNodes.length),onClick:()=>i((e=>{e.isolate=!e.isolate})),style:{border:o.isolate?"solid blue 1px":"none"}},"孤立点"),Re().createElement(Ae.List.Item,{key:"circle",extra:Re().createElement("div",null,n.circles.length),onClick:()=>i((e=>{e.circle=!e.circle})),style:{border:o.circle?"solid blue 1px":"none"}},"环")),Re().createElement(wn,{degree:a}))},registerMeta:({schemaData:e})=>Object.assign({},Ln)};var In=c(562);const _n={id:"NodeImportance",name:"节点重要性",category:"algorithm-analysis",type:"GIAC_CONTENT",desc:"通过 PageRank、度中心性、属性等",cover:"http://xxxx.jpg",icon:"icon-rules"},Tn={degree:"度中心性","degree-tip":"根据实体的出入度大小计算","page-rank":"PageRank网页排序","page-rank-tip":"使用PageRank网页排序算法计算","node-property":"节点属性重要性","node-property-tip":"根据节点属性值计算","edge-property":"关系属性重要性","edge-property-tip":"根据节点相关关系的属性计算","in-degree":"入度","out-degree":"出度",ave:"平均数",min:"最小值",max:"最大值",median:"中位数",sort:"排序","sort-tip":"适用于数值型",count:"计数","count-tip":"适用于枚举型","positive-correlation":"正相关","positive-tip":"值越大，点或边越大","negative-correlation":"正相关","negative-tip":"值越小，点或边越大"};var An,Mn;!function(e){e.Positive="positive",e.Negative="negative"}(An||(An={})),function(e){e.Active="active",e.Default="default",e.Selected="selected",e.Disable="disable",e.Highlight="highlight",e.Inactive="inactive"}(Mn||(Mn={}));const{GIAC_CONTENT_METAS:Nn,deepClone:Rn}=Ie.extra,Dn=Rn(Nn);Dn.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=_n.name,Dn.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=_n.icon;const{Option:kn}=Ae.Select,Bn=({type:e,visible:t,form:n,properties:r})=>{var o;const{}=(0,Ne.useContext)(_e.GraphinContext),[i,a]=(0,Ne.useState)(!1);return Re().createElement("div",{className:"algo-body algo-body-property"},Re().createElement("span",{style:{marginLeft:8}},Re().createElement(Ae.Form.Item,{rules:[{required:t,message:"不可为空"}],name:`${e}-property.property`,key:`${e}-property.property`,label:"属性"},Re().createElement(Ae.Select,{placeholder:"请选择",dropdownMatchSelectWidth:!1,notFoundContent:i?Re().createElement(Ae.Spin,null):"无数据"},null===(o=null==r?void 0:r.map)||void 0===o?void 0:o.call(r,(e=>Re().createElement(kn,{value:e,key:e},e)))))),"edge"===e&&Re().createElement("span",{style:{marginLeft:8}},Re().createElement(Ae.Form.Item,{rules:[{required:t,message:"不可为空"}],name:`${e}-property.calcway`,key:`${e}-property.calcway`,label:"计算方式"},Re().createElement(Ae.Select,{placeholder:"请选择",dropdownMatchSelectWidth:!1,dropdownClassName:"calc",getPopupContainer:()=>document.getElementById("select-drop-down-area")},Re().createElement(kn,{value:"sort",key:"sort"},Tn.sort,Re().createElement("br",null),Re().createElement("p",{className:"calc-tip"},Tn["sort-tip"])),Re().createElement(kn,{value:"count",key:"count"},Tn.count,Re().createElement("br",null),Re().createElement("p",{className:"calc-tip"},Tn["count-tip"]))))),Re().createElement("span",{style:{marginLeft:8}},Re().createElement(Ae.Form.Item,{rules:[{required:t,message:"不可为空"}],name:`${e}-property.mappingway`,key:`${e}-property.mappingway`,initialValue:An.Positive,label:"映射方式"},Re().createElement(Ae.Select,{placeholder:"请选择",dropdownMatchSelectWidth:!1,dropdownClassName:"mapping",getPopupContainer:()=>document.getElementById("select-drop-down-area")},Re().createElement(kn,{value:An.Positive,key:An.Positive},Tn["positive-correlation"],Re().createElement("br",null),Re().createElement("p",{className:"mapping-tip"},Tn["positive-tip"])),Re().createElement(kn,{value:An.Negative,key:An.Negative},Tn["negative-correlation"],Re().createElement("br",null),Re().createElement("p",{className:"mapping-tip"},Tn["negative-tip"]))))))};let Pn=null;const Fn=({data:e,currentAlgo:t,edgeType:n})=>{const{graph:r}=(0,Ne.useContext)(_e.GraphinContext),o=(0,Ne.useRef)(null);(0,Ne.useEffect)((()=>{const e=i();Pn&&Pn.destroy(),Pn=new bn.Column(o.current,{data:e,xField:"value",yField:"count",maxColumnWidth:60,colorField:"count",legend:{layout:"horizontal",position:"bottom",offsetY:4,maxRow:2},label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{title:{text:"重要性值",position:"end",offset:14,style:{stroke:"#fff",lineWidth:2,fontWeight:400}}},yAxis:{title:{text:"节点数量",position:"end",autoRotate:!1,spacing:-55,style:{stroke:"#fff",lineWidth:2,fontWeight:400}}}}),Pn.render(),Pn.on("interval:mouseleave",a),Pn.on("interval:mouseenter",l)}),[e]);const i=()=>{var t;const n=[],r=(0,Me.groupBy)((null===(t=e.node)||void 0===t?void 0:t.data)||[],"value");return Object.keys(r).forEach((e=>{n.push({value:e,count:r[e].length})})),n},a=()=>{r.findAllByState("node",Mn.Active).concat(r.findAllByState("edge",Mn.Active)).forEach((e=>{r.setItemState(e,Mn.Active,!1)}))},l=n=>{var o,i,l,s,c;if(!(null===(o=n.data)||void 0===o?void 0:o.data))return;const u=null===(l=null===(i=n.data)||void 0===i?void 0:i.data)||void 0===l?void 0:l.value;a();const d=e.node.data.filter((e=>+e.value==+u)),h=d.map((e=>e.id));d.forEach((e=>{const t=r.findById(e.id);t&&r.setItemState(t,Mn.Active,!0)})),"edge-property"===t&&(null===(c=null===(s=e.edge)||void 0===s?void 0:s.data)||void 0===c||c.forEach((e=>{const t=r.findById(e.id);if(!t)return;const n=t.getModel();(h.includes(n.source)||h.includes(n.target))&&r.setItemState(t,Mn.Active,!0)})))};return Re().createElement("div",null,Re().createElement("div",{className:"plot-wrapper",ref:o}))},jn=({data:e,currentAlgo:t,form:n,reAnalyse:r,nodeProperties:o})=>{const{graph:i}=(0,Ne.useContext)(_e.GraphinContext),a=n.getFieldsValue()["edge-property.edgeType"],[l,s]=(0,Ne.useState)(!1),[c,u]=(0,Ne.useState)("id");(0,Ne.useEffect)((()=>{s(!1)}),[r]);const d=()=>{i.findAllByState("node",Mn.Active).concat(i.findAllByState("edge",Mn.Active)).forEach((e=>{i.setItemState(e,Mn.Active,!1)}))};return Re().createElement("div",{className:"result-wrapper"},Re().createElement(Ae.Table,{dataSource:(()=>{const t=[...e.node.data];return e.mappingWay===An.Negative&&t.reverse(),t.map(((e,t)=>{var n;return{key:e.id,index:t+1,name:e.originProperties[c]||e.id,value:e.value,values:null===(n=e.values)||void 0===n?void 0:n.join("; ")}}))})(),columns:(()=>{const n=[{title:"序号",dataIndex:"index",key:"index",width:60},{title:(null==o?void 0:o.length)?Re().createElement(Re().Fragment,null,"节点",Re().createElement(Ae.Select,{className:"result-table-property-select",size:"small",defaultValue:"id",options:o.map((e=>({label:e,value:e}))),dropdownMatchSelectWidth:!1,onChange:u})):"节点",dataIndex:"name",key:"name",textWrap:"word-break",ellipsis:!0},{title:"重要性",dataIndex:"value",key:"value",textWrap:"word-break",sortOrder:l,sorter:(e,t)=>e.value-t.value}];return"edge-property"===t&&"count"===e.calcWay&&(n.splice(2,0,{title:"属性名",dataIndex:"values",key:"values",textWrap:"word-break"}),n[3].title="计算方式"),n})(),size:"small",style:{marginTop:"16px"},showSorterTooltip:{title:"排序"},onRow:n=>({onMouseEnter:()=>(n=>{var r,o;d();const l=i.findById(n.key);l&&(i.setItemState(l,Mn.Active,!0),"edge-property"===t&&(null===(o=null===(r=e.edge)||void 0===r?void 0:r.data)||void 0===o||o.forEach((e=>{const t=i.findById(e.id);if(!t)return;const r=t.getModel();r.data.label===(null==a?void 0:a.split("_")[1])&&(r.source!==n.key&&r.target!==n.id||i.setItemState(t,Mn.Active,!0))}))))})(n),onMouseLeave:d}),onChange:(e,t,n,r)=>{"sort"===r.action&&s(n.order||!1)}}))},{TabPane:zn}=Ae.Tabs,{pageRank:Gn}=Oe,Hn=[16,64],Wn=[1,8];let Un;const Vn={info:_n,component:e=>{const{visible:t=!0,onVisibleChange:n=(()=>{})}=e,{graph:r,data:o}=(0,Ie.useContext)(),[i,a]=(0,Ne.useState)(!1),[l,s]=(0,Ne.useState)("page-rank"),[c,u]=(0,Ne.useState)(["in","out"]),[d,h]=(0,Ne.useState)(),[f,p]=(0,Ne.useState)(0),[v,g]=(0,Ne.useState)([]),[m,y]=(0,Ne.useState)([]),[b,C]=(0,Ne.useState)("table"),[w]=Ae.Form.useForm(),{validateFields:x,resetFields:E}=w;(0,Ne.useEffect)((()=>{d&&(Un=void 0,L());const e={};o.nodes.forEach((t=>{Object.keys(t.data).forEach((t=>e[t]=!0))})),g(Object.keys(e));const t={};o.edges.forEach((e=>{Object.keys(e.data).forEach((e=>t[e]=!0))})),y(Object.keys(t))}),[o]);const S=(e,t)=>{r.getNodes().forEach((t=>{const{id:n,oriSize:o}=t.getModel();o&&!(null==e?void 0:e.includes(n))&&r.updateItem(t,{size:o||30,oriSize:void 0,style:{keyshape:{size:o||30},icon:{size:o/2}}})})),t&&r.getEdges().forEach((e=>{var n;const{id:o,oriSize:i,size:a,style:l={}}=e.getModel();1===a&&1===(null===(n=null==l?void 0:l.keyshape)||void 0===n?void 0:n.size)||(null==t?void 0:t.includes(o))||r.updateItem(e,{size:i||1,oriSize:void 0,style:{keyshape:Object.assign({lineWidth:i||1},l.keyshape||{})}})})),r.getEdges().forEach((e=>{e.refresh()}))},L=()=>{r&&!r.destroyed&&(x().then((e=>{let t={nodes:[],edges:[]};switch(l){case"page-rank":{const e=Gn(o);Object.keys(e).map((n=>{const o=r.findById(n),i=o.getModel();o&&t.nodes.push({id:n,name:i.id,value:e[n],originProperties:i})}));break}case"degree":{const e=2===c.length?"total":c[0]||"in";Un=((e,t)=>{if(t)return t;const n={};return e.nodes.forEach((e=>{n[e.id]={in:0,out:0}})),e.edges.forEach((e=>{n[e.source].out+=1,n[e.target].in+=1})),n})(o,Un),r.getNodes().forEach((n=>{const r=n.getModel();Un[r.id]&&t.nodes.push({id:r.id,name:r.id,value:"total"!==e?Un[r.id][e]:Un[r.id].in+Un[r.id].out,originProperties:r})}));break}case"node-property":{const n=e["node-property.property"];if(!n)return;o.nodes.forEach((e=>{var o;const i=null===(o=e.data)||void 0===o?void 0:o[n],a=""===i?void 0:+i;!isNaN(a)&&r.findById(e.id)&&t.nodes.push({id:e.id,name:e.id,value:a,originProperties:e})}));break}case"edge-property":{const n=e["edge-property.property"],i=e["edge-property.calcway"];if(!n)return;const a={};r.getEdges().forEach((e=>{var r,o,l,s,c;const u=e.getModel(),d=null===(r=u.data)||void 0===r?void 0:r[n];if(void 0!==d)if("sort"===i){const e=""===d?void 0:+d;isNaN(e)||(a[u.source]=(a[u.source]||0)+e,a[u.target]=(a[u.target]||0)+e,t.edges.push({id:u.id,name:u.id,value:e,originProperties:u}))}else(null===(l=null===(o=a[u.source])||void 0===o?void 0:o.includes)||void 0===l?void 0:l.call(o,d))||(a[u.source]||(a[u.source]=[]),a[u.source].push(d)),(null===(c=null===(s=a[u.target])||void 0===s?void 0:s.includes)||void 0===c?void 0:c.call(s,d))||(a[u.target]||(a[u.target]=[]),a[u.target].push(d)),t.edges.push({id:u.id,name:u.id,value:d,originProperties:u})})),o.nodes.forEach((e=>{var n;r.findById(e.id)&&("sort"===i?void 0!==a[e.id]&&isNaN(a[e.id])||t.nodes.push({id:e.id,name:e.id,value:a[e.id]||0,originProperties:e}):t.nodes.push({id:e.id,name:e.id,value:(null===(n=a[e.id])||void 0===n?void 0:n.length)||0,values:a[e.id],originProperties:e}))}));break}}(e=>{var t,n,o,i,a,s,c,u,d,f,p;const v=w.getFieldsValue(),g=v[`${l}.calcway`],m=v[`${l}.mappingway`];if(!(null===(t=null==e?void 0:e.nodes)||void 0===t?void 0:t.length)||"edge-property"===l&&!(null===(n=null==e?void 0:e.edges)||void 0===n?void 0:n.length))return h({type:l,calcWay:g,mappingWay:m,node:void 0,edge:void 0,message:"无结果"}),void S([],[]);const y=e.nodes;let b=0;y.sort(((e,t)=>t.value-e.value)),y.forEach((e=>{b+=e.value}));const C=y[y.length-1],x=y[0],E=y[Math.ceil(y.length/2)]||x;let L=0;null===(o=e.edges)||void 0===o||o.sort(((e,t)=>t.value-e.value)),null===(i=e.edges)||void 0===i||i.forEach((e=>{L+=e.value}));const O=(null===(a=e.edges)||void 0===a?void 0:a[e.edges.length-1])||void 0,I=(null===(s=e.edges)||void 0===s?void 0:s[0])||void 0,_=(null===(c=e.edges)||void 0===c?void 0:c[Math.ceil(e.edges.length/2)])||I,T={type:l,calcWay:g,mappingWay:m,node:{min:{id:C.id,name:C.name,value:+C.value.toFixed(6)},max:{id:x.id,name:x.name,value:+x.value.toFixed(6)},ave:{id:void 0,name:void 0,value:+(b/y.length).toFixed(6)},median:{id:E.id,name:E.name,value:+E.value.toFixed(6)},data:y},edge:(null===(u=e.edges)||void 0===u?void 0:u.length)?{min:O?{id:O.id,name:O.name,value:"count"===g?O.value:+(null===(d=O.value)||void 0===d?void 0:d.toFixed(6))}:void 0,max:I?{id:I.id,name:I.name,value:"count"===g?O.value:+(null===(f=I.value)||void 0===f?void 0:f.toFixed(6))}:void 0,ave:{id:void 0,name:void 0,value:+(L/e.edges.length).toFixed(6)},median:_?{id:_.id,name:_.name,value:"count"===g?O.value:+(null===(p=_.value)||void 0===p?void 0:p.toFixed(6))}:void 0,data:e.edges}:void 0};(e=>{const{min:t,max:n}=e.node,o=n.value-t.value||1,i=Hn[1]-Hn[0],a=[],l=e.mappingWay!==An.Negative;e.node.data.forEach((e=>{const s=r.findById(e.id);if(s){let a=l?(e.value-t.value)/o*i+Hn[0]:(n.value-e.value)/o*i+Hn[0];t.value===n.value&&(a=void 0);const{type:c,style:u,size:d}=s.getModel();r.updateItem(s,{size:a,oriSize:d||(null==u?void 0:u.keyshape.size)||30,style:{keyshape:{size:a},icon:{size:a/2}}})}a.push(e.id)}));let s=[];if(e.edge&&"count"!==e.calcWay){const{min:o,max:i}=e.edge,a=i.value-o.value||1,c=Wn[1]-Wn[0];e.edge.data.forEach((e=>{const u=r.findById(e.id);if(t.value!==n.value){let t=l?(e.value-o.value)/a*c+Wn[0]:(i.value-e.value)/a*c+Wn[0];if(t=t||1,u){const{size:e,style:n={}}=u.getModel();r.updateItem(u,{size:t,oriSize:e||(null==n?void 0:n.keyshape.size)||1,style:{keyshape:Object.assign({lineWidth:t},n.keyshape||{})}})}s.push(e.id)}}))}S(a,s)})(T),h(T)})(t)})),C("table"))},O=(e,t="node")=>{const n="ave"===e?`${d[t][e].value}`:`${d[t][e].value} (${d[t][e].name})`,r=((e,t,n)=>{const{len:r,lenList:o}=function(e){let t=0;const n=[];for(let r=0;r<(null==e?void 0:e.length);r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2,n.push(t);return{len:t,lenList:n}}(e);if(7.5*r>175){const t=Math.floor(22),n=o.findIndex((e=>e>t))-1,r=e.substring(0,n)+"…";return r===`${e}…`?e:r}return e})(n);return Re().createElement(Re().Fragment,null,Tn[e],":  ",Re().createElement("span",{className:"result-statistic-value"},Re().createElement(Ae.Tooltip,{title:r.includes("…")?n:""},r)))},I=e=>{const t=w.getFieldsValue()[`${l}.edgeType`],n=(null==d?void 0:d.node)?void 0:Re().createElement("p",{className:"result-message"},null==d?void 0:d.message),r="table"===e?Re().createElement(jn,{data:d,form:w,currentAlgo:l,reAnalyse:f,nodeProperties:v}):Re().createElement(Fn,{data:d,currentAlgo:l,edgeType:t});return Re().createElement("div",{className:"result-wrapper"},Re().createElement("div",{className:"result-title"},(()=>{const e=w.getFieldsValue(),t=e["node-property.property"],n=e["edge-property.property"];return"node-property"===(null==d?void 0:d.type)?Re().createElement(Re().Fragment,null,t," - 排序"):"edge-property"===(null==d?void 0:d.type)?Re().createElement(Re().Fragment,null,n," - ",Tn[null==d?void 0:d.calcWay]):Tn[null==d?void 0:d.type]})()),n||Re().createElement("div",{className:"result-statistic"},Re().createElement(Ae.Row,null,Re().createElement(Ae.Col,{span:11},O("ave")),Re().createElement(Ae.Col,{span:11},O("median"))),Re().createElement(Ae.Row,{style:{marginTop:"16px"}},Re().createElement(Ae.Col,{span:11},O("max")),Re().createElement(Ae.Col,{span:11},O("min")))),!n&&r)},_=e=>{let t="";return Object.values(e).forEach(((e,n)=>{let r=(void 0===e?"":e).toString().replace(/"/g,'""');r.search(/("|,|\n)/g)>=0&&(r='"'+r+'"'),n>0&&(t+=","),t+=r})),t},T=e=>{var t;const n=null===(t=null==d?void 0:d[e])||void 0===t?void 0:t.data;if(!n)return;const r=n.map(_).join("\n"),o=document.createElement("a");o.href="data:text/csv;charset=utf-8,"+encodeURI(`id,name,dataType,value\n${r}`),o.download=`node-importance-${e}.csv`,o.click()},A=[{name:"page-rank",content:Re().createElement(Re().Fragment,null)},{name:"degree",content:Re().createElement(Ae.Checkbox.Group,{className:"algo-body",options:[{label:"入度",value:"in"},{label:"出度",value:"out"}],defaultValue:["in","out"],onChange:e=>{u(e)},style:{display:"degree"===l?"inline-flex":"none"}})},{name:"node-property",content:Re().createElement(Bn,{type:"node",form:w,visible:"node-property"===l,properties:v})},{name:"edge-property",content:Re().createElement(Bn,{type:"edge",form:w,visible:"edge-property"===l,properties:m})}];return Re().createElement("div",{style:e.style},Re().createElement("div",{className:"content-wrapper",id:"select-drop-down-area"},Re().createElement("div",{className:"title-wrapper"},Re().createElement("span",{className:"title"},"算法")),Re().createElement(Ae.Form,{form:w},Re().createElement(Ae.Radio.Group,{onChange:e=>{s(e.target.value)},value:l},A.map((e=>Re().createElement("div",{key:e.name},Re().createElement(Ae.Radio,{value:e.name,className:"algo-radio"},Re().createElement("div",{className:"algo-title"},Re().createElement("span",{className:"algo-name"},Tn[e.name]),Re().createElement("span",{className:"algo-tip"},"(",Tn[`${e.name}-tip`],")"))),l===e.name&&e.content)))))),Re().createElement(Ae.Row,null,Re().createElement(Ae.Col,{span:16},Re().createElement(Ae.Button,{className:"button",type:"primary",onClick:()=>{p(Math.random()),L()}},"分析")),Re().createElement(Ae.Col,{offset:"2",span:6,style:{textAlign:"right",lineHeight:"56px"}},Re().createElement(Ae.Button,{className:"button",danger:!0,onClick:()=>{E(),S([],[]),h(null),s("page-rank")},icon:Re().createElement(In.Z,null)}))),d&&Re().createElement(Ae.Tabs,{defaultActiveKey:"table",activeKey:b,onChange:C,tabBarExtraContent:{right:Re().createElement(Ae.Tooltip,{title:"下载CSV",placement:"topRight"},Re().createElement("i",{className:"iconfont icon-download",onClick:()=>{T("node"),T("edge")}}))}},Re().createElement(zn,{tab:"结果列表",key:"table"},I("table")),Re().createElement(zn,{tab:"统计图表",key:"plot"},I("plot"))))},registerMeta:()=>Object.assign({},Dn)};var Yn=c(135),$n=c(336),Xn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const qn=(e,t)=>{var{id:n}=e,r=Xn(e,["id"]);void 0===t&&(t=window.localStorage.getItem("GI_locale")||"zh-CN");let o=("zh-CN"===t?$n.Z[n]:Yn.Z[n])||n;return(0,Me.isEmpty)(r)||(o=null==o?void 0:o.replace(/\{.*?\}/g,(e=>r[e.replace(/\{/,"").replace(/\}/,"")]))),o};class Kn extends Re().Component{render(){const e=this.props,{id:t,locale:n=this.context.locale}=e,r=Xn(e,["id","locale"]);return qn(Object.assign({id:t},r),n)}}Kn.contextType=_e.GraphinContext;const{Option:Zn}=Ae.Select;var Qn,Jn;!function(e){e.KMeans="k-means"}(Qn||(Qn={})),function(e){e.EuclideanDistance="euclideanDistance"}(Jn||(Jn={}));const er={id:"NodesClustering",category:"algorithm-analysis",type:"GIAC_CONTENT",name:"节点聚类",desc:"使用 K-Means 算法计算节点的聚类",icon:"icon-Kjunzhijulei",cover:"http://xxxx.jpg"},{GIAC_CONTENT_METAS:tr,deepClone:nr}=Ie.extra,rr=nr(tr);rr.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=er.name,rr.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=er.icon;const or={info:er,component:t=>{const n=(0,Ie.useContext)(),{data:r,graph:o,layout:i,updateContext:a}=n,[l,s]=(0,Ne.useState)(Qn.KMeans),[c,u]=(0,Ne.useState)(null),[d,h]=(0,Ne.useState)({nodes:[],edges:[]}),[f,p]=(0,Ne.useState)(2),[v,g]=(0,Ne.useState)(Jn.EuclideanDistance),[m,y]=(0,Ne.useState)(!1),[b,C]=(0,Ne.useState)(!1),[w,x]=(0,Ne.useState)(null),[E,S]=(0,Ne.useState)({nodes:[],edges:[]}),[L,O]=(0,Ne.useState)({type:"graphin-force",options:{preset:"concentric"}}),I=()=>({nodes:(0,Me.cloneDeep)(o.getNodes()).map((e=>e.getModel())),edges:(0,Me.cloneDeep)(o.getEdges()).map((e=>e.getModel()))});(0,Ne.useEffect)((()=>{h({nodes:(0,Me.cloneDeep)(o.getNodes()).map((e=>e.getModel())),edges:(0,Me.cloneDeep)(o.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))})}),[r]);const _=[{name:Qn.KMeans,content:Re().createElement("div",{className:"nodes-clustering-algo-body"},Re().createElement("span",null,Re().createElement(Kn,{id:"itelligent-analysis.nodes-clustering.k-means.set-k"})),Re().createElement(Ae.InputNumber,{min:1,value:f,style:{margin:"10px 20px"},onChange:e=>p(e)}),Re().createElement("div",null,Re().createElement("span",null,Re().createElement(Kn,{id:"itelligent-analysis.nodes-clustering.k-means.set-distance-type"})),Re().createElement(Ae.Select,{defaultValue:v,style:{width:180},onChange:e=>g(e)},Re().createElement(Zn,{value:Jn.EuclideanDistance},Re().createElement(Kn,{id:"itelligent-analysis.nodes-clustering.k-means.distance-type.euclideanDistance"})))))}],T=()=>{w&&o.findById(w).hasState("active")&&o.setItemState(w,"active",!1)},A=(e,t)=>{T(),o.setItemState(e,"active",!0),x(e)};return(0,Ne.useEffect)((()=>{(0,Me.isEqual)(r,E)||(h(I()),u({nodes:[],edges:[]}),T(),a((e=>{e.layout=L}))),S((0,Me.cloneDeep)(r))}),[r]),(0,Ne.useEffect)((()=>{h(I()),O(i)}),[]),Re().createElement("div",null,Re().createElement("div",{className:"nodes-clustering-wrapper"},Re().createElement("div",{className:"top-info"},Re().createElement("p",{className:"nodes-clustering-title"},Re().createElement(Kn,{id:"itelligent-analysis.select-algo"})),Re().createElement(e.Z,{onClick:()=>{u({nodes:[],edges:[]}),s(Qn.KMeans),p(2),T(),a((e=>{e.data=d,e.layout=L}))}})),Re().createElement(Ae.Radio.Group,{onChange:e=>{u(null),s(e.target.value),C(!1),y(!1)},value:l},_.map((e=>Re().createElement("div",{key:e.name},Re().createElement(Ae.Radio,{value:e.name,className:"nodes-clustering-algo-radio"},Re().createElement("div",{className:"nodes-clustering-algo-title"},Re().createElement("span",{className:"nodes-clustering-algo-title-name"},Re().createElement(Kn,{id:`itelligent-analysis.nodes-clustering.${e.name}`})),Re().createElement("span",{className:"nodes-clustering-algo-title-tip"},Re().createElement(Kn,{id:`itelligent-analysis.nodes-clustering.${e.name}-tip`})))),e.content)))),Re().createElement(Ae.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},loading:b,onClick:()=>{y(!0),C(!0),setTimeout((()=>{const e=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>({id:e.id,label:e.label||e.data.label||e.data.name,properties:e.data.properties}))),edges:t.map((e=>Object.assign(Object.assign({},e),{id:e.id||e.data.id})))}))(r);if(l===Qn.KMeans){if(!o||o.destroyed)return;const{clusters:t}=Q(e,f,"properties",[],[],v);u(e);const n=((e,t,n)=>({nodes:null==e?void 0:e.nodes.map((e=>{var n;return Object.assign(Object.assign({},e),{comboId:null===(n=t.nodes.find((t=>t.id===e.id)))||void 0===n?void 0:n.clusterId,x:void 0,y:void 0})})),edges:null==e?void 0:e.edges,combos:n.map(((e,t)=>({id:String(t),label:`${qn({id:"category"})}${t}`})))}))(r,e,t);S(n),a((e=>{e.data=n,e.layout={type:"comboForce",preventOverlap:!0,preventNodeOverlap:!0,nodeSize:40,nodeSpacing:40,comboPadding:5,linkDistance:150,nodeStrength:300,comboCollideStrength:1,nodeCollideStrength:1,gravity:1,comboGravity:100,maxIteration:200,clustering:!1}}))}C(!1)}),100)}},Re().createElement(Kn,{id:"analyse"})),(()=>{var e;if(m)return b?Re().createElement(Ae.Spin,{spinning:!0},Re().createElement("div",{className:"kg-nodes-clustering-result-wrapper"})):(null===(e=null==c?void 0:c.nodes)||void 0===e?void 0:e.length)?Re().createElement("div",{className:"nodes-clustering-result-wrapper"},Re().createElement("span",{className:"intelligent-analysis-title nodes-clustering-result-title"},Re().createElement(Kn,{id:"analysis-result"})),Re().createElement(Xe,{data:c,clusterTitle:qn({id:"category"}),focusNodeAndHighlightHull:A})):Re().createElement(Ae.Empty,{image:Ae.Empty.PRESENTED_IMAGE_SIMPLE,description:Re().createElement(Kn,{id:"data.no-data"})})})()))},registerMeta:e=>Object.assign({},rr)},ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};var ar=function(e,t){return Ne.createElement(Be.Z,(0,De.Z)((0,De.Z)({},e),{},{ref:t,icon:ir}))};ar.displayName="FormOutlined";const lr=Ne.forwardRef(ar);var sr=c(334),cr=c(323),ur=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const dr=(e,t)=>{var{id:n}=e,r=ur(e,["id"]);void 0===t&&(t=window.localStorage.getItem("GI_locale")||"zh-CN");let o=("zh-CN"===t?cr.Z[n]:sr.Z[n])||n;return(0,Me.isEmpty)(r)||(o=null==o?void 0:o.replace(/\{.*?\}/g,(e=>r[e.replace(/\{/,"").replace(/\}/,"")]))),o};class hr extends Re().Component{render(){const e=this.props,{id:t,locale:n=this.context.locale}=e,r=ur(e,["id","locale"]);return dr(Object.assign({id:t},r),n)}}hr.contextType=_e.GraphinContext;const fr=({similarNodes:e,similarityKey:t="similarity",topReset:n})=>{const[r,o]=(0,Ne.useState)(!1);(0,Ne.useEffect)((()=>{o(!1)}),[n]);const i=e=>Number(`${e}`.slice(0,7));let a=[];const l=[];null==e||e.forEach(((e,n)=>{e.properties&&(a.push("id"),a=a.concat(Object.keys(e.properties)),l.push(Object.assign(Object.assign({},e.properties),{index:n,label:e.label,similarity:e[t]?i(e[t]):"-",id:e.id})))})),a=Array.from(new Set(a));const s=[{title:Re().createElement(hr,{id:"index"}),dataIndex:"index",key:"index",width:60,fixed:"left"},{title:Re().createElement(hr,{id:"node-name"}),dataIndex:"label",key:"label",textWrap:"word-break",ellipsis:!0,fixed:"left",width:100},{title:Re().createElement(hr,{id:"node-id"}),dataIndex:"id",key:"id",textWrap:"word-break",ellipsis:!0,width:100},{title:Re().createElement(hr,{id:`itelligent-analysis.nodes-similarity.table-title.${pr.nodesConsineSimilarity}`}),dataIndex:"similarity",key:"similarity",textWrap:"word-break",width:120,sortOrder:r,sorter:(e,t)=>e.similarity-t.similarity}];a.forEach((e=>{s.push({title:e,dataIndex:e,key:e,width:120,textWrap:"word-break",ellipsis:!0})}));const c=e[1],u=e[e.length-1];return Re().createElement(Re().Fragment,null,Re().createElement(Ae.Tooltip,{title:Re().createElement(hr,{id:"download-csv"}),placement:"topRight"},Re().createElement(Fe,{style:{float:"right"},onClick:()=>{const e=ze("similarity_result");Ge({data:l,title:[dr({id:"index"}),dr({id:"node-name"}),dr({id:`nodes-similarity.table-title.${pr.nodesConsineSimilarity}`})].concat(a),titleForKey:["index","label","similarity"].concat(a)},e)}})),Re().createElement("div",{className:"nodes-similarity-table-wrapper"},Re().createElement("div",{className:"nodes-similarity-statistic"},Re().createElement("div",null,Re().createElement("span",null,Re().createElement(hr,{id:"max"}),":"," "),Re().createElement("span",{className:"nodes-similarity-statistic-value"},i(c[t]),"（",null==c?void 0:c.label,"）")),Re().createElement("div",null,Re().createElement("span",null,Re().createElement(hr,{id:"min"}),":"," "),Re().createElement("span",{className:"nodes-similarity-statistic-value"},i(u[t]),"（",null==u?void 0:u.label,"）"))),Re().createElement(Ae.Table,{dataSource:l,columns:s,size:"small",showSorterTooltip:{title:dr({id:"sort"})},scroll:{x:200},onChange:(e,t,n,r)=>{"sort"===r.action&&o(n.order||!1)}})))};var pr;!function(e){e.nodesConsineSimilarity="nodes-cosine-similarity"}(pr||(pr={}));const vr={id:"NodesSimilarity",name:"节点相似性",category:"algorithm-analysis",type:"GIAC_CONTENT",desc:"节点到选定种子节点的余弦相似性",cover:"http://xxxx.jpg",icon:"icon-one-degree"},{GIAC_CONTENT_METAS:gr,deepClone:mr}=Ie.extra,yr=mr(gr);yr.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=vr.name,yr.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=vr.icon;const br={info:vr,component:t=>{const{style:n={}}=t,r=(0,Ie.useContext)(),{data:o,graph:i}=r,[a,l]=(0,Ne.useState)(pr.nodesConsineSimilarity),[s,c]=(0,Ne.useState)({nodes:[],edges:[]}),[u,d]=(0,Ne.useState)(pr.nodesConsineSimilarity),[h,f]=(0,Ne.useState)({similarityRes:[],similarNodes:[]}),[p,v]=(0,Ne.useState)(!1),[g,m]=(0,Ne.useState)(null),[y,b]=(0,Ne.useState)(!1),[C,w]=(0,Ne.useState)(!1);let x=e=>{};(0,Ne.useEffect)((()=>{c({nodes:(0,Me.cloneDeep)(i.getNodes()).map((e=>e.getModel())),edges:(0,Me.cloneDeep)(i.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))})}),[o]);const E=[{name:pr.nodesConsineSimilarity,content:Re().createElement(Re().Fragment,null)}],S=(e,t)=>{i.getNodes().forEach((t=>{var n,r,o;const a=t.get("id"),l=null===(n=s.nodes)||void 0===n?void 0:n.find((e=>e.id===a));l&&!(null==e?void 0:e.includes(a))&&i.updateItem(t,{style:{keyshape:{size:null===(o=null===(r=l.style)||void 0===r?void 0:r.keyshape)||void 0===o?void 0:o.size}}})})),i.getEdges().forEach((e=>{e.refresh()}))},L=e=>{w(!1);const t="string"==typeof e?e:e.target.value;m(t),i.findById(t)&&(i.updateItem(t,{style:{keyshape:{size:40}}}),i.getEdges().forEach((e=>{e.refresh()})))};return Re().createElement("div",{style:Object.assign({},n)},Re().createElement("div",{className:"nodes-similarity-wrapper"},Re().createElement("div",null,Re().createElement("p",{className:"nodes-similarity-title"},Re().createElement(hr,{id:"itelligent-analysis.nodes-similarity.select-seed-node"})),Re().createElement(Ae.Row,{justify:"space-between"},Re().createElement(Ae.Col,{span:22},Re().createElement(Ae.Input,{placeholder:dr({id:"itelligent-analysis.nodes-similarity.select-seed-node"}),style:{display:"block",margin:"0 0 30px 10px"},onChange:L,value:g})),Re().createElement(Ae.Col,{span:2,style:{lineHeight:"32px",textAlign:"right"}},Re().createElement(lr,{style:{cursor:"pointer",color:C?"#1890ff":"rgba(0, 0, 0, 0.65)"},onClick:()=>{w(!0),i.off("node:click",x),x=e=>{w(!1);const{item:t}=e;t&&!t.destroyed&&L(t.getID())},i.once("node:click",x)}})))),Re().createElement("div",{className:"top-info"},Re().createElement("p",{className:"nodes-similarity-title"},Re().createElement(hr,{id:"itelligent-analysis.select-algo"})),Re().createElement(e.Z,{onClick:()=>{S([]),f({similarityRes:[],similarNodes:[]}),l(pr.nodesConsineSimilarity),b(!0)}})),Re().createElement(Ae.Radio.Group,{onChange:e=>{S([]),f({similarityRes:[],similarNodes:[]}),l(e.target.value)},value:a},E.map((e=>Re().createElement("div",{key:e.name},Re().createElement(Ae.Radio,{value:e.name,className:"nodes-similarity-algo-radio"},Re().createElement("div",{className:"nodes-similarity-algo-title"},Re().createElement("span",{className:"nodes-similarity-algo-title-name"},Re().createElement(hr,{id:`itelligent-analysis.nodes-similarity.${e.name}`})),Re().createElement("span",{className:"nodes-similarity-algo-title-tip"},Re().createElement(hr,{id:`itelligent-analysis.nodes-similarity.${e.name}-tip`})))),e.content)))),Re().createElement(Ae.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},onClick:()=>{w(!1),v(!0);const e=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>({id:e.id,label:e.label||e.data.label,properties:e.data.properties}))),edges:t.map((e=>Object.assign(Object.assign({},e),{id:e.id||e.data.id})))}))(o);if(u===pr.nodesConsineSimilarity){if(!i||i.destroyed)return;const t=(null==e?void 0:e.nodes)||[],n=null==t?void 0:t.find((e=>e.id===g));n||Ae.message.info(dr({id:"seed-node-not-found"}));const{allCosineSimilarity:r,similarNodes:o}=ee(t,n,"properties");f({similarityRes:r,similarNodes:[n,...o]}),console.log("set node style",o),"cosineSimilarity",o.forEach((e=>{i.updateItem(e.id,{style:{keyshape:{size:Math.max(50*e.cosineSimilarity,30)}}})})),i.getEdges().forEach((e=>{e.refresh()}))}}},Re().createElement(hr,{id:"analyse"})),(()=>{if(!p)return;const{similarityRes:e,similarNodes:t}=h||{};return(null==e?void 0:e.length)?u===pr.nodesConsineSimilarity?Re().createElement("div",{className:"nodes-similarity-result-wrapper"},Re().createElement("span",{className:"nodes-similarity-title"},Re().createElement(hr,{id:"analysis-result"})),Re().createElement(fr,{similarNodes:t,topReset:y,similarityKey:"cosineSimilarity"})):void 0:Re().createElement(Ae.Empty,{image:Ae.Empty.PRESENTED_IMAGE_SIMPLE,description:Re().createElement(hr,{id:"data.no-data"})})})()))},registerMeta:e=>Object.assign({},yr)},Cr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var wr=function(e,t){return Ne.createElement(Be.Z,(0,De.Z)((0,De.Z)({},e),{},{ref:t,icon:Cr}))};wr.displayName="ExclamationCircleOutlined";const xr=Ne.forwardRef(wr);var Er=c(314),Sr=c.n(Er),Lr=c(130),Or=c(940),Ir=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const _r=(e,t)=>{var{id:n}=e,r=Ir(e,["id"]);void 0===t&&(t=window.localStorage.getItem("GI_locale")||"zh-CN");let o=("zh-CN"===t?Or.Z[n]:Lr.Z[n])||n;return(0,Me.isEmpty)(r)||(o=null==o?void 0:o.replace(/\{.*?\}/g,(e=>r[e.replace(/\{/,"").replace(/\}/,"")]))),o};class Tr extends Re().Component{render(){const e=this.props,{id:t,locale:n=this.context.locale}=e,r=Ir(e,["id","locale"]);return _r(Object.assign({id:t},r),n)}}Tr.contextType=_e.GraphinContext;const Ar={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var Mr=function(e,t){return Ne.createElement(Be.Z,(0,De.Z)((0,De.Z)({},e),{},{ref:t,icon:Ar}))};Mr.displayName="ArrowLeftOutlined";const Nr=Ne.forwardRef(Mr);var Rr=c(548),Dr=c(942),kr=c.n(Dr);const{addEdge:Br}=lt;class Pr extends Re().PureComponent{constructor(){super(...arguments),this.dragging=null,this.onOk=()=>{if(!this.dragging)return;const{options:e={}}=this.props,{onOk:t}=e,n=this.dragging.get("model"),{source:r,target:o}=n;null==t||t({source:r,target:o})},this.dragEdge=e=>{const{item:t,canvasX:n,canvasY:r}=e;t.getID()===et&&((this.props.graph||this.context.graph).updateItem(t,{target:{x:n,y:r}}),this.dragging=t)},this.drop=e=>{var t,n;if(!this.dragging)return;const{item:r}=e;r&&!(null===(t=r.isCanvas)||void 0===t?void 0:t.call(r))&&"node"===(null===(n=r.getType)||void 0===n?void 0:n.call(r))||this.cancelAdding(),(this.props.graph||this.context.graph).updateItem(this.dragging,{id:`edge-${ot}`,target:r.getID(),type:"graphin-line"}),this.onOk(),this.cancelAdding()},this.cancelAdding=()=>{const e=this.props.graph||this.context.graph;this.dragging=null,e.removeItem(et)},this.handleAddRelation=()=>{const{currentItem:e}=this.props,t=this.props.graph||this.context.graph,n=null==e?void 0:e.get("id");Br(n,t)}}componentDidMount(){const e=this.props.graph||this.context.graph;e.on("edge:drag",this.dragEdge),e.on("drop",this.drop),e.on("click",this.cancelAdding)}componentWillUnmount(){const e=this.props.graph||this.context.graph;e.off("edge:drag",this.dragEdge),e.off("drop",this.drop),e.off("click",this.cancelAdding)}render(){const{name:e}=this.props;return Re().createElement("a",{onClick:this.handleAddRelation},e)}}Pr.defaultProps={options:{onOk:()=>{}}};const Fr=Pr,jr={id:"PatternMatch",name:"模式匹配",category:"algorithm-analysis",type:"GIAC_CONTENT",desc:"选定图模式，找到相似结构的子图",cover:"http://xxxx.jpg",icon:"icon-query-path"},zr="|SPLITOR|";var Gr;!function(e){e.Active="active",e.Default="default",e.Selected="selected",e.Disable="disable",e.Highlight="highlight",e.Inactive="inactive"}(Gr||(Gr={}));const{GIAC_CONTENT_METAS:Hr,deepClone:Wr}=Ie.extra,Ur=Wr(Hr);Ur.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=jr.name,Ur.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=jr.icon;const{Option:Vr}=Ae.Select,{debounce:Yr}=lt,$r=({color:e,pid:t,properties:n,visible:r,form:o,disabled:i,configColor:a=!0,deleteItem:l,openColorPanel:s=(()=>{}),emitPropertyConfigChange:c=(()=>{})})=>{const u=()=>{const e=o.getFieldsValue(),n=Object.keys(e).filter((n=>{var r,o;const i=null==e?void 0:e[n];return(null===(r=n.split(zr))||void 0===r?void 0:r[0])===(null===(o=t.split(zr))||void 0===o?void 0:o[0])&&!!i}));(null==n?void 0:n.length)>=3&&c(e)},d=(0,Ne.useCallback)(Yr(u,500),[]);return(0,Ne.useEffect)((()=>{o.setFieldsValue({[`${t}|SPLITOR|color`]:e})}),[]),n&&r?Re().createElement(Ae.Row,{className:"kg-style-config-property-item",key:t,style:a?{}:{width:"100%"}},Re().createElement(Ae.Col,{span:8},Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:`${t}|SPLITOR|name`},Re().createElement(Ae.Select,{className:"kg-style-config-property-select",size:"small",placeholder:_r({id:"select-property"}),onChange:u,disabled:i},n.map((e=>Re().createElement(Vr,{value:e,key:e},e)))))),Re().createElement(Ae.Col,{span:a?5:6,offset:1},Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:`${t}|SPLITOR|operator`},Re().createElement(Ae.Select,{className:"kg-style-config-property-select",size:"small",onChange:u,dropdownMatchSelectWidth:!1,disabled:i},[">",">=","<=","<","=","!=","like","unlike"].map((e=>Re().createElement(Vr,{value:e,key:e},e)))))),Re().createElement(Ae.Col,{span:a?5:6,offset:1},Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:`${t}|SPLITOR|value`},Re().createElement(Ae.Input,{style:{width:"100%",height:"24px"},placeholder:_r({id:"enter-property-value"}),onChange:d,disabled:i}))),a&&Re().createElement(Ae.Col,{span:2,offset:1},e?Re().createElement("div",{className:"kg-style-config-property-item-color",style:{backgroundColor:e},onClick:e=>i?{}:null==s?void 0:s(e,t)}):Re().createElement("i",{className:"icon-ic_opacity iconfont kg-style-config-property-item-no-color",onClick:e=>s(e,t)})),Re().createElement(Ae.Col,{span:1,offset:a?0:1},Re().createElement(In.Z,{onClick:()=>l(t)}))):Re().createElement("div",{key:t})},{Option:Xr}=Ae.Select,{createUuid:qr}=lt,Kr=({type:e,itemData:t,visible:n,nodeProperties:r,edgeProperties:o,nodeTypes:i,edgeTypes:a,container:l,saveItem:s,onClose:c})=>{var u;const[d]=Ae.Form.useForm(),{getFieldsValue:h,setFieldsValue:f,validateFields:p,resetFields:v}=d,[g,m]=(0,Ne.useState)(),[y,b]=(0,Ne.useState)(),[C,w]=(0,Ne.useState)(),[x,E]=(0,Ne.useState)([]),[S,L]=(0,Ne.useState)([]),[O,I]=(0,Ne.useState)([]),[_,T]=(0,Ne.useState)(),A=(e,t)=>{switch(t){case"source":m(e),d.setFieldsValue({"edge.edgeType":null});break;case"target":b(e),d.setFieldsValue({"edge.edgeType":null});break;case"node":w(e)}L([])},M=n=>{L((r=>{const o=[...r];let i;o.forEach((e=>{e.color&&(i=e.color)})),i="#2E71D6"===i?"#D97825":"#2E71D6";const a=n||qr();return o.push({id:`${a}|SPLITOR|${e}|SPLITOR|${t.id}`,color:i,visible:!0}),o}))},N=e=>{const t=[...S];t.forEach(((n,r)=>{n.id===e&&t.splice(r,1)}));const n=h();delete n[`${e}|SPLITOR|name`],delete n[`${e}|SPLITOR|value`],delete n[`${e}|SPLITOR|operator`],delete n[`${e}|SPLITOR|color`],f(Object.assign({},n)),L(t)},R=()=>{L([]),m(void 0),b(void 0),w(void 0),T(void 0),c()};(0,Ne.useEffect)((()=>{T(void 0);const e=g||(null==t?void 0:t.sourceNodeType),n=y||(null==t?void 0:t.targetNodeType);if(e&&n){const t=[];a.forEach((r=>{const{sourceNodeType:o,targetNodeType:i}=r;o===e&&i===n&&t.push(r)})),E(t)}else E([])}),[g,y,null==t?void 0:t.id]),(0,Ne.useEffect)((()=>{var n;(null==t?void 0:t.sourceNodeType)&&m(null==t?void 0:t.sourceNodeType),(null==t?void 0:t.targetNodeType)&&b(null==t?void 0:t.targetNodeType),L([]),(null==t?void 0:t.rules)&&(null===(n=null==t?void 0:t.rules)||void 0===n||n.forEach((n=>{const r=qr(),o=`${r}|SPLITOR|${e}|SPLITOR|${t.id}`;setTimeout((()=>{f({[`${o}|SPLITOR|name`]:n.name,[`${o}|SPLITOR|operator`]:n.rule,[`${o}|SPLITOR|value`]:n.value})}),0),M(r)})))}),[null==t?void 0:t.data,null==t?void 0:t.rules]),(0,Ne.useEffect)((()=>{T("edge"===e?null==t?void 0:t.edgeType:void 0),w("node"===e?null==t?void 0:t.nodeType:void 0),v()}),[null==t?void 0:t.id]),(0,Ne.useEffect)((()=>{C&&I(Array.from(r[C]))}),[C]);const D=x&&(null==x?void 0:x.length),k=Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:"edge.edgeType",key:"edge.edgeType"},Re().createElement(Ae.Select,{showSearch:!0,placeholder:Re().createElement(Tr,{id:"please-select"}),style:{width:316,marginTop:8},onSelect:e=>{I(Array.from(o[e])),T(e)},dropdownMatchSelectWidth:!1,disabled:!D,defaultValue:(null==t?void 0:t.edgeType)?`${null==t?void 0:t.sourceNodeType}_${null==t?void 0:t.edgeType}_${null==t?void 0:t.targetNodeType}`:void 0},null==x?void 0:x.map((e=>Re().createElement(Xr,{value:e.key,key:e.key},e.content))))),B="edge"===e?(null==x?void 0:x.length)&&(_||(null==t?void 0:t.edgeType)):!!C||(null==t?void 0:t.edgeType),P=Re().createElement("div",null,null==S?void 0:S.map((e=>Re().createElement($r,{pid:e.id,properties:O,deleteItem:N,color:null==e?void 0:e.color,visible:null==e?void 0:e.visible,form:d,disabled:!B,configColor:!1}))),(null===(u=null==S?void 0:S.filter((e=>e.visible)))||void 0===u?void 0:u.length)<2&&Re().createElement(Ae.Button,{className:"kg-style-config-add-property-button",type:"dashed",onClick:()=>{M()},disabled:!B},Re().createElement(Tr,{id:"add-property"}))),F=t=>Re().createElement(Re().Fragment,null,Re().createElement(Tr,{id:"property-condition"}),"   ",Re().createElement("span",{className:"kg-pattern-match-tip"},Re().createElement(Tr,{id:"optional"})),Re().createElement("br",null),B?P:Re().createElement(Ae.Tooltip,{title:"edge"===e&&(null==x?void 0:x.length)&&_||"node"===t&&(null==i?void 0:i.length)&&C?"":Re().createElement(Tr,{id:`select-${t}-before-property`})},P)),j=e=>{var n;return Re().createElement(Re().Fragment,null,Re().createElement(Tr,{id:e}),(null==t?void 0:t[`${e}NodeType`])?Re().createElement("span",null," : ",(null===(n=i.find((n=>n.key===(null==t?void 0:t[`${e}NodeType`]))))||void 0===n?void 0:n.content)||(null==t?void 0:t[`${e}NodeType`])," ",Re().createElement("br",null),Re().createElement("br",null)):Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:`edge.${e}NodeType`,key:`edge.${e}NodeType`},Re().createElement(Ae.Select,{showSearch:!0,placeholder:Re().createElement(Tr,{id:"please-select"}),style:{width:316,marginTop:8},onSelect:t=>A(t,e),dropdownMatchSelectWidth:!1},i.map((e=>Re().createElement(Xr,{value:e.key,key:e.key},e.content))))))},z=Re().createElement(Ae.Form,{form:d,name:"edge"},j("source"),j("target"),Re().createElement(Tr,{id:"relation-type"}),Re().createElement("br",null),D?k:Re().createElement(Ae.Tooltip,{title:x?Re().createElement(Tr,{id:"no-edge-type-for-nodes"}):Re().createElement(Tr,{id:"select-node-before-edge"})},k),F("edge")),G=Re().createElement(Ae.Form,{form:d,name:"node"},Re().createElement(Tr,{id:"entity-type"}),Re().createElement(Ae.Form.Item,{rules:[{required:!0,message:_r({id:"not-empty"})}],name:"node.nodeType",key:"node.nodeType"},Re().createElement(Ae.Select,{showSearch:!0,placeholder:Re().createElement(Tr,{id:"please-select"}),style:{width:316,marginTop:8},onSelect:e=>A(e,"node"),dropdownMatchSelectWidth:!1,defaultValue:null==t?void 0:t.nodeType},i.map((e=>Re().createElement(Xr,{value:e.key,key:e.key},e.content))))),F("node"));let H="edge"===e?z:G,W="edge"===e?"编辑边":"编辑点";t||(H=Re().createElement(Re().Fragment,null),W="");const U="edge"===e&&!_&&!(null==t?void 0:t.edgeType);return Re().createElement(Ae.Drawer,{title:W,visible:n,width:364,closable:!0,onClose:R,mask:!1,style:{textAlign:"left"},footerStyle:{textAlign:"right"},getContainer:l||!1,footer:Re().createElement(Re().Fragment,null,Re().createElement(Ae.Button,{onClick:R},Re().createElement(Tr,{id:"cancel"})),Re().createElement(Ae.Tooltip,{title:U?"关系类型不可为空":"",placement:"topRight"},Re().createElement(Ae.Button,{type:"primary",style:{marginLeft:"8px"},onClick:()=>{const n=h();p().then((r=>{const o={id:t.id,data:{},rules:[]},i={};n&&Object.keys(n).forEach((t=>{const r="node.nodeType"===t?C:n[t];if(void 0!==r&&("node"===e&&"node.nodeType"===t?o.nodeType=r:"edge"===e&&"edge.edgeType"===t?o.edgeType=r.split(zr)[1]:"edge"===e&&("edge.sourceNodeType"===t?o.sourceNodeType=r:"edge.targetNodeType"===t&&(o.targetNodeType=r)),4===t.split(zr).length)){const[e,n,o,a]=t.split(zr);switch(i[e]||(i[e]={}),a){case"name":i[e].name=r,i[e].key=r;break;case"operator":i[e].rule=r;break;case"value":i[e].value=r}}})),Object.values(i).forEach((e=>{o.rules.push(e)})),null==s||s(e,o)})),R()},disabled:U},Re().createElement(Tr,{id:"confirm"}))))},H)},Zr=[{id:"template-0",name:"2-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"}],edges:[{source:"node-1",target:"node-2"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Lxr3SqrbBoYAAAAAAAAAAAAAARQnAQ"},{id:"template-1",name:"3-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hg-JR5jqtv8AAAAAAAAAAAAAARQnAQ"},{id:"template-2",name:"4-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"},{id:"node-4"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-4"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MtiXQ7NXhGEAAAAAAAAAAAAAARQnAQ"},{id:"template-3",name:"3-node-cycle",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-1"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HnRpTYgqPpcAAAAAAAAAAAAAARQnAQ"},{id:"template-4",name:"4-node-cycle",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"},{id:"node-4"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-4"},{source:"node-4",target:"node-1"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Vri_TbluXgEAAAAAAAAAAAAAARQnAQ"}],Qr=(e,t,n,r={})=>(null==t?void 0:t.map((t=>{var o;const i=t[`${e}Type`];let a={};i&&(a=n[`${e}s`].find((e=>e.groupName===`${i.toUpperCase()} TYPE`))||a);const{color:l="#ccc",size:s=("node"===e?30:1)}=a.props||{},c=Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style),{keyshape:{size:s,fill:"node"===e?l:void 0,stroke:l},label:"string"==typeof t.label?{value:t.label}:(null===(o=t.style)||void 0===o?void 0:o.label)||t.label})});if("edge"===e){const e=r[t.edgeType];e&&(c.sourceNodeType=e.sourceNodeType,c.targeteEdgeType=e.targetNodeType)}return c})))||[],{TabPane:Jr}=Ae.Tabs,{Search:eo}=Ae.Input,{Header:to,Sider:no,Content:ro}=Ae.Layout,{ClickSelect:oo,DragCanvas:io,ZoomCanvas:ao,DragNode:lo,DragCombo:so,LassoSelect:co}=_e.Behaviors,{breadthFirstSearch:uo}=Oe,{createUuid:ho,fittingString:fo,focusNodeY:po}=lt,{deepClone:vo}=Ie.extra;let go=0;const mo={nodes:[],edges:[]},yo=({visible:e,patternInfo:t,nodeProperties:n,edgeProperties:r,nodeTypes:o,edgeTypes:i,schemaEdgeMap:a,schemaNodeMap:l,setVisible:s,savePattern:c})=>{var u;const{schemaData:d,data:h,config:f}=(0,Ie.useContext)(),p=(0,Ne.useRef)(),v=(0,Ne.useRef)(),g=Re().createRef(),[m,y]=(0,Ne.useState)((null==t?void 0:t.data)||{nodes:[],edges:[]}),[b,C]=(0,Ne.useState)([]),[w,x]=(0,Ne.useState)({type:"node",visible:!1,item:null,x:0,y:0}),[E,S]=(0,Ne.useState)({}),[L,O]=(0,Ne.useState)("node"),[I,_]=(0,Ne.useState)(),T=()=>{var e;const t=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&t.findAllByState("node",Gr.Active).forEach((e=>{t.clearItemStates(e,Gr.Active),t.updateItem(e,{})}))};(0,Ne.useEffect)((()=>{var t,r;const o=null===(t=null==p?void 0:p.current)||void 0===t?void 0:t.graph;if(T(),e&&o&&!o.destroyed){const e=p.current.graphDOM;o.changeSize(e.clientWidth,e.clientHeight);const t=null===(r=null==v?void 0:v.current)||void 0===r?void 0:r.graph,i=v.current.graphDOM;i.style.backgroundColor="rgba(0, 0, 0, 0)",t.changeSize(i.clientWidth,i.clientHeight);const a=(0,Me.cloneDeep)(d);a.nodes.forEach((e=>{const{nodeType:t}=e;e.id=`${t}-${ho()}`,e.originLabel=t,e.ellipsedLabel=fo(t,140,12),e.style=Object.assign(Object.assign({},e.style),{label:{value:e.ellipsedLabel}})}));const l=a.nodes.filter((e=>!!n[e.nodeType]));C(Qr("node",l,f))}else e||O("node")}),[e]),(0,Ne.useEffect)((()=>{var e;const t=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&(1===(null==b?void 0:b.length)?setTimeout((()=>{t.updateItem(b[0].id,{x:30,y:50})}),0):t.updateLayout({type:"grid",cols:3,width:200,nodeSize:50}))}),[b]),(0,Ne.useEffect)((()=>{var e,t;const n=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;n.on("node:click",(e=>{T(),go+=1;const t=e.item.getModel(),n=ho(),r=Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style),{label:{value:`${t.nodeType}-n${go}`}}),id:n});r.id=n,delete r.x,delete r.y,y((e=>({nodes:[...e.nodes].concat([r]),edges:_e.Utils.processEdges(e.edges)})))}));const r=null===(t=null==p?void 0:p.current)||void 0===t?void 0:t.graph;r.needHighlightRelative=!0,r.on("node:contextmenu",(e=>{e.preventDefault();const t=e.item.getModel(),n=r.getCanvasByPoint(t.x,t.y),o=r.getContainer().offsetTop,i=r.getContainer().offsetLeft;x({type:"node",visible:!0,item:e.item,x:n.x+i,y:n.y+o})})),r.on("edge:contextmenu",(e=>{e.preventDefault();const t=r.getCanvasByPoint(e.x,e.y),n=r.getContainer().offsetTop,o=r.getContainer().offsetLeft;x({type:"edge",visible:!0,item:e.item,x:t.x+o,y:t.y+n})})),r.on("canvas:click",(e=>{x((e=>Object.assign(Object.assign({},e),{visible:!1}))),S({})})),r.on("node:click",(e=>{S({type:"node",id:e.item.getID()})})),r.on("edge:click",(e=>{const t=e.item.getModel();S({type:"edge",id:t.id})})),n.on("node:mouseenter",(e=>{var t,r,o;n.updateItem(e.item,{style:{label:{value:(null===(o=null===(r=(t=e.item).getModel)||void 0===r?void 0:r.call(t))||void 0===o?void 0:o.originLabel)||""}}})})),n.on("node:mouseleave",(e=>{var t,r,o;n.updateItem(e.item,{style:{label:{value:(null===(o=null===(r=(t=e.item).getModel)||void 0===r?void 0:r.call(t))||void 0===o?void 0:o.ellipsedLabel)||""}}})}))}),[]),(0,Ne.useEffect)((()=>{const e=(null==t?void 0:t.data)||mo;y({nodes:Qr("node",e.nodes,f),edges:_e.Utils.processEdges(Qr("edge",e.edges,f,a))})}),[null==t?void 0:t.data]),(0,Ne.useEffect)((()=>{const n=e&&(null==t?void 0:t.data)||mo;y({nodes:Qr("node",n.nodes,f),edges:_e.Utils.processEdges(Qr("edge",n.edges,f,a))})}),[e]);const A=()=>{s(!1)},M=(e,t,n)=>{const r=n[`${e}s`].find((e=>e.id===t.id));if(!r)return{};const o=(null==t?void 0:t[`${e}Type`])||r[`${e}Type`];let i,s={},c=!1;const u=kr()(r,t);o&&(u.virtual=!1,s=("node"===e?l:a)[o]);const d={nodes:[],edges:[]};"node"===e?d.nodes=[u]:(s&&(u.edgeType=s.edgeType,u.style=Object.assign(Object.assign({},u.style),{label:{value:s.edgeType}}),u.label=s.edgeType),u.type="graphin-line",d.nodes=n.nodes,d.edges=[u]);let{nodes:h,edges:p}=vo(d);h=Qr("node",h,f),p=Qr("edge",p,f,a);let v={nodes:[],edges:[]};return"node"===e?(i=h[0],v={nodes:[],edges:n.edges},o!==r.nodeType&&(go+=1,i.style=Object.assign(Object.assign({},i.style),{label:{value:`${o}-n${go}`}}),v.edges.forEach(((e,t)=>{if(e.source===i.id||e.target===i.id){c=!0;const n={id:e.id,source:e.source,target:e.target,virtual:!0,type:"graphin-line",sourceNodeType:e.source===i.id?o:e.sourceNodeType,targetNodeType:e.target===i.id?o:e.targetNodeType},r=Qr("edge",[n],f,a);v.edges.splice(t,1,r[0])}})))):(i=p[0],v={nodes:n.nodes,edges:[]}),i.rules=t.rules||i.rules,n[`${e}s`].forEach((n=>{v[`${e}s`].push(n.id===t.id?i:n)})),{newGraphData:v,oldDataItem:r,newItem:i,hasRelated:c}},N=e=>{var t,n,r,o;const i=null===(t=w.item)||void 0===t?void 0:t.getModel(),a=null===(n=null==p?void 0:p.current)||void 0===n?void 0:n.graph;if(a&&!a.destroyed&&i){switch(e){case"removeNode":{const e=null===(r=a.findAllByState("node",Gr.Selected))||void 0===r?void 0:r.map((e=>e.getID()));(null==e?void 0:e.length)||e.push(i.id),y((t=>({nodes:t.nodes.filter((t=>!e.includes(t.id))),edges:_e.Utils.processEdges(t.edges.filter((t=>!e.includes(t.target)&&!e.includes(t.source))))}))),S({});break}case"removeEdge":{const e=null===(o=a.findAllByState("edge",Gr.Selected))||void 0===o?void 0:o.map((e=>e.getID()));(null==e?void 0:e.length)||e.push(i.id),y((t=>({nodes:t.nodes,edges:_e.Utils.processEdges(t.edges.filter((t=>!e.includes(t.id))))}))),S({});break}}x((e=>Object.assign(Object.assign({},e),{visible:!1})))}};return(0,Ne.useEffect)((()=>{var e;if(null==E?void 0:E.type){const t=null===(e=null==m?void 0:m[`${null==E?void 0:E.type}s`])||void 0===e?void 0:e.find((e=>e.id===(null==E?void 0:E.id)));_(t)}else _(void 0)}),[E]),Re().createElement(Ae.Layout,{className:"kg-pattern-match-editor-container",style:{display:e?"block":"none"}},Re().createElement(to,{className:"kg-pattern-match-editor-header"},Re().createElement(Ae.Row,null,Re().createElement(Ae.Col,{span:4,onClick:A},Re().createElement(Nr,{className:"kg-pattern-match-editor-back"}),Re().createElement("span",{className:"kg-pattern-match-editor-title"},null==t?void 0:t.title)),Re().createElement(Ae.Col,{span:4,offset:16},Re().createElement(Ae.Button,{onClick:A},Re().createElement(Tr,{id:"cancel"})),Re().createElement(Ae.Button,{className:"kg-pattern-match-editor-save",type:"primary",onClick:()=>{var e;if(!(null===(e=null==m?void 0:m.nodes)||void 0===e?void 0:e.length))return void Ae.message.info(_r({id:"save-failed-not-empty"}));const n=m.nodes.filter((e=>!e.nodeType));if(null==n?void 0:n.length)return void Ae.message.info(_r({id:"save-failed-no-empty-type"}));const r=m.edges.filter((e=>!e.edgeType));if(null==r?void 0:r.length)return void Ae.message.info(_r({id:"save-failed-no-empty-type"}));const o={};uo(m,m.nodes[0].id,{enter:({current:e})=>{o[e]=!0}},!1),Object.keys(o).length<m.nodes.length?Ae.message.info(_r({id:"save-failed-must-connected"})):(c(null==t?void 0:t.id,m),A())}},Re().createElement(Tr,{id:"save"}))))),Re().createElement(Ae.Divider,{className:"kg-pattern-match-editor-divider"}),Re().createElement(Ae.Layout,{className:"kg-pattern-match-editor-content"},Re().createElement(no,{className:"kg-pattern-match-editor-left-sider",width:240},Re().createElement(Ae.Tabs,{className:"kg-pattern-match-editor-adder",defaultActiveKey:"node",activeKey:L,onChange:e=>O(e)},Re().createElement(Jr,{tab:Re().createElement(Tr,{id:"add-node"}),key:"node"},Re().createElement(eo,{placeholder:_r({id:"input-name-search-node"}),onSearch:e=>{var t;T();const n=e.toLowerCase(),r=b.find((t=>t.nodeType===e||t.nodeType.toLowerCase()===n));if(r){const e=null===(t=null==v?void 0:v.current)||void 0===t?void 0:t.graph;if(!e||e.destroyed)return;const n=e.findById(r.id);n&&(po(e,n,e.get("height"),50),e.setItemState(n,Gr.Active,!0))}},style:{width:200}}),Re().createElement("div",{className:"kg-pattern-match-schema-graph-wrapper"},Re().createElement(Te(),{data:{nodes:b,edges:[]},ref:v,layout:{type:"grid",cols:3,width:200,nodeSize:50},animate:!1,modes:{default:[{type:"scroll-canvas",direction:"y",scalableRange:-.99}]}},Re().createElement(oo,{disabled:!0}),Re().createElement(ao,{disabled:!0}),Re().createElement(io,{disabled:!0}),Re().createElement(co,{disabled:!0}),Re().createElement(lo,{disabled:!0}),Re().createElement(so,{disabled:!0})))),Re().createElement(Jr,{tab:Re().createElement(Tr,{id:"add-template"}),key:"template",style:{height:"100%"}},Re().createElement("div",{className:"kg-pattern-match-template-wrapper"},Zr.map((e=>Re().createElement("div",{className:"kg-pattern-match-template",key:e.id,onClick:()=>(e=>{const t=(e=>{const t={nodes:[],edges:[]},n={};return e.nodes.forEach((e=>{const r=Object.assign(Object.assign({},e),{id:`${e.id}${ho()}`,style:{keyshape:{stroke:"#959595",fill:"#959595"}}});n[e.id]=r,t.nodes.push(r)})),e.edges.forEach((e=>{t.edges.push(Object.assign(Object.assign({},e),{id:e.id?`${e.id}${ho()}`:ho(),type:"graphin-line",source:n[e.source].id,target:n[e.target].id,name:"",style:{keyshape:{stroke:"#959595",lineDash:[5,5]}}}))})),t})(e.data);y((e=>({nodes:e.nodes.concat(t.nodes),edges:_e.Utils.processEdges(e.edges.concat(t.edges))})))})(e),style:{backgroundImage:`url("${e.screenshot}")`,backgroundSize:"100%"}}))))))),Re().createElement(ro,null,Re().createElement(Te(),{data:m,ref:p,layout:{type:"dagre",rankdir:"lr"},animate:!1,minZoom:.1,modes:{default:["kg-drag-node","kg-zoom-canvas","kg-click","kg-hover"],edit:["kg-drag-canvas","kg-zoom-canvas","kg-drag-node","kg-link-edge"]}},Re().createElement(oo,{disabled:!0}),Re().createElement(ao,{disabled:!0}),Re().createElement(io,null),Re().createElement(co,null),Re().createElement(lo,{disabled:!0}),Re().createElement(so,{disabled:!0}),Re().createElement("div",{className:"graph-contextmenu-content",style:{width:"80px",visibility:w.visible?"visible":"hidden",position:"absolute",top:`${w.y}px`,left:`${w.x}px`},ref:g},"node"===w.type?Re().createElement(Ae.Menu,null,Re().createElement(Ae.Menu.Item,{key:"removeNode",onClick:()=>N("removeNode")},Re().createElement(Tr,{id:"delete-node"})),Re().createElement(Ae.Menu.Item,{key:"addRelation",onClick:()=>N("addRelation")},Re().createElement(Fr,{graph:null===(u=null==p?void 0:p.current)||void 0===u?void 0:u.graph,currentItem:w.item,options:{onOk:({source:e,target:t})=>{let n,o;m.nodes.forEach((r=>{r.id!==e?r.id===t&&(o=r.nodeType):n=r.nodeType}));let i=!1;if(n&&o?Object.keys(r).forEach((e=>{const[t,r,a]=e.split(zr)||[];t===n&&a===o&&(i=!0)})):i=!0,!i)return void Ae.message.info(_r({id:"create-edge-failed-no-edge-type",sourceType:n,targetType:o}));const a=`${e}-${t}-${(0,Rr.EL)()}`,l={id:a,source:e,target:t,type:"graphin-line"};S({type:"edge",id:a}),setTimeout((()=>{_(l)}),0),y((e=>{const t=[...e.edges];return t.push(l),{nodes:e.nodes,edges:_e.Utils.processEdges(t)}}))}},name:Re().createElement(Tr,{id:"contextmenu-add-relation"})}))):Re().createElement(Ae.Menu,null,Re().createElement(Ae.Menu.Item,{key:"removeEdge",onClick:()=>N("removeEdge")},Re().createElement(Tr,{id:"delete-relation"}))))))),Re().createElement(Kr,Object.assign({},E,{itemData:I,visible:!!(null==E?void 0:E.type),nodeProperties:n,edgeProperties:r,nodeTypes:o,edgeTypes:i,container:null==p?void 0:p.current,saveItem:(e,t)=>{y((n=>{let r,o,i,l=n[`${e}s`].find((e=>e.id===t.id));return l?("node"===e?l.nodeType!==t.nodeType?(({newGraphData:r,oldDataItem:l,newItem:o,hasRelated:i}=M(e,t,n)),i&&(r.edges=Qr("edge",r.edges,f,a))):(l.rules=t.rules,r={nodes:n.nodes,edges:n.edges}):"edge"===e&&(r={nodes:n.nodes,edges:_e.Utils.processEdges(n.edges)},t.sourceNodeType&&(r=M("node",{id:l.source,nodeType:t.sourceNodeType},r).newGraphData),t.targetNodeType&&(r=M("node",{id:l.target,nodeType:t.targetNodeType},r).newGraphData),({newGraphData:r,oldDataItem:l,newItem:o}=M(e,t,r)),o.sourceNodeType=t.sourceNodeType||l.sourceNodeType,o.targetNodeType=t.targetNodeType||l.targetNodeType,r.edges=_e.Utils.processEdges(Qr("edge",r.edges,f,a))),r||n):n}))},onClose:()=>{S({})}})))},bo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var Co=function(e,t){return Ne.createElement(Be.Z,(0,De.Z)((0,De.Z)({},e),{},{ref:t,icon:bo}))};Co.displayName="DownOutlined";const wo=Ne.forwardRef(Co),{exportGraphData:xo}=lt,{ClickSelect:Eo}=_e.Behaviors,So=({id:e,data:t,schemaEdgeMap:n,editPattern:r,extractPattern:o,importData:i})=>{var a,l,s,c;const{config:u}=(0,Ie.useContext)(),d=(0,Ne.useRef)();(0,Ne.useEffect)((()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&(t.fitView(),t.get("canvas").set("localRefresh",!1))}),[t]),(0,Ne.useEffect)((()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&t.changeSize(456,246)}),[null===(l=null===(a=null==d?void 0:d.current)||void 0===a?void 0:a.graph)||void 0===l?void 0:l.get("width"),null===(c=null===(s=null==d?void 0:d.current)||void 0===s?void 0:s.graph)||void 0===c?void 0:c.get("height")]);const h=[Re().createElement(Ae.Menu.Item,{onClick:()=>null==r?void 0:r(e)},Re().createElement(Tr,{id:"edit-pattern"})),Re().createElement(Ae.Menu.Item,{onClick:()=>null==o?void 0:o(e)},Re().createElement(Ae.Tooltip,{title:Re().createElement(Tr,{id:"extract-pattern-tip"})},Re().createElement(Tr,{id:"extract-pattern"}))),Re().createElement(Ae.Menu.Item,null,Re().createElement(Ae.Upload,{accept:".json,.txt",onChange:t=>{const{file:n}=t,{status:r,type:o,name:a,originFileObj:l}=n||{};if("uploading"===r)if("json"===o||a.includes(".json")){const t=new FileReader;t.onload=()=>{if("string"==typeof t.result){const n=JSON.parse(t.result);null==i||i(n,e)}},t.readAsText(l)}else Ae.message.error(_r({id:"请上传 JSON 格式的数据"}))},fileList:[]},Re().createElement(Tr,{id:"import-pattern"})))],f=h.concat(Re().createElement(Ae.Menu.Item,{onClick:()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&xo(t.save(),"pattern-data")}},Re().createElement(Tr,{id:"download-pattern"}))),p=Re().createElement(Ae.Menu,null,h),v=Re().createElement(Ae.Menu,null,f),g=(0,Ne.useMemo)((()=>t?((e,t,n)=>({nodes:Qr("node",e.nodes,t),edges:_e.Utils.processEdges(Qr("edge",e.edges,t,n))}))(t,u,n):{nodes:[],edges:[]}),[t]);return Re().createElement("div",{className:"kg-pattern-pane-content"},t?Re().createElement("div",{className:"kg-pattern-pane-graph"},Re().createElement(Ae.Dropdown,{overlay:v,className:"kg-pattern-pane-edit"},Re().createElement("a",{onClick:e=>e.preventDefault()},Re().createElement(Tr,{id:"build-pattern"})," ",Re().createElement(wo,null))),Re().createElement(Te(),{width:388,height:246,data:g,ref:d,animate:!1,minZoom:.001,fitView:!0},Re().createElement(Eo,{disabled:!0}))):Re().createElement(Ae.Empty,{className:"kg-pattern-empty",image:Ae.Empty.PRESENTED_IMAGE_SIMPLE,description:Re().createElement("span",null,Re().createElement(Tr,{id:"no-pattern"}),"  ",Re().createElement(Ae.Dropdown,{overlay:p},Re().createElement("a",{onClick:e=>e.preventDefault()},Re().createElement(Tr,{id:"build-pattern"})," ",Re().createElement(wo,null))))}))},Lo=({matches:e=[]})=>{const{graph:t}=(0,Ie.useContext)(),n=()=>{t.findAllByState("node",Gr.Active).concat(t.findAllByState("edge",Gr.Active)).forEach((e=>{t.setItemState(e,Gr.Active,!1)}))};return Re().createElement("div",{className:"kg-pattern-match-result-wrapper"},Re().createElement("p",{className:"kg-pattern-match-result-title"},Re().createElement(Tr,{id:"result-title"})),Re().createElement(Ae.Table,{dataSource:e.map(((e,t)=>{var n,r;return{key:`${t}`,index:t+1,nodeNum:(null===(n=e.nodes)||void 0===n?void 0:n.length)||0,edgeNum:(null===(r=e.edges)||void 0===r?void 0:r.length)||0}})),columns:[{title:Re().createElement(Tr,{id:"index"}),dataIndex:"index",key:"index",width:60},{title:Re().createElement(Tr,{id:"node-count"}),dataIndex:"nodeNum",key:"nodeNum"},{title:Re().createElement(Tr,{id:"edge-count"}),dataIndex:"edgeNum",key:"edgeNum"}],size:"small",style:{marginTop:"16px"},showSorterTooltip:{title:_r({id:"sort"})},onRow:r=>({onMouseEnter:()=>(r=>{var o,i,a,l;n(),null===(i=null===(o=e[r.index-1])||void 0===o?void 0:o.nodes)||void 0===i||i.forEach((e=>{t.setItemState(e.id,Gr.Active,!0)})),null===(l=null===(a=e[r.index-1])||void 0===a?void 0:a.edges)||void 0===l||l.forEach((e=>{t.setItemState(e.id,Gr.Active,!0)}))})(r),onMouseLeave:n})}))};const{confirm:Oo}=Ae.Modal,{TabPane:Io}=Ae.Tabs,{GADDI:_o,breadthFirstSearch:To}=Oe,{createUuid:Ao,clearItemsStates:Mo,fittingString:No}=lt,Ro="kg-pattern-match-extract-message",Do="kg-pattern-match-extract-mode-canvas";let ko=1,Bo={width:500,height:500},Po=!1;const Fo={NodesClustering:or,NodesSimilarity:br,CommunityDetection:bt,NodeImportance:Vn,PatternMatch:{info:jr,component:({style:e,onClose:t,onOpen:n,options:r={}})=>{var o;const{onGraphEditorVisibleChange:i,onExtractModeChange:a,exportPattern:l,exportButton:s}=r,{graph:c,data:u,schemaData:d}=(0,Ie.useContext)(),[h,f]=(0,Ne.useState)("1"),[p,v]=(0,Ne.useState)(!1),[g,m]=(0,Ne.useState)([]),[y,b]=(0,Ne.useState)([]),[C,w]=(0,Ne.useState)(!1),[x,E]=(0,Ne.useState)(!1),[S,L]=(0,Ne.useState)({}),[O,I]=(0,Ne.useState)({}),[_,T]=(0,Ne.useState)([]),[A,M]=(0,Ne.useState)([]),[N,R]=(0,Ne.useState)({}),[D,k]=(0,Ne.useState)({}),B=(0,Ne.useMemo)((()=>({1:{id:"1",title:Re().createElement(Tr,{id:"pattern-title",value:"1"}),data:null}})),[]),[P,F]=(0,Ne.useState)(B),j=(e,t)=>{const n=Object.assign({},P);n[t].data=e,F(n)},[z,G]=(0,Ne.useState)((()=>[{title:Re().createElement(Tr,{id:"pattern-title",value:B[1].id}),content:Re().createElement(So,Object.assign({},B[1],{schemaEdgeMap:N,editPattern:()=>v(!0),importData:j})),key:B[1].id}]));(0,Ne.useEffect)((()=>{const e={},t={};d.edges.forEach((t=>e[t.edgeType]=t)),d.nodes.forEach((e=>t[e.nodeType]=e));const n={};u.nodes.forEach((e=>{n[e.nodeType]=n[e.nodeType]||new Set,Object.keys(e.data).forEach((t=>n[e.nodeType].add(t)))}));const r=Object.keys(n).map((e=>{const t=No(e,280,14);return{key:e,text:e,content:Re().createElement(Ae.Tooltip,{title:(null==t?void 0:t.includes("…"))?e:""},t)}})),o={};u.edges.forEach((t=>{const{edgeType:n}=t,r=e[n]||{},{sourceNodeType:i,targetNodeType:a}=r,l=`${i}|SPLITOR|${n}|SPLITOR|${a}`;o[l]=o[l]||new Set,Object.keys(t.data).forEach((e=>o[l].add(e)))}));const i=Object.keys(o).map((e=>{const[t,n,r]=e.split(zr),o=`${t} → ${r}`,i=No(n,280,14),a=No(o,280,14);return{key:e,typeName:n,sourceNodeType:t,targetNodeType:r,content:Re().createElement(Ae.Tooltip,{title:(null==i?void 0:i.includes("…"))||(null==a?void 0:a.includes("…"))?`${n} (${o})`:""},i,Re().createElement("p",{className:"kg-node-importance-tip"},a))}}));R(e),k(t),L(n),I(o),T(r),M(i)}),[u]),(0,Ne.useEffect)((()=>null==i?void 0:i(p)),[p]),(0,Ne.useEffect)((()=>{const e=z.map((e=>{var t;return Object.assign(Object.assign({},e),{content:Re().createElement(So,{id:e.key,data:null===(t=P[e.key])||void 0===t?void 0:t.data,schemaEdgeMap:N,editPattern:()=>v(!0),extractPattern:H,importData:j})})}));G(e)}),[P]);const H=e=>{c&&!c.destroyed&&(Bo={width:c.getWidth(),height:c.getHeight()},Ae.message.info({key:Ro,className:"kg-pattern-match-extract-tip-long",duration:0,content:_r({id:"extract-pattern-tip-long"}),style:{marginTop:"20px"}}),c.setMode("pattern-match-lasso"),Mo(c,c.getEdges(),[Gr.Selected]),Mo(c,c.getNodes(),[Gr.Selected]),E(e),null==t||t(),null==a||a(!0),q(!0))},W=()=>{c.setMode("default"),Ae.message.destroy(Ro),E(!1),null==n||n(),E(!1),null==a||a(!1),q(!1)},U=e=>{var t,n;if(!c||c.destroyed)return;const r="node"===(null===(n=null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t))?e.item.getID():void 0,o=c.getHulls();if(!o)return;const i=[];Object.keys(o).forEach((e=>{var t;const n=o[e];(void 0===r||(null===(t=null==n?void 0:n.members)||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.getID)||void 0===t?void 0:t.call(e))===r}))))&&i.push(e)})),i.forEach((e=>o[e].updateData(o[e].members,[])))},V=()=>{b((e=>{const t=c.get("hullMap")||{};return null==e||e.forEach((e=>{const n=c.getHullById(e);n&&c.removeHull(n),delete t[e]})),[]}))},Y=e=>{const t=e.key;t&&(Po="w"===t.toLowerCase())},$=e=>Po=!1;(0,Ne.useEffect)((()=>{c&&!c.destroyed&&(Mo(c,c.getEdges(),[Gr.Selected]),Mo(c,c.getNodes(),[Gr.Selected]))}),[h]),(0,Ne.useEffect)((()=>{if(Ae.message.destroy(Ro),c&&!c.destroyed)return c.addBehaviors([{type:"lasso-select",trigger:"drag",shouldDeselect:()=>!1},"click-select","zoom-canvas",{type:"drag-canvas",shouldBegin:()=>Po}],"pattern-match-lasso"),c.on("afterupdateitem",U),c.on("afterlayout",U),c.on("graphin:datachange",V),c.on("node:toggleevent",V),c.on("sizechange",X),c.on("keydown",Y),c.on("keyup",$),()=>{Ae.message.destroy(Ro),c&&!c.destroyed&&(q(!1),c.off("afterudpateitem",U),c.off("afterlayout",U),c.off("graphin:datachange",V),c.off("node:toggleevent",V),c.off("sizechange",X),c.off("keydown",Y),c.off("keyup",$))}}),[]);const X=({width:e,height:t})=>{Bo={width:e,height:t},c.get("canvas").get("el").classList.contains(Do)?setTimeout((()=>{c.changeSize(e-32,t-32)}),151):e===c.getWidth()&&t===c.getHeight()||c.changeSize(e,t)},q=e=>{const t=c.get("canvas").get("el");if(e)c.changeSize(Bo.width-32,Bo.height-32),t.classList.add(Do);else{const{width:e,height:n}=Bo;c.changeSize(e,n),t.classList.remove(Do)}},K=e=>{var t;if(z.length>3)return void Ae.message.info(_r({id:"pattern-num-limit"}));ko+=1;const n=`${ko}`,r=[...z],o=Object.assign({},P);o[n]={id:n,title:Re().createElement(Tr,{id:"pattern-title",value:n}),data:null},e&&(null===(t=P[e.key])||void 0===t?void 0:t.data)&&(o[n].data=(0,Me.cloneDeep)(P[e.key].data)),r.push({content:Re().createElement(So,{id:n,data:o[n],schemaEdgeMap:N,editPattern:()=>v(!0),importData:j}),title:Re().createElement(Tr,{id:"pattern-title",value:n}),key:n}),G(r),F(o),f(n)},Z=e=>{V();const t=[];e.forEach((e=>{var n;const r=Ao();t.push(r),e.hullId=r,c.createHull({id:r,members:null===(n=e.nodes)||void 0===n?void 0:n.map((e=>e.id)),padding:10})})),b(t)},Q=Re().createElement(Ae.Menu,{className:"kg-pattern-match-patten-tab-dropdown"},Re().createElement(Ae.Menu.Item,{key:"new",onClick:K},Re().createElement(Tr,{id:"new-pattern"})),null==z?void 0:z.map((e=>Re().createElement(Ae.Menu.Item,{key:e.key,onClick:()=>K(e)},Re().createElement(Tr,{id:"clone-title",value:e.key}))))),[J,ee]=(0,Ne.useState)();(0,Ne.useEffect)((()=>{const e=c.get("canvas").get("el").parentNode,t=document.createElement("div");return null==e||e.appendChild(t),ee(t),()=>{var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}}),[]);const te=x&&J&&Sr().createPortal(Re().createElement("div",{className:"kg-pattern-match-extract-buttons"},Re().createElement(Ae.Button,{onClick:()=>{if(E(!1),!c||c.destroyed)return;const e=c.findAllByState("node",Gr.Selected),t=c.findAllByState("node",Gr.Selected);(null==e?void 0:e.length)||(null==t?void 0:t.length)?Oo({title:_r({id:"extract-confirm-cancel"}),icon:Re().createElement(xr,null),content:_r({id:"extract-confirm-cancel-content"}),onOk(){Mo(c,c.getEdges(),[Gr.Selected]),Mo(c,c.getNodes(),[Gr.Selected]),c.setMode("default"),Ae.message.destroy(Ro),null==n||n(),W()}}):(c.setMode("default"),Ae.message.destroy(Ro),null==n||n(),W())}},Re().createElement(Tr,{id:"cancel"})),Re().createElement(Ae.Button,{type:"primary",onClick:()=>{if(!c||c.destroyed)return void W();if(!x)return;const e=x,t=(c.findAllByState("node",Gr.Selected)||[]).map((e=>e.getID())),n=(c.findAllByState("edge",Gr.Selected)||[]).map((e=>e.getID()));if(!t.length)return;const r={nodes:u.nodes.filter((e=>t.includes(e.id))),edges:u.edges.filter((e=>n.includes(e.id)))},o={};if(To(r,r.nodes[0].id,{enter:({current:e})=>{o[e]=!0}},!1),Object.keys(o).length<r.nodes.length)return void Ae.message.info(_r({id:"save-failed-must-connected"}));const i=Object.assign({},P),a={},l={nodes:[],edges:[]};r.nodes.forEach(((e,t)=>{const{id:n,nodeType:r}=e,o=Ao();a[n]={id:o,nodeType:r},l.nodes.push({id:o,oriId:n,cluster:void 0,rules:void 0,nodeType:r,style:{label:{value:`${r}-${l.nodes.length}`}},originLabel:`${r}-${l.nodes.length}`,data:{id:o,nodeType:r}})}));let s=!1;for(let e=0;e<r.edges.length;e++){const t=r.edges[e],{id:n,source:o,target:i,edgeType:c}=t;if(!a[o]||!a[i]){s=!0;break}const{id:u,nodeType:d}=a[o],{id:h,nodeType:f}=a[i];l.edges.push({id:`${u}-${h}-${Ao()}`,oriId:n,source:u,target:h,rules:[],type:u===h?"loop":"graphin-line",loopCfg:{position:"top",dist:u===h?25:20},style:{label:{value:`${c}-${l.edges.length}`}},label:`${c}-${l.edges.length}`,labelCfg:{autoRotate:!0},edgeType:c,sourceNodeType:d,targetNodeType:f})}s?Ae.message.info(_r({id:"save-failed-edge-must-have-nodes"})):(i[e].data=l,F(i),W())}},Re().createElement(Tr,{id:"confirm"}))),J);return Re().createElement("div",{style:e},Re().createElement("div",{className:"kg-pattern-match-content-wrapper"},Re().createElement("div",{className:"kg-pattern-match-pattern-add-wrapper",style:{left:1===z.length?79:106+108*(z.length-1),display:z.length>3?"none":"block"}},Re().createElement(Ae.Dropdown,{overlay:Q,placement:"bottomCenter"},Re().createElement("div",{className:"kg-pattern-match-pattern-add",onClick:K},"+"))),Re().createElement(Ae.Tabs,{type:"editable-card",activeKey:`${h}`,onChange:f,onEdit:(e,t)=>{"remove"===t&&(e=>{let t,n=h;z.forEach(((n,r)=>{n.key===e&&(t=r-1)}));const r=z.filter((t=>t.key!==e));r.length&&n===e&&(n=t>=0?r[t].key:r[0].key);const o=Object.assign({},P);delete o[e],f(n),F(o),G(r)})(e)},hideAdd:!0,style:{marginTop:z.length>3?"-4px":"-40px"}},z.map((e=>Re().createElement(Io,{tab:e.title,key:e.key,closable:z.length>1},e.content))))),Re().createElement(Ae.Row,{className:"button-wrapper",justify:"space-between"},Re().createElement(Ae.Col,{span:6},Re().createElement(Ae.Button,{className:"kg-pattern-match-apply-button",style:{display:x?"none":"inline-block"},type:"primary",loading:C,onClick:()=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){var e;if(!c||c.destroyed)return;if(!h||!(null===(e=P[+h])||void 0===e?void 0:e.data))return void Ae.message.info(_r({id:"cannot-match-empty-pattern"}));const t=P[+h].data,n={nodes:t.nodes.map((e=>({id:e.id,label:e.nodeType,name:e.nodeType,rules:e.rules}))),edges:t.edges.map((e=>({id:e.id,label:e.edgeType,source:e.source,target:e.target,rules:e.rules})))},r={nodes:[],edges:[]};u.nodes.forEach((e=>{var t;(null===(t=c.findById(e.id))||void 0===t?void 0:t.isVisible())&&r.nodes.push({id:e.id,data:e.data,label:e.nodeType})})),u.edges.forEach((e=>{var t;(null===(t=c.findById(e.id))||void 0===t?void 0:t.isVisible())&&r.edges.push({id:e.id,data:e.data,source:e.source,target:e.target,label:e.edgeType})})),w(!0);let o=[];try{o=yield _o(r,n,!0,void 0,void 0,"label","label")}catch(e){console.warn("Pattern Matching Failed.",e)}if(!(null==o?void 0:o.length))return Ae.message.info(_r({id:"no-result"})),w(!1),Z([]),void m([]);((e,t,n,r)=>{var o,i,a,l;const s={},c={};e.nodes.forEach((e=>{s[e.id]=e.label,c[e.id]=e}));const u=t.edges.length,d=t.nodes.length;for(let e=n.length-1;e>=0;e-=1){const h=n[e],f=h.nodes.length;let p=!0;for(let e=0;e<d;e+=1){const n=t.nodes[e];let r=!1;if(null===(o=n.rules)||void 0===o?void 0:o.length){for(let e=0;e<f;e+=1){const t=h.nodes[e];if(n.label!==t.label)continue;const o=(null===(i=c[t.id])||void 0===i?void 0:i.data)||t.data;if(t.data=o,!o&&(null===(a=n.rules)||void 0===a?void 0:a.length))continue;let l=!0;for(let e=0;e<n.rules.length;e+=1){const r=n.rules[e];let i=o[r.name];switch(r.name){case"id":i=t.id;break;case"label":i=t.label}switch(r.rule){case">":i<=r.value&&(l=!1);break;case"<":i>=r.value&&(l=!1);break;case"=":i!==r.value&&(l=!1);break;case"!=":i===r.value&&(l=!1);break;case"like":`${i}`.includes(r.value)||(l=!1);break;case"unlike":`${i}`.includes(r.value)&&(l=!1)}if(!l)break}if(l){r=!0;break}}if(!r){p=!1;break}}}if(!p){n.splice(e,1);continue}let v=!0;for(let e=0;e<u;e+=1){const n=t.edges[e];let o=!1;if(n.rules&&n.rules.length){for(let e=0;e<h.edges.length;e+=1){const t=h.edges[e];if(n.label!==t.label)continue;const i=n.sourceNodeType===s[t.source]&&n.targetNodeType===s[t.target],a=i||n.sourceNodeType===s[t.target]&&n.targetNodeType===s[t.source];if(r&&!i)continue;if(!r&&!a)continue;const c=null==t?void 0:t.data;if(!c&&(null===(l=n.rules)||void 0===l?void 0:l.length))continue;let u=!0;for(let e=0;e<n.rules.length;e+=1){const t=n.rules[e],r=c[t.name];switch(t.rule){case">":r<=t.value&&(u=!1);break;case"<":r>=t.value&&(u=!1);break;case"=":r!==t.value&&(u=!1);break;case"!=":r===t.value&&(u=!1);break;case"like":`${r}`.includes(t.value)||(u=!1);break;case"unlike":`${r}`.includes(t.value)&&(u=!1)}if(!u)break}if(u){o=!0;break}}if(!o){v=!1;break}}}v||n.splice(e,1)}})(r,n,o,!0),(null==o?void 0:o.length)||Ae.message.info(_r({id:"no-result"})),w(!1),Z(o),m(o)}))},Re().createElement(Tr,{id:"match"}))),Re().createElement(Ae.Col,{span:6},(null===(o=P[+h])||void 0===o?void 0:o.data)?Re().createElement(Ae.Button,{className:"kg-pattern-match-export-button",style:Object.assign(Object.assign({},(null==s?void 0:s.style)||{}),{display:x?"none":"inline-block"}),loading:C,disabled:!!x,onClick:()=>{var e;if(!c||c.destroyed)return;if(!h||!(null===(e=P[+h])||void 0===e?void 0:e.data))return void Ae.message.info(_r({id:"cannot-match-empty-pattern"}));const t=P[+h].data,n={nodes:t.nodes.map((e=>(e.data.label=e.nodeType,e.data.rules=e.rules,e.data))),edges:t.edges.map((e=>(e.data.label=e.nodeType,e.data.rules=e.rules,e.data)))};null==l||l(n)}},(null==s?void 0:s.text)||Re().createElement(Tr,{id:"export-pattern"})):""),Re().createElement(Ae.Col,{span:4,offset:6},Re().createElement(Ae.Button,{className:"kg-pattern-match-reset-button",danger:!0,onClick:()=>{Mo(c,c.getEdges(),[Gr.Selected]),Mo(c,c.getNodes(),[Gr.Selected]),V(),m([])},icon:Re().createElement(In.Z,null)}))),(null==g?void 0:g.length)&&!x?Re().createElement(Lo,{matches:g}):"",Re().createElement(yo,{visible:p,patternInfo:P[h],setVisible:v,savePattern:(e,t)=>{const n=Object.assign({},P);n[e]||(n[e]={id:e,title:Re().createElement(Tr,{id:"pattern-title",value:e})}),n[e].data=t,F(n)},nodeProperties:S,edgeProperties:O,nodeTypes:_,edgeTypes:A,schemaNodeMap:D,schemaEdgeMap:N}),te)},registerMeta:()=>Object.assign({},Ur)},InfoDetection:On}})(),u})()));