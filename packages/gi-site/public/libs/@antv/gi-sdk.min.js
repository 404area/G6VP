/*! For license information please see index.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Graphin"),require("React"),require("antd")):"function"==typeof define&&define.amd?define(["Graphin","React","antd"],t):"object"==typeof exports?exports.GISDK=t(require("Graphin"),require("React"),require("antd")):e.GISDK=t(e.Graphin,e.React,e.antd)}(self,((e,t,n)=>(()=>{var r={608:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SensorTabIndex=t.SensorClassName=t.SizeSensorId=void 0,t.SizeSensorId="size-sensor-id",t.SensorClassName="size-sensor-object",t.SensorTabIndex="-1"},622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(r,i)}),t)}}},604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1;t.default=function(){return"".concat(n++)}},224:(e,t,n)=>{"use strict";t.ak=void 0;var r=n(536);t.ak=function(e,t){var n=(0,r.getSensor)(e);return n.bind(t),function(){n.unbind(t)}}},536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSensor=t.getSensor=void 0;var r,o=(r=n(604))&&r.__esModule?r:{default:r},i=n(919),a=n(565),s={};t.getSensor=function(e){var t=e.getAttribute(a.SizeSensorId);if(t&&s[t])return s[t];var n=(0,o.default)();e.setAttribute(a.SizeSensorId,n);var r=(0,i.createSensor)(e);return s[n]=r,r},t.removeSensor=function(e){var t=e.element.getAttribute(a.SizeSensorId);e.element.removeAttribute(a.SizeSensorId),e.destroy(),t&&s[t]&&delete s[t]}},919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r=n(451),o=n(512),i="undefined"!=typeof ResizeObserver?o.createSensor:r.createSensor;t.createSensor=i},451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r,o=(r=n(622))&&r.__esModule?r:{default:r},i=n(565);t.createSensor=function(e){var t=void 0,n=[],r=(0,o.default)((function(){n.forEach((function(t){t(e)}))})),a=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=void 0,n=[])};return{element:e,bind:function(o){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",i.SensorClassName),t.setAttribute("tabindex",i.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===n.indexOf(o)&&n.push(o)},destroy:a,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&a()}}}},512:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var r,o=(r=n(622))&&r.__esModule?r:{default:r};t.createSensor=function(e){var t=void 0,n=[],r=(0,o.default)((function(){n.forEach((function(t){t(e)}))})),i=function(){t.disconnect(),n=[],t=void 0};return{element:e,bind:function(o){var i;t||((i=new ResizeObserver(r)).observe(e),r(),t=i),-1===n.indexOf(o)&&n.push(o)},destroy:i,unbind:function(e){var r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}}},725:t=>{"use strict";t.exports=e},24:e=>{"use strict";e.exports=t},721:e=>{"use strict";e.exports=n}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";i.r(a),i.d(a,{COLORS:()=>xn,CollapseCard:()=>Jn,EngineBanner:()=>Hn,Icon:()=>Wn,default:()=>Zn,extra:()=>Yn,useContext:()=>Se,utils:()=>e,version:()=>Xn});var e={};i.r(e),i.d(e,{aggregateEdges:()=>en,debounce:()=>Et,filterByRules:()=>Kt,findAllPath:()=>tn,generatorSchemaByGraphData:()=>vn,generatorStyleConfigBySchema:()=>Cn,getAssetPackages:()=>bn,getCombineServer:()=>Pn,getCombineServices:()=>kn,getDefSideCoeFunction:()=>Lt,getDefSpringLenFunction:()=>$t,getDefaultValues:()=>kt,getElementsByAssets:()=>rn,getKeysByData:()=>_t,getMetaDefaultValues:()=>on,getMockServiceConfig:()=>sn,getNeighbors:()=>nn,getPositionStyles:()=>wt,getProjectContext:()=>Mt,getSchemaGraph:()=>cn,getSearchParams:()=>ln,getServerEngineContext:()=>jn,getService:()=>Pt,getServiceOptions:()=>Nn,getServiceOptionsByEngineId:()=>An,getServicesByConfig:()=>un,handleCollaspe:()=>At,handleExpand:()=>Nt,highlightEdgeIds:()=>fn,highlightSubGraph:()=>dn,isPosition:()=>It,isStyles:()=>Ct,loaderAssets:()=>yn,loaderCombinedAssets:()=>hn,mergeObjectByRule:()=>Gt,mergeStyleConfig:()=>wn,processEdges:()=>qt,setServerEngineContext:()=>Tn,time:()=>Tt,transDataByConfig:()=>Vt,uniqueElementsBy:()=>jt});const t={title:"排序位置",type:"number","x-decorator":"FormItem","x-component":"NumberPicker","x-component-props":{min:0,max:15},default:2},n={GI_CONTAINER_INDEX:t,GIAC_CONTENT:{type:"void","x-decorator":"FormItem","x-component":"FormCollapse","x-component-props":{ghost:!0,className:"gi-site-collapse-item"},properties:{GIAC_CONTENT:{type:"object","x-decorator":"FormItem","x-component":"FormCollapse.CollapsePanel","x-component-props":{header:"容器配置"},properties:{visible:{title:"默认显示",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},disabled:{title:"功能禁用",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},isShowTitle:{title:"显示名称",type:"string","x-decorator":"FormItem","x-component":"Switch","x-reactions":[{target:"GIAC_CONTENT.title",fulfill:{state:{visible:"{{$self.value}}"}}}],default:!0},title:{title:"填写名称",type:"string","x-decorator":"FormItem","x-component":"Input",default:"未命名组件"},isShowIcon:{title:"显示图标",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!0,"x-reactions":[{target:"GIAC_CONTENT.icon",fulfill:{state:{visible:"{{$self.value}}"}}}]},icon:{title:"选择图标",type:"string","x-decorator":"FormItem","x-component":"Input",default:"icon-star"},isShowTooltip:{title:"提示框",type:"string","x-decorator":"FormItem","x-component":"Switch","x-reactions":[{target:"GIAC_CONTENT.tooltip",fulfill:{state:{visible:"{{$self.value}}"}}}],default:!0},tooltip:{title:"提示内容",type:"string","x-decorator":"FormItem","x-component":"Input",default:""},tooltipColor:{title:"提示颜色",type:"string","x-decorator":"FormItem","x-component":"ColorInput",default:"#3056e3"},tooltipPlacement:{title:"提示方位",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{options:[{value:"top",label:"上方"},{value:"left",label:"左方"},{value:"right",label:"右方"},{value:"bottom",label:"下方"}]},default:"right"},hasDivider:{title:"分隔符",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},height:{title:"单元高度",type:"string","x-decorator":"FormItem","x-component":"Input",default:"60px"},isVertical:{title:"垂直排列",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!0},containerType:{title:"容器类型",type:"string","x-decorator":"FormItem","x-component":"Radio.Group",enum:[{label:"普通DIV",value:"div"},{label:"抽屉",value:"drawer"},{label:"弹窗",value:"modal"}],default:"div"},containerAnimate:{title:"容器动画（仅DIV有效）",type:"boolean","x-decorator":"FormItem","x-component":"Switch",default:!1},containerPlacement:{title:"容器位置",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{options:[{value:"LT",label:"左上 / top"},{value:"LB",label:"左下 / left"},{value:"RT",label:"右上 / right"},{value:"RB",label:"右下 / bottom"}]},default:"RT"},offset:{title:"偏移距离",type:"string","x-decorator":"FormItem","x-component":"Offset",default:[0,0]},containerWidth:{title:"容器宽度",type:"string","x-decorator":"FormItem","x-component":"Input",default:"350px"},containerHeight:{title:"容器高度",type:"string","x-decorator":"FormItem","x-component":"Input",default:"calc(100% - 100px)"},contaienrMask:{title:"容器遮罩",type:"string","x-decorator":"FormItem","x-component":"Switch","x-component-props":{},default:!1}}}}}},r={GI_CONTAINER_INDEX:t,GIAC:{type:"void","x-decorator":"FormItem","x-component":"FormCollapse","x-component-props":{ghost:!0,className:"gi-site-collapse-item"},properties:{GIAC:{type:"object","x-decorator":"FormItem","x-component":"FormCollapse.CollapsePanel","x-component-props":{header:"容器配置"},properties:{visible:{title:"默认显示",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},disabled:{title:"功能禁用",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},isShowTitle:{title:"显示名称",type:"string","x-decorator":"FormItem","x-component":"Switch","x-reactions":[{target:"GIAC_CONTENT.title",fulfill:{state:{visible:"{{$self.value}}"}}}],default:!1},title:{title:"填写名称",type:"string","x-decorator":"FormItem","x-component":"Input",default:"时序分析"},isShowIcon:{title:"显示图标",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!0,"x-reactions":[{target:"GIAC_CONTENT.icon",fulfill:{state:{visible:"{{$self.value}}"}}}]},icon:{title:"选择图标",type:"string","x-decorator":"FormItem","x-component":"Input",default:"icon-star"},isShowTooltip:{title:"提示框",type:"string","x-decorator":"FormItem","x-component":"Switch","x-reactions":[{target:"GIAC_CONTENT.tooltip",fulfill:{state:{visible:"{{$self.value}}"}}}],default:!0},tooltip:{title:"提示内容",type:"string","x-decorator":"FormItem","x-component":"Input",default:""},tooltipColor:{title:"提示颜色",type:"string","x-decorator":"FormItem","x-component":"ColorInput",default:"#3056e3"},tooltipPlacement:{title:"提示方位",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{options:[{value:"top",label:"上方"},{value:"left",label:"左方"},{value:"right",label:"右方"},{value:"bottom",label:"下方"}],showInPanel:{conditions:[[".isShowTooltip","$eq",!0]]}},default:"right"},hasDivider:{title:"分隔符",type:"string","x-decorator":"FormItem","x-component":"Switch",default:!1},height:{title:"单元高度",type:"string","x-decorator":"FormItem","x-component":"Input",default:"46px"},isVertical:{title:"垂直排列",type:"string","x-decorator":"FormItem","x-component":"Switch","x-component-props":{showInPanel:{conditions:[[".isShowIcon","$eq",!0],[".isShowTitle","$eq",!0]]}},default:!0}}}}}},o={GI_CONTAINER_INDEX:0,GIAC:{visible:!1,disabled:!1,isShowTitle:!0,isShowIcon:!0,isShowTooltip:!0,title:"",icon:"",tooltip:"",tooltipPlacement:"top",tooltipColor:"#3056e3",hasDivider:!1,isVertical:!1,height:"40px"}};function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=i(24),f=i.n(d),p=i(608),g=i.n(p);const m=(0,d.createContext)({});function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function b(e){return e<=1?"".concat(100*Number(e),"%"):e}function v(e){return 1===e.length?"0"+e:String(e)}function x(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function O(e){return S(e)/255}function S(e){return parseInt(e,16)}var I={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function C(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,s=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(I[e])e=I[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=T.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=T.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=T.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=T.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=T.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=T.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=T.hex8.exec(e))?{r:S(n[1]),g:S(n[2]),b:S(n[3]),a:O(n[4]),format:t?"name":"hex8"}:(n=T.hex6.exec(e))?{r:S(n[1]),g:S(n[2]),b:S(n[3]),format:t?"name":"hex"}:(n=T.hex4.exec(e))?{r:S(n[1]+n[1]),g:S(n[2]+n[2]),b:S(n[3]+n[3]),a:O(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=T.hex3.exec(e))&&{r:S(n[1]+n[1]),g:S(n[2]+n[2]),b:S(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(N(e.r)&&N(e.g)&&N(e.b)?(t=function(e,t,n){return{r:255*h(e,255),g:255*h(t,255),b:255*h(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):N(e.h)&&N(e.s)&&N(e.v)?(r=b(e.s),o=b(e.v),t=function(e,t,n){e=6*h(e,360),t=h(t,100),n=h(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),c=r%6;return{r:255*[n,a,i,i,s,n][c],g:255*[s,n,n,a,i,i][c],b:255*[i,i,s,n,n,a][c]}}(e.h,r,o),a=!0,s="hsv"):N(e.h)&&N(e.s)&&N(e.l)&&(r=b(e.s),i=b(e.l),t=function(e,t,n){var r,o,i;if(e=h(e,360),t=h(t,100),n=h(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=x(s,a,e+1/3),o=x(s,a,e),i=x(s,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var E="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),w="[\\s|\\(]+(".concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")\\s*\\)?"),j="[\\s|\\(]+(".concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")[,|\\s]+(").concat(E,")\\s*\\)?"),T={CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+w),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+w),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+w),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function N(e){return Boolean(T.CSS_UNIT.exec(String(e)))}var A=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function P(e){var t=function(e,t,n){e=h(e,255),t=h(t,255),n=h(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,s=r-o,c=0===r?0:s/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:c,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function k(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var o=[v(Math.round(e).toString(16)),v(Math.round(t).toString(16)),v(Math.round(n).toString(16))];return o.join("")}(t,n,r))}function F(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function _(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function G(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function M(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function D(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=C(e),o=5;o>0;o-=1){var i=P(r),a=k(C({h:_(i,o,!0),s:G(i,o,!0),v:M(i,o,!0)}));n.push(a)}n.push(k(r));for(var s=1;s<=4;s+=1){var c=P(r),l=k(C({h:_(c,s),s:G(c,s),v:M(c,s)}));n.push(l)}return"dark"===t.theme?A.map((function(e){var r=e.index,o=e.opacity;return k(F(C(t.backgroundColor||"#141414"),C(n[r]),100*o))})):n}var R={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$={},L={};Object.keys(R).forEach((function(e){$[e]=D(R[e]),$[e].primary=$[e][5],L[e]=D(R[e],{theme:"dark",backgroundColor:"#141414"}),L[e].primary=L[e][5]})),$.red,$.volcano,$.gold,$.orange,$.yellow,$.lime,$.green,$.cyan,$.blue,$.geekblue,$.purple,$.magenta,$.grey;var z={};function B(e,t){}const K=function(e,t){!function(e,t,n){t||z[n]||(e(!1,n),z[n]=!0)}(B,e,t)};function U(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var q="data-rc-order",V="rc-util-key",J=new Map;function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):V}function H(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function X(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function Y(e){return Array.from((J.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!U())return null;var n=t.csp,r=t.prepend,o=document.createElement("style");o.setAttribute(q,X(r)),null!=n&&n.nonce&&(o.nonce=null==n?void 0:n.nonce),o.innerHTML=e;var i=H(t),a=i.firstChild;if(r){if("queue"===r){var s=Y(i).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(q))}));if(s.length)return i.insertBefore(o,s[s.length-1].nextSibling),o}i.insertBefore(o,a)}else i.appendChild(o);return o}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(t);return Y(n).find((function(n){return n.getAttribute(W(t))===e}))}function ee(e,t){var n=J.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=Z("",t),o=r.parentNode;J.set(e,o),e.removeChild(r)}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=H(n);ee(r,n);var o,i,a,s=Q(t,n);if(s)return null!==(o=n.csp)&&void 0!==o&&o.nonce&&s.nonce!==(null===(i=n.csp)||void 0===i?void 0:i.nonce)&&(s.nonce=null===(a=n.csp)||void 0===a?void 0:a.nonce),s.innerHTML!==e&&(s.innerHTML=e),s;var c=Z(e,n);return c.setAttribute(W(n),t),c}function ne(e,t){K(e,"[@ant-design/icons] ".concat(t))}function re(e){return"object"===y(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===y(e.icon)||"function"==typeof e.icon)}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return"class"===n?(t.className=r,delete t.class):t[n]=r,t}),{})}function ie(e,t,n){return n?f().createElement(e.tag,l(l({key:t},oe(e.attrs)),n),(e.children||[]).map((function(n,r){return ie(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):f().createElement(e.tag,l({key:t},oe(e.attrs)),(e.children||[]).map((function(n,r){return ie(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function ae(e){return D(e)[0]}function se(e){return e?Array.isArray(e)?e:[e]:[]}var ce={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},le="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=(0,d.useContext)(m),n=t.csp;(0,d.useEffect)((function(){te(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])},de=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],fe=d.forwardRef((function(e,t){var n=e.className,r=e.component,o=e.viewBox,i=e.spin,a=e.rotate,c=e.tabIndex,f=e.onClick,p=e.children,y=u(e,de);ne(Boolean(r||p),"Should have `component` prop or `children`."),ue();var h=d.useContext(m),b=h.prefixCls,v=void 0===b?"anticon":b,x=h.rootClassName,O=g()(x,v,n),S=g()(s({},"".concat(v,"-spin"),!!i)),I=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,C=l(l({},ce),{},{className:S,style:I,viewBox:o});o||delete C.viewBox;var E=c;return void 0===E&&f&&(E=-1),d.createElement("span",l(l({role:"img"},y),{},{ref:t,tabIndex:E,onClick:f,className:O}),r?d.createElement(r,l({},C),p):p?(ne(Boolean(o)||1===d.Children.count(p)&&d.isValidElement(p)&&"use"===d.Children.only(p).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),d.createElement("svg",l(l({},C),{},{viewBox:o}),p)):null)}));fe.displayName="AntdIcon";const pe=fe;var ge=["type","children"],me=new Set;function ye(e){return Boolean("string"==typeof e&&e.length&&!me.has(e))}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];if(ye(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),e.length>t+1&&(r.onload=function(){he(e,t+1)},r.onerror=function(){he(e,t+1)}),me.add(n),document.body.appendChild(r)}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,r=void 0===n?{}:n;t&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?he(t.reverse()):he([t]));var o=d.forwardRef((function(e,t){var n=e.type,o=e.children,i=u(e,ge),a=null;return e.type&&(a=d.createElement("use",{xlinkHref:"#".concat(n)})),o&&(a=o),d.createElement(pe,l(l(l({},r),i),{},{ref:t}),a)}));return o.displayName="Iconfont",o}var ve=i(721);const xe=e=>{const{title:t,tooltip:n,isShowTooltip:r,tooltipPlacement:o,tooltipColor:i,children:a}=e;return r?f().createElement(ve.Tooltip,{title:n||t,color:i,placement:o},a):f().createElement(f().Fragment,null,a)},Oe=f().createContext({graph:null,apis:null,theme:null,layout:null,stopForceSimulation:()=>{},restartForceSimulation:()=>{},updateContext:()=>{},updateData:()=>{}}),Se=()=>{const e=f().useContext(Oe);if(void 0===e||0===Object.keys(e).length)throw new Error("useContext must be used within a GraphInsightProvider");return e};var Ie=i(725),Ce=i.n(Ie);function Ee(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function we(e){return!!e&&!!e[dt]}function je(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ft}(e)||Array.isArray(e)||!!e[ut]||!!(null===(t=e.constructor)||void 0===t?void 0:t[ut])||ke(e)||Fe(e))}function Te(e,t,n){void 0===n&&(n=!1),0===Ne(e)?(n?Object.keys:pt)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Ne(e){var t=e[dt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ke(e)?2:Fe(e)?3:0}function Ae(e,t){return 2===Ne(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t,n){var r=Ne(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function ke(e){return at&&e instanceof Map}function Fe(e){return st&&e instanceof Set}function _e(e){return e.o||e.t}function Ge(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=gt(e);delete t[dt];for(var n=pt(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Me(e,t){return void 0===t&&(t=!1),Re(e)||we(e)||!je(e)||(Ne(e)>1&&(e.set=e.add=e.clear=e.delete=De),Object.freeze(e),t&&Te(e,(function(e,t){return Me(t,!0)}),!0)),e}function De(){Ee(2)}function Re(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function $e(e){var t=mt[e];return t||Ee(18,e),t}function Le(){return ot}function ze(e,t){t&&($e("Patches"),e.u=[],e.s=[],e.v=t)}function Be(e){Ke(e),e.p.forEach(qe),e.p=null}function Ke(e){e===ot&&(ot=e.l)}function Ue(e){return ot={p:[],l:ot,h:e,m:!0,_:0}}function qe(e){var t=e[dt];0===t.i||1===t.i?t.j():t.O=!0}function Ve(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||$e("ES5").S(t,e,r),r?(n[dt].P&&(Be(t),Ee(4)),je(e)&&(e=Je(t,e),t.l||He(t,e)),t.u&&$e("Patches").M(n[dt].t,e,t.u,t.s)):e=Je(t,n,[]),Be(t),t.u&&t.v(t.u,t.s),e!==lt?e:void 0}function Je(e,t,n){if(Re(t))return t;var r=t[dt];if(!r)return Te(t,(function(o,i){return We(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return He(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=Ge(r.k):r.o;Te(3===r.i?new Set(o):o,(function(t,i){return We(e,r,o,t,i,n)})),He(e,o,!1),n&&e.u&&$e("Patches").R(r,n,e.u,e.s)}return r.o}function We(e,t,n,r,o,i){if(we(o)){var a=Je(e,o,i&&t&&3!==t.i&&!Ae(t.D,r)?i.concat(r):void 0);if(Pe(n,r,a),!we(a))return;e.m=!1}if(je(o)&&!Re(o)){if(!e.h.F&&e._<1)return;Je(e,o),t&&t.A.l||He(e,o)}}function He(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Me(t,n)}function Xe(e,t){var n=e[dt];return(n?_e(n):e)[t]}function Ye(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ze(e){e.P||(e.P=!0,e.l&&Ze(e.l))}function Qe(e){e.o||(e.o=Ge(e.t))}function et(e,t,n){var r=ke(t)?$e("MapSet").N(t,n):Fe(t)?$e("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Le(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=yt;n&&(o=[r],i=ht);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(t,n):$e("ES5").J(t,n);return(n?n.A:Le()).p.push(r),r}function tt(e){return we(e)||Ee(22,e),function e(t){if(!je(t))return t;var n,r=t[dt],o=Ne(t);if(r){if(!r.P&&(r.i<4||!$e("ES5").K(r)))return r.t;r.I=!0,n=nt(t,o),r.I=!1}else n=nt(t,o);return Te(n,(function(t,o){r&&function(e,t){return 2===Ne(e)?e.get(t):e[t]}(r.t,t)===o||Pe(n,t,e(o))})),3===o?new Set(n):n}(e)}function nt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ge(e)}var rt,ot,it="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),at="undefined"!=typeof Map,st="undefined"!=typeof Set,ct="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,lt=it?Symbol.for("immer-nothing"):((rt={})["immer-nothing"]=!0,rt),ut=it?Symbol.for("immer-draftable"):"__$immer_draftable",dt=it?Symbol.for("immer-state"):"__$immer_state",ft=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),pt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,gt=Object.getOwnPropertyDescriptors||function(e){var t={};return pt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},mt={},yt={get:function(e,t){if(t===dt)return e;var n=_e(e);if(!Ae(n,t))return function(e,t,n){var r,o=Ye(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!je(r)?r:r===Xe(e.t,t)?(Qe(e),e.o[t]=et(e.A.h,r,e)):r},has:function(e,t){return t in _e(e)},ownKeys:function(e){return Reflect.ownKeys(_e(e))},set:function(e,t,n){var r=Ye(_e(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=Xe(_e(e),t),i=null==o?void 0:o[dt];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||Ae(e.t,t)))return!0;Qe(e),Ze(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Xe(e.t,t)||t in e.t?(e.D[t]=!1,Qe(e),Ze(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_e(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ee(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ee(12)}},ht={};Te(yt,(function(e,t){ht[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ht.deleteProperty=function(e,t){return ht.set.call(this,e,t,void 0)},ht.set=function(e,t,n){return yt.set.call(this,e[0],t,n,e[0])};var bt=function(){function e(e){var t=this;this.g=ct,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&Ee(6),void 0!==r&&"function"!=typeof r&&Ee(7),je(e)){var s=Ue(t),c=et(t,e,void 0),l=!0;try{a=n(c),l=!1}finally{l?Be(s):Ke(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return ze(s,r),Ve(e,s)}),(function(e){throw Be(s),e})):(ze(s,r),Ve(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===lt&&(a=void 0),t.F&&Me(a,!0),r){var u=[],d=[];$e("Patches").M(e,a,u,d),r(u,d)}return a}Ee(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){je(e)||Ee(8),we(e)&&(e=tt(e));var t=Ue(this),n=et(this,e,void 0);return n[dt].C=!0,Ke(t),n},t.finishDraft=function(e,t){var n=(e&&e[dt]).A;return ze(n,t),Ve(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ct&&Ee(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=$e("Patches").$;return we(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),vt=new bt,xt=vt.produce;vt.produceWithPatches.bind(vt),vt.setAutoFreeze.bind(vt),vt.setUseProxies.bind(vt),vt.applyPatches.bind(vt),vt.createDraft.bind(vt),vt.finishDraft.bind(vt);const Ot=xt,St=()=>{const{graph:e,layout:t}=Se();let n;return f().useEffect((()=>{const{type:r}=t;if("graphin-force"!==r&&"force2"!==r)return"dagre"===r?n=setTimeout((()=>{e.fitCenter(!0)}),200):e.fitCenter(!0),()=>{n&&clearTimeout(n)}}),[]),null},It=e=>0!==e.length&&e.every((e=>!window.isNaN(e.x)&&!window.isNaN(e.y))),Ct=e=>0!==e.length&&e.every((e=>e.style)),Et=(e,t=0)=>{let n;return function(...r){clearTimeout(n),n=setTimeout((()=>e.apply(this,r)),t)}},wt=(e="LT",t=[24,64])=>{const n={position:"absolute",top:"unset",left:"unset",right:"unset",bottom:"unset"},[r,o]=t;return"RT"===e&&(n.right=`${r}px`,n.top=`${o}px`),"LT"===e&&(n.left=`${r}px`,n.top=`${o}px`),"LB"===e&&(n.left=`${r}px`,n.bottom=`${o}px`),"RB"===e&&(n.right=`${r}px`,n.bottom=`${o}px`),n},jt=(e,t)=>e.reduce(((e,n)=>(e.some((e=>t(n,e)))||e.push(n),e)),[]),Tt=e=>e?new Date(new Date(e).valueOf()+288e5).toJSON().substr(0,16).replace("T"," ").replace(/-/g,"."):"Invalid Date",Nt=(e,t)=>{const{nodes:n=[],edges:r=[]}=t||{};return{nodes:jt([...e.nodes,...n],((e,t)=>e.id===t.id)),edges:jt([...e.edges,...r],((e,t)=>e.id&&t.id?e.id===t.id:e.source===t.source&&e.target===t.target))}},At=(e,t)=>{const n=t.nodes.map((e=>e.id)),r=t.edges.map((e=>`${e.source}-${e.target}`)),o=e.nodes.filter((e=>-1===n.indexOf(e.id))),i=e.edges.filter((e=>{const t=`${e.source}-${e.target}`;return-1===r.indexOf(t)}));return{nodes:o,edges:i}},Pt=(e,t)=>{if(!t)return console.warn("not found serviceId",t),null;const{service:n}=e.find((e=>e.id===t))||{};return n||(console.warn("Component need a service",t),null)},kt=e=>{const t={},n=(e,t,r)=>{const{type:o,properties:i}=e;if("void"!==o)if("object"!==o)t[r]=e.default;else{t[r]={};const e=t[r];Object.keys(i).forEach((t=>{n(i[t],e,t)}))}else Object.keys(i).forEach((e=>{n(i[e],t,e)}))};return n(e,t,"props"),t.props},Ft=e=>{const t=[],n=e=>{Object.keys(e).forEach((r=>{const o=e[r];"[object Object]"===Object.prototype.toString.call(o)?n(o):t.push(r)}))};return n(e),[...new Set(t)]},_t=(e,t)=>{try{if("node"===t){const t=e.nodes[0]||{};return Ft(t)}if("edge"===t){const t=e.edges[0]||{};return Ft(t)}}catch(e){}return[]},Gt=(e,...t)=>[...t].reverse().reduce(((t,n,r)=>(Object.keys(n).forEach((r=>{t.hasOwnProperty(r)?e(t[r],n[r])&&(t[r]=n[r]):t[r]=n[r]})),t)),{}),Mt=()=>{const e=localStorage.getItem("SERVER_ENGINE_CONTEXT")||"{}";return JSON.parse(e)},Dt={id:"Initializer",props:{GI_INITIALIZER:!0,serviceId:"GI_SERVICE_INTIAL_GRAPH",schemaServiceId:"GI_SERVICE_SCHEMA"}},Rt=e=>{const t=Se(),{serviceId:n,schemaServiceId:r}=e,{services:o,updateContext:i,transform:a,largeGraphLimit:s}=t;return d.useEffect((()=>{const{service:e}=o.find((e=>e.id===n)),{service:t}=o.find((e=>e.id===r))||{service:()=>Promise.resolve(null)};Promise.all([t(),e()]).then((([e,t={nodes:[],edges:[]}])=>{i((n=>{const{nodes:r,edges:o}=t;e&&(n.schemaData=e);const i=It(r),c=Ct(r);if(i&&(n.layout.type="preset"),c)n.data=t,n.source=t;else if(r.length>s){console.warn("加载的数据量过大，建议聚合数据，默认切换到网格布局。您也可以在「资产中心」中加载「大图组件」启用 3D 渲染");const e=a(t,!0);n.largeGraphMode=!0,n.largeGraphData=e,n.source=e,n.data={nodes:[],edges:[]}}else{const e=a(t,!0);n.rawData=Object.assign({},t),n.data=e,n.source=e}n.initialized=!0,n.layoutCache=!1}))}))}),[s]),null},$t=e=>{const{defaultSpring:t=100,maxLimitLength:n=500,minLimitDegree:r=5}=e;return(e,o,i)=>{const a=o.data.layout.degree,s=i.data.layout.degree,c=Math.min(a,s);let l=t;return l=c<r?t*c:n,l}},Lt=(e,t,n,r)=>o=>{let i=0;try{if(!o)return 0;const{data:a}=o.data;return i=a[e]-a[t],n&&(i=i/Math.abs(i)*Math.log(Math.abs(i))),i*=parseFloat(r),i}catch(e){console.log(e)}return i},zt=e=>{var t;if(e.data&&(null===(t=Object.keys(e.data))||void 0===t?void 0:t.length)){const{nodeType:t,edgeType:n}=e;return t?Object.assign(Object.assign({},e.data),{nodeType:t}):Object.assign(Object.assign({},e.data),{edgeType:n})}return e||{}},Bt=(e,t)=>{if(!t)return!1;const{name:n="",operator:r,value:o}=t,i=n.split("-")[0];let a=o;return"eql"===r?e[i]===a:"not-eql"===r?e[i]!==a:"contain"===r?`${e[i]}`.indexOf(`${a}`)>-1:"not-contain"===r?-1===`${e[i]}`.indexOf(`${a}`):"gt"===r?Number(e[i])>Number(a):"gte"===r?Number(e[i])>=Number(a):"lt"===r?Number(e[i])<Number(a):"lte"===r&&Number(e[i])<=Number(a)},Kt=(e,t)=>e.filter((e=>((e,t)=>{const{logic:n,expressions:r}=t;return!r||0===r.length||(!0===n?r.every((t=>Bt(zt(e),t))):r.some((t=>Bt(zt(e),t))))})(e,t)));function Ut(e){return e%2==0}const qt=(e,{poly:t=30,loop:n=10}={poly:35,loop:10})=>{const r={};e.forEach(((e,t)=>{const n=Object.assign({},e),{source:o,target:i}=n,a=`${o}-${i}`;n.id=n.id||`${o}-${i}-${t}`;const s=`${i}-${o}`;r[a]?r[a].push(n):r[s]?(n.revert=!0,r[s].push(n)):r[a]=[n]}));const o=Object.values(r),i=[];return o.forEach((e=>{if(e.length>1){const r=Ut(e.length);e.forEach(((e,o)=>{var a,s;const{source:c,target:l}=e,u=c===l,d=o;let f;if(r){const e=Math.ceil((d+1)/2);f=t*e}else{const e=Ut(d)?d:d+1,n=Math.ceil(e/2);f=t*n}let p=Ut(d)?f:-f;e.revert&&(p=-p,delete e.revert),u?i.push(Object.assign(Object.assign({},e),{isLoop:!0,style:Object.assign(Object.assign({},e.style),{keyshape:Object.assign(Object.assign({},null===(a=e.style)||void 0===a?void 0:a.keyshape),{type:"loop",loop:{distance:d*n}})})})):i.push(Object.assign(Object.assign({},e),{isMultiple:!0,style:Object.assign(Object.assign({},e.style),{keyshape:Object.assign(Object.assign({},null===(s=e.style)||void 0===s?void 0:s.keyshape),{type:"poly",poly:{distance:p}})})}))}))}else i.push(e[0])})),i},Vt=(e,t,n,r,o)=>{console.time(`${e.toUpperCase()}_TRANS_COST`);const i=n[e];if(!i)return{};let a=t[e];"edges"===e&&(a=qt(a,{poly:40,loop:10}));const[s,...c]=i,l=c.map((e=>{const{id:t,expressions:n,logic:i}=e;if(!r)return[];const s=r[t],c=Kt(a,{logic:i,expressions:n});return s.registerTransform(c,e,o)})).reduce(((e,t)=>[...t,...e]),[]),u=jt(l,((e,t)=>e.id===t.id)),d=u.map((e=>e.id)),f=a.filter((e=>-1===d.indexOf(e.id))),p=r[s.id].registerTransform(f,s,o),g=[...u,...p];return console.timeEnd(`${e.toUpperCase()}_TRANS_COST`),g};let Jt="",Wt="";const Ht=e=>{const{updateContext:t}=e,{graph:n,apis:r,layout:o,theme:i}=f().useContext(Ie.GraphinContext);return f().useEffect((()=>{const e=()=>{const{instance:e}=o;if(e){const{type:t,simulation:n}=e;"graphin-force"===t&&n.stop()}},a=(e=[])=>{const{instance:t}=o;if(t){const{type:r,simulation:o}=t;"graphin-force"===r&&o.restart(e,n)}};t((t=>{t.graph=n,t.theme=i,t.apis=r,t.layoutInstance=o,t.isContextReady=!0,t.stopForceSimulation=e,t.restartForceSimulation=a}))}),[o]),null};var Xt=i(224);const Yt=e=>{const{GISDK_ID:t,graph:n}=Se();return d.useEffect((()=>{const e=document.getElementById(`${t}-graphin-container`),r=(0,Xt.ak)(e,(e=>{if(e){const{clientHeight:t,clientWidth:r}=e;n.changeSize(r,t),n.autoPaint()}}));return()=>{r()}}),[n]),null};const Zt={id:"EmptyLayout",props:{},component:e=>f().createElement(f().Fragment,null,e.children)},Qt=f().memo((e=>{const{children:t,assets:n,id:r}=e;let{services:o}=e;const i=f().useMemo((()=>{if(!r){const e=`${Math.random().toString(36).substr(2)}`;return console.warn(`⚠️: props.id 缺失，默认生成 GISDK_ID : ${e} 用于多实例管理`),e}return r}),[]),{components:a,elements:s,layouts:c}=n;(e=>{if(e){const t=Object.keys(e).join("-");t!==Jt&&(Object.keys(e).forEach((t=>{e[t].registerShape(Ce())})),Jt=t)}})(s),(e=>{if(e){const t=Object.keys(e).join("-");t!==Wt&&(Object.keys(e).forEach((t=>{e[t].registerLayout(Ce())})),Wt=t)}})(c);const[l,u]=function(e){var t=(0,d.useState)((function(){return Me("function"==typeof e?e():e,!0)})),n=t[1];return[t[0],(0,d.useCallback)((function(e){n("function"==typeof e?Ot(e):Me(e))}),[])]}({data:{nodes:[],edges:[]},schemaData:{nodes:[],edges:[]},source:{nodes:[],edges:[]},layout:{},components:[],config:e.config,isLoading:!1,isContextReady:!1,initialized:!1,initializer:Dt,transform:(e,t)=>e,layoutCache:!1,largeGraphLimit:600,largeGraphData:void 0,GICC_LAYOUT:{id:"EmptyLayout",props:{}},graph:null,apis:null,theme:null,layoutInstance:null,stopForceSimulation:()=>{},restartForceSimulation:()=>{}});f().useEffect((()=>{u((t=>{t.config=e.config}))}),[e.config]);const{layout:p,components:g=[],nodes:m,edges:y}=l.config;f().useEffect((()=>{let e,t={id:"EmptyLayout",props:{}};g.forEach((n=>{"GICC_LAYOUT"!==n.type?"INITIALIZER"!==n.type||(e=n||Dt):t=n}));const n=g.filter((e=>!(e.props&&e.props.GI_INITIALIZER))),r=n.filter((e=>e.props&&e.props.GI_CONTAINER)),o=r.reduce(((e,t)=>{const{GI_CONTAINER:n}=t.props;return[...e,...n]}),[]),i=n.filter((e=>{const{id:t}=e;return-1===o.indexOf(t)}));g.find((e=>e.props&&e.props.GI_INITIALIZER)),u((n=>{n.config.components=g,n.components=i,n.initializer=e,n.layoutCache=!0,n.GICC_LAYOUT=t}))}),[g]),f().useEffect((()=>{if(!p)return;const e=p.props||{},{type:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);let r={};n&&n.defSpringLenCfg&&(r={defSpringLen:$t(n.defSpringLenCfg)}),"FundForce"===p.id&&(r={defSideCoe:Lt(n.income,n.outcome,n.isLog,n.multiple)}),u((e=>{e.layout=Object.assign(Object.assign({type:t},n),r),e.config.layout=p,e.layoutCache=!1}))}),[p]),f().useEffect((()=>{if(!m||!y||0===m.length||0===y.length)return;const e=(e,t)=>{const n=Vt("nodes",e,{nodes:m,edges:y},s,t),r=Vt("edges",e,{nodes:m,edges:y},s,t),{combos:o}=e;return{nodes:n,edges:r,combos:o}};u((t=>{if(0!==t.data.nodes.length){const n=function(e){return we(e)||Ee(23,e),e[dt].t}(t.data),r=e(n,!0);t.data=r}t.transform=e,t.config.nodes=m,t.config.edges=y}))}),[m,y]);const{data:h,layout:b,components:v,initializer:x,theme:O,transform:S,GICC_LAYOUT:I}=l,C=(0,d.useMemo)((()=>({nodes:l.source.nodes.reduce(((e,t)=>(e[t.id]=t,e)),{}),edges:l.source.edges.reduce(((e,t)=>(e[t.id]=t,e)),{})})),[l.source]),E=Object.assign(Object.assign({},l),{GISDK_ID:i,services:o,assets:n,sourceDataMap:C,updateContext:u,updateData:e=>{u((t=>{t.data=S(e),t.source=S(e),t.layoutCache=!1}))},updateLayout:e=>{u((t=>{t.layout=e,t.layoutCache=!1}))},updateDataAndLayout:(e,t)=>{u((n=>{n.data=S(e),n.source=S(e),n.layout=t,n.layoutCache=!1}))}}),w=g.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});if(!a)return null;const{component:j}=a[x.id]||{component:Rt},{props:T}=w[x.id]||{props:Dt.props},{component:N}=a[I.id]||{component:Zt.component},{props:A}=w[I.id]||{props:Zt.props},P=l.isContextReady&&l.initialized,k=(0,d.useMemo)((()=>{var e;const t={},n={},r=[],o=[];null===(e=h.nodes)||void 0===e||e.forEach((e=>{t[e.id]||(o.push(e),t[e.id]=e)})),h.edges.forEach((e=>{t[e.source]&&t[e.target]&&!n[e.id]&&(null==r||r.push(e),n[e.id]=e)}));const{combos:i}=h;return{nodes:o,edges:r,combos:i}}),[h]);return f().createElement(Oe.Provider,{value:E},f().createElement(N,Object.assign({},A),f().createElement("div",{id:`${i}-container`,style:Object.assign({width:"100%",height:"100%",position:"relative"},e.style)},f().createElement(Ce(),{containerId:`${i}-graphin-container`,containerStyle:{transform:"scale(1)"},data:k,layout:b,enabledStack:!0,theme:O,layoutCache:l.layoutCache},f().createElement(f().Fragment,null,P&&f().createElement(Yt,null),l.isContextReady&&f().createElement(j,Object.assign({},T)),f().createElement(Ht,{updateContext:u}),P&&(l.initialized&&l.isContextReady?v.map((e=>{const{id:t,props:n={}}=e,r=a[t];if(!r)return null;const{component:o,info:s}=r;if(n.GIAC_CONTENT||n.GIAC_MENU||n.GIAC)return null;if("GICC_LAYOUT"===s.type||"GIAC_CONTENT"===s.type||"GIAC"===s.type||"GIAC_MENU"===s.type)return null;const{GI_CONTAINER:c}=n;let l={};return c&&(l={components:c.map((e=>w[e]))}),f().createElement(o,Object.assign({key:t,GISDK_ID:i,assets:a,ComponentCfgMap:w},n,l))})):null),P&&t,P&&f().createElement(St,null))))))})),en=e=>{const{nodes:t,edges:n}=e,r=new Map;return n.forEach(((e,t)=>{const{source:n,target:o,edgeType:i}=e,a=`${n}->${i}->${o}`,s=r.get(a);s?r.set(a,[...s,Object.assign(Object.assign({},e),{id:e.id||`${n}-${o}-${t}`})]):r.set(a,[Object.assign(Object.assign({},e),{id:e.id||`${n}-${o}-${t}`})])})),{nodes:t,edges:[...r.keys()].map((e=>{const t=r.get(e),n=t[0],{source:o,target:i,edgeType:a,edgeTypeKeyFromProperties:s}=n;return t.length>1?{source:o,target:i,edgeType:a,edgeTypeKeyFromProperties:s,aggregate:t.map((t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{GI_AGGREGATE_ID:e})}))),GI_AGGREGATE_ID:e,data:{source:o,target:i,[s]:a,aggregate:t,aggregateCount:`汇总：${t.length} 条`}}:Object.assign({},n)}))}},tn=(e,t,n,r)=>{if(t===n){const r=e.edges.filter((e=>e.source===t&&e.target===n));return{allNodePath:new Array(r.length).fill([t,t]),allEdgePath:r.map((e=>[e.id]))}}const{edges:o=[]}=e,i=[t],a=[],s={[t]:!0},c=[],l=[],u=[];let d=r?nn(t,o,"target"):nn(t,o);for(c.push(d);i.length>0&&c.length>0;){const e=c[c.length-1];if(e.length){{const t=e.shift();t&&(i.push(t.node),a.push(t.edge),s[t.node]=!0,d=r?nn(t.node,o,"target"):nn(t.node,o),c.push(d.filter((e=>!s[e.node]))))}if(i[i.length-1]===n){const e=i.map((e=>e));l.push(e),u.push([...a]);const t=i.pop();a.pop(),s[t]=!1,c.pop()}}else{const e=i.pop();a.pop(),s[e]=!1,c.pop()}}return{allNodePath:l,allEdgePath:u}},nn=(e,t=[],n)=>{const r=t.filter((t=>t.source===e||t.target===e));if("target"===n){const t=t=>t.source===e;return r.filter(t).map((e=>({node:e.target,edge:e.id})))}if("source"===n){const t=t=>t.target===e;return r.filter(t).map((e=>({node:e.source,edge:e.id})))}return r.map((t=>t.source===e?{node:t.target,edge:t.id}:{node:t.source,edge:t.id}))},rn=(e,t,n)=>{let r={},o={};return Object.keys(e).forEach((i=>{const a=e[i],{info:s,registerMeta:c,registerShape:l,registerTransform:u,defaultProps:d}=a,{id:f,name:p,category:g,type:m}=s,y="NODE"===m?"nodes":"edges",h=n[y].reduce(((e,t)=>{const{properties:n}=t,r=Object.keys(n).map((e=>({id:e,type:n[e]})));return[...e,...r]}),[]),b=jt(h,((e,t)=>e.id===t.id)),v=c({data:t,keys:b,schemaData:n}),x=Object.assign(Object.assign({},a),{id:f,props:d,name:p,info:s,meta:v});"nodes"===y&&(r=Object.assign(Object.assign({},r),{[f]:x})),"edges"===y&&(o=Object.assign(Object.assign({},o),{[f]:x}))})),{nodes:r,edges:o}},on=e=>{const t={},n=(e,t,r)=>{const{type:o,properties:i}=e;if("void"!==o)if("object"!==o)t[r]=e.default;else{t[r]={};const e=t[r];Object.keys(i).forEach((t=>{n(i[t],e,t)}))}else Object.keys(i).forEach((e=>{n(i[e],t,e)}))};return n(e,t,"props"),t.props},an=function(e){const t="____PLACEHOLDER____",n=[];let r=JSON.stringify(e,((e,r)=>"function"==typeof r?(n.push(r),t):r),2);return r=r.replace(new RegExp('"'+t+'"',"g"),(function(e){return n.shift()})),"export default "+r},sn=e=>Object.keys(e).map((t=>{const n=e[t];if(!n)return[];const{mockServices:r}=n;return r?r().map((e=>({id:e.id,mode:"MOCK",name:e.name||e.id,content:an(e.service)}))):[]})).reduce(((e,t)=>[...e,...t]),[]).filter((e=>e)),cn=(e,t)=>{new Map;const n=new Map,r=new Map,{nodes:o,edges:i}=t;o.forEach((e=>{const t=JSON.stringify(e.expressions);n.set(t,e)})),i.forEach((e=>{const t=JSON.stringify(e.expressions);r.set(t,e)}));const a=e.nodes.map(((e,t)=>{const{nodeType:r,nodeTypeKeyFromProperties:o}=e,i=[{name:o,operator:"eql",value:r}],a=JSON.stringify(i),s=n.get(a);return{id:r,style:{keyshape:{size:20,fill:s&&s.props&&s.props.color||"#ddd",fillOpacity:1},label:{value:r}}}})),s=e.edges.map((e=>{const{edgeType:t,edgeTypeKeyFromProperties:n}=e,o=[{name:n,operator:"eql",value:t}],i=JSON.stringify(o),a=r.get(i),s=a&&a.props&&a.props.color||"#ddd";return{source:e.sourceNodeType,target:e.targetNodeType,style:{keyshape:{stroke:s},label:{value:e.edgeType,fill:s,fontSize:12,background:{fill:"#fff",radius:4,stroke:s}}}}}));return{nodes:a,edges:Ie.Utils.processEdges(s)}},ln=e=>{const{hash:t}=e,[n,r]=t.split("?");return{path:n,searchParams:new URLSearchParams(r)}},un=(e,t)=>e.map((e=>{const{id:n,content:r,mode:o}=e,i=(null==r?void 0:r.split("export default")[1])||r,a=Function('"use strict";return ('+i+")")();return{id:n,service:(...e)=>a(...e,t)}})),dn=(e,t)=>{const n=e.save(),r=t.nodes.map((e=>e.id)),o=[];t.edges.forEach((e=>{const{aggregate:t}=e;t?t.forEach((e=>{o.push(e.id)})):o.push(e.id)}));const i=n.nodes.length,a=o.length,s=t.nodes.length,c=t.edges.length,l=0===s&&0===c,u=s===i&&c===a;return l||u?(n.nodes.forEach((function(t){e.clearItemStates(t.id)})),n.edges.forEach((function(t){e.clearItemStates(t.id)})),{isEmpty:l,isFull:u}):(n.nodes.forEach((t=>{r.includes(t.id)?(e.setItemState(t.id,"disabled",!1),e.setItemState(t.id,"selected",!0)):(e.setItemState(t.id,"selected",!1),e.setItemState(t.id,"disabled",!0))})),n.edges.forEach((t=>{const{aggregate:n,id:r}=t;let i=!1;i=n?n.map((e=>e.id)).some((e=>o.includes(e))):o.includes(r),i?(e.setItemState(t.id,"disabled",!1),e.setItemState(t.id,"selected",!0)):(e.setItemState(t.id,"selected",!1),e.setItemState(t.id,"disabled",!0))})),{isEmpty:l,isFull:u})},fn=(e,t)=>{const n=e.save(),r=0===t.length;return r?(n.edges.forEach((function(t){e.clearItemStates(t.id)})),{isEmpty:r}):(n.edges.forEach((n=>{const{aggregate:r,id:o,source:i,target:a}=n;let s=!1;s=r?r.map((e=>e.id)).some((e=>t.includes(e))):t.includes(o),s?(e.setItemState(o,"disabled",!1),e.setItemState(o,"selected",!0),e.setItemState(i,"selected",!0),e.setItemState(a,"selected",!0),e.updateItem(o,{style:{animate:{visible:!0,type:"circle-running",color:"rgba(236,65,198,1)",repeat:!0,duration:1e3}}})):(e.setItemState(o,"selected",!1),e.setItemState(o,"disabled",!0),e.setItemState(i,"disable",!0),e.setItemState(a,"disable",!0),e.setItemState(i,"selected",!1),e.setItemState(a,"selected",!1),e.updateItem(o,{style:{animate:{visible:!1,type:"circle-running",color:"rgba(236,65,198,1)",repeat:!0,duration:1e3}}}))})),{isEmpty:r})};var pn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const gn=e=>pn(void 0,void 0,void 0,(function*(){return Promise.all([...e.map((e=>{const t=window[e.global];return t?Object.assign(Object.assign({},t),e):(e=>pn(void 0,void 0,void 0,(function*(){return new Promise((t=>{const n=document.createElement("script");n.type="text/javascript",n.charset="UTF-8",n.id=e.global||e.url,n.src=e.url,document.body.append(n);const r=document.createElement("link"),o=e.url.replace("min.js","css");r.href=o,r.type="text/css",r.rel="stylesheet",document.head.append(r),n.onload=()=>{t(n)},n.onerror=()=>{t(n)}}))})))(e).then((t=>{let n=window[e.global];if(n)return n.hasOwnProperty("default")&&(n=n.default),Object.assign(Object.assign({},n),e);console.warn(`${e.global} is not found`)}))}))]).then((e=>e.filter((e=>e))))})),mn=(e,t,n)=>{if(!e)return{};const r=Object.keys(e).reduce(((r,o)=>Object.assign(Object.assign({},r),{[o]:Object.assign(Object.assign({},e[o]),{version:t,pkg:n})})),{});return r},yn=e=>pn(void 0,void 0,void 0,(function*(){return gn(e).then((e=>e))})),hn=(e,t)=>pn(void 0,void 0,void 0,(function*(){let n;if(t){const r=t.map((e=>e.global)),o=e.filter((e=>-1==r.indexOf(e.global))),i=yield gn(o).then((e=>e));n=[...t,...i]}else n=yield gn(e).then((e=>e));return n.reduce(((e,t)=>{const{components:n,version:r,name:o,elements:i,layouts:a,services:s}=t,c=mn(n,r,o),l=mn(i,r,o),u=mn(a,r,o);return{components:Object.assign(Object.assign({},e.components),c),elements:Object.assign(Object.assign({},e.elements),l),layouts:Object.assign(Object.assign({},e.layouts),u),services:s?[...e.services,Object.assign({version:r,pkg:o},s)]:e.services}}),{components:{},elements:{},layouts:{},services:[]})})),bn=()=>{const e=JSON.parse(localStorage.getItem("GI_ASSETS_PACKAGES")||"{}");return Object.values(e)},vn=(e,t)=>{const{nodes:n,edges:r}=e,o=[],i=[],{nodeType:a="UNKNOW",edgeType:s="UNKNOW",nodeTypeFromProperties:c,edgeTypeFromProperties:l}=t||{};return n.forEach((e=>{const{nodeType:t=a,data:n,nodeTypeKeyFromProperties:r=c}=e,i={nodeType:t,nodeTypeKeyFromProperties:r,properties:{}};for(const e in n)if("object"==typeof n[e])for(const t in n[e])"object"!=typeof n[e][t]&&(i.properties[`${e}.${t}`]=typeof n[e][t]);else i.properties[e]=typeof n[e];o.find((e=>e.nodeType===t))||o.push(i)})),r.forEach((e=>{const{edgeType:t=s,source:r,target:o,data:a,edgeTypeKeyFromProperties:c=l}=e,u={edgeType:t,edgeTypeKeyFromProperties:c,sourceNodeType:"",targetNodeType:"",properties:{}},d=n.find((e=>e.id===r)),f=n.find((e=>e.id===o));d||console.warn("数据不合法,找不到 Source ID：",r),f||console.warn("数据不合法,找不到 Target ID：",o),d&&f&&(u.sourceNodeType=d.nodeType,u.targetNodeType=f.nodeType);for(const e in a)if("object"==typeof a[e])for(const t in a[e])"object"!=typeof a[e][t]&&(u.properties[`${e}.${t}`]=typeof a[e][t]);else u.properties[e]=typeof a[e];i.find((e=>e.edgeType===t))||i.push(u)})),{nodes:o,edges:i}},xn=["#3056E3","#faad14","#a0d911","#f5222d","#722ed1","#eb2f96","#2f54eb","#13c2c2","#52c41a","#fadb14","#fa8c16","#820014","#873800","#874d00","#876800","#3f6600","#135200","#00474f","#003a8c","#061178","#22075e","#780650"],On=new Map,Sn={id:"SimpleNode",props:{size:26,color:"#ddd",label:[]},name:"官方节点",order:-1,expressions:[],logic:!0,groupName:"默认样式"},In={id:"SimpleEdge",props:{size:1,color:"#ddd",label:[]},name:"官方边",order:-1,expressions:[],logic:!0,groupName:"默认样式"},Cn=(e,t={})=>{const{nodes:n,edges:r,meta:o={defaultLabelField:"id"}}=e,{defaultLabelField:i}=o;let a=!1,s=!1;const c=n.map(((e,t)=>{const n=t%xn.length;return On.set(e.nodeType,xn[n]),"UNKNOW"===e.nodeType?(a=!0,Object.assign({},Sn)):{id:"SimpleNode",props:{size:26,color:xn[n]||"#ddd",label:[`${e.nodeType}^^${i}`]},name:"官方节点",expressions:[{name:e.nodeTypeKeyFromProperties,operator:"eql",value:e.nodeType}],order:t,logic:!0,groupName:`${String(e.nodeType).toUpperCase()} TYPE`}})).sort(((e,t)=>e.order-t.order)),l=r.map(((e,t)=>"UNKNOW"===e.edgeType?(s=!0,Object.assign({},In)):{id:"SimpleEdge",props:{size:1,color:On.get(e.sourceNodeType)||"#ddd",label:[]},name:"官方边",expressions:[{name:e.edgeTypeKeyFromProperties,operator:"eql",value:e.edgeType}],order:t,logic:!0,groupName:`${String(e.edgeType).toUpperCase()} TYPE`})).sort(((e,t)=>e.order-t.order));let u=c,d=l;return a||(u=[Sn,...c]),s||(d=[In,...l]),Object.assign(Object.assign({},t),{nodes:u,edges:d})},En=(e,t)=>{const n=new Map;return t.forEach((e=>{const t=JSON.stringify(e.expressions);n.set(t,e)})),e.map((e=>{const t=JSON.stringify(e.expressions);return n.get(t)||e}))},wn=(e,t)=>({nodes:En(e.nodes,t.nodes),edges:En(e.edges,t.edges)}),jn=(e={})=>{try{const t=JSON.parse(localStorage.getItem("SERVER_ENGINE_CONTEXT")||"{}");return Object.assign(Object.assign({},e),t)}catch(e){return console.error(e),{}}},Tn=e=>{try{const t=JSON.parse(localStorage.getItem("SERVER_ENGINE_CONTEXT")||"{}");localStorage.setItem("SERVER_ENGINE_CONTEXT",JSON.stringify(Object.assign(Object.assign({},t),e)))}catch(e){console.error(e)}},Nn=(e,t)=>e.filter((e=>e.id.includes(t))).map((e=>({value:e.id,label:e.id}))),An=(e,t,n)=>{const r=e.filter((e=>e.id.includes(t))).map((e=>({value:e.id,label:e.id}))),o=r.find((e=>e.value.startsWith(n)))||r[0];return{options:r,defaultValue:o.value}},Pn=e=>{const t=[];return e.forEach((e=>{const{id:n,services:r}=e,o=t[n];t[n]=o?Object.assign(Object.assign(Object.assign({},o),e),{services:Object.assign(Object.assign({},o.services),r)}):e})),Object.values(t)},kn=e=>{if(!e)return[];const t=e.reverse().reduce(((e,t)=>{if(!t.services)return[...e];const{id:n,services:r}=t,o=Object.keys(r).map((e=>{const t=r[e];return Object.assign(Object.assign({},t),{id:`${n}/${e}`})}));return[...e,...o]}),[]);return jt(t,((e,t)=>e.id===t.id))},Fn={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mn=["icon","className","onClick","style","primaryColor","secondaryColor"],Dn={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},Rn=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,i=e.primaryColor,a=e.secondaryColor,s=u(e,Mn),c=Dn;if(i&&(c={primaryColor:i,secondaryColor:a||ae(i)}),ue(),ne(re(t),"icon should be icon definiton, but got ".concat(t)),!re(t))return null;var d=t;return d&&"function"==typeof d.icon&&(d=l(l({},d),{},{icon:d.icon(c.primaryColor,c.secondaryColor)})),ie(d.icon,"svg-".concat(d.name),l({className:n,onClick:r,style:o,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};Rn.displayName="IconReact",Rn.getTwoToneColors=function(){return l({},Dn)},Rn.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Dn.primaryColor=t,Dn.secondaryColor=n||ae(t),Dn.calculated=!!n};const $n=Rn;function Ln(e){var t=Gn(se(e),2),n=t[0],r=t[1];return $n.setTwoToneColors({primaryColor:n,secondaryColor:r})}var zn=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Ln("#1890ff");var Bn=d.forwardRef((function(e,t){var n,r=e.className,o=e.icon,i=e.spin,a=e.rotate,c=e.tabIndex,f=e.onClick,p=e.twoToneColor,y=u(e,zn),h=d.useContext(m),b=h.prefixCls,v=void 0===b?"anticon":b,x=h.rootClassName,O=g()(x,v,(s(n={},"".concat(v,"-").concat(o.name),!!o.name),s(n,"".concat(v,"-spin"),!!i||"loading"===o.name),n),r),S=c;void 0===S&&f&&(S=-1);var I=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,C=Gn(se(p),2),E=C[0],w=C[1];return d.createElement("span",l(l({role:"img","aria-label":o.name},y),{},{ref:t,tabIndex:S,onClick:f,className:O}),d.createElement($n,{icon:o,primaryColor:E,secondaryColor:w,style:I}))}));Bn.displayName="AntdIcon",Bn.getTwoToneColor=function(){var e=$n.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Bn.setTwoToneColor=Ln;const Kn=Bn;var Un=function(e,t){return d.createElement(Kn,l(l({},e),{},{ref:t,icon:Fn}))};Un.displayName="CaretRightOutlined";const qn=d.forwardRef(Un),{Panel:Vn}=ve.Collapse,Jn=e=>{const{title:t,extra:n,children:r,defaultActive:o}=e,i=!1!==o?["card"]:[];return d.createElement("div",{className:"gi-collapse-card"},d.createElement(ve.Collapse,{defaultActiveKey:i,collapsible:"header",expandIcon:({isActive:e})=>d.createElement(qn,{rotate:e?90:0}),bordered:!1},d.createElement(Vn,{key:"card",header:t,extra:n},r)))},Wn=be({scriptUrl:"/public/libs/font.js"}),Hn=e=>{const{logo:t,title:n,desc:r,docs:o,style:i}=e;return f().createElement(ve.Row,{style:Object.assign({background:"rgb(245, 248, 255)",transition:"all 0.3s ease 0s",padding:"24px 0px"},i)},f().createElement(ve.Col,{span:12,style:{display:"flex",alignItems:"center",justifyContent:"center",alignContent:"center"}},f().createElement("img",{width:"250px",src:t,alt:""})),f().createElement(ve.Col,{span:12,style:{display:"flex",flexDirection:"column"}},f().createElement("h2",null,n),f().createElement("p",null,r),f().createElement("p",null,f().createElement(ve.Button,{type:"primary",icon:f().createElement(Wn,{type:"icon-book"}),size:"small",onClick:()=>{o&&window.open(o)}},"使用文档"))))},Xn="1.2.0",Yn={GIAC_CONTENT_METAS:n,GIAC_CONTENT_PROPS:{GI_CONTAINER_INDEX:0,GIAC_CONTENT:{visible:!1,isShowTitle:!0,isShowIcon:!0,isShowTooltip:!0,title:"",icon:"",disabled:!1,placement:"RT",offset:[0,60],hasDivider:!1,tooltip:"",tooltipPlacement:"top",tooltipColor:"#3056e3",isVertical:!1,height:"40px",containerType:"drawer",containerWidth:"400px",contaienrMask:!1}},GIAC_METAS:r,GIAC_PROPS:o,GI_CONTAINER_METAS:{placement:{title:"放置方位",type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{options:[{value:"LT",label:"左上 / top"},{value:"RT",label:"右上 / right"},{value:"LB",label:"左下 / left"},{value:"RB",label:"右下 / bottom"}]},default:"LT"},offset:{title:"偏移距离",type:"string","x-decorator":"FormItem","x-component":"Offset",default:[0,0]},height:{title:"高度",type:"string","x-decorator":"FormItem","x-component":"Input","x-component-props":{},default:"46px"},width:{title:"宽度",type:"string","x-decorator":"FormItem","x-component":"Input","x-component-props":{},default:"100%"}},deepClone:e=>JSON.parse(JSON.stringify(e)),GIAComponent:e=>{const{GIAC:t,onClick:n,iconFontUrl:r="/public/libs/font.js",className:i}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["GIAC","onClick","iconFontUrl","className"]),{tooltip:s,tooltipPlacement:c,tooltipColor:l,hasDivider:u,isShowTitle:d,title:p,isShowIcon:g,icon:m,isVertical:y,height:h="40px",disabled:b,isShowTooltip:v}=t||o.GIAC,x=f().useMemo((()=>be({scriptUrl:r})),[r]);return f().createElement("div",Object.assign({},a),f().createElement(xe,{title:p,tooltip:s,tooltipColor:l,tooltipPlacement:c,isShowTooltip:v},f().createElement(ve.Button,{type:"text",style:y?{height:h}:{},disabled:b,onClick:n,className:i},g&&f().createElement(x,{type:m}),y&&f().createElement("br",null),d&&p)),u&&f().createElement(ve.Divider,{type:"vertical"}))}};console.log(`%c 🎉 GI_SDK_VERSION:${Xn}`,"color:#3e5dff");const Zn=Qt})(),a})()));