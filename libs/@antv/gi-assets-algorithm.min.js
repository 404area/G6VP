/*! For license information please see index.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("G2Plot"),require("GISDK"),require("Graphin"),require("React"),require("ReactDOM"),require("_"),require("antd")):"function"==typeof define&&define.amd?define(["G2Plot","GISDK","Graphin","React","ReactDOM","_","antd"],t):"object"==typeof exports?exports.GI_ASSETS_ALGORITHM=t(require("G2Plot"),require("GISDK"),require("Graphin"),require("React"),require("ReactDOM"),require("_"),require("antd")):e.GI_ASSETS_ALGORITHM=t(e.G2Plot,e.GISDK,e.Graphin,e.React,e.ReactDOM,e._,e.antd)}(self,((e,t,n,r,o,i,a)=>(()=>{var s={722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=a,t.set=i,t.getJSON=l,t.remove=s,t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(836));function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.path,o=void 0===r?"/":r,i=n.domain,a=n.expires,s=n.maxAge,l=void 0===s?1512e3:s,c=n.secure,u=n.sameSite;if(e){t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[()]/g,escape);var d=[];o&&d.push("path=".concat(o)),i&&d.push("domain=".concat(i)),a&&d.push("expires=".concat(a)),l&&d.push("max-age=".concat(l)),c&&d.push("secure"),u&&d.push("samesite=".concat(u)),document.cookie="".concat(e,"=").concat(t,";").concat(d.join(";"))}}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?void 0:{},r=document.cookie?document.cookie.split("; "):[],o=/(%[0-9A-Z]{2})+/g,i=0;i<r.length;i++){var a=r[i].split("="),s=a.slice(1).join("=");t.json||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var l=a[0].replace(o,decodeURIComponent);if(s=s.replace(o,decodeURIComponent),t.json)try{s=JSON.parse(s)}catch(e){}if(e===l){n=s;break}e||(n[l]=s)}catch(e){}}return n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e,"",o.assign(t,{expires:"Thu, 01 Jan 1970 00:00:00 GMT",maxAge:-1}))}function l(){return a(void 0,{json:!0})}!function(e){e.strict="strict",e.lax="lax"}(r||(r={}));var c={set:i,get:a,getJSON:l,remove:s};t.default=c},558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInstance=l,t.default=void 0;var r=a(n(300)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(836)),i=a(n(722));function a(e){return e&&e.__esModule?e:{default:e}}var s={key:"x-hng",maxAge:15552e3,path:"/"};function l(e){return e=o.assign({},s,e),new r.default(e)}var c=l(),u={locale:c,cookie:i.default,util:o,create:l,getKey:c.getKey.bind(c),getLocale:c.getLocale.bind(c),getLocaleString:c.getLocaleString.bind(c),getEnv:c.getEnv.bind(c),setLocale:c.setLocale.bind(c),setRegion:c.setRegion.bind(c),setLang:c.setLang.bind(c),setCurrency:c.setCurrency.bind(c),setTimeZone:c.setTimeZone.bind(c),setLocaleWithObject:c.setLocaleWithObject.bind(c),clear:c.clear.bind(c)},d=u;t.default=d,e.exports=u},300:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LOCALE_KEY_NAME=void 0;var r,o=a(n(722)),i=a(n(836));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.LOCALE_KEY_NAME=r,function(e){e.region="region",e.lang="lang",e.currency="currency",e.tz="tz"}(r||(t.LOCALE_KEY_NAME=r={}));var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"key",void 0),c(this,"maxAge",void 0),c(this,"domain",void 0),c(this,"path",void 0),c(this,"container",void 0),this.key=t.key||"",this.maxAge=t.maxAge,this.domain=t.domain,this.path=t.path,this.container=i.getContainerType()}var t,n;return t=e,(n=[{key:"getKey",value:function(){return this.key}},{key:"getPureLocale",value:function(){return this[this.container]?this[this.container]():""}},{key:"getLocale",value:function(e){var t=this.getPureLocale();if(e&&e.short&&t[r.lang]){var n=t[r.lang].split("-")[0];t[r.lang]=n}return t.region&&(t.regionID=t.region),t.lang&&(t.language=t.lang),t}},{key:"getEnv",value:function(e){var t=i.assign({},{short:!0},e);return this.getLocale(t)}},{key:"getLocaleString",value:function(){var e=this.getPureLocale();return i.stringifyToQueryString(e)}},{key:"setLocale",value:function(e,t){if(e){var n=c({},e,t);this.setLocaleWithObject(n)}}},{key:"setRegion",value:function(e){e&&this.setLocale(r.region,e)}},{key:"setLang",value:function(e){e&&this.setLocale(r.lang,e)}},{key:"setCurrency",value:function(e){e&&this.setLocale(r.currency,e)}},{key:"setTimeZone",value:function(e){e&&this.setLocale(r.tz,e)}},{key:"setLocaleWithObject",value:function(e){if(this.container!==i.ContainerType.weex){var t=this.getLocale(),n=i.assign({},t,e);delete n.language;var r=i.stringifyToQueryString(n);o.set(this.key,r,{path:this.path||"/",maxAge:this.maxAge,domain:this.domain})}}},{key:"weex",value:function(){var e="";return"object"===("undefined"==typeof WXEnvironment?"undefined":s(WXEnvironment))&&(e=WXEnvironment&&WXEnvironment[this.key]||""),i.parseQueryString(e)}},{key:"web",value:function(){var e="",t={};if(location&&location.search){var n=location.search.replace(/^[?#&]/,""),a=i.parseQueryString(n),l=i.objectValues(r);Object.keys(a).forEach((function(e){l.indexOf(e)>=0&&(t[e]=a[e])}))}if("object"===("undefined"==typeof window?"undefined":s(window))){var c=window;if(e=window[this.key]){var u=i.parseQueryString(e);t=i.assign({},u,t)}else if("object"===s(c.g_config)){var d=c.g_config,h=d.regionID,f=d.language,p={};h&&(p[r.region]=h),f&&(p[r.lang]=f),t=i.assign({},p,t)}}if(!e){var g={};if(e=o.get(this.key))g=i.parseQueryString(e);else{var v=o.get("hng");if(v){var m=v.split("|");m[0]&&(g[r.region]=m[0]),m[1]&&(g[r.lang]=m[1]),m[2]&&(g[r.currency]=m[2])}}t=i.assign({},g,t)}return t}},{key:"clear",value:function(){o.remove(this.key)}}])&&l(t.prototype,n),e}();t.default=u},836:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r;function o(e,t){if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}function i(e){try{return decodeURIComponent(e)}catch(t){return e}}function a(e){try{return encodeURIComponent(e)}catch(t){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getContainerType=function(){var e="";return"function"==typeof callNative?e=r.weex:"object"!==("undefined"==typeof navigator?"undefined":n(navigator))||"Mozilla"!==navigator.appCodeName&&"Gecko"!==navigator.product||(e=r.web),e},t.splitOnFirst=o,t.decode=i,t.encode=a,t.parseQueryString=function(e){if(!e)return{};var t=e.split("&"),n={};return t.forEach((function(e){var t,r=(2,function(e){if(Array.isArray(e))return e}(t=o(e.replace(/\+/g," "),"="))||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),2!==n.length);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),a=r[0],s=r[1],l=void 0===s?"":i(s);n[a]=l})),n},t.stringifyToQueryString=function(e){return Object.keys(e).map((function(t){var n=e[t];return void 0===n?"":null===n?a(t):"".concat(a(t),"=").concat(a(n))})).filter((function(e){return e.length>0})).join("&")},t.objectValues=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t},t.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},t.ContainerType=void 0,t.ContainerType=r,function(e){e.weex="weex",e.web="web"}(r||(t.ContainerType=r={}))},959:(e,t,n)=>{"use strict";t.ZP=void 0;var r,o,i=n(370),a=(r=n(998))&&r.__esModule?r:{default:r},s=n(142),l="__GLOBAL_STRING_FORMAT__",c={};function u(e){if(e)return o=e,e;if(o)return o;if(i.isWeex)return c;var t=void 0!==n.g?n.g:window;return t[l]||(t[l]={}),t[l]}var d={init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.name,o=void 0===r?"default":r,i=u(n.context),s=new a.default(e,t);return i[o]=s,s},format:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.name,o=void 0===r?"default":r,i=u()[o];return i?i.format(e,t,n):((0,s.error)("\n    Not found instance named ".concat(o,",\n    make sure to call formatString.format() after formatString.init()\n    ")),e.defaultMessage||e.id||"")},StringFormat:a.default};t.ZP=d},998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(462))&&r.__esModule?r:{default:r},i=n(142);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"string"!=typeof e&&((0,i.error)('"locale" is not a string, please check your input locale'),e="");var t=e.toLowerCase();return t.replace("-","_")}function c(e,t){if(e===t)return!0;var n=e.match(/(\S*)_/);return!!n&&c(n[1],t)}function u(e,t){var n=l(e),r=l(t);return n===r||c(n,r)}var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"dictionary",void 0),s(this,"strings",void 0),s(this,"locale",void 0),s(this,"medusa",void 0),this.dictionary={},this.locale=t||"",n||((0,i.warn)('param "strings" is undefined, please check your incoming'),n={}),n.medusa&&(this.medusa=n.medusa,delete n.medusa),this.strings=n;var a=n[t];a||(Object.keys(n).forEach((function(e){l(e)===l(t)&&((0,i.warn)("no string list for locale: ".concat(t," , will replace it with ").concat(e)),a=n[e])})),a||Object.keys(n).forEach((function(e){u(t,e)&&((0,i.warn)("no value for locale: ".concat(t," , will replace it with").concat(e)),a=n[e])}))),(!a||a&&0===Object.keys(a).length)&&((0,i.warn)("no value for locale: ".concat(t,", please check your second param")),a={}),Object.keys(a).forEach((function(e){try{var n=new o.default(a[e],t);r.dictionary[e]=n}catch(t){r.dictionary[e]={},(0,i.error)(t)}}))}var t,n;return t=e,n=[{key:"getStrings",value:function(){return this.strings}},{key:"formatString",value:function(e,t,n){var r=this.medusa,o=this.locale,i=e.format(t);return r&&r.app_name&&"pd-KV"===o&&(i="##@@@".concat(n,"##").concat(r.app_name,"@@@##").concat(i)),i}},{key:"format",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""},a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=r.defaultMessage||r.defaultString||"",c=a&&Object.keys(a).length>0,u="",d={},h={},f=s.React,p=s.component,g=s.tagName,v=void 0===g?"span":g;if(c){var m=Math.floor(1099511627776*Math.random()).toString(16),y=(e=0,function(){return e+=1,"ELEMENT-".concat(m,"-").concat(e)});u="@__".concat(m,"__@"),Object.keys(a).forEach((function(e){var t=a[e];if(f&&f.isValidElement(t)){var n=y();d[e]=u+n+u,h[n]=t}else d[e]=t}))}if(this.dictionary[r.id])try{t=this.formatString(this.dictionary[r.id],d,r.id)}catch(e){var C=r.id?", using id as fallback.":"",b=l?", using defaultString as fallback.":C;(0,i.error)("format string: ".concat(r.id," for locale  ").concat(this.locale," ").concat(b," \n").concat(e)),t=l||r.id||""}else if("string"==typeof r)(0,i.error)("type of  \"des\" must be object, like:  {id: '', defaultString: ''}, instead of string "),t=r||"";else{(0,i.warn)('there is no string with id="'.concat(r.id,'" for locale: "').concat(this.locale,'", use defaultString or id as fallback'));var w=l||r.id||"";try{var x=new o.default(w,this.locale);t=this.formatString(x,d,r.id)}catch(e){t=w}}if(h&&Object.keys(h).length>0){var E=t.split(u).filter((function(e){return!!e})).map((function(e){return h[e]||e})),S=p||v;return f?f.createElement.apply(f,[S,null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(n=E)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())):E}return t}}],n&&a(t.prototype,n),e}();t.default=d},142:(e,t,n)=>{"use strict";var r=n(656);Object.defineProperty(t,"__esModule",{value:!0}),t.warn=function(e){"undefined"!=typeof console&&console.warn&&void 0!==r&&r.env},t.error=function(e){"undefined"!=typeof console&&console.error&&void 0!==r&&r.env}},787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>me});var r=n(659);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=n(689);function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n(24),c=n.n(l),u=n(838),d=n.n(u);const h=(0,l.createContext)({});var f=n(743);function p(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function g(e){return e<=1?"".concat(100*Number(e),"%"):e}function v(e){return 1===e.length?"0"+e:String(e)}function m(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function y(e){return C(e)/255}function C(e){return parseInt(e,16)}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function w(e){var t,n,r,o={r:0,g:0,b:0},i=1,a=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(b[e])e=b[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=I.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=I.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=I.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=I.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=I.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=I.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=I.hex8.exec(e))?{r:C(n[1]),g:C(n[2]),b:C(n[3]),a:y(n[4]),format:t?"name":"hex8"}:(n=I.hex6.exec(e))?{r:C(n[1]),g:C(n[2]),b:C(n[3]),format:t?"name":"hex"}:(n=I.hex4.exec(e))?{r:C(n[1]+n[1]),g:C(n[2]+n[2]),b:C(n[3]+n[3]),a:y(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=I.hex3.exec(e))&&{r:C(n[1]+n[1]),g:C(n[2]+n[2]),b:C(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(T(e.r)&&T(e.g)&&T(e.b)?(t=e.r,n=e.g,r=e.b,o={r:255*p(t,255),g:255*p(n,255),b:255*p(r,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):T(e.h)&&T(e.s)&&T(e.v)?(a=g(e.s),s=g(e.v),o=function(e,t,n){e=6*p(e,360),t=p(t,100),n=p(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),l=r%6;return{r:255*[n,a,i,i,s,n][l],g:255*[s,n,n,a,i,i][l],b:255*[i,i,s,n,n,a][l]}}(e.h,a,s),c=!0,u="hsv"):T(e.h)&&T(e.s)&&T(e.l)&&(a=g(e.s),l=g(e.l),o=function(e,t,n){var r,o,i;if(e=p(e,360),t=p(t,100),n=p(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=m(s,a,e+1/3),o=m(s,a,e),i=m(s,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,a,l),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(i),{ok:c,format:e.format||u,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:i}}var x="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),E="[\\s|\\(]+(".concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")\\s*\\)?"),S="[\\s|\\(]+(".concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")[,|\\s]+(").concat(x,")\\s*\\)?"),I={CSS_UNIT:new RegExp(x),rgb:new RegExp("rgb"+E),rgba:new RegExp("rgba"+S),hsl:new RegExp("hsl"+E),hsla:new RegExp("hsla"+S),hsv:new RegExp("hsv"+E),hsva:new RegExp("hsva"+S),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function T(e){return Boolean(I.CSS_UNIT.exec(String(e)))}var L=2,M=.16,O=.05,_=.05,N=.15,A=5,R=4,D=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function P(e){var t=function(e,t,n){e=p(e,255),t=p(t,255),n=p(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,s=r-o,l=0===r?0:s/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:l,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function k(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var o=[v(Math.round(e).toString(16)),v(Math.round(t).toString(16)),v(Math.round(n).toString(16))];return o.join("")}(t,n,r))}function B(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-L*t:Math.round(e.h)+L*t:n?Math.round(e.h)+L*t:Math.round(e.h)-L*t)<0?r+=360:r>=360&&(r-=360),r}function F(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-M*t:t===R?e.s+M:e.s+O*t)>1&&(r=1),n&&t===A&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function j(e,t,n){var r;return(r=n?e.v+_*t:e.v-N*t)>1&&(r=1),Number(r.toFixed(2))}function z(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=w(e),o=A;o>0;o-=1){var i=P(r),a=k(w({h:B(i,o,!0),s:F(i,o,!0),v:j(i,o,!0)}));n.push(a)}n.push(k(r));for(var s=1;s<=R;s+=1){var l=P(r),c=k(w({h:B(l,s),s:F(l,s),v:j(l,s)}));n.push(c)}return"dark"===t.theme?D.map((function(e){var r,o,i,a=e.index,s=e.opacity;return k((r=w(t.backgroundColor||"#141414"),i=100*s/100,{r:((o=w(n[a])).r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b}))})):n}var H={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},W={},G={};Object.keys(H).forEach((function(e){W[e]=z(H[e]),W[e].primary=W[e][5],G[e]=z(H[e],{theme:"dark",backgroundColor:"#141414"}),G[e].primary=G[e][5]})),W.red,W.volcano,W.gold,W.orange,W.yellow,W.lime,W.green,W.cyan,W.blue,W.geekblue,W.purple,W.magenta,W.grey;var U={},V=[];function Y(e,t){}function $(e,t){}function X(e,t,n){t||U[n]||(e(!1,n),U[n]=!0)}function q(e,t){X(Y,e,t)}q.preMessage=function(e){V.push(e)},q.resetWarned=function(){U={}},q.noteOnce=function(e,t){X($,e,t)};const K=q;var Z="data-rc-order",Q="rc-util-key",J=new Map;function ee(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):Q}function te(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function ne(e){return Array.from((J.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||!window.document||!window.document.createElement)return null;var n=t.csp,r=t.prepend,o=document.createElement("style");o.setAttribute(Z,function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r)),null!=n&&n.nonce&&(o.nonce=null==n?void 0:n.nonce),o.innerHTML=e;var i=te(t),a=i.firstChild;if(r){if("queue"===r){var s=ne(i).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(Z))}));if(s.length)return i.insertBefore(o,s[s.length-1].nextSibling),o}i.insertBefore(o,a)}else i.appendChild(o);return o}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){var n=J.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=re("",t),o=r.parentNode;J.set(e,o),e.removeChild(r)}}(te(n),n);var r,o,i,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ne(te(t)).find((function(n){return n.getAttribute(ee(t))===e}))}(t,n);if(a)return null!==(r=n.csp)&&void 0!==r&&r.nonce&&a.nonce!==(null===(o=n.csp)||void 0===o?void 0:o.nonce)&&(a.nonce=null===(i=n.csp)||void 0===i?void 0:i.nonce),a.innerHTML!==e&&(a.innerHTML=e),a;var s=re(e,n);return s.setAttribute(ee(n),t),s}function ie(e){return"object"===(0,f.Z)(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===(0,f.Z)(e.icon)||"function"==typeof e.icon)}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return"class"===n?(t.className=r,delete t.class):t[n]=r,t}),{})}function se(e,t,n){return n?c().createElement(e.tag,(0,r.Z)((0,r.Z)({key:t},ae(e.attrs)),n),(e.children||[]).map((function(n,r){return se(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):c().createElement(e.tag,(0,r.Z)({key:t},ae(e.attrs)),(e.children||[]).map((function(n,r){return se(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function le(e){return z(e)[0]}function ce(e){return e?Array.isArray(e)?e:[e]:[]}var ue=["icon","className","onClick","style","primaryColor","secondaryColor"],de={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},he=function(e){var t,n,o=e.icon,i=e.className,a=e.onClick,c=e.style,u=e.primaryColor,d=e.secondaryColor,f=s(e,ue),p=de;if(u&&(p={primaryColor:u,secondaryColor:d||le(u)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=(0,l.useContext)(h).csp;(0,l.useEffect)((function(){oe(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=ie(o),n="icon should be icon definiton, but got ".concat(o),K(t,"[@ant-design/icons] ".concat(n)),!ie(o))return null;var g=o;return g&&"function"==typeof g.icon&&(g=(0,r.Z)((0,r.Z)({},g),{},{icon:g.icon(p.primaryColor,p.secondaryColor)})),se(g.icon,"svg-".concat(g.name),(0,r.Z)({className:i,onClick:a,style:c,"data-icon":g.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f))};he.displayName="IconReact",he.getTwoToneColors=function(){return(0,r.Z)({},de)},he.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;de.primaryColor=t,de.secondaryColor=n||le(t),de.calculated=!!n};const fe=he;function pe(e){var t=i(ce(e),2),n=t[0],r=t[1];return fe.setTwoToneColors({primaryColor:n,secondaryColor:r})}var ge=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];pe("#1890ff");var ve=l.forwardRef((function(e,t){var n,o=e.className,c=e.icon,u=e.spin,f=e.rotate,p=e.tabIndex,g=e.onClick,v=e.twoToneColor,m=s(e,ge),y=l.useContext(h).prefixCls,C=void 0===y?"anticon":y,b=d()(C,(n={},(0,a.Z)(n,"".concat(C,"-").concat(c.name),!!c.name),(0,a.Z)(n,"".concat(C,"-spin"),!!u||"loading"===c.name),n),o),w=p;void 0===w&&g&&(w=-1);var x=f?{msTransform:"rotate(".concat(f,"deg)"),transform:"rotate(".concat(f,"deg)")}:void 0,E=i(ce(v),2),S=E[0],I=E[1];return l.createElement("span",(0,r.Z)((0,r.Z)({role:"img","aria-label":c.name},m),{},{ref:t,tabIndex:w,onClick:g,className:b}),l.createElement(fe,{icon:c,primaryColor:S,secondaryColor:I,style:x}))}));ve.displayName="AntdIcon",ve.getTwoToneColor=function(){var e=fe.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},ve.setTwoToneColor=pe;const me=ve},840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(659),o=n(24);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var a=n(787),s=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};s.displayName="DeleteOutlined";const l=o.forwardRef(s)},932:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(659),o=n(24);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};var a=n(787),s=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};s.displayName="ReloadOutlined";const l=o.forwardRef(s)},196:(e,t)=>{"use strict";t.EL=void 0,t.EL=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)}},947:(e,t,n)=>{"use strict";n.d(t,{dZ:()=>Nf});var r=n(153),o=n(721),i=n(24),a=n.n(i),s=n(314),l=n.n(s),c=n(840),u=n(932);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const h={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};var f={lang:d({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:d({},h)};f.lang.ok="确定";var p="${label}不是一个有效的${type}";const g={locale:"zh-cn",Pagination:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},DatePicker:f,TimePicker:h,Calendar:f,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:p,method:p,array:p,object:p,number:p,date:p,boolean:p,integer:p,float:p,regexp:p,email:p,url:p,hex:p},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}},v={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var m={lang:d({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:d({},v)},y="${label} is not a valid ${type}";const C={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:m,TimePicker:v,Calendar:m,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:y,method:y,array:y,object:y,number:y,date:y,boolean:y,integer:y,float:y,regexp:y,email:y,url:y,hex:y},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e=n.hmd(e);var b=Object.defineProperty,w=Object.defineProperties,x=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&T(e,n,t[n]);if(E)for(var n of E(t))I.call(t,n)&&T(e,n,t[n]);return e},M=(e,t)=>w(e,x(t)),O=(e,t)=>{var n={};for(var r in e)S.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&E)for(var r of E(e))t.indexOf(r)<0&&I.call(e,r)&&(n[r]=e[r]);return n};const _={tooltip:{showTooltip:!0,autoAdjustBoundary:"body",operation:{hiddenColumns:!0,trend:!1,sort:!0}},showDefaultHeaderActionIcon:!0},N=()=>[{name:(0,r.agQ)("升序"),value:"ASC"},{name:(0,r.agQ)("降序"),value:"DESC"}],A=()=>[{label:(0,r.agQ)("首字母"),value:"sortMethod"},{label:(0,r.agQ)("手动排序"),value:"sortBy"},{label:(0,r.agQ)("其他字段"),value:"sortByMeasure",children:[]}],R="antv-s2-advanced-sort",D="s2-drill-down",P="s2-strategy-sheet-tooltip",k=e=>e?`${P}-${e}`:P;var B="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,F="object"==typeof self&&self&&self.Object===Object&&self,j=B||F||Function("return this")(),z=j.Symbol,H=Object.prototype,W=H.hasOwnProperty,G=H.toString,U=z?z.toStringTag:void 0,V=Object.prototype.toString,Y="[object Null]",$="[object Undefined]",X=z?z.toStringTag:void 0;function q(e){return null==e?void 0===e?$:Y:X&&X in Object(e)?function(e){var t=W.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch(e){}var o=G.call(e);return r&&(t?e[U]=n:delete e[U]),o}(e):function(e){return V.call(e)}(e)}function K(e){return null!=e&&"object"==typeof e}var Z="[object Symbol]";function Q(e){return"symbol"==typeof e||K(e)&&q(e)==Z}function J(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var ee=Array.isArray,te=1/0,ne=z?z.prototype:void 0,re=ne?ne.toString:void 0;function oe(e){if("string"==typeof e)return e;if(ee(e))return J(e,oe)+"";if(Q(e))return re?re.call(e):"";var t=e+"";return"0"==t&&1/e==-te?"-0":t}var ie=/\s/,ae=/^\s+/;function se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var le=NaN,ce=/^[-+]0x[0-9a-f]+$/i,ue=/^0b[01]+$/i,de=/^0o[0-7]+$/i,he=parseInt;function fe(e){if("number"==typeof e)return e;if(Q(e))return le;if(se(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=se(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;var n;e=(n=e)?n.slice(0,function(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}(n)+1).replace(ae,""):n;var r=ue.test(e);return r||de.test(e)?he(e.slice(2),r?2:8):ce.test(e)?le:+e}var pe=1/0;function ge(e){var t=function(e){return e?(e=fe(e))===pe||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function ve(e){return e}var me="[object AsyncFunction]",ye="[object Function]",Ce="[object GeneratorFunction]",be="[object Proxy]";function we(e){if(!se(e))return!1;var t=q(e);return t==ye||t==Ce||t==me||t==be}var xe,Ee=j["__core-js_shared__"],Se=(xe=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+xe:"",Ie=Function.prototype.toString;function Te(e){if(null!=e){try{return Ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Le=/^\[object .+?Constructor\]$/,Me=Function.prototype,Oe=Object.prototype,_e=Me.toString,Ne=Oe.hasOwnProperty,Ae=RegExp("^"+_e.call(Ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Re(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!se(e)||(t=e,Se&&Se in t))&&(we(e)?Ae:Le).test(Te(e));var t}(n)?n:void 0}var De,Pe,ke,Be=Re(j,"WeakMap"),Fe=Object.create,je=function(){function e(){}return function(t){if(!se(t))return{};if(Fe)return Fe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),ze=Date.now,He=function(){try{var e=Re(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),We=He,Ge=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:ve,Ue=(De=Ge,Pe=0,ke=0,function(){var e=ze(),t=16-(e-ke);if(ke=e,t>0){if(++Pe>=800)return arguments[0]}else Pe=0;return De.apply(void 0,arguments)});function Ve(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ye(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function $e(e){return e!=e}function Xe(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Ye(e,$e,n)}function qe(e,t){return!(null==e||!e.length)&&Xe(e,t,0)>-1}var Ke=9007199254740991,Ze=/^(?:0|[1-9]\d*)$/;function Qe(e,t){var n=typeof e;return!!(t=null==t?Ke:t)&&("number"==n||"symbol"!=n&&Ze.test(e))&&e>-1&&e%1==0&&e<t}function Je(e,t,n){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function et(e,t){return e===t||e!=e&&t!=t}var tt=Object.prototype.hasOwnProperty;function nt(e,t,n){var r=e[t];tt.call(e,t)&&et(r,n)&&(void 0!==n||t in e)||Je(e,t,n)}function rt(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?Je(n,s,l):nt(n,s,l)}return n}var ot=Math.max,it=9007199254740991;function at(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=it}function st(e){return null!=e&&at(e.length)&&!we(e)}var lt=Object.prototype;function ct(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lt)}function ut(e){return K(e)&&"[object Arguments]"==q(e)}var dt=Object.prototype,ht=dt.hasOwnProperty,ft=dt.propertyIsEnumerable,pt=ut(function(){return arguments}())?ut:function(e){return K(e)&&ht.call(e,"callee")&&!ft.call(e,"callee")},gt="object"==typeof exports&&exports&&!exports.nodeType&&exports,vt=gt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===gt?j.Buffer:void 0,yt=(mt?mt.isBuffer:void 0)||function(){return!1},Ct={};function bt(e){return function(t){return e(t)}}Ct["[object Float32Array]"]=Ct["[object Float64Array]"]=Ct["[object Int8Array]"]=Ct["[object Int16Array]"]=Ct["[object Int32Array]"]=Ct["[object Uint8Array]"]=Ct["[object Uint8ClampedArray]"]=Ct["[object Uint16Array]"]=Ct["[object Uint32Array]"]=!0,Ct["[object Arguments]"]=Ct["[object Array]"]=Ct["[object ArrayBuffer]"]=Ct["[object Boolean]"]=Ct["[object DataView]"]=Ct["[object Date]"]=Ct["[object Error]"]=Ct["[object Function]"]=Ct["[object Map]"]=Ct["[object Number]"]=Ct["[object Object]"]=Ct["[object RegExp]"]=Ct["[object Set]"]=Ct["[object String]"]=Ct["[object WeakMap]"]=!1;var wt="object"==typeof exports&&exports&&!exports.nodeType&&exports,xt=wt&&e&&!e.nodeType&&e,Et=xt&&xt.exports===wt&&B.process,St=function(){try{return xt&&xt.require&&xt.require("util").types||Et&&Et.binding&&Et.binding("util")}catch(e){}}(),It=St&&St.isTypedArray,Tt=It?bt(It):function(e){return K(e)&&at(e.length)&&!!Ct[q(e)]},Lt=Object.prototype.hasOwnProperty;function Mt(e,t){var n=ee(e),r=!n&&pt(e),o=!n&&!r&&yt(e),i=!n&&!r&&!o&&Tt(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!Lt.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Qe(c,l))||s.push(c);return s}function Ot(e,t){return function(n){return e(t(n))}}var _t=Ot(Object.keys,Object),Nt=Object.prototype.hasOwnProperty;function At(e){if(!ct(e))return _t(e);var t=[];for(var n in Object(e))Nt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rt(e){return st(e)?Mt(e):At(e)}var Dt=Object.prototype.hasOwnProperty;function Pt(e){return st(e)?Mt(e,!0):function(e){if(!se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ct(e),n=[];for(var r in e)("constructor"!=r||!t&&Dt.call(e,r))&&n.push(r);return n}(e)}var kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/;function Ft(e,t){if(ee(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Q(e))||Bt.test(e)||!kt.test(e)||null!=t&&e in Object(t)}var jt=Re(Object,"create"),zt=Object.prototype.hasOwnProperty,Ht=Object.prototype.hasOwnProperty;function Wt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gt(e,t){for(var n=e.length;n--;)if(et(e[n][0],t))return n;return-1}Wt.prototype.clear=function(){this.__data__=jt?jt(null):{},this.size=0},Wt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wt.prototype.get=function(e){var t=this.__data__;if(jt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return zt.call(t,e)?t[e]:void 0},Wt.prototype.has=function(e){var t=this.__data__;return jt?void 0!==t[e]:Ht.call(t,e)},Wt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jt&&void 0===t?"__lodash_hash_undefined__":t,this};var Ut=Array.prototype.splice;function Vt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vt.prototype.clear=function(){this.__data__=[],this.size=0},Vt.prototype.delete=function(e){var t=this.__data__,n=Gt(t,e);return!(n<0||(n==t.length-1?t.pop():Ut.call(t,n,1),--this.size,0))},Vt.prototype.get=function(e){var t=this.__data__,n=Gt(t,e);return n<0?void 0:t[n][1]},Vt.prototype.has=function(e){return Gt(this.__data__,e)>-1},Vt.prototype.set=function(e,t){var n=this.__data__,r=Gt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Yt=Re(j,"Map");function $t(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Xt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Wt,map:new(Yt||Vt),string:new Wt}},Xt.prototype.delete=function(e){var t=$t(this,e).delete(e);return this.size-=t?1:0,t},Xt.prototype.get=function(e){return $t(this,e).get(e)},Xt.prototype.has=function(e){return $t(this,e).has(e)},Xt.prototype.set=function(e,t){var n=$t(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function qt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(qt.Cache||Xt),n}qt.Cache=Xt;var Kt,Zt,Qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jt=/\\(\\)?/g,en=(Kt=qt((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Qt,(function(e,n,r,o){t.push(r?o.replace(Jt,"$1"):n||e)})),t}),(function(e){return 500===Zt.size&&Zt.clear(),e})),Zt=Kt.cache,Kt);function tn(e){return null==e?"":oe(e)}function nn(e,t){return ee(e)?e:Ft(e,t)?[e]:en(tn(e))}var rn=1/0;function on(e){if("string"==typeof e||Q(e))return e;var t=e+"";return"0"==t&&1/e==-rn?"-0":t}function an(e,t){for(var n=0,r=(t=nn(t,e)).length;null!=e&&n<r;)e=e[on(t[n++])];return n&&n==r?e:void 0}function sn(e,t,n){var r=null==e?void 0:an(e,t);return void 0===r?n:r}function ln(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var cn=z?z.isConcatSpreadable:void 0;function un(e){return ee(e)||pt(e)||!!(cn&&e&&e[cn])}function dn(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=un),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?dn(s,t-1,n,r,o):ln(o,s):r||(o[o.length]=s)}return o}function hn(e){return null!=e&&e.length?dn(e,1):[]}var fn=Ot(Object.getPrototypeOf,Object),pn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function gn(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function vn(e){var t=this.__data__=new Vt(e);this.size=t.size}vn.prototype.clear=function(){this.__data__=new Vt,this.size=0},vn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},vn.prototype.get=function(e){return this.__data__.get(e)},vn.prototype.has=function(e){return this.__data__.has(e)},vn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Vt){var r=n.__data__;if(!Yt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xt(r)}return n.set(e,t),this.size=n.size,this};var mn="object"==typeof exports&&exports&&!exports.nodeType&&exports,yn=mn&&e&&!e.nodeType&&e,Cn=yn&&yn.exports===mn?j.Buffer:void 0,bn=Cn?Cn.allocUnsafe:void 0;function wn(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function xn(){return[]}var En=Object.prototype.propertyIsEnumerable,Sn=Object.getOwnPropertySymbols,In=Sn?function(e){return null==e?[]:(e=Object(e),wn(Sn(e),(function(t){return En.call(e,t)})))}:xn,Tn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ln(t,In(e)),e=fn(e);return t}:xn;function Ln(e,t,n){var r=t(e);return ee(e)?r:ln(r,n(e))}function Mn(e){return Ln(e,Rt,In)}function On(e){return Ln(e,Pt,Tn)}var _n=Re(j,"DataView"),Nn=Re(j,"Promise"),An=Re(j,"Set"),Rn="[object Map]",Dn="[object Promise]",Pn="[object Set]",kn="[object WeakMap]",Bn="[object DataView]",Fn=Te(_n),jn=Te(Yt),zn=Te(Nn),Hn=Te(An),Wn=Te(Be),Gn=q;(_n&&Gn(new _n(new ArrayBuffer(1)))!=Bn||Yt&&Gn(new Yt)!=Rn||Nn&&Gn(Nn.resolve())!=Dn||An&&Gn(new An)!=Pn||Be&&Gn(new Be)!=kn)&&(Gn=function(e){var t=q(e),n="[object Object]"==t?e.constructor:void 0,r=n?Te(n):"";if(r)switch(r){case Fn:return Bn;case jn:return Rn;case zn:return Dn;case Hn:return Pn;case Wn:return kn}return t});var Un=Gn,Vn=Object.prototype.hasOwnProperty,Yn=j.Uint8Array;function $n(e){var t=new e.constructor(e.byteLength);return new Yn(t).set(new Yn(e)),t}var Xn=/\w*$/,qn=z?z.prototype:void 0,Kn=qn?qn.valueOf:void 0,Zn="[object Boolean]",Qn="[object Date]",Jn="[object Map]",er="[object Number]",tr="[object RegExp]",nr="[object Set]",rr="[object String]",or="[object Symbol]",ir="[object ArrayBuffer]",ar="[object DataView]",sr="[object Float32Array]",lr="[object Float64Array]",cr="[object Int8Array]",ur="[object Int16Array]",dr="[object Int32Array]",hr="[object Uint8Array]",fr="[object Uint8ClampedArray]",pr="[object Uint16Array]",gr="[object Uint32Array]";var vr=St&&St.isMap,mr=vr?bt(vr):function(e){return K(e)&&"[object Map]"==Un(e)},yr=St&&St.isSet,Cr=yr?bt(yr):function(e){return K(e)&&"[object Set]"==Un(e)},br="[object Arguments]",wr="[object Function]",xr="[object Object]",Er={};function Sr(e,t,n,r,o,i){var a,s=1&t,l=2&t,c=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!se(e))return e;var u=ee(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Vn.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,a)}else{var d=Un(e),h=d==wr||"[object GeneratorFunction]"==d;if(yt(e))return function(e,t){if(t)return e.slice();var n=e.length,r=bn?bn(n):new e.constructor(n);return e.copy(r),r}(e,s);if(d==xr||d==br||h&&!o){if(a=l||h?{}:function(e){return"function"!=typeof e.constructor||ct(e)?{}:je(fn(e))}(e),!s)return l?function(e,t){return rt(e,Tn(e),t)}(e,function(e,t){return e&&rt(t,Pt(t),e)}(a,e)):function(e,t){return rt(e,In(e),t)}(e,function(e,t){return e&&rt(t,Rt(t),e)}(a,e))}else{if(!Er[d])return o?e:{};a=function(e,t,n){var r,o,i,a=e.constructor;switch(t){case ir:return $n(e);case Zn:case Qn:return new a(+e);case ar:return function(e,t){var n=t?$n(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case sr:case lr:case cr:case ur:case dr:case hr:case fr:case pr:case gr:return function(e,t){var n=t?$n(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case Jn:return new a;case er:case rr:return new a(e);case tr:return(i=new(o=e).constructor(o.source,Xn.exec(o))).lastIndex=o.lastIndex,i;case nr:return new a;case or:return r=e,Kn?Object(Kn.call(r)):{}}}(e,d,s)}}i||(i=new vn);var f=i.get(e);if(f)return f;i.set(e,a),Cr(e)?e.forEach((function(r){a.add(Sr(r,t,n,r,e,i))})):mr(e)&&e.forEach((function(r,o){a.set(o,Sr(r,t,n,o,e,i))}));var p=u?void 0:(c?l?On:Mn:l?Pt:Rt)(e);return Ve(p||e,(function(r,o){p&&(r=e[o=r]),nt(a,o,Sr(r,t,n,o,e,i))})),a}function Ir(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Xt;++t<n;)this.add(e[t])}function Tr(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Lr(e,t){return e.has(t)}Er[br]=Er["[object Array]"]=Er["[object ArrayBuffer]"]=Er["[object DataView]"]=Er["[object Boolean]"]=Er["[object Date]"]=Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Map]"]=Er["[object Number]"]=Er[xr]=Er["[object RegExp]"]=Er["[object Set]"]=Er["[object String]"]=Er["[object Symbol]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er["[object Error]"]=Er[wr]=Er["[object WeakMap]"]=!1,Ir.prototype.add=Ir.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ir.prototype.has=function(e){return this.__data__.has(e)};var Mr=1,Or=2;function _r(e,t,n,r,o,i){var a=n&Mr,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=n&Or?new Ir:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var p=e[d],g=t[d];if(r)var v=a?r(g,p,d,t,e,i):r(p,g,d,e,t,i);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!Tr(t,(function(e,t){if(!Lr(f,t)&&(p===e||o(p,e,n,r,i)))return f.push(t)}))){h=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function Nr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ar(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Rr=1,Dr=2,Pr="[object Boolean]",kr="[object Date]",Br="[object Error]",Fr="[object Map]",jr="[object Number]",zr="[object RegExp]",Hr="[object Set]",Wr="[object String]",Gr="[object Symbol]",Ur="[object ArrayBuffer]",Vr="[object DataView]",Yr=z?z.prototype:void 0,$r=Yr?Yr.valueOf:void 0,Xr=1,qr=Object.prototype.hasOwnProperty,Kr=1,Zr="[object Arguments]",Qr="[object Array]",Jr="[object Object]",eo=Object.prototype.hasOwnProperty;function to(e,t,n,r,o){return e===t||(null==e||null==t||!K(e)&&!K(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=ee(e),s=ee(t),l=a?Qr:Un(e),c=s?Qr:Un(t),u=(l=l==Zr?Jr:l)==Jr,d=(c=c==Zr?Jr:c)==Jr,h=l==c;if(h&&yt(e)){if(!yt(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new vn),a||Tt(e)?_r(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case Vr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ur:return!(e.byteLength!=t.byteLength||!i(new Yn(e),new Yn(t)));case Pr:case kr:case jr:return et(+e,+t);case Br:return e.name==t.name&&e.message==t.message;case zr:case Wr:return e==t+"";case Fr:var s=Nr;case Hr:var l=r&Rr;if(s||(s=Ar),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=Dr,a.set(e,t);var u=_r(s(e),s(t),r,o,i,a);return a.delete(e),u;case Gr:if($r)return $r.call(e)==$r.call(t)}return!1}(e,t,l,n,r,o,i);if(!(n&Kr)){var f=u&&eo.call(e,"__wrapped__"),p=d&&eo.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?t.value():t;return i||(i=new vn),o(g,v,n,r,i)}}return!!h&&(i||(i=new vn),function(e,t,n,r,o,i){var a=n&Xr,s=Mn(e),l=s.length;if(l!=Mn(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:qr.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],v=t[u];if(r)var m=a?r(v,g,u,t,e,i):r(g,v,u,e,t,i);if(!(void 0===m?g===v||o(g,v,n,r,i):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,C=t.constructor;y==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof C&&C instanceof C||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,i))}(e,t,n,r,to,o))}var no=1,ro=2;function oo(e){return e==e&&!se(e)}function io(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function ao(e,t){return null!=e&&t in Object(e)}function so(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=nn(t,e)).length,i=!1;++r<o;){var a=on(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&at(o)&&Qe(a,o)&&(ee(e)||pt(e))}(e,t,ao)}var lo=1,co=2;function uo(e){return function(t){return null==t?void 0:t[e]}}function ho(e){return"function"==typeof e?e:null==e?ve:"object"==typeof e?ee(e)?(r=e[0],o=e[1],Ft(r)&&oo(o)?io(on(r),o):function(e){var t=sn(e,r);return void 0===t&&t===o?so(e,r):to(o,t,lo|co)}):(n=function(e){for(var t=Rt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,oo(o)]}return t}(t=e),1==n.length&&n[0][2]?io(n[0][0],n[0][1]):function(e){return e===t||function(e,t,n,r){var o=n.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=n[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=n[o])[0],l=e[s],c=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else{var u,d=new vn;if(!(void 0===u?to(c,l,no|ro,r,d):u))return!1}}return!0}(e,0,n)}):function(e){return Ft(e)?uo(on(e)):function(e){return function(t){return an(t,e)}}(e)}(e);var t,n,r,o}var fo=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e};function po(e,t){return e&&fo(e,t,Rt)}var go,vo=(go=po,function(e,t){if(null==e)return e;if(!st(e))return go(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e}),mo=function(){return j.Date.now()},yo="Expected a function",Co=Math.max,bo=Math.min;function wo(e,t,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(yo);function f(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function g(){var e=mo();if(p(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?bo(n,i-(e-c)):n}(e))}function v(e){return s=void 0,h&&r?f(e):(r=o=void 0,a)}function m(){var e=mo(),n=p(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?f(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=fe(t)||0,se(n)&&(u=!!n.leading,i=(d="maxWait"in n)?Co(fe(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},m.flush=function(){return void 0===s?a:v(mo())},m}function xo(e){return"function"==typeof e?e:ve}function Eo(e,t){return(ee(e)?Ve:vo)(e,xo(t))}function So(e,t){var n=[];return vo(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function Io(e,t){return(ee(e)?wn:So)(e,ho(t))}var To,Lo=Math.max,Mo=(To=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:ge(n);return o<0&&(o=Lo(r+o,0)),Ye(e,ho(t),o)},function(e,t,n){var r=Object(e);if(!st(e)){var o=ho(t);e=Rt(e),t=function(e){return o(r[e],e,r)}}var i=To(e,t,n);return i>-1?r[o?e[i]:i]:void 0});function Oo(e){return e&&e.length?e[0]:void 0}function _o(e,t){var n=-1,r=st(e)?Array(e.length):[];return vo(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function No(e,t){return(ee(e)?J:_o)(e,ho(t))}var Ao="[object String]";function Ro(e){return"string"==typeof e||!ee(e)&&K(e)&&q(e)==Ao}var Do=Math.max,Po=Object.prototype.hasOwnProperty;function ko(e){if(null==e)return!0;if(st(e)&&(ee(e)||"string"==typeof e||"function"==typeof e.splice||yt(e)||Tt(e)||pt(e)))return!e.length;var t=Un(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ct(e))return!At(e).length;for(var n in e)if(Po.call(e,n))return!1;return!0}function Bo(e,t){return to(e,t)}function Fo(e){return null==e}function jo(e,t,n,r){if(!se(e))return e;for(var o=-1,i=(t=nn(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=on(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=se(u)?u:Qe(t[o+1])?[]:{})}nt(s,l,c),s=s[l]}return e}var zo=uo("length"),Ho="\\ud800-\\udfff",Wo="["+Ho+"]",Go="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Uo="\\ud83c[\\udffb-\\udfff]",Vo="[^"+Ho+"]",Yo="(?:\\ud83c[\\udde6-\\uddff]){2}",$o="[\\ud800-\\udbff][\\udc00-\\udfff]",Xo="(?:"+Go+"|"+Uo+")?",qo="[\\ufe0e\\ufe0f]?",Ko=qo+Xo+"(?:\\u200d(?:"+[Vo,Yo,$o].join("|")+")"+qo+Xo+")*",Zo="(?:"+[Vo+Go+"?",Go,Yo,$o,Wo].join("|")+")",Qo=RegExp(Uo+"(?="+Uo+")|"+Zo+Ko,"g");var Jo=function(e){return Ue(function(e,t,n){return t=ot(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=ot(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,void 0,hn),e+"")}((function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=an(e,a);n(0,a)&&jo(i,nn(a,e),s)}return i}(e,t,(function(t,n){return so(e,n)}))}(e,t)})),ei=Jo;function ti(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function ni(e){if(null==e)return 0;if(st(e))return Ro(e)?function(e){return pn.test(e)}(t=e)?function(e){for(var t=Qo.lastIndex=0;Qo.test(e);)++t;return t}(t):zo(t):e.length;var t,n=Un(e);return"[object Map]"==n||"[object Set]"==n?e.size:At(e).length}var ri=An&&1/Ar(new An([,-0]))[1]==1/0?function(e){return new An(e)}:function(){};function oi(e){return e&&e.length?function(e,t,n){var r=-1,o=qe,i=e.length,a=!0,s=[],l=s;if(i>=200){var c=ri(e);if(c)return Ar(c);a=!1,o=Lr,l=new Ir}else l=s;e:for(;++r<i;){var u=e[r],d=u;if(u=0!==u?u:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;s.push(u)}else o(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}(e):[]}const ii=e=>{let t=!0;const{s2:n,adaptive:r,container:o,wrapper:i}=e,{container:a,adaptiveWidth:s,adaptiveHeight:l}=((e,t)=>{var n,r,o,i;return!0===(i=t)||!1===i||K(i)&&"[object Boolean]"==q(i)?{container:e,adaptiveWidth:!0,adaptiveHeight:!1}:{container:(null==(n=null==t?void 0:t.getContainer)?void 0:n.call(t))||e,adaptiveWidth:null==(r=null==t?void 0:t.width)||r,adaptiveHeight:null==(o=null==t?void 0:t.height)||o}})(i,r);if(!(a&&o&&r&&n))return;const c=(e,t)=>{null==n||n.changeSheetSize(e,t),null==n||n.render(!1)},u=wo(c,200),d=new ResizeObserver((([e]=[])=>{e&&(()=>{const{clientWidth:e,clientHeight:r}=o,i=s?Math.floor(null!=e?e:n.options.width):n.options.width,a=l?Math.floor(null!=r?r:n.options.height):n.options.height;(s||l)&&(t?(c(i,a),t=!1):u(i,a))})()}));return d.observe(a,{box:"border-box"}),()=>{d.unobserve(a)}},ai=(e,t)=>{const n=e.store.get("drillDownDataCache",[]),r=n.find((e=>e.rowId===t.id));return{drillDownDataCache:n,drillDownCurrentCache:r}},si=e=>{var t;const n=e.spreadsheet,{fields:r}=n.dataCfg,o=(null==(t=r.rows)?void 0:t.length)-1,i=!!ko(r.values)||n.isValueInCols();return o<=e.level&&n.isHierarchyTreeType()&&i&&!e.isGrandTotals};(0,r.AfN)({zh_CN:{选择分析信息:"选择分析信息",切换指标:"切换指标",确定:"确定",取消:"取消",重置:"重置",请输入关键字搜索:"请输入关键字搜索",搜索:"搜索",恢复:"恢复","已选 {} 项":"已选 {} 项",所选项:"所选项",选择下钻维度:"选择下钻维度",恢复默认:"恢复默认",搜索字段:"搜索字段",行列切换:"行列切换",行头:"行头",列头:"列头",值:"值",展开子项:"展开子项",首字母:"首字母",手动排序:"手动排序",其他字段:"其他字段",高级排序:"高级排序",设置顺序:"设置顺序",可选字段:"可选字段","按以下规则进行排序（优先级由低到高）":"按以下规则进行排序（优先级由低到高）",按:"按",说明:"说明",复制原始数据:"复制原始数据",复制格式化数据:"复制格式化数据",下载原始数据:"下载原始数据",下载格式化数据:"下载格式化数据",操作成功:"操作成功",操作失败:"操作失败",时间:"时间",指标:"指标",目标值:"目标值"},en_US:{选择分析信息:"Select Analysis Information",切换指标:"Switch indicator",确定:"Ok",取消:"Cancel",重置:"Reset",请输入关键字搜索:"Please enter a keyword search",搜索:"Search",恢复:"Recover","已选 {} 项":"selected {} item",所选项:"selected items",选择下钻维度:"Select drill down dimension",恢复默认:"Restore default",搜索字段:"Search field",行列切换:"Switch Dimensions",行头:"Rows",列头:"Cols",值:"Values",展开子项:"Expand Children",首字母:"Alphabetical order",手动排序:"Custom order",其他字段:"Other field",高级排序:"Advanced order",设置顺序:"SetManual",可选字段:"Fields","按以下规则进行排序（优先级由低到高）":"Order according to the following rules (from low to high priority)",按:"By",说明:"Description",复制原始数据:"Copy raw data",复制格式化数据:"Copy formatted data",下载原始数据:"Download raw data",下载格式化数据:"Download formatted data",操作成功:"Operation successful",操作失败:"Operation failed",时间:"Date",指标:"Measure",目标值:"Target Value"}});var li,ci,ui=(li=i.useEffect,function(e,t){var n=(0,i.useRef)(!1);li((function(){return function(){n.current=!1}}),[]),li((function(){if(n.current)return e();n.current=!0}),t)}),di=globalThis&&globalThis.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},hi={exports:{}};ci=hi,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&n.push(s);else n.push(o.toString())}}return n.join(" ")}ci.exports?(t.default=t,ci.exports=t):window.classNames=t}();var fi=hi.exports;const pi=e=>{const{style:t={},width:n,height:o,className:i,name:s}=e,l=L({},t);return n&&(l.width=`${n}px`),o&&(l.height=`${o}px`),a().createElement("span",{style:l,className:fi(`${r.vhY}-html-icon`,i),dangerouslySetInnerHTML:{__html:(0,r.q7_)(s)}})},gi=e=>{const{style:t={},className:n,content:o}=e,i={style:t,className:fi(`${r.vhY}-react-element`,n)};if(a().isValidElement(o))return a().createElement("span",L({},i),a().createElement(a().Fragment,null,o));const s="string"!=typeof o?null==o?void 0:o.innerHTML:o;return a().createElement("span",M(L({},i),{dangerouslySetInnerHTML:{__html:s}}))},vi=e=>{const t=e,{icon:n}=t,o=O(t,["icon"]);if(!n)return null;if((0,r.q7_)(n)){const e=n;return a().createElement(pi,L({name:e},o))}return a().createElement(gi,L({content:n},o))},mi=e=>{const{list:t=[]}=e;return a().createElement("div",{className:`${r.NO_}-detail-list`},t.map(((e,t)=>{const{name:n,value:o,icon:i}=e;return a().createElement("div",{key:`${o}-${t}`,className:`${r.NO_}-detail-item`},a().createElement("span",{className:`${r.NO_}-detail-item-key`},n),a().createElement("span",{className:`${r.NO_}-detail-item-val ${r.NO_}-highlight`},i?a().createElement(vi,{icon:i,width:8,height:7}):null,o))})))},yi=e=>{var t,n;const{rows:o=[],cols:i=[]}=e;return a().createElement("div",{className:`${r.NO_}-head-info-list`},null==(t=i.map((e=>e.value)))?void 0:t.join("/"),i.length>0&&o.length>0&&"，",null==(n=o.map((e=>e.value)))?void 0:n.join("/"))},Ci=e=>{const{infos:t=""}=e;return a().createElement("div",{className:`${r.NO_}-infos`},t)},bi=e=>{const{name:t,icon:n,text:o,render:i}=e;return a().createElement("div",{className:`${r.NO_}-interpretation`},a().createElement("div",{className:`${r.NO_}-interpretation-head`},a().createElement(vi,{icon:n,className:`${r.NO_}-interpretation-icon`}),t&&a().createElement("span",{className:`${r.NO_}-interpretation-name`},t)),o&&a().createElement("div",null,o),a().createElement(gi,{content:i}))},wi=a().memo((e=>{const{menus:t,onlyMenu:n,onClick:i,cell:s,defaultSelectedKeys:l}=e,c=e=>a().createElement("span",{onClick:()=>{var t;return null==(t=e.onClick)?void 0:t.call(e,s)}},a().createElement(vi,{icon:e.icon,className:`${r.NO_}-operator-icon`}),a().createElement("span",{className:`${r.NO_}-operator-text`},e.text)),u=e=>{const{key:t,text:n,children:i,onClick:l}=e;return ko(i)?a().createElement(o.Menu.Item,{title:n,key:t},c(e)):a().createElement(o.Menu.SubMenu,{title:c(e),key:t,popupClassName:`${r.NO_}-operator-submenu-popup`,onTitleClick:()=>null==l?void 0:l(s)},No(i,(e=>u(e))))};return ko(t)?null:a().createElement("div",{className:`${r.NO_}-operator`},n?a().createElement(o.Menu,{className:`${r.NO_}-operator-menus`,onClick:i,defaultSelectedKeys:l},No(t,(e=>u(e)))):No(t,(e=>{const{key:t,children:n}=e,s=ko(n)?a().createElement(a().Fragment,null):a().createElement(o.Menu,{className:`${r.NO_}-operator-menus`,onClick:i,key:t,defaultSelectedKeys:l},No(n,(e=>u(e))));return a().createElement(o.Dropdown,{key:t,overlay:s},c(e))})))})),xi=e=>{const{tips:t="",name:n=""}=e;return a().createElement(a().Fragment,null,n&&a().createElement("div",{className:`${r.NO_}-name`},n),t&&a().createElement("div",{className:`${r.NO_}-tips`},t))},Ei=a().memo((e=>{const{summaries:t=[]}=e;return a().createElement("div",{className:`${r.NO_}-summary`},(()=>{const e=(o=e=>ni(null==e?void 0:e.selectedData),(n=t)&&n.length?function(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}(n,ho(o)):0);var n,o;return a().createElement("div",{className:`${r.NO_}-summary-item`},a().createElement("span",{className:`${r.NO_}-selected`},e," ",(0,r.agQ)("项")),(0,r.agQ)("已选择"))})(),null==t?void 0:t.map((e=>{const{name:t="",value:n}=e||{};if(t||n)return a().createElement("div",{key:`${t}-${n}`,className:`${r.NO_}-summary-item`},t?a().createElement("span",{className:`${r.NO_}-summary-key`},t," （",(0,r.agQ)("总和"),")"):a().createElement("span",{className:`${r.NO_}-summary-key`}," "),a().createElement("span",{className:fi(`${r.NO_}-summary-val`,`${r.NO_}-bold`)},n))})))})),Si=({description:e})=>a().createElement(a().Fragment,null,e&&a().createElement("div",{className:`${r.NO_}-description`},(0,r.agQ)("说明"),"：",e)),Ii=e=>{const{data:t,options:n,content:o,cell:i}=e,s=(e,t)=>e&&a().createElement(wi,M(L({},e),{onlyMenu:t,cell:i}));return(()=>{const{operator:e,onlyMenu:i}=(0,r.IZo)(n),{summaries:l,headInfo:c,details:u,interpretation:d,infos:h,tips:f,name:p,description:g}=t||{},v={name:p,tips:f};if(i)return s(e,!0);const m=a().createElement(a().Fragment,null,(e=>{const{name:t,tips:n}=e||{};return a().createElement(xi,{name:t,tips:n})})(v),(e=>!ko(e)&&a().createElement(Ei,{summaries:e}))(l),(e=>e&&a().createElement(bi,L({},e)))(d),(e=>{const{cols:t,rows:n}=e||{};return(!ko(t)||!ko(n))&&a().createElement(yi,{cols:t,rows:n})})(c),(e=>!ko(e)&&a().createElement(mi,{list:e}))(u),(e=>e&&a().createElement(Ci,{infos:e}))(h),(e=>a().createElement(Si,{description:e}))(g));return a().createElement(a().Fragment,null,s(e),null!=o?o:m)})()};class Ti extends r.N6r{constructor(e){super(e)}renderContent(){var e,t,n;const{content:r}=this.spreadsheet.options.tooltip,o=this.options,i=this.spreadsheet.getCell(null==(e=o.event)?void 0:e.target),s=null!=(t=o.content)?t:r,c=M(L({},o),{cell:i,content:s});(null==(n=o.options)?void 0:n.forceRender)&&this.unmountComponentAtNode(),l().render(a().createElement(Ii,M(L({},c),{content:s})),this.container)}destroy(){super.destroy(),this.unmountComponentAtNode()}unmountComponentAtNode(){this.container&&l().unmountComponentAtNode(this.container)}}const Li={tooltip:{renderTooltip:e=>new Ti(e)}},Mi=(...e)=>((...e)=>(0,r._Ge)(r.WNh,_,...e))(Li,...e),Oi=(e,t,n)=>{a().useEffect((()=>{const o=e=>{null==t||t((0,r.c8d)(e))};return null==n||n.on(e,o),()=>{null==n||n.off(e,o)}}),[n,t,e])},_i=(e,t,n,r=!1)=>{a().useEffect((()=>{const o=e=>{null==t||t(e)};return null==n||n.on(e,o),()=>{r&&(null==n||n.emit(e)),null==n||n.off(e,o)}}),[n,t,e])};function Ni(e){const t=(y=di((0,i.useState)({}),2)[1],(0,i.useCallback)((function(){return y({})}),[])),n=a().useRef(),o=a().useRef(),s=a().useRef(),{spreadsheet:l,dataCfg:c,options:u,themeCfg:d,sheetType:h,onSheetUpdate:f=ve}=e,p=a().useRef([c,u,d]),{loading:g,setLoading:v}=((e,t)=>{const[n,o]=a().useState(t);return a().useEffect((()=>{null==e||e.on(r.ch4.LAYOUT_BEFORE_RENDER,(()=>{o(!0)})),null==e||e.on(r.ch4.LAYOUT_AFTER_RENDER,(()=>{o(!1)}))}),[e]),{loading:null!=t?t:n,setLoading:o}})(n.current,e.loading),m=((e,t)=>{const{options:{pagination:n},showPagination:o}=t,[i,s]=a().useState({total:0,current:(null==n?void 0:n.current)||1,pageSize:(null==n?void 0:n.pageSize)||10});return ui((()=>{e&&!ko(n)&&(e.updatePagination({current:i.current,pageSize:i.pageSize}),e.render(!1))}),[i.current,i.pageSize,e]),ui((()=>{var t,r;s({total:null!=(r=null==(t=null==e?void 0:e.facet)?void 0:t.viewCellHeights.getTotalLength())?r:0,current:(null==n?void 0:n.current)||1,pageSize:(null==n?void 0:n.pageSize)||10})}),[n,e]),ui((()=>{if(!e||ko(n))return;const t=e=>{s((t=>M(L({},t),{total:e.total})))};return e.on(r.ch4.LAYOUT_PAGINATION,t),()=>{e.off(r.ch4.LAYOUT_PAGINATION,t)}}),[n,e]),{showPagination:Boolean(o),pagination:L(L({},n),i),onShowSizeChange:(e,t)=>{var r;const i=null!=(r=sn(o,"onShowSizeChange"))?r:null==n?void 0:n.onShowSizeChange;null==i||i(e,t)},onChange:(e,t)=>{var r;s(M(L({},i),{current:e,pageSize:t}));const a=null!=(r=sn(o,"onChange"))?r:null==n?void 0:n.onChange;null==a||a(e,t)}}})(n.current,e);var y;!function(e,t){Oi(r.ch4.ROW_CELL_HOVER,e.onRowCellHover,t),Oi(r.ch4.ROW_CELL_CLICK,e.onRowCellClick,t),Oi(r.ch4.ROW_CELL_DOUBLE_CLICK,e.onRowCellDoubleClick,t),Oi(r.ch4.ROW_CELL_CONTEXT_MENU,e.onRowCellContextMenu,t),Oi(r.ch4.ROW_CELL_MOUSE_DOWN,e.onRowCellMouseDown,t),Oi(r.ch4.ROW_CELL_MOUSE_UP,e.onRowCellMouseUp,t),Oi(r.ch4.ROW_CELL_MOUSE_MOVE,e.onRowCellMouseMove,t),_i(r.ch4.ROW_CELL_COLLAPSE_TREE_ROWS,e.onRowCellCollapseTreeRows,t),_i(r.ch4.ROW_CELL_SCROLL,e.onRowCellScroll,t),Oi(r.ch4.COL_CELL_HOVER,e.onColCellHover,t),Oi(r.ch4.COL_CELL_CLICK,e.onColCellClick,t),Oi(r.ch4.COL_CELL_DOUBLE_CLICK,e.onColCellDoubleClick,t),Oi(r.ch4.COL_CELL_CONTEXT_MENU,e.onColCellContextMenu,t),Oi(r.ch4.COL_CELL_MOUSE_DOWN,e.onColCellMouseDown,t),Oi(r.ch4.COL_CELL_MOUSE_UP,e.onColCellMouseUp,t),Oi(r.ch4.COL_CELL_MOUSE_MOVE,e.onColCellMouseMove,t),Oi(r.ch4.DATA_CELL_HOVER,e.onDataCellHover,t),Oi(r.ch4.DATA_CELL_CLICK,e.onDataCellClick,t),Oi(r.ch4.DATA_CELL_DOUBLE_CLICK,e.onDataCellDoubleClick,t),Oi(r.ch4.DATA_CELL_CONTEXT_MENU,e.onDataCellContextMenu,t),Oi(r.ch4.DATA_CELL_MOUSE_DOWN,e.onDataCellMouseDown,t),Oi(r.ch4.DATA_CELL_MOUSE_UP,e.onDataCellMouseUp,t),Oi(r.ch4.DATA_CELL_MOUSE_MOVE,e.onDataCellMouseMove,t),_i(r.ch4.DATA_CELL_TREND_ICON_CLICK,e.onDataCellTrendIconClick,t),_i(r.ch4.DATA_CELL_BRUSH_SELECTION,e.onDataCellBrushSelection,t),_i(r.ch4.DATA_CELL_SELECT_MOVE,e.onDataCellSelectMove,t),Oi(r.ch4.CORNER_CELL_HOVER,e.onCornerCellHover,t),Oi(r.ch4.CORNER_CELL_CLICK,e.onCornerCellClick,t),Oi(r.ch4.CORNER_CELL_DOUBLE_CLICK,e.onCornerCellDoubleClick,t),Oi(r.ch4.CORNER_CELL_CONTEXT_MENU,e.onCornerCellContextMenu,t),Oi(r.ch4.CORNER_CELL_MOUSE_DOWN,e.onCornerCellMouseDown,t),Oi(r.ch4.CORNER_CELL_MOUSE_UP,e.onCornerCellMouseUp,t),Oi(r.ch4.CORNER_CELL_MOUSE_MOVE,e.onCornerCellMouseMove,t),Oi(r.ch4.MERGED_CELLS_HOVER,e.onMergedCellsHover,t),Oi(r.ch4.MERGED_CELLS_CLICK,e.onMergedCellsClick,t),Oi(r.ch4.MERGED_CELLS_DOUBLE_CLICK,e.onMergedCellsDoubleClick,t),Oi(r.ch4.MERGED_CELLS_CONTEXT_MENU,e.onMergedCellsContextMenu,t),Oi(r.ch4.MERGED_CELLS_MOUSE_DOWN,e.onMergedCellsMouseDown,t),Oi(r.ch4.MERGED_CELLS_MOUSE_UP,e.onMergedCellsMouseUp,t),Oi(r.ch4.MERGED_CELLS_MOUSE_MOVE,e.onMergedCellsMouseMove,t),_i(r.ch4.RANGE_SORT,e.onRangeSort,t),_i(r.ch4.RANGE_SORTED,e.onRangeSorted,t),_i(r.ch4.RANGE_FILTER,e.onRangeFilter,t),_i(r.ch4.RANGE_FILTERED,e.onRangeFiltered,t),_i(r.ch4.LAYOUT_AFTER_HEADER_LAYOUT,e.onLayoutAfterHeaderLayout,t),_i(r.ch4.LAYOUT_PAGINATION,e.onLayoutPagination,t),_i(r.ch4.LAYOUT_CELL_SCROLL,e.onLayoutCellScroll,t),_i(r.ch4.LAYOUT_AFTER_COLLAPSE_ROWS,e.onLayoutAfterCollapseRows,t),_i(r.ch4.LAYOUT_TREE_ROWS_COLLAPSE_ALL,e.onCollapseRowsAll,t),_i(r.ch4.LAYOUT_COLS_EXPANDED,e.onLayoutColsExpanded,t),_i(r.ch4.LAYOUT_COLS_HIDDEN,e.onLayoutColsHidden,t),_i(r.ch4.LAYOUT_BEFORE_RENDER,e.onBeforeRender,t),_i(r.ch4.LAYOUT_AFTER_RENDER,e.onAfterRender,t),_i(r.ch4.LAYOUT_DESTROY,e.onDestroy,t,!0),_i(r.ch4.LAYOUT_RESIZE,e.onLayoutResize,t),_i(r.ch4.LAYOUT_RESIZE_SERIES_WIDTH,e.onLayoutResizeSeriesWidth,t),_i(r.ch4.LAYOUT_RESIZE_ROW_WIDTH,e.onLayoutResizeRowWidth,t),_i(r.ch4.LAYOUT_RESIZE_ROW_HEIGHT,e.onLayoutResizeRowHeight,t),_i(r.ch4.LAYOUT_RESIZE_COL_WIDTH,e.onLayoutResizeColWidth,t),_i(r.ch4.LAYOUT_RESIZE_COL_HEIGHT,e.onLayoutResizeColHeight,t),_i(r.ch4.LAYOUT_RESIZE_TREE_WIDTH,e.onLayoutResizeTreeWidth,t),_i(r.ch4.LAYOUT_RESIZE_MOUSE_DOWN,e.onLayoutResizeMouseDown,t),_i(r.ch4.LAYOUT_RESIZE_MOUSE_UP,e.onLayoutResizeMouseUp,t),_i(r.ch4.LAYOUT_RESIZE_MOUSE_MOVE,e.onLayoutResizeMouseMove,t),_i(r.ch4.GLOBAL_KEYBOARD_DOWN,e.onKeyBoardDown,t),_i(r.ch4.GLOBAL_KEYBOARD_UP,e.onKeyBoardUp,t),_i(r.ch4.GLOBAL_COPIED,e.onCopied,t),_i(r.ch4.GLOBAL_ACTION_ICON_HOVER,e.onActionIconHover,t),_i(r.ch4.GLOBAL_ACTION_ICON_CLICK,e.onActionIconClick,t),_i(r.ch4.GLOBAL_CONTEXT_MENU,e.onContextMenu,t),_i(r.ch4.GLOBAL_HOVER,e.onMouseHover,t),_i(r.ch4.GLOBAL_CLICK,e.onClick,t),_i(r.ch4.GLOBAL_DOUBLE_CLICK,e.onDoubleClick,t),_i(r.ch4.GLOBAL_SELECTED,e.onSelected,t),_i(r.ch4.GLOBAL_MOUSE_UP,e.onMouseUp,t),_i(r.ch4.GLOBAL_RESET,e.onReset,t),_i(r.ch4.GLOBAL_LINK_FIELD_JUMP,e.onLinkFieldJump,t),_i(r.ch4.GLOBAL_SCROLL,e.onScroll,t),_i(r.ch4.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,e.onLayoutAfterRealDataCellRender,t),_i(r.ch4.ROW_CELL_BRUSH_SELECTION,e.onRowCellBrushSelection,t),_i(r.ch4.COL_CELL_BRUSH_SELECTION,e.onColCellBrushSelection,t)}(e,n.current);const C=a().useCallback((e=>{const t=Mi(u);return l?l(e,c,t):"table"===h?new r.HZt(e,c,t):new r.TA7(e,c,t)}),[h,u,c,l]),b=a().useCallback((()=>{var r;v(!0),n.current=C(o.current),n.current.setThemeCfg(e.themeCfg),n.current.render(),v(!1),t(),e.getSpreadSheet&&(console.warn("[SheetComponent] `getSpreadSheet` is deprecated. Please use `onMounted` instead."),e.getSpreadSheet(n.current)),null==(r=e.onMounted)||r.call(e,n.current)}),[e,C,v,t]);return a().useEffect((()=>(b(),()=>{var e,t;null==(t=(e=n.current).destroy)||t.call(e)})),[]),ui((()=>{var e,t,r,o,i,a,s,l,h,g,v;const[m,y,C]=p.current;p.current=[c,u,d];let b=!1,w=!1;Object.is(m,c)||((null==(t=null==(e=null==m?void 0:m.fields)?void 0:e.columns)?void 0:t.length)!==(null==(o=null==(r=null==c?void 0:c.fields)?void 0:r.columns)?void 0:o.length)&&(null==(i=n.current)||i.clearColumnLeafNodes()),b=!0,null==(a=n.current)||a.setDataCfg(c)),Object.is(y,u)||(Object.is(null==y?void 0:y.hierarchyType,null==u?void 0:u.hierarchyType)||(w=!0,b=!0,null==(s=n.current)||s.setDataCfg(c)),null==(l=n.current)||l.setOptions(u),null==(h=n.current)||h.changeSheetSize(u.width,u.height)),Object.is(C,d)||null==(g=n.current)||g.setThemeCfg(d);const x=f({reloadData:b,reBuildDataSet:w});null==(v=n.current)||v.render(x.reloadData,{reBuildDataSet:x.reBuildDataSet})}),[c,u,d,f]),(e=>{const{s2:t,adaptive:n,container:r,wrapper:o}=e;a().useLayoutEffect((()=>ii({s2:t,adaptive:n,wrapper:o,container:r})),[t,o,r,n])})({s2:n.current,container:o.current,wrapper:s.current,adaptive:e.adaptive}),{s2Ref:n,containerRef:o,wrapperRef:s,loading:g,setLoading:v,pagination:m}}const Ai=a().createContext(null);function Ri(){return a().useContext(Ai)}const Di=e=>i.createElement("svg",L({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),Pi=e=>i.createElement("svg",L({viewBox:"0 0 1024 1024",width:16,height:16,className:"antv-s2-icon"},e),i.createElement("defs",null,i.createElement("style",{type:"text/css"})),i.createElement("path",{d:"M441.6 249.6c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 25.6-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z m0 262.4c0 38.4 32 70.4 70.4 70.4s70.4-32 70.4-70.4c0-38.4-32-70.4-70.4-70.4s-70.4 32-70.4 70.4z",fill:"currentColor","p-id":22217})),ki=e=>i.createElement("svg",L({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184z m0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-0.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685 0.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-0.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774z m366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h0.032z m-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",fill:"currentColor"})),Bi=e=>i.createElement("svg",L({className:"antv-s2-icon",width:"16px",height:"16px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{d:"M18.0047888,16.4055 C18.1082888,16.4055 18.1922888,16.4895 18.1922888,16.593 L18.1922888,17.9055 C18.1922888,18.0090534 18.1083422,18.093 18.0047888,18.093 L9.37978883,18.093 C9.27623544,18.093 9.19228883,18.0090534 9.19228883,17.9055 L9.19228883,16.593 C9.19228883,16.4895 9.27628883,16.4055 9.37978883,16.4055 L18.0047888,16.4055 Z M4.41328883,1.6665 L4.46428883,1.7115 L7.08928883,5.0385 C7.17478883,5.1435 7.12078883,5.2935 7.00528883,5.3325 L6.94228883,5.343 L5.16028883,5.343 L5.16028883,14.25 L6.94228883,14.25 C7.09978883,14.25 7.18828883,14.433 7.08928883,14.5545 L4.46428883,17.88 C4.42872537,17.9249155 4.37457895,17.9511073 4.31728883,17.9511073 C4.25999871,17.9511073 4.20585229,17.9249155 4.17028883,17.88 L1.54528883,14.5545 C1.50119832,14.4981177 1.49305316,14.4215528 1.52429494,14.3571564 C1.55553672,14.2927601 1.62071465,14.2517677 1.69228883,14.2515 L3.47428883,14.2515 L3.47428883,5.343 L1.69228883,5.343 C1.63110128,5.34394015 1.57330492,5.31496201 1.53745415,5.26536844 C1.50160338,5.21577487 1.49220972,5.15180683 1.51228883,5.094 L1.54528883,5.0385 L4.17028883,1.713 C4.22854609,1.63918993 4.33246412,1.61994585 4.41328883,1.668 L4.41328883,1.6665 Z M15.7547888,11.4375 C15.8582888,11.4375 15.9422888,11.5215 15.9422888,11.625 L15.9422888,12.9375 C15.9422888,13.0410534 15.8583422,13.125 15.7547888,13.125 L9.37978883,13.125 C9.33006074,13.125 9.28236938,13.1052456 9.24720631,13.0700825 C9.21204324,13.0349195 9.19228883,12.9872281 9.19228883,12.9375 L9.19228883,11.625 C9.19228883,11.5215 9.27628883,11.4375 9.37978883,11.4375 L15.7547888,11.4375 Z M21.7547888,6.468 C21.8582888,6.468 21.9422888,6.5535 21.9422888,6.6555 L21.9422888,7.968 C21.9422888,8.07155339 21.8583422,8.1555 21.7547888,8.1555 L9.37978883,8.1555 C9.33006074,8.1555 9.28236938,8.13574559 9.24720631,8.10058252 C9.21204324,8.06541945 9.19228883,8.01772809 9.19228883,7.968 L9.19228883,6.6555 C9.19228883,6.5535 9.27628883,6.468 9.37978883,6.468 L21.7547888,6.468 Z M13.5047888,1.5 C13.6082888,1.5 13.6922888,1.584 13.6922888,1.6875 L13.6922888,3 C13.6922888,3.10355339 13.6083422,3.1875 13.5047888,3.1875 L9.37978883,3.1875 C9.33006074,3.1875 9.28236938,3.16774559 9.24720631,3.13258252 C9.21204324,3.09741945 9.19228883,3.04972809 9.19228883,3 L9.19228883,1.6875 C9.19228883,1.584 9.27628883,1.5 9.37978883,1.5 L13.5047888,1.5 Z",fill:"currentColor"})),Fi=e=>i.createElement("svg",L({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-153.000000, -608.000000)",fill:"currentColor"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(24.000000, 57.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("path",{d:"M0.771428571,3.77142857 L3.77142857,3.77142857 L3.77142857,5.65714286 L0.771428571,5.65714286 L0.771428571,3.77142857 Z M0.771428571,6.34285714 L3.77142857,6.34285714 L3.77142857,8.57142857 L0.771428571,8.57142857 L0.771428571,6.34285714 Z M0.771428571,9 L3.77142857,9 L3.77142857,11.2285714 L0.771428571,11.2285714 L0.771428571,9 Z"}),i.createElement("path",{d:"M0.771428571,9 L0.771428571,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L0.771428571,3.77142857 L0.771428571,5.65714286 L3.77142857,5.65714286 L3.77142857,3.77142857 L4.54285714,3.77142857 L4.54285714,11.3142857 L3.77142857,11.3142857 L3.77142857,9.08571429 L0.771428571,9.08571429 L0.771428571,9 Z M0.771428571,8.22857143 L3.77142857,8.22857143 L3.77142857,6.34285714 L0.771428571,6.34285714 L0.771428571,8.22857143 L0.771428571,8.22857143 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}))))))),ji=e=>i.createElement("svg",L({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-153.000000, -814.000000)",fill:"currentColor",fillRule:"nonzero"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(24.000000, 55.000000)"},i.createElement("g",{transform:"translate(0.000000, 208.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"}),i.createElement("polygon",{points:"0.771428571 0.771428571 11.2285714 0.771428571 11.2285714 3 0.771428571 3"})))))))),zi=e=>i.createElement("svg",L({width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"antv-s2-icon"},e),i.createElement("g",{stroke:"none",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-365.000000, -624.000000)",fill:"currentColor"},i.createElement("g",{transform:"translate(127.000000, 549.000000)"},i.createElement("g",{transform:"translate(236.000000, 71.000000)"},i.createElement("g",{transform:"translate(0.000000, 2.000000)"},i.createElement("g",{transform:"translate(2.000000, 2.000000)"},i.createElement("polygon",{points:"4.22857143 3.77142857 11.2285714 3.77142857 11.2285714 11.7714286 4.22857143 11.7714286"}),i.createElement("path",{d:"M4.45714286,11.2285714 L11.2285714,11.2285714 L11.2285714,3.77142857 L4.45714286,3.77142857 L4.45714286,11.2285714 Z M3.77142857,11.2285714 L3.77142857,3.77142857 L0.771428571,3.77142857 L0.771428571,11.3142857 L3.77142857,11.3142857 L3.77142857,11.2285714 Z M11.2285714,3 L11.2285714,0.771428571 L0.771428571,0.771428571 L0.771428571,3 L11.2285714,3 Z M12,0 L12,12 L0,12 L0,0 L12,0 Z"})))))))),Hi=e=>i.createElement("svg",L({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M950.016 898.016l-206.016-204.992Q832 586.016 832 448.032q0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032t112.512 271.488T448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760T327.008 736q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488Q384 136.064 448 136.064t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"})),Wi=e=>i.createElement("svg",L({className:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:12.6,height:12.6},e),i.createElement("path",{d:"M86.016 805.888H0L143.872 275.968h79.36l144.896 529.92H276.992l-29.696-109.056H115.2s-29.696 109.056-29.184 109.056zM225.28 613.376L181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-0.512-31.232-1.536-46.592-3.584-4.096-0.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256z m-35.328 157.184v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zM1013.76 794.624c-36.864 14.336-71.68 20.992-104.96 20.992-32.768 0.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",fill:"currentColor"})),Gi=e=>i.createElement("svg",L({className:"antv-s2-icon",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("g",{transform:"translate(8.056364, 8.000227) rotate(-270.000000) translate(-8.056364, -8.000227) translate(3.057045, 3.070227)",fill:"currentColor"},i.createElement("path",{d:"M0.482272727,3.55181818 C0.472878788,3.55181818 0.468181818,3.54939394 0.468181818,3.54454545 C0.468181818,3.53969697 0.465757576,3.53727273 0.460909091,3.53727273 L0.396818182,3.53727273 L0.382727273,3.52318182 L0.34,3.52318182 L0.325909091,3.50909091 L0.311818182,3.50909091 L0.297727273,3.495 L0.269090909,3.495 L0.269090909,3.48090909 L0.255,3.48090909 L0.240909091,3.46681818 L0.226818182,3.46681818 L0.226818182,3.45272727 L0.212727273,3.45272727 L0.184090909,3.42409091 L0.17,3.42409091 C0.160606061,3.405 0.151060606,3.39075758 0.141363636,3.38136364 C0.131969697,3.38136364 0.127272727,3.37893939 0.127272727,3.37409091 L0.127272727,3.36681818 L0.113181818,3.35272727 L0.113181818,3.33863636 L0.0990909091,3.33863636 L0.0990909091,3.32454545 L0.085,3.31045455 L0.085,3.30318182 L0.0777272727,3.29590909 L0.0704545455,3.29590909 L0.0704545455,3.28181818 L0.0563636364,3.26772727 L0.0563636364,3.24636364 L0.0490909091,3.23909091 L0.0418181818,3.23909091 L0.0418181818,3.225 C0.0418181818,3.21560606 0.0393939394,3.21090909 0.0345454545,3.21090909 C0.0296969697,3.21090909 0.0272727273,3.20848485 0.0272727273,3.20363636 L0.0272727273,3.15409091 L0.0131818182,3.14 L0.0131818182,2.94090909 L0.0272727273,2.92681818 L0.0272727273,2.88409091 C0.0366666667,2.87469697 0.0413636364,2.86757576 0.0413636364,2.86272727 L0.0413636364,2.84136364 L0.0554545455,2.82727273 L0.0554545455,2.81318182 L0.0695454545,2.79909091 L0.0695454545,2.79181818 L0.0768181818,2.77772727 L0.0840909091,2.77045455 L0.0840909091,2.76318182 L0.0913636364,2.75590909 L0.0986363636,2.74863636 L0.0986363636,2.74136364 L0.112727273,2.72727273 C0.112727273,2.71787879 0.117424242,2.71318182 0.126818182,2.71318182 L0.126818182,2.69909091 L0.140909091,2.69909091 L2.68363636,0.156363636 C2.77848485,0.0521212121 2.89681818,0 3.03863636,0 C3.18045455,0 3.29878788,0.0521212121 3.39363636,0.156363636 C3.49787879,0.260606061 3.55,0.381363636 3.55,0.518636364 C3.55,0.655909091 3.49787879,0.776666667 3.39363636,0.880909091 L1.74590909,2.52863636 L9.48727273,2.52863636 C9.62939394,2.52863636 9.75015152,2.57833333 9.84954545,2.67772727 C9.94893939,2.77712121 9.99863636,2.89787879 9.99863636,3.04 C9.99863636,3.18212121 9.94893939,3.30287879 9.84954545,3.40227273 C9.75015152,3.50166667 9.62939394,3.55136364 9.48727273,3.55136364 L0.481363636,3.55136364 L0.482272727,3.55181818 Z M9.51636364,6.30727273 C9.52575758,6.30727273 9.53045455,6.30969697 9.53045455,6.31454545 C9.53045455,6.31939394 9.53287879,6.32181818 9.53772727,6.32181818 L9.60181818,6.32181818 L9.61590909,6.33590909 L9.65863636,6.33590909 L9.65863636,6.35 L9.68727273,6.35 L9.70136364,6.36409091 L9.73,6.36409091 L9.73,6.37818182 L9.74409091,6.37818182 L9.75818182,6.39227273 L9.77227273,6.39227273 L9.77227273,6.40636364 L9.78636364,6.40636364 L9.815,6.435 L9.82909091,6.435 C9.83848485,6.45409091 9.8480303,6.46833333 9.85772727,6.47772727 C9.86712121,6.47772727 9.87181818,6.48015152 9.87181818,6.485 L9.87181818,6.49227273 L9.88590909,6.50636364 L9.88590909,6.52045455 L9.9,6.52045455 L9.9,6.53454545 L9.90727273,6.53454545 L9.91454545,6.54181818 L9.91454545,6.55590909 L9.92181818,6.56318182 L9.92909091,6.57045455 L9.92909091,6.57772727 L9.94318182,6.59181818 L9.94318182,6.61318182 L9.95045455,6.62045455 L9.95772727,6.62045455 L9.95772727,6.64909091 L9.965,6.65636364 L9.97227273,6.67045455 L9.97227273,6.70590909 L9.98636364,6.72 L9.98636364,6.91909091 L9.97227273,6.93318182 L9.97227273,6.97590909 L9.95818182,6.99 L9.95818182,7.01863636 L9.94409091,7.03272727 L9.94409091,7.04681818 L9.93,7.06090909 L9.93,7.06818182 L9.92272727,7.08227273 L9.91545455,7.08954545 L9.91545455,7.09681818 L9.90818182,7.10409091 L9.90090909,7.11136364 L9.90090909,7.11863636 L9.88681818,7.13272727 C9.88681818,7.14212121 9.88439394,7.14681818 9.87954545,7.14681818 L9.87227273,7.14681818 L9.87227273,7.16090909 L9.85818182,7.16090909 L9.85090909,7.16818182 L9.84363636,7.18954545 L7.32954545,9.70363636 C7.22530303,9.80787879 7.10212121,9.86 6.96,9.86 C6.81787879,9.86 6.69954545,9.80787879 6.605,9.70363636 C6.50075758,9.60878788 6.44863636,9.49045455 6.44863636,9.34863636 C6.44863636,9.20681818 6.50075758,9.08363636 6.605,8.97909091 L8.25272727,7.33136364 L0.511363636,7.33136364 C0.378636364,7.33136364 0.26030303,7.28166667 0.156363636,7.18227273 C0.0524242424,7.08287879 0.000303030303,6.96212121 4.54747351e-13,6.82 C4.54747351e-13,6.67787879 0.0521212121,6.55712121 0.156363636,6.45772727 C0.260606061,6.35833333 0.378939394,6.30863636 0.511363636,6.30863636 L9.51727273,6.30863636 L9.51636364,6.30727273 Z"}))),Ui=a().memo((e=>{const t=e,{className:n,icon:i,syncCopy:s=!1,copyOriginalText:l=(0,r.agQ)("复制原始数据"),copyFormatText:c=(0,r.agQ)("复制格式化数据"),downloadOriginalText:u=(0,r.agQ)("下载原始数据"),downloadFormatText:d=(0,r.agQ)("下载格式化数据"),successText:h=(0,r.agQ)("操作成功"),errorText:f=(0,r.agQ)("操作失败"),sheet:p,fileName:g,open:v,dropdown:m}=t,y=O(t,["className","icon","syncCopy","copyOriginalText","copyFormatText","downloadOriginalText","downloadFormatText","successText","errorText","sheet","fileName","open","dropdown"]),C=`${r.vhY}-export`,b=e=>{const t=(0,r.F1h)(p,"\t",e);(0,r.vQq)(t,s).then((()=>{o.message.success(h)})).catch((e=>{console.log("copy failed: ",e),o.message.error(f)}))},w=e=>{const t=(0,r.F1h)(p,",",e);try{(0,r.LRf)(t,g),o.message.success(h)}catch(e){o.message.error(f)}},x=a().createElement(o.Menu,null,a().createElement(o.Menu.Item,{key:"copyOriginal",onClick:()=>b(!1)},l),a().createElement(o.Menu.Item,{key:"copyFormat",onClick:()=>b(!0)},c),a().createElement(o.Menu.Item,{key:"downloadOriginal",onClick:()=>w(!1)},u),a().createElement(o.Menu.Item,{key:"downloadFormat",onClick:()=>w(!0)},d));return a().createElement(o.Dropdown,L(L({overlay:x,trigger:["click"],className:fi(C,n)},y),m),a().createElement("a",{className:"ant-dropdown-link",key:"export",onClick:e=>e.preventDefault()},i||a().createElement(Pi,null)))}));Ui.displayName="Export",Ui.defaultProps={syncCopy:!1,fileName:"sheet"};const Vi=e=>{const{splitOrders:t=[],setSplitOrders:n}=e;return a().createElement(o.Card,{className:`${R}-card-content`},t.map((e=>a().createElement("li",{key:e,className:`${R}-split-value`,title:e},(e=>a().createElement(a().Fragment,null,a().createElement("span",{className:"split-text"},e),a().createElement("span",{className:`${R}-split-icon`,onClick:()=>{(e=>{const r=t.concat();r.splice(r.indexOf(e),1),r.unshift(e),n(r)})(e)}},a().createElement(pi,{name:"groupAsc"})),a().createElement("span",{className:`${R}-split-icon`,onClick:()=>{(e=>{const r=t.concat();let o=r.indexOf(e);r.splice(r.indexOf(e),1),r.splice(o+=1,0,e),n(r)})(e)}},a().createElement(pi,{name:"groupDesc"})),a().createElement("span",{className:`${R}-split-icon`,onClick:()=>{(e=>{const r=t.concat();let o=r.indexOf(e);o>0&&(r.splice(r.indexOf(e),1),r.splice(o-=1,0,e),n(r))})(e)}},a().createElement(pi,{name:"globalAsc"}))))(e)))))},{Sider:Yi,Content:$i}=o.Layout,Xi=({sheet:e,className:t,icon:n,text:s,ruleText:l,dimensions:u,ruleOptions:d,sortParams:h,onSortOpen:f,onSortConfirm:p})=>{const[g,v]=(0,i.useState)(!1),[m,y]=(0,i.useState)(!1),[C,b]=(0,i.useState)([]),[w,x]=(0,i.useState)([]),[E,S]=(0,i.useState)([]),[I,T]=(0,i.useState)([]),[O,_]=(0,i.useState)([]),[D,P]=(0,i.useState)(),[k]=o.Form.useForm(),B=a().useMemo(A,[]),F=a().useMemo(N,[]),j=()=>{v(!g)},z=()=>{y(!m)};return(0,i.useEffect)((()=>{if(g){const t=No(h,(t=>{const{sortFieldId:n,sortMethod:r,sortBy:o,sortByMeasure:i}=t;let a;return a=o?["sortBy"]:i?["sortByMeasure",i]:["sortMethod"],{field:n,name:e.dataSet.getFieldName(n),rule:a,sortMethod:r,sortBy:o,sortByMeasure:i}})),n=(()=>{if(u)return u;const{fields:t={}}=e.dataCfg||{},{rows:n=[],columns:r=[]}=t;return No([...n,...r],(t=>{const n="string"==typeof t?t:t.key;return{field:t,name:e.dataSet.getFieldName(n),list:e.dataSet.getDimensionValues(n)}}))})(),r=Io(n,(e=>!Mo(h,(t=>t.sortFieldId===e.field)))),o=d||No(B,(t=>{if("sortByMeasure"===t.value){const{values:n}=e.dataCfg.fields||{};t.children=No(n,(t=>({label:e.dataSet.getFieldName(t),value:t})))}return t}));b(t),S(n),T(r),x(o)}}),[g]),a().createElement("div",{className:fi(R,t)},a().createElement(o.Button,{onClick:()=>{f&&f(),j()},icon:n||a().createElement(Bi,null),size:"small",className:`${R}-btn`},s||(0,r.agQ)("高级排序")),a().createElement(o.Modal,{title:s||(0,r.agQ)("高级排序"),visible:g,onOk:()=>{const t=k.getFieldsValue(),{values:n=[]}=e.dataCfg.fields,o=[],i=[];Eo(Rt(t),(e=>{const{sortMethod:a,rule:s=[],sortBy:l}=t[e],c={sortFieldId:e};"sortByMeasure"===s[0]||s[1]?(function(e,t,n,r){var o;e=st(e)?e:null==(o=e)?[]:function(e,t){return J(t,(function(t){return e[t]}))}(o,Rt(o)),n=n?ge(n):0;var i=e.length;return n<0&&(n=Do(i+n,0)),Ro(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Xe(e,t,n)>-1}(n,s[1])?c.sortByMeasure=s[1]:c.sortByMeasure=r.Teh,c.sortMethod=a,c.query={$$extra$$:s[1]}):"sortBy"===s[0]?c.sortBy=l:c.sortMethod=a,o.push(L({field:e},t[e])),i.push(c)})),p&&p(o,i),j()},onCancel:j,okText:(0,r.agQ)("确定"),cancelText:(0,r.agQ)("取消"),destroyOnClose:!0,className:`${R}-modal`},a().createElement(o.Layout,null,a().createElement(Yi,{width:120,className:`${R}-sider-layout`},a().createElement("div",{className:`${R}-title`},(0,r.agQ)("可选字段")),a().createElement("div",null,No(I,(e=>a().createElement("div",{className:`${R}-dimension-item`,key:e.field,onClick:()=>{var t;t=e,Mo(C,(e=>e.field===t.field))||(P(t),b([...C,t])),T(Io(I,(e=>e.field!==t.field)))}},e.name))))),a().createElement($i,{className:`${R}-content-layout`},a().createElement("div",{className:`${R}-title`},l||(0,r.agQ)("按以下规则进行排序（优先级由低到高）")),a().createElement(o.Form,{form:k,name:"form",className:`${R}-custom-form`},No(C,(e=>{const{field:t,name:n,rule:i,sortMethod:s,sortBy:l}=e||{};return a().createElement(o.Form.Item,{name:t,key:t},a().createElement(o.Form.Item,{name:[t,"name"],initialValue:n,noStyle:!0},a().createElement(o.Select,{className:`${R}-select`,size:"small"})),a().createElement("span",{className:`${R}-field-prefix`},(0,r.agQ)("按")),a().createElement(o.Form.Item,{name:[t,"rule"],initialValue:i||["sortMethod"],noStyle:!0},a().createElement(o.Cascader,{options:w,expandTrigger:"hover",size:"small",allowClear:!1})),a().createElement(o.Form.Item,{shouldUpdate:!0,noStyle:!0},(({getFieldValue:n})=>{return Bo(n([t,"rule"]),["sortBy"])?a().createElement(a().Fragment,null,a().createElement("a",{className:`${R}-rule-end`,onClick:()=>{var t,n,r;t=e,n=l,z(),P(t),_(oi(n||(null==(r=Mo(E,(e=>e.field===t.field)))?void 0:r.list)||[]))}},(0,r.agQ)("设置顺序")),a().createElement(o.Form.Item,{noStyle:!0,name:[t,"sortBy"],initialValue:l})):a().createElement(o.Form.Item,{shouldUpdate:!0,noStyle:!0,name:[t,"sortMethod"],initialValue:(i=s,tn(i).toUpperCase()||"ASC")},a().createElement(o.Radio.Group,{className:`${R}-rule-end`},No(F,(e=>a().createElement(o.Radio,{value:e.value,key:e.value},e.name)))));var i})),a().createElement(c.Z,{className:`${R}-rule-end-delete`,onClick:()=>{var t;t=e,b(Io(C,(e=>e.field!==t.field))),T([...I,t])}}))})))))),a().createElement(o.Modal,{title:(0,r.agQ)("手动排序"),visible:m,onOk:()=>{z();const e=k.getFieldsValue([null==D?void 0:D.field]);e.sortBy=O,k.setFieldsValue({[null==D?void 0:D.field]:e});const t=No(C,(e=>e.field===(null==D?void 0:D.field)?M(L({},e),{rule:"sortBy",sortBy:O,sortMethod:"",sortByMeasure:""}):e));b(t)},onCancel:()=>{z()},okText:(0,r.agQ)("确定"),cancelText:(0,r.agQ)("取消"),destroyOnClose:!0,className:`${R}-custom-modal`},a().createElement(Vi,{splitOrders:O,setSplitOrders:_})))};var qi=(e=>(e.Rows="rows",e.Cols="columns",e.Values="values",e))(qi||{}),Ki=(e=>(e.Dimensions="dimensions",e.Measures="measures",e.Rows="rows",e.Cols="cols",e))(Ki||{});const Zi=["rows","columns","values"],Qi=e=>e instanceof r.HZt?"table":"pivot",Ji=(e,{fields:t={},meta:n=[]}={},o=[])=>Zi.reduce(((i,a)=>{const s=t[a];if(ko(s))return i;const l=No(s,(e=>{const t="string"==typeof e?e:e.key,r=Mo(n,["field",t]);return{id:t,displayName:null==r?void 0:r.name,checked:!o.includes(t)}}));return i[a]=L({items:l},((e,t)=>({selectable:e instanceof r.TA7&&t===qi.Values||e instanceof r.HZt&&t===qi.Cols,expandable:e instanceof r.TA7&&t===qi.Values}))(e,a)),i}),{});function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ta(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ea(e,t)}function na(){return na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},na.apply(this,arguments)}function ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sa="function"==typeof Symbol&&Symbol.observable||"@@observable",la=function(){return Math.random().toString(36).substring(7).split("").join(".")},ca={INIT:"@@redux/INIT"+la(),REPLACE:"@@redux/REPLACE"+la(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+la()}};function ua(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(aa(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(aa(1));return n(ua)(e,t)}if("function"!=typeof e)throw new Error(aa(2));var o=e,i=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(aa(3));return i}function d(e){if("function"!=typeof e)throw new Error(aa(4));if(l)throw new Error(aa(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(aa(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(aa(7));if(void 0===e.type)throw new Error(aa(8));if(l)throw new Error(aa(9));try{l=!0,i=o(i,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}return h({type:ca.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(aa(10));o=e,h({type:ca.REPLACE})}})[sa]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(aa(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[sa]=function(){return this},e},r}function da(e,t){return function(){return t(e.apply(this,arguments))}}function ha(e,t){if("function"==typeof e)return da(e,t);if("object"!=typeof e||null===e)throw new Error(aa(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=da(o,t))}return n}function fa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var pa=a().createContext(null),ga=function(e){e()},va=function(){return ga},ma={notify:function(){},get:function(){return[]}};function ya(e,t){var n,r=ma;function o(){a.onStateChange&&a.onStateChange()}function i(){var i,a,s;n||(n=t?t.addNestedSub(o):e.subscribe(o),i=va(),a=null,s=null,r={clear:function(){a=null,s=null},notify:function(){i((function(){for(var e=a;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=a;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=s={callback:e,next:null,prev:s};return n.prev?n.prev.next=n:a=n,function(){t&&null!==a&&(t=!1,n.next?n.next.prev=n.prev:s=n.prev,n.prev?n.prev.next=n.next:a=n.next)}}})}var a={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ma)},getListeners:function(){return r}};return a}var Ca="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function ba(e){var t=e.store,n=e.context,r=e.children,o=(0,i.useMemo)((function(){var e=ya(t);return{store:t,subscription:e}}),[t]),s=(0,i.useMemo)((function(){return t.getState()}),[t]);Ca((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,s]);var l=n||pa;return a().createElement(l.Provider,{value:o},r)}function wa(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var xa={exports:{}},Ea={},Sa="function"==typeof Symbol&&Symbol.for,Ia=Sa?Symbol.for("react.element"):60103,Ta=Sa?Symbol.for("react.portal"):60106,La=Sa?Symbol.for("react.fragment"):60107,Ma=Sa?Symbol.for("react.strict_mode"):60108,Oa=Sa?Symbol.for("react.profiler"):60114,_a=Sa?Symbol.for("react.provider"):60109,Na=Sa?Symbol.for("react.context"):60110,Aa=Sa?Symbol.for("react.async_mode"):60111,Ra=Sa?Symbol.for("react.concurrent_mode"):60111,Da=Sa?Symbol.for("react.forward_ref"):60112,Pa=Sa?Symbol.for("react.suspense"):60113,ka=Sa?Symbol.for("react.suspense_list"):60120,Ba=Sa?Symbol.for("react.memo"):60115,Fa=Sa?Symbol.for("react.lazy"):60116,ja=Sa?Symbol.for("react.block"):60121,za=Sa?Symbol.for("react.fundamental"):60117,Ha=Sa?Symbol.for("react.responder"):60118,Wa=Sa?Symbol.for("react.scope"):60119;function Ga(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Ia:switch(e=e.type){case Aa:case Ra:case La:case Oa:case Ma:case Pa:return e;default:switch(e=e&&e.$$typeof){case Na:case Da:case Fa:case Ba:case _a:return e;default:return t}}case Ta:return t}}}function Ua(e){return Ga(e)===Ra}Ea.AsyncMode=Aa,Ea.ConcurrentMode=Ra,Ea.ContextConsumer=Na,Ea.ContextProvider=_a,Ea.Element=Ia,Ea.ForwardRef=Da,Ea.Fragment=La,Ea.Lazy=Fa,Ea.Memo=Ba,Ea.Portal=Ta,Ea.Profiler=Oa,Ea.StrictMode=Ma,Ea.Suspense=Pa,Ea.isAsyncMode=function(e){return Ua(e)||Ga(e)===Aa},Ea.isConcurrentMode=Ua,Ea.isContextConsumer=function(e){return Ga(e)===Na},Ea.isContextProvider=function(e){return Ga(e)===_a},Ea.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ia},Ea.isForwardRef=function(e){return Ga(e)===Da},Ea.isFragment=function(e){return Ga(e)===La},Ea.isLazy=function(e){return Ga(e)===Fa},Ea.isMemo=function(e){return Ga(e)===Ba},Ea.isPortal=function(e){return Ga(e)===Ta},Ea.isProfiler=function(e){return Ga(e)===Oa},Ea.isStrictMode=function(e){return Ga(e)===Ma},Ea.isSuspense=function(e){return Ga(e)===Pa},Ea.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===La||e===Ra||e===Oa||e===Ma||e===Pa||e===ka||"object"==typeof e&&null!==e&&(e.$$typeof===Fa||e.$$typeof===Ba||e.$$typeof===_a||e.$$typeof===Na||e.$$typeof===Da||e.$$typeof===za||e.$$typeof===Ha||e.$$typeof===Wa||e.$$typeof===ja)},Ea.typeOf=Ga,xa.exports=Ea;var Va=xa.exports,Ya={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Xa={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qa={};function Ka(e){return Va.isMemo(e)?Xa:qa[e.$$typeof]||Ya}qa[Va.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qa[Va.Memo]=Xa;var Za=Object.defineProperty,Qa=Object.getOwnPropertyNames,Ja=Object.getOwnPropertySymbols,es=Object.getOwnPropertyDescriptor,ts=Object.getPrototypeOf,ns=Object.prototype,rs=function e(t,n,r){if("string"!=typeof n){if(ns){var o=ts(n);o&&o!==ns&&e(t,o,r)}var i=Qa(n);Ja&&(i=i.concat(Ja(n)));for(var a=Ka(t),s=Ka(n),l=0;l<i.length;++l){var c=i[l];if(!($a[c]||r&&r[c]||s&&s[c]||a&&a[c])){var u=es(n,c);try{Za(t,c,u)}catch(e){}}}}return t},os={exports:{}},is={},as=60103,ss=60106,ls=60107,cs=60108,us=60114,ds=60109,hs=60110,fs=60112,ps=60113,gs=60120,vs=60115,ms=60116,ys=60121,Cs=60122,bs=60117,ws=60129,xs=60131;if("function"==typeof Symbol&&Symbol.for){var Es=Symbol.for;as=Es("react.element"),ss=Es("react.portal"),ls=Es("react.fragment"),cs=Es("react.strict_mode"),us=Es("react.profiler"),ds=Es("react.provider"),hs=Es("react.context"),fs=Es("react.forward_ref"),ps=Es("react.suspense"),gs=Es("react.suspense_list"),vs=Es("react.memo"),ms=Es("react.lazy"),ys=Es("react.block"),Cs=Es("react.server.block"),bs=Es("react.fundamental"),ws=Es("react.debug_trace_mode"),xs=Es("react.legacy_hidden")}function Ss(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case as:switch(e=e.type){case ls:case us:case cs:case ps:case gs:return e;default:switch(e=e&&e.$$typeof){case hs:case fs:case ms:case vs:case ds:return e;default:return t}}case ss:return t}}}var Is=ds,Ts=as,Ls=fs,Ms=ls,Os=ms,_s=vs,Ns=ss,As=us,Rs=cs,Ds=ps;is.ContextConsumer=hs,is.ContextProvider=Is,is.Element=Ts,is.ForwardRef=Ls,is.Fragment=Ms,is.Lazy=Os,is.Memo=_s,is.Portal=Ns,is.Profiler=As,is.StrictMode=Rs,is.Suspense=Ds,is.isAsyncMode=function(){return!1},is.isConcurrentMode=function(){return!1},is.isContextConsumer=function(e){return Ss(e)===hs},is.isContextProvider=function(e){return Ss(e)===ds},is.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===as},is.isForwardRef=function(e){return Ss(e)===fs},is.isFragment=function(e){return Ss(e)===ls},is.isLazy=function(e){return Ss(e)===ms},is.isMemo=function(e){return Ss(e)===vs},is.isPortal=function(e){return Ss(e)===ss},is.isProfiler=function(e){return Ss(e)===us},is.isStrictMode=function(e){return Ss(e)===cs},is.isSuspense=function(e){return Ss(e)===ps},is.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ls||e===us||e===ws||e===cs||e===ps||e===gs||e===xs||"object"==typeof e&&null!==e&&(e.$$typeof===ms||e.$$typeof===vs||e.$$typeof===ds||e.$$typeof===hs||e.$$typeof===fs||e.$$typeof===bs||e.$$typeof===ys||e[0]===Cs)},is.typeOf=Ss,os.exports=is;var Ps=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ks=["reactReduxForwardedRef"],Bs=[],Fs=[null,null];function js(e,t){var n=e[1];return[t.payload,n+1]}function zs(e,t,n){Ca((function(){return e.apply(void 0,t)}),n)}function Hs(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function Ws(e,t,n,r,o,i,a,s,l,c){if(e){var u=!1,d=null,h=function(){if(!u){var e,n,h=t.getState();try{e=r(h,o.current)}catch(e){n=e,d=e}n||(d=null),e===i.current?a.current||l():(i.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=h,n.trySubscribe(),h(),function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var Gs=function(){return[null,0]};function Us(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,s=n.methodName,l=void 0===s?"connectAdvanced":s,c=n.renderCountProp,u=void 0===c?void 0:c,d=n.shouldHandleStateChanges,h=void 0===d||d,f=n.storeKey,p=void 0===f?"store":f;n.withRef;var g=n.forwardRef,v=void 0!==g&&g,m=n.context,y=void 0===m?pa:m,C=wa(n,Ps),b=y;return function(t){var n=t.displayName||t.name||"Component",r=o(n),s=na({},C,{getDisplayName:o,methodName:l,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),c=C.pure,d=c?i.useMemo:function(e){return e()};function f(n){var r=(0,i.useMemo)((function(){var e=n.reactReduxForwardedRef,t=wa(n,ks);return[n.context,e,t]}),[n]),o=r[0],l=r[1],c=r[2],u=(0,i.useMemo)((function(){return o&&o.Consumer&&os.exports.isContextConsumer(a().createElement(o.Consumer,null))?o:b}),[o,b]),f=(0,i.useContext)(u),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var g=p?n.store:f.store,v=(0,i.useMemo)((function(){return function(t){return e(t.dispatch,s)}(g)}),[g]),m=(0,i.useMemo)((function(){if(!h)return Fs;var e=ya(g,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[g,p,f]),y=m[0],C=m[1],w=(0,i.useMemo)((function(){return p?f:na({},f,{subscription:y})}),[p,f,y]),x=(0,i.useReducer)(js,Bs,Gs),E=x[0][0],S=x[1];if(E&&E.error)throw E.error;var I=(0,i.useRef)(),T=(0,i.useRef)(c),L=(0,i.useRef)(),M=(0,i.useRef)(!1),O=d((function(){return L.current&&c===T.current?L.current:v(g.getState(),c)}),[g,E,c]);zs(Hs,[T,I,M,c,O,L,C]),zs(Ws,[h,g,y,v,T,I,M,L,C,S],[g,y,v]);var _=(0,i.useMemo)((function(){return a().createElement(t,na({},O,{ref:l}))}),[l,t,O]);return(0,i.useMemo)((function(){return h?a().createElement(u.Provider,{value:w},_):_}),[u,_,w])}var g=c?a().memo(f):f;if(g.WrappedComponent=t,g.displayName=f.displayName=r,v){var m=a().forwardRef((function(e,t){return a().createElement(g,na({},e,{reactReduxForwardedRef:t}))}));return m.displayName=r,m.WrappedComponent=t,rs(m,t)}return rs(g,t)}}function Vs(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Ys(e,t){if(Vs(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Vs(e[n[o]],t[n[o]]))return!1;return!0}function $s(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function Xs(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function qs(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Xs(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=Xs(o),o=r(t,n)),o},r}}var Ks=[function(e){return"function"==typeof e?qs(e):void 0},function(e){return e?void 0:$s((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?$s((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}],Zs=[function(e){return"function"==typeof e?qs(e):void 0},function(e){return e?void 0:$s((function(){return{}}))}];function Qs(e,t,n){return na({},n,e,t)}var Js=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?o&&i(l,r)||(r=l):(a=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return Qs}}],el=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function tl(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function nl(e,t,n,r,o){var i,a,s,l,c,u=o.areStatesEqual,d=o.areOwnPropsEqual,h=o.areStatePropsEqual,f=!1;return function(o,p){return f?function(o,f){var p,g,v=!d(f,a),m=!u(o,i);return i=o,a=f,v&&m?(s=e(i,a),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):v?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):m?(p=e(i,a),g=!h(p,s),s=p,g&&(c=n(s,l,a)),c):c}(o,p):(s=e(i=o,a=p),l=t(r,a),c=n(s,l,a),f=!0,c)}}function rl(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=wa(t,el),a=n(e,i),s=r(e,i),l=o(e,i);return(i.pure?nl:tl)(a,s,l,e,i)}var ol=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function il(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function al(e,t){return e===t}function sl(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Us:n,o=t.mapStateToPropsFactories,i=void 0===o?Zs:o,a=t.mapDispatchToPropsFactories,s=void 0===a?Ks:a,l=t.mergePropsFactories,c=void 0===l?Js:l,u=t.selectorFactory,d=void 0===u?rl:u;return function(e,t,n,o){void 0===o&&(o={});var a=o,l=a.pure,u=void 0===l||l,h=a.areStatesEqual,f=void 0===h?al:h,p=a.areOwnPropsEqual,g=void 0===p?Ys:p,v=a.areStatePropsEqual,m=void 0===v?Ys:v,y=a.areMergedPropsEqual,C=void 0===y?Ys:y,b=wa(a,ol),w=il(e,i,"mapStateToProps"),x=il(t,s,"mapDispatchToProps"),E=il(n,c,"mergeProps");return r(d,na({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:x,initMergeProps:E,pure:u,areStatesEqual:f,areOwnPropsEqual:g,areStatePropsEqual:m,areMergedPropsEqual:C},b))}}var ll,cl=sl();function ul(e,t){var n=(0,i.useState)((function(){return{inputs:t,result:e()}}))[0],r=(0,i.useRef)(!0),o=(0,i.useRef)(n),a=r.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,i.useEffect)((function(){r.current=!1,o.current=a}),[a]),a.result}ll=s.unstable_batchedUpdates,ga=ll;var dl=ul,hl=function(e,t){return ul((function(){return e}),t)},fl=function(e){var t=e.top,n=e.right,r=e.bottom,o=e.left;return{top:t,right:n,bottom:r,left:o,width:n-o,height:r-t,x:o,y:t,center:{x:(n+o)/2,y:(r+t)/2}}},pl=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},gl=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},vl={top:0,right:0,bottom:0,left:0},ml=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?vl:n,o=e.border,i=void 0===o?vl:o,a=e.padding,s=void 0===a?vl:a,l=fl(pl(t,r)),c=fl(gl(t,i)),u=fl(gl(c,s));return{marginBox:l,borderBox:fl(t),paddingBox:c,contentBox:u,margin:r,border:i,padding:s}},yl=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){throw new Error("Invariant failed")}(),n},Cl=function(e,t){var n,r,o=e.borderBox,i=e.border,a=e.margin,s=e.padding,l=(r=t,{top:(n=o).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return ml({borderBox:l,border:i,margin:a,padding:s})},bl=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Cl(e,t)},wl=function(e,t){var n={top:yl(t.marginTop),right:yl(t.marginRight),bottom:yl(t.marginBottom),left:yl(t.marginLeft)},r={top:yl(t.paddingTop),right:yl(t.paddingRight),bottom:yl(t.paddingBottom),left:yl(t.paddingLeft)},o={top:yl(t.borderTopWidth),right:yl(t.borderRightWidth),bottom:yl(t.borderBottomWidth),left:yl(t.borderLeftWidth)};return ml({borderBox:e,margin:n,padding:r,border:o})},xl=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return wl(t,n)},El=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Sl(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(o=t[n])||El(r)&&El(o)))return!1;var r,o;return!0}function Il(e,t){var n;void 0===t&&(t=Sl);var r,o=[],i=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return i&&n===this&&t(a,o)||(r=e.apply(this,a),i=!0,n=this,o=a),r}}var Tl=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function Ll(e,t){}function Ml(){}function Ol(e,t,n){var r=t.map((function(t){var r=na({},n,{},t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}Ll.bind(null,"warn"),Ll.bind(null,"error");var _l="Invariant failed";function Nl(e){this.message=e}function Al(e,t){if(!e)throw new Nl(_l)}Nl.prototype.toString=function(){return this.message};var Rl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Ml,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Nl&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}ta(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Ol(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Nl))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(a().Component),Dl=function(e){return e+1},Pl=function(e,t){var n=e.droppableId===t.droppableId,r=Dl(e.index),o=Dl(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+o+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+o+"\n  "},kl=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Bl=function(e){return"\n  The item has returned to its starting position\n  of "+Dl(e.index)+"\n"},Fl=function(e){return"\n  You have lifted an item in position "+Dl(e.source.index)+"\n"},jl=function(e){var t=e.destination;if(t)return Pl(e.source,t);var n=e.combine;return n?kl(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},zl=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Bl(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Pl(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+kl(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Bl(e.source)+"\n  "},Hl={x:0,y:0},Wl=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Gl=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ul=function(e,t){return e.x===t.x&&e.y===t.y},Vl=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},Yl=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},$l=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},Xl=function(e,t){return Math.min.apply(Math,t.map((function(t){return $l(e,t)})))},ql=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},Kl=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Zl=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Ql=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=fl({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):fl(e)},Jl=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,o=e.frame,i=function(e,t){return t?Kl(e,t.scroll.diff.displacement):e}(t.marginBox,o),a=function(e,t,n){var r;return n&&n.increasedBy?na({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(i,r,n);return{page:t,withPlaceholder:n,active:Ql(a,o)}},ec=function(e,t){e.frame||Al(!1);var n=e.frame,r=Gl(t,n.scroll.initial),o=Vl(r),i=na({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}});return na({},e,{frame:i,subject:Jl({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function tc(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function nc(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function rc(e,t){if(e.find)return e.find(t);var n=nc(e,t);return-1!==n?e[n]:void 0}function oc(e){return Array.prototype.slice.call(e)}var ic=Il((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),ac=Il((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),sc=Il((function(e){return tc(e)})),lc=Il((function(e){return tc(e)})),cc=Il((function(e,t){return lc(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function uc(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function dc(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var hc=Il((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),fc=function(e,t){return e.descriptor.droppableId===t.descriptor.id},pc={point:Hl,value:0},gc={invisible:{},visible:{},all:[]},vc={displaced:gc,displacedBy:pc,at:null},mc=function(e,t){return function(n){return e<=n&&n<=t}},yc=function(e){var t=mc(e.top,e.bottom),n=mc(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;var a=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!a||!s)||a&&i||s&&o}},Cc=function(e){var t=mc(e.top,e.bottom),n=mc(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},bc={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},wc={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},xc=function(e){var t=e.target,n=e.destination,r=e.viewport,o=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,a=o?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Hl;return Kl(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(a,n,i)&&function(e,t,n){return n(t)(e)}(a,r,i)},Ec=function(e){return xc(na({},e,{isVisibleThroughFrameFn:yc}))},Sc=function(e){return xc(na({},e,{isVisibleThroughFrameFn:Cc}))},Ic=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,o=t.visible;if(r[e])return!1;var i=o[e];return!i||i.shouldAnimate};function Tc(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return fl(pl(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Ec({target:s,destination:n,viewport:o,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c={draggableId:l,shouldAnimate:Ic(l,a,i)};return e.visible[l]=c,e}),{all:[],visible:{},invisible:{}})}function Lc(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,o=e.destination,i=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:gc,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function Mc(e){var t=e.draggable,n=e.insideDestination,r=e.destination,o=e.viewport,i=e.displacedBy,a=e.last,s=e.index,l=e.forceShouldAnimate,c=fc(t,r);if(null==s)return Lc({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var u=rc(n,(function(e){return e.descriptor.index===s}));if(!u)return Lc({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var d=hc(t,n),h=n.indexOf(u);return{displaced:Tc({afterDragging:d.slice(h),destination:r,displacedBy:i,last:a,viewport:o.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Oc(e,t){return Boolean(t.effected[e])}var _c=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Nc=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Ac=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Yl(t.line,n.marginBox[t.end]+_c(t,r),Nc(t,n.marginBox,r))},Rc=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Yl(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Nc(t,n.marginBox,r))},Dc=function(e,t){var n=e.frame;return n?Wl(t,n.scroll.diff.displacement):t},Pc=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.afterCritical,a=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?function(e){var t=e.impact,n=e.draggable,r=e.draggables,o=e.droppable,i=e.afterCritical,a=cc(o.descriptor.id,r),s=n.page,l=o.axis;if(!a.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return Yl(t.line,n.contentBox[t.start]+_c(t,r),Nc(t,n.contentBox,r))}({axis:l,moveInto:o.page,isMoving:s});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var h=r[d];if(Oc(d,i))return Rc({axis:l,moveRelativeTo:h.page,isMoving:s});var f=Cl(h.page,u.point);return Rc({axis:l,moveRelativeTo:f,isMoving:s})}var p=a[a.length-1];if(p.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Oc(p.descriptor.id,i)){var g=Cl(p.page,Vl(i.displacedBy.point));return Ac({axis:l,moveRelativeTo:g,isMoving:s})}return Ac({axis:l,moveRelativeTo:p.page,isMoving:s})}({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:i}):function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,o=dc(n);o||Al(!1);var i=o.draggableId,a=r[i].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,o=e.displacedBy,i=Boolean(t.visible[r]||t.invisible[r]);return Oc(r,n)?i?Hl:Vl(o.point):i?o.point:Hl}({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return Wl(a,s)}({impact:t,draggables:o,afterCritical:i}):a}(e),n=e.droppable;return n?Dc(n,t):t},kc=function(e,t){var n=Gl(t,e.scroll.initial),r=Vl(n);return{frame:fl({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Bc(e,t){return e.map((function(e){return t[e]}))}var Fc=function(e){var t,n,r=e.pageBorderBoxCenter,o=e.draggable,i=(t=e.viewport,n=r,Wl(t.scroll.diff.displacement,n)),a=Gl(i,o.page.borderBox.center);return Wl(o.client.borderBox.center,a)},jc=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=void 0!==a&&a,l=Gl(r,t.page.borderBox.center),c={target:Kl(t.page.borderBox,l),destination:n,withDroppableDisplacement:i,viewport:o};return s?function(e){return xc(na({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=mc(e.top,e.bottom),r=mc(e.left,e.right);return function(e){return t===bc?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Sc(c)},zc=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.draggables,i=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=cc(r.descriptor.id,o),d=fc(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.previousImpact;if(!r.isCombineEnabled)return null;if(!uc(i))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return na({},i,{at:t})}var s=i.displaced.all,l=s.length?s[0]:null;if(t)return l?a(l):null;var c=hc(n,o);if(!l)return c.length?a(c[c.length-1].descriptor.id):null;var u=nc(c,(function(e){return e.descriptor.id===l}));-1===u&&Al(!1);var d=u-1;return d<0?null:a(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:i})||function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,o=e.draggables,i=e.destination,a=e.insideDestination,s=e.previousImpact,l=e.viewport,c=e.afterCritical,u=s.at;if(u||Al(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,o=e.location;if(!r.length)return null;var i=o.index,a=t?i+1:i-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return a<s||a>(n?l:l+1)?null:a}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:a});return null==d?null:Mc({draggable:r,insideDestination:a,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:d})}var h=function(e){var t=e.isMovingForward,n=e.draggables,r=e.combine,o=e.afterCritical;if(!e.destination.isCombineEnabled)return null;var i=r.draggableId,a=n[i].descriptor.index;return Oc(i,o)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:i,displaced:s.displaced,draggables:o,combine:u.combine,afterCritical:c});return null==h?null:Mc({draggable:r,insideDestination:a,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:h})}({isMovingForward:t,isInHomeList:d,draggable:n,draggables:o,destination:r,insideDestination:u,previousImpact:i,viewport:a,afterCritical:c});if(!h)return null;var f=Pc({impact:h,draggable:n,droppable:r,draggables:o,afterCritical:c});if(jc({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Fc({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null};var p=Gl(f,s),g=function(e){var t=e.impact,n=e.viewport,r=e.destination,o=e.draggables,i=e.maxScrollChange,a=kc(n,Wl(n.scroll.current,i)),s=r.frame?ec(r,Wl(r.frame.scroll.current,i)):r,l=t.displaced,c=Tc({afterDragging:Bc(l.all,o),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),u=Tc({afterDragging:Bc(l.all,o),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?h[e]=t:d[e]=!0})),na({},t,{displaced:{all:l.all,invisible:d,visible:h}})}({impact:h,viewport:a,destination:r,draggables:o,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}},Hc=function(e){var t=e.subject.active;return t||Al(!1),t},Wc=function(e,t){var n=e.page.borderBox.center;return Oc(e.descriptor.id,t)?Gl(n,t.displacedBy.point):n},Gc=function(e,t){var n=e.page.borderBox;return Oc(e.descriptor.id,t)?Kl(n,Vl(t.displacedBy.point)):n},Uc=Il((function(e,t){var n=t[e.line];return{value:n,point:Yl(e.line,n)}})),Vc=function(e,t){return na({},e,{scroll:na({},e.scroll,{max:t})})},Yc=function(e,t,n){var r=e.frame;fc(t,e)&&Al(!1),e.subject.withPlaceholder&&Al(!1);var o=Uc(e.axis,t.displaceBy).point,i=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return Yl(r.line,t[r.line]);var o=e.subject.page.contentBox[r.size],i=cc(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-o;return i<=0?null:Yl(r.line,i)}(e,o,n),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return na({},e,{subject:Jl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var s=i?Wl(r.scroll.max,i):r.scroll.max,l=Vc(r,s);return na({},e,{subject:Jl({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:l}),frame:l})},$c=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},Xc=function(e){var t=e.state,n=e.type,r=function(e,t){var n=$c(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),o=Boolean(r),i=t.dimensions.droppables[t.critical.droppable.id],a=r||i,s=a.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!o)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,h=t.dimensions,f=h.draggables,p=h.droppables;return l?zc({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,o=e.isOver,i=e.draggables,a=e.droppables,s=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,o=e.droppables,i=e.viewport,a=r.subject.active;if(!a)return null;var s=r.axis,l=mc(a[s.start],a[s.end]),c=sc(o).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return yc(i.frame)(Hc(e))})).filter((function(e){var n=Hc(e);return t?a[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<a[s.crossAxisStart]})).filter((function(e){var t=Hc(e),n=mc(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(a[s.start])||n(a[s.end])})).sort((function(e,n){var r=Hc(e)[s.crossAxisStart],o=Hc(n)[s.crossAxisStart];return t?r-o:o-r})).filter((function(e,t,n){return Hc(e)[s.crossAxisStart]===Hc(n[0])[s.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter((function(e){return mc(Hc(e)[s.start],Hc(e)[s.end])(n[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return Hc(e)[s.start]-Hc(t)[s.start]}))[0]:c.sort((function(e,t){var r=Xl(n,Zl(Hc(e))),o=Xl(n,Zl(Hc(t)));return r!==o?r-o:Hc(e)[s.start]-Hc(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:o,droppables:a,viewport:s});if(!c)return null;var u=cc(c.descriptor.id,i),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,o=e.afterCritical;return e.insideDestination.filter((function(e){return Sc({target:Gc(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=$l(t,Dc(r,Wc(e,o))),a=$l(t,Dc(r,Wc(n,o)));return i<a?-1:a<i?1:e.descriptor.index-n.descriptor.index}))[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:c,insideDestination:u,afterCritical:l}),h=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,o=e.draggable,i=e.draggables,a=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:gc,displacedBy:pc,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Pc({impact:c,draggable:o,droppable:a,draggables:i,afterCritical:l}),d=fc(o,a)?a:Yc(a,o,i);return jc({draggable:o,destination:d,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var h,f=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),p=(h=n.descriptor.index,n.descriptor.id===o.descriptor.id||f?h:h+1);return Mc({draggable:o,insideDestination:r,destination:a,viewport:s,displacedBy:Uc(a.axis,o.displaceBy),last:gc,index:p})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:s,afterCritical:l});if(!h)return null;var f=Pc({impact:h,draggable:r,droppable:c,draggables:i,afterCritical:l});return{clientSelection:Fc({pageBorderBoxCenter:f,draggable:r,viewport:s}),impact:h,scrollJumpRequest:null}}({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function qc(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Kc(e){var t=mc(e.top,e.bottom),n=mc(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}var Zc=function(e,t){return fl(Kl(e,t))};function Qc(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var Jc=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,o=e.droppables,i=e.previousImpact,a=e.viewport,s=e.afterCritical,l=Zc(n.page.borderBox,t),c=function(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,o=sc(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,o=e.subject.active;if(!o)return!1;if(r=o,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(Kc(o)(t.center))return!0;var i=e.axis,a=o.center[i.crossAxisLine],s=t[i.crossAxisStart],l=t[i.crossAxisEnd],c=mc(o[i.crossAxisStart],o[i.crossAxisEnd]),u=c(s),d=c(l);return!u&&!d||(u?s<a:l>a)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.candidates,r=e.draggable.page.borderBox.center,o=n.map((function(e){var n=e.axis,o=Yl(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:$l(r,o)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:o}):null}({pageBorderBox:l,draggable:n,droppables:o});if(!c)return vc;var u,d,h=o[c],f=cc(h.descriptor.id,r),p=(u=l,(d=h.frame)?Zc(u,d.scroll.diff.value):u);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,o=e.destination,i=e.insideDestination,a=e.afterCritical;if(!o.isCombineEnabled)return null;var s=o.axis,l=Uc(o.axis,t.displaceBy),c=l.value,u=n[s.start],d=n[s.end],h=rc(hc(t,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox,o=n[s.size]/4,i=Oc(t,a),l=Qc({displaced:r.displaced,id:t});return i?l?d>n[s.start]+o&&d<n[s.end]-o:u>n[s.start]-c+o&&u<n[s.end]-c-o:l?d>n[s.start]+c+o&&d<n[s.end]+c-o:u>n[s.start]+o&&u<n[s.end]-o}));return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:i,destination:h,insideDestination:f,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.last,a=e.viewport,s=e.afterCritical,l=r.axis,c=Uc(r.axis,n.displaceBy),u=c.value,d=t[l.start],h=t[l.end],f=function(e){var t=e.draggable,n=e.closest;return n?e.inHomeList&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:rc(hc(n,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Oc(t,s),o=Qc({displaced:i,id:t});return r?o?h<=n:d<n-u:o?h<=n+u:d<n})),inHomeList:fc(n,r)});return Mc({draggable:n,insideDestination:o,destination:r,viewport:a,last:i,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:h,insideDestination:f,last:i.displaced,viewport:a,afterCritical:s})},eu=function(e,t){var n;return na({},e,((n={})[t.descriptor.id]=t,n))},tu=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,o=e.viewport,i=e.impact,a=e.scrollJumpRequest,s=o||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=Gl(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:Wl(t.initial.client.borderBoxCenter,u)},h={selection:Wl(d.selection,s.scroll.current),borderBoxCenter:Wl(d.borderBoxCenter,s.scroll.current),offset:Wl(d.offset,s.scroll.diff.value)},f={client:d,page:h};if("COLLECTING"===t.phase)return na({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:f});var p=l.draggables[t.critical.draggable.id],g=i||Jc({pageOffset:h.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,o=e.impact,i=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,o=$c(t),i=$c(n);if(!o)return r;if(o===i)return r;var a=r[o];if(!a.subject.withPlaceholder)return r;var s=function(e){var t=e.subject.withPlaceholder;t||Al(!1);var n=e.frame;if(!n)return na({},e,{subject:Jl({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Al(!1);var o=Vc(n,r);return na({},e,{subject:Jl({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null}),frame:o})}(a);return eu(r,s)}({previousImpact:e.previousImpact,impact:o,droppables:r}),a=$c(o);if(!a)return i;var s=r[a];if(fc(t,s))return i;if(s.subject.withPlaceholder)return i;var l=Yc(s,t,n);return eu(i,l)}({draggable:p,impact:g,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return na({},t,{current:f,dimensions:{draggables:l.draggables,droppables:v},impact:g,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})},nu=function(e){var t=e.impact,n=e.viewport,r=e.draggables,o=e.destination,i=e.forceShouldAnimate,a=t.displaced,s=function(e,t){return e.map((function(e){return t[e]}))}(a.all,r);return na({},t,{displaced:Tc({afterDragging:s,destination:o,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a})})},ru=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.viewport,a=e.afterCritical,s=Pc({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:a});return Fc({pageBorderBoxCenter:s,draggable:n,viewport:i})},ou=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Al(!1);var o=t.impact,i=r||t.viewport,a=n||t.dimensions,s=a.draggables,l=a.droppables,c=s[t.critical.draggable.id],u=$c(o);u||Al(!1);var d=l[u],h=nu({impact:o,viewport:i,destination:d,draggables:s}),f=ru({impact:h,draggable:c,droppable:d,draggables:s,viewport:i,afterCritical:t.afterCritical});return tu({impact:h,clientSelection:f,state:t,dimensions:a,viewport:i})},iu=function(e){var t=e.draggable,n=e.home,r=e.draggables,o=e.viewport,i=Uc(n.axis,t.displaceBy),a=cc(n.descriptor.id,r),s=a.indexOf(t);-1===s&&Al(!1);var l,c=a.slice(s+1),u=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:i,effected:u};return{impact:{displaced:Tc({afterDragging:c,destination:n,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},au=function(e){return"SNAP"===e.movementMode},su=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:eu(e.droppables,t)}}(e.dimensions,t);return!au(e)||n?tu({state:e,dimensions:r}):ou({state:e,dimensions:r})};function lu(e){return e.isDragging&&"SNAP"===e.movementMode?na({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var cu={phase:"IDLE",completed:null,shouldFlush:!1},uu=function(e,t){if(void 0===e&&(e=cu),"FLUSH"===t.type)return na({},cu,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Al(!1);var n=t.payload,r=n.critical,o=n.clientSelection,i=n.viewport,a=n.dimensions,s=n.movementMode,l=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],u={selection:o,borderBoxCenter:l.client.borderBox.center,offset:Hl},d={client:u,page:{selection:Wl(u.selection,i.scroll.initial),borderBoxCenter:Wl(u.selection,i.scroll.initial),offset:Wl(u.selection,i.scroll.diff.value)}},h=sc(a.droppables).every((function(e){return!e.isFixedOnPage})),f=iu({draggable:l,home:c,draggables:a.draggables,viewport:i}),p=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:a,initial:d,current:d,isWindowScrollAllowed:h,impact:p,afterCritical:f.afterCritical,onLiftImpact:p,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Al(!1),na({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Al(!1),function(e){var t=e.state,n=e.published,r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return ec(n,e.scroll)})),o=na({},t.dimensions.droppables,{},ic(r)),i=ac(function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,o=r.scroll.diff.value;return t.map((function(e){var t,i,a=e.descriptor.droppableId,s=(t=n[a],i=t.frame,i||Al(!1),i).scroll.diff.value,l=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,o=Cl(t.client,n),i=bl(o,r);return na({},t,{placeholder:na({},t.placeholder,{client:o}),client:o,page:i})}({draggable:e,offset:Wl(o,s),initialWindowScroll:r.scroll.initial});return l}))}({additions:n.additions,updatedDroppables:o,viewport:t.viewport})),a=na({},t.dimensions.draggables,{},i);n.removals.forEach((function(e){delete a[e]}));var s={droppables:o,draggables:a},l=$c(t.impact),c=l?s.droppables[l]:null,u=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],h=iu({draggable:u,home:d,draggables:a,viewport:t.viewport}),f=h.impact,p=h.afterCritical,g=c&&c.isCombineEnabled?t.impact:f,v=Jc({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:g,viewport:t.viewport,afterCritical:p}),m=na({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:s,afterCritical:p,forceShouldAnimate:!1});return"COLLECTING"===t.phase?m:na({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;qc(e)||Al(!1);var g=t.payload.client;return Ul(g,e.current.client.selection)?e:tu({state:e,clientSelection:g,impact:au(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return lu(e);if("COLLECTING"===e.phase)return lu(e);qc(e)||Al(!1);var v=t.payload,m=v.id,y=v.newScroll,C=e.dimensions.droppables[m];if(!C)return e;var b=ec(C,y);return su(e,b,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;qc(e)||Al(!1);var w=t.payload,x=w.id,E=w.isEnabled,S=e.dimensions.droppables[x];S||Al(!1),S.isEnabled===E&&Al(!1);var I=na({},S,{isEnabled:E});return su(e,I,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;qc(e)||Al(!1);var T=t.payload,L=T.id,M=T.isCombineEnabled,O=e.dimensions.droppables[L];O||Al(!1),O.isCombineEnabled===M&&Al(!1);var _=na({},O,{isCombineEnabled:M});return su(e,_,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;qc(e)||Al(!1),e.isWindowScrollAllowed||Al(!1);var N=t.payload.newScroll;if(Ul(e.viewport.scroll.current,N))return lu(e);var A=kc(e.viewport,N);return au(e)?ou({state:e,viewport:A}):tu({state:e,viewport:A})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!qc(e))return e;var R=t.payload.maxScroll;if(Ul(R,e.viewport.scroll.max))return e;var D=na({},e.viewport,{scroll:na({},e.viewport.scroll,{max:R})});return na({phase:"DRAGGING"},e,{viewport:D})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Al(!1);var P=Xc({state:e,type:t.type});return P?tu({state:e,impact:P.impact,clientSelection:P.clientSelection,scrollJumpRequest:P.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var k=t.payload.reason;return"COLLECTING"!==e.phase&&Al(!1),na({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:k})}if("DROP_ANIMATE"===t.type){var B=t.payload,F=B.completed,j=B.dropDuration,z=B.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Al(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:j,newHomeClientOffset:z,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},du=function(e){return{type:"LIFT",payload:e}},hu=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},fu=function(){return{type:"COLLECTION_STARTING",payload:null}},pu=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},gu=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},vu=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},mu=function(e){return{type:"MOVE",payload:e}},yu=function(){return{type:"MOVE_UP",payload:null}},Cu=function(){return{type:"MOVE_DOWN",payload:null}},bu=function(){return{type:"MOVE_RIGHT",payload:null}},wu=function(){return{type:"MOVE_LEFT",payload:null}},xu=function(){return{type:"FLUSH",payload:null}},Eu=function(e){return{type:"DROP_COMPLETE",payload:e}},Su=function(e){return{type:"DROP",payload:e}},Iu="cubic-bezier(.2,1,.1,1)",Tu=0,Lu=.7,Mu=.75,Ou="0.2s cubic-bezier(0.2, 0, 0, 1)",_u={fluid:"opacity "+Ou,snap:"transform "+Ou+", opacity "+Ou,drop:function(e){var t=e+"s "+Iu;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Ou,placeholder:"height "+Ou+", width "+Ou+", margin "+Ou},Nu=function(e){return Ul(e,Hl)?null:"translate("+e.x+"px, "+e.y+"px)"},Au=Nu,Ru=function(e,t){var n=Nu(e);return n?t?n+" scale("+Mu+")":n:null},Du=.33,Pu=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var o=t(),i=r.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){"DROP_PENDING"===o.phase&&o.isWaiting&&Al(!1),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&Al(!1);var a=o.critical,s=o.dimensions,l=s.draggables[o.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,o=e.home,i=e.viewport,a=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:na({},r,{displaced:gc}),didDropInsideDroppable:!0}:{impact:nu({draggables:t,impact:a,destination:o,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,h=d?uc(u):null,f=d?dc(u):null,p={index:a.draggable.index,droppableId:a.droppable.id},g={draggableId:l.descriptor.id,type:l.descriptor.type,source:p,reason:i,mode:o.movementMode,destination:h,combine:f},v=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,o=e.viewport,i=e.afterCritical,a=r.draggables,s=r.droppables,l=$c(t),c=l?s[l]:null,u=s[n.descriptor.droppableId],d=ru({impact:t,draggable:n,draggables:a,afterCritical:i,droppable:c||u,viewport:o});return Gl(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:s,viewport:o.viewport,afterCritical:o.afterCritical}),m={critical:o.critical,afterCritical:o.afterCritical,result:g,impact:u};if(!Ul(o.current.client.offset,v)||Boolean(g.combine)){var y=function(e){var t=e.reason,n=$l(e.current,e.destination);if(n<=0)return Du;if(n>=1500)return.55;var r=Du+n/1500*.22000000000000003;return Number(("CANCEL"===t?.6*r:r).toFixed(2))}({current:o.current.client.offset,destination:v,reason:i});n({type:"DROP_ANIMATE",payload:{newHomeClientOffset:v,dropDuration:y,completed:m}})}else n(Eu({completed:m}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(r)}}},ku=function(){return{x:window.pageXOffset,y:window.pageYOffset}};var Bu=function(e){var t=function(e){var t,n=e.onWindowScroll,r=Tl((function(){n(ku())})),o=(t=r,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||t()}}),i=Ml;function a(){return i!==Ml}return{start:function(){a()&&Al(!1),i=Ol(window,[o])},stop:function(){a()||Al(!1),r.cancel(),i(),i=Ml},isActive:a}}({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},Fu=function(e,t){t()},ju=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},zu=function(e,t,n,r){if(e){var o=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),o=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return o.wasCalled=function(){return t},o}(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}else n(r(t))},Hu=function(e,t){var n=function(e,t){var n,r=(n=[],{add:function(e){var t=setTimeout((function(){return function(e){var t=nc(n,(function(t){return t.timerId===e}));-1===t&&Al(!1),n.splice(t,1)[0].callback()}(t)})),r={timerId:t,callback:e};n.push(r)},flush:function(){if(n.length){var e=[].concat(n);n.length=0,e.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}),o=null,i=function(n){o||Al(!1),o=null,Fu(0,(function(){return zu(e().onDragEnd,n,t,zl)}))};return{beforeCapture:function(t,n){o&&Al(!1),Fu(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){o&&Al(!1),Fu(0,(function(){var r=e().onBeforeDragStart;r&&r(ju(t,n))}))},start:function(n,i){o&&Al(!1);var a=ju(n,i);o={mode:i,lastCritical:n,lastLocation:a.source,lastCombine:null},r.add((function(){Fu(0,(function(){return zu(e().onDragStart,a,t,Fl)}))}))},update:function(n,i){var a=uc(i),s=dc(i);o||Al(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(n,o.lastCritical);l&&(o.lastCritical=n);var c,u,d=(u=a,!(null==(c=o.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(o.lastLocation=a);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(o.lastCombine,s);if(h&&(o.lastCombine=s),l||d||h){var f=na({},ju(n,o.mode),{combine:s,destination:a});r.add((function(){Fu(0,(function(){return zu(e().onDragUpdate,f,t,jl)}))}))}},flush:function(){o||Al(!1),r.flush()},drop:i,abort:function(){if(o){var e=na({},ju(o.lastCritical,o.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var o=r.payload.critical;return n.beforeStart(o,r.payload.movementMode),t(r),void n.start(o,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var i=r.payload.completed.result;return n.flush(),t(r),void n.drop(i)}if(t(r),"FLUSH"!==r.type){var a=e.getState();"DRAGGING"===a.phase&&n.update(a.critical,a.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Wu=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Al(!1),e.dispatch(Eu({completed:r.completed}))}else t(n)}}},Gu=function(e){var t=null,n=null;return function(r){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(o),"DROP_ANIMATE"===o.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=Ol(window,[i])}))}}}},Uu=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Su({reason:r.reason})))}}}},Vu=fa,Yu=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,o=e.styleMarshal,i=e.getResponders,a=e.announce,s=e.autoScroller;return ua(uu,Vu(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(aa(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return r=fa.apply(void 0,i)(n.dispatch),ia(ia({},n),{},{dispatch:r})}}}((t=o,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var i=o.payload,a=i.id,s=i.clientSelection,l=i.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(Eu({completed:c.completed})),"IDLE"!==n().phase&&Al(!1),r(xu()),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),h=d.critical,f=d.dimensions,p=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:h,dimensions:f,clientSelection:s,movementMode:l,viewport:p}})}else t(o)}}}}(n),Pu,Wu,Gu,Uu,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var o=t.getState();return"DRAGGING"!==o.phase&&Al(!1),void e.start(o)}n(r),e.scroll(t.getState())}}}}(s),Bu,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),Hu(i,a))))},$u=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,o=e.width,i=Gl({x:n,y:t},{x:o,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Xu=function(){var e=document.documentElement;return e||Al(!1),e},qu=function(){var e=Xu();return $u({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})};function Ku(e,t,n){return n.descriptor.id!==t.id&&n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var Zu,Qu,Ju=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},o=null,i=function(){o||(n.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=r,i=e.additions,a=e.removals,s=e.modified,l=Object.keys(i).map((function(e){return t.draggable.getById(e).getDimension(Hl)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:l,removals:Object.keys(a),modified:c};r={additions:{},removals:{},modified:{}},n.publish(u)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){n||Al(!1);var o=n.critical.draggable;"ADDITION"===t.type&&Ku(e,o,t.value)&&r.add(t.value),"REMOVAL"===t.type&&Ku(e,o,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,o){e.droppable.exists(r)||Al(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:o})},updateDroppableIsCombineEnabled:function(r,o){n&&(e.droppable.exists(r)||Al(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:o}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,o){n&&(e.droppable.exists(r)||Al(!1),t.updateDroppableScroll({id:r,newScroll:o}))},startPublishing:function(t){n&&Al(!1);var r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},s=e.subscribe(o);return n={critical:a,unsubscribe:s},function(e){var t,n,r,o,i,a,s,l=e.critical,c=e.scrollOptions,u=e.registry,d=(t=ku(),n=qu(),r=t.y,o=t.x,a=(i=Xu()).clientWidth,s=i.clientHeight,{frame:fl({top:r,left:o,right:o+a,bottom:r+s}),scroll:{initial:t,current:t,max:n,diff:{value:Hl,displacement:Hl}}}),h=d.scroll.current,f=l.droppable,p=u.droppable.getAllByType(f.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(h,c)})),g=u.draggable.getAllByType(l.draggable.type).map((function(e){return e.getDimension(h)}));return{dimensions:{draggables:ac(g),droppables:ic(p)},critical:l,viewport:d}}({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},ed=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},td=function(e){window.scrollBy(e.x,e.y)},nd=Il((function(e){return sc(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),rd=function(e){return Math.pow(e,2)},od=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,o=n-t;return 0===o?0:(r-t)/o},id=360,ad=1200,sd=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,o=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return 28;if(e===t.startScrollingFrom)return 1;var n=od({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=28*rd(1-n);return Math.ceil(r)}(t,n);return 0===i?0:o?Math.max(function(e,t){var n=t,r=ad,o=Date.now()-n;if(o>=ad)return e;if(o<id)return 1;var i=od({startOfRange:id,endOfRange:r,current:o}),a=e*rd(i);return Math.ceil(a)}(i,r),1):i},ld=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:.25*e[t.size],maxScrollValueAt:.05*e[t.size]}}(t,o);return n[o.end]<n[o.start]?sd({distanceToEdge:n[o.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i}):-1*sd({distanceToEdge:n[o.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i})},cd=ql((function(e){return 0===e?0:e})),ud=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,o=e.center,i=e.shouldUseTimeDampening,a={top:o.y-n.top,right:n.right-o.x,bottom:n.bottom-o.y,left:o.x-n.left},s=ld({container:n,distanceToEdges:a,dragStartTime:t,axis:bc,shouldUseTimeDampening:i}),l=ld({container:n,distanceToEdges:a,dragStartTime:t,axis:wc,shouldUseTimeDampening:i}),c=cd({x:l,y:s});if(Ul(c,Hl))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,o=n.height>t.height,i=n.width>t.width;return i||o?i&&o?null:{x:i?0:r.x,y:o?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?Ul(u,Hl)?null:u:null},dd=ql((function(e){return 0===e?0:e>0?1:-1})),hd=(Zu=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,o=Wl(t,r),i={x:Zu(o.x,n.x),y:Zu(o.y,n.y)};return Ul(i,Hl)?null:i}),fd=function(e){var t=e.max,n=e.current,r=e.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=dd(r),a=hd({max:o,current:n,change:i});return!a||0!==i.x&&0===a.x||0!==i.y&&0===a.y},pd=function(e,t){return fd({current:e.scroll.current,max:e.scroll.max,change:t})},gd=function(e,t){var n=e.frame;return!!n&&fd({current:n.scroll.current,max:n.scroll.max,change:t})},vd=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,o=e.shouldUseTimeDampening,i=ud({dragStartTime:e.dragStartTime,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return i&&pd(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:a,shouldUseTimeDampening:r});if(l)return void o(l)}var c=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var o=r[n];return o.frame?o:null}var i=function(e,t){return rc(nd(t),(function(t){return t.frame||Al(!1),Kc(t.frame.pageMarginBox)(e)}))}(t,r);return i}({center:a,destination:$c(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=ud({dragStartTime:o,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i});return s&&gd(t,s)?s:null}({dragStartTime:n,droppable:c,subject:s,center:a,shouldUseTimeDampening:r});u&&i(c.descriptor.id,u)}},md=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow;return function(e){var o=e.scrollJumpRequest;if(o){var i=$c(e.impact);i||Al(!1);var a=function(e,t){if(!gd(e,t))return t;var r=function(e,t){var n=e.frame;return n&&gd(e,t)?hd({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var o=Gl(t,r);return n(e.descriptor.id,o),Gl(t,o)}(e.dimensions.droppables[i],o);if(a){var s=e.viewport,l=function(e,t,n){if(!e)return n;if(!pd(t,n))return n;var o=function(e,t){if(!pd(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return hd({current:r,max:n,change:t})}(t,n);if(!o)return r(n),null;var i=Gl(n,o);return r(i),Gl(n,i)}(e.isWindowScrollAllowed,s,a);l&&function(e,n){var r=Wl(e.current.client.selection,n);t({client:r})}(e,l)}}}},yd=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,o=function(e){var t=e.scrollDroppable,n=Tl(e.scrollWindow),r=Tl(t),o=null,i=function(e){o||Al(!1);var t=o,i=t.shouldUseTimeDampening,a=t.dragStartTime;vd({state:e,scrollWindow:n,scrollDroppable:r,dragStartTime:a,shouldUseTimeDampening:i})};return{start:function(e){o&&Al(!1);var t=Date.now(),n=!1,r=function(){n=!0};vd({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},n&&i(e)},stop:function(){o&&(n.cancel(),r.cancel(),o=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),i=md({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop}},Cd="data-rbd",bd={base:Qu=Cd+"-drag-handle",draggableId:Qu+"-draggable-id",contextId:Qu+"-context-id"},wd=function(){var e=Cd+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),xd=function(){var e=Cd+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ed={contextId:Cd+"-scroll-container-context-id"},Sd=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Id=function(e){var t,n,r,o=(t=e,function(e){return"["+e+'="'+t+'"]'}),i=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(bd.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),a=[(r="\n      transition: "+_u.outOfTheWay+";\n    ",{selector:o(wd.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),i,{selector:o(xd.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Sd(a,"always"),resting:Sd(a,"resting"),dragging:Sd(a,"dragging"),dropAnimating:Sd(a,"dropAnimating"),userCancel:Sd(a,"userCancel")}},Td="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,Ld=function(){var e=document.querySelector("head");return e||Al(!1),e},Md=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t},Od=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function _d(e){return e instanceof Od(e).HTMLElement}function Nd(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,i=r(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Al(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return tc(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=o(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return t||Al(!1),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return tc(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Ad=a().createContext(null),Rd=function(){var e=document.body;return e||Al(!1),e},Dd={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Pd=function(e){return"rbd-announcement-"+e},kd=0,Bd={separator:"::"};function Fd(e,t){return void 0===t&&(t=Bd),dl((function(){return""+e+t.separator+kd++}),[t.separator,e])}var jd=a().createContext(null);function zd(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e})),t}var Hd,Wd,Gd=((Hd={})[13]=!0,Hd[9]=!0,Hd),Ud=function(e){Gd[e.keyCode]&&e.preventDefault()},Vd=function(){var e="visibilitychange";return"undefined"==typeof document?e:rc([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),Yd={type:"IDLE"};function $d(){}var Xd=((Wd={})[34]=!0,Wd[33]=!0,Wd[36]=!0,Wd[35]=!0,Wd);var qd={type:"IDLE"},Kd={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Zd(e,t){if(null==t)return!1;if(Boolean(Kd[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Zd(e,t.parentElement)}function Qd(e,t){var n=t.target;return!!_d(n)&&Zd(e,n)}var Jd=function(e){return fl(e.getBoundingClientRect()).center},eh=function(){var e="matches";return"undefined"==typeof document?e:rc([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function th(e,t){return null==e?null:e[eh](t)?e:th(e.parentElement,t)}function nh(e,t){return e.closest?e.closest(t):th(e,t)}function rh(e){e.preventDefault()}function oh(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function ih(e){var t=e.lockAPI,n=e.store,r=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=r.draggable.findById(o);return!!i&&!!i.options.isEnabled&&!!ed(n.getState(),o)}var ah=[function(e){var t=(0,i.useRef)(Yd),n=(0,i.useRef)(Ml),r=dl((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,s,{sourceEvent:t});if(o){t.preventDefault();var i={x:t.clientX,y:t.clientY};n.current(),u(o,i)}}}}}}),[e]),o=dl((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),a=hl((function(){n.current=Ol(window,[o,r],{passive:!1,capture:!0})}),[o,r]),s=hl((function(){"IDLE"!==t.current.type&&(t.current=Yd,n.current(),a())}),[a]),l=hl((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),c=hl((function(){var e=function(e){var t=e.cancel,n=e.completed,r=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,i=e.clientY;if(0===t){var a={x:n,y:i},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(a);if("PENDING"!==s.type&&Al(!1),l=s.point,c=a,Math.abs(c.x-l.x)>=5||Math.abs(c.y-l.y)>=5){var l,c;e.preventDefault();var u=s.actions.fluidLift(a);o({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Ud(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Al(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Vd,fn:t}]}({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Ol(window,e,{capture:!0,passive:!1})}),[l,s]),u=hl((function(e,n){"IDLE"!==t.current.type&&Al(!1),t.current={type:"PENDING",point:n,actions:e},c()}),[c]);Td((function(){return a(),function(){n.current()}}),[a])},function(e){var t=(0,i.useRef)($d),n=dl((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var o=e.findClosestDraggableId(n);if(o){var i=e.tryGetLock(o,l,{sourceEvent:n});if(i){n.preventDefault();var a=!0,s=i.snapLift();t.current(),t.current=Ol(window,function(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(Xd[r.keyCode]?r.preventDefault():Ud(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Vd,fn:n}]}(s,l),{capture:!0,passive:!1})}}}function l(){a||Al(!1),a=!1,t.current(),r()}}}}),[e]),r=hl((function(){t.current=Ol(window,[n],{passive:!1,capture:!0})}),[n]);Td((function(){return r(),function(){t.current()}}),[r])},function(e){var t=(0,i.useRef)(qd),n=(0,i.useRef)(Ml),r=hl((function(){return t.current}),[]),o=hl((function(e){t.current=e}),[]),a=dl((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,l,{sourceEvent:t});if(o){var i=t.touches[0],a={x:i.clientX,y:i.clientY};n.current(),h(o,a)}}}}}}),[e]),s=hl((function(){n.current=Ol(window,[a],{capture:!0,passive:!1})}),[a]),l=hl((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(qd),n.current(),s())}),[s,o]),c=hl((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),u=hl((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:r},o=Ol(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var o=e.touches[0],i={x:o.clientX,y:o.clientY};e.preventDefault(),n.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Al(!1);var o=e.touches[0];if(o&&o.force>=.15){var i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:Vd,fn:t}]}(t),e),i=Ol(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:Vd,fn:t}]}(t),e);n.current=function(){o(),i()}}),[c,r,l]),d=hl((function(){var e=r();"PENDING"!==e.type&&Al(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,o]),h=hl((function(e,t){"IDLE"!==r().type&&Al(!1);var n=setTimeout(d,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()}),[u,r,o,d]);Td((function(){return s(),function(){n.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(qd))}}),[r,s,o]),Td((function(){return Ol(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function sh(e){var t=e.contextId,n=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,s=[].concat(a?ah:[],o||[]),l=(0,i.useState)((function(){return function(){var e=null;function t(){e||Al(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Al(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=hl((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);Td((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();c(e,t),e=t}))}),[l,n,c]),Td((function(){return l.tryAbandon}),[l.tryAbandon]);for(var u=hl((function(e){return ih({lockAPI:l,registry:r,store:n,draggableId:e})}),[l,r,n]),d=hl((function(e,o,i){return function(e){var t=e.lockAPI,n=e.contextId,r=e.store,o=e.registry,i=e.draggableId,a=e.forceSensorStop,s=e.sourceEvent;if(!ih({lockAPI:t,store:r,registry:o,draggableId:i}))return null;var l=o.draggable.getById(i),c=function(e,t){var n="["+wd.contextId+'="'+e+'"]',r=rc(oc(document.querySelectorAll(n)),(function(e){return e.getAttribute(wd.id)===t}));return r&&_d(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(s&&!l.options.canDragInteractiveElements&&Qd(c,s))return null;var u=t.claim(a||Ml),d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}var p=function(e,t){oh({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function g(e){function n(){t.release(),d="COMPLETED"}function o(t,o){if(void 0===o&&(o={shouldBlockNextClick:!1}),e.cleanup(),o.shouldBlockNextClick){var i=Ol(window,[{eventName:"click",fn:rh,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}n(),r.dispatch(Su({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Al(!1)),r.dispatch(du(e.liftActionArgs)),d="DRAGGING",na({isActive:function(){return oh({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return oh({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=Tl((function(e){p((function(){return mu({client:e})}))}));return na({},g({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return p(yu)},moveRight:function(){return p(bu)},moveDown:function(){return p(Cu)},moveLeft:function(){return p(wu)}};return g({liftActionArgs:{id:i,clientSelection:Jd(c),movementMode:"SNAP"},cleanup:Ml,actions:e})},abort:function(){oh({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}}}({lockAPI:l,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:o,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})}),[t,l,r,n]),h=hl((function(e){return function(e,t){var n=function(e,t){var n,r=t.target;if(!((n=r)instanceof Od(n).Element))return null;var o=function(e){return"["+bd.contextId+'="'+e+'"]'}(e),i=nh(r,o);return i&&_d(i)?i:null}(e,t);return n?n.getAttribute(bd.draggableId):null}(t,e)}),[t]),f=hl((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),p=hl((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch(xu()))}),[l,n]),g=hl(l.isClaimed,[l]),v=dl((function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:g}}),[u,d,h,f,p,g]),m=0;m<s.length;m++)s[m](v)}var lh=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function ch(e){return e.current||Al(!1),e.current}function uh(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,o=e.nonce,s=e.dragHandleUsageInstructions,l=(0,i.useRef)(null),c=zd(e),u=hl((function(){return lh(c.current)}),[c]),d=function(e){var t=dl((function(){return Pd(e)}),[e]),n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),na(e.style,Dd),Rd().appendChild(e),function(){setTimeout((function(){var t=Rd();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),hl((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),h=function(e){var t=e.contextId,n=e.text,r=Fd("hidden-text",{separator:"-"}),o=dl((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e}),[r,t]);return(0,i.useEffect)((function(){var e=document.createElement("div");return e.id=o,e.textContent=n,e.style.display="none",Rd().appendChild(e),function(){var t=Rd();t.contains(e)&&t.removeChild(e)}}),[o,n]),o}({contextId:t,text:s}),f=function(e,t){var n=dl((function(){return Id(e)}),[e]),r=(0,i.useRef)(null),o=(0,i.useRef)(null),a=hl(Il((function(e){var t=o.current;t||Al(!1),t.textContent=e})),[]),s=hl((function(e){var t=r.current;t||Al(!1),t.textContent=e}),[]);Td((function(){(r.current||o.current)&&Al(!1);var i=Md(t),l=Md(t);return r.current=i,o.current=l,i.setAttribute(Cd+"-always",e),l.setAttribute(Cd+"-dynamic",e),Ld().appendChild(i),Ld().appendChild(l),s(n.always),a(n.resting),function(){var e=function(e){var t=e.current;t||Al(!1),Ld().removeChild(t),e.current=null};e(r),e(o)}}),[t,s,a,n.always,n.resting,e]);var l=hl((function(){return a(n.dragging)}),[a,n.dragging]),c=hl((function(e){a("DROP"!==e?n.userCancel:n.dropAnimating)}),[a,n.dropAnimating,n.userCancel]),u=hl((function(){o.current&&a(n.resting)}),[a,n.resting]);return dl((function(){return{dragging:l,dropping:c,resting:u}}),[l,c,u])}(t,o),p=hl((function(e){ch(l).dispatch(e)}),[]),g=dl((function(){return ha({publishWhileDragging:hu,updateDroppableScroll:pu,updateDroppableIsEnabled:gu,updateDroppableIsCombineEnabled:vu,collectionStarting:fu},p)}),[p]),v=function(){var e=dl(Nd,[]);return(0,i.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),m=dl((function(){return Ju(v,g)}),[v,g]),y=dl((function(){return yd(na({scrollWindow:td,scrollDroppable:m.scrollDroppable},ha({move:mu},p)))}),[m.scrollDroppable,p]),C=function(e){var t=(0,i.useRef)({}),n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(!1),a=hl((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),s=hl((function(t){var n=function(e,t){var n="["+bd.contextId+'="'+e+'"]',r=oc(document.querySelectorAll(n));if(!r.length)return null;var o=rc(r,(function(e){return e.getAttribute(bd.draggableId)===t}));return o&&_d(o)?o:null}(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),l=hl((function(e,t){n.current===e&&(n.current=t)}),[]),c=hl((function(){r.current||o.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=n.current;e&&s(e)})))}),[s]),u=hl((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(bd.draggableId)===e&&(n.current=e)}),[]);return Td((function(){return o.current=!0,function(){o.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]),dl((function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}}),[a,u,c,l])}(t),b=dl((function(){return Yu({announce:d,autoScroller:y,dimensionMarshal:m,focusMarshal:C,getResponders:u,styleMarshal:f})}),[d,y,m,C,u,f]);l.current=b;var w=hl((function(){var e=ch(l);"IDLE"!==e.getState().phase&&e.dispatch(xu())}),[]),x=hl((function(){var e=ch(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(dl((function(){return{isDragging:x,tryAbort:w}}),[x,w]));var E=hl((function(e){return ed(ch(l).getState(),e)}),[]),S=hl((function(){return qc(ch(l).getState())}),[]),I=dl((function(){return{marshal:m,focus:C,contextId:t,canLift:E,isMovementAllowed:S,dragHandleUsageInstructionsId:h,registry:v}}),[t,m,h,C,E,S,v]);return sh({contextId:t,store:b,registry:v,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,i.useEffect)((function(){return w}),[w]),a().createElement(jd.Provider,{value:I},a().createElement(ba,{context:Ad,store:b},e.children))}var dh=0;function hh(e){var t=dl((function(){return""+dh++}),[]),n=e.dragHandleUsageInstructions||"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n";return a().createElement(Rl,null,(function(r){return a().createElement(uh,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var fh=function(e){return function(t){return e===t}},ph=fh("scroll"),gh=fh("auto"),vh=function(e,t){return t(e.overflowX)||t(e.overflowY)},mh=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return vh(n,ph)||vh(n,gh)}(t)?t:e(t.parentElement)},yh=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ch=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},bh={passive:!1},wh={passive:!0},xh=function(e){return e.shouldPublishImmediately?bh:wh};function Eh(e){var t=(0,i.useContext)(e);return t||Al(!1),t}var Sh=function(e){return e&&e.env.closestScrollable||null};function Ih(){}var Th={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Lh=a().memo((function(e){var t=(0,i.useRef)(null),n=hl((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),r=e.animate,o=e.onTransitionEnd,s=e.onClose,l=e.contextId,c=(0,i.useState)("open"===e.animate),u=c[0],d=c[1];(0,i.useEffect)((function(){return u?"open"!==r?(n(),d(!1),Ih):t.current?Ih:(t.current=setTimeout((function(){t.current=null,d(!1)})),n):Ih}),[r,u,n]);var h=hl((function(e){"height"===e.propertyName&&(o(),"close"===r&&s())}),[r,s,o]),f=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,o=function(e){var t=e.placeholder;return e.isAnimatingOpenOnMount||"close"===e.animate?Th:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?_u.placeholder:null}}({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return a().createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})})),Mh=a().createContext(null),Oh=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return ta(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(a().PureComponent),_h=5e3,Nh=4500,Ah=function(e,t){return t?_u.drop(t.duration):e?_u.snap:_u.fluid},Rh=function(e,t){return e?t?Tu:Lu:null};function Dh(e){e.preventDefault()}var Ph=function(e,t){return e===t},kh=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function Bh(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Fh={mapped:{type:"SECONDARY",offset:Hl,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Bh(null)}},jh=cl((function(){var e,t,n,r=(e=Il((function(e,t){return{x:e,y:t}})),t=Il((function(e,t,n,r,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=Il((function(e,n,r,o,i,a,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,o,i,a,null)}}})),function(r,o){if(r.isDragging){if(r.critical.draggable.id!==o.draggableId)return null;var i=r.current.client.offset,a=r.dimensions.draggables[o.draggableId],s=$c(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(i.x,i.y),r.movementMode,a,o.isClone,s,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==o.draggableId)return null;var h=o.isClone,f=r.dimensions.draggables[o.draggableId],p=d.result,g=p.mode,v=kh(p),m=function(e){return e.combine?e.combine.draggableId:null}(p),y={duration:r.dropDuration,curve:Iu,moveTo:r.newHomeClientOffset,opacity:m?Tu:null,scale:m?Mu:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:y,draggingOver:v,combineWith:m,mode:g,forceShouldAnimate:null,snapshot:t(g,h,v,m,y)}}}return null}),o=function(){var e=Il((function(e,t){return{x:e,y:t}})),t=Il(Bh),n=Il((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(Hl,e,!0):null},o=function(t,o,i,a){var s=i.displaced.visible[t],l=Boolean(a.inVirtualList&&a.effected[t]),c=dc(i),u=c&&c.draggableId===t?o:null;if(!s){if(!l)return r(u);if(i.displaced.invisible[t])return null;var d=Vl(a.displacedBy.point),h=e(d.x,d.y);return n(h,u,!0)}if(l)return r(u);var f=i.displacedBy.point,p=e(f.x,f.y);return n(p,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:o(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||o(e,t)||Fh}}),{dropAnimationFinished:function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}}},null,{context:Ad,pure:!0,areStatePropsEqual:Ph})((function(e){var t=(0,i.useRef)(null),n=hl((function(e){t.current=e}),[]),r=hl((function(){return t.current}),[]),o=Eh(jd),a=o.contextId,s=o.dragHandleUsageInstructionsId,l=o.registry,c=Eh(Mh),u=c.type,d=c.droppableId,h=dl((function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}}),[e.draggableId,e.index,u,d]),f=e.children,p=e.draggableId,g=e.isEnabled,v=e.shouldRespectForcePress,m=e.canDragInteractiveElements,y=e.isClone,C=e.mapped,b=e.dropAnimationFinished;y||function(e){var t=Fd("draggable"),n=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,c=dl((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:l}}),[a,l,s]),u=hl((function(e){var t=o();return t||Al(!1),function(e,t,n){void 0===n&&(n=Hl);var r=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=wl(o,r),a=bl(i,n);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(n,t,e)}),[n,o]),d=dl((function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}}),[n,u,c,t]),h=(0,i.useRef)(d),f=(0,i.useRef)(!0);Td((function(){return r.draggable.register(h.current),function(){return r.draggable.unregister(h.current)}}),[r.draggable]),Td((function(){if(f.current)f.current=!1;else{var e=h.current;h.current=d,r.draggable.update(d,e)}}),[d,r.draggable])}(dl((function(){return{descriptor:h,registry:l,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:v,isEnabled:g}}),[h,l,r,m,v,g]));var w=dl((function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Dh}:null}),[a,s,p,g]),x=hl((function(e){"DRAGGING"===C.type&&C.dropping&&"transform"===e.propertyName&&b()}),[b,C]),E=dl((function(){var e=function(e){return"DRAGGING"===e.type?(r=(n=e).dimension.client,o=n.offset,i=n.combineWith,a=n.dropping,s=Boolean(i),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(n),u=(c=Boolean(a))?Ru(o,s):Au(o),{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Ah(l,a),transform:u,opacity:Rh(s,c),zIndex:c?Nh:_h,pointerEvents:"none"}):{transform:Au((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,n,r,o,i,a,s,l,c,u}(C),t="DRAGGING"===C.type&&C.dropping?x:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:w}}),[a,w,p,C,x,n]),S=dl((function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}}),[h.droppableId,h.id,h.index,h.type]);return f(E,C.snapshot,S)}));function zh(e){return Eh(Mh).isUsingCloneFor!==e.draggableId||e.isClone?a().createElement(jh,e):null}function Hh(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return a().createElement(zh,na({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var Wh=function(e,t){return e===t.droppable.type},Gh=function(e,t){return t.draggables[e.draggable.id]},Uh={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Al(!1),document.body}},Vh=cl((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=na({},e,{shouldAnimatePlaceholder:!1}),n=Il((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=Il((function(r,o,i,a,s,l){var c=s.descriptor.id;if(s.descriptor.droppableId===r){var u=l?{render:l,dragging:n(s.descriptor)}:null,d={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!o)return t;if(!a)return e;var h={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}}));return function(n,o){var i=o.droppableId,a=o.type,s=!o.isDropDisabled,l=o.renderClone;if(n.isDragging){var c=n.critical;if(!Wh(a,c))return t;var u=Gh(c,n.dimensions),d=$c(n.impact)===i;return r(i,s,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var h=n.completed;if(!Wh(a,h.critical))return t;var f=Gh(h.critical,n.dimensions);return r(i,s,kh(h.result)===i,$c(h.impact)===i,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!Wh(a,p.critical))return t;var g=$c(p.impact)===i,v=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),m=p.critical.droppable.id===i;return g?v?e:t:m?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Ad,pure:!0,areStatePropsEqual:Ph})((function(e){var t=(0,i.useContext)(jd);t||Al(!1);var n=t.contextId,r=t.isMovementAllowed,o=(0,i.useRef)(null),s=(0,i.useRef)(null),c=e.children,u=e.droppableId,d=e.type,h=e.mode,f=e.direction,p=e.ignoreContainerClipping,g=e.isDropDisabled,v=e.isCombineEnabled,m=e.snapshot,y=e.useClone,C=e.updateViewportMaxScroll,b=e.getContainerForClone,w=hl((function(){return o.current}),[]),x=hl((function(e){o.current=e}),[]);hl((function(){return s.current}),[]);var E=hl((function(e){s.current=e}),[]),S=hl((function(){r()&&C({maxScroll:qu()})}),[r,C]);!function(e){var t=(0,i.useRef)(null),n=Eh(jd),r=Fd("droppable"),o=n.registry,a=n.marshal,s=zd(e),l=dl((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,i.useRef)(l),u=dl((function(){return Il((function(e,n){t.current||Al(!1);var r={x:e,y:n};a.updateDroppableScroll(l.id,r)}))}),[l.id,a]),d=hl((function(){var e=t.current;return e&&e.env.closestScrollable?yh(e.env.closestScrollable):Hl}),[]),h=hl((function(){var e=d();u(e.x,e.y)}),[d,u]),f=dl((function(){return Tl(h)}),[h]),p=hl((function(){var e=t.current,n=Sh(e);e&&n||Al(!1),e.scrollOptions.shouldPublishImmediately?h():f()}),[f,h]),g=hl((function(e,r){t.current&&Al(!1);var o=s.current,i=o.getDroppableRef();i||Al(!1);var a,c={closestScrollable:mh(a=i),isFixedOnPage:Ch(a)},u={ref:i,descriptor:l,env:c,scrollOptions:r};t.current=u;var d=function(e){var t=e.ref,n=e.descriptor,r=e.env,o=e.windowScroll,i=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=xl(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,a=o+t.scrollWidth,s=pl({top:r,right:a,bottom:i,left:o},n.border);return ml({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=bl(u,o),h=function(){if(!c)return null;var e=xl(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:bl(e,o),scroll:yh(c),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,a=e.client,s=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=$u({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:Hl,displacement:Hl}}}}(),u="vertical"===i?bc:wc;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:o,axis:u,isEnabled:n,client:a,page:s,frame:c,subject:Jl({page:s,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:u,page:d,closest:h});return f}({ref:i,descriptor:l,env:c,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),h=c.closestScrollable;return h&&(h.setAttribute(Ed.contextId,n.contextId),h.addEventListener("scroll",p,xh(u.scrollOptions))),d}),[n.contextId,l,p,s]),v=hl((function(){var e=t.current,n=Sh(e);return e&&n||Al(!1),yh(n)}),[]),m=hl((function(){var e=t.current;e||Al(!1);var n=Sh(e);t.current=null,n&&(f.cancel(),n.removeAttribute(Ed.contextId),n.removeEventListener("scroll",p,xh(e.scrollOptions)))}),[p,f]),y=hl((function(e){var n=t.current;n||Al(!1);var r=Sh(n);r||Al(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),C=dl((function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:m,scroll:y}}),[m,g,v,y]),b=dl((function(){return{uniqueId:r,descriptor:l,callbacks:C}}),[C,l,r]);Td((function(){return c.current=b.descriptor,o.droppable.register(b),function(){t.current&&m(),o.droppable.unregister(b)}}),[C,l,m,b,a,o.droppable]),Td((function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),Td((function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}({droppableId:u,type:d,mode:h,direction:f,isDropDisabled:g,isCombineEnabled:v,ignoreContainerClipping:p,getDroppableRef:w});var I=a().createElement(Oh,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,o=e.animate;return a().createElement(Lh,{placeholder:r,onClose:t,innerRef:E,animate:o,contextId:n,onTransitionEnd:S})})),T=dl((function(){return{innerRef:x,placeholder:I,droppableProps:{"data-rbd-droppable-id":u,"data-rbd-droppable-context-id":n}}}),[n,u,I,x]),L=y?y.dragging.draggableId:null,M=dl((function(){return{droppableId:u,type:d,isUsingCloneFor:L}}),[u,L,d]);return a().createElement(Mh.Provider,{value:M},c(T,m),function(){if(!y)return null;var e=y.dragging,t=y.render,n=a().createElement(zh,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return l().createPortal(n,b())}())}));Vh.defaultProps=Uh;const Yh=(...e)=>(0,r.d5G)("switcher",...e),$h=e=>Yh("content","table"===e?"one-dimension":"three-dimensions"),Xh=(e,t)=>"table"===e||t===qi.Values,qh="item",Kh=({dragHandleProps:e,fieldType:t,id:n,displayName:r,selectable:s,checked:l,parentId:c,className:u,disabled:d,onVisibleItemChange:h})=>{const f=(0,i.useRef)(),[p,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{g(f.current.offsetWidth<f.current.scrollWidth)}),[]);const v=null!=r?r:n;return a().createElement("div",M(L({},e),{className:fi(Yh(qh),u,{unchecked:!l})}),s&&a().createElement(o.Checkbox,{disabled:d,checked:l,onChange:e=>null==h?void 0:h(t,e.target.checked,n,c)}),p?a().createElement(o.Tooltip,{title:v,placement:"bottomRight",overlayClassName:Yh("tooltip")},a().createElement("div",{className:Yh(qh,"text"),ref:f},v)):a().createElement("div",{className:Yh(qh,"text"),ref:f},v))};Kh.defaultProps={checked:!0,disabled:!1};const Zh=({fieldType:e,item:{id:t,displayName:n,checked:r=!0,children:o=[]},expandable:i,expandChildren:s,isDragDisabled:l,selectable:c,index:u,draggingItemId:d,onVisibleItemChange:h})=>a().createElement(Hh,{draggableId:t,index:u,isDragDisabled:l},((u,f)=>a().createElement("div",M(L({},u.draggableProps),{ref:u.innerRef,className:fi(Yh(c?"checkable-list":"normal-list"),{dragging:f.isDragging,"disable-dragging":l})}),a().createElement(Kh,{dragHandleProps:u.dragHandleProps,fieldType:e,id:t,displayName:n,checked:r,onVisibleItemChange:h,selectable:c,className:fi(c?"checkable-item":"normal-item",{"item-collapse":!s})}),i&&s&&!ko(o)&&d!==t&&a().createElement("div",{className:fi("child-items",{"item-hidden":!s})},o.map((n=>a().createElement(Kh,{key:n.id,id:n.id,fieldType:e,displayName:n.displayName,disabled:!r,checked:n.checked,parentId:t,selectable:c,onVisibleItemChange:h,className:"checkable-item"}))))))),Qh="dimension",Jh=a().memo((e=>{const t=e,{fieldType:n,crossRows:i=!1,selectable:s=!1,expandable:l=!1,expandText:c=(0,r.agQ)("展开子项"),allowEmpty:u=!0,items:d=[],droppableType:h,text:f,icon:p}=t,g=O(t,["fieldType","crossRows","selectable","expandable","expandText","allowEmpty","items","droppableType","text","icon"]),[v,m]=a().useState(!0),y=!u&&1===d.length;return a().createElement("div",{className:fi(Yh(Qh),{"long-dimension":i})},a().createElement("div",{className:Yh(Qh,"header")},a().createElement("div",{className:"title"},a().createElement(p,null)," ",a().createElement("span",null,f)),l&&a().createElement("div",{className:"expand-option"},a().createElement(o.Checkbox,{checked:v,onChange:e=>{m(e.target.checked)}}),a().createElement("span",{className:"description"},c))),a().createElement(Vh,{droppableId:n,type:h},((e,t)=>a().createElement("div",M(L({ref:e.innerRef},e.droppableProps),{className:fi(Yh(Qh,"items"),{[Yh(Qh,"items-highlight")]:t.isDraggingOver,[Yh(Qh,"long-items")]:i})}),d.map(((e,t)=>a().createElement(Zh,L({key:e.id,index:t,fieldType:n,item:e,expandable:l,expandChildren:v,selectable:s,isDragDisabled:y},g)))),e.placeholder))))}));Jh.displayName="Dimension";const ef="content",tf=a().memo((e=>{const t=e,{innerContentClassName:n,contentTitleText:i=(0,r.agQ)("行列切换"),resetText:s=(0,r.agQ)("恢复默认"),allowExchangeHeader:l=!0,onToggleVisible:c,onSubmit:d,sheetType:h}=t,f=O(t,["innerContentClassName","contentTitleText","resetText","allowExchangeHeader","onToggleVisible","onSubmit","sheetType"]),p=((e=!0)=>({[qi.Rows]:{text:(0,r.agQ)("行头"),icon:Fi,droppableType:e?Ki.Dimensions:Ki.Rows},[qi.Cols]:{text:(0,r.agQ)("列头"),icon:ji,droppableType:e?Ki.Dimensions:Ki.Cols},[qi.Values]:{text:(0,r.agQ)("值"),icon:zi,droppableType:Ki.Measures}}))(l),g=(e=>{return t=e,r={},n=ho(n="items"),po(t,(function(e,t,o){Je(r,t,n(e,t,o))})),r;var t,n,r})(f),[v,m]=a().useState(g),[y,C]=a().useState(null),b=(e,t,n,r)=>{const o=((e=[],t,n,r)=>{const o=L({},e.find((e=>e.id===(null!=r?r:n))));return r?o.children=No(o.children,(e=>M(L({},e),{checked:e.id===n?t:e.checked}))):(o.checked=t,o.children=No(o.children,(e=>M(L({},e),{checked:t})))),e.map((e=>e.id===o.id?o:e))})(v[e],t,n,r);m(M(L({},v),{[e]:o}))},w=Bo(g,v),x=Zi.filter((e=>"table"!==h||e===qi.Cols));return a().createElement(hh,{onBeforeCapture:e=>{C(e.draggableId)},onDragEnd:({destination:e,source:t})=>{if(C(null),!e)return;if(e.droppableId===t.droppableId&&e.index===t.index)return;const n=((e=[],t=[],n,r)=>{if(r.droppableId===n.droppableId){const e=[...t],[o]=e.splice(n.index,1);return e.splice(r.index,0,o),{[r.droppableId]:e}}const o=[...e],i=[...t],[a]=o.splice(n.index,1);return i.splice(r.index,0,a),{[n.droppableId]:o,[r.droppableId]:i}})(v[t.droppableId],v[e.droppableId],t,e);m(L(L({},v),n))}},a().createElement("div",{className:fi(n,Yh(ef))},a().createElement("header",{className:Yh(ef,"header")},i),a().createElement("main",{className:fi(Yh(ef,"main"),$h(h))},x.map((e=>a().createElement(Jh,L(M(L({},f[e]),{key:e,fieldType:e,items:v[e],crossRows:Xh(h,e),draggingItemId:y,onVisibleItemChange:b}),p[e]))))),a().createElement("footer",{className:Yh(ef,"footer")},a().createElement(o.Button,{type:"text",icon:a().createElement(u.Z,null),className:Yh(ef,"footer","reset-button"),disabled:w,onClick:()=>{m(g)}},s),a().createElement("div",{className:Yh(ef,"footer","actions")},a().createElement(o.Button,{className:"action-button",onClick:c},(0,r.agQ)("取消")),a().createElement(o.Button,{className:"action-button",type:"primary",disabled:w,onClick:()=>{c(),null==d||d((e=>{const t=e=>{const t=e=>hn(No(e,(e=>{var n=e,{children:r}=n,o=O(n,["children"]);return[L({},o),...t(r)]}))),n=t(e);return{items:n,hideItems:Io(n,(e=>!1===e.checked))}};return{[qi.Rows]:t(e[qi.Rows]),[qi.Cols]:t(e[qi.Cols]),[qi.Values]:t(e[qi.Values])}})(v))}},(0,r.agQ)("确定"))))))}));tf.displayName="SwitcherContent",tf.defaultProps={sheetType:"pivot"};const nf=e=>{var t=e,{title:n,popover:s,disabled:l}=t,c=O(t,["title","popover","disabled"]);const[u,d]=(0,i.useState)(!1),h=()=>{d((e=>!e))};return a().createElement(o.Popover,L({visible:!l&&u,content:a().createElement(tf,M(L({},c),{onToggleVisible:h})),onVisibleChange:h,trigger:"click",placement:"bottomLeft",destroyTooltipOnHide:!0},s),(0,i.isValidElement)(n)?n:a().createElement(o.Button,{className:Yh("entry-button"),size:"small",disabled:l,icon:a().createElement(Gi,null)},n||(0,r.agQ)("行列切换")))},rf=e=>{var t,n=e,{sheet:o,dataCfg:i,options:s}=n,l=O(n,["sheet","dataCfg","options"]);const[c,u]=a().useState((()=>{var e;return Ji(o,i,null==(e=null==s?void 0:s.interaction)?void 0:e.hiddenColumnFields)}));return ui((()=>{var e;u(Ji(o,i,null==(e=null==s?void 0:s.interaction)?void 0:e.hiddenColumnFields))}),[o,i,null==(t=null==s?void 0:s.interaction)?void 0:t.hiddenColumnFields]),a().createElement(nf,L(L({sheetType:Qi(o),onSubmit:e=>{var t;const{fields:n,hiddenColumnFields:i}=((e,t)=>{const n=e instanceof r.HZt;return{fields:Zi.reduce(((e,r)=>{var o,i,a,s;const l=null!=(i=null==(o=t[r])?void 0:o.items)?i:[],c=null!=(s=null==(a=t[r])?void 0:a.hideItems)?s:[];return e[r]=Io(l,(e=>!c.find((t=>!n&&t.id===e.id)))).map((e=>e.id)),e}),{}),hiddenColumnFields:n?t[qi.Cols].hideItems.map((e=>e.id)):void 0}})(o,e);o.setDataCfg({fields:L(L({},o.dataCfg.fields),n)}),i&&o.setOptions({interaction:{hiddenColumnFields:i}}),o.render(),u(((e,t,n=[],r=[])=>{const{fields:o,hiddenFields:i}=(e=>function(e,t,n){var r=ee(e)?gn:ti,o=arguments.length<3;return r(e,ho(t),n,o,vo)}(e,((e,t,n)=>(e.fields[n]=No(t.items,"id"),e.hiddenFields.push(...No(t.hideItems,"id")),e)),{fields:{},hiddenFields:[]}))(t);return Ji(e,{fields:o,meta:n},i.concat(r))})(o,e,null==(t=o.dataCfg)?void 0:t.meta,i))}},l),c))},of=a().memo((e=>{var t=e,{className:n,style:r,title:i,width:s,description:l,exportCfg:c,advancedSortCfg:u,switcherCfg:d,sheet:h,extra:f,dataCfg:p,options:g}=t,v=O(t,["className","style","title","width","description","exportCfg","advancedSortCfg","switcherCfg","sheet","extra","dataCfg","options"]);const m="s2-header";return a().createElement("div",L({className:fi(m,n),style:r},v),a().createElement("div",{className:`${m}-heading`},a().createElement("div",{className:`${m}-heading-left`},a().createElement("div",{className:`${m}-heading-title`},i)),a().createElement("div",{className:`${m}-heading-extra`},a().createElement(o.Space,{align:"center"},f,d.open&&a().createElement(rf,L({sheet:h,dataCfg:p,options:g},d)),u.open&&a().createElement(Xi,L({sheet:h},u)),c.open&&a().createElement(Ui,L({sheet:h},c))))),a().createElement("div",{className:`${m}-content`},l))}));of.displayName="Header",of.defaultProps={exportCfg:{open:!1},advancedSortCfg:{open:!1},switcherCfg:{open:!1}};const af=`${r.vhY}-pagination`,sf=({pagination:e,onShowSizeChange:t,onChange:n})=>{if(ko(e))return null;const{total:i,pageSize:s}=e,l=i/s>5;return a().createElement("div",{className:af},a().createElement(o.Pagination,M(L({size:"small",defaultCurrent:1,showSizeChanger:!0,showQuickJumper:l},e),{onShowSizeChange:t,onChange:n})),a().createElement("span",{className:`${af}-count`,title:`${(0,r.agQ)("共计")}${i}${(0,r.agQ)("条")}`},(0,r.agQ)("共计"),i||" - ",(0,r.agQ)("条")))};sf.displayName="S2Pagination";const lf=a().forwardRef(((e,t)=>{const{dataCfg:n,options:i,header:s}=e,{s2Ref:l,loading:c,containerRef:u,pagination:d,wrapperRef:h}=Ni(e),[f,p]=a().useState(l.current);return a().useEffect((()=>{t&&(t.current=l.current)}),[t,l]),a().useEffect((()=>p(l.current)),[p,l]),a().createElement(a().StrictMode,null,a().createElement(Ai.Provider,{value:f},a().createElement(o.Spin,{spinning:c,wrapperClassName:`${r.vhY}-spin`},a().createElement("div",{ref:h,className:`${r.vhY}-wrapper`},s&&a().createElement(of,M(L({},s),{sheet:l.current,style:{width:i.width},dataCfg:(0,r.Unm)(n),options:Mi(i)})),a().createElement("div",{ref:u,className:`${r.vhY}-container`}),d.showPagination&&a().createElement(sf,{pagination:d.pagination,onChange:d.onChange,onShowSizeChange:d.onShowSizeChange}),e.children))))}));lf.displayName="BaseSheet",lf.defaultProps={options:{},adaptive:!1,showPagination:!1};const cf=a().memo((e=>{const t=a().useRef();return a().createElement(lf,M(L({},e),{ref:t}))}));cf.displayName="TableSheet";class uf extends r.f4X{drawTextShape(){se(this.getMeta().fieldValue)?(0,r.qPk)(this):super.drawTextShape()}}const df=e=>new uf(e,e.spreadsheet),hf={dataCell:{text:{fontSize:12,fontFamily:r.utx,fill:"rgba(0, 0, 0, 0.85)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},minorText:{fontSize:11,fontFamily:r.utx,fill:"rgba(0, 0, 0, 0.45)",fontWeight:"normal",textBaseline:"middle",textAlign:"left"},derivedMeasureText:{mainUp:"#F46649",mainDown:"#2AA491",minorUp:"#f9ae9e",minorDown:"#a9dad2"},bolderText:{fontSize:12,fontFamily:r.utx,fill:"rgba(0, 0, 0, 1)",fontWeight:(0,r.EDF)()?"bold":520,textBaseline:"middle",textAlign:"left"}}},ff=a().memo((e=>{const t=e,{options:n,themeCfg:o}=t,i=O(t,["options","themeCfg"]),s=a().useRef(),l=a().useMemo((()=>(0,r._Ge)(n,{dataCell:df,showDefaultHeaderActionIcon:!1,style:{colCfg:{hideMeasureColumn:!0}}})),[n]),c=a().useMemo((()=>(0,r._Ge)({},o,{theme:hf})),[o]);return a().createElement(lf,L({options:l,themeCfg:c,ref:s},i))}));ff.displayName="GridAnalysisSheet";class pf extends r.X0t{constructor(e,t,n){super(e,t,n)}drawTextShape(){const e=this.getMeta(),t=(0,r.D6R)(null==e?void 0:e.value);if(!ee(t))return super.drawTextShape();const{formattedValue:n}=this.getFormattedFieldValue(),o=n!==(null==e?void 0:e.value)?[[n]]:[t];(0,r.qPk)(this,{values:o},!1)}}class gf extends r.f4X{drawTextShape(){se(this.getMeta().fieldValue)?(0,r.qPk)(this):super.drawTextShape()}}class vf extends r.O9R{processDataCfg(e){e.fields.valueInCols=!1;const t=e,{data:n,meta:o}=t,i=O(t,["data","meta"]),a=[];Eo(n,(e=>{let t=!1;var n;null==(n=e)||fo(n,xo(((n,o)=>{se(n)&&(a.push(M(L({},e),{[r.CoU]:o,[r.__x]:n})),t=!0)})),Pt),t||a.push(e)}));const s=this.processMeta(o,(0,r.agQ)("数值"));return M(L({data:oi(a),meta:s},i),{fields:M(L({},e.fields),{rows:[r.CoU]})})}}const mf=({cell:e,label:t})=>{const n=e.getMeta();if(n.isLeaf&&0!==n.level)return null;const r=n.spreadsheet.dataSet.getFieldName(n.field),o=we(t)?t(e,r):t,i=null!=o?o:r;return a().createElement("div",{className:fi(k(),k("col"))},a().createElement("span",{className:k("name")},i),a().createElement("span",{className:k("value")},n.value))},yf=({cell:e,label:t,showOriginalValue:n,renderDerivedValue:o})=>{var i;const s=e.getMeta(),l=null==s?void 0:s.fieldValue,c=(e=>{var t;const n=Mo(e.spreadsheet.getRowNodes(),{rowIndex:e.rowIndex});return e.spreadsheet.dataSet.getFieldDescription(null==n?void 0:n.field)||(null==(t=null==n?void 0:n.extra)?void 0:t.description)})(s),u=(e=>{const t=Mo(e.spreadsheet.getRowNodes(),{rowIndex:e.rowIndex});return e.spreadsheet.dataSet.getFieldName((null==t?void 0:t.valueFiled)||(null==t?void 0:t.value))})(s),d=we(t)?t(e,u):t,h=null!=d?d:u,f=(e=>Mo(e.spreadsheet.getColumnNodes(),{colIndex:e.colIndex,isLeaf:!0}))(s),[,...p]=a().useMemo((()=>{try{return JSON.parse(null==f?void 0:f.value)}catch{return[]}}),[null==f?void 0:f.value]),{placeholder:g,style:v}=s.spreadsheet.options,m=null==(i=v.cellCfg)?void 0:i.valuesCfg,[y,...C]=Oo(null==l?void 0:l.values)||[l],[b,...w]=Oo(sn(l,null==m?void 0:m.originalValueField))||[y],x=(0,r.o3g)(s,g),E=(null==m?void 0:m.showOriginalValue)||n;return a().createElement("div",{className:fi(k(),k("data"))},a().createElement("div",{className:k("header")},a().createElement("span",{className:"header-label"},h),a().createElement("span",null,null!=y?y:x)),E&&a().createElement("div",{className:k("original-value")},Fo(b)?x:b),!ko(C)&&a().createElement(a().Fragment,null,a().createElement("div",{className:k("divider")}),a().createElement("ul",{className:k("derived-values")},C.map(((t,n)=>{var i;const s=Fo(t)||""===t,l=(0,r.Pyr)(t),c=!s&&!l,u=w[n];return a().createElement("li",{className:"derived-value-item",key:n},a().createElement("span",{className:"derived-value-label"},p[n]),a().createElement("span",{className:fi("derived-value-group",{"derived-value-trend-up":l,"derived-value-trend-down":c})},!s&&a().createElement("span",{className:"derived-value-trend-icon"}),null!=(i=null==o?void 0:o(t,u,e))?i:a().createElement("span",{className:"derived-value-content"},null!=t?t:x)))})))),c&&a().createElement("div",{className:k("description")},(0,r.agQ)("说明"),": ",c))};yf.defaultProps={showOriginalValue:!1};const Cf=({cell:e,label:t})=>{const{field:n,spreadsheet:o,value:i,extra:s}=e.getMeta(),l=we(t)?t(e,i):t,c=null!=l?l:i,u=o.dataSet.getFieldDescription(n)||(null==s?void 0:s.description);return a().createElement("div",{className:fi(k(),k("row"))},a().createElement("div",{className:k("value")},c),u&&a().createElement("div",{className:k("description")},(0,r.agQ)("说明"),": ",u))},bf=a().memo((e=>{const t=e,{options:n,themeCfg:o,dataCfg:i}=t,s=O(t,["options","themeCfg","dataCfg"]),l=a().useRef(),c=a().useMemo((()=>{var e,t,r;if(ko(i))return{};let o=!1,s="tree";ko(null==(e=null==i?void 0:i.fields)?void 0:e.rows)&&!ko(null==(t=null==i?void 0:i.fields)?void 0:t.customTreeItems)&&(s="customTree"),1===ni(null==(r=null==i?void 0:i.fields)?void 0:r.values)&&"customTree"!==n.hierarchyType&&(o=!0);const l=e=>(t,r)=>{var o,i,a,s;const l=null!=(s=null==(i=null==(o=n.tooltip)?void 0:o[e])?void 0:i.content)?s:null==(a=n.tooltip)?void 0:a.content;return we(l)?null==l?void 0:l(t,r):l};return{dataCell:e=>new gf(e,e.spreadsheet),colCell:(e,t,n)=>new pf(e,t,n),dataSet:e=>new vf(e),showDefaultHeaderActionIcon:!1,hierarchyType:s,style:{colCfg:{hideMeasureColumn:o}},interaction:{autoResetSheetStyle:!0,brushSelection:!1,selectedCellMove:!1,multiSelection:!1,rangeSelection:!1},tooltip:{operation:{hiddenColumns:!0},row:{content:(e,t)=>{var n;return null!=(n=l("row")(e,t))?n:a().createElement(Cf,{cell:e})}},col:{content:(e,t)=>{var n;return null!=(n=l("row")(e,t))?n:a().createElement(mf,{cell:e})}},data:{content:(e,t)=>{const n=e.getMeta().fieldValue,r=l("data")(e,t);return Fo(r)?ee(null==n?void 0:n.values)?a().createElement(yf,{cell:e}):a().createElement(a().Fragment,null):r}}}}}),[i,n.hierarchyType,n.tooltip]),u=a().useMemo((()=>{var e;const t={fields:{valueInCols:ni(null==(e=null==i?void 0:i.fields)?void 0:e.values)<=1}};return(0,r._Ge)(i,t)}),[i]),d=a().useMemo((()=>(0,r._Ge)(n,c)),[n,c]);return a().createElement(lf,L({options:d,themeCfg:o,dataCfg:u,ref:l},s))}));bf.displayName="StrategySheet";const wf=e=>{var t=e,{className:n,titleText:s=(0,r.agQ)("选择下钻维度"),clearButtonText:l=(0,r.agQ)("恢复默认"),searchText:c=(0,r.agQ)("搜索字段"),extra:u,drillFields:d,dataSet:h,disabledFields:f,getDrillFields:p,setDrillFields:g}=t,v=O(t,["className","titleText","clearButtonText","searchText","extra","drillFields","dataSet","disabledFields","getDrillFields","setDrillFields"]);const m={text:a().createElement(Wi,null),location:a().createElement(ki,null),date:a().createElement(Di,null)},y=()=>h.map((e=>(e.disabled=!(!f||!f.includes(e.value)),e))),[C,b]=(0,i.useState)(y()),w=e=>{const{value:t}=e.target;if(t){const e=new RegExp(t,"gi"),n=h.filter((t=>e.test(t.name)));b([...n])}else b([...h])};return(0,i.useEffect)((()=>{b(y())}),[f]),a().createElement(o.ConfigProvider,null,a().createElement("div",L({className:fi(D,n)},v),a().createElement("header",{className:`${D}-header`},a().createElement("div",null,s),a().createElement(o.Button,{type:"link",disabled:ko(d),onClick:e=>{e.stopPropagation(),p&&p([]),g&&g([])}},l)),a().createElement(o.Input,{className:`${D}-search`,placeholder:c,onChange:w,onPressEnter:w,prefix:a().createElement(Hi,null),allowClear:!0}),ko(C)&&a().createElement(o.Empty,{imageStyle:{height:"64px"},className:`${D}-empty`}),u,a().createElement(o.Menu,{className:`${D}-menu`,selectedKeys:d,onSelect:e=>{const t=null==e?void 0:e.selectedKeys;p&&p([...t]),g&&g([...t])}},C.map((e=>a().createElement(o.Menu.Item,{key:e.value,disabled:e.disabled,className:`${D}-menu-item`,icon:e.icon?e.icon:m[e.type]},e.name))))))},xf=["drillConfig","displayCondition","drillItemsNum"];function Ef(e,t,n,r,o){if(r){const e=document.querySelector(`#${r}`);if(e&&s.unmountComponentAtNode(e)&&e.parentNode)return void e.parentNode.removeChild(e)}const a=document.createElement("div");let l,c;function u(...e){s.unmountComponentAtNode(a)&&a.parentNode&&(a.parentNode.removeChild(a),o&&o())}function d(...e){u.call(null,...e),c()}r&&(a.id=r),document.body.appendChild(a);const h=new Promise(((e,t)=>{l=e,c=t})).then((e=>(d(),e)));return setTimeout((()=>{s.render(i.createElement(Ai.Provider,{value:n},i.createElement(e,{onCancel:d,resolver:l,params:t})),a)})),h}function Sf(e){const{params:t,resolver:n}=e,r=Ri(),{event:s,onChange:l,CustomComponent:c}=t,u=s.target.cfg.parent,{left:d,top:h,width:f,height:p}=(0,i.useMemo)((()=>{const e=(null==r?void 0:r.container.cfg.container).getBoundingClientRect();return{left:window.scrollX+e.left,top:window.scrollY+e.top,width:e.width,height:e.height}}),[null==r?void 0:r.container.cfg.container]),{x:g,y:v,width:m,height:y}=(0,i.useMemo)((()=>{const e=r.facet.getScrollOffset(),t=ei(u.getMeta(),["x","y","width","height"]);return t.x-=e.scrollX||0,t.y-=(e.scrollY||0)-(r.getColumnNodes()[0]||{height:0}).height,t}),[u,r]),[C,b]=(0,i.useState)(u.getMeta().fieldValue),w=(0,i.useRef)(null),x=(0,i.useRef)(null);(0,i.useEffect)((()=>{setTimeout((()=>{x.current&&x.current.click(),w.current&&w.current.focus()}))}),[]);const E=()=>{const{rowIndex:e,valueField:t}=u.getMeta();r.dataSet.originData[e][t]=C,r.render(!0),l&&l(r.dataSet.originData),n(!0)},S=a().useMemo((()=>({left:g,top:v,width:m,height:y,zIndex:1e3})),[]);return a().createElement("div",{ref:x,style:{zIndex:500,position:"absolute",overflow:"hidden",left:d,top:h,width:f,height:p}},c?a().createElement(c,{cell:u,spreadsheet:r,value:C,style:S,onChange:e=>{b(e)},onSave:E}):a().createElement(o.Input.TextArea,{required:!0,style:S,className:"s2-edit-cell",value:C,ref:w,onChange:e=>{b(e.target.value)},onBlur:E,onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),E())}}))}function If({onChange:e,CustomComponent:t}){const n=Ri(),o=(0,i.useCallback)((r=>{Ef(Sf,{event:r,onChange:e,CustomComponent:t},n)}),[n]);return _i(r.ch4.DATA_CELL_DOUBLE_CLICK,o,n),null}function Tf({onCopyFinished:e}){const t=Ri(),[n,o]=(0,i.useState)(),[s,l]=(0,i.useState)({right:0,bottom:0}),[c,u]=(0,i.useState)(),d=(e,n)=>{const r=ei(n.getMeta(),["x","y","width","height","fieldValue"]),o=t.facet.getScrollOffset(),i=e.x,a=e.y,s=(null==o?void 0:o.scrollY)-(t.getColumnNodes()[0]||{height:0}).height,l=r.x-o.scrollX+r.width+4,c=r.x-o.scrollX,u=r.y-s+r.height+4,d=r.y-s;return l>=i&&c<i&&u>=a&&d<a},h=e=>{const n=t.getCanvasElement().getBoundingClientRect();return t.interaction.getPanelGroupAllDataCells().find((t=>d({y:e.y-n.y,x:e.x-n.x},t)))},f=(e,n)=>{const r=e.getMeta(),o=null==n?void 0:n.getMeta(),i=Math.min(r.colIndex,o.colIndex),a=Math.max(r.colIndex,o.colIndex),s=Math.max(r.rowIndex,o.rowIndex),l=Math.min(r.rowIndex,o.rowIndex);return t.interaction.getPanelGroupAllDataCells().filter((e=>{const t=e.getMeta();return t.rowIndex<=s&&t.rowIndex>=l&&t.colIndex<=a&&t.colIndex>=i}))},p={x:0,y:0},g=function(e,t,n){var r=!0,o=!0;return se(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),wo(e,10,{leading:r,maxWait:10,trailing:o})}((e=>{if(!n)return;let o=h(e),i=e.x-c.x,a=e.y-c.y;(e=>{const n=t.getCanvasElement().getBoundingClientRect(),{frozenRow:r}=t.facet.frozenGroupInfo,o=n.x,i=n.x+n.width,a=n.y+r.height,s=n.y+n.height;return e.x<=i&&e.x>=o&&e.y<=s&&e.y>=a})(e)?(p.x=e.x,p.y=e.y):(o=h(p),i=p.x-c.x,a=p.y-c.y),l({right:i,bottom:a});const s=f(n,o);t.interaction.changeState({cells:s.map((e=>e.getMeta())),stateName:r._61.PREPARE_SELECT,force:!0})})),v=i=>{let a=h(i);if(!n)return;a||(a=h(p));const s=t.dataSet.originData,c=f(n,a),{fieldValue:u}=n.getMeta(),d=c.map((e=>{const{rowIndex:t,valueField:n}=e.getMeta();return s[t]&&void 0!==typeof s[t][n]&&(s[t][n]=u),e}));t.interaction.changeState({cells:d.map((e=>e.getMeta())),stateName:r._61.PREPARE_SELECT,force:!0}),t.render(!0),l({right:0,bottom:0}),t.off(r.ch4.GLOBAL_MOUSE_MOVE,g),t.off(r.ch4.GLOBAL_MOUSE_UP,v),o(void 0),null==e||e()};(0,i.useEffect)((()=>{n&&(t.on(r.ch4.GLOBAL_MOUSE_MOVE,g),t.on(r.ch4.GLOBAL_MOUSE_UP,v))}),[n]);const m=e=>{if("spreadsheet-drag-copy-point"!==sn(e,"target.id"))return;const n=e.target.getBoundingClientRect(),{top:r,left:i}=sn(e,"target.style",{}),a=t.interaction.getPanelGroupAllDataCells().find((e=>d({y:parseFloat(r),x:parseFloat(i)},e)));u({x:n.x,y:n.y}),o(a)};return(0,i.useEffect)((()=>{const e=document.getElementById("spreadsheet-drag-copy-point");return e&&t&&e.addEventListener("mousedown",m),()=>{e.removeEventListener("mousedown",m)}}),[t]),a().createElement("div",{className:`${r.vhY}-drag-copy-mask`,style:{right:s.right>0?s.right:0,bottom:s.bottom>0?s.bottom:0,left:s.right<=0?s.right:0,top:s.bottom<=0?s.bottom:0,width:Math.abs(s.right),height:Math.abs(s.bottom)}})}function Lf(e){const t=Ri(),[n,o]=(0,i.useState)({scrollX:-999,scrollY:-999,width:8,overflow:!0}),[s,l]=(0,i.useState)({left:-999,top:-999}),[c,u]=(0,i.useState)(),d=()=>{if(t){const e=t.facet.getScrollOffset(),{frozenCol:r,frozenRow:i}=t.facet.frozenGroupInfo,a=t.getCanvasElement().getBoundingClientRect(),s=null==c?void 0:c.getMeta();if(!Bo(e,n))if(s){const{verticalBorderWidth:t,horizontalBorderWidth:n}=c.getStyle().cell,l=s.width+s.x,u=s.height+s.y,d=l-e.scrollX-a.width+2*(t+n);let h=!0;h=r.width>=l-e.scrollX-2*n||i.height>=u-e.scrollY-2*t||a.width<=l-e.scrollX-2*n||a.height<=u-e.scrollY+i.height,o(M(L({},e),{overflow:h,width:8-(d>0?d:0)}))}else o({scrollX:-999,scrollY:-999,overflow:!0})}};(0,i.useEffect)((()=>(d(),t&&(t.off(r.ch4.GLOBAL_SCROLL,d),t.on(r.ch4.GLOBAL_SCROLL,d)),()=>{null==t||t.off(r.ch4.GLOBAL_SCROLL,d)})),[c]),(0,i.useEffect)((()=>{c&&u(void 0)}),[null==t?void 0:t.dataSet.sortParams,null==t?void 0:t.dataSet.filterParams]),(0,i.useEffect)((()=>{if((null==t?void 0:t.container.cfg.container)&&t&&c){const e=ei(c.getMeta(),["x","y","width","height","fieldValue"]);e.x-=null==n?void 0:n.scrollX,e.y-=(null==n?void 0:n.scrollY)-(t.getColumnNodes()[0]||{height:0}).height,l({left:e.x+e.width-4,top:e.y+e.height-4})}}),[n,c]);const h=()=>{u(void 0)};return _i(r.ch4.COL_CELL_CLICK,h,t),_i(r.ch4.ROW_CELL_CLICK,h,t),_i(r.ch4.CORNER_CELL_CLICK,h,t),_i(r.ch4.DATA_CELL_BRUSH_SELECTION,h,t),_i(r.ch4.DATA_CELL_CLICK,(e=>{const n=e.target.cfg.parent,r=t.interaction.isSelectedCell(n);u(r?n:void 0)}),t),a().createElement("div",{id:"spreadsheet-drag-copy-point",className:`${r.vhY}-drag-copy-point`,style:{display:n.overflow?"none":"block",left:s.left,top:s.top,width:n.width}},a().createElement(Tf,{onCopyFinished:h}))}const Mf=a().memo((e=>a().createElement(lf,M(L({},e),{sheetType:"table"}),a().createElement(If,{onChange:()=>{}}),a().createElement(Lf,null))));Mf.displayName="EditableSheet";const Of=a().memo((e=>{const t=e,{options:n}=t,o=O(t,["options"]),{dataCfg:s,partDrillDown:l}=o,c=a().useRef(),[u,d]=a().useState([]),h=(f=({sheetInstance:e,cacheDrillFields:t,disabledFields:n,event:o})=>{const i=a().createElement(wf,M(L({},null==l?void 0:l.drillConfig),{setDrillFields:d,drillFields:t,disabledFields:n}));if(o){const{showTooltip:t}=(0,r.Hu7)(e,o);if(!t)return;e.showTooltip({position:{x:o.clientX,y:o.clientY},content:i})}},(p=(0,i.useRef)(f)).current=f,p);var f,p;const g=a().useMemo((()=>((e,t,n)=>{var o;const i=(null==(o=null==e?void 0:e.headerActionIcons)?void 0:o.length)?[...e.headerActionIcons]:[];if(!ko(t)){const e={belongsCell:"rowCell",iconNames:["DrillDownIcon"],defaultHide:!0,displayCondition:t.displayCondition||si,action:e=>{const{iconName:t,meta:o,event:i}=e;"DrillDownIcon"===t&&(o.spreadsheet.store.set("drillDownNode",o),(e=>{const{meta:t,event:n,callback:o}=e,{spreadsheet:i}=t;i.store.set("drillDownNode",t);const{drillDownDataCache:a,drillDownCurrentCache:s}=ai(i,t),l=(null==s?void 0:s.drillField)?[null==s?void 0:s.drillField]:[],c=[];a.forEach((e=>{t.id.includes(e.rowId)&&t.id!==e.rowId&&c.push(e.drillField)})),n&&i.emit(r.ch4.GLOBAL_ACTION_ICON_CLICK,n),o({sheetInstance:i,cacheDrillFields:l,disabledFields:c,event:n})})({meta:o,event:i,callback:n}))}};i.push(e)}return M(L({},e),{headerActionIcons:i})})(n,l,(e=>h.current(e)))),[n,l,h]),v=e=>{var t;null==(t=c.current)||t.clearDrillDownData(e)};a().useEffect((()=>{var e,t,n;null==(e=c.current)||e.hideTooltip(),ko(u)?v(null==(n=null==(t=c.current)?void 0:t.store.get("drillDownNode"))?void 0:n.id):(e=>{const{fetchData:t,spreadsheet:n,drillFields:r,drillItemsNum:o=-1}=e;n.store.set("drillItemsNum",o);const i=n.store.get("drillDownNode"),{drillDownDataCache:a,drillDownCurrentCache:s}=ai(n,i);let l=Sr(a,4);s&&(l=Io(a,(e=>e.rowId!==i.id))),t&&t(i,r).then((e=>{const{drillData:t,drillField:r}=e;if(n.dataSet.transformDrillDownData(r,t,i),!ko(t)){const e=i.level+1,o={rowId:i.id,drillLevel:e,drillData:t,drillField:r};l.push(o),n.store.set("drillDownDataCache",l)}n.interaction.reset(),n.render(!1)}))})({rows:s.fields.rows,drillFields:u,fetchData:null==l?void 0:l.fetchData,drillItemsNum:null==l?void 0:l.drillItemsNum,spreadsheet:c.current})}),[u]),a().useEffect((()=>{var e;se(null==l?void 0:l.clearDrillDown)&&v(null==(e=null==l?void 0:l.clearDrillDown)?void 0:e.rowId)}),[null==l?void 0:l.clearDrillDown]);const m=(e=>{const t=a().useRef(e),n=xf.map((t=>null==e?void 0:e[t]));return a().useCallback((n=>{const r=t.current,o=!!xf.find((t=>!Object.is(null==e?void 0:e[t],null==r?void 0:r[t])));return t.current=e,{reloadData:o||n.reloadData,reBuildDataSet:n.reBuildDataSet}}),n)})(l);return a().createElement(lf,M(L({},o),{options:g,onSheetUpdate:m,ref:c}))}));Of.displayName="PivotSheet";const _f=a().forwardRef(((e,t)=>{const{sheetType:n}=e,i=a().useMemo((()=>M(L({},e),{onMounted:n=>{var r;t&&(t.current=n),null==(r=e.onMounted)||r.call(e,n)}})),[e,t]),s=a().useMemo((()=>{switch(n){case"table":return a().createElement(cf,L({},i));case"gridAnalysis":return a().createElement(ff,L({},i));case"strategy":return a().createElement(bf,L({},i));case"editable":return a().createElement(Mf,L({},i));default:return a().createElement(Of,L({},i))}}),[n,i]),l="zh_CN"===(0,r.VQD)()?g:C;return a().createElement(a().StrictMode,null,a().createElement(o.ConfigProvider,{locale:l},s))})),Nf=a().memo(_f);Nf.displayName="SheetComponent"},153:(e,t,n)=>{"use strict";n.d(t,{AfN:()=>dw,CoU:()=>ri,D6R:()=>jx,EDF:()=>Cw,F1h:()=>dE,HZt:()=>NL,Hu7:()=>TT,IZo:()=>vT,LRf:()=>oE,N6r:()=>LL,NO_:()=>fw,O9R:()=>AT,Pyr:()=>Rx,TA7:()=>OL,Teh:()=>ii,Unm:()=>TS,VQD:()=>uw,WNh:()=>oa,X0t:()=>eS,_61:()=>ji,_Ge:()=>IS,__x:()=>ni,agQ:()=>hw,c8d:()=>hE,ch4:()=>Jo,d5G:()=>MT,f4X:()=>bE,o3g:()=>kx,q7_:()=>Xw,qPk:()=>Bx,utx:()=>sw,vQq:()=>rE,vhY:()=>Ai}),e=n.hmd(e);var r=n(656),o=Object.freeze({__proto__:null,get Base(){return yo},get Circle(){return Co},get Ellipse(){return wo},get Image(){return Eo},get Line(){return To},get Marker(){return Oo},get Path(){return jo},get Polygon(){return Ho},get Polyline(){return Go},get Rect(){return Vo},get Text(){return $o}}),i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},l=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},c={}.toString,u=function(e,t){return c.call(e)==="[object "+t+"]"},d=function(e){return u(e,"Function")},h=function(e){return null==e},f=function(e){return Array.isArray?Array.isArray(e):u(e,"Array")},p=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function g(e,t){if(e)if(f(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(p(e))for(var o in e)if(e.hasOwnProperty(o)&&!1===t(e[o],o))break}var v=function(e){return"object"==typeof e&&null!==e},m=function(e){if(f(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},y=function(e){if(f(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])},C=function(e){return u(e,"String")},b=function(e){return u(e,"Number")},w=function(e,t){return(e%t+t)%t},x=Math.PI/180,E=function(e){return x*e},S=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return g(e,(function(n,r){d(e)&&"prototype"===r||t.push(n)})),t},I=function(e){var t=function(e){return h(e)?"":e.toString()}(e);return t.charAt(0).toUpperCase()+t.substring(1)};function T(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function L(e,t,n,r){return t&&T(e,t),n&&T(e,n),r&&T(e,r),e}var M,O=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(C(e)||C(t))return!1;if(l(e)||l(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=O(e[r],t[r]));r++);return n}if(v(e)||v(t)){var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(n=!0,r=0;r<o.length&&(n=O(e[o[r]],t[o[r]]));r++);return n}return!1},_={},N=function(){};!function(e,t){if(!d(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return a.set(i,s),s};n.cache=new Map}((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return M||(M=document.createElement("canvas").getContext("2d")),M.font=[i,a,o,n+"px",r].join(" "),M.measureText(C(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([e],S(t)).join("")}));var A="\t\n\v\f\r   ᠎             　\u2028\u2029",R=new RegExp("([a-z])["+A+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+A+"]*,?["+A+"]*)+)","ig"),D=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+A+"]*,?["+A+"]*","ig"),P=function(e){if(!e)return null;if(f(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(R,(function(r,o,i){var a=[],s=o.toLowerCase();if(i.replace(D,(function(e,t){t&&a.push(+t)})),"m"===s&&a.length>2&&(n.push([o].concat(a.splice(0,2))),s="l",o="m"===o?"l":"L"),"o"===s&&1===a.length&&n.push([o,a[0]]),"r"===s)n.push([o].concat(a));else for(;a.length>=t[s]&&(n.push([o].concat(a.splice(0,t[s]))),t[s]););return e})),n},k=function(e,t){for(var n=[],r=0,o=e.length;o-2*!t>r;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4===r?i[3]={x:+e[0],y:+e[1]}:o-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n},B=function(e,t,n,r,o){var i=[];if(null===o&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==o){var a=Math.PI/180,s=e+n*Math.cos(-r*a),l=e+n*Math.cos(-o*a);i=[["M",s,t+n*Math.sin(-r*a)],["A",n,n,0,+(o-r>180),0,l,t+n*Math.sin(-o*a)]]}else i=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return i},F=function(e){if(!(e=P(e))||!e.length)return[["M",0,0]];var t,n,r=[],o=0,i=0,a=0,s=0,l=0;"M"===e[0][0]&&(a=o=+e[0][1],s=i=+e[0][2],l++,r[0]=["M",o,i]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,d=void 0,h=l,f=e.length;h<f;h++){if(r.push(u=[]),(t=(d=e[h])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+d[6]+o,u[7]=+d[7]+i;break;case"V":u[1]=+d[1]+i;break;case"H":u[1]=+d[1]+o;break;case"R":for(var p=2,g=(n=[o,i].concat(d.slice(1))).length;p<g;p++)n[p]=+n[p]+o,n[++p]=+n[p]+i;r.pop(),r=r.concat(k(n,c));break;case"O":r.pop(),(n=B(o,i,d[1],d[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(B(o,i,d[1],d[2],d[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+d[1]+o,s=+d[2]+i;break;default:for(p=1,g=d.length;p<g;p++)u[p]=+d[p]+(p%2?o:i)}else if("R"===t)n=[o,i].concat(d.slice(1)),r.pop(),r=r.concat(k(n,c)),u=["R"].concat(d.slice(-2));else if("O"===t)r.pop(),(n=B(o,i,d[1],d[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(B(o,i,d[1],d[2],d[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var v=0,m=d.length;v<m;v++)u[v]=d[v];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":o=+a,i=+s;break;case"H":o=u[1];break;case"V":i=u[1];break;case"M":a=u[u.length-2],s=u[u.length-1];break;default:o=u[u.length-2],i=u[u.length-1]}}return r},j=function(e,t,n,r){return[e,t,n,r,n,r]},z=function(e,t,n,r,o,i){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*o+s*n,a*i+s*r,o,i]},H=function(e,t,n,r,o,i,a,s,l,c){n===r&&(n+=1);var u,d,h,f,p,g=120*Math.PI/180,v=Math.PI/180*(+o||0),m=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)d=c[0],h=c[1],f=c[2],p=c[3];else{e=(u=y(e,t,-v)).x,t=u.y,s=(u=y(s,l,-v)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var C=(e-s)/2,b=(t-l)/2,w=C*C/(n*n)+b*b/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var x=n*n,E=r*r,S=(i===a?-1:1)*Math.sqrt(Math.abs((x*E-x*b*b-E*C*C)/(x*b*b+E*C*C)));f=S*n*b/r+(e+s)/2,p=S*-r*C/n+(t+l)/2,d=Math.asin(((t-p)/r).toFixed(9)),h=Math.asin(((l-p)/r).toFixed(9)),d=e<f?Math.PI-d:d,h=s<f?Math.PI-h:h,d<0&&(d=2*Math.PI+d),h<0&&(h=2*Math.PI+h),a&&d>h&&(d-=2*Math.PI),!a&&h>d&&(h-=2*Math.PI)}var I=h-d;if(Math.abs(I)>g){var T=h,L=s,M=l;h=d+g*(a&&h>d?1:-1),s=f+n*Math.cos(h),l=p+r*Math.sin(h),m=H(s,l,n,r,o,0,a,L,M,[h,T,f,p])}I=h-d;var O=Math.cos(d),_=Math.sin(d),N=Math.cos(h),A=Math.sin(h),R=Math.tan(I/4),D=4/3*n*R,P=4/3*r*R,k=[e,t],B=[e+D*_,t-P*O],F=[s+D*A,l-P*N],j=[s,l];if(B[0]=2*k[0]-B[0],B[1]=2*k[1]-B[1],c)return[B,F,j].concat(m);for(var z=[],W=0,G=(m=[B,F,j].concat(m).join().split(",")).length;W<G;W++)z[W]=W%2?y(m[W-1],m[W],v).y:y(m[W],m[W+1],v).x;return z},W=function(e,t){var n,r=F(e),o=t&&F(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",d=function(e,t,n){var r,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(H.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,o=2*t.y-t.by):(r=t.x,o=t.y),e=["C",r,o].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(z(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(z(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(j(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(j(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(j(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(j(t.x,t.y,t.X,t.Y))}return e},h=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)s[t]="A",o&&(l[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),n=Math.max(r.length,o&&o.length||0)}},f=function(e,t,i,a,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",a.x,a.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],n=Math.max(r.length,o&&o.length||0))};n=Math.max(r.length,o&&o.length||0);for(var p=0;p<n;p++){r[p]&&(c=r[p][0]),"C"!==c&&(s[p]=c,p&&(u=s[p-1])),r[p]=d(r[p],i,u),"A"!==s[p]&&"C"===c&&(s[p]="C"),h(r,p),o&&(o[p]&&(c=o[p][0]),"C"!==c&&(l[p]=c,p&&(u=l[p-1])),o[p]=d(o[p],a,u),"A"!==l[p]&&"C"===c&&(l[p]="C"),h(o,p)),f(r,o,i,a,p),f(o,r,a,i,p);var g=r[p],v=o&&o[p],m=g.length,y=o&&v.length;i.x=g[m-2],i.y=g[m-1],i.bx=parseFloat(g[m-4])||i.x,i.by=parseFloat(g[m-3])||i.y,a.bx=o&&(parseFloat(v[y-4])||a.x),a.by=o&&(parseFloat(v[y-3])||a.y),a.x=o&&v[y-2],a.y=o&&v[y-1]}return o?[r,o]:r},G=/,?([a-z]),?/gi,U=function(e){return e.join(",").replace(G,"$1")},V=function(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n},Y=function(e,t,n,r,o,i,a,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var p=c*u[f]+c,g=V(p,e,n,o,a),v=V(p,t,r,i,s),m=g*g+v*v;h+=d[f]*Math.sqrt(m)}return c*h},$=function(e,t,n,r,o,i,a,s){for(var l,c,u,d,h=[],f=[[],[]],p=0;p<2;++p)if(0===p?(c=6*e-12*n+6*o,l=-3*e+9*n-9*o+3*a,u=3*n-3*e):(c=6*t-12*r+6*i,l=-3*t+9*r-9*i+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(d=-u/c)>0&&d<1&&h.push(d)}else{var g=c*c-4*u*l,v=Math.sqrt(g);if(!(g<0)){var m=(-c+v)/(2*l);m>0&&m<1&&h.push(m);var y=(-c-v)/(2*l);y>0&&y<1&&h.push(y)}}for(var C,b=h.length,w=b;b--;)C=1-(d=h[b]),f[0][b]=C*C*C*e+3*C*C*d*n+3*C*d*d*o+d*d*d*a,f[1][b]=C*C*C*t+3*C*C*d*r+3*C*d*d*i+d*d*d*s;return f[0][w]=e,f[1][w]=t,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},X=function(e,t,n,r,o,i,a,s){if(!(Math.max(e,n)<Math.min(o,a)||Math.min(e,n)>Math.max(o,a)||Math.max(t,r)<Math.min(i,s)||Math.min(t,r)>Math.max(i,s))){var l=(e-n)*(i-s)-(t-r)*(o-a);if(l){var c=((e*r-t*n)*(o-a)-(e-n)*(o*s-i*a))/l,u=((e*r-t*n)*(i-s)-(t-r)*(o*s-i*a))/l,d=+c.toFixed(2),h=+u.toFixed(2);if(!(d<+Math.min(e,n).toFixed(2)||d>+Math.max(e,n).toFixed(2)||d<+Math.min(o,a).toFixed(2)||d>+Math.max(o,a).toFixed(2)||h<+Math.min(t,r).toFixed(2)||h>+Math.max(t,r).toFixed(2)||h<+Math.min(i,s).toFixed(2)||h>+Math.max(i,s).toFixed(2)))return{x:c,y:u}}}},q=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},K=function(e,t,n,r,o){if(o)return[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]];var i=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return i.parsePathArray=U,i},Z=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:K(e,t,n,r),vb:[e,t,n,r].join(" ")}},Q=function(e,t,n,r,o,i,a,s){f(e)||(e=[e,t,n,r,o,i,a,s]);var l=$.apply(null,e);return Z(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},J=function(e,t,n,r,o,i,a,s,l){var c=1-l,u=Math.pow(c,3),d=Math.pow(c,2),h=l*l,f=h*l,p=e+2*l*(n-e)+h*(o-2*n+e),g=t+2*l*(r-t)+h*(i-2*r+t),v=n+2*l*(o-n)+h*(a-2*o+n),m=r+2*l*(i-r)+h*(s-2*i+r);return{x:u*e+3*d*l*n+3*c*l*l*o+f*a,y:u*t+3*d*l*r+3*c*l*l*i+f*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*o+l*a,y:c*i+l*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},ee=function(e,t,n){if(r=Q(e),o=Q(t),r=Z(r),o=Z(o),!(q(o,r.x,r.y)||q(o,r.x2,r.y)||q(o,r.x,r.y2)||q(o,r.x2,r.y2)||q(r,o.x,o.y)||q(r,o.x2,o.y)||q(r,o.x,o.y2)||q(r,o.x2,o.y2)||(r.x<o.x2&&r.x>o.x||o.x<r.x2&&o.x>r.x)&&(r.y<o.y2&&r.y>o.y||o.y<r.y2&&o.y>r.y)))return n?0:[];for(var r,o,i=~~(Y.apply(0,e)/8),a=~~(Y.apply(0,t)/8),s=[],l=[],c={},u=n?0:[],d=0;d<i+1;d++){var h=J.apply(0,e.concat(d/i));s.push({x:h.x,y:h.y,t:d/i})}for(d=0;d<a+1;d++)h=J.apply(0,t.concat(d/a)),l.push({x:h.x,y:h.y,t:d/a});for(d=0;d<i;d++)for(var f=0;f<a;f++){var p=s[d],g=s[d+1],v=l[f],m=l[f+1],y=Math.abs(g.x-p.x)<.001?"y":"x",C=Math.abs(m.x-v.x)<.001?"y":"x",b=X(p.x,p.y,g.x,g.y,v.x,v.y,m.x,m.y);if(b){if(c[b.x.toFixed(4)]===b.y.toFixed(4))continue;c[b.x.toFixed(4)]=b.y.toFixed(4);var w=p.t+Math.abs((b[y]-p[y])/(g[y]-p[y]))*(g.t-p.t),x=v.t+Math.abs((b[C]-v[C])/(m[C]-v[C]))*(m.t-v.t);w>=0&&w<=1&&x>=0&&x<=1&&(n?u+=1:u.push({x:b.x,y:b.y,t1:w,t2:x}))}}return u};function te(e,t){var n=[],r=[];return e.length&&function e(t,o){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var i=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),i[a]=[(1-o)*t[a][0]+o*t[a+1][0],(1-o)*t[a][1]+o*t[a+1][1]];e(i,o)}}(e,t),{left:n,right:r.reverse()}}var ne=function(e,t){if(e.length!==t.length)return!1;var n=!0;return g(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function re(e,t,n){var r=null,o=n;return t<o&&(o=t,r="add"),e<o&&(o=e,r="del"),{type:r,min:o}}var oe=function(e,t){var n=function(e,t){var n,r,o=e.length,i=t.length,a=0;if(0===o||0===i)return null;for(var s=[],l=0;l<=o;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=i;c++)s[0][c]={min:c};for(l=1;l<=o;l++)for(n=e[l-1],c=1;c<=i;c++){r=t[c-1],a=ne(n,r)?0:1;var u=s[l-1][c].min+1,d=s[l][c-1].min+1,h=s[l-1][c-1].min+a;s[l][c]=re(u,d,h)}return s}(e,t),r=e.length,o=t.length,i=[],a=1,s=1;if(n[r][o].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=a;u<=o;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);a=s,n[l][a].type&&i.push({index:l-1,type:n[l][a].type})}for(l=i.length-1;l>=0;l--)a=i[l].index,"add"===i[l].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var d=o-(r=e.length);if(r<o)for(l=0;l<d;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function ie(e,t,n){for(var r,o=[].concat(e),i=1/(n+1),a=ae(t)[0],s=1;s<=n;s++)i*=s,0===(r=Math.floor(e.length*i))?o.unshift([a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]):o.splice(r,0,[a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]);return o}function ae(e){var t=[];switch(e[0]){case"M":case"L":case"T":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var se=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=ae(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=ie(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e},le=Object.freeze({__proto__:null,catmullRomToBezier:k,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,o=n/r,i=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<r-n;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var s=Math.floor(o*a);i[s]=(i[s]||0)+1}var l=i.reduce((function(t,r,o){return o===n?t.concat(e[n]):t.concat(function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var o=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var i=r,a=1/n,s=0;s<n-1;s++){var l=te(i,a/(1-a*s));o.push(l.left),i=l.right}return o.push(i),o.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var o=[].concat(e);"M"===o[0]&&(o[0]="L");for(var i=0;i<=n-1;i++)r.push(o)}return r}(e[o],e[o+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},fillPathByDiff:oe,formatPath:se,intersection:function(e,t){return function(e,t,n){var r,o,i,a,s,l,c,u,d,h;e=W(e),t=W(t);for(var f=[],p=0,g=e.length;p<g;p++){var v=e[p];if("M"===v[0])r=s=v[1],o=l=v[2];else{"C"===v[0]?(d=[r,o].concat(v.slice(1)),r=d[6],o=d[7]):(d=[r,o,r,o,s,l,s,l],r=s,o=l);for(var m=0,y=t.length;m<y;m++){var C=t[m];if("M"===C[0])i=c=C[1],a=u=C[2];else{"C"===C[0]?(h=[i,a].concat(C.slice(1)),i=h[6],a=h[7]):(h=[i,a,i,a,c,u,c,u],i=c,a=u);for(var b=ee(d,h,n),w=0,x=b.length;w<x;w++)b[w].segment1=p,b[w].segment2=m,b[w].bez1=d,b[w].bez2=h;f=f.concat(b)}}}}return f}(e,t)},parsePathArray:U,parsePathString:P,pathToAbsolute:F,pathToCurve:W,rectPath:K}),ce=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}(),ue=function(e,t){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ue(e,t)};function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var he=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._events[e]||[],i=this._events["*"]||[],a=function(r){for(var o=r.length,i=0;i<o;i++)if(r[i]){var a=r[i],s=a.callback;a.once&&(r.splice(i,1),0===r.length&&delete t._events[e],o--,i--),s.apply(t,n)}};a(o),a(i)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,o=0;o<r;o++)n[o].callback===t&&(n.splice(o,1),r--,o--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}();function fe(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var pe="undefined"!=typeof window&&void 0!==window.document;function ge(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function ve(e){return e.cfg.visible&&e.cfg.capture}var me=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=L(r,t),n}return de(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(he),ye=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ce=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},be=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},we=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},xe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ee=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Se=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ie(e){var t=function(e){return""!==e&&Ee.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new we;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=ye(ye([],o,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-o.length),!0)):o=[];var i=o.join("."),a=function(e){for(var t=0,n=Se.length;t<n;t++){var r=Se[t],o=r[0];if(r[1].exec(e))return o}return null}(e),s=xe.exec(e);return s&&s[1]?new be(n,i,a,s[1]):new Ce(n,i,a)}var Te,Le="undefined"!=typeof Float32Array?Float32Array:Array;function Me(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],C=n[7],b=n[8];return e[0]=h*r+f*a+p*c,e[1]=h*o+f*s+p*u,e[2]=h*i+f*l+p*d,e[3]=g*r+v*a+m*c,e[4]=g*o+v*s+m*u,e[5]=g*i+v*l+m*d,e[6]=y*r+C*a+b*c,e[7]=y*o+C*s+b*u,e[8]=y*i+C*l+b*d,e}function Oe(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}function _e(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),Me(e,r,t)}function Ne(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Me(e,r,t)}function Ae(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Me(e,r,t)}function Re(e,t,n){return Me(e,n,t)}function De(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,o=t.length;r<o;r++){var i=t[r];switch(i[0]){case"t":_e(n,n,[i[1],i[2]]);break;case"s":Ae(n,n,[i[1],i[2]]);break;case"r":Ne(n,n,i[1]);break;case"m":Re(n,n,i[1])}}return n}function Pe(e,t){var n=[],r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=t[0],f=t[1],p=t[2],g=t[3],v=t[4],m=t[5],y=t[6],C=t[7],b=t[8];return n[0]=h*r+f*a+p*c,n[1]=h*o+f*s+p*u,n[2]=h*i+f*l+p*d,n[3]=g*r+v*a+m*c,n[4]=g*o+v*s+m*u,n[5]=g*i+v*l+m*d,n[6]=y*r+C*a+b*c,n[7]=y*o+C*s+b*u,n[8]=y*i+C*l+b*d,n}function ke(e,t){var n=[],r=t[0],o=t[1];return n[0]=e[0]*r+e[3]*o+e[6],n[1]=e[1]*r+e[4]*o+e[7],n}function Be(e){var t=[],n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=u*a-s*c,h=-u*i+s*l,f=c*i-a*l,p=n*d+r*h+o*f;return p?(p=1/p,t[0]=d*p,t[1]=(-u*r+o*c)*p,t[2]=(s*r-o*a)*p,t[3]=h*p,t[4]=(u*n-o*l)*p,t[5]=(-s*n+o*i)*p,t[6]=f*p,t[7]=(-c*n+r*l)*p,t[8]=(a*n-r*i)*p,t):null}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Te=new Le(3),Le!=Float32Array&&(Te[0]=0,Te[1]=0,Te[2]=0),function(){var e=new Le(2);Le!=Float32Array&&(e[0]=0,e[1]=0)}();var Fe=De,je="matrix",ze=["zIndex","capture","visible","type"],He=["repeat"];function We(e,t){var n={},r=t.attrs;for(var o in e)n[o]=r[o];return n}var Ge=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return L(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return de(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1];if(!r)return this.attrs;if(p(r)){for(var i in r)this.setAttr(i,r[i]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,o),this.afterAttrsChange(((e={})[r]=o,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(fe(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(je,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(je)},t.prototype.setMatrix=function(e){this.attr(je,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?Pe(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t,n=this.attr("matrix");t=e&&n?Pe(e,n):n||e,this.set("totalMatrix",t),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?ke(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=Be(t);if(n)return ke(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[I(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){return this.cfg.clipShape||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};g(t,(function(e,r){f(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)f(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return g(ze,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var o,i,a,s,l,c=e[0],u=e[1],h=e[2],f=void 0===h?"easeLinear":h,v=e[3],m=void 0===v?N:v,y=e[4],C=void 0===y?0:y;d(c)?(o=c,c={}):p(c)&&c.onFrame&&(o=c.onFrame,i=c.repeat),p(u)?(u=(l=u).duration,f=l.easing||"easeLinear",C=l.delay||0,i=l.repeat||i||!1,m=l.callback||N,a=l.pauseCallback||N,s=l.resumeCallback||N):(b(m)&&(C=m,m=null),d(f)?(m=f,f="easeLinear"):f=f||"easeLinear");var w,x=function(e,t){var n={},r=t.attr();return g(e,(function(e,t){-1!==He.indexOf(t)||O(r[t],e)||(n[t]=e)})),n}(c,this),E={fromAttrs:We(x,this),toAttrs:x,duration:u,easing:f,repeat:i,callback:m,pauseCallback:a,resumeCallback:s,delay:C,startTime:n.getTime(),id:(_[w=w||"g"]?_[w]+=1:_[w]=1,w+_[w]),onFrame:o,pathFormatted:!1};r.length>0?r=function(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,o=t.duration,i=Object.prototype.hasOwnProperty;return g(e,(function(e){n+r<e.startTime+e.delay+e.duration&&o>e.delay&&g(t.toAttrs,(function(t,n){i.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}(r,E):n.addAnimator(this),r.push(E),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),g(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return g(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return g(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,o=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var i=function(e){var i=o[e],s=i.get("name");if(s){if((i.isGroup()||i.isCanvas&&i.isCanvas())&&n&&ge(i,n))return"break";f(s)?g(s,(function(e){r.emitDelegateEvent(i,e,t)})):a.emitDelegateEvent(i,s,t)}},a=this,s=0;s<o.length&&"break"!==i(s);s++);},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),o=t+":"+n.type;(r[o]||r["*"])&&(n.name=o,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(o,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=Fe(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=Fe(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=Fe(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,o=this.getMatrix(),i=Fe(o,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(i),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),o=Fe(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(o),this},t}(me),Ue={},Ve="_INDEX";function Ye(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){Ye(e,t)}))}}function $e(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){$e(e,t)}))}}var Xe,qe,Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return de(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,o=[],i=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(g(a,(function(e){var t=e.getBBox();o.push(t.minX,t.maxX),i.push(t.minY,t.maxY)})),e=y(o),t=m(o),n=y(i),r=m(i)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,o=[],i=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(g(a,(function(e){var t=e.getCanvasBBox();o.push(t.minX,t.maxX),i.push(t.minY,t.maxY)})),e=y(o),t=m(o),n=y(i),r=m(i)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){g(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];p(n)?r=n:r.type=n;var o=Ue[r.type];o||(o=I(r.type),Ue[r.type]=o);var i=new(this.getShapeBase()[o])(r);return this.add(i),i},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],o=e[1];if(d(r))n=new r(o||{parent:this});else{var i=r||{};n=new(this.getGroupBase())(i)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!ve(this))return null;var r,o=this.getChildren();if(this.isCanvas())r=this._findShape(o,e,t,n);else{var i=[e,t,1];i=this.invertFromMatrix(i),this.isClipped(i[0],i[1])||(r=this._findShape(o,i[0],i[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var o=null,i=e.length-1;i>=0;i--){var a=e[i];if(ve(a)&&(a.isGroup()?o=a.getShape(t,n,r):a.isHit(t,n)&&(o=a)),o)break}return o},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),o=e.getParent();o&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),fe(e.getChildren(),t)}(o,e,!1),e.set("parent",this),t&&Ye(e,t),r&&$e(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();g(t,(function(e,t){return e[Ve]=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t[Ve]-n[Ve]:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return g(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return g(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(Ge),Ze=0,Qe=0,Je=0,et=1e3,tt=0,nt=0,rt=0,ot="object"==typeof performance&&performance.now?performance:Date,it="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function at(){return nt||(it(st),nt=ot.now()+rt)}function st(){nt=0}function lt(){this._call=this._time=this._next=null}function ct(e,t,n){var r=new lt;return r.restart(e,t,n),r}function ut(){nt=(tt=ot.now())+rt,Ze=Qe=0;try{!function(){at(),++Ze;for(var e,t=Xe;t;)(e=nt-t._time)>=0&&t._call.call(null,e),t=t._next;--Ze}()}finally{Ze=0,function(){for(var e,t,n=Xe,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xe=t);qe=e,ht(r)}(),nt=0}}function dt(){var e=ot.now(),t=e-tt;t>et&&(rt-=t,tt=e)}function ht(e){Ze||(Qe&&(Qe=clearTimeout(Qe)),e-nt>24?(e<1/0&&(Qe=setTimeout(ut,e-ot.now()-rt)),Je&&(Je=clearInterval(Je))):(Je||(tt=ot.now(),Je=setInterval(dt,et)),Ze=1,it(ut)))}function ft(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function gt(){}lt.prototype=ct.prototype={constructor:lt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?at():+n)+(null==t?0:+t),this._next||qe===this||(qe?qe._next=this:Xe=this,qe=this),this._call=e,this._time=n,ht()},stop:function(){this._call&&(this._call=null,this._time=1/0,ht())}};var vt=.7,mt=1/vt,yt="\\s*([+-]?\\d+)\\s*",Ct="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wt=/^#([0-9a-f]{3,8})$/,xt=new RegExp("^rgb\\("+[yt,yt,yt]+"\\)$"),Et=new RegExp("^rgb\\("+[bt,bt,bt]+"\\)$"),St=new RegExp("^rgba\\("+[yt,yt,yt,Ct]+"\\)$"),It=new RegExp("^rgba\\("+[bt,bt,bt,Ct]+"\\)$"),Tt=new RegExp("^hsl\\("+[Ct,bt,bt]+"\\)$"),Lt=new RegExp("^hsla\\("+[Ct,bt,bt,Ct]+"\\)$"),Mt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ot(){return this.rgb().formatHex()}function _t(){return this.rgb().formatRgb()}function Nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?At(t):3===n?new Pt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Rt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xt.exec(e))?new Pt(t[1],t[2],t[3],1):(t=Et.exec(e))?new Pt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=St.exec(e))?Rt(t[1],t[2],t[3],t[4]):(t=It.exec(e))?Rt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Tt.exec(e))?jt(t[1],t[2]/100,t[3]/100,1):(t=Lt.exec(e))?jt(t[1],t[2]/100,t[3]/100,t[4]):Mt.hasOwnProperty(e)?At(Mt[e]):"transparent"===e?new Pt(NaN,NaN,NaN,0):null}function At(e){return new Pt(e>>16&255,e>>8&255,255&e,1)}function Rt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pt(e,t,n,r)}function Dt(e,t,n,r){return 1===arguments.length?((o=e)instanceof gt||(o=Nt(o)),o?new Pt((o=o.rgb()).r,o.g,o.b,o.opacity):new Pt):new Pt(e,t,n,null==r?1:r);var o}function Pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function kt(){return"#"+Ft(this.r)+Ft(this.g)+Ft(this.b)}function Bt(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ft(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function jt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,n,r)}function zt(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof gt||(e=Nt(e)),!e)return new Ht;if(e instanceof Ht)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new Ht(a,s,l,e.opacity)}function Ht(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Gt(e){return function(){return e}}function Ut(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Gt(isNaN(e)?t:e)}ft(gt,Nt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ot,formatHex:Ot,formatHsl:function(){return zt(this).formatHsl()},formatRgb:_t,toString:_t}),ft(Pt,Dt,pt(gt,{brighter:function(e){return e=null==e?mt:Math.pow(mt,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?vt:Math.pow(vt,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kt,formatHex:kt,formatRgb:Bt,toString:Bt})),ft(Ht,(function(e,t,n,r){return 1===arguments.length?zt(e):new Ht(e,t,n,null==r?1:r)}),pt(gt,{brighter:function(e){return e=null==e?mt:Math.pow(mt,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?vt:Math.pow(vt,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pt(Wt(e>=240?e-240:e+120,o,r),Wt(e,o,r),Wt(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Vt=function e(t){var n=function(e){return 1==(e=+e)?Ut:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Gt(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Dt(e)).r,(t=Dt(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Ut(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Yt(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function $t(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xt(e,t){return($t(t)?Yt:qt)(e,t)}function qt(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=nn(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}function Kt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Qt(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=nn(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var Jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,en=new RegExp(Jt.source,"g");function tn(e,t){var n,r,o,i=Jt.lastIndex=en.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Jt.exec(e))&&(r=en.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Zt(n,r)})),i=en.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function nn(e,t){var n,r=typeof t;return null==t||"boolean"===r?Gt(t):("number"===r?Zt:"string"===r?(n=Nt(t))?(t=n,Vt):tn:t instanceof Nt?Vt:t instanceof Date?Kt:$t(t)?Yt:Array.isArray(t)?qt:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Qt:Zt)(e,t)}function rn(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function on(e){return e*e*e}function an(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sn=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),ln=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),cn=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),un=Math.PI,dn=un/2;function hn(e){return(1-Math.cos(un*e))/2}function fn(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function pn(e){return((e*=2)<=1?fn(1-e):2-fn(e-1))/2}function gn(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var vn=4/11,mn=7.5625;function yn(e){return(e=+e)<vn?mn*e*e:e<.7272727272727273?mn*(e-=.5454545454545454)*e+.75:e<.9090909090909091?mn*(e-=.8181818181818182)*e+.9375:mn*(e-=.9545454545454546)*e+.984375}var Cn=1.70158,bn=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(Cn),wn=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(Cn),xn=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(Cn),En=2*Math.PI,Sn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return t*fn(- --e)*Math.sin((r-e)/n)}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),In=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return 1-t*fn(e=+e)*Math.sin((e+r)/n)}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),Tn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=En);function o(e){return((e=2*e-1)<0?t*fn(-e)*Math.sin((r-e)/n):2-t*fn(e)*Math.sin((r+e)/n))/2}return o.amplitude=function(t){return e(t,n*En)},o.period=function(n){return e(t,n)},o}(1,.3),Ln=Object.freeze({__proto__:null,easeLinear:function(e){return+e},easeQuad:rn,easeQuadIn:function(e){return e*e},easeQuadOut:function(e){return e*(2-e)},easeQuadInOut:rn,easeCubic:an,easeCubicIn:on,easeCubicOut:function(e){return--e*e*e+1},easeCubicInOut:an,easePoly:cn,easePolyIn:sn,easePolyOut:ln,easePolyInOut:cn,easeSin:hn,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*dn)},easeSinOut:function(e){return Math.sin(e*dn)},easeSinInOut:hn,easeExp:pn,easeExpIn:function(e){return fn(1-+e)},easeExpOut:function(e){return 1-fn(e)},easeExpInOut:pn,easeCircle:gn,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCircleInOut:gn,easeBounce:yn,easeBounceIn:function(e){return 1-yn(1-e)},easeBounceOut:yn,easeBounceInOut:function(e){return((e*=2)<=1?1-yn(1-e):yn(e-1)+1)/2},easeBack:xn,easeBackIn:bn,easeBackOut:wn,easeBackInOut:xn,easeElastic:In,easeElasticIn:Sn,easeElasticOut:In,easeElasticInOut:Tn}),Mn={},On=[1,0,0,0,1,0,0,0,1];function _n(e,t,n){var r,o=t.startTime;if(n<o+t.delay||t._paused)return!1;var i,a=t.duration,s=t.easing,l=Mn[(i=s).toLowerCase()]||Ln[i];if(n=n-o-t.delay,t.repeat)r=l(r=n%a/a);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=l(r)}if(t.onFrame){var c=t.onFrame(r);e.attr(c)}else!function(e,t,n){var r,o={},i=t.fromAttrs,a=t.toAttrs;if(!e.destroyed){var s;for(var l in a)if(!O(i[l],a[l]))if("path"===l){var c=a[l],u=i[l];c.length>u.length?(c=P(a[l]),u=P(i[l]),u=oe(u,c),u=se(u,c),t.fromAttrs.path=u,t.toAttrs.path=c):t.pathFormatted||(c=P(a[l]),u=P(i[l]),u=se(u,c),t.fromAttrs.path=u,t.toAttrs.path=c,t.pathFormatted=!0),o[l]=[];for(var h=0;h<c.length;h++){for(var f=c[h],p=u[h],g=[],v=0;v<f.length;v++)b(f[v])&&p&&b(p[v])?(s=nn(p[v],f[v]),g.push(s(n))):g.push(f[v]);o[l].push(g)}}else if("matrix"===l){var m=Xt(i[l]||On,a[l]||On)(n);o[l]=m}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(r=a[l],/^[r,R,L,l]{1}[\s]*\(/.test(r))?o[l]=a[l]:d(a[l])||(s=nn(i[l],a[l]),o[l]=s(n));e.attr(o)}}(e,t,r);return!1}var Nn=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=ct((function(o){if(r.current=o,r.animators.length>0){for(var i=r.animators.length-1;i>=0;i--)if((e=r.animators[i]).destroyed)r.removeAnimator(i);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)n=t[a],_n(e,n,o)&&(t.splice(a,1),n.callback&&n.callback());0===t.length&&r.removeAnimator(i)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),An=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Rn(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function Dn(e,t,n){if(n.bubbles){var r=void 0,o=!1;if("mouseenter"===t?(r=n.fromShape,o=!0):"mouseleave"===t&&(o=!0,r=n.toShape),e.isCanvas()&&o)return;if(r&&ge(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Pn=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");g(An,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");g(An,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,o,i){var a=new ce(e,t);return a.fromShape=o,a.toShape=i,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),o=this["_on"+e],i=!1;if(o)o.call(this,n,r,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(i=!0,a&&this._emitEvent(e,t,n,a,a,null),this._emitEvent(e,t,n,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(i||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var o=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,o){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),o||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),o&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,o=this.currentShape,i=this.draggingShape;if(this.dragging)i&&this._emitDragoverEvents(n,e,o,t,!1),this._emitEvent("drag",n,e,i);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-e.clientX,u=a.clientY-e.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((i=this.mousedownShape).set("capture",!1),this.draggingShape=i,this.dragging=!0,this._emitEvent("dragstart",n,e,i),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,o,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,o,i){var a=this._getEventObj(e,t,n,r,o,i);if(r){a.shape=r,Rn(r,e,a);for(var s=r.getParent();s;)s.emitDelegation(e,a),a.propagationStopped||Dn(s,e,a),a.propagationPath.push(s),s=s.getParent()}else Rn(this.canvas,e,a)},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),kn="undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}:"undefined"!=typeof navigator?Ie(navigator.userAgent):void 0!==r&&r.version?new function(e){this.version=e,this.type="node",this.name="node",this.os=r.platform}(r.version.slice(1)):null,Bn=kn&&"firefox"===kn.name,Fn=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return de(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");C(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Pn({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new Nn(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");pe&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");pe&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(Bn&&!h(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!h(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(Ke),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return de(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var o=n[r];t.add(o.clone())}return t},t}(Ke),zn=function(e){function t(t){return e.call(this,t)||this}return de(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,o=e.maxX,i=e.maxY;if(t){var a=ke(t,[e.minX,e.minY]),s=ke(t,[e.maxX,e.minY]),l=ke(t,[e.minX,e.maxY]),c=ke(t,[e.maxX,e.maxY]);n=Math.min(a[0],s[0],l[0],c[0]),o=Math.max(a[0],s[0],l[0],c[0]),r=Math.min(a[1],s[1],l[1],c[1]),i=Math.max(a[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var d=u.shadowBlur,h=void 0===d?0:d,f=u.shadowOffsetX,p=void 0===f?0:f,g=u.shadowOffsetY,v=void 0===g?0:g,m=n-h+p,y=o+h+p,C=r-h+v,b=i+h+v;n=Math.min(n,m),o=Math.max(o,y),r=Math.min(r,C),i=Math.max(i,b)}return{x:n,y:r,minX:n,minY:r,maxX:o,maxY:i,width:o-n,height:i-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),o=[e,t,1],i=(o=this.invertFromMatrix(o))[0],a=o[1],s=this._isInBBox(i,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(i,a)){if(this.isInShape(i,a))return!0;if(n&&n.isHit(i,a))return!0;if(r&&r.isHit(i,a))return!0}return!1},t}(Ge),Hn=new Map;function Wn(e,t){Hn.set(e,t)}function Gn(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Un(e){var t=e.attr(),n=t.x,r=t.y,o=t.r;return{x:n-o,y:r-o,width:2*o,height:2*o}}function Vn(e){return Math.min.apply(null,e)}function Yn(e){return Math.max.apply(null,e)}function $n(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function Xn(e,t){return Math.abs(e-t)<.001}function qn(e,t){var n=Vn(e),r=Vn(t);return{x:n,y:r,width:Yn(e)-n,height:Yn(t)-r}}function Kn(e){return(e+2*Math.PI)%(2*Math.PI)}var Zn={box:function(e,t,n,r){return qn([e,n],[t,r])},length:function(e,t,n,r){return $n(e,t,n,r)},pointAt:function(e,t,n,r,o){return{x:(1-o)*e+o*n,y:(1-o)*t+o*r}},pointDistance:function(e,t,n,r,o,i){var a=(n-e)*(o-e)+(r-t)*(i-t);return a<0?$n(e,t,o,i):a>(n-e)*(n-e)+(r-t)*(r-t)?$n(n,r,o,i):this.pointToLine(e,t,n,r,o,i)},pointToLine:function(e,t,n,r,o,i){var a=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(a,[0,0]))return Math.sqrt((o-e)*(o-e)+(i-t)*(i-t));var s=[-a[1],a[0]];!function(e,t){var n=t[0],r=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o}(s,s);var l=[o-e,i-t];return Math.abs(function(e,t){return e[0]*t[0]+e[1]*t[1]}(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function Qn(e,t,n,r,o,i){var a,s=1/0,l=[n,r],c=20;i&&i>200&&(c=i/10);for(var u=1/c,d=u/10,h=0;h<=c;h++){var f=h*u,p=[o.apply(null,e.concat([f])),o.apply(null,t.concat([f]))];(y=$n(l[0],l[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:e[0],y:t[0]};if(1===a){var g=e.length;return{x:e[g-1],y:t[g-1]}}for(s=1/0,h=0;h<32&&!(d<1e-4);h++){var v=a-d,m=a+d,y=(p=[o.apply(null,e.concat([v])),o.apply(null,t.concat([v]))],$n(l[0],l[1],p[0],p[1]));if(v>=0&&y<s)a=v,s=y;else{var C=[o.apply(null,e.concat([m])),o.apply(null,t.concat([m]))],b=$n(l[0],l[1],C[0],C[1]);m<=1&&b<s?(a=m,s=b):d*=.5}}return{x:o.apply(null,e.concat([a])),y:o.apply(null,t.concat([a]))}}function Jn(e,t,n,r){var o=1-r;return o*o*e+2*r*o*t+r*r*n}function er(e,t,n){var r=e+n-2*t;if(Xn(r,0))return[.5];var o=(e-t)/r;return o<=1&&o>=0?[o]:[]}function tr(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function nr(e,t,n,r,o,i,a){var s=Jn(e,n,o,a),l=Jn(t,r,i,a),c=Zn.pointAt(e,t,n,r,a),u=Zn.pointAt(n,r,o,i,a);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,o,i]]}function rr(e,t,n,r,o,i,a){if(0===a)return($n(e,t,n,r)+$n(n,r,o,i)+$n(e,t,o,i))/2;var s=nr(e,t,n,r,o,i,.5),l=s[0],c=s[1];return l.push(a-1),c.push(a-1),rr.apply(null,l)+rr.apply(null,c)}var or={box:function(e,t,n,r,o,i){var a=er(e,n,o)[0],s=er(t,r,i)[0],l=[e,o],c=[t,i];return void 0!==a&&l.push(Jn(e,n,o,a)),void 0!==s&&c.push(Jn(t,r,i,s)),qn(l,c)},length:function(e,t,n,r,o,i){return rr(e,t,n,r,o,i,3)},nearestPoint:function(e,t,n,r,o,i,a,s){return Qn([e,n,o],[t,r,i],a,s,Jn)},pointDistance:function(e,t,n,r,o,i,a,s){var l=this.nearestPoint(e,t,n,r,o,i,a,s);return $n(l.x,l.y,a,s)},interpolationAt:Jn,pointAt:function(e,t,n,r,o,i,a){return{x:Jn(e,n,o,a),y:Jn(t,r,i,a)}},divide:function(e,t,n,r,o,i,a){return nr(e,t,n,r,o,i,a)},tangentAngle:function(e,t,n,r,o,i,a){var s=tr(e,n,o,a),l=tr(t,r,i,a);return Kn(Math.atan2(l,s))}};function ir(e,t,n,r,o){var i=1-o;return i*i*i*e+3*t*o*i*i+3*n*o*o*i+r*o*o*o}function ar(e,t,n,r,o){var i=1-o;return 3*(i*i*(t-e)+2*i*o*(n-t)+o*o*(r-n))}function sr(e,t,n,r){var o,i,a,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(Xn(s,0))Xn(l,0)||(o=-c/l)>=0&&o<=1&&u.push(o);else{var d=l*l-4*s*c;Xn(d,0)?u.push(-l/(2*s)):d>0&&(i=(-l-(a=Math.sqrt(d)))/(2*s),(o=(-l+a)/(2*s))>=0&&o<=1&&u.push(o),i>=0&&i<=1&&u.push(i))}return u}function lr(e,t,n,r,o,i,a,s,l){var c=ir(e,n,o,a,l),u=ir(t,r,i,s,l),d=Zn.pointAt(e,t,n,r,l),h=Zn.pointAt(n,r,o,i,l),f=Zn.pointAt(o,i,a,s,l),p=Zn.pointAt(d.x,d.y,h.x,h.y,l),g=Zn.pointAt(h.x,h.y,f.x,f.y,l);return[[e,t,d.x,d.y,p.x,p.y,c,u],[c,u,g.x,g.y,f.x,f.y,a,s]]}function cr(e,t,n,r,o,i,a,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,o=0;o<r;o++)n+=$n(e[o],t[o],e[(o+1)%r],t[(o+1)%r]);return n/2}([e,n,o,a],[t,r,i,s]);var c=lr(e,t,n,r,o,i,a,s,.5),u=c[0],d=c[1];return u.push(l-1),d.push(l-1),cr.apply(null,u)+cr.apply(null,d)}var ur={extrema:sr,box:function(e,t,n,r,o,i,a,s){for(var l=[e,a],c=[t,s],u=sr(e,n,o,a),d=sr(t,r,i,s),h=0;h<u.length;h++)l.push(ir(e,n,o,a,u[h]));for(h=0;h<d.length;h++)c.push(ir(t,r,i,s,d[h]));return qn(l,c)},length:function(e,t,n,r,o,i,a,s){return cr(e,t,n,r,o,i,a,s,3)},nearestPoint:function(e,t,n,r,o,i,a,s,l,c,u){return Qn([e,n,o,a],[t,r,i,s],l,c,ir,u)},pointDistance:function(e,t,n,r,o,i,a,s,l,c,u){var d=this.nearestPoint(e,t,n,r,o,i,a,s,l,c,u);return $n(d.x,d.y,l,c)},interpolationAt:ir,pointAt:function(e,t,n,r,o,i,a,s,l){return{x:ir(e,n,o,a,l),y:ir(t,r,i,s,l)}},divide:function(e,t,n,r,o,i,a,s,l){return lr(e,t,n,r,o,i,a,s,l)},tangentAngle:function(e,t,n,r,o,i,a,s,l){var c=ar(e,n,o,a,l),u=ar(t,r,i,s,l);return Kn(Math.atan2(u,c))}};function dr(e,t,n,r,o,i){return n*Math.cos(o)*Math.cos(i)-r*Math.sin(o)*Math.sin(i)+e}function hr(e,t,n,r,o,i){return n*Math.sin(o)*Math.cos(i)+r*Math.cos(o)*Math.sin(i)+t}var fr=function(e,t,n,r,o,i,a){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,o),l=1/0,c=-1/0,u=[i,a],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var h=s+d;i<a?i<h&&h<a&&u.push(h):a<h&&h<i&&u.push(h)}for(d=0;d<u.length;d++){var f=dr(e,0,n,r,o,u[d]);f<l&&(l=f),f>c&&(c=f)}var p=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,o),g=1/0,v=-1/0,m=[i,a];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var y=p+d;i<a?i<y&&y<a&&m.push(y):a<y&&y<i&&m.push(y)}for(d=0;d<m.length;d++){var C=hr(0,t,n,r,o,m[d]);C<g&&(g=C),C>v&&(v=C)}return{x:l,y:g,width:c-l,height:v-g}};function pr(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function gr(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=pr(t,n.getCanvasBBox())),r&&(t=pr(t,r.getCanvasBBox())),t}var vr=null;function mr(){if(!vr){var e=document.createElement("canvas");e.width=1,e.height=1,vr=e.getContext("2d")}return vr}function yr(e,t,n){var r=1;if(C(e)&&(r=e.split("\n").length),r>1){var o=function(e,t){return t?t-e:.14*e}(t,n);return t*r+o*(r-1)}return t}function Cr(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var br=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,wr=/[^\s\,]+/gi,xr="\t\n\v\f\r   ᠎             　\u2028\u2029",Er=new RegExp("([a-z])["+xr+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+xr+"]*,?["+xr+"]*)+)","ig"),Sr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+xr+"]*,?["+xr+"]*","ig"),Ir=/[a-z]/;function Tr(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Lr(e){var t=function(e){if(!e)return null;if(f(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Er,(function(e,r,o){var i=[],a=r.toLowerCase();if(o.replace(Sr,(function(e,t){t&&i.push(+t)})),"m"===a&&i.length>2&&(n.push([r].concat(i.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===i.length&&n.push([r,i[0]]),"r"===a)n.push([r].concat(i));else for(;i.length>=t[a]&&(n.push([r].concat(i.splice(0,t[a]))),t[a]););return""})),n}(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var o=t[r][0];if(Ir.test(o)||["V","H","T","S"].indexOf(o)>=0){n=!0;break}}if(!n)return t;var i=[],a=0,s=0,l=0,c=0,u=0,d=t[0];"M"!==d[0]&&"m"!==d[0]||(l=a=+d[1],c=s=+d[2],u++,i[0]=["M",a,s]),r=u;for(var h=t.length;r<h;r++){var p=t[r],g=i[r-1],v=[],m=(o=p[0]).toUpperCase();if(o!==m)switch(v[0]=m,m){case"A":v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5],v[6]=+p[6]+a,v[7]=+p[7]+s;break;case"V":v[1]=+p[1]+s;break;case"H":v[1]=+p[1]+a;break;case"M":l=+p[1]+a,c=+p[2]+s,v[1]=l,v[2]=c;break;default:for(var y=1,C=p.length;y<C;y++)v[y]=+p[y]+(y%2?a:s)}else v=t[r];switch(m){case"Z":a=+l,s=+c;break;case"H":v=["L",a=v[1],s];break;case"V":v=["L",a,s=v[1]];break;case"T":a=v[1],s=v[2];var b=Tr([g[1],g[2]],[g[3],g[4]]);v=["Q",b[0],b[1],a,s];break;case"S":a=v[v.length-2],s=v[v.length-1];var w=g.length,x=Tr([g[w-4],g[w-3]],[g[w-2],g[w-1]]);v=["C",x[0],x[1],v[1],v[2],a,s];break;case"M":l=v[v.length-2],c=v[v.length-1];break;default:a=v[v.length-2],s=v[v.length-1]}i.push(v)}return i}function Mr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Or(e,t){return Mr(e)*Mr(t)?(e[0]*t[0]+e[1]*t[1])/(Mr(e)*Mr(t)):1}function _r(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Or(e,t))}function Nr(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ar(e,t){var n=t[1],r=t[2],o=w(E(t[3]),2*Math.PI),i=t[4],a=t[5],s=e[0],l=e[1],c=t[6],u=t[7],d=Math.cos(o)*(s-c)/2+Math.sin(o)*(l-u)/2,h=-1*Math.sin(o)*(s-c)/2+Math.cos(o)*(l-u)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;i===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,m=n?g*-r*d/n:0,y=(s+c)/2+Math.cos(o)*v-Math.sin(o)*m,C=(l+u)/2+Math.sin(o)*v+Math.cos(o)*m,b=[(d-v)/n,(h-m)/r],x=[(-1*d-v)/n,(-1*h-m)/r],S=_r([1,0],b),I=_r(b,x);return Or(b,x)<=-1&&(I=Math.PI),Or(b,x)>=1&&(I=0),0===a&&I>0&&(I-=2*Math.PI),1===a&&I<0&&(I+=2*Math.PI),{cx:y,cy:C,rx:Nr(e,[c,u])?0:n,ry:Nr(e,[c,u])?0:r,startAngle:S,endAngle:S+I,xRotation:o,arcFlag:i,sweepFlag:a}}function Rr(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Dr(e){e=function(e){var t=e||[];return f(t)?t:C(t)?(g(t=t.match(br),(function(e,n){if((e=e.match(wr))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}g(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e);for(var t=[],n=null,r=null,o=null,i=0,a=e.length,s=0;s<a;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":o=[l[1],l[2]],i=s;break;case"A":var d=Ar(n,l);u.arcParams=d}if("Z"===c)n=o,r=e[i+1];else{var h=l.length;n=[l[h-2],l[h-1]]}r&&"Z"===r[0]&&(r=e[i],t[i]&&(t[i].prePoint=n)),u.currentPoint=n,t[i]&&Nr(n,t[i].currentPoint)&&(t[i].prePoint=u.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=p;var v=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[v[0]-n[0],v[1]-n[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[v[0]-m[0],v[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c)m=Rr((w=t[s-1]).currentPoint,v),"Q"===w.command?(u.command="Q",u.startTangent=[v[0]-m[0],v[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[v[0]-n[0],v[1]-n[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]);else if("C"===c){var y=[l[1],l[2]],b=[l[3],l[4]];u.startTangent=[v[0]-y[0],v[1]-y[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[y[0]-b[0],y[1]-b[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[b[0]-y[0],b[1]-y[1]])}else if("S"===c){var w;y=Rr((w=t[s-1]).currentPoint,v),b=[l[1],l[2]],"C"===w.command?(u.command="C",u.startTangent=[v[0]-y[0],v[1]-y[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]]):(u.command="SQ",u.startTangent=[v[0]-b[0],v[1]-b[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]])}else if("A"===c){var x=.001,E=u.arcParams||{},S=E.cx,I=void 0===S?0:S,T=E.cy,L=void 0===T?0:T,M=E.rx,O=void 0===M?0:M,_=E.ry,N=void 0===_?0:_,A=E.sweepFlag,R=void 0===A?0:A,D=E.startAngle,P=void 0===D?0:D,k=E.endAngle,B=void 0===k?0:k;0===R&&(x*=-1);var F=O*Math.cos(P-x)+I,j=N*Math.sin(P-x)+L;u.startTangent=[F-o[0],j-o[1]];var z=O*Math.cos(P+B+x)+I,H=N*Math.sin(P+B-x)+L;u.endTangent=[v[0]-z,v[1]-H]}t.push(u)}return t}function Pr(e,t){var n,r,o=e.prePoint,i=e.currentPoint,a=e.nextPoint,s=Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2),l=Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2),c=Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2),u=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!u||0===Math.sin(u)||(n=u,0,void 0===r&&(r=1e-5),Math.abs(n-0)<r))return{xExtra:0,yExtra:0};var d=Math.abs(Math.atan2(a[1]-i[1],a[0]-i[0])),h=Math.abs(Math.atan2(a[0]-i[0],a[1]-i[1]));return d=d>Math.PI/2?Math.PI-d:d,h=h>Math.PI/2?Math.PI-h:h,{xExtra:Math.cos(u/2-d)*(t/2*(1/Math.sin(u/2)))-t/2||0,yExtra:Math.cos(h-u/2)*(t/2*(1/Math.sin(u/2)))-t/2||0}}function kr(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function Br(e,t,n,r,o,i){return o>=e&&o<=e+n&&i>=t&&i<=t+r}function Fr(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function jr(e,t){return e[0]===t[0]&&e[1]===t[1]}Wn("rect",Gn),Wn("image",Gn),Wn("circle",Un),Wn("marker",Un),Wn("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}var a=qn(n,r),s=a.x,l=a.y,c={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(c=gr(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Wn("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}return qn(n,r)})),Wn("text",(function(e){var t=e.attr(),n=t.x,r=t.y,o=t.text,i=t.fontSize,a=t.lineHeight,s=t.font;s||(s=Cr(t));var l,c=function(e,t){var n=mr(),r=0;return h(e)||""===e||(n.save(),n.font=t,C(e)&&e.includes("\n")?g(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(o,s);if(c){var u=t.textAlign,d=t.textBaseline,f=yr(o,i,a),p={x:n,y:r-f};u&&("end"===u||"right"===u?p.x-=c:"center"===u&&(p.x-=c/2)),d&&("top"===d?p.y+=f:"middle"===d&&(p.y+=f/2)),l={x:p.x,y:p.y,width:c,height:f}}else l={x:n,y:r,width:0,height:0};return l})),Wn("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,o=function(e,t){for(var n=[],r=[],o=[],i=0;i<e.length;i++){var a=(g=e[i]).currentPoint,s=g.params,l=g.prePoint,c=void 0;switch(g.command){case"Q":c=or.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=ur.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=g.arcParams;c=fr(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(g.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&o.push(g)}n=n.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0})),r=r.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}));var d=y(n),h=y(r),f=m(n),p=m(r);if(0===o.length)return{x:d,y:h,width:f-d,height:p-h};for(i=0;i<o.length;i++){var g;(a=(g=o[i]).currentPoint)[0]===d?d-=Pr(g,t).xExtra:a[0]===f&&(f+=Pr(g,t).xExtra),a[1]===h?h-=Pr(g,t).yExtra:a[1]===p&&(p+=Pr(g,t).yExtra)}return{x:d,y:h,width:f-d,height:p-h}}(e.get("segments")||Dr(n),r),i=o.x,a=o.y,s={minX:i,minY:a,maxX:i+o.width,maxY:a+o.height};return{x:(s=gr(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Wn("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2,a={minX:Math.min(n,o),maxX:Math.max(n,o),minY:Math.min(r,i),maxY:Math.max(r,i)};return{x:(a=gr(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Wn("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,o=t.rx,i=t.ry;return{x:n-o,y:r-i,width:2*o,height:2*i}}));var zr=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Hr=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Wr=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Gr=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Ur(e,t){g(e.match(Gr),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function Vr(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(C(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,o,i=zr.exec(n),a=parseFloat(i[1])%360*(Math.PI/180),s=i[2],l=t.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},o={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},o={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},o={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},o={x:l.maxX,y:l.minY});var c=Math.tan(a),u=c*c,d=(o.x-r.x+c*(o.y-r.y))/(u+1)+r.x,h=c*(o.x-r.x+c*(o.y-r.y))/(u+1)+r.y,f=e.createLinearGradient(r.x,r.y,d,h);return Ur(s,f),f}(e,t,n);if("r"===n[0])return function(e,t,n){var r=Hr.exec(n),o=parseFloat(r[1]),i=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(Gr);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,d=c.maxY-c.minY,h=Math.sqrt(u*u+d*d)/2,f=e.createRadialGradient(c.minX+u*o,c.minY+d*i,0,c.minX+u/2,c.minY+d/2,a*h);return Ur(s,f),f}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,o,i=Wr.exec(n),a=i[1],s=i[2];function l(){r=e.createPattern(o,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return o=new Image,s.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=s,o.complete?l():(o.onload=l,o.src=o.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function Yr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $r(e,t){return Yr(e)*Yr(t)?(e[0]*t[0]+e[1]*t[1])/(Yr(e)*Yr(t)):1}function Xr(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos($r(e,t))}function qr(e,t){var n=t[1],r=t[2],o=w(E(t[3]),2*Math.PI),i=t[4],a=t[5],s=e[0],l=e[1],c=t[6],u=t[7],d=Math.cos(o)*(s-c)/2+Math.sin(o)*(l-u)/2,h=-1*Math.sin(o)*(s-c)/2+Math.cos(o)*(l-u)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;i===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,m=n?g*-r*d/n:0,y=(s+c)/2+Math.cos(o)*v-Math.sin(o)*m,C=(l+u)/2+Math.sin(o)*v+Math.cos(o)*m,b=[(d-v)/n,(h-m)/r],x=[(-1*d-v)/n,(-1*h-m)/r],S=Xr([1,0],b),I=Xr(b,x);return $r(b,x)<=-1&&(I=Math.PI),$r(b,x)>=1&&(I=0),0===a&&I>0&&(I-=2*Math.PI),1===a&&I<0&&(I+=2*Math.PI),{cx:y,cy:C,rx:jr(e,[c,u])?0:n,ry:jr(e,[c,u])?0:r,startAngle:S,endAngle:S+I,xRotation:o,arcFlag:i,sweepFlag:a}}var Kr=Math.sin,Zr=Math.cos,Qr=Math.atan2,Jr=Math.PI;function eo(e,t,n,r,o,i,a){var s=t.stroke,l=t.lineWidth,c=Qr(r-i,n-o),u=new jo({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Zr(Jr/6)+","+10*Kr(Jr/6)+" L0,0 L"+10*Zr(Jr/6)+",-"+10*Kr(Jr/6),stroke:s,lineWidth:l}});u.translate(o,i),u.rotateAtPoint(o,i,c),e.set(a?"startArrowShape":"endArrowShape",u)}function to(e,t,n,r,o,i,a){var l=t.startArrow,c=t.endArrow,u=t.stroke,d=t.lineWidth,h=a?l:c,f=h.d,p=h.fill,g=h.stroke,v=h.lineWidth,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(h,["d","fill","stroke","lineWidth"]),y=Qr(r-i,n-o);f&&(o-=Zr(y)*f,i-=Kr(y)*f);var C=new jo({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:s(s({},m),{stroke:g||u,lineWidth:v||d,fill:p})});C.translate(o,i),C.rotateAtPoint(o,i,y),e.set(a?"startArrowShape":"endArrowShape",C)}function no(e,t,n,r,o){var i=Qr(r-t,n-e);return{dx:Zr(i)*o,dy:Kr(i)*o}}function ro(e,t,n,r,o,i){"object"==typeof t.startArrow?to(e,t,n,r,o,i,!0):t.startArrow?eo(e,t,n,r,o,i,!0):e.set("startArrowShape",null)}function oo(e,t,n,r,o,i){"object"==typeof t.endArrow?to(e,t,n,r,o,i,!1):t.endArrow?eo(e,t,n,r,o,i,!1):e.set("startArrowShape",null)}var io={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function ao(e,t){var n=t.attr();for(var r in n){var o=n[r],i=io[r]?io[r]:r;"matrix"===i&&o?e.transform(o[0],o[1],o[3],o[4],o[6],o[7]):"lineDash"===i&&e.setLineDash?f(o)&&e.setLineDash(o):("strokeStyle"===i||"fillStyle"===i?o=Vr(e,t,o):"globalAlpha"===i&&(o*=e.globalAlpha),e[i]=o)}}function so(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];o.cfg.visible?o.draw(e,n):o.skipDraw()}}function lo(e,t,n){var r=e.get("refreshElements");g(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?ho(t):co(t,n)}function co(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ho(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&co(r.cfg.children,t);else{var o=fo(r,t);r.cfg.refresh=o,o&&r.isGroup()&&co(r.cfg.children,t)}}}function uo(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&uo(n.cfg.children)}}function ho(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&ho(r.get("children"))}}function fo(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&Fr(n,t)}function po(e,t,n,r){var o=n.path,i=n.startArrow,a=n.endArrow;if(o){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<o.length;u++){var d=o[u],h=d[0];if(0===u&&i&&i.d)c=no((f=e.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],i.d);else if(u===o.length-2&&"Z"===o[u+1][0]&&a&&a.d)"Z"===o[u+1][0]&&(c=no((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d));else if(u===o.length-1&&a&&a.d){var f;"Z"!==o[0]&&(c=no((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d))}var p=c.dx,g=c.dy;switch(h){case"M":t.moveTo(d[1]-p,d[2]-g),l=[d[1],d[2]];break;case"L":t.lineTo(d[1]-p,d[2]-g);break;case"Q":t.quadraticCurveTo(d[1],d[2],d[3]-p,d[4]-g);break;case"C":t.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-p,d[6]-g);break;case"A":var v=void 0;r?(v=r[u])||(v=qr(s,d),r[u]=v):v=qr(s,d);var m=v.cx,y=v.cy,C=v.rx,b=v.ry,w=v.startAngle,x=v.endAngle,E=v.xRotation,S=v.sweepFlag;if(t.ellipse)t.ellipse(m,y,C,b,E,w,x,1-S);else{var I=C>b?C:b,T=C>b?1:C/b,L=C>b?b/C:1;t.translate(m,y),t.rotate(E),t.scale(T,L),t.arc(0,0,I,w,x,1-S),t.scale(1/T,1/L),t.rotate(-E),t.translate(-m,-y)}break;case"Z":t.closePath()}if("Z"===h)s=l;else{var M=d.length;s=[d[M-2],d[M-1]]}}}}function go(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}var vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onCanvasChange=function(e){go(this,e)},t.prototype.getShapeBase=function(){return o},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),ao(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];g(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var o=y(t),i=m(t),a=y(n),s=m(n);r={minX:o,minY:a,x:o,y:a,maxX:i,maxY:s,width:i-o,height:s-a};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",Fr(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),ao(e,this),this._applyClip(e,this.getClip()),so(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(jn),mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return o},t.prototype.getGroupBase=function(){return vo},t.prototype.onCanvasChange=function(e){go(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=function(e){return Hn.get(e)}(e),r=n(this),o=t/2,i=r.x-o,a=r.y-o,s=r.x+r.width+o,l=r.y+r.height+o;return{x:i,minX:i,y:a,minY:a,width:r.width+t,height:r.height+t,maxX:s,maxY:l}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),ao(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!Fr(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),ao(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=Fr(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,i=t.fillOpacity;this.isFill()&&(h(i)||1===i?this.fill(e):(e.globalAlpha=i,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(h(o)||1===o||(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,o)},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(zn),yo=mo,Co=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=i.x,s=i.y,l=i.r,c=o/2,u=kr(a,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&u>=l-c&&u<=l+c},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.r;e.beginPath(),e.arc(n,r,o,0,2*Math.PI,!1),e.closePath()},t}(yo);function bo(e,t,n,r){return e/(n*n)+t/(r*r)}var wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=o/2,s=i.x,l=i.y,c=i.rx,u=i.ry,d=(e-s)*(e-s),h=(t-l)*(t-l);return r&&n?bo(d,h,c+a,u+a)<=1:r?bo(d,h,c,u)<=1:!!n&&bo(d,h,c-a,u-a)>=1&&bo(d,h,c+a,u+a)<=1},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.rx,i=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,o,i,0,0,2*Math.PI,!1);else{var a=o>i?o:i,s=o>i?1:o/i,l=o>i?i/o:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(yo);function xo(e){return e instanceof HTMLElement&&C(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(C(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):xo(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,o=t.width,i=t.height,a=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||xo(u))&&(h(a)||h(s)||h(l)||h(c)?e.drawImage(u,n,r,o,i):e.drawImage(u,a,s,l,c,n,r,o,i))},t}(yo);function So(e,t,n,r,o,i,a){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),d=o/2;return i>=s-d&&i<=l+d&&a>=c-d&&a<=u+d&&Zn.pointToLine(e,t,n,r,i,a)<=o/2}var Io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,o=e.y2,i=e.startArrow,a=e.endArrow;i&&ro(this,e,r,o,t,n),a&&oo(this,e,t,n,r,o)},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){if(!n||!o)return!1;var i=this.attr();return So(i.x1,i.y1,i.x2,i.y2,o,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(l=no(n,r,o,i,t.startArrow.d)),s&&s.d&&(c=no(n,r,o,i,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(o-c.dx,i-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,o=e.y2;return Zn.length(t,n,r,o)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2;return Zn.pointAt(n,r,o,i,e)},t}(yo),To=Io,Lo={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return h(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),o=r.x,i=r.y,a=r.symbol||"circle",s=this._getR(r);if(d(a))n=Lr(n=(e=a)(o,i,s));else{if(!(e=t.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=e(o,i,s)}return n},t.prototype.createPath=function(e){po(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=Lo,t}(yo),Oo=Mo;function _o(e,t,n){var r=mr();return e.createPath(r),r.isPointInPath(t,n)}var No=1e-6;function Ao(e){return Math.abs(e)<No?0:e<0?-1:1}function Ro(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Do(e,t,n){var r=!1,o=e.length;if(o<=2)return!1;for(var i=0;i<o;i++){var a=e[i],s=e[(i+1)%o];if(Ro(a,s,[t,n]))return!0;Ao(a[1]-n)>0!=Ao(s[1]-n)>0&&Ao(t-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function Po(e,t,n,r,o,i,a,s){var l=(Math.atan2(s-t,a-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>o)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return kr(c.x,c.y,a,s)<=i/2}var ko=De,Bo=s({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var o=e[r][0];if("C"===o||"A"===o||"Q"===o){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],o=[],i=0;i<t;i++){var a=e[i],s=a[0];"M"===s?(o.length&&(r.push(o),o=[]),o.push([a[1],a[2]])):"Z"===s?o.length&&(n.push(o),o=[]):o.push([a[1],a[2]])}return o.length>0&&r.push(o),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,o){for(var i=!1,a=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,d=l.prePoint,h=l.box;if(!h||Br(h.x-a,h.y-a,h.width+t,h.height+t,n,r)){switch(l.command){case"L":case"Z":i=So(d[0],d[1],c[0],c[1],t,n,r);break;case"Q":i=or.pointDistance(d[0],d[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":i=ur.pointDistance(d[0],d[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,o)<=t/2;break;case"A":var f=l.arcParams,p=f.cx,g=f.cy,v=f.rx,m=f.ry,y=f.startAngle,C=f.endAngle,b=f.xRotation,w=[n,r,1],x=v>m?v:m;Oe(w,w,ko(null,[["t",-p,-g],["r",-b],["s",1/(v>m?1:v/m),1/(v>m?m/v:1)]])),i=Po(0,0,x,y,C,t,w[0],w[1])}if(i)break}}return i}},le);function Fo(e,t,n){for(var r=!1,o=0;o<e.length&&!(r=Do(e[o],t,n));o++);return r}var jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=Lr(e);var t=Bo.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Dr(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&ro(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]),r&&oo(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Bo.isPointInStroke(i,o,e,t,l)}if(!s&&r)if(a)s=_o(this,e,t);else{var c=this.attr("path"),u=Bo.extractPolygons(c);s=Fo(u.polygons,e,t)||Fo(u.polylines,e,t)}return s},t.prototype.createPath=function(e){po(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return h(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var o=this.get("curve");if(!r||0===r.length)return o?{x:o[0][1],y:o[0][2]}:null;g(r,(function(r,o){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=o)}));var i=o[n];if(h(i)||h(n))return null;var a=i.length,s=o[n+1];return ur.pointAt(i[a-2],i[a-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Bo.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,o=0,i=0,a=[],s=this.get("curve");s&&(g(s,(function(e,t){n=s[t+1],r=e.length,n&&(o+=ur.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",o),0!==o?(g(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=i/o,t=ur.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),i+=t||0,e[1]=i/o,a.push(e))})),this.set("tCache",a)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([n[0]-o[0],n[1]-o[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,o=t[n-1].currentPoint,i=t[n-1].endTangent;e=[],i?(e.push([o[0]-i[0],o[1]-i[1]]),e.push([o[0],o[1]])):(e.push([r[0],r[1]]),e.push([o[0],o[1]]))}return e},t}(yo);function zo(e,t,n,r,o){var i=e.length;if(i<2)return!1;for(var a=0;a<i-1;a++)if(So(e[a][0],e[a][1],e[a+1][0],e[a+1][1],t,n,r))return!0;if(o){var s=e[0],l=e[i-1];if(So(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var Ho=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr().points,a=!1;return n&&(a=zo(i,o,e,t,!0)),!a&&r&&(a=Do(i,e,t)),a},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(yo),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,o=t.endArrow,i=n.length,a=n[0][0],s=n[0][1],l=n[i-1][0],c=n[i-1][1];r&&ro(this,e,n[1][0],n[1][1],a,s),o&&oo(this,e,n[i-2][0],n[i-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!(!n||!o)&&zo(this.attr().points,o,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,o=t.endArrow,i=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],c=n[i-1][0],u=n[i-1][1];r&&r.d&&(s+=(a=no(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy),o&&o.d&&(c-=(a=no(n[i-2][0],n[i-2][1],c,u,o.d)).dx,u-=a.dy),e.beginPath(),e.moveTo(s,l);for(var d=0;d<i-1;d++){var h=n[d];e.lineTo(h[0],h[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return h(t)?(this.set("totalLength",function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];t+=$n(r[0],r[1],o[0],o[1])}return t}(e)}(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),g(o,(function(r,o){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=o)})),Zn.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,o=0,i=[];g(e,(function(a,s){e[s+1]&&((n=[])[0]=o/t,r=Zn.length(a[0],a[1],e[s+1][0],e[s+1][1]),o+=r,n[1]=o/t,i.push(n))})),this.set("tCache",i)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(yo),Go=Wo,Uo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=i.x,s=i.y,l=i.width,c=i.height,u=i.radius;if(u){var d=!1;return n&&(d=function(e,t,n,r,o,i,a,s){return So(e+o,t,e+n-o,t,i,a,s)||So(e+n,t+o,e+n,t+r-o,i,a,s)||So(e+n-o,t+r,e+o,t+r,i,a,s)||So(e,t+r-o,e,t+o,i,a,s)||Po(e+n-o,t+o,o,1.5*Math.PI,2*Math.PI,i,a,s)||Po(e+n-o,t+r-o,o,0,.5*Math.PI,i,a,s)||Po(e+o,t+r-o,o,.5*Math.PI,Math.PI,i,a,s)||Po(e+o,t+o,o,Math.PI,1.5*Math.PI,i,a,s)}(a,s,l,c,u,o,e,t)),!d&&r&&(d=_o(this,e,t)),d}var h=o/2;return r&&n?Br(a-h,s-h,l+h,c+h,e,t):r?Br(a,s,l,c,e,t):n?function(e,t,n,r,o,i,a){var s=o/2;return Br(e-s,t-s,n,o,i,a)||Br(e+n-s,t-s,o,r,i,a)||Br(e+s,t+r-s,n,o,i,a)||Br(e-s,t+s,o,r,i,a)}(a,s,l,c,o,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,o=t.width,i=t.height,a=t.radius;if(e.beginPath(),0===a)e.rect(n,r,o,i);else{var s=function(e){var t=0,n=0,r=0,o=0;return f(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,[t,n,r,o]}(a),l=s[0],c=s[1],u=s[2],d=s[3];e.moveTo(n+l,r),e.lineTo(n+o-c,r),0!==c&&e.arc(n+o-c,r+c,c,-Math.PI/2,0),e.lineTo(n+o,r+i-u),0!==u&&e.arc(n+o-u,r+i-u,u,0,Math.PI/2),e.lineTo(n+d,r+i),0!==d&&e.arc(n+d,r+i-d,d,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(yo),Vo=Uo,Yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return s(s({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=Cr(e)},t.prototype._setText=function(e){var t=null;C(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,o=this.attrs,i=o.textBaseline,a=o.x,s=o.y,l=1*o.fontSize,c=this._getSpaceingY(),u=yr(o.text,o.fontSize,o.lineHeight);g(t,(function(t,o){r=s+o*(c+l)-u+l,"middle"===i&&(r+=u-l-(u-l)/2),"top"===i&&(r+=u-l),h(t)||(n?e.fillText(t,a,r):e.strokeText(t,a,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,o=n.y,i=this.get("textArr");if(i)this._drawTextArr(e,i,t);else{var a=n.text;h(a)||(t?e.fillText(a,r,o):e.strokeText(a,r,o))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,i=t.fillOpacity;this.isStroke()&&n>0&&(h(o)||1===o||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(h(i)||1===i?this.fill(e):(e.globalAlpha=i,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(yo),$o=Yo;function Xo(e,t,n){var r,o,i=e.getTotalMatrix();if(i){var a=(r=[t,n,1],(o=i)?ke(Be(o),r):r);return[a[0],a[1]]}return[t,n]}function qo(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!ve(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=Xo(e,t,n),o=r[0],i=r[1];if(e.isClipped(o,i))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=a.minX&&t<=a.maxX&&n>=a.minY&&n<=a.maxY}function Ko(e,t,n){if(!qo(e,t,n))return null;for(var r=null,o=e.getChildren(),i=o.length-1;i>=0;i--){var a=o[i];if(a.isGroup())r=Ko(a,t,n);else if(qo(a,t,n)){var s=a,l=Xo(a,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=a)}if(r)break}return r}var Zo,Qo,Jo,ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return o},t.prototype.getGroupBase=function(){return vo},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),o=this.get("el"),i=this.getPixelRatio();o.width=i*t,o.height=i*n,i>1&&r.scale(i,i)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?Ko(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();return t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],o=[];return g(e,(function(e){var i=function(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var o=e.get("cacheCanvasBBox"),i=o&&!(!o.width||!o.height),a=e.getCanvasBBox(),s=a&&!(!a.width||!a.height);i&&s?(r=a,t=(n=o)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):i?t=o:s&&(t=a)}return t}(e);i&&(t.push(i.minX),n.push(i.minY),r.push(i.maxX),o.push(i.maxY))})),{minX:y(t),minY:y(n),maxX:m(r),maxY:m(o)}}(t),e&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&Fr(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n)))),e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),ao(e,this),so(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),ao(e,this),lo(this,n,r),so(e,n,r),e.restore()):t.length&&uo(t),g(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Fn);!function(e){e.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",e.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",e.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",e.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",e.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",e.HOVER_EVENT="interaction:hover",e.TREND_ICON_CLICK="interaction:trend-icon-click"}(Zo||(Zo={})),function(e){e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_OUT="mouseout",e.MOUSE_LEAVE="mouseleave",e.MOUSE_UP="mouseup",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.CLICK="click",e.HOVER="hover",e.DOUBLE_CLICK="dblclick",e.CONTEXT_MENU="contextmenu"}(Qo||(Qo={})),function(e){e.ROW_CELL_HOVER="row-cell:hover",e.ROW_CELL_CLICK="row-cell:click",e.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",e.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",e.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",e.ROW_CELL_MOUSE_UP="row-cell:mouse-up",e.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",e.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",e.ROW_CELL_SCROLL="row-cell:scroll",e.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",e.COL_CELL_HOVER="col-cell:hover",e.COL_CELL_CLICK="col-cell:click",e.COL_CELL_DOUBLE_CLICK="col-cell:double-click",e.COL_CELL_CONTEXT_MENU="col-cell:context-menu",e.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",e.COL_CELL_MOUSE_UP="col-cell:mouse-up",e.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",e.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",e.DATA_CELL_HOVER="data-cell:hover",e.DATA_CELL_CLICK="data-cell:click",e.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",e.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",e.DATA_CELL_MOUSE_UP="data-cell:mouse-up",e.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",e.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",e.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",e.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",e.DATA_CELL_SELECT_MOVE="data-cell:select-move",e.CORNER_CELL_HOVER="corner-cell:hover",e.CORNER_CELL_CLICK="corner-cell:click",e.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",e.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",e.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",e.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",e.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",e.MERGED_CELLS_HOVER="merged-cells:hover",e.MERGED_CELLS_CLICK="merged-cells:click",e.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",e.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",e.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",e.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",e.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",e.RANGE_SORT="sort:range-sort",e.RANGE_SORTED="sort:range-sorted",e.RANGE_FILTER="filter:range-filter",e.RANGE_FILTERED="filter:range-filtered",e.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",e.LAYOUT_CELL_SCROLL="layout:cell-scroll",e.LAYOUT_PAGINATION="layout:pagination",e.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",e.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",e.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",e.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",e.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",e.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",e.LAYOUT_AFTER_RENDER="layout:after-render",e.LAYOUT_BEFORE_RENDER="layout:before-render",e.LAYOUT_DESTROY="layout:destroy",e.LAYOUT_RESIZE="layout:resize",e.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",e.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",e.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",e.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",e.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",e.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",e.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",e.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",e.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",e.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",e.GLOBAL_KEYBOARD_UP="global:keyboard-up",e.GLOBAL_COPIED="global:copied",e.GLOBAL_MOUSE_UP="global:mouse-up",e.GLOBAL_MOUSE_MOVE="global:mouse-move",e.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",e.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",e.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",e.GLOBAL_CONTEXT_MENU="global:context-menu",e.GLOBAL_CLICK="global:click",e.GLOBAL_DOUBLE_CLICK="global:double-click",e.GLOBAL_SELECTED="global:selected",e.GLOBAL_HOVER="global:hover",e.GLOBAL_RESET="global:reset",e.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",e.GLOBAL_SCROLL="global:scroll"}(Jo||(Jo={}));var ti,ni="$$value$$",ri="$$extra$$",oi="$$extra_column$$",ii="$$total$$",ai="$$series_number$$",si="mergedCellsGroup",li="frozenRowGroup",ci="frozenColGroup",ui="frozenTrailingRowGroup",di="frozenTrailingColGroup",hi="frozenTopGroup",fi="frozenBottomGroup",pi="rowResizeAreaGroup",gi="rowFrozenResizeAreaGroup",vi="frozenSplitLine",mi="rowIndexResizeAreaGroup",yi="cornerResizeAreaGroup",Ci="colResizeAreaGroup",bi="colFrozenResizeAreaGroup",wi="gridGroup",xi="horizontal-resize-area-",Ei="root",Si="[&]",Ii="-",Ti=/^root\[&\]*/;!function(e){e.Line="line",e.Bar="bar",e.Bullet="bullet"}(ti||(ti={}));var Li,Mi,Oi,_i="square",Ni="...",Ai="antv-s2",Ri="valueRanges",Di={},Pi="#000000",ki="#FFFFFF",Bi={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};!function(e){e.ROW="row",e.COL="col",e.TRAILING_ROW="trailingRow",e.TRAILING_COL="trailingCol",e.SCROLL="scroll",e.TOP="top",e.BOTTOM="bottom"}(Mi||(Mi={})),function(e){e.FROZEN_COL="frozenCol",e.FROZEN_ROW="frozenRow",e.FROZEN_TRAILING_COL="frozenTrailingCol",e.FROZEN_TRAILING_ROW="frozenTrailingRow"}(Oi||(Oi={}));var Fi,ji,zi,Hi=((Li={})[Mi.ROW]="frozenRowGroup",Li[Mi.COL]="frozenColGroup",Li[Mi.TRAILING_COL]="frozenTrailingColGroup",Li[Mi.TRAILING_ROW]="frozenTrailingRowGroup",Li[Mi.SCROLL]="panelScrollGroup",Li[Mi.TOP]="frozenTopGroup",Li[Mi.BOTTOM]="frozenBottomGroup",Li);!function(e){e.CORNER_CELL_CLICK="cornerCellClick",e.DATA_CELL_CLICK="dataCellClick",e.MERGED_CELLS_CLICK="mergedCellsClick",e.ROW_COLUMN_CLICK="rowColumnClick",e.ROW_TEXT_CLICK="rowTextClick",e.HOVER="hover",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.COL_ROW_RESIZE="rowColResize",e.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",e.RANGE_SELECTION="rangeSelection",e.SELECTED_CELL_MOVE="selectedCellMove"}(Fi||(Fi={})),function(e){e.ALL_SELECTED="allSelected",e.SELECTED="selected",e.UNSELECTED="unselected",e.HOVER="hover",e.HOVER_FOCUS="hoverFocus",e.HIGHLIGHT="highlight",e.SEARCH_RESULT="searchResult",e.PREPARE_SELECT="prepareSelect"}(ji||(ji={})),function(e){e.DATA_CELL="dataCell",e.HEADER_CELL="headerCell",e.ROW_CELL="rowCell",e.COL_CELL="colCell",e.CORNER_CELL="cornerCell",e.MERGED_CELL="mergedCell"}(zi||(zi={}));var Wi,Gi,Ui,Vi,Yi={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},$i={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},Xi="interactionStateInfo";!function(e){e.CLICK="click",e.UN_DRAGGED="unDragged",e.DRAGGED="dragged"}(Wi||(Wi={})),function(e){e.SHIFT="Shift",e.COPY="c",e.ESC="Escape",e.META="Meta",e.CONTROL="Control",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"}(Gi||(Gi={})),function(e){e.ASC="ASC",e.DESC="DESC"}(Ui||(Ui={})),function(e){e.HOVER="hover",e.CLICK="click",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.MULTI_SELECTION="multiSelection",e.RESIZE="resize"}(Vi||(Vi={}));var qi,Ki,Zi,Qi,Ji,ea,ta,na={x:{value:0,scroll:!1},y:{value:0,scroll:!1}};!function(e){e.CONTENT="content",e.CANVAS="canvas"}(qi||(qi={})),function(e){e.SCROLL_UP="scrollUp",e.SCROLL_DOWN="scrollDown"}(Ki||(Ki={})),function(e){e[e.SCROLL_UP=-1]="SCROLL_UP",e[e.SCROLL_DOWN=1]="SCROLL_DOWN"}(Zi||(Zi={})),function(e){e.Horizontal="col",e.Vertical="row"}(Qi||(Qi={})),function(e){e.Field="field",e.Cell="cell",e.Tree="tree",e.Series="series"}(Ji||(Ji={})),function(e){e.ALL="all",e.CURRENT="current"}(ea||(ea={})),function(e){e.Adaptive="adaptive",e.ColAdaptive="colAdaptive",e.Compact="compact"}(ta||(ta={}));var ra={layoutWidthType:ta.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},oa={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:800},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:qi.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:ea.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:ra,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Ii,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},ia=function(e,t){return ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ia(e,t)};function aa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ia(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var sa=function(){return sa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sa.apply(this,arguments)};function la(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function ca(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ua(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function da(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var ha="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,fa="object"==typeof self&&self&&self.Object===Object&&self,pa=ha||fa||Function("return this")(),ga=pa.Symbol,va=Object.prototype,ma=va.hasOwnProperty,ya=va.toString,Ca=ga?ga.toStringTag:void 0,ba=Object.prototype.toString,wa="[object Null]",xa="[object Undefined]",Ea=ga?ga.toStringTag:void 0;function Sa(e){return null==e?void 0===e?xa:wa:Ea&&Ea in Object(e)?function(e){var t=ma.call(e,Ca),n=e[Ca];try{e[Ca]=void 0;var r=!0}catch(e){}var o=ya.call(e);return r&&(t?e[Ca]=n:delete e[Ca]),o}(e):function(e){return ba.call(e)}(e)}function Ia(e){return null!=e&&"object"==typeof e}var Ta="[object Symbol]";function La(e){return"symbol"==typeof e||Ia(e)&&Sa(e)==Ta}var Ma=NaN;function Oa(e){return"number"==typeof e?e:La(e)?Ma:+e}function _a(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var Na=Array.isArray,Aa=1/0,Ra=ga?ga.prototype:void 0,Da=Ra?Ra.toString:void 0;function Pa(e){if("string"==typeof e)return e;if(Na(e))return _a(e,Pa)+"";if(La(e))return Da?Da.call(e):"";var t=e+"";return"0"==t&&1/e==-Aa?"-0":t}function ka(e,t){return function(n,r){var o;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(o=n),void 0!==r){if(void 0===o)return r;"string"==typeof n||"string"==typeof r?(n=Pa(n),r=Pa(r)):(n=Oa(n),r=Oa(r)),o=e(n,r)}return o}}var Ba=ka((function(e,t){return e+t}),0),Fa=/\s/;function ja(e){for(var t=e.length;t--&&Fa.test(e.charAt(t)););return t}var za=/^\s+/;function Ha(e){return e?e.slice(0,ja(e)+1).replace(za,""):e}function Wa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ga=NaN,Ua=/^[-+]0x[0-9a-f]+$/i,Va=/^0b[01]+$/i,Ya=/^0o[0-7]+$/i,$a=parseInt;function Xa(e){if("number"==typeof e)return e;if(La(e))return Ga;if(Wa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ha(e);var n=Va.test(e);return n||Ya.test(e)?$a(e.slice(2),n?2:8):Ua.test(e)?Ga:+e}var qa=1/0,Ka=17976931348623157e292;function Za(e){return e?(e=Xa(e))===qa||e===-qa?(e<0?-1:1)*Ka:e==e?e:0:0===e?e:0}function Qa(e){var t=Za(e),n=t%1;return t==t?n?t-n:t:0}function Ja(e){return e}var es="[object AsyncFunction]",ts="[object Function]",ns="[object GeneratorFunction]",rs="[object Proxy]";function os(e){if(!Wa(e))return!1;var t=Sa(e);return t==ts||t==ns||t==es||t==rs}var is,as=pa["__core-js_shared__"],ss=(is=/[^.]+$/.exec(as&&as.keys&&as.keys.IE_PROTO||""))?"Symbol(src)_1."+is:"",ls=Function.prototype.toString;function cs(e){if(null!=e){try{return ls.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var us=/^\[object .+?Constructor\]$/,ds=Function.prototype,hs=Object.prototype,fs=ds.toString,ps=hs.hasOwnProperty,gs=RegExp("^"+fs.call(ps).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vs(e){return!(!Wa(e)||function(e){return!!ss&&ss in e}(e))&&(os(e)?gs:us).test(cs(e))}function ms(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return vs(n)?n:void 0}var ys=ms(pa,"WeakMap"),Cs=ys&&new ys,bs=Cs?function(e,t){return Cs.set(e,t),e}:Ja,ws=bs,xs=Object.create,Es=function(){function e(){}return function(t){if(!Wa(t))return{};if(xs)return xs(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Ss=Es;function Is(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ss(e.prototype),r=e.apply(n,t);return Wa(r)?r:n}}var Ts=1;function Ls(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Ms=Math.max;function Os(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,l=t.length,c=Ms(i-a,0),u=Array(l+c),d=!r;++s<l;)u[s]=t[s];for(;++o<a;)(d||o<i)&&(u[n[o]]=e[o]);for(;c--;)u[s++]=e[o++];return u}var _s=Math.max;function Ns(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,l=-1,c=t.length,u=_s(i-s,0),d=Array(u+c),h=!r;++o<u;)d[o]=e[o];for(var f=o;++l<c;)d[f+l]=t[l];for(;++a<s;)(h||o<i)&&(d[f+n[a]]=e[o++]);return d}function As(){}var Rs=4294967295;function Ds(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rs,this.__views__=[]}function Ps(){}Ds.prototype=Ss(As.prototype),Ds.prototype.constructor=Ds;var ks=Cs?function(e){return Cs.get(e)}:Ps,Bs=ks,Fs={},js=Object.prototype.hasOwnProperty;function zs(e){for(var t=e.name+"",n=Fs[t],r=js.call(Fs,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Hs(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ws(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Gs(e){if(e instanceof Ds)return e.clone();var t=new Hs(e.__wrapped__,e.__chain__);return t.__actions__=Ws(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Hs.prototype=Ss(As.prototype),Hs.prototype.constructor=Hs;var Us=Object.prototype.hasOwnProperty;function Vs(e){if(Ia(e)&&!Na(e)&&!(e instanceof Ds)){if(e instanceof Hs)return e;if(Us.call(e,"__wrapped__"))return Gs(e)}return new Hs(e)}function Ys(e){var t=zs(e),n=Vs[t];if("function"!=typeof n||!(t in Ds.prototype))return!1;if(e===n)return!0;var r=Bs(n);return!!r&&e===r[0]}Vs.prototype=As.prototype,Vs.prototype.constructor=Vs;var $s=Date.now;function Xs(e){var t=0,n=0;return function(){var r=$s(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qs=Xs(ws),Ks=/\{\n\/\* \[wrapped with (.+)\] \*/,Zs=/,? & /,Qs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Js(e){return function(){return e}}var el=function(){try{var e=ms(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),tl=el,nl=tl?function(e,t){return tl(e,"toString",{configurable:!0,enumerable:!1,value:Js(t),writable:!0})}:Ja,rl=Xs(nl);function ol(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function il(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function al(e){return e!=e}function sl(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):il(e,al,n)}function ll(e,t){return!(null==e||!e.length)&&sl(e,t,0)>-1}var cl=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function ul(e,t,n){var r=t+"";return rl(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Qs,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ol(cl,(function(n){var r="_."+n[0];t&n[1]&&!ll(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Ks);return t?t[1].split(Zs):[]}(r),n)))}var dl=1,hl=2,fl=4,pl=8,gl=32,vl=64;function ml(e,t,n,r,o,i,a,s,l,c){var u=t&pl;t|=u?gl:vl,(t&=~(u?vl:gl))&fl||(t&=~(dl|hl));var d=[e,t,o,u?i:void 0,u?a:void 0,u?void 0:i,u?void 0:a,s,l,c],h=n.apply(void 0,d);return Ys(e)&&qs(h,d),h.placeholder=r,ul(h,e,t)}function yl(e){return e.placeholder}var Cl=9007199254740991,bl=/^(?:0|[1-9]\d*)$/;function wl(e,t){var n=typeof e;return!!(t=null==t?Cl:t)&&("number"==n||"symbol"!=n&&bl.test(e))&&e>-1&&e%1==0&&e<t}var xl=Math.min,El="__lodash_placeholder__";function Sl(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==El||(e[n]=El,i[o++]=n)}return i}var Il=1,Tl=2,Ll=8,Ml=16,Ol=128,_l=512;function Nl(e,t,n,r,o,i,a,s,l,c){var u=t&Ol,d=t&Il,h=t&Tl,f=t&(Ll|Ml),p=t&_l,g=h?void 0:Is(e);return function v(){for(var m=arguments.length,y=Array(m),C=m;C--;)y[C]=arguments[C];if(f)var b=yl(v),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,b);if(r&&(y=Os(y,r,o,f)),i&&(y=Ns(y,i,a,f)),m-=w,f&&m<c){var x=Sl(y,b);return ml(e,t,Nl,v.placeholder,n,y,x,s,l,c-m)}var E=d?n:this,S=h?E[e]:e;return m=y.length,s?y=function(e,t){for(var n=e.length,r=xl(t.length,n),o=Ws(e);r--;){var i=t[r];e[r]=wl(i,n)?o[i]:void 0}return e}(y,s):p&&m>1&&y.reverse(),u&&l<m&&(y.length=l),this&&this!==pa&&this instanceof v&&(S=g||Is(S)),S.apply(E,y)}}var Al=1,Rl="__lodash_placeholder__",Dl=1,Pl=2,kl=4,Bl=8,Fl=128,jl=256,zl=Math.min,Hl="Expected a function",Wl=1,Gl=2,Ul=8,Vl=16,Yl=32,$l=64,Xl=Math.max;function ql(e,t,n,r,o,i,a,s){var l=t&Gl;if(!l&&"function"!=typeof e)throw new TypeError(Hl);var c=r?r.length:0;if(c||(t&=~(Yl|$l),r=o=void 0),a=void 0===a?a:Xl(Qa(a),0),s=void 0===s?s:Qa(s),c-=o?o.length:0,t&$l){var u=r,d=o;r=o=void 0}var h=l?void 0:Bs(e),f=[e,t,n,r,o,u,d,i,a,s];if(h&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<(Dl|Pl|Fl),a=r==Fl&&n==Bl||r==Fl&&n==jl&&e[7].length<=t[8]||r==(Fl|jl)&&t[7].length<=t[8]&&n==Bl;if(!i&&!a)return e;r&Dl&&(e[2]=t[2],o|=n&Dl?0:kl);var s=t[3];if(s){var l=e[3];e[3]=l?Os(l,s,t[4]):s,e[4]=l?Sl(e[3],Rl):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ns(l,s,t[6]):s,e[6]=l?Sl(e[5],Rl):t[6]),(s=t[7])&&(e[7]=s),r&Fl&&(e[8]=null==e[8]?t[8]:zl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(f,h),e=f[0],t=f[1],n=f[2],r=f[3],o=f[4],!(s=f[9]=void 0===f[9]?l?0:e.length:Xl(f[9]-c,0))&&t&(Ul|Vl)&&(t&=~(Ul|Vl)),t&&t!=Wl)p=t==Ul||t==Vl?function(e,t,n){var r=Is(e);return function o(){for(var i=arguments.length,a=Array(i),s=i,l=yl(o);s--;)a[s]=arguments[s];var c=i<3&&a[0]!==l&&a[i-1]!==l?[]:Sl(a,l);return(i-=c.length)<n?ml(e,t,Nl,o.placeholder,void 0,a,c,void 0,void 0,n-i):Ls(this&&this!==pa&&this instanceof o?r:e,this,a)}}(e,t,s):t!=Yl&&t!=(Wl|Yl)||o.length?Nl.apply(void 0,f):function(e,t,n,r){var o=t&Al,i=Is(e);return function t(){for(var a=-1,s=arguments.length,l=-1,c=r.length,u=Array(c+s),d=this&&this!==pa&&this instanceof t?i:e;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++a];return Ls(d,o?n:this,u)}}(e,t,n,r);else var p=function(e,t,n){var r=t&Ts,o=Is(e);return function t(){return(this&&this!==pa&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return ul((h?ws:qs)(p,f),e,t)}function Kl(e,t,n){return t=n?void 0:t,ql(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function Zl(e,t,n){"__proto__"==t&&tl?tl(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ql(e,t){return e===t||e!=e&&t!=t}var Jl=Object.prototype.hasOwnProperty;function ec(e,t,n){var r=e[t];Jl.call(e,t)&&Ql(r,n)&&(void 0!==n||t in e)||Zl(e,t,n)}function tc(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?Zl(n,s,l):ec(n,s,l)}return n}var nc=Math.max;function rc(e,t,n){return t=nc(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=nc(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Ls(e,this,s)}}function oc(e,t){return rl(rc(e,t,Ja),e+"")}var ic=9007199254740991;function ac(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ic}function sc(e){return null!=e&&ac(e.length)&&!os(e)}function lc(e,t,n){if(!Wa(n))return!1;var r=typeof t;return!!("number"==r?sc(n)&&wl(t,n.length):"string"==r&&t in n)&&Ql(n[t],e)}function cc(e){return oc((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&lc(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))}var uc=Object.prototype;function dc(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||uc)}function hc(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function fc(e){return Ia(e)&&"[object Arguments]"==Sa(e)}var pc=Object.prototype,gc=pc.hasOwnProperty,vc=pc.propertyIsEnumerable,mc=fc(function(){return arguments}())?fc:function(e){return Ia(e)&&gc.call(e,"callee")&&!vc.call(e,"callee")};function yc(){return!1}var Cc="object"==typeof exports&&exports&&!exports.nodeType&&exports,bc=Cc&&e&&!e.nodeType&&e,wc=bc&&bc.exports===Cc?pa.Buffer:void 0,xc=(wc?wc.isBuffer:void 0)||yc,Ec={};function Sc(e){return function(t){return e(t)}}Ec["[object Float32Array]"]=Ec["[object Float64Array]"]=Ec["[object Int8Array]"]=Ec["[object Int16Array]"]=Ec["[object Int32Array]"]=Ec["[object Uint8Array]"]=Ec["[object Uint8ClampedArray]"]=Ec["[object Uint16Array]"]=Ec["[object Uint32Array]"]=!0,Ec["[object Arguments]"]=Ec["[object Array]"]=Ec["[object ArrayBuffer]"]=Ec["[object Boolean]"]=Ec["[object DataView]"]=Ec["[object Date]"]=Ec["[object Error]"]=Ec["[object Function]"]=Ec["[object Map]"]=Ec["[object Number]"]=Ec["[object Object]"]=Ec["[object RegExp]"]=Ec["[object Set]"]=Ec["[object String]"]=Ec["[object WeakMap]"]=!1;var Ic="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tc=Ic&&e&&!e.nodeType&&e,Lc=Tc&&Tc.exports===Ic&&ha.process,Mc=function(){try{return Tc&&Tc.require&&Tc.require("util").types||Lc&&Lc.binding&&Lc.binding("util")}catch(e){}}(),Oc=Mc&&Mc.isTypedArray,_c=Oc?Sc(Oc):function(e){return Ia(e)&&ac(e.length)&&!!Ec[Sa(e)]},Nc=Object.prototype.hasOwnProperty;function Ac(e,t){var n=Na(e),r=!n&&mc(e),o=!n&&!r&&xc(e),i=!n&&!r&&!o&&_c(e),a=n||r||o||i,s=a?hc(e.length,String):[],l=s.length;for(var c in e)!t&&!Nc.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wl(c,l))||s.push(c);return s}function Rc(e,t){return function(n){return e(t(n))}}var Dc=Rc(Object.keys,Object),Pc=Object.prototype.hasOwnProperty;function kc(e){if(!dc(e))return Dc(e);var t=[];for(var n in Object(e))Pc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Bc(e){return sc(e)?Ac(e):kc(e)}var Fc=Object.prototype.hasOwnProperty,jc=cc((function(e,t){if(dc(t)||sc(t))tc(t,Bc(t),e);else for(var n in t)Fc.call(t,n)&&ec(e,n,t[n])})),zc=jc,Hc=Object.prototype.hasOwnProperty;function Wc(e){return sc(e)?Ac(e,!0):function(e){if(!Wa(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=dc(e),n=[];for(var r in e)("constructor"!=r||!t&&Hc.call(e,r))&&n.push(r);return n}(e)}var Gc=cc((function(e,t){tc(t,Wc(t),e)})),Uc=Gc,Vc=cc((function(e,t,n,r){tc(t,Wc(t),e,r)})),Yc=Vc,$c=cc((function(e,t,n,r){tc(t,Bc(t),e,r)})),Xc=$c,qc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kc=/^\w*$/;function Zc(e,t){if(Na(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!La(e))||Kc.test(e)||!qc.test(e)||null!=t&&e in Object(t)}var Qc=ms(Object,"create"),Jc=Object.prototype.hasOwnProperty,eu=Object.prototype.hasOwnProperty;function tu(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function nu(e,t){for(var n=e.length;n--;)if(Ql(e[n][0],t))return n;return-1}tu.prototype.clear=function(){this.__data__=Qc?Qc(null):{},this.size=0},tu.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},tu.prototype.get=function(e){var t=this.__data__;if(Qc){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Jc.call(t,e)?t[e]:void 0},tu.prototype.has=function(e){var t=this.__data__;return Qc?void 0!==t[e]:eu.call(t,e)},tu.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qc&&void 0===t?"__lodash_hash_undefined__":t,this};var ru=Array.prototype.splice;function ou(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ou.prototype.clear=function(){this.__data__=[],this.size=0},ou.prototype.delete=function(e){var t=this.__data__,n=nu(t,e);return!(n<0||(n==t.length-1?t.pop():ru.call(t,n,1),--this.size,0))},ou.prototype.get=function(e){var t=this.__data__,n=nu(t,e);return n<0?void 0:t[n][1]},ou.prototype.has=function(e){return nu(this.__data__,e)>-1},ou.prototype.set=function(e,t){var n=this.__data__,r=nu(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var iu=ms(pa,"Map");function au(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function su(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}su.prototype.clear=function(){this.size=0,this.__data__={hash:new tu,map:new(iu||ou),string:new tu}},su.prototype.delete=function(e){var t=au(this,e).delete(e);return this.size-=t?1:0,t},su.prototype.get=function(e){return au(this,e).get(e)},su.prototype.has=function(e){return au(this,e).has(e)},su.prototype.set=function(e,t){var n=au(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function lu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(lu.Cache||su),n}lu.Cache=su;var cu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uu=/\\(\\)?/g,du=function(e){var t=lu((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cu,(function(e,n,r,o){t.push(r?o.replace(uu,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),hu=du;function fu(e){return null==e?"":Pa(e)}function pu(e,t){return Na(e)?e:Zc(e,t)?[e]:hu(fu(e))}var gu=1/0;function vu(e){if("string"==typeof e||La(e))return e;var t=e+"";return"0"==t&&1/e==-gu?"-0":t}function mu(e,t){for(var n=0,r=(t=pu(t,e)).length;null!=e&&n<r;)e=e[vu(t[n++])];return n&&n==r?e:void 0}function yu(e,t,n){var r=null==e?void 0:mu(e,t);return void 0===r?n:r}function Cu(e,t){for(var n=-1,r=t.length,o=Array(r),i=null==e;++n<r;)o[n]=i?void 0:yu(e,t[n]);return o}function bu(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var wu=ga?ga.isConcatSpreadable:void 0;function xu(e){return Na(e)||mc(e)||!!(wu&&e&&e[wu])}function Eu(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=xu),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?Eu(s,t-1,n,r,o):bu(o,s):r||(o[o.length]=s)}return o}function Su(e){return null!=e&&e.length?Eu(e,1):[]}function Iu(e){return rl(rc(e,void 0,Su),e+"")}var Tu=Iu(Cu),Lu=Rc(Object.getPrototypeOf,Object),Mu="[object Object]",Ou=Function.prototype,_u=Object.prototype,Nu=Ou.toString,Au=_u.hasOwnProperty,Ru=Nu.call(Object);function Du(e){if(!Ia(e)||Sa(e)!=Mu)return!1;var t=Lu(e);if(null===t)return!0;var n=Au.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Nu.call(n)==Ru}function Pu(e){if(!Ia(e))return!1;var t=Sa(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Du(e)}var ku=oc((function(e,t){try{return Ls(e,void 0,t)}catch(e){return Pu(e)?e:new Error(e)}})),Bu=ku;function Fu(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=Qa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ju=oc((function(e,t,n){var r=1;if(n.length){var o=Sl(n,yl(ju));r|=32}return ql(e,r,t,n,o)}));ju.placeholder={};var zu=ju,Hu=Iu((function(e,t){return ol(t,(function(t){t=vu(t),Zl(e,t,zu(e[t],e))})),e})),Wu=Hu,Gu=oc((function(e,t,n){var r=3;if(n.length){var o=Sl(n,yl(Gu));r|=32}return ql(t,r,e,n,o)}));Gu.placeholder={};var Uu=Gu;function Vu(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}function Yu(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Vu(e,t,n)}var $u=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xu(e){return $u.test(e)}var qu="\\ud800-\\udfff",Ku="["+qu+"]",Zu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qu="\\ud83c[\\udffb-\\udfff]",Ju="[^"+qu+"]",ed="(?:\\ud83c[\\udde6-\\uddff]){2}",td="[\\ud800-\\udbff][\\udc00-\\udfff]",nd="(?:"+Zu+"|"+Qu+")?",rd="[\\ufe0e\\ufe0f]?",od=rd+nd+"(?:\\u200d(?:"+[Ju,ed,td].join("|")+")"+rd+nd+")*",id="(?:"+[Ju+Zu+"?",Zu,ed,td,Ku].join("|")+")",ad=RegExp(Qu+"(?="+Qu+")|"+id+od,"g");function sd(e){return Xu(e)?function(e){return e.match(ad)||[]}(e):function(e){return e.split("")}(e)}function ld(e){return function(t){var n=Xu(t=fu(t))?sd(t):void 0,r=n?n[0]:t.charAt(0),o=n?Yu(n,1).join(""):t.slice(1);return r[e]()+o}}var cd=ld("toUpperCase");function ud(e){return cd(fu(e).toLowerCase())}function dd(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function hd(e){return function(t){return null==e?void 0:e[t]}}var fd=hd({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),pd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gd=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function vd(e){return(e=fu(e))&&e.replace(pd,fd).replace(gd,"")}var md=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Cd="\\ud800-\\udfff",bd="\\u2700-\\u27bf",wd="a-z\\xdf-\\xf6\\xf8-\\xff",xd="A-Z\\xc0-\\xd6\\xd8-\\xde",Ed="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sd="["+Ed+"]",Id="\\d+",Td="["+bd+"]",Ld="["+wd+"]",Md="[^"+Cd+Ed+Id+bd+wd+xd+"]",Od="(?:\\ud83c[\\udde6-\\uddff]){2}",_d="[\\ud800-\\udbff][\\udc00-\\udfff]",Nd="["+xd+"]",Ad="(?:"+Ld+"|"+Md+")",Rd="(?:"+Nd+"|"+Md+")",Dd="(?:['’](?:d|ll|m|re|s|t|ve))?",Pd="(?:['’](?:D|LL|M|RE|S|T|VE))?",kd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Bd="[\\ufe0e\\ufe0f]?",Fd=Bd+kd+"(?:\\u200d(?:"+["[^"+Cd+"]",Od,_d].join("|")+")"+Bd+kd+")*",jd="(?:"+[Td,Od,_d].join("|")+")"+Fd,zd=RegExp([Nd+"?"+Ld+"+"+Dd+"(?="+[Sd,Nd,"$"].join("|")+")",Rd+"+"+Pd+"(?="+[Sd,Nd+Ad,"$"].join("|")+")",Nd+"?"+Ad+"+"+Dd,Nd+"+"+Pd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Id,jd].join("|"),"g");function Hd(e,t,n){return e=fu(e),void 0===(t=n?void 0:t)?function(e){return yd.test(e)}(e)?function(e){return e.match(zd)||[]}(e):function(e){return e.match(md)||[]}(e):e.match(t)||[]}var Wd=RegExp("['’]","g");function Gd(e){return function(t){return dd(Hd(vd(t).replace(Wd,"")),e,"")}}var Ud=Gd((function(e,t,n){return t=t.toLowerCase(),e+(n?ud(t):t)})),Vd=pa.isFinite,Yd=Math.min;function $d(e){var t=Math[e];return function(e,n){if(e=Xa(e),(n=null==n?0:Yd(Qa(n),292))&&Vd(e)){var r=(fu(e)+"e").split("e");return+((r=(fu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xd=$d("ceil");function qd(e){var t=Vs(e);return t.__chain__=!0,t}var Kd=Math.ceil,Zd=Math.max;function Qd(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jd(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Xa(n))==n?n:0),void 0!==t&&(t=(t=Xa(t))==t?t:0),Qd(Xa(e),t,n)}function eh(e){var t=this.__data__=new ou(e);this.size=t.size}function th(e,t){return e&&tc(t,Bc(t),e)}eh.prototype.clear=function(){this.__data__=new ou,this.size=0},eh.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},eh.prototype.get=function(e){return this.__data__.get(e)},eh.prototype.has=function(e){return this.__data__.has(e)},eh.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ou){var r=n.__data__;if(!iu||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new su(r)}return n.set(e,t),this.size=n.size,this};var nh="object"==typeof exports&&exports&&!exports.nodeType&&exports,rh=nh&&e&&!e.nodeType&&e,oh=rh&&rh.exports===nh?pa.Buffer:void 0,ih=oh?oh.allocUnsafe:void 0;function ah(e,t){if(t)return e.slice();var n=e.length,r=ih?ih(n):new e.constructor(n);return e.copy(r),r}function sh(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function lh(){return[]}var ch=Object.prototype.propertyIsEnumerable,uh=Object.getOwnPropertySymbols,dh=uh?function(e){return null==e?[]:(e=Object(e),sh(uh(e),(function(t){return ch.call(e,t)})))}:lh,hh=dh,fh=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)bu(t,hh(e)),e=Lu(e);return t}:lh,ph=fh;function gh(e,t,n){var r=t(e);return Na(e)?r:bu(r,n(e))}function vh(e){return gh(e,Bc,hh)}function mh(e){return gh(e,Wc,ph)}var yh=ms(pa,"DataView"),Ch=ms(pa,"Promise"),bh=ms(pa,"Set"),wh="[object Map]",xh="[object Promise]",Eh="[object Set]",Sh="[object WeakMap]",Ih="[object DataView]",Th=cs(yh),Lh=cs(iu),Mh=cs(Ch),Oh=cs(bh),_h=cs(ys),Nh=Sa;(yh&&Nh(new yh(new ArrayBuffer(1)))!=Ih||iu&&Nh(new iu)!=wh||Ch&&Nh(Ch.resolve())!=xh||bh&&Nh(new bh)!=Eh||ys&&Nh(new ys)!=Sh)&&(Nh=function(e){var t=Sa(e),n="[object Object]"==t?e.constructor:void 0,r=n?cs(n):"";if(r)switch(r){case Th:return Ih;case Lh:return wh;case Mh:return xh;case Oh:return Eh;case _h:return Sh}return t});var Ah=Nh,Rh=Object.prototype.hasOwnProperty,Dh=pa.Uint8Array;function Ph(e){var t=new e.constructor(e.byteLength);return new Dh(t).set(new Dh(e)),t}var kh=/\w*$/,Bh=ga?ga.prototype:void 0,Fh=Bh?Bh.valueOf:void 0;function jh(e,t){var n=t?Ph(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var zh="[object Boolean]",Hh="[object Date]",Wh="[object Map]",Gh="[object Number]",Uh="[object RegExp]",Vh="[object Set]",Yh="[object String]",$h="[object Symbol]",Xh="[object ArrayBuffer]",qh="[object DataView]",Kh="[object Float32Array]",Zh="[object Float64Array]",Qh="[object Int8Array]",Jh="[object Int16Array]",ef="[object Int32Array]",tf="[object Uint8Array]",nf="[object Uint8ClampedArray]",rf="[object Uint16Array]",of="[object Uint32Array]";function af(e){return"function"!=typeof e.constructor||dc(e)?{}:Ss(Lu(e))}var sf=Mc&&Mc.isMap,lf=sf?Sc(sf):function(e){return Ia(e)&&"[object Map]"==Ah(e)},cf=Mc&&Mc.isSet,uf=cf?Sc(cf):function(e){return Ia(e)&&"[object Set]"==Ah(e)},df=1,hf=2,ff=4,pf="[object Arguments]",gf="[object Function]",vf="[object GeneratorFunction]",mf="[object Object]",yf={};function Cf(e,t,n,r,o,i){var a,s=t&df,l=t&hf,c=t&ff;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!Wa(e))return e;var u=Na(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Rh.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Ws(e,a)}else{var d=Ah(e),h=d==gf||d==vf;if(xc(e))return ah(e,s);if(d==mf||d==pf||h&&!o){if(a=l||h?{}:af(e),!s)return l?function(e,t){return tc(e,ph(e),t)}(e,function(e,t){return e&&tc(t,Wc(t),e)}(a,e)):function(e,t){return tc(e,hh(e),t)}(e,th(a,e))}else{if(!yf[d])return o?e:{};a=function(e,t,n){var r,o,i,a=e.constructor;switch(t){case Xh:return Ph(e);case zh:case Hh:return new a(+e);case qh:return function(e,t){var n=t?Ph(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Kh:case Zh:case Qh:case Jh:case ef:case tf:case nf:case rf:case of:return jh(e,n);case Wh:return new a;case Gh:case Yh:return new a(e);case Uh:return(i=new(o=e).constructor(o.source,kh.exec(o))).lastIndex=o.lastIndex,i;case Vh:return new a;case $h:return r=e,Fh?Object(Fh.call(r)):{}}}(e,d,s)}}i||(i=new eh);var f=i.get(e);if(f)return f;i.set(e,a),uf(e)?e.forEach((function(r){a.add(Cf(r,t,n,r,e,i))})):lf(e)&&e.forEach((function(r,o){a.set(o,Cf(r,t,n,o,e,i))}));var p=u?void 0:(c?l?mh:vh:l?Wc:Bc)(e);return ol(p||e,(function(r,o){p&&(r=e[o=r]),ec(a,o,Cf(r,t,n,o,e,i))})),a}function bf(e){return Cf(e,4)}function wf(e){return Cf(e,5)}function xf(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}function Ef(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return bu(Na(n)?Ws(n):[n],Eu(t,1))}function Sf(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new su;++t<n;)this.add(e[t])}function If(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Tf(e,t){return e.has(t)}yf[pf]=yf["[object Array]"]=yf["[object ArrayBuffer]"]=yf["[object DataView]"]=yf["[object Boolean]"]=yf["[object Date]"]=yf["[object Float32Array]"]=yf["[object Float64Array]"]=yf["[object Int8Array]"]=yf["[object Int16Array]"]=yf["[object Int32Array]"]=yf["[object Map]"]=yf["[object Number]"]=yf[mf]=yf["[object RegExp]"]=yf["[object Set]"]=yf["[object String]"]=yf["[object Symbol]"]=yf["[object Uint8Array]"]=yf["[object Uint8ClampedArray]"]=yf["[object Uint16Array]"]=yf["[object Uint32Array]"]=!0,yf["[object Error]"]=yf[gf]=yf["[object WeakMap]"]=!1,Sf.prototype.add=Sf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Sf.prototype.has=function(e){return this.__data__.has(e)};var Lf=1,Mf=2;function Of(e,t,n,r,o,i){var a=n&Lf,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=n&Mf?new Sf:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var p=e[d],g=t[d];if(r)var v=a?r(g,p,d,t,e,i):r(p,g,d,e,t,i);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!If(t,(function(e,t){if(!Tf(f,t)&&(p===e||o(p,e,n,r,i)))return f.push(t)}))){h=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function _f(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Nf(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Af=1,Rf=2,Df="[object Boolean]",Pf="[object Date]",kf="[object Error]",Bf="[object Map]",Ff="[object Number]",jf="[object RegExp]",zf="[object Set]",Hf="[object String]",Wf="[object Symbol]",Gf="[object ArrayBuffer]",Uf="[object DataView]",Vf=ga?ga.prototype:void 0,Yf=Vf?Vf.valueOf:void 0,$f=1,Xf=Object.prototype.hasOwnProperty,qf=1,Kf="[object Arguments]",Zf="[object Array]",Qf="[object Object]",Jf=Object.prototype.hasOwnProperty;function ep(e,t,n,r,o){return e===t||(null==e||null==t||!Ia(e)&&!Ia(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=Na(e),s=Na(t),l=a?Zf:Ah(e),c=s?Zf:Ah(t),u=(l=l==Kf?Qf:l)==Qf,d=(c=c==Kf?Qf:c)==Qf,h=l==c;if(h&&xc(e)){if(!xc(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new eh),a||_c(e)?Of(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case Uf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gf:return!(e.byteLength!=t.byteLength||!i(new Dh(e),new Dh(t)));case Df:case Pf:case Ff:return Ql(+e,+t);case kf:return e.name==t.name&&e.message==t.message;case jf:case Hf:return e==t+"";case Bf:var s=_f;case zf:var l=r&Af;if(s||(s=Nf),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=Rf,a.set(e,t);var u=Of(s(e),s(t),r,o,i,a);return a.delete(e),u;case Wf:if(Yf)return Yf.call(e)==Yf.call(t)}return!1}(e,t,l,n,r,o,i);if(!(n&qf)){var f=u&&Jf.call(e,"__wrapped__"),p=d&&Jf.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?t.value():t;return i||(i=new eh),o(g,v,n,r,i)}}return!!h&&(i||(i=new eh),function(e,t,n,r,o,i){var a=n&$f,s=vh(e),l=s.length;if(l!=vh(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Xf.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],v=t[u];if(r)var m=a?r(v,g,u,t,e,i):r(g,v,u,e,t,i);if(!(void 0===m?g===v||o(g,v,n,r,i):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,C=t.constructor;y==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof C&&C instanceof C||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,i))}(e,t,n,r,ep,o))}var tp=1,np=2;function rp(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=n[o])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new eh;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?ep(u,c,tp|np,r,d):h))return!1}}return!0}function op(e){return e==e&&!Wa(e)}function ip(e){for(var t=Bc(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,op(o)]}return t}function ap(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function sp(e){var t=ip(e);return 1==t.length&&t[0][2]?ap(t[0][0],t[0][1]):function(n){return n===e||rp(n,e,t)}}function lp(e,t){return null!=e&&t in Object(e)}function cp(e,t,n){for(var r=-1,o=(t=pu(t,e)).length,i=!1;++r<o;){var a=vu(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&ac(o)&&wl(a,o)&&(Na(e)||mc(e))}function up(e,t){return null!=e&&cp(e,t,lp)}var dp=1,hp=2;function fp(e,t){return Zc(e)&&op(t)?ap(vu(e),t):function(n){var r=yu(n,e);return void 0===r&&r===t?up(n,e):ep(t,r,dp|hp)}}function pp(e){return function(t){return null==t?void 0:t[e]}}function gp(e){return Zc(e)?pp(vu(e)):function(e){return function(t){return mu(t,e)}}(e)}function vp(e){return"function"==typeof e?e:null==e?Ja:"object"==typeof e?Na(e)?fp(e[0],e[1]):sp(e):gp(e)}function mp(e){var t=null==e?0:e.length,n=vp;return e=t?_a(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],oc((function(n){for(var r=-1;++r<t;){var o=e[r];if(Ls(o[0],this,n))return Ls(o[1],this,n)}}))}function yp(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var o=n[r],i=t[o],a=e[o];if(void 0===a&&!(o in e)||!i(a))return!1}return!0}function Cp(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function bp(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}var wp=bp();function xp(e,t){return e&&wp(e,t,Bc)}function Ep(e,t){return function(n,r){if(null==n)return n;if(!sc(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}var Sp=Ep(xp);function Ip(e,t,n,r){return Sp(e,(function(e,o,i){t(r,e,n(e),i)})),r}function Tp(e,t){return function(n,r){var o=Na(n)?Cp:Ip,i=t?t():{};return o(n,e,vp(r),i)}}var Lp=Object.prototype.hasOwnProperty,Mp=Tp((function(e,t,n){Lp.call(e,n)?++e[n]:Zl(e,n,1)}));function Op(e,t,n){var r=ql(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=Op.placeholder,r}function _p(e,t,n){var r=ql(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=_p.placeholder,r}Op.placeholder={},_p.placeholder={};var Np=function(){return pa.Date.now()},Ap="Expected a function",Rp=Math.max,Dp=Math.min;function Pp(e,t,n){var r,o,i,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Ap);function f(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function g(){var e=Np();if(p(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?Dp(n,i-(e-c)):n}(e))}function v(e){return s=void 0,h&&r?f(e):(r=o=void 0,a)}function m(){var e=Np(),n=p(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?f(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Xa(t)||0,Wa(n)&&(u=!!n.leading,i=(d="maxWait"in n)?Rp(Xa(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},m.flush=function(){return void 0===s?a:v(Np())},m}var kp=Object.prototype,Bp=kp.hasOwnProperty,Fp=oc((function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&lc(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=Wc(i),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||Ql(u,kp[c])&&!Bp.call(e,c))&&(e[c]=i[c])}return e})),jp=Fp;function zp(e,t,n){(void 0!==n&&!Ql(e[t],n)||void 0===n&&!(t in e))&&Zl(e,t,n)}function Hp(e){return Ia(e)&&sc(e)}function Wp(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Gp(e){return tc(e,Wc(e))}function Up(e,t,n,r,o){e!==t&&wp(t,(function(i,a){if(o||(o=new eh),Wa(i))!function(e,t,n,r,o,i,a){var s=Wp(e,n),l=Wp(t,n),c=a.get(l);if(c)zp(e,n,c);else{var u=i?i(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=Na(l),f=!h&&xc(l),p=!h&&!f&&_c(l);u=l,h||f||p?Na(s)?u=s:Hp(s)?u=Ws(s):f?(d=!1,u=ah(l,!0)):p?(d=!1,u=jh(l,!0)):u=[]:Du(l)||mc(l)?(u=s,mc(s)?u=Gp(s):Wa(s)&&!os(s)||(u=af(l))):d=!1}d&&(a.set(l,u),o(u,l,r,i,a),a.delete(l)),zp(e,n,u)}}(e,t,a,n,Up,r,o);else{var s=r?r(Wp(e,a),i,a+"",e,t,o):void 0;void 0===s&&(s=i),zp(e,a,s)}}),Wc)}function Vp(e,t,n,r,o,i){return Wa(e)&&Wa(t)&&(i.set(t,e),Up(e,t,void 0,Vp,i),i.delete(t)),e}var Yp=cc((function(e,t,n,r){Up(e,t,n,r)})),$p=Yp,Xp=oc((function(e){return e.push(void 0,Vp),Ls($p,void 0,e)}));function qp(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}var Kp=oc((function(e,t){return qp(e,1,t)})),Zp=Kp,Qp=oc((function(e,t,n){return qp(e,Xa(t)||0,n)})),Jp=Qp;function eg(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}var tg=200;function ng(e,t,n,r){var o=-1,i=ll,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=_a(t,Sc(n))),r?(i=eg,a=!1):t.length>=tg&&(i=Tf,a=!1,t=new Sf(t));e:for(;++o<s;){var u=e[o],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else i(t,d,r)||l.push(u)}return l}var rg=oc((function(e,t){return Hp(e)?ng(e,Eu(t,1,Hp,!0)):[]})),og=rg;function ig(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ag=oc((function(e,t){var n=ig(t);return Hp(n)&&(n=void 0),Hp(e)?ng(e,Eu(t,1,Hp,!0),vp(n)):[]})),sg=ag,lg=oc((function(e,t){var n=ig(t);return Hp(n)&&(n=void 0),Hp(e)?ng(e,Eu(t,1,Hp,!0),void 0,n):[]})),cg=lg,ug=ka((function(e,t){return e/t}),1);function dg(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?Vu(e,r?0:i,r?i+1:o):Vu(e,r?i+1:0,r?o:i)}function hg(e){return"function"==typeof e?e:Ja}function fg(e,t){return(Na(e)?ol:Sp)(e,hg(t))}function pg(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var gg=bp(!0);function vg(e,t){return e&&gg(e,t,Bc)}var mg=Ep(vg,!0);function yg(e,t){return(Na(e)?pg:mg)(e,hg(t))}function Cg(e,t,n){e=fu(e),t=Pa(t);var r=e.length,o=n=void 0===n?r:Qd(Qa(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t}function bg(e){return function(t){var n=Ah(t);return"[object Map]"==n?_f(t):"[object Set]"==n?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return _a(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var wg=bg(Bc),xg=bg(Wc),Eg=hd({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Sg=/[&<>"']/g,Ig=RegExp(Sg.source);function Tg(e){return(e=fu(e))&&Ig.test(e)?e.replace(Sg,Eg):e}var Lg=/[\\^$.*+?()[\]{}|]/g,Mg=RegExp(Lg.source);function Og(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function _g(e,t){var n=!0;return Sp(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function Ng(e,t,n){var r=Na(e)?Og:_g;return n&&lc(e,t,n)&&(t=void 0),r(e,vp(t))}function Ag(e){return e?Qd(Qa(e),0,4294967295):0}function Rg(e,t){var n=[];return Sp(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function Dg(e,t){return(Na(e)?sh:Rg)(e,vp(t))}function Pg(e){return function(t,n,r){var o=Object(t);if(!sc(t)){var i=vp(n);t=Bc(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}var kg=Math.max;function Bg(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:Qa(n);return o<0&&(o=kg(r+o,0)),il(e,vp(t),o)}var Fg=Pg(Bg);function jg(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}var zg=Math.max,Hg=Math.min;function Wg(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=Qa(n),o=n<0?zg(r+o,0):Hg(o,r-1)),il(e,vp(t),o,!0)}var Gg=Pg(Wg);function Ug(e){return e&&e.length?e[0]:void 0}function Vg(e,t){var n=-1,r=sc(e)?Array(e.length):[];return Sp(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function Yg(e,t){return(Na(e)?_a:Vg)(e,vp(t))}var $g=$d("floor");function Xg(e){return Iu((function(t){var n=t.length,r=n,o=Hs.prototype.thru;for(e&&t.reverse();r--;){var i=t[r];if("function"!=typeof i)throw new TypeError("Expected a function");if(o&&!a&&"wrapper"==zs(i))var a=new Hs([],!0)}for(r=a?r:n;++r<n;){var s=zs(i=t[r]),l="wrapper"==s?Bs(i):void 0;a=l&&Ys(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[zs(l[0])].apply(a,l[3]):1==i.length&&Ys(i)?a[s]():a.thru(i)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Na(r))return a.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}var qg=Xg(),Kg=Xg(!0);function Zg(e,t){return null==e?e:wp(e,hg(t),Wc)}function Qg(e,t){return sh(t,(function(t){return os(e[t])}))}var Jg=Object.prototype.hasOwnProperty,ev=Tp((function(e,t,n){Jg.call(e,n)?e[n].push(t):Zl(e,n,[t])}));function tv(e,t){return e>t}function nv(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Xa(t),n=Xa(n)),e(t,n)}}var rv=nv(tv),ov=nv((function(e,t){return e>=t})),iv=Object.prototype.hasOwnProperty;function av(e,t){return null!=e&&iv.call(e,t)}function sv(e,t){return null!=e&&cp(e,t,av)}var lv=Math.max,cv=Math.min;function uv(e,t,n){return t=Za(t),void 0===n?(n=t,t=0):n=Za(n),function(e,t,n){return e>=cv(t,n)&&e<lv(t,n)}(e=Xa(e),t,n)}var dv="[object String]";function hv(e){return"string"==typeof e||!Na(e)&&Ia(e)&&Sa(e)==dv}function fv(e,t){return _a(t,(function(t){return e[t]}))}function pv(e){return null==e?[]:fv(e,Bc(e))}var gv=Math.max;function vv(e,t,n,r){e=sc(e)?e:pv(e),n=n&&!r?Qa(n):0;var o=e.length;return n<0&&(n=gv(o+n,0)),hv(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&sl(e,t,n)>-1}var mv=Math.max;function yv(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:Qa(n);return o<0&&(o=mv(r+o,0)),sl(e,t,o)}var Cv=Math.min;function bv(e,t,n){for(var r=n?eg:ll,o=e[0].length,i=e.length,a=i,s=Array(i),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=_a(u,Sc(t))),l=Cv(u.length,l),s[a]=!n&&(t||o>=120&&u.length>=120)?new Sf(a&&u):void 0}u=e[0];var d=-1,h=s[0];e:for(;++d<o&&c.length<l;){var f=u[d],p=t?t(f):f;if(f=n||0!==f?f:0,!(h?Tf(h,p):r(c,p,n))){for(a=i;--a;){var g=s[a];if(!(g?Tf(g,p):r(e[a],p,n)))continue e}h&&h.push(p),c.push(f)}}return c}function wv(e){return Hp(e)?e:[]}var xv=oc((function(e){var t=_a(e,wv);return t.length&&t[0]===e[0]?bv(t):[]})),Ev=oc((function(e){var t=ig(e),n=_a(e,wv);return t===ig(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?bv(n,vp(t)):[]})),Sv=oc((function(e){var t=ig(e),n=_a(e,wv);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?bv(n,void 0,t):[]}));function Iv(e,t){return function(n,r){return function(e,t,n,r){return xp(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}var Tv=Object.prototype.toString,Lv=Iv((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Tv.call(t)),e[t]=n}),Js(Ja)),Mv=Object.prototype,Ov=Mv.hasOwnProperty,_v=Mv.toString,Nv=Iv((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_v.call(t)),Ov.call(e,t)?e[t].push(n):e[t]=[n]}),vp);function Av(e,t){return t.length<2?e:mu(e,Vu(t,0,-1))}function Rv(e,t,n){var r=null==(e=Av(e,t=pu(t,e)))?e:e[vu(ig(t))];return null==r?void 0:Ls(r,e,n)}var Dv=oc(Rv),Pv=oc((function(e,t,n){var r=-1,o="function"==typeof t,i=sc(e)?Array(e.length):[];return Sp(e,(function(e){i[++r]=o?Ls(t,e,n):Rv(e,t,n)})),i})),kv=Pv,Bv=Mc&&Mc.isArrayBuffer,Fv=Bv?Sc(Bv):function(e){return Ia(e)&&"[object ArrayBuffer]"==Sa(e)};function jv(e){return!0===e||!1===e||Ia(e)&&"[object Boolean]"==Sa(e)}var zv=Mc&&Mc.isDate,Hv=zv?Sc(zv):function(e){return Ia(e)&&"[object Date]"==Sa(e)},Wv="[object Map]",Gv="[object Set]",Uv=Object.prototype.hasOwnProperty;function Vv(e){if(null==e)return!0;if(sc(e)&&(Na(e)||"string"==typeof e||"function"==typeof e.splice||xc(e)||_c(e)||mc(e)))return!e.length;var t=Ah(e);if(t==Wv||t==Gv)return!e.size;if(dc(e))return!kc(e).length;for(var n in e)if(Uv.call(e,n))return!1;return!0}function Yv(e,t){return ep(e,t)}var $v=pa.isFinite;function Xv(e){return"number"==typeof e&&e==Qa(e)}var qv="[object Number]";function Kv(e){return"number"==typeof e||Ia(e)&&Sa(e)==qv}function Zv(e){return Kv(e)&&e!=+e}var Qv=as?os:yc;function Jv(e){return null==e}var em=Mc&&Mc.isRegExp,tm=em?Sc(em):function(e){return Ia(e)&&"[object RegExp]"==Sa(e)};function nm(e){return void 0===e}var rm=Array.prototype.join,om=Gd((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),im=Tp((function(e,t,n){Zl(e,n,t)})),am=Math.max,sm=Math.min,lm=Gd((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),cm=ld("toLowerCase");function um(e,t){return e<t}var dm=nv(um),hm=nv((function(e,t){return e<=t}));function fm(e,t){var n={};return t=vp(t),xp(e,(function(e,r,o){Zl(n,t(e,r,o),e)})),n}function pm(e){return sp(Cf(e,1))}function gm(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===s?a==a&&!La(a):n(a,s)))var s=a,l=i}return l}function vm(e){return e&&e.length?gm(e,Ja,tv):void 0}function mm(e,t){return e&&e.length?gm(e,vp(t),tv):void 0}function ym(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Cm(e,t){var n=null==e?0:e.length;return n?ym(e,t)/n:NaN}var bm=cc((function(e,t,n){Up(e,t,n)})),wm=bm,xm=oc((function(e,t){return function(n){return Rv(n,e,t)}})),Em=xm,Sm=oc((function(e,t){return function(n){return Rv(e,n,t)}})),Im=Sm;function Tm(e){return e&&e.length?gm(e,Ja,um):void 0}function Lm(e,t,n){var r=Bc(t),o=Qg(t,r),i=!(Wa(n)&&"chain"in n&&!n.chain),a=os(e);return ol(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=Ws(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,bu([this.value()],arguments))})})),e}var Mm=ka((function(e,t){return e*t}),1);function Om(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var _m=ga?ga.iterator:void 0;function Nm(e){if(!e)return[];if(sc(e))return hv(e)?sd(e):Ws(e);if(_m&&e[_m])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[_m]());var t=Ah(e);return("[object Map]"==t?_f:"[object Set]"==t?Nf:pv)(e)}function Am(e,t){var n=e.length;if(n)return wl(t+=t<0?n:0,n)?e[t]:void 0}function Rm(e,t){return null==(e=Av(e,t=pu(t,e)))||delete e[vu(ig(t))]}function Dm(e){return Du(e)?void 0:e}var Pm=Iu((function(e,t){var n={};if(null==e)return n;var r=!1;t=_a(t,(function(t){return t=pu(t,e),r||(r=t.length>1),t})),tc(e,mh(e),n),r&&(n=Cf(n,7,Dm));for(var o=t.length;o--;)Rm(n,t[o]);return n})),km=Pm;function Bm(e,t,n,r){if(!Wa(e))return e;for(var o=-1,i=(t=pu(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=vu(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=Wa(u)?u:wl(t[o+1])?[]:{})}ec(s,l,c),s=s[l]}return e}function Fm(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=mu(e,a);n(s,a)&&Bm(i,pu(a,e),s)}return i}function jm(e,t){if(null==e)return{};var n=_a(mh(e),(function(e){return[e]}));return t=vp(t),Fm(e,n,(function(e,n){return t(e,n[0])}))}function zm(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=La(e),a=void 0!==t,s=null===t,l=t==t,c=La(t);if(!s&&!c&&!i&&e>t||i&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!l)return-1}return 0}function Hm(e,t,n){t=t.length?_a(t,(function(e){return Na(e)?function(t){return mu(t,1===e.length?e[0]:e)}:e})):[Ja];var r=-1;return t=_a(t,Sc(vp)),function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var l=zm(o[r],i[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(Vg(e,(function(e,n,o){return{criteria:_a(t,(function(t){return t(e)})),index:++r,value:e}})))}function Wm(e,t,n,r){return null==e?[]:(Na(t)||(t=null==t?[]:[t]),Na(n=r?void 0:n)||(n=null==n?[]:[n]),Hm(e,t,n))}function Gm(e){return Iu((function(t){return t=_a(t,Sc(vp)),oc((function(n){var r=this;return e(t,(function(e){return Ls(e,r,n)}))}))}))}var Um=Gm(_a),Vm=oc,Ym=Math.min,$m=Vm((function(e,t){var n=(t=1==t.length&&Na(t[0])?_a(t[0],Sc(vp)):_a(Eu(t,1),Sc(vp))).length;return oc((function(r){for(var o=-1,i=Ym(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Ls(e,this,r)}))})),Xm=$m,qm=Gm(Og),Km=Gm(If),Zm=9007199254740991,Qm=Math.floor;function Jm(e,t){var n="";if(!e||t<1||t>Zm)return n;do{t%2&&(n+=e),(t=Qm(t/2))&&(e+=e)}while(t);return n}var ey=pp("length"),ty="\\ud800-\\udfff",ny="["+ty+"]",ry="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",oy="\\ud83c[\\udffb-\\udfff]",iy="[^"+ty+"]",ay="(?:\\ud83c[\\udde6-\\uddff]){2}",sy="[\\ud800-\\udbff][\\udc00-\\udfff]",ly="(?:"+ry+"|"+oy+")?",cy="[\\ufe0e\\ufe0f]?",uy=cy+ly+"(?:\\u200d(?:"+[iy,ay,sy].join("|")+")"+cy+ly+")*",dy="(?:"+[iy+ry+"?",ry,ay,sy,ny].join("|")+")",hy=RegExp(oy+"(?="+oy+")|"+dy+uy,"g");function fy(e){return Xu(e)?function(e){for(var t=hy.lastIndex=0;hy.test(e);)++t;return t}(e):ey(e)}var py=Math.ceil;function gy(e,t){var n=(t=void 0===t?" ":Pa(t)).length;if(n<2)return n?Jm(t,e):t;var r=Jm(t,py(e/fy(t)));return Xu(t)?Yu(sd(r),0,e).join(""):r.slice(0,e)}var vy=Math.ceil,my=Math.floor,yy=/^\s+/,Cy=pa.parseInt,by=oc((function(e,t){return ql(e,32,void 0,t,Sl(t,yl(by)))}));by.placeholder={};var wy=by,xy=oc((function(e,t){return ql(e,64,void 0,t,Sl(t,yl(xy)))}));xy.placeholder={};var Ey=xy,Sy=Tp((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Iy=Iu((function(e,t){return null==e?{}:function(e,t){return Fm(e,t,(function(t,n){return up(e,n)}))}(e,t)})),Ty=Iy;function Ly(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}var My=Array.prototype.splice;function Oy(e,t,n,r){var o=r?Ly:sl,i=-1,a=t.length,s=e;for(e===t&&(t=Ws(t)),n&&(s=_a(e,Sc(n)));++i<a;)for(var l=0,c=t[i],u=n?n(c):c;(l=o(s,u,l,r))>-1;)s!==e&&My.call(s,l,1),My.call(e,l,1);return e}function _y(e,t){return e&&e.length&&t&&t.length?Oy(e,t):e}var Ny=oc(_y),Ay=Array.prototype.splice;function Ry(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;wl(o)?Ay.call(e,o,1):Rm(e,o)}}return e}var Dy=Iu((function(e,t){var n=null==e?0:e.length,r=Cu(e,t);return Ry(e,_a(t,(function(e){return wl(e,n)?+e:e})).sort(zm)),r})),Py=Dy,ky=Math.floor,By=Math.random;function Fy(e,t){return e+ky(By()*(t-e+1))}var jy=parseFloat,zy=Math.min,Hy=Math.random,Wy=Math.ceil,Gy=Math.max;function Uy(e){return function(t,n,r){return r&&"number"!=typeof r&&lc(t,n,r)&&(n=r=void 0),t=Za(t),void 0===n?(n=t,t=0):n=Za(n),function(e,t,n,r){for(var o=-1,i=Gy(Wy((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:Za(r),e)}}var Vy=Uy(),Yy=Uy(!0),$y=Iu((function(e,t){return ql(e,256,void 0,void 0,void 0,t)})),Xy=$y;function qy(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Ky(e,t,n){var r=Na(e)?dd:qy,o=arguments.length<3;return r(e,vp(t),n,o,Sp)}function Zy(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Qy(e,t,n){return t=(n?lc(e,t,n):void 0===t)?1:Qa(t),Jm(fu(e),t)}var Jy=Array.prototype.reverse;function eC(e){return null==e?e:Jy.call(e)}var tC=$d("round");function nC(e){var t=e.length;return t?e[Fy(0,t-1)]:void 0}function rC(e){return nC(pv(e))}function oC(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var i=Fy(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}function iC(e,t){return oC(Ws(e),Qd(t,0,e.length))}function aC(e,t){var n=pv(e);return oC(n,Qd(t,0,n.length))}function sC(e,t,n){return null==e?e:Bm(e,t,n)}function lC(e){return oC(Ws(e))}function cC(e){return oC(pv(e))}function uC(e){if(null==e)return 0;if(sc(e))return hv(e)?fy(e):e.length;var t=Ah(e);return"[object Map]"==t||"[object Set]"==t?e.size:kc(e).length}var dC=Gd((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function hC(e,t){var n;return Sp(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}var fC=oc((function(e,t){if(null==e)return[];var n=t.length;return n>1&&lc(e,t[0],t[1])?t=[]:n>2&&lc(t[0],t[1],t[2])&&(t=[t[0]]),Hm(e,Eu(t,1),[])})),pC=fC,gC=4294967294,vC=Math.floor,mC=Math.min;function yC(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,s=null===t,l=La(t),c=void 0===t;o<i;){var u=vC((o+i)/2),d=n(e[u]),h=void 0!==d,f=null===d,p=d==d,g=La(d);if(a)var v=r||p;else v=c?p&&(r||h):s?p&&h&&(r||!f):l?p&&h&&!f&&(r||!g):!f&&!g&&(r?d<=t:d<t);v?o=u+1:i=u}return mC(i,gC)}function CC(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!La(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return yC(e,t,Ja,n)}function bC(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ql(s,l)){var l=s;i[o++]=0===a?0:a}}return i}function wC(e,t,n){return n&&"number"!=typeof n&&lc(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=fu(e))&&("string"==typeof t||null!=t&&!tm(t))&&!(t=Pa(t))&&Xu(e)?Yu(sd(e),0,n):e.split(t,n):[]}var xC=Math.max,EC=Gd((function(e,t,n){return e+(n?" ":"")+cd(t)}));function SC(){return!0}var IC=ka((function(e,t){return e-t}),0);function TC(e,t){return e&&e.length?ym(e,vp(t)):0}var LC=Object.prototype,MC=LC.hasOwnProperty;function OC(e,t,n,r){return void 0===e||Ql(e,LC[n])&&!MC.call(r,n)?t:e}var _C={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function NC(e){return"\\"+_C[e]}var AC=/<%=([\s\S]+?)%>/g,RC={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:AC,variable:"",imports:{_:{escape:Tg}}},DC=/\b__p \+= '';/g,PC=/\b(__p \+=) '' \+/g,kC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,BC=/[()=,{}\[\]\/\s]/,FC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jC=/($^)/,zC=/['\n\r\u2028\u2029\\]/g,HC=Object.prototype.hasOwnProperty;function WC(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Wa(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Pp(e,t,{leading:r,maxWait:t,trailing:o})}function GC(e,t){return t(e)}var UC=4294967295,VC=Math.min;function YC(e,t){var n=e;return n instanceof Ds&&(n=n.value()),dd(t,(function(e,t){return t.func.apply(t.thisArg,bu([e],t.args))}),n)}function $C(){return YC(this.__wrapped__,this.__actions__)}function XC(e){return fu(e).toUpperCase()}function qC(e,t){for(var n=e.length;n--&&sl(t,e[n],0)>-1;);return n}function KC(e,t){for(var n=-1,r=e.length;++n<r&&sl(t,e[n],0)>-1;);return n}function ZC(e,t,n){if((e=fu(e))&&(n||void 0===t))return Ha(e);if(!e||!(t=Pa(t)))return e;var r=sd(e),o=sd(t);return Yu(r,KC(r,o),qC(r,o)+1).join("")}var QC=/^\s+/,JC=/\w*$/,eb=hd({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tb=/&(?:amp|lt|gt|quot|#39);/g,nb=RegExp(tb.source),rb=bh&&1/Nf(new bh([,-0]))[1]==1/0?function(e){return new bh(e)}:Ps,ob=rb,ib=200;function ab(e,t,n){var r=-1,o=ll,i=e.length,a=!0,s=[],l=s;if(n)a=!1,o=eg;else if(i>=ib){var c=t?null:ob(e);if(c)return Nf(c);a=!1,o=Tf,l=new Sf}else l=t?[]:s;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else o(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}var sb=oc((function(e){return ab(Eu(e,1,Hp,!0))})),lb=oc((function(e){var t=ig(e);return Hp(t)&&(t=void 0),ab(Eu(e,1,Hp,!0),vp(t))})),cb=oc((function(e){var t=ig(e);return t="function"==typeof t?t:void 0,ab(Eu(e,1,Hp,!0),void 0,t)}));function ub(e){return e&&e.length?ab(e):[]}var db=0;function hb(e,t){return null==e||Rm(e,t)}var fb=Math.max;function pb(e){if(!e||!e.length)return[];var t=0;return e=sh(e,(function(e){if(Hp(e))return t=fb(e.length,t),!0})),hc(t,(function(t){return _a(e,pp(t))}))}function gb(e,t){if(!e||!e.length)return[];var n=pb(e);return null==t?n:_a(n,(function(e){return Ls(t,void 0,e)}))}function vb(e,t,n,r){return Bm(e,t,n(mu(e,t)),r)}var mb=Gd((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),yb=oc((function(e,t){return Hp(e)?ng(e,t):[]})),Cb=yb,bb=Iu((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Cu(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Ds&&wl(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:GC,args:[o],thisArg:void 0}),new Hs(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)})),wb=bb;function xb(e,t,n){var r=e.length;if(r<2)return r?ab(e[0]):[];for(var o=-1,i=Array(r);++o<r;)for(var a=e[o],s=-1;++s<r;)s!=o&&(i[o]=ng(i[o]||a,e[s],t,n));return ab(Eu(i,1),t,n)}var Eb=oc((function(e){return xb(sh(e,Hp))})),Sb=oc((function(e){var t=ig(e);return Hp(t)&&(t=void 0),xb(sh(e,Hp),vp(t))})),Ib=oc((function(e){var t=ig(e);return t="function"==typeof t?t:void 0,xb(sh(e,Hp),void 0,t)})),Tb=oc(pb);function Lb(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=r<i?t[r]:void 0;n(a,e[r],s)}return a}var Mb,Ob=oc((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,gb(e,n)})),_b={chunk:function(e,t,n){t=(n?lc(e,t,n):void 0===t)?1:Zd(Qa(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,a=Array(Kd(r/t));o<r;)a[i++]=Vu(e,o,o+=t);return a},compact:xf,concat:Ef,difference:og,differenceBy:sg,differenceWith:cg,drop:function(e,t,n){var r=null==e?0:e.length;return r?Vu(e,(t=n||void 0===t?1:Qa(t))<0?0:t,r):[]},dropRight:function(e,t,n){var r=null==e?0:e.length;return r?Vu(e,0,(t=r-(t=n||void 0===t?1:Qa(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?dg(e,vp(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?dg(e,vp(t),!0):[]},fill:function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&lc(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=Qa(n))<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:Qa(r))<0&&(r+=o),r=n>r?0:Ag(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},findIndex:Bg,findLastIndex:Wg,first:Ug,flatten:Su,flattenDeep:function(e){return null!=e&&e.length?Eu(e,1/0):[]},flattenDepth:function(e,t){return null!=e&&e.length?Eu(e,t=void 0===t?1:Qa(t)):[]},fromPairs:function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},head:Ug,indexOf:yv,initial:function(e){return null!=e&&e.length?Vu(e,0,-1):[]},intersection:xv,intersectionBy:Ev,intersectionWith:Sv,join:function(e,t){return null==e?"":rm.call(e,t)},last:ig,lastIndexOf:function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return void 0!==n&&(o=(o=Qa(n))<0?am(r+o,0):sm(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):il(e,al,o,!0)},nth:function(e,t){return e&&e.length?Am(e,Qa(t)):void 0},pull:Ny,pullAll:_y,pullAllBy:function(e,t,n){return e&&e.length&&t&&t.length?Oy(e,t,vp(n)):e},pullAllWith:function(e,t,n){return e&&e.length&&t&&t.length?Oy(e,t,void 0,n):e},pullAt:Py,remove:function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=vp(t);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Ry(e,o),n},reverse:eC,slice:function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&lc(e,t,n)?(t=0,n=r):(t=null==t?0:Qa(t),n=void 0===n?r:Qa(n)),Vu(e,t,n)):[]},sortedIndex:function(e,t){return CC(e,t)},sortedIndexBy:function(e,t,n){return yC(e,t,vp(n))},sortedIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var r=CC(e,t);if(r<n&&Ql(e[r],t))return r}return-1},sortedLastIndex:function(e,t){return CC(e,t,!0)},sortedLastIndexBy:function(e,t,n){return yC(e,t,vp(n),!0)},sortedLastIndexOf:function(e,t){if(null!=e&&e.length){var n=CC(e,t,!0)-1;if(Ql(e[n],t))return n}return-1},sortedUniq:function(e){return e&&e.length?bC(e):[]},sortedUniqBy:function(e,t){return e&&e.length?bC(e,vp(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?Vu(e,1,t):[]},take:function(e,t,n){return e&&e.length?Vu(e,0,(t=n||void 0===t?1:Qa(t))<0?0:t):[]},takeRight:function(e,t,n){var r=null==e?0:e.length;return r?Vu(e,(t=r-(t=n||void 0===t?1:Qa(t)))<0?0:t,r):[]},takeRightWhile:function(e,t){return e&&e.length?dg(e,vp(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?dg(e,vp(t)):[]},union:sb,unionBy:lb,unionWith:cb,uniq:ub,uniqBy:function(e,t){return e&&e.length?ab(e,vp(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?ab(e,void 0,t):[]},unzip:pb,unzipWith:gb,without:Cb,xor:Eb,xorBy:Sb,xorWith:Ib,zip:Tb,zipObject:function(e,t){return Lb(e||[],t||[],ec)},zipObjectDeep:function(e,t){return Lb(e||[],t||[],Bm)},zipWith:Ob},Nb={countBy:Mp,each:fg,eachRight:yg,every:Ng,filter:Dg,find:Fg,findLast:Gg,flatMap:function(e,t){return Eu(Yg(e,t),1)},flatMapDeep:function(e,t){return Eu(Yg(e,t),1/0)},flatMapDepth:function(e,t,n){return n=void 0===n?1:Qa(n),Eu(Yg(e,t),n)},forEach:fg,forEachRight:yg,groupBy:ev,includes:vv,invokeMap:kv,keyBy:im,map:Yg,orderBy:Wm,partition:Sy,reduce:Ky,reduceRight:function(e,t,n){var r=Na(e)?Zy:qy,o=arguments.length<3;return r(e,vp(t),n,o,mg)},reject:function(e,t){return(Na(e)?sh:Rg)(e,Om(vp(t)))},sample:function(e){return(Na(e)?nC:rC)(e)},sampleSize:function(e,t,n){return t=(n?lc(e,t,n):void 0===t)?1:Qa(t),(Na(e)?iC:aC)(e,t)},shuffle:function(e){return(Na(e)?lC:cC)(e)},size:uC,some:function(e,t,n){var r=Na(e)?If:hC;return n&&lc(e,t,n)&&(t=void 0),r(e,vp(t))},sortBy:pC},Ab=Np,Rb={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=Qa(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:Kl,before:Fu,bind:zu,bindKey:Uu,curry:Op,curryRight:_p,debounce:Pp,defer:Zp,delay:Jp,flip:function(e){return ql(e,512)},memoize:lu,negate:Om,once:function(e){return Fu(2,e)},overArgs:Xm,partial:wy,partialRight:Ey,rearg:Xy,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return oc(e,t=void 0===t?t:Qa(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:xC(Qa(t),0),oc((function(n){var r=n[t],o=Yu(n,0,t);return r&&bu(o,r),Ls(e,this,o)}))},throttle:WC,unary:function(e){return Kl(e,1)},wrap:function(e,t){return wy(hg(t),e)}},Db={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return Na(e)?e:[e]},clone:bf,cloneDeep:wf,cloneDeepWith:function(e,t){return Cf(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return Cf(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||yp(e,t,Bc(t))},eq:Ql,gt:rv,gte:ov,isArguments:mc,isArray:Na,isArrayBuffer:Fv,isArrayLike:sc,isArrayLikeObject:Hp,isBoolean:jv,isBuffer:xc,isDate:Hv,isElement:function(e){return Ia(e)&&1===e.nodeType&&!Du(e)},isEmpty:Vv,isEqual:Yv,isEqualWith:function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?ep(e,t,void 0,n):!!r},isError:Pu,isFinite:function(e){return"number"==typeof e&&$v(e)},isFunction:os,isInteger:Xv,isLength:ac,isMap:lf,isMatch:function(e,t){return e===t||rp(e,t,ip(t))},isMatchWith:function(e,t,n){return n="function"==typeof n?n:void 0,rp(e,t,ip(t),n)},isNaN:Zv,isNative:function(e){if(Qv(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return vs(e)},isNil:Jv,isNull:function(e){return null===e},isNumber:Kv,isObject:Wa,isObjectLike:Ia,isPlainObject:Du,isRegExp:tm,isSafeInteger:function(e){return Xv(e)&&e>=-9007199254740991&&e<=9007199254740991},isSet:uf,isString:hv,isSymbol:La,isTypedArray:_c,isUndefined:nm,isWeakMap:function(e){return Ia(e)&&"[object WeakMap]"==Ah(e)},isWeakSet:function(e){return Ia(e)&&"[object WeakSet]"==Sa(e)},lt:dm,lte:hm,toArray:Nm,toFinite:Za,toInteger:Qa,toLength:Ag,toNumber:Xa,toPlainObject:Gp,toSafeInteger:function(e){return e?Qd(Qa(e),-9007199254740991,9007199254740991):0===e?e:0},toString:fu},Pb={add:Ba,ceil:Xd,divide:ug,floor:$g,max:vm,maxBy:mm,mean:function(e){return Cm(e,Ja)},meanBy:function(e,t){return Cm(e,vp(t))},min:Tm,minBy:function(e,t){return e&&e.length?gm(e,vp(t),um):void 0},multiply:Mm,round:tC,subtract:IC,sum:function(e){return e&&e.length?ym(e,Ja):0},sumBy:TC},kb=Jd,Bb=uv,Fb={assign:zc,assignIn:Uc,assignInWith:Yc,assignWith:Xc,at:Tu,create:function(e,t){var n=Ss(e);return null==t?n:th(n,t)},defaults:jp,defaultsDeep:Xp,entries:wg,entriesIn:xg,extend:Uc,extendWith:Yc,findKey:function(e,t){return jg(e,vp(t),xp)},findLastKey:function(e,t){return jg(e,vp(t),vg)},forIn:Zg,forInRight:function(e,t){return null==e?e:gg(e,hg(t),Wc)},forOwn:function(e,t){return e&&xp(e,hg(t))},forOwnRight:function(e,t){return e&&vg(e,hg(t))},functions:function(e){return null==e?[]:Qg(e,Bc(e))},functionsIn:function(e){return null==e?[]:Qg(e,Wc(e))},get:yu,has:sv,hasIn:up,invert:Lv,invertBy:Nv,invoke:Dv,keys:Bc,keysIn:Wc,mapKeys:fm,mapValues:function(e,t){var n={};return t=vp(t),xp(e,(function(e,r,o){Zl(n,r,t(e,r,o))})),n},merge:wm,mergeWith:$p,omit:km,omitBy:function(e,t){return jm(e,Om(vp(t)))},pick:Ty,pickBy:jm,result:function(e,t,n){var r=-1,o=(t=pu(t,e)).length;for(o||(o=1,e=void 0);++r<o;){var i=null==e?void 0:e[vu(t[r])];void 0===i&&(r=o,i=n),e=os(i)?i.call(e):i}return e},set:sC,setWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Bm(e,t,n,r)},toPairs:wg,toPairsIn:xg,transform:function(e,t,n){var r=Na(e),o=r||xc(e)||_c(e);if(t=vp(t),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Wa(e)&&os(i)?Ss(Lu(e)):{}}return(o?ol:xp)(e,(function(e,r,o){return t(n,e,r,o)})),n},unset:hb,update:function(e,t,n){return null==e?e:vb(e,t,hg(n))},updateWith:function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:vb(e,t,hg(n),r)},values:pv,valuesIn:function(e){return null==e?[]:fv(e,Wc(e))}},jb={at:wb,chain:qd,commit:function(){return new Hs(this.value(),this.__chain__)},lodash:Vs,next:function(){void 0===this.__values__&&(this.__values__=Nm(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,n=this;n instanceof As;){var r=Gs(n);r.__index__=0,r.__values__=void 0,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof Ds){var t=e;return this.__actions__.length&&(t=new Ds(this)),(t=t.reverse()).__actions__.push({func:GC,args:[eC],thisArg:void 0}),new Hs(t,this.__chain__)}return this.thru(eC)},tap:function(e,t){return t(e),e},thru:GC,toIterator:function(){return this},toJSON:$C,value:$C,valueOf:$C,wrapperChain:function(){return qd(this)}},zb={camelCase:Ud,capitalize:ud,deburr:vd,endsWith:Cg,escape:Tg,escapeRegExp:function(e){return(e=fu(e))&&Mg.test(e)?e.replace(Lg,"\\$&"):e},kebabCase:om,lowerCase:lm,lowerFirst:cm,pad:function(e,t,n){e=fu(e);var r=(t=Qa(t))?fy(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return gy(my(o),n)+e+gy(vy(o),n)},padEnd:function(e,t,n){e=fu(e);var r=(t=Qa(t))?fy(e):0;return t&&r<t?e+gy(t-r,n):e},padStart:function(e,t,n){e=fu(e);var r=(t=Qa(t))?fy(e):0;return t&&r<t?gy(t-r,n)+e:e},parseInt:function(e,t,n){return n||null==t?t=0:t&&(t=+t),Cy(fu(e).replace(yy,""),t||0)},repeat:Qy,replace:function(){var e=arguments,t=fu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:dC,split:wC,startCase:EC,startsWith:function(e,t,n){return e=fu(e),n=null==n?0:Qd(Qa(n),0,e.length),t=Pa(t),e.slice(n,n+t.length)==t},template:function(e,t,n){var r=RC.imports._.templateSettings||RC;n&&lc(e,t,n)&&(t=void 0),e=fu(e),t=Yc({},t,r,OC);var o,i,a=Yc({},t.imports,r.imports,OC),s=Bc(a),l=fv(a,s),c=0,u=t.interpolate||jC,d="__p += '",h=RegExp((t.escape||jC).source+"|"+u.source+"|"+(u===AC?FC:jC).source+"|"+(t.evaluate||jC).source+"|$","g"),f=HC.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,n,r,a,s,l){return r||(r=a),d+=e.slice(c,l).replace(zC,NC),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(i=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var p=HC.call(t,"variable")&&t.variable;if(p){if(BC.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(DC,""):d).replace(PC,"$1").replace(kC,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Bu((function(){return Function(s,f+"return "+d).apply(void 0,l)}));if(g.source=d,Pu(g))throw g;return g},templateSettings:RC,toLower:function(e){return fu(e).toLowerCase()},toUpper:XC,trim:ZC,trimEnd:function(e,t,n){if((e=fu(e))&&(n||void 0===t))return e.slice(0,ja(e)+1);if(!e||!(t=Pa(t)))return e;var r=sd(e);return Yu(r,0,qC(r,sd(t))+1).join("")},trimStart:function(e,t,n){if((e=fu(e))&&(n||void 0===t))return e.replace(QC,"");if(!e||!(t=Pa(t)))return e;var r=sd(e);return Yu(r,KC(r,sd(t))).join("")},truncate:function(e,t){var n=30,r="...";if(Wa(t)){var o="separator"in t?t.separator:o;n="length"in t?Qa(t.length):n,r="omission"in t?Pa(t.omission):r}var i=(e=fu(e)).length;if(Xu(e)){var a=sd(e);i=a.length}if(n>=i)return e;var s=n-fy(r);if(s<1)return r;var l=a?Yu(a,0,s).join(""):e.slice(0,s);if(void 0===o)return l+r;if(a&&(s+=l.length-s),tm(o)){if(e.slice(s).search(o)){var c,u=l;for(o.global||(o=RegExp(o.source,fu(JC.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(Pa(o),s)!=s){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+r},unescape:function(e){return(e=fu(e))&&nb.test(e)?e.replace(tb,eb):e},upperCase:mb,upperFirst:cd,words:Hd},Hb={attempt:Bu,bindAll:Wu,cond:mp,conforms:function(e){return function(e){var t=Bc(e);return function(n){return yp(n,e,t)}}(Cf(e,1))},constant:Js,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:qg,flowRight:Kg,identity:Ja,iteratee:function(e){return vp("function"==typeof e?e:Cf(e,1))},matches:pm,matchesProperty:function(e,t){return fp(e,Cf(t,1))},method:Em,methodOf:Im,mixin:Lm,noop:Ps,nthArg:function(e){return e=Qa(e),oc((function(t){return Am(t,e)}))},over:Um,overEvery:qm,overSome:Km,property:gp,propertyOf:function(e){return function(t){return null==e?void 0:mu(e,t)}},range:Vy,rangeRight:Yy,stubArray:lh,stubFalse:yc,stubObject:function(){return{}},stubString:function(){return""},stubTrue:SC,times:function(e,t){if((e=Qa(e))<1||e>9007199254740991)return[];var n=UC,r=VC(e,UC);t=hg(t),e-=UC;for(var o=hc(r,t);++n<e;)t(n);return o},toPath:function(e){return Na(e)?_a(e,vu):La(e)?[e]:Ws(hu(fu(e)))},uniqueId:function(e){var t=++db;return fu(e)+t}},Wb=Math.max,Gb=Math.min,Ub=Math.min,Vb=4294967295,Yb=Array.prototype,$b=Object.prototype.hasOwnProperty,Xb=ga?ga.iterator:void 0,qb=Math.max,Kb=Math.min,Zb=function(e){return function(t,n,r){if(null==r){var o=Wa(n),i=o&&Bc(n),a=i&&i.length&&Qg(n,i);(a?a.length:o)||(r=n,n=t,t=this)}return e(t,n,r)}}(Lm);Vs.after=Rb.after,Vs.ary=Rb.ary,Vs.assign=Fb.assign,Vs.assignIn=Fb.assignIn,Vs.assignInWith=Fb.assignInWith,Vs.assignWith=Fb.assignWith,Vs.at=Fb.at,Vs.before=Rb.before,Vs.bind=Rb.bind,Vs.bindAll=Hb.bindAll,Vs.bindKey=Rb.bindKey,Vs.castArray=Db.castArray,Vs.chain=jb.chain,Vs.chunk=_b.chunk,Vs.compact=_b.compact,Vs.concat=_b.concat,Vs.cond=Hb.cond,Vs.conforms=Hb.conforms,Vs.constant=Hb.constant,Vs.countBy=Nb.countBy,Vs.create=Fb.create,Vs.curry=Rb.curry,Vs.curryRight=Rb.curryRight,Vs.debounce=Rb.debounce,Vs.defaults=Fb.defaults,Vs.defaultsDeep=Fb.defaultsDeep,Vs.defer=Rb.defer,Vs.delay=Rb.delay,Vs.difference=_b.difference,Vs.differenceBy=_b.differenceBy,Vs.differenceWith=_b.differenceWith,Vs.drop=_b.drop,Vs.dropRight=_b.dropRight,Vs.dropRightWhile=_b.dropRightWhile,Vs.dropWhile=_b.dropWhile,Vs.fill=_b.fill,Vs.filter=Nb.filter,Vs.flatMap=Nb.flatMap,Vs.flatMapDeep=Nb.flatMapDeep,Vs.flatMapDepth=Nb.flatMapDepth,Vs.flatten=_b.flatten,Vs.flattenDeep=_b.flattenDeep,Vs.flattenDepth=_b.flattenDepth,Vs.flip=Rb.flip,Vs.flow=Hb.flow,Vs.flowRight=Hb.flowRight,Vs.fromPairs=_b.fromPairs,Vs.functions=Fb.functions,Vs.functionsIn=Fb.functionsIn,Vs.groupBy=Nb.groupBy,Vs.initial=_b.initial,Vs.intersection=_b.intersection,Vs.intersectionBy=_b.intersectionBy,Vs.intersectionWith=_b.intersectionWith,Vs.invert=Fb.invert,Vs.invertBy=Fb.invertBy,Vs.invokeMap=Nb.invokeMap,Vs.iteratee=Hb.iteratee,Vs.keyBy=Nb.keyBy,Vs.keys=Bc,Vs.keysIn=Fb.keysIn,Vs.map=Nb.map,Vs.mapKeys=Fb.mapKeys,Vs.mapValues=Fb.mapValues,Vs.matches=Hb.matches,Vs.matchesProperty=Hb.matchesProperty,Vs.memoize=Rb.memoize,Vs.merge=Fb.merge,Vs.mergeWith=Fb.mergeWith,Vs.method=Hb.method,Vs.methodOf=Hb.methodOf,Vs.mixin=Zb,Vs.negate=Om,Vs.nthArg=Hb.nthArg,Vs.omit=Fb.omit,Vs.omitBy=Fb.omitBy,Vs.once=Rb.once,Vs.orderBy=Nb.orderBy,Vs.over=Hb.over,Vs.overArgs=Rb.overArgs,Vs.overEvery=Hb.overEvery,Vs.overSome=Hb.overSome,Vs.partial=Rb.partial,Vs.partialRight=Rb.partialRight,Vs.partition=Nb.partition,Vs.pick=Fb.pick,Vs.pickBy=Fb.pickBy,Vs.property=Hb.property,Vs.propertyOf=Hb.propertyOf,Vs.pull=_b.pull,Vs.pullAll=_b.pullAll,Vs.pullAllBy=_b.pullAllBy,Vs.pullAllWith=_b.pullAllWith,Vs.pullAt=_b.pullAt,Vs.range=Hb.range,Vs.rangeRight=Hb.rangeRight,Vs.rearg=Rb.rearg,Vs.reject=Nb.reject,Vs.remove=_b.remove,Vs.rest=Rb.rest,Vs.reverse=_b.reverse,Vs.sampleSize=Nb.sampleSize,Vs.set=Fb.set,Vs.setWith=Fb.setWith,Vs.shuffle=Nb.shuffle,Vs.slice=_b.slice,Vs.sortBy=Nb.sortBy,Vs.sortedUniq=_b.sortedUniq,Vs.sortedUniqBy=_b.sortedUniqBy,Vs.split=zb.split,Vs.spread=Rb.spread,Vs.tail=_b.tail,Vs.take=_b.take,Vs.takeRight=_b.takeRight,Vs.takeRightWhile=_b.takeRightWhile,Vs.takeWhile=_b.takeWhile,Vs.tap=jb.tap,Vs.throttle=Rb.throttle,Vs.thru=GC,Vs.toArray=Db.toArray,Vs.toPairs=Fb.toPairs,Vs.toPairsIn=Fb.toPairsIn,Vs.toPath=Hb.toPath,Vs.toPlainObject=Db.toPlainObject,Vs.transform=Fb.transform,Vs.unary=Rb.unary,Vs.union=_b.union,Vs.unionBy=_b.unionBy,Vs.unionWith=_b.unionWith,Vs.uniq=_b.uniq,Vs.uniqBy=_b.uniqBy,Vs.uniqWith=_b.uniqWith,Vs.unset=Fb.unset,Vs.unzip=_b.unzip,Vs.unzipWith=_b.unzipWith,Vs.update=Fb.update,Vs.updateWith=Fb.updateWith,Vs.values=Fb.values,Vs.valuesIn=Fb.valuesIn,Vs.without=_b.without,Vs.words=zb.words,Vs.wrap=Rb.wrap,Vs.xor=_b.xor,Vs.xorBy=_b.xorBy,Vs.xorWith=_b.xorWith,Vs.zip=_b.zip,Vs.zipObject=_b.zipObject,Vs.zipObjectDeep=_b.zipObjectDeep,Vs.zipWith=_b.zipWith,Vs.entries=Fb.toPairs,Vs.entriesIn=Fb.toPairsIn,Vs.extend=Fb.assignIn,Vs.extendWith=Fb.assignInWith,Zb(Vs,Vs),Vs.add=Pb.add,Vs.attempt=Hb.attempt,Vs.camelCase=zb.camelCase,Vs.capitalize=zb.capitalize,Vs.ceil=Pb.ceil,Vs.clamp=kb,Vs.clone=Db.clone,Vs.cloneDeep=Db.cloneDeep,Vs.cloneDeepWith=Db.cloneDeepWith,Vs.cloneWith=Db.cloneWith,Vs.conformsTo=Db.conformsTo,Vs.deburr=zb.deburr,Vs.defaultTo=Hb.defaultTo,Vs.divide=Pb.divide,Vs.endsWith=zb.endsWith,Vs.eq=Db.eq,Vs.escape=zb.escape,Vs.escapeRegExp=zb.escapeRegExp,Vs.every=Nb.every,Vs.find=Nb.find,Vs.findIndex=_b.findIndex,Vs.findKey=Fb.findKey,Vs.findLast=Nb.findLast,Vs.findLastIndex=_b.findLastIndex,Vs.findLastKey=Fb.findLastKey,Vs.floor=Pb.floor,Vs.forEach=Nb.forEach,Vs.forEachRight=Nb.forEachRight,Vs.forIn=Fb.forIn,Vs.forInRight=Fb.forInRight,Vs.forOwn=Fb.forOwn,Vs.forOwnRight=Fb.forOwnRight,Vs.get=Fb.get,Vs.gt=Db.gt,Vs.gte=Db.gte,Vs.has=Fb.has,Vs.hasIn=Fb.hasIn,Vs.head=_b.head,Vs.identity=Ja,Vs.includes=Nb.includes,Vs.indexOf=_b.indexOf,Vs.inRange=Bb,Vs.invoke=Fb.invoke,Vs.isArguments=Db.isArguments,Vs.isArray=Na,Vs.isArrayBuffer=Db.isArrayBuffer,Vs.isArrayLike=Db.isArrayLike,Vs.isArrayLikeObject=Db.isArrayLikeObject,Vs.isBoolean=Db.isBoolean,Vs.isBuffer=Db.isBuffer,Vs.isDate=Db.isDate,Vs.isElement=Db.isElement,Vs.isEmpty=Db.isEmpty,Vs.isEqual=Db.isEqual,Vs.isEqualWith=Db.isEqualWith,Vs.isError=Db.isError,Vs.isFinite=Db.isFinite,Vs.isFunction=Db.isFunction,Vs.isInteger=Db.isInteger,Vs.isLength=Db.isLength,Vs.isMap=Db.isMap,Vs.isMatch=Db.isMatch,Vs.isMatchWith=Db.isMatchWith,Vs.isNaN=Db.isNaN,Vs.isNative=Db.isNative,Vs.isNil=Db.isNil,Vs.isNull=Db.isNull,Vs.isNumber=Db.isNumber,Vs.isObject=Wa,Vs.isObjectLike=Db.isObjectLike,Vs.isPlainObject=Db.isPlainObject,Vs.isRegExp=Db.isRegExp,Vs.isSafeInteger=Db.isSafeInteger,Vs.isSet=Db.isSet,Vs.isString=Db.isString,Vs.isSymbol=Db.isSymbol,Vs.isTypedArray=Db.isTypedArray,Vs.isUndefined=Db.isUndefined,Vs.isWeakMap=Db.isWeakMap,Vs.isWeakSet=Db.isWeakSet,Vs.join=_b.join,Vs.kebabCase=zb.kebabCase,Vs.last=ig,Vs.lastIndexOf=_b.lastIndexOf,Vs.lowerCase=zb.lowerCase,Vs.lowerFirst=zb.lowerFirst,Vs.lt=Db.lt,Vs.lte=Db.lte,Vs.max=Pb.max,Vs.maxBy=Pb.maxBy,Vs.mean=Pb.mean,Vs.meanBy=Pb.meanBy,Vs.min=Pb.min,Vs.minBy=Pb.minBy,Vs.stubArray=Hb.stubArray,Vs.stubFalse=Hb.stubFalse,Vs.stubObject=Hb.stubObject,Vs.stubString=Hb.stubString,Vs.stubTrue=Hb.stubTrue,Vs.multiply=Pb.multiply,Vs.nth=_b.nth,Vs.noop=Hb.noop,Vs.now=Ab,Vs.pad=zb.pad,Vs.padEnd=zb.padEnd,Vs.padStart=zb.padStart,Vs.parseInt=zb.parseInt,Vs.random=function(e,t,n){if(n&&"boolean"!=typeof n&&lc(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=Za(e),void 0===t?(t=e,e=0):t=Za(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Hy();return zy(e+o*(t-e+jy("1e-"+((o+"").length-1))),t)}return Fy(e,t)},Vs.reduce=Nb.reduce,Vs.reduceRight=Nb.reduceRight,Vs.repeat=zb.repeat,Vs.replace=zb.replace,Vs.result=Fb.result,Vs.round=Pb.round,Vs.sample=Nb.sample,Vs.size=Nb.size,Vs.snakeCase=zb.snakeCase,Vs.some=Nb.some,Vs.sortedIndex=_b.sortedIndex,Vs.sortedIndexBy=_b.sortedIndexBy,Vs.sortedIndexOf=_b.sortedIndexOf,Vs.sortedLastIndex=_b.sortedLastIndex,Vs.sortedLastIndexBy=_b.sortedLastIndexBy,Vs.sortedLastIndexOf=_b.sortedLastIndexOf,Vs.startCase=zb.startCase,Vs.startsWith=zb.startsWith,Vs.subtract=Pb.subtract,Vs.sum=Pb.sum,Vs.sumBy=Pb.sumBy,Vs.template=zb.template,Vs.times=Hb.times,Vs.toFinite=Db.toFinite,Vs.toInteger=Qa,Vs.toLength=Db.toLength,Vs.toLower=zb.toLower,Vs.toNumber=Db.toNumber,Vs.toSafeInteger=Db.toSafeInteger,Vs.toString=Db.toString,Vs.toUpper=zb.toUpper,Vs.trim=zb.trim,Vs.trimEnd=zb.trimEnd,Vs.trimStart=zb.trimStart,Vs.truncate=zb.truncate,Vs.unescape=zb.unescape,Vs.uniqueId=Hb.uniqueId,Vs.upperCase=zb.upperCase,Vs.upperFirst=zb.upperFirst,Vs.each=Nb.forEach,Vs.eachRight=Nb.forEachRight,Vs.first=_b.head,Zb(Vs,(Mb={},xp(Vs,(function(e,t){$b.call(Vs.prototype,t)||(Mb[t]=e)})),Mb),{chain:!1}),Vs.VERSION="4.17.21",(Vs.templateSettings=zb.templateSettings).imports._=Vs,ol(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vs[e].placeholder=Vs})),ol(["drop","take"],(function(e,t){Ds.prototype[e]=function(n){n=void 0===n?1:qb(Qa(n),0);var r=this.__filtered__&&!t?new Ds(this):this.clone();return r.__filtered__?r.__takeCount__=Kb(n,r.__takeCount__):r.__views__.push({size:Kb(n,Vb),type:e+(r.__dir__<0?"Right":"")}),r},Ds.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ol(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Ds.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:vp(e),type:n}),t.__filtered__=t.__filtered__||r,t}})),ol(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Ds.prototype[e]=function(){return this[n](1).value()[0]}})),ol(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Ds.prototype[e]=function(){return this.__filtered__?new Ds(this):this[n](1)}})),Ds.prototype.compact=function(){return this.filter(Ja)},Ds.prototype.find=function(e){return this.filter(e).head()},Ds.prototype.findLast=function(e){return this.reverse().find(e)},Ds.prototype.invokeMap=oc((function(e,t){return"function"==typeof e?new Ds(this):this.map((function(n){return Rv(n,e,t)}))})),Ds.prototype.reject=function(e){return this.filter(Om(vp(e)))},Ds.prototype.slice=function(e,t){e=Qa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ds(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=Qa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ds.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ds.prototype.toArray=function(){return this.take(Vb)},xp(Ds.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Vs[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Vs.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Ds,l=a[0],c=s||Na(t),u=function(e){var t=o.apply(Vs,bu([e],a));return r&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,h=!!this.__actions__.length,f=i&&!d,p=s&&!h;if(!i&&c){t=p?t:new Ds(this);var g=e.apply(t,a);return g.__actions__.push({func:GC,args:[u],thisArg:void 0}),new Hs(g,d)}return f&&p?e.apply(this,a):(g=this.thru(u),f?r?g.value()[0]:g.value():g)})})),ol(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Yb[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Vs.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Na(o)?o:[],e)}return this[n]((function(n){return t.apply(Na(n)?n:[],e)}))}})),xp(Ds.prototype,(function(e,t){var n=Vs[t];if(n){var r=n.name+"";$b.call(Fs,r)||(Fs[r]=[]),Fs[r].push({name:t,func:n})}})),Fs[Nl(void 0,2).name]=[{name:"wrapper",func:void 0}],Ds.prototype.clone=function(){var e=new Ds(this.__wrapped__);return e.__actions__=Ws(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ws(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ws(this.__views__),e},Ds.prototype.reverse=function(){if(this.__filtered__){var e=new Ds(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ds.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Na(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Gb(t,e+a);break;case"takeRight":e=Wb(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,d=u.length,h=0,f=Ub(l,this.__takeCount__);if(!n||!r&&o==l&&f==l)return YC(e,this.__actions__);var p=[];e:for(;l--&&h<f;){for(var g=-1,v=e[c+=t];++g<d;){var m=u[g],y=m.iteratee,C=m.type,b=y(v);if(2==C)v=b;else if(!b){if(1==C)continue e;break e}}p[h++]=v}return p},Vs.prototype.at=jb.at,Vs.prototype.chain=jb.wrapperChain,Vs.prototype.commit=jb.commit,Vs.prototype.next=jb.next,Vs.prototype.plant=jb.plant,Vs.prototype.reverse=jb.reverse,Vs.prototype.toJSON=Vs.prototype.valueOf=Vs.prototype.value=jb.value,Vs.prototype.first=Vs.prototype.head,Xb&&(Vs.prototype[Xb]=jb.toIterator);var Qb={exports:{}};!function(e){!function(t){var n=/^\s+/,r=/\s+$/,o=0,i=t.round,a=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var o,i,l,c={r:0,g:0,b:0},u=1,d=null,h=null,f=null,p=!1,g=!1;return"string"==typeof e&&(e=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,o=!1;if(L[e])e=L[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=z.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=z.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=z.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=z.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=z.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=z.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=z.hex8.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:k(t[4]),format:o?"name":"hex8"}:(t=z.hex6.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:o?"name":"hex"}:(t=z.hex4.exec(e))?{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:k(t[4]+""+t[4]),format:o?"name":"hex8"}:!!(t=z.hex3.exec(e))&&{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:o?"name":"hex"}}(e)),"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(o=e.r,i=e.g,l=e.b,c={r:255*_(o,255),g:255*_(i,255),b:255*_(l,255)},p=!0,g="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(d=D(e.s),h=D(e.v),c=function(e,n,r){e=6*_(e,360),n=_(n,100),r=_(r,100);var o=t.floor(e),i=e-o,a=r*(1-n),s=r*(1-i*n),l=r*(1-(1-i)*n),c=o%6;return{r:255*[r,s,a,a,l,r][c],g:255*[l,r,r,s,a,a][c],b:255*[a,a,l,r,r,s][c]}}(e.h,d,h),p=!0,g="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(d=D(e.s),f=D(e.l),c=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=_(e,360),t=_(t,100),n=_(n,100),0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),o=a(l,s,e),i=a(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,d,f),p=!0,g="hsl"),e.hasOwnProperty("a")&&(u=e.a)),u=O(u),{ok:p,format:e.format||g,r:a(255,s(c.r,0)),g:a(255,s(c.g,0)),b:a(255,s(c.b,0)),a:u}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=i(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=u.ok,this._tc_id=o++}function u(e,t,n){e=_(e,255),t=_(t,255),n=_(n,255);var r,o,i=s(e,t,n),l=a(e,t,n),c=(i+l)/2;if(i==l)r=o=0;else{var u=i-l;switch(o=c>.5?u/(2-i-l):u/(i+l),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:c}}function d(e,t,n){e=_(e,255),t=_(t,255),n=_(n,255);var r,o,i=s(e,t,n),l=a(e,t,n),c=i,u=i-l;if(o=0===i?0:u/i,i==l)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:c}}function h(e,t,n,r){var o=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function f(e,t,n,r){return[R(P(r)),R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=N(n.s),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=N(n.s),c(n)}function v(e){return c(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=N(n.l),c(n)}function y(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=s(0,a(255,n.r-i(-t/100*255))),n.g=s(0,a(255,n.g-i(-t/100*255))),n.b=s(0,a(255,n.b-i(-t/100*255))),c(n)}function C(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=N(n.l),c(n)}function b(e,t){var n=c(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,c(n)}function w(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function E(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function S(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function I(e,t,n){t=t||6,n=n||30;var r=c(e).toHsl(),o=360/n,i=[c(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(c(r));return i}function T(e,t){t=t||6;for(var n=c(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],s=1/t;t--;)a.push(c({h:r,s:o,v:i})),i=(i+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,o=this.toRgb();return e=o.r/255,n=o.g/255,r=o.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=u(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var a=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(n).toString(16)),R(P(r))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*_(this._r,255))+"%",g:i(100*_(this._g,255))+"%",b:i(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*_(this._r,255))+"%, "+i(100*_(this._g,255))+"%, "+i(100*_(this._b,255))+"%)":"rgba("+i(100*_(this._r,255))+"%, "+i(100*_(this._g,255))+"%, "+i(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=c(e);n="#"+f(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:D(e[r]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(e,t,n){n=0===n?0:n||50;var r=c(e).toRgb(),o=c(t).toRgb(),i=n/100;return c({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},c.readability=function(e,n){var r=c(e),o=c(n);return(t.max(r.getLuminance(),o.getLuminance())+.05)/(t.min(r.getLuminance(),o.getLuminance())+.05)},c.isReadable=function(e,t,n){var r,o,i=c.readability(e,t);switch(o=!1,r=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},c.mostReadable=function(e,t,n){var r,o,i,a,s=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=c.readability(e,t[u]))>l&&(l=r,s=c(t[u]));return c.isReadable(e,s,{level:i,size:a})||!o?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var L=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(L);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function _(e,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=a(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function N(e){return a(1,s(0,e))}function A(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function D(e){return e<=1&&(e=100*e+"%"),e}function P(e){return t.round(255*parseFloat(e)).toString(16)}function k(e){return A(e)/255}var B,F,j,z=(F="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",j="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(e){return!!z.CSS_UNIT.exec(e)}e.exports?e.exports=c:window.tinycolor=c}(Math)}(Qb);var Jb,ew=Qb.exports,tw=[95,85,75,30,15,0,15,30,45,60,80],nw=function(e){return ew(e).getLuminance()<=.5},rw=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],ow=function(e){void 0===e&&(e={});var t=Array.from(Array(15)).fill(ki),n=e.basicColorRelations,r=void 0===n?[]:n,o=function(e){for(var t=[],n=0;n<11;n++){var r=tw[n];t.push(XC(0===r?e:ew.mix(e,n<5?"#FFFFFF":"#000000",r).toHexString()))}return t}(e.brandColor);return r.forEach((function(e){t[e.basicColorIndex]=o[e.standardColorIndex]})),rw.forEach((function(e){var n=e.fontColorIndex,r=e.bgColorIndex;t[n]=nw(t[r])?ki:Pi})),sa(sa({},e),{basicColors:t})},iw=ow({brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]}),aw={default:ow({brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]}),colorful:iw,gray:ow({brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]})},sw="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",lw="zh_CN",cw={zh_CN:{小计:"小计",总计:"总计",总和:"总和",项:"项",已选择:"已选择",序号:"序号",度量:"度量",数值:"数值",共计:"共计",条:"条",趋势:"趋势",隐藏:"隐藏",组内升序:"组内升序",升序:"升序",降序:"降序",组内降序:"组内降序",不排序:"不排序"},en_US:{小计:"Total",总计:"Total",总和:"SUM",项:"items",已选择:"selected",序号:"Index",度量:"Measure",数值:"Measure",共计:"Total",条:"",隐藏:"Hide",趋势:"Trend",组内升序:"Group ASC",组内降序:"Group DESC",升序:"ASC",降序:"DESC",不排序:"No order"}},uw=function(){return lw},dw=function(e){cw=wm({},cw,e)},hw=function(e,t){return void 0===t&&(t=e),yu(cw,[lw,e],t)},fw="".concat(Ai,"-tooltip"),pw="".concat(fw,"-container"),gw="".concat(pw,"-show"),vw="".concat(pw,"-hide"),mw=("".concat(fw,"-operation"),15);function yw(e){return"mobile"===e||/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function Cw(){return/windows/i.test(navigator.userAgent)}!function(e){e[e.ALL=0]="ALL",e[e.COL=1]="COL",e[e.ROW=2]="ROW"}(Jb||(Jb={}));var bw=function(){function e(e){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var t=e.id,n=e.key,r=e.value,o=e.label,i=e.parent,a=e.level,s=e.rowIndex,l=e.isTotals,c=e.isGrandTotals,u=e.isSubTotals,d=e.isCollapsed,h=e.hierarchy,f=e.isPivotMode,p=e.seriesNumberWidth,g=e.field,v=e.spreadsheet,m=e.query,y=e.belongsCell,C=e.inCollapseNode,b=e.isTotalMeasure,w=e.isLeaf,x=e.extra;this.id=t,this.key=n,this.value=r,this.label=o||r,this.parent=i,this.level=a,this.rowIndex=s,this.isTotals=l,this.isCollapsed=d,this.hierarchy=h,this.isPivotMode=f,this.seriesNumberWidth=p,this.field=g,this.spreadsheet=v,this.query=m,this.belongsCell=y,this.inCollapseNode=C,this.isTotalMeasure=b,this.isLeaf=w,this.isGrandTotals=c,this.isSubTotals=u,this.extra=x}return e.getFieldPath=function(e,t){if(e&&!e.isTotals||e&&t){for(var n=e.parent,r=[e.field];n&&n.id!==Ei;)r.push(n.field),n=n.parent;return r.reverse()}return[]},e.getAllLeaveNodes=function(e){var t=[];if(e.isLeaf)return[e];for(var n=da([],ua(e.children),!1),r=n.shift();r;)r.isLeaf?t.push(r):n.unshift.apply(n,da([],ua(r.children),!1)),r=n.shift();return t},e.getAllChildrenNodes=function(e){var t=[];if(e.isLeaf)return[e];for(var n=da([],ua(e.children||[]),!1),r=n.shift();r;)t.push(r),n.unshift.apply(n,da([],ua(r.children),!1)),r=n.shift();return t},e.getAllBranch=function(e){for(var t=[],n=this.getAllLeaveNodes(e),r=n.shift(),o=[];r;){o.unshift(r);for(var i=r.parent;i&&!Yv(i,e);)o.unshift(i),i=i.parent;t.push(o),r=n.shift(),o=[]}return t},e.blankNode=function(){return new e({id:"",key:"",value:""})},e.rootNode=function(){return new e({id:"root",key:"",value:""})},e.prototype.toJSON=function(){return km(this,["config","hierarchy","parent","spreadsheet"])},e.prototype.getHeadLeafChild=function(){for(var e=this;!Vv(e.children);)e=Ug(e.children);return e},e}(),ww=function(){function e(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return e.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter((function(e){return e.isLeaf}))},e.prototype.getNodes=function(e){return void 0!==e?this.allNodesWithoutRoot.filter((function(t){return t.level===e})):this.allNodesWithoutRoot},e.prototype.getNodesLessThanLevel=function(e){return this.allNodesWithoutRoot.filter((function(t){return t.level<=e}))},e.prototype.pushNode=function(e,t){void 0===t&&(t=-1),-1===t?this.allNodesWithoutRoot.push(e):this.allNodesWithoutRoot.splice(t,0,e)},e.prototype.pushIndexNode=function(e){this.indexNode.push(e)},e.prototype.getIndexNodes=function(){return this.indexNode},e}(),xw=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.label=e,this.isSubTotals=t,this.isGrandTotals=n};function Ew(e,t){for(var n={},r=e;r&&r.key;)r.isTotals&&!t||(n[r.key]=r.value),r=r.parent;return n}var Sw=function(e,t,n,r){return t.layoutArrange?t.layoutArrange(t.spreadsheet,n,r,e):e},Iw=function(e,t,n,r){var o,i;if(null===(i=null===(o=e.spreadsheet)||void 0===o?void 0:o.facet)||void 0===i?void 0:i.getHiddenColumnsInfo(n))return!1;var a=!0,s=function(e,n,o){void 0===n&&(n=-1),void 0===o&&(o=-1),-1===n?(t.children.push(e),r.pushNode(e)):(t.children.splice(n,0,e),r.pushNode(e,o))};if(e.layoutHierarchy){var l=e.layoutHierarchy(e.spreadsheet,n);if(l){var c=!!jv(null==l?void 0:l.delete)&&(null==l?void 0:l.delete);a=!c;var u=l.push,d=l.unshift,h=t.children.length,f=r.getNodes().length;Vv(d)||(fg(d,(function(e){s(e)})),h=t.children.length,f=r.getNodes().length),Vv(u)||fg(u,(function(e){s(e)})),c||s(n,h,f)}else s(n)}else s(n);return a},Tw=function(e,t,n){(null==e?void 0:e.layoutCoordinate)&&((null==t?void 0:t.isLeaf)||(null==n?void 0:n.isLeaf))&&(null==e||e.layoutCoordinate(e.spreadsheet,t,n))},Lw=function(e){this.label=e},Mw=function(e){var t,n=e.addTotalMeasureInTotal,r=e.addMeasureInTotalQuery,o=e.parentNode,i=e.currentField,a=e.fields,s=e.facetCfg,l=e.hierarchy,c=a.indexOf(i),u=s.dataSet,d=s.values,h=s.spreadsheet,f=[],p={};if(o.isTotals)n&&(p=Ew(o.parent,!0),f.push.apply(f,da([],ua(d.map((function(e){return new Lw(e)}))),!1)));else{p=Ew(o,!0);var g=u.getDimensionValues(i,p),v=Sw(g,s,o,i);f.push.apply(f,da([],ua(v||[]),!1));var m=u.getFieldName(i);Vv(f)&&(i===ri?f.push.apply(f,da([],ua(null===(t=u.fields)||void 0===t?void 0:t.values),!1)):f.push(m)),function(e,t,n){var r,o,i,a,s=null!==(a=null===(i=n.colCfg)||void 0===i?void 0:i.hideMeasureColumn)&&void 0!==a&&a,l=n.dataSet.fields.valueInCols;try{for(var c=ca(e),u=c.next();!u.done;u=c.next()){var d=u.value;s&&l&&t===ri&&e.splice(e.indexOf(d),1)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}(f,i,s),function(e){var t,n,r,o=e.isFirstField,i=e.currentField,a=e.fieldValues,s=e.lastField,l=e.spreadsheet.getTotalsConfig(o?i:s);o?(null==l?void 0:l.showGrandTotals)&&(n=l.reverseLayout?"unshift":"push",r=new xw(l.label,!1,!0)):(null==l?void 0:l.showSubTotals)&&(Vs.size(a)>1||!1!==Vs.get(l,"showSubTotals.always"))&&i!==ri&&(n=l.reverseSubLayout?"unshift":"push",r=new xw(l.subLabel,!0)),null===(t=a[n])||void 0===t||t.call(a,r)}({currentField:i,lastField:a[c-1],isFirstField:0===c,fieldValues:f,spreadsheet:h})}var y=f.filter((function(e){return!nm(e)}));_w({currentField:i,fields:a,fieldValues:y,facetCfg:s,hierarchy:l,parentNode:o,level:c,query:p,addMeasureInTotalQuery:r,addTotalMeasureInTotal:n})},Ow=function(e,t){return"".concat(e).concat(Si).concat(t)},_w=function(e){var t,n,r,o,i,a,s,l,c,u,d,h,f=e.currentField,p=e.fields,g=e.fieldValues,v=e.facetCfg,m=e.hierarchy,y=e.parentNode,C=e.level,b=e.query,w=e.addMeasureInTotalQuery,x=e.addTotalMeasureInTotal,E=v.spreadsheet,S=v.collapsedCols,I=v.colCfg;try{for(var T=ca(g.entries()),L=T.next();!L.done;L=T.next()){var M=ua(L.value,2),O=M[0],_=M[1],N=_ instanceof xw,A=_ instanceof Lw,R=void 0,D=void 0,P=!1,k=!1,B=!1,F=f;if(N){var j=_;k=j.isGrandTotals,B=j.isSubTotals,R=hw(_.label),w?(D=sa(sa({},b),((r={})[ri]=null===(s=null==E?void 0:E.dataSet)||void 0===s?void 0:s.fields.values[0],r)),P=!0):(D=b,x||(P=!0))}else if(A)R=hw(_.label),D=sa(sa({},b),((o={})[ri]=R,o)),F=ri,P=!0;else if(E.isTableMode())R=_,F=p[O],D=sa(sa({},b),((i={})[F]=R,i)),P=!0;else{R=_,D=sa(sa({},b),((a={})[f]=R,a));var z=null===(c=null===(l=E.dataCfg.fields)||void 0===l?void 0:l.valueInCols)||void 0===c||c,H=(null==I?void 0:I.hideMeasureColumn)&&z&&vv(p,ri)?2:1;P=C===p.length-H}var W=Ow(y.id,R);if(!W)return;var G=!!jv(null==S?void 0:S[W])&&(null==S?void 0:S[W]),U=new bw({id:W,key:F,value:R,level:C,field:F,parent:y,isTotals:N,isGrandTotals:k,isSubTotals:B,isTotalMeasure:A,isCollapsed:G,hierarchy:m,query:D,spreadsheet:E,isLeaf:P||G}),V=Iw(v,y,U,m),Y=null===(u=null==E?void 0:E.facet)||void 0===u?void 0:u.getHiddenColumnsInfo(U);Y&&y&&(y.hiddenChildNodeInfo=Y),!(C>m.maxLevel)||k||y.isGrandTotals||y.isSubTotals||U.isSubTotals||(m.sampleNodesForAllLevels.push(U),m.maxLevel=C,m.sampleNodeForLastLevel=Y?(null===(d=null==Y?void 0:Y.displaySiblingNode)||void 0===d?void 0:d.next)||(null===(h=null==Y?void 0:Y.displaySiblingNode)||void 0===h?void 0:h.prev):U),P||G||!V?(U.isLeaf=!0,m.pushIndexNode(U),U.rowIndex=m.getIndexNodes().length-1):Mw({addTotalMeasureInTotal:x,addMeasureInTotalQuery:w,parentNode:U,currentField:p[C+1],fields:p,facetCfg:v,hierarchy:m})}}catch(e){t={error:e}}finally{try{L&&!L.done&&(n=T.return)&&n.call(T)}finally{if(t)throw t.error}}},Nw=function(e,t,n,r){var o=t.facetCfg,i=t.hierarchy,a=t.parentNode,s=o.dataSet;e.forEach((function(e,l){"string"==typeof e&&(e={key:e});var c=e.key,u=c===ai?hw("序号"):s.getFieldName(c),d=r||a;if(_w({currentField:c,fields:[c],fieldValues:[u],facetCfg:o,hierarchy:i,parentNode:d,level:n,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),e.children&&e.children.length){var h=d.children[l];h.isLeaf=!1,Nw(e.children,t,n+1,h)}}))},Aw=function(e,t){return t>0&&e<t},Rw=function(e,t,n){return t>0&&e>=n-t},Dw=function(e,t,n){return n>0&&e<t+n},Pw=function(e,t,n){return n>0&&e>=t+1-n},kw=function(e,t,n,r,o,i){var a=Bg(n,(function(t,r){var a=e-(Jv(i)?0:i)+o.x;return a>=t&&a<n[r+1]}),0);a=Math.max(a,0);var s=Bg(n,(function(t,r){var i=o.width+e+o.x;return i>=t&&i<n[r+1]}),a);s=Math.min(-1===s?1/0:s,n.length-2);var l=r.getIndexRange(t+o.y,o.height+t+o.y);return[a,s,l.start,l.end]},Bw=function(e,t,n){var r,o,i=null==e?void 0:e.getMatrix(),a=null!==(r=null==i?void 0:i[6])&&void 0!==r?r:0,s=null!==(o=null==i?void 0:i[7])&&void 0!==o?o:0;null==e||e.translate(t-a,n-s)},Fw=function(e,t){var n,r=null==e?void 0:e.getMatrix(),o=null!==(n=null==r?void 0:r[6])&&void 0!==n?n:0;null==e||e.translate(t-o,0)},jw=function(e,t,n){var r=t,o=n,i=function(e){return e.isLeaf?1:e.children?e.children.reduce((function(e,t){return e+i(t)}),0):0};return t&&(r=e.slice(0,t).reduce((function(e,t){return e+i(t)}),0)),n&&(o=e.slice(e.length-n).reduce((function(e,t){return e+i(t)}),0)),{colCount:r,trailingColCount:o}},zw=function(e,t){return e.reduce((function(e,n){"string"==typeof n&&(n={key:n});var r=sa({},n);return r.children?(r.children=zw(r.children,t),e.push(r),e):(t[r.key]&&e.push(r),e)}),[])},Hw=function(e){return"root"===e.parent.id},Ww=function(e){var t=function(e){var t=[],n=function(e){e.forEach((function(e){"string"!=typeof e&&e.children?n(e.children):t.push(e)}))};return n(e),t}(e);return t.map((function(e){return"string"==typeof e?e:e.key}))},Gw=function(e){var t=e.children[0];return t?t.isLeaf?t:Gw(t):e},Uw=function(){function e(){var e=this;this.debug=!1,this.debugCallback=function(t,n){if(e.debug){var r=performance.now();n();var o=performance.now();console.log(t,"".concat(o-r," ms"))}else n()},this.logger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.debug&&console.log.apply(console,da([t],ua(n),!1))}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setDebug=function(e){this.debug=e},e}(),Vw=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↓" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5">↓</tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↑" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5">↑</tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',GroupNone:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">\n    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">\n        <g id="编组-39" transform="translate(3064.500000, 667.000000)">\n            <g id="编组-36" transform="translate(80.500000, 44.000000)">\n                <g id="不排序" transform="translate(130.000000, 13.000000)">\n                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>\n                </g>\n            </g>\n        </g>\n    </g>q\n</g>\n</svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="16910">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="16911">\n\t</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="17026">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="17027">\n\t</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>编组 8备份 3</title>\n    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">\n                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>'}),Yw={},$w=function(e,t){Yw[lm(e)]=t},Xw=function(e){return Yw[lm(e)]};Bc(Vw).forEach((function(e){$w(e,Vw[e])}));var qw,Kw,Zw,Qw="<svg",Jw="data:image/svg+xml",ex={},tx=function(e){function t(t){var n=e.call(this,t)||this;return n.isOnlineLink=function(e){return/^(https?:)?(\/\/)/.test(e)},n.render(),n}return aa(t,e),t.prototype.getImage=function(e,t,n){var r=this;return new Promise((function(o,i){var a=Xw(e);if(a){var s=new Image;s.onload=function(){ex[t]=s,o(s)},s.onerror=i,a.includes(Jw)||r.isOnlineLink(a)?s.src=a:(n&&(a=(a=a.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),a=a.replace(Qw,"".concat(Qw,' fill="').concat(n,'"')),s.src="".concat(Jw,";utf-8,").concat(encodeURIComponent(a)))}}))},t.prototype.render=function(){var e=this.cfg,n=e.name,r=e.fill,o=bf(this.cfg),i=sa(sa({},km(o,"fill")),{type:t.type}),a=new Eo({attrs:i});this.iconImageShape=a,this.setImageAttrs({name:n,fill:r})},t.prototype.setImageAttrs=function(e){var t=this,n=e.name,r=e.fill,o=this.iconImageShape;n=n||o.attrs.name,r=r||o.attrs.fill;var i="".concat(n,"-").concat(r),a=ex[i];a?(o.attr("img",a),this.addShape("image",o)):this.getImage(n,i,r).then((function(e){t.destroyed||(o.attr("img",e),t.addShape("image",o))})).catch((function(e){console.error("GuiIcon ".concat(n," load failed"),e)}))},t.type="__GUI_ICON__",t}(vo);!function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT"}(qw||(qw={})),function(e){e.SUM="SUM",e.MIN="MIN",e.MAX="MAX",e.AVG="AVG"}(Kw||(Kw={})),function(e){e.Row="row",e.Col="col",e.Series="series"}(Zw||(Zw={}));var nx=function(){function e(){this.store=new Map}return e.prototype.set=function(e,t){return this.store.set(e,t)},e.prototype.get=function(e,t){var n;return null!==(n=this.store.get(e))&&void 0!==n?n:t},e.prototype.clear=function(){this.store.clear()},e.prototype.size=function(){return this.store.size},e}(),rx=function(e,t,n){return e.sort((function(e,r){n&&(e=n(e),r=n(r));var o=t.indexOf(e),i=t.indexOf(r);return-1===o&&-1===i?0:-1===o?1:-1===i?-1:o-i}))},ox=function(e){return Dg(e,(function(e){return!nm(e)&&"undefined"!==e}))},ix=function(e){var t;return null===(t=Bc(e))||void 0===t?void 0:t.reduce((function(t,n){var r=yu(e,n);return Array.isArray(r)?t=t.concat(ix(r)):null==t||t.push(r),t}),[])},ax=function(e){var t=[];if(Array.isArray(e))for(var n=("undefined"in e),r=e.length+(n?1:0),o=0,i=function(){var n=o===e.length?e[void 0]:e[o];o++,n&&"undefined"in n?Bc(n).forEach((function(e){t.push(n[e])})):Array.isArray(n)?t.push.apply(t,da([],ua(n),!1)):t.push(n)};o<r;)i();else t.push(e);return t},sx=function(e,t){var n=[];return null==e||e.forEach((function(e,r){void 0===e&&t[r]&&n.push(t[r])})),n},lx=function(e,t){return!Ng(e,(function(e){return t[e]}))};function cx(e,t){var n=t.rows,r=t.columns;return Ky(e,(function(e,t){return lx([].concat(n).concat(r),t)&&e.push(t),e}),[])}"KMBTP".split("");var ux=function(e){return Number.parseFloat((Xa(e)||0).toPrecision(16))},dx=function(e,t,n){if(void 0===n&&(n=0),!Object.values(e).find((function(e){return e>0})))return e;var r=sa({},e);r.frozenColCount>=t&&(r.frozenColCount=t);var o=t-r.frozenColCount;r.frozenTrailingColCount>o&&(r.frozenTrailingColCount=o),r.frozenRowCount>=n&&(r.frozenRowCount=n);var i=n-r.frozenRowCount;return r.frozenTrailingRowCount>i&&(r.frozenTrailingRowCount=i),r};function hx(e,t,n){var r;return null===(r=null==e?void 0:e.addShape)||void 0===r?void 0:r.call(e,"rect",sa({zIndex:1,attrs:t},n||{}))}function fx(e,t){var n;return null===(n=null==e?void 0:e.addShape)||void 0===n?void 0:n.call(e,"circle",{attrs:t})}function px(e,t,n,r,o,i,a,s){var l;return!Vv(t)&&e&&fg(t,(function(t){e.contain(t)&&e.removeChild(t,!0)})),null===(l=null==e?void 0:e.addShape)||void 0===l?void 0:l.call(e,"text",{attrs:sa(sa({x:n,y:r,text:o,originalText:s},i),a)})}function gx(e,t,n){var r;return null===(r=null==e?void 0:e.addShape)||void 0===r?void 0:r.call(e,"line",{zIndex:100,attrs:sa(sa({},t),n)})}function vx(e,t,n){Vv(e)||(Na(e)?e:[e]).forEach((function(e){sC(e,"attrs.".concat(t),n)}))}function mx(e,t){var n=new tx(t);return null==e||e.add(n),n}function yx(e,t,n,r,o){var i=new tx(sa(sa({name:r?"Plus":"Minus"},t),{fill:n}));return os(o)&&i.on("click",o),null==e||e.add(i),i}var Cx,bx="s2-offscreen-canvas",wx=function(e){var t;return null!==(t=null==e?void 0:e.position)&&void 0!==t?t:"right"},xx=function(e,t){var n,r,o,i=e.data,a=e.encode,s=e.type,l=t.getMeta(),c=l.x,u=l.y,d=l.height,h=l.width,f=t.getStyle(zi.DATA_CELL),p=f.cell,g=f.miniChart,v=[],m=Yg(i,(function(e){return v.push(null==e?void 0:e[a.y]),{x:e[a.x],y:e[a.y]}})),y=vm(v),C=Tm(v),b=y-C,w=c+p.padding.left,x=c+h-p.padding.right,E=u+p.padding.top,S=u+d-p.padding.bottom,I=S-E,T=s===ti.Bar?(x-w-(v.length-1)*(null===(n=null==g?void 0:g.bar)||void 0===n?void 0:n.intervalPadding))/v.length+(null===(r=null==g?void 0:g.bar)||void 0===r?void 0:r.intervalPadding):null!==(o=(x-w)/(v.length-1))&&void 0!==o?o:0,L=[],M=Yg(m,(function(e,t){var n,r,o=w+t*T;if(r=0!==b?S-((null==e?void 0:e.y)-C)/b*I:C>0?E:S,s===ti.Bar){var i=void 0,a=void 0;C<0&&y>0&&0!==b?(i=S-(0-C)/b*I,a=Math.abs(r-i),(null==e?void 0:e.y)<0&&(r=i)):(i=C<0?E:S,a=0===(b=vm([Math.abs(y),Math.abs(C)]))?I:Math.abs((null==e?void 0:e.y)-0)/b*I,r=i);var l=T-(null===(n=null==g?void 0:g.bar)||void 0===n?void 0:n.intervalPadding);L.push([l,a])}return[o,r]}));return{points:M,box:L}},Ex=function(e,t,n){var r=Number(t)-Number(e);return Number.isNaN(r)||Number(e)<0?n.bad:r<=.1?n.good:r>.1&&r<=.2?n.satisfactory:n.bad},Sx=function(e,t){switch(null==t?void 0:t.type){case ti.Line:!function(e,t){if(!Vv(null==e?void 0:e.data)&&!Vv(t)){var n=t.getStyle(zi.DATA_CELL).miniChart.line,r=n.point,o=n.linkLine,i=xx(e,t).points;!function(e,t){var n;null===(n=null==e?void 0:e.addShape)||void 0===n||n.call(e,"polyline",{attrs:t})}(t,{points:i,stroke:o.fill,lineWidth:o.size,opacity:o.opacity});for(var a=0;a<i.length;a++)fx(t,{x:i[a][0],y:i[a][1],r:r.size,fill:r.fill,fillOpacity:r.opacity})}}(t,e);break;case ti.Bar:!function(e,t){if(!Vv(null==e?void 0:e.data)&&!Vv(t))for(var n=t.getStyle(zi.DATA_CELL).miniChart.bar,r=xx(e,t),o=r.points,i=r.box,a=0;a<o.length;a++)hx(t,{x:o[a][0],y:o[a][1],width:i[a][0],height:i[a][1],fill:n.fill,fillOpacity:n.opacity})}(t,e);break;default:!function(e,t){var n,r=t.getStyle(zi.DATA_CELL),o=t.getMeta(),i=o.x,a=o.y,s=o.height,l=o.width,c=o.spreadsheet;if(Vv(e))px(t,[],i+l-r.cell.padding.right,a+s/2,kx(t,c.options.placeholder),r.text);else{var u=r.miniChart.bullet,d=u.progressBar,h=u.comparativeMeasure,f=u.rangeColors,p=u.backgroundColor,g=e.measure,v=e.target,m=Math.max(Number(g),0),y=Math.max(Number(v),0),C=function(e,t){var n,r;void 0===t&&(t={min:0,max:0});var o=Number(e);if(Number.isNaN(o))return e;var i=null!==(n=null==t?void 0:t.min)&&void 0!==n?n:t,a=null!==(r=null==t?void 0:t.max)&&void 0!==r?r:t;return new Intl.NumberFormat("en-US",{minimumFractionDigits:i,maximumFractionDigits:a,useGrouping:!1,style:"percent"}).format(o)}(g,2),b=(null==d?void 0:d.widthPercent)>1?(null==d?void 0:d.widthPercent)/100:null==d?void 0:d.widthPercent,w=r.cell.padding,x=l-w.left-w.right,E=b*x,S=x-E,I=i+l-w.right-E,T=a+s/2-d.height/2;hx(t,{x:I,y:T,width:E,height:d.height,fill:p,textBaseline:r.text.textBaseline});var L=yu(t.getMeta(),"spreadsheet.options.bullet.getRangeColor"),M=Math.max(Math.min(E*m,E),0);hx(t,{x:I,y:T+(d.height-d.innerHeight)/2,width:M,height:d.innerHeight,fill:null!==(n=null==L?void 0:L(m,y))&&void 0!==n?n:Ex(m,y,f)});var O=I+E*y;gx(t,{x1:O,y1:a+(s-h.height)/2,x2:O,y2:a+(s-h.height)/2+h.height},{stroke:(null==h?void 0:h.fill)||(null==h?void 0:h.color),lineWidth:h.width,opacity:null==h?void 0:h.opacity}),px(t,[],I-w.right,a+s/2,Ax({measureTextWidth:c.measureTextWidth,text:C,maxWidth:S-w.right,fontParam:r.text}),r.text)}}(t,e)}},Ix=function(e,t){var n=e.x,r=e.y,o=e.width,i=e.height,a=o-(null==t?void 0:t.left)-(null==t?void 0:t.right),s=i-(null==t?void 0:t.top)-(null==t?void 0:t.bottom);return{x:n+(null==t?void 0:t.left),y:r+(null==t?void 0:t.top),width:a,height:s}},Tx=function(e){return wm({size:0,position:"right",margin:{left:0,right:0}},e)},Lx=function(e,t){return e-(t=Tx(t)).size-t.margin.right-t.margin.left},Mx=function(e,t,n){var r=e.y,o=e.height;void 0===n&&(n=0);var i=0;switch(t){case"top":i=r;break;case"middle":i=r+o/2-n/2;break;default:i=r+o-n}return i},Ox=function(e,t,n,r,o){void 0===n&&(n=0),void 0===o&&(o=1);var i,a,s=e.x,l=e.width,c=t.textAlign,u=t.textBaseline,d=Tx(r),h=d.size,f=d.margin,p=d.position,g=o*(h+f.left)+(o?f.right:0);switch(c){case"left":i=s+("left"===p?g:0),a=s+("left"===p?f.left:n+f.left);break;case"center":var v=s+l/2-(g-("left"===p?f.left:f.right)+n)/2;i=v+n/2+("left"===p?g-f.left:0),a=v+("left"===p?0:n+f.left);break;default:i=s+l-("right"===p?g:0),a=s+l-("right"===p?g-f.left:n+g-f.left)}return{text:{x:i,y:Mx(e,u,0)},icon:{x:a,y:Mx(e,u,h)}}},_x=function(e,t,n){var r,o,i,a,s,l=t.x,c=t.y,u=t.width,d=t.height,h=n.horizontalBorderWidth,f=n.horizontalBorderColorOpacity,p=n.horizontalBorderColor,g=n.verticalBorderWidth,v=n.verticalBorderColor,m=n.verticalBorderColorOpacity;if(e===qw.TOP||e===qw.BOTTOM){var y;o=y=e===qw.TOP?c+g/2:c+d-g/2,a=y,r=l,i=l+u,s={lineWidth:h,stroke:p,strokeOpacity:f}}if(e===qw.LEFT||e===qw.RIGHT){var C;r=C=e===qw.LEFT?l+h/2:l+u-h/2,i=C,o=c,a=c+d,s={lineWidth:g,stroke:v,strokeOpacity:m}}return{position:{x1:r,x2:i,y1:o,y2:a},style:s}},Nx=(lu((function(e,t){if(void 0===e&&(e=""),!t)return 0;var n,r=(n=document.getElementById(bx),n||((n=document.createElement("canvas")).id=bx,n.style.display="none",document.body.appendChild(n),n)).getContext("2d"),o=t,i=o.fontSize,a=o.fontFamily,s=o.fontWeight,l=o.fontStyle,c=o.fontVariant;return r.font=[l,c,s,"".concat(i,"px"),a].join(" ").trim(),r.measureText("".concat(e)).width}),(function(e,t){return da([e],ua(pv(t)),!1).join("")})),function(e,t,n,r){var o,i=e(Ni,r);o=hv(t)?t:fu(t);var a,s,l=n,c=[];if(e(t,r)<=n)return t;for(var u=!0;u;){if((s=e(a=o.substr(0,16),r))+i>l&&s>l){u=!1;break}if(c.push(a),l-=s,!(o=o.substr(16)))return c.join("")}for(var d=!0;d;){if((s=e(a=o.substr(0,1),r))+i>l){d=!1;break}if(c.push(a),l-=s,!(o=o.substr(1)))return c.join("")}return"".concat(c.join(""),"...")}),Ax=function(e){var t=e.measureTextWidth,n=e.text,r=e.maxWidth,o=e.fontParam,i=e.priorityParam,a=e.placeholder,s={},l=null!=a?a:Ii,c=Jv(n)||""===n?l:"".concat(n),u=i;if(o&&Na(o)?u=o:s=o||{},!u||!u.length)return Nx(t,c,r,s);var d=[],h=[c];u.forEach((function(e){h.forEach((function(t,n){var r=-1,o=t.match(new RegExp(e));if(o){var i=o[0];r=o.index,d.push(i);var a=r+i.length,s=[t.slice(0,r),t.slice(a)].filter((function(e){return!!e}));h.splice.apply(h,da([n,1],ua(s),!1))}}))})),h=d.concat(h);var f=c,p=t(Ni,s),g=r;return h.forEach((function(e){if(g<=0){var n=f.indexOf(e),r=f.slice(n-3,n);if(r&&r!==Ni){var o=t(e,s);f=f.replace(e,o>p?Ni:e)}else f=f.replace(e,"");g-=p}else if(o=t(e,s),g<o&&o>p){var i=Nx(t,e,g,s);f=f.replace(e,i),g=0}else g-=o})),f},Rx=function(e){return Kv(e)?e>=0:!!e&&!ZC(e).startsWith("-")},Dx=function(e,t,n,r){void 0===r&&(r="left");var o=t.right,i=t.left,a=n||0;return"left"===r?e+o/2+a:"right"===r?e-o/2-a:e+i/2+a},Px=function(e){var t=e.rowIndex,n=e.colIndex,r=e.meta,o=e.data,i=e.textStyle,a=e.textCondition,s=i.fill;return(null==a?void 0:a.mapping)&&(s=null==a?void 0:a.mapping(o,{rowIndex:t,colIndex:n,meta:r}).fill),sa(sa({},i),{fill:s})},kx=function(e,t){return os(t)?t(e):t},Bx=function(e,t,n){var r,o,i,a;void 0===n&&(n=!0);var s=e.getContentArea(),l=s.x,c=s.y,u=s.height,d=s.width,h=t||e.getMeta().fieldValue,f=h.values,p=e.getMeta().spreadsheet,g=p.options,v=p.measureTextWidth,m=g.style.cellCfg.valuesCfg,y=null===(o=null===(r=null==g?void 0:g.conditions)||void 0===r?void 0:r.text)||void 0===o?void 0:o[0],C=null===(a=null===(i=null==g?void 0:g.conditions)||void 0===i?void 0:i.icon)||void 0===a?void 0:a[0];if(Na(f)){var b=null==m?void 0:m.widthPercent,w=0;if(null==h?void 0:h.label){var x=e.getStyle(zi.DATA_CELL).bolderText,E=px(e,[],l,c+(w=u/(f.length+1))/2,Ax({measureTextWidth:v,text:h.label,maxWidth:d,fontParam:x}),x);e.addTextShape(E)}for(var S,I=function(e){var t,n,r=e.getMeta().isTotals,o=null===(n=(t=e).isMeasureField)||void 0===n?void 0:n.call(t),i=e.getStyle(o?zi.COL_CELL:zi.DATA_CELL);return{cellStyle:i,textStyle:o?i.measureText:r?i.bolderText:i.text}}(e),T=I.cellStyle,L=I.textStyle,M=null==T?void 0:T.icon,O=C&&C.mapping&&{size:null==M?void 0:M.size,margin:null==M?void 0:M.margin,position:null==C?void 0:C.position},_=function(e,t,n){for(var r,o,i,a=e.x,s=e.y,l=e.width,c=e.height/uC(t),u=[],d=0,h=Yg(n,(function(e){return e>1?e/100:e})),f=0;f<uC(t);f++){o=s+c*f;var p=[];r=a,d=0;for(var g=0;g<uC(t[f]);g++)i=Vv(h)?l/uC(t[0]):l*h[g],r=Dx(a,{left:0,right:0},d,"left"),d+=i,p.push({x:r,y:o,width:i,height:c});u.push(p)}return u}({x:l,y:c+w,height:u-w,width:d},f,b),N=0;N<f.length;N++)for(var A=bf(f[N]),R=0;R<A.length;R++){S=A[R];var D=n?Px({rowIndex:N,colIndex:R,meta:null==e?void 0:e.getMeta(),data:S,textStyle:L,textCondition:y}):L,P=(null==e?void 0:e.getMeta().spreadsheet.options).placeholder,k=kx(null==e?void 0:e.getMeta(),P),B=Lx(_[N][R].width,M),F=Ax({measureTextWidth:v,text:S,maxWidth:B,fontParam:D,placeholder:k}),j=v(F,L),z=Ox(_[N][R],L,j,O,C?1:0);if(E=px(e,[],z.text.x,z.text.y,F,D,{},null==S?void 0:S.toString()),e.addTextShape(E),C&&n){var H=null==C?void 0:C.mapping(S,{rowIndex:N,colIndex:R,meta:null==e?void 0:e.getMeta()});if(H){var W=mx(e,sa(sa({},z.icon),{name:H.icon,width:null==M?void 0:M.size,height:null==M?void 0:M.size,fill:H.fill}));e.addConditionIconShape(W)}}}}else Sx(e,f)},Fx=function(e,t){return void 0===t&&(t=1),(null==e?void 0:e.width)*t},jx=function(e){try{return JSON.parse(e)}catch(e){return null}};function zx(e,t){return!(!e||!t)&&String(e).toLowerCase()===String(t).toLowerCase()}var Hx,Wx=function(e,t){var n=e.getColumnNodes().find((function(e){return e.id===t}));return e.isPivotMode()?null==n?void 0:n.value:null==n?void 0:n.field},Gx=function(e,t){var n=t.getColumnNodes().find((function(t){return t.colIndex===e})),r=Wx(t,n.id);return t.options.interaction.copyWithFormat?t.dataSet.getFieldFormatter(r):function(e){return e}},Ux=function(e,t,n){return Gx(e.colIndex,n)(function(e,t,n){var r,o;if(n.isPivotMode()){var i=ua(function(e,t){var n=e.rowIndex,r=e.colIndex;return[t.getRowNodes().find((function(e){return e.rowIndex===n})),t.getColumnNodes().find((function(e){return e.colIndex===r}))]}(e,n),2),a=i[0],s=i[1],l=function(e){var t,n,r,o;return(null===(o=null===(r=null===(n=e.options)||void 0===n?void 0:n.style)||void 0===r?void 0:r.colCfg)||void 0===o?void 0:o.hideMeasureColumn)&&e.isValueInCols()?((t={})[ri]=e.dataCfg.fields.values[0],t):{}}(n),c=n.dataSet.getCellData({query:sa(sa(sa({},a.query),s.query),l),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||s.isTotals||s.isTotalMeasure});return null!==(r=null==c?void 0:c[ni])&&void 0!==r?r:""}var u=function(e,t){var n=t.getColumnNodes().find((function(t){return t.colIndex===e}));return Wx(t,n.id)}(e.colIndex,n);return null===(o=t[e.rowIndex])||void 0===o?void 0:o[u]}(e,t,n))},Vx=function(e){return/\n/.test(e)?'"'+e.replace(/\r\n?/g,"\n")+'"':e},Yx=function(e,t){var n=e.split(Si);return t?n.slice(n.length-t):(n.shift(),n)};!function(e){e.PLAIN="text/plain",e.HTML="text/html"}(Hx||(Hx={}));var $x=((Cx={})[Hx.PLAIN]=function(e){return{type:Hx.PLAIN,content:Yg(e,(function(e){return e.join("\t")})).join("\r\n")}},Cx[Hx.HTML]=function(e){return{type:Hx.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat((t=e,"tr",t.map((function(e){return"<".concat("tr",">").concat(function(e,t){return e.map((function(e){return"<".concat("td",">").concat(Tg(e),"</").concat("td",">")})).join("")}(e),"</").concat("tr",">")})).join("")),"</tbody></table>")};var t},Cx);function Xx(e){return $x[e]}var qx=function(e,t,n){var r,o,i,a,s,l,c=null!==(o=null===(r=e[0])||void 0===r?void 0:r.length)&&void 0!==o?o:0,u=null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0,d=null!==(s=null===(a=n[0])||void 0===a?void 0:a.length)&&void 0!==s?s:0,h=null!==(l=n.length)&&void 0!==l?l:0,f=c+d,p=u+h,g=Array.from(Array(p),(function(){return new Array(f)}));return g=Yg(g,(function(r,o){return Yg(r,(function(r,i){return i>=0&&i<c&&o>=0&&o<u?"":i>=c&&i<=f&&o>=0&&o<u?t[o][i-c]:i>=0&&i<c&&o>=u&&o<p?e[o-u][i]:i>=c&&i<=f&&o>=u&&o<p?n[o-u][i-c]:void 0}))})),[Xx(Hx.PLAIN)(g),Xx(Hx.HTML)(g)]},Kx=function(e,t,n){return Yg(e,(function(e){return t.map((function(t){var r,o=n.dataSet.getCellData({query:sa(sa({},e.query),t.query),rowNode:e,isTotals:e.isTotals||e.isTotalMeasure||t.isTotals||t.isTotalMeasure});return Gx(t.colIndex,n)(null!==(r=null==o?void 0:o[ni])&&void 0!==r?r:"")}))}))};function Zx(e,t,n){return e.options.interaction.copyWithHeader?function(e,t,n){var r=Yg(t,(function(e){return Yx(e.id)})),o=Tb.apply(void 0,da([],ua(Yg(n,(function(e){return Yx(e.id)}))),!1)),i=Kx(t,n,e);return qx(r,o,i)}(e,t,n):function(e,t,n){var r=Kx(t,n,e);return[Xx(Hx.PLAIN)(r),Xx(Hx.HTML)(r)]}(e,t,n)}var Qx=function(e,t,n){return t.isPivotMode()?function(e,t){var n=e.getRowNodes().filter((function(t){return t.isLeaf||e.isHierarchyTreeType()})),r=e.getColumnNodes().filter((function(e){return e.isLeaf})),o=t.length?t.reduce((function(e,t){return e.push.apply(e,da([],ua(r.filter((function(e){return e.id.startsWith(t.id)}))),!1)),e}),[]):r;return Zx(e,n,o)}(t,n):function(e,t){var n=e.dataSet.getDisplayDataSet(),r=t.length?t.map((function(t){return{field:Wx(e,t.id),formatter:Gx(t.colIndex,e)}})):e.dataCfg.fields.columns.map((function(t){return e.getColumnNodes().find((function(e){return e.field===t}))})).map((function(t){return{field:Wx(e,t.id),formatter:Gx(t.colIndex,e)}})),o=n.map((function(e){return r.map((function(t){var n=t.field,r=t.formatter;return Vx(r(e[n]))}))}));return[Xx(Hx.PLAIN)(o),Xx(Hx.HTML)(o)]}(t,n)};var Jx=function(e,t,n){return Yg(t,(function(t){var r;return null!==(r=e[t])&&void 0!==r?r:n}))};function eE(e,t){var n,r,o=t.filter((function(e){return e.type===zi.COL_CELL})),i=t.filter((function(e){return e.type===zi.ROW_CELL})),a=e.dataSet.getDisplayDataSet();if(e.interaction.getCurrentStateName()===ji.ALL_SELECTED)r=Qx(0,e,[]);else if(o.length)r=Qx(0,e,o);else if(i.length)r=function(e,t,n){return t.isPivotMode()?function(e,t){var n=e.getRowNodes().filter((function(t){return t.isLeaf||e.isHierarchyTreeType()})),r=e.getColumnNodes().filter((function(e){return e.isLeaf})),o=t.reduce((function(e,t){return e.push.apply(e,da([],ua(n.filter((function(e){return e.id.startsWith(t.id)}))),!1)),e}),[]);return Zx(e,o,r)}(t,n):function(e,t){var n=e.dataSet.getDisplayDataSet().filter((function(e,n){return t.map((function(e){return e.rowIndex})).includes(n)})).map((function(t){return Object.keys(t).map((function(t){return e.getColumnNodes().find((function(e){return e.field===t}))})).filter(Boolean).map((function(n){return Vx(Gx(n.colIndex,e)(t[n.field]))}))}));return[Xx(Hx.PLAIN)(n),Xx(Hx.HTML)(n)]}(t,n)}(0,e,i);else{if(!t.length)return;var s=function(e){if(!(null==e?void 0:e.length))return[];var t=ua([{row:1/0,col:1/0},{row:0,col:0}],2),n=t[0],r=t[1];e.forEach((function(e){var t=e.rowIndex,o=e.colIndex;n.col=Math.min(o,n.col),n.row=Math.min(t,n.row),r.col=Math.max(o,r.col),r.row=Math.max(t,r.row)}));var o=ua([r.row-n.row+1,r.col-n.col+1],2),i=o[0],a=o[1],s=new Array(i).fill("").map((function(){return new Array(a).fill("")}));return e.forEach((function(e){var t=e.rowIndex,r=e.colIndex,o=ua([t-n.row,r-n.col],2),i=o[0],a=o[1];s[i][a]=e})),s}(t);if(e.interaction.getSelectedCellHighlight().currentRow){var l=Wm(t,"rowIndex","asc").map((function(t){return e.dataSet.getRowData(t)}));r=function(e,t){var n=e.options.placeholder,r=e.dataCfg.fields,o=r.rows,i=r.columns,a=r.values,s=kx(e,n),l=e.getColumnLeafNodes(),c=[];if(e.isTableMode()){var u=Dg(l,(function(e){return e.field!==ai}));c=Yg(t,(function(e){return Yg(u,(function(t){var n;return null!==(n=null==e?void 0:e[t.field])&&void 0!==n?n:s}))}))}else if(e.isPivotMode()){var d=da(da(da([],ua(o),!1),ua(i),!1),ua(a),!1);c=Ky(ix(t).filter((function(e){return da(da([],ua(o),!1),ua(i),!1).every((function(t){return!Jv(e[t])}))})),(function(e,t){return da(da([],ua(e),!1),[Jx(t,d,s)],!1)}),[])}return[Xx(Hx.PLAIN)(c),Xx(Hx.HTML)(c)]}(e,l)}else r=(null===(n=e.options.interaction)||void 0===n?void 0:n.copyWithHeader)?function(e,t,n){var r=Tb.apply(void 0,da([],ua(Yg(e[0],(function(e){var t,n,r=null!==(n=null===(t=e.id.split(Ii))||void 0===t?void 0:t[1])&&void 0!==n?n:"";return Yx(r)}))),!1)),o=Yg(e,(function(e){var t,n,r=null!==(n=null===(t=e[0].id.split(Ii))||void 0===t?void 0:t[0])&&void 0!==n?n:"";return Yx(r)})),i=Yg(e,(function(e){return Yg(e,(function(e){return Ux(e,t,n)}))}));return qx(o,r,i)}(s,a,e):function(e,t,n){var r=t.map((function(t){return t.map((function(t){return t?Vx(Ux(t,e,n)):""}))}));return[Xx(Hx.PLAIN)(r),Xx(Hx.HTML)(r)]}(a,s,e)}return r}function tE(e){return e?'"'.concat("string"==typeof e?e.replace(/"/g,'""'):e,'"'):e}var nE=function(e){return new Promise((function(t,n){var r;r=Array.isArray(e)?yu(e.filter((function(e){return e.type===Hx.PLAIN})),"[0].content",""):e.content||"";var o=document.createElement("textarea");o.value=r,document.body.appendChild(o),o.focus({preventScroll:!0}),o.select();var i=document.execCommand("copy");document.body.removeChild(o),i?t():n()}))},rE=function(e,t){var n;return void 0===t&&(t=!1),n="string"==typeof e?{content:e,type:Hx.PLAIN}:e,navigator.clipboard&&window.ClipboardItem&&!t?function(e){return navigator.clipboard.write([new ClipboardItem([].concat(e).reduce((function(e,t){var n,r=t.type,o=t.content.replace(/\x00/g,"");return sa(sa({},e),((n={})[r]=new Blob([o],{type:r}),n))}),{}))]).catch((function(){return nE(e)}))}(n):nE(n)},oE=function(e,t){try{var n=document.createElement("a");n.download="".concat(t,".csv");var r=new Blob(["\ufeff".concat(e)],{type:"text/csv;charset=utf-8"});n.href=URL.createObjectURL(r),n.click(),URL.revokeObjectURL(n.href)}catch(e){console.error(e)}},iE=function(e,t,n){if(!e)return"";var r=e.fieldValue,o=e.valueField,i=e.data;return Wa(r)?function(e){var t=(null==e?void 0:e.label)?[null==e?void 0:e.label]:[],n=null==e?void 0:e.values;return Vv(n)||fg(n,(function(e){t.push(e.join(" "))})),t.join("$")}(r):n?t.dataSet.getFieldFormatter(o)(r,i):"".concat(r)},aE=function(e,t,n,r){var o=[];if(e){var i=e.fieldValue,a=e.valueField,s=e.data;if(Wa(i))return o=function(e,t){var n,r,o,i;return t?null===(i=null==e?void 0:e.values)||void 0===i?void 0:i[0]:null!==(r=null===(n=null==e?void 0:e.originalValues)||void 0===n?void 0:n[0])&&void 0!==r?r:null===(o=null==e?void 0:e.values)||void 0===o?void 0:o[0]}(i,r),o;if(Jv(i)&&n.length>1)return o.push.apply(o,da([],ua(n),!1)),o;if(r){var l=t.dataSet.getFieldFormatter(a);o.push(l(i,s))}else o.push(i)}else o.push.apply(o,da([],ua(n),!1));return o.join("    ")},sE=function(e){var t=jx(e);return Na(t)?t:e},lE=function(e,t,n){var r=sE(t.label),o=Na(r)?r.length:1,i=n.options.placeholder,a=os(i)?i(e):i;return Array(o).fill(a)},cE=function(e){var t,n,r,o,i=null===(r=null===(n=null===(t=e.spreadsheet)||void 0===t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter)||void 0===r?void 0:r.call(n,e.field);return null!==(o=null==i?void 0:i(e.label))&&void 0!==o?o:e.label},uE=function(e){var t=[],n=function(e){if(e.id!==Ei){var r=cE(e);return t.unshift(r),(null==e?void 0:e.parent)?n(e.parent):void 0}};return n(e),t},dE=function(e,t,n){var r,o,i,a,s,l=function(e){var t,n;return"object"==typeof e?{isFormatHeader:null!==(t=e.isFormatHeader)&&void 0!==t&&t,isFormatData:null!==(n=e.isFormatData)&&void 0!==n&&n}:{isFormatHeader:null!=e&&e,isFormatData:null!=e&&e}}(n),c=l.isFormatHeader,u=l.isFormatData,d=null===(s=null==e?void 0:e.facet)||void 0===s?void 0:s.layoutResult,h=d.rowsHierarchy,f=d.rowLeafNodes,p=d.colLeafNodes,g=d.getCellMeta,v=h.maxLevel,m=e.dataCfg.fields.valueInCols,y=h.sampleNodesForAllLevels.map((function(t){return e.dataSet.getFieldName(t.key)})),C=f.reduce((function(e,t){var n,r=(null!==(n=t.level)&&void 0!==n?n:0)+1;return r>e?r:e}),0),b=[],w=0;if(e.isPivotMode()){var x=f.filter((function(e){return 0!==e.height}));try{for(var E=ca(x),S=E.next();!S.done;S=E.next()){var I=S.value,T=[];c?T=uE(I):(I.label=ZC(null==I?void 0:I.label),T=I.id.replace(Ti,"").split(Si));var L=v+1-T.length;L>0&&T.push.apply(T,da([],ua(new Array(L)),!1));var M=e.dataSet.getFieldName(ig(T));T[T.length-1]=M;try{for(var O=(i=void 0,ca(p)),_=O.next();!_.done;_=O.next()){var N=_.value;if(m){var A=g(I.rowIndex,N.colIndex);T.push(iE(A,e,u))}else{A=g(I.rowIndex,N.colIndex);var R=lE(A,N,e),D=aE(A,e,R,u);Na(D)?T=T.concat.apply(T,da([],ua(D),!1)):T.push(D)}}}catch(e){i={error:e}}finally{try{_&&!_.done&&(a=O.return)&&a.call(O)}finally{if(i)throw i.error}}w=vm([T.length,w]);var P=T.map((function(e){return tE(e)})).join(t);b.push(P)}}catch(e){r={error:e}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(r)throw r.error}}}else b=function(e,t,n){var r,o,i,a=e.dataSet.getDisplayDataSet(),s=(null===(i=e.dataCfg)||void 0===i?void 0:i.fields).columns,l=Ww(s||[]),c=[],u=function(r,o){var i=[];i=n?l.map((function(t){return tE(e.dataSet.getFieldFormatter(t)(o[t],o))})):l.map((function(e){return tE(o[e])})),e.options.showSeriesNumber&&(i=[tE(r+1)].concat(i)),c.push(i.join(t))};try{for(var d=ca(a.entries()),h=d.next();!h.done;h=d.next()){var f=ua(h.value,2);u(f[0],f[1])}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return c}(e,t,u);var k=[];if(Vv(p)&&!e.isPivotMode())k=[y];else{var B=0,F=bf(p).map((function(t){for(var n=t,r=[];void 0!==n.level;){var o=sE(n.label);Na(o)?B=vm([B,uC(o)]):o=c&&e.isPivotMode()?cE(n):o,r.push(o),n=n.parent}return r}));B>1&&(F=function(e){return e.map((function(e){return e.map((function(t){return Na(t)?t:Na(e[0])?da([t],ua(new Array(e[0].length-1)),!1):t}))}))}(F));for(var j=vm(F.map((function(e){return e.length}))),z=[],H=function(t){var n=F.map((function(e){return e.length<j?da(da([],ua(new Array(j-e.length)),!1),ua(e),!1):e})).map((function(e){return e[t]})).map((function(t){return e.dataSet.getFieldName(t)}));z.push(Su(n))},W=j-1;W>=0;W-=1)H(W);k=z.map((function(t,n){var r,o;if(e.isPivotMode()){var i=e.facet.cornerHeader.cfg,a=i.columns,s=i.rows,l=i.data.filter((function(e){return e.cornerType===Zw.Col}));if(n<z.length-1)return da(da(da([],ua(Array(v).fill("")),!1),[(null===(o=l.find((function(e){return e.field===a[n]})))||void 0===o?void 0:o.label)||""],!1),ua(t),!1);var c=s.slice(0,C);return c.length<C&&c.unshift.apply(c,da([],ua(Array(C-c.length).fill("")),!1)),da(da([],ua(c.map((function(t){return e.dataSet.getFieldName(t)||""}))),!1),ua(t),!1)}return n<z.length?(r=Array(C).fill("")).concat.apply(r,da([],ua(t),!1)):y.concat.apply(y,da([],ua(t),!1))}))}var G=k.map((function(e){var n=w-e.length;return n>0&&e.unshift.apply(e,da([],ua(new Array(n)),!1)),e.map((function(e){return tE(e)})).join(t)})).join("\r\n");return[G].concat(b).join("\r\n")},hE=function(e){var t,n,r,o,i,a,s=null===(r=null===(n=null===(t=e.target)||void 0===t?void 0:t.attrs)||void 0===n?void 0:n.appendInfo)||void 0===r?void 0:r.cellData,l=null===(i=(o=e.target).get)||void 0===i?void 0:i.call(o,"parent");return{target:l,viewMeta:(null===(a=null==l?void 0:l.getMeta)||void 0===a?void 0:a.call(l))||s,event:e}},fE=function(e,t,n){var r,o=e.split(Si);if(n)r=[e];else{r=[Ow(o[0],o[1])];for(var i=2;i<o.length;i+=1)r.push(Ow(r[i-2],o[i]))}var a=Dg(t,(function(e){var t;return r.includes(null===(t=e.getMeta())||void 0===t?void 0:t.id)}));return a},pE=function(e,t,n){e&&fg(fE(e,t),(function(e){e.updateByState(n)}))},gE=function(e){function t(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=e.call(this,{})||this;return i.textShapes=[],i.actualTextWidth=0,i.conditionIconShapes=[],i.stateShapes=new Map,i.meta=t,i.spreadsheet=n,i.theme=n.theme,i.conditions=i.spreadsheet.options.conditions,i.handleRestOptions.apply(i,da([],ua(r),!1)),i.shouldInit()&&i.initCell(),i}return aa(t,e),t.prototype.getMeta=function(){return this.meta},t.prototype.setMeta=function(e){this.meta=e},t.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},t.prototype.getTextAndIconPosition=function(e){void 0===e&&(e=1);var t=this.getTextStyle(),n=this.getIconStyle();return Ox(this.getContentArea(),t,this.actualTextWidth,n,e)},t.prototype.getActualText=function(){return this.actualText},t.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.shouldInit=function(){var e=this.meta,t=e.width,n=e.height;return t>0&&n>0},t.prototype.getStyle=function(e){return yu(this.theme,e||this.cellType)},t.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},t.prototype.shouldDrawResizeAreaByType=function(e,t){var n=this.spreadsheet.options.interaction.resize;return jv(n)?n:os(n.visible)?n.visible(t):n[e]},t.prototype.getCellArea=function(){var e=this.meta;return{x:e.x,y:e.y,height:e.height,width:e.width}},t.prototype.getContentArea=function(){var e=this.getStyle()||this.theme.dataCell,t=(null==e?void 0:e.cell).padding;return Ix(this.getCellArea(),t)},t.prototype.getIconPosition=function(e){return void 0===e&&(e=1),this.getTextAndIconPosition(e).icon},t.prototype.drawTextShape=function(){var e=this.getFormattedFieldValue().formattedValue,t=this.getMaxTextWidth(),n=this.getTextStyle(),r=this.spreadsheet,o=r.options.placeholder,i=r.measureTextWidth,a=kx(this,o),s=Ax({measureTextWidth:i,text:e,maxWidth:t,fontParam:n,placeholder:a});this.actualText=s,this.actualTextWidth=i(s,n);var l=this.getTextPosition();this.textShape=px(this,[this.textShape],l.x,l.y,s,n),this.textShapes.push(this.textShape)},t.prototype.drawLinkFieldShape=function(e,t){if(e){if(!yw(this.spreadsheet.options.style.device)){var n=this.getTextStyle(),r=this.getTextPosition().x;"center"===n.textAlign?r-=this.actualTextWidth/2:"right"===n.textAlign&&(r-=this.actualTextWidth);var o=this.textShape.getBBox().maxY;this.linkFieldShape=gx(this,{x1:r,y1:o+1,x2:r+this.actualTextWidth,y2:o+1},{stroke:t,lineWidth:1})}this.textShape.attr({fill:t,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},t.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},t.prototype.drawLinkField=function(e){var t=this.spreadsheet.options.interaction.linkFields,n=void 0===t?[]:t,r=this.getLinkFieldStyle(),o=function(e,t){return"function"==typeof e?e(t):e.some((function(e){return e===t.key||e===t.id||e===t.valueField}))}(n,e);this.drawLinkFieldShape(o,r)},t.prototype.updateByState=function(e,t){var n=this;this.spreadsheet.interaction.setInteractedCells(t),fg(yu(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e)),(function(e,t){Bc(jm($i,(function(e){return vv(e,t)}))).forEach((function(r){var o=n.stateShapes.has(r),i=o?n.stateShapes.get(r):n[r],a=Na(i)?i:[i];o&&a.forEach((function(e){e.set("visible",!0)})),"interactiveBorderShape"===r&&"borderWidth"===t&&Kv(e)&&fg(n.getInteractiveBorderShapeStyle(e),(function(e,t){vx(a,t,e)})),vx(a,Yi[t],e)}))}))},t.prototype.getInteractiveBorderShapeStyle=function(e){var t=this.getCellArea(),n=t.x,r=t.y,o=t.height,i=t.width,a=this.theme.dataCell.cell,s=a.horizontalBorderWidth,l=a.verticalBorderWidth;return{x:n+l/2+e/2,y:r+s/2+e/2,width:i-l-e,height:o-s-e}},t.prototype.hideInteractionShape=function(){this.stateShapes.forEach((function(e){vx(e,Yi.backgroundOpacity,0),vx(e,Yi.backgroundColor,"transparent"),vx(e,Yi.borderOpacity,0),vx(e,Yi.borderWidth,1),vx(e,Yi.borderColor,"transparent")}))},t.prototype.clearUnselectedState=function(){vx(this.backgroundShape,Yi.backgroundOpacity,1),vx(this.textShapes,Yi.textOpacity,1),vx(this.linkFieldShape,Yi.opacity,1)},t.prototype.getTextShape=function(){return this.textShape},t.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},t.prototype.addTextShape=function(e){e&&this.textShapes.push(e)},t.prototype.getConditionIconShape=function(){return this.conditionIconShape},t.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},t.prototype.addConditionIconShape=function(e){e&&this.conditionIconShapes.push(e)},t.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(t.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),t.prototype.drawConditionIconShapes=function(){var e,t=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.icon);if(t&&t.mapping){var n=this.mappingValue(t),r=this.getIconPosition(),o=this.theme.dataCell.icon.size;Vv(null==n?void 0:n.icon)||(this.conditionIconShape=mx(this,sa(sa({},r),{name:n.icon,width:o,height:o,fill:n.fill})),this.addConditionIconShape(this.conditionIconShape))}},t.prototype.getTextConditionFill=function(e){var t,n,r=e.fill,o=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.text);return(null==o?void 0:o.mapping)&&(r=(null===(n=this.mappingValue(o))||void 0===n?void 0:n.fill)||e.fill),r},t}(vo),vE=function(e,t){return t?t(e[ri],e[ni]):e[ni]},mE=function(e,t){var n=t.getMeta().id;return e.some((function(e){return Yv(e.id,n)}))},yE=function(e,t){return"".concat(e).concat(Ii).concat(t)},CE=function(e){return e.type===zi.DATA_CELL},bE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),t.prototype.handleByStateName=function(e,t){mE(e,this)&&this.updateByState(t)},t.prototype.handleSearchResult=function(e){mE(e,this)&&(Fg(e,(function(e){return null==e?void 0:e.isTarget})).id===this.getMeta().id?this.updateByState(ji.HIGHLIGHT):this.updateByState(ji.SEARCH_RESULT))},t.prototype.handleSelect=function(e){var t;switch(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.type){case zi.COL_CELL:this.changeRowColSelectState("colIndex");break;case zi.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case zi.DATA_CELL:!function(e){var t=e.interaction.getSelectedCellHighlight(),n=t.currentRow,r=t.currentCol,o=t.rowHeader,i=t.colHeader;return n||r||o||i}(this.spreadsheet)?mE(e,this)?this.updateByState(ji.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(ji.UNSELECTED):function(e,t,n){var r=n.interaction.getSelectedCellHighlight(),o=r.rowHeader,i=r.colHeader,a=r.currentRow,s=r.currentCol,l=t.cellType===zi.ROW_CELL,c=n.isTableMode()&&n.options.showSeriesNumber&&o&&l;(a||c)&&function(e,t){fg(e,(function(e){CE(e)&&e.rowIndex===t.getMeta().rowIndex&&t.updateByState(ji.SELECTED)}))}(e,t),s&&function(e,t){fg(e,(function(e){CE(e)&&e.colIndex===t.getMeta().colIndex&&t.updateByState(ji.SELECTED)}))}(e,t),(o||i)&&function(e,t){fg(e,(function(e){CE(e)&&e.rowIndex===t.getMeta().rowIndex&&e.colIndex===t.getMeta().colIndex&&t.updateByState(ji.SELECTED)}))}(e,t)}(e,this,this.spreadsheet)}},t.prototype.handleHover=function(e){var t=Ug(e);if(t.type===zi.DATA_CELL){var n=this.spreadsheet.interaction.getHoverHighlight(),r=n.currentRow,o=n.currentCol;if(r||o){var i=this.meta.colIndex,a=this.meta.rowIndex;o&&i===(null==t?void 0:t.colIndex)||r&&a===(null==t?void 0:t.rowIndex)?this.updateByState(ji.HOVER):this.hideInteractionShape()}var s=this.getMeta(),l=s.id,c=s.rowIndex,u=s.colIndex;Yv(t.id,l)&&Yv(t.rowIndex,c)&&Yv(t.colIndex,u)&&this.updateByState(ji.HOVER_FOCUS)}else this.hideInteractionShape()},t.prototype.update=function(){var e=this.spreadsheet.interaction.getCurrentStateName(),t=this.spreadsheet.interaction.getCells();if(e!==ji.ALL_SELECTED){if(!Vv(t)&&e)switch(e){case ji.SELECTED:this.handleSelect(t);break;case ji.HOVER_FOCUS:case ji.HOVER:this.handleHover(t);break;case ji.SEARCH_RESULT:this.handleSearchResult(t);break;default:this.handleByStateName(t,e)}}else this.updateByState(ji.SELECTED)},t.prototype.setMeta=function(t){e.prototype.setMeta.call(this,t),this.initCell()},t.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},t.prototype.getDefaultTextFill=function(e){var t=e.fill,n=this.getBackgroundColor(),r=n.backgroundColor,o=n.intelligentReverseTextColor;return nw(r)&&e.fill===Pi&&o&&(t=ki),t},t.prototype.getTextStyle=function(){var e=this.meta.isTotals?this.theme.dataCell.bolderText:this.theme.dataCell.text,t=this.getTextConditionFill(sa(sa({},e),{fill:this.getDefaultTextFill(e)}));return sa(sa({},e),{fill:t})},t.prototype.getIconStyle=function(){var e,t=this.theme.dataCell.icon,n=t.size,r=t.margin,o=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.icon);return o&&o.mapping&&{size:n,margin:r,position:wx(o)}},t.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=function(e){var t,n,r,o,i,a;if(!Vv(e)){var s=e.getCellArea(),l=s.x,c=s.y,u=s.height,d=s.width,h=e.findFieldCondition(null===(t=e.cellConditions)||void 0===t?void 0:t.interval);if(h&&h.mapping){var f=e.mappingValue(h);if(!f)return;var p=f.isCompare?f:e.valueRangeByField,g=ux(p.minValue),v=ux(p.maxValue),m=Jv(null==f?void 0:f.fieldValue)?ux(e.getMeta().fieldValue):ux(null==f?void 0:f.fieldValue);if(m<g||m>v)return;var y=null!==(r=null===(n=e.getStyle().miniChart.interval)||void 0===n?void 0:n.height)&&void 0!==r?r:e.getStyle().cell.miniBarChartHeight,C=null!==(i=null===(o=e.getStyle().miniChart.interval)||void 0===o?void 0:o.fill)&&void 0!==i?i:e.getStyle().cell.miniBarChartFillColor,b=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),e=ux(e),t=ux(t);var n=e>=0,r=t>=0&&e<=0,o=r?0:n?e:t,i=t-e;return function(t){var a=n?0:1;return{zeroScale:r?Jd(Math.abs(0-e)/i,0,1):a,scale:Jd((t-o)/i,-1,1)}}}(g,v),w=b(m);return hx(e,{x:l+d*w.zeroScale,y:c+u/2-y/2,width:d*w.scale,height:y,fill:null!==(a=f.fill)&&void 0!==a?a:C})}}}(this)},t.prototype.shouldHideRowSubtotalData=function(){var e,t=(null!==(e=this.spreadsheet.options.totals)&&void 0!==e?e:{}).row,n=void 0===t?{}:t,r=this.meta.rowIndex,o=this.spreadsheet.facet.layoutResult.rowLeafNodes[r],i=!(null==o?void 0:o.isGrandTotals)&&(null==o?void 0:o.isTotals);return"tree"===this.spreadsheet.options.hierarchyType&&!n.showSubTotals&&i},t.prototype.getFormattedFieldValue=function(){if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:Ii};var e=this.meta,t=e.rowId,n=e.valueField,r=e.fieldValue,o=e.data,i=this.spreadsheet.dataSet.getFieldMeta(t)?t:n;return{value:r,formattedValue:this.spreadsheet.dataSet.getFieldFormatter(i)(r,o,this.meta)}},t.prototype.getMaxTextWidth=function(){var e=this.getContentArea().width;return Lx(e,this.getIconStyle())},t.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},t.prototype.getBackgroundColor=function(){var e,t=this.getStyle().cell,n=t.crossBackgroundColor,r=t.backgroundColorOpacity,o=this.getStyle().cell.backgroundColor;if(n&&this.meta.rowIndex%2==0&&(o=n),this.shouldHideRowSubtotalData())return{backgroundColor:o,backgroundColorOpacity:r};var i=this.findFieldCondition(null===(e=this.conditions)||void 0===e?void 0:e.background),a=!1;if(i&&i.mapping){var s=this.mappingValue(i);s&&(o=s.fill,a=s.intelligentReverseTextColor)}return{backgroundColor:o,backgroundColorOpacity:r,intelligentReverseTextColor:a}},t.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),t=e.backgroundColor,n=e.backgroundColorOpacity;this.backgroundShape=hx(this,sa(sa({},this.getCellArea()),{fill:t,fillOpacity:n}))},t.prototype.drawInteractiveBorderShape=function(){var e=this.getCellArea(),t=e.x,n=e.y,r=e.height,o=e.width;this.stateShapes.set("interactiveBorderShape",hx(this,{x:t+1,y:n+1,width:o-2,height:r-2},{capture:!1,visible:!1}))},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",hx(this,sa({},this.getCellArea()),{visible:!1}))},t.prototype.changeRowColSelectState=function(e){var t=this.spreadsheet.interaction,n=yu(this.meta,e),r=t.getState(),o=r.nodes,i=void 0===o?[]:o,a=r.cells,s=void 0===a?[]:a;(this.spreadsheet.isTableMode()&&i.length?i[0].hierarchy.getLeaves().some((function(e,t){return!!i.some((function(t){return t===e}))&&t===n})):da(da([],ua(i),!1),ua(s),!1).some((function(t){return yu(t,e)===n})))?this.updateByState(ji.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(ji.UNSELECTED):this.hideInteractionShape()},t.prototype.drawBorderShape=function(){var e=this;[qw.BOTTOM,qw.RIGHT].forEach((function(t){var n=_x(t,e.getCellArea(),e.getStyle().cell),r=n.position,o=n.style;gx(e,r,o)}))},t.prototype.findFieldCondition=function(e){var t=this;return Gg(e,(function(e){return e.field instanceof RegExp?e.field.test(t.meta.valueField):e.field===t.meta.valueField}))},t.prototype.mappingValue=function(e){var t=this.meta.fieldValue,n=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return null==e?void 0:e.mapping(t,n)},t.prototype.updateByState=function(t){if(e.prototype.updateByState.call(this,t,this),t===ji.UNSELECTED){var n=yu(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},t.prototype.clearUnselectedState=function(){e.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},t.prototype.toggleConditionIntervalShapeOpacity=function(e){vx(this.conditionIntervalShape,Yi.backgroundOpacity,e),vx(this.conditionIconShapes,Yi.opacity,e)},t.prototype.drawLeftBorder=function(){var e=_x(qw.LEFT,this.getCellArea(),this.getStyle().cell);gx(this,e.position,e.style)},t}(gE),wE=function(e){function t(t,n,r){return e.call(this,r,t,n)||this}return aa(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ua(e,1)[0];this.cells=n},Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.MERGED_CELL},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},t.prototype.drawBackgroundShape=function(){var e=EE(this.cells),t=this.theme.dataCell.cell;this.backgroundShape=function(e,t){var n;return null===(n=null==e?void 0:e.addShape)||void 0===n?void 0:n.call(e,"polygon",{attrs:t})}(this,{points:e,stroke:t.horizontalBorderColor,fill:t.backgroundColor,lineHeight:t.horizontalBorderWidth})},t.prototype.drawTextShape=function(){Vv(this.meta)||(Wa(this.meta.fieldValue)?Bx(this):e.prototype.drawTextShape.call(this))},t}(bE),xE=function(e,t){return Fg(t,(function(t){return Yv(t[0],e[1])}))},EE=function(e){var t,n,r=[];e.forEach((function(e){var t=e.getMeta(),n=t.x,o=t.y,i=t.width,a=t.height;r=r.concat(function(e,t,n,r){var o=[e,t],i=[e+n,t],a=[e+n,t+r],s=[e,t+r];return[[o,i],[i,a],[a,s],[s,o]]}(n,o,i,a))})),n=[],fg(t=r,(function(e){var r=[e[1],e[0]];JSON.stringify(t).includes(JSON.stringify(r))||n.push(e)}));for(var o=[],i=(r=n)[0],a=i,s=[];!Yv(i,s);)o=o.concat(a),a=s=xE(a,r);return o},SE=function(e,t,n){var r;void 0===n&&(n=[]);var o=function(e,t){var n,r=[],o=[];return fg(e,(function(e){var i=Fg(t,(function(t){var n,r=null===(n=null==t?void 0:t.getMeta)||void 0===n?void 0:n.call(t);if((null==r?void 0:r.colIndex)===(null==e?void 0:e.colIndex)&&(null==r?void 0:r.rowIndex)===(null==e?void 0:e.rowIndex))return t}));i?(r.push(i),n=(null==e?void 0:e.showText)?null==i?void 0:i.getMeta():n):o.push(e)})),{cells:r,invisibleCellInfo:o,cellsMeta:n}}(n,e),i=o.cellsMeta,a=o.cells,s=o.invisibleCellInfo,l=i,c=a;if((null==s?void 0:s.length)>0&&s.length<n.length){var u=function(e,t){var n,r=[];return fg(e,(function(e){var o,i,a,s=null===(i=null===(o=null==t?void 0:t.facet)||void 0===o?void 0:o.layoutResult)||void 0===i?void 0:i.getCellMeta(e.rowIndex,e.colIndex);if(s){var l=null===(a=null==t?void 0:t.facet)||void 0===a?void 0:a.cfg.dataCell(s);n=(null==e?void 0:e.showText)?s:n,r.push(l)}})),{cells:r,cellsMeta:n}}(s,t),d=u.cells,h=u.cellsMeta;l=l||h,c=a.concat(d)}return Vv(a)||l||(l=null===(r=c[0])||void 0===r?void 0:r.getMeta()),{cells:c,viewMeta:l}},IE=function(e,t,n){return e.options.mergedCell?e.options.mergedCell(e,t,n):new wE(e,t,n)},TE=function(e,t){return cg(e,t,(function(e,t){return Yv(e.viewMeta.id,t.viewMeta.id)}))},LE=function(e){return e.includes(Si)?"id":"field"},ME=function(e,t){void 0===t&&(t=[]);var n=e.getInitColumnLeafNodes();return xf(t.map((function(e){var t=LE(e);return n.find((function(n){return n[t]===e}))})))},OE=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=function(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),e.setOptions({interaction:{hiddenColumnFields:t}}),e.interaction.reset(),e.store.set("hiddenColumnsDetail",n),e.render(!1,{reBuildHiddenColumnsDetail:!1})};if(Vv(t)&&n)r();else{var o=e.store.get("hiddenColumnsDetail",[]),i=e.options.interaction.hiddenColumnFields;if(!Yv(t,i)||n){var a=ub(da(da([],ua(t),!1),ua(i),!1)),s=ME(e,a).every((function(e,t,n){var r=n[t+1];return!r||1===Math.abs(e.colIndex-r.colIndex)})),l=function(e,t){if(void 0===t&&(t=[]),Vv(t))return{prev:null,next:null};var n=e.getInitColumnLeafNodes(),r=ME(e,t).map((function(e){return null==e?void 0:e.colIndex})),o=Math.max.apply(Math,da([],ua(r),!1)),i=Math.min.apply(Math,da([],ua(r),!1)),a=n.find((function(e){return e.colIndex===o+1}));return{prev:n.find((function(e){return e.colIndex===i-1}))||null,next:a||null}}(e,s?a:t),c={hideColumnNodes:ME(e,t),displaySiblingNode:l},u=da(da([],ua(o),!1),[c],!1);e.emit(Jo.LAYOUT_COLS_HIDDEN,c,u),r(a,u)}}},_E=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1),Vv(t)&&n&&OE(e,t,!0);var r=function(e){var t=e.dataCfg.fields.columns,n=void 0===t?[]:t;return e.isTableMode()?n:e.getInitColumnLeafNodes().map((function(e){return e.id}))}(e),o=function(e,t){if(Vv(t))return[];var n=Number.NEGATIVE_INFINITY;return e.reduce((function(e,r,o){if(!t.includes(r))return e;if(o===n+1)ig(e).push(r);else{var i=[r];e.push(i)}return n=o,e}),[])}(Ww(r),t);o.forEach((function(t){OE(e,t,n)}))},NE=function(e,t){return function(e){var t=function(e){return(null==e?void 0:e.next)||(null==e?void 0:e.prev)}(e);return null==t?void 0:t.id}(e)===t},AE=function(e){var t=e.type,n=e.id,r=e.theme,o=e.width,i=e.height,a=la(e,["type","id","theme","width","height"]),s=t===Qi.Horizontal?r.size:null,l=t===Qi.Vertical?r.size:null;return{fill:r.background,fillOpacity:r.backgroundOpacity,cursor:"".concat(t,"-resize"),width:s,height:l,appendInfo:sa(sa({},a),{isResizeArea:!0,type:t,id:n,width:o,height:i,size:r.size})}},RE=function(e,t){if(e.foregroundGroup)return e.foregroundGroup.findById(t)||e.foregroundGroup.addGroup({id:t,zIndex:5})},DE=function(e,t,n){var r=null!=n?n:{},o=r.scrollX,i=void 0===o?0:o,a=r.scrollY,s=void 0===a?0:a,l=!(e.x-i>t.x+t.width||e.x+e.width-i<t.x),c=!(e.y-s>t.y+t.height||e.y+e.height-s<t.y);return l&&c},PE=function(e,t,n){var r=Fg(e,(function(e){return function(e,t,n){if(!e)return!1;var r=e.iconNames,o=e.displayCondition,i=e.belongsCell;return!Vv(r)&&i===n&&(!o||r.some((function(e){return o(t,e)})))}(e,t,n)}));if(r){var o=r.iconNames;return r.displayCondition&&(o=o.filter((function(e){return r.displayCondition(t,e)}))),sa(sa({},r),{iconNames:o})}},kE=function(e,t){var n=e.label;return Yv(e.field,ri)?{formattedValue:t||n,value:n}:{formattedValue:n,value:n}};function BE(e,t){return t.map((function(t){var n=e[t];return void 0===n?n:"".concat(n)}))}function FE(e){return e.map((function(e){var t=null==e?void 0:e.split(Si);return t[(null==t?void 0:t.length)-1]||e}))}function jE(e){var t=e.rowDimensionValues,n=e.colDimensionValues,r=e.careUndefined,o=e.isFirstCreate,i=e.onFirstCreate,a=e.rowFields,s=e.colFields,l=e.rowPivotMeta,c=e.colPivotMeta,u=function(e,t,n,l){void 0===t&&(t=!0);for(var c=t?n:l,u=t?a:s,d=[],h=0;h<e.length;h++){var f=e[h];if(!c.has(f))if(o)c.set(f,{level:c.size,children:new Map}),null==i||i({isRow:t,dimension:null==u?void 0:u[h],dimensionPath:e.slice(0,h+1)});else{var p=c.get(f);if(p&&d.push(p.level),!r)break}var g=c.get(f);nm(f)&&r?d.push(f):d.push(null==g?void 0:g.level),g&&(o&&(g.childField=null==u?void 0:u[h+1]),c=null==g?void 0:g.children)}return d},d=u(t,!0,l,c),h=u(n,!1,l,c);return d.concat.apply(d,da([],ua(h),!1))}function zE(e,t){return Ky(e,(function(e,n){return e.push(t[n]),e}),[])}function HE(e){var t=e.rows,n=e.columns,r=e.originData,o=void 0===r?[]:r,i=e.indexesData,a=void 0===i?[]:i,s=e.totalData,l=void 0===s?[]:s,c=e.sortedDimensionValues,u=e.rowPivotMeta,d=e.colPivotMeta,h=[],f=new Set(xv(t,n)),p=function(e){var t=e.isRow,n=e.dimension,r=e.dimensionPath;!t&&f.has(n)||(c[n]||(c[n]=[])).push(r.map((function(e){return"".concat(e)})).join(Si))};return o.concat(l).forEach((function(e){var r=jE({rowDimensionValues:BE(e,t),colDimensionValues:BE(e,n),rowPivotMeta:u,colPivotMeta:d,isFirstCreate:!0,onFirstCreate:p,careUndefined:(null==l?void 0:l.length)>0,rowFields:t,colFields:n});h.push(r),sC(a,r,e)})),{paths:h,indexesData:a,rowPivotMeta:u,colPivotMeta:d,sortedDimensionValues:c}}function WE(e,t){if(e&&t){var n=t.split(Si),r=ig(n),o=e;fg(n,(function(e,t){var n=o.get(e);return n?(e===r?(n.children=new Map,n.childField=void 0):o=n.children,!0):0===t&&e===Ei}))}}function GE(e,t,n){var r={field:ri,name:t||n,formatter:function(t){return function(t){var n=Fg(e,(function(e){return e.field===t}));return yu(n,"name",t)}(t)}};return r}var UE=function(e){return"ASC"===XC(e)},VE=function(e){return"DESC"===XC(e)},YE=function(e){return!Zv(Number(e))},$E=function(e,t,n){var r=UE(t)?1:-1,o=["-",void 0];return null==e?void 0:e.sort((function(e,t){var i=e,a=t;if(n){if(i=e[n],a=t[n],YE(i)&&YE(a))return(Number(i)-Number(a))*r;if(i&&(null==o?void 0:o.includes(null==i?void 0:i.toString())))return-r;if(Number(i)&&(null==o?void 0:o.includes(null==a?void 0:a.toString())))return r}return Jv(i)||Jv(a)?i?r:-r:i.toString().localeCompare(a.toString(),"zh")*r}))},XE=function(e,t,n){return n?function(e,t){var n;return null===(n=null==e?void 0:e.filter((function(e){return!(null==t?void 0:t.includes(e))})))||void 0===n?void 0:n.concat(t)}(t,ub(e)):da([],ua(new Set(da(da([],ua(e),!1),ua(t),!1))),!1)},qE=function(e){var t=e.sortByValues,n=e.originValues,r=n.filter((function(e){return t.find((function(t){return Cg(e,t)}))})).map((function(e){var t=e.split(Si);return t.length>1?[t.slice(0,t.length-1).join(Si),t[t.length-1]]:t})),o=Array.from(new Set(r.map((function(e){return e[0]}))));r.sort((function(e,n){var r=e.slice(0,e.length-1),i=n.slice(0,n.length-1);return r.join()!==i.join()?o.indexOf(r[0])-o.indexOf(i[0]):t.indexOf(e[e.length-1])-t.indexOf(n[n.length-1])}));var i=r.map((function(e){return e.join(Si)}));return rx(n,i)},KE=function(e){var t=e.sortParam,n=e.originValues,r=e.measureValues,o=e.dataSet,i=t.sortFunc,a=t.sortMethod,s=t.sortBy,l=n,c={originValues:n,measureValues:r,sortParam:t,dataSet:o};return i?l=function(e){var t=e.originValues,n=e.measureValues,r=e.sortParam,o=e.dataSet,i=r.sortFunc,a=r.sortFieldId,s=r.sortMethod,l=i(sa({data:n},r));return(null==l?void 0:l.length)?(o.fields.rows.indexOf(a)>0||o.fields.columns.indexOf(a)>0)&&!vv(l[0],Si)?qE({sortByValues:l,originValues:t}):XE(l,t,UE(s)):t}(c):s?l=qE({sortByValues:s,originValues:n}):(UE(a)||VE(a))&&(l=function(e){var t,n=e.sortParam,r=e.measureValues,o=e.originValues,i=e.dataSet,a=n.sortByMeasure,s=n.query,l=n.sortFieldId,c=n.sortMethod,u=i.fields,d=u.rows,h=u.columns,f=d.includes(l);if(a){var p=$E(r,c,a===ii?s[ri]:a);t=function(e,t,n){var r,o=t.slice(0,t.indexOf(e)+1);return null===(r=n.map((function(e){return o.map((function(t){return e[t]})).join("".concat(Si))})))||void 0===r?void 0:r.filter((function(e){return e}))}(l,f?d:Ww(h),p)}else t=Yg($E(r,c));return XE(t,o,UE(c))}(c)),l},ZE=function(e){return e.filter((function(e){return e!==ri}))},QE=function(e,t){if(null==e?void 0:e.sortMethod){if(UE(null==e?void 0:e.sortMethod))return"groupAsc";if(VE(null==e?void 0:e.sortMethod))return"groupDesc"}if(t)return"SortDown"},JE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ua(e,1)[0];this.headerConfig=sa({},n);var r=this.meta,o=r.value,i=r.query,a=this.spreadsheet.dataCfg.sortParams,s=this.isSortCell(),l=Fg(da([],ua(a),!1).reverse(),(function(e){return s&&(null==e?void 0:e.sortByMeasure)===o&&Yv(yu(e,"query"),i)})),c=QE(l,s);this.headerConfig.sortParam=sa(sa(sa({},this.headerConfig.sortParam),l||{query:i}),{type:c})},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},t.prototype.getInteractiveBorderShapeStyle=function(e){var t=this.getCellArea(),n=t.x,r=t.y,o=t.height;return{x:n+e,y:r+e,width:t.width-2*e,height:o-2*e}},t.prototype.getFormattedFieldValue=function(){var e=this.meta,t=e.label,n=e.isTotals,r=e.isGrandTotals,o=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return{formattedValue:this.spreadsheet.isTableMode()||(this.spreadsheet.isHierarchyTreeType()?r:n)||!o?t:o(t,void 0,this.meta),value:t}},t.prototype.getActionIconCfg=function(){return PE(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},t.prototype.showSortIcon=function(){var e=this.spreadsheet,t=e.options,n=Vv(e.dataCfg.fields.values);if(t.showDefaultHeaderActionIcon&&!n){var r=this.headerConfig.sortParam,o=this.meta.query;return o&&Yv(null==r?void 0:r.query,o)&&(null==r?void 0:r.type)&&"none"!==(null==r?void 0:r.type)}return!1},t.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var e=this.getActionIconCfg();return e?e.iconNames.length:0},t.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon;return(e.size+e.margin.left)*this.getActionIconsCount()},t.prototype.drawSortIcons=function(){var e=this;if(this.showSortIcon()){var t=this.getStyle(),n=t.icon,r=t.text,o=this.getTextConditionFill(r),i=this.headerConfig.sortParam,a=this.getIconPosition(),s=new tx(sa(sa({name:yu(i,"type","none")},a),{width:n.size,height:n.size,fill:o}));s.on("click",(function(t){e.spreadsheet.emit(Jo.GLOBAL_ACTION_ICON_CLICK,t),e.spreadsheet.handleGroupSort(t,e.meta)})),this.add(s),this.actionIcons.push(s)}},t.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},t.prototype.addActionIcon=function(e){var t=this,n=e.x,r=e.y,o=e.iconName,i=e.defaultHide,a=e.action,s=e.onClick,l=e.onHover,c=this.getStyle(),u=c.icon,d=c.text,h=this.getTextConditionFill(d),f=(null==u?void 0:u.fill)||h,p=new tx({name:o,x:n,y:r,width:null==u?void 0:u.size,height:null==u?void 0:u.size,fill:f});p.set("visible",!i),p.on("mouseover",(function(e){t.spreadsheet.emit(Jo.GLOBAL_ACTION_ICON_HOVER,e),null==l||l({hovering:!0,iconName:o,meta:t.meta,event:e})})),p.on("mouseleave",(function(e){t.spreadsheet.emit(Jo.GLOBAL_ACTION_ICON_HOVER_OFF,e),null==l||l({hovering:!1,iconName:o,meta:t.meta,event:e})})),p.on("click",(function(e){var n;t.spreadsheet.emit(Jo.GLOBAL_ACTION_ICON_CLICK,e),null===(n=s||a)||void 0===n||n({iconName:o,meta:t.meta,event:e})})),this.actionIcons.push(p),this.add(p)},t.prototype.drawActionIcons=function(){var e=this;if(this.showSortIcon())this.drawSortIcons();else{var t=this.getActionIconCfg();if(t){var n=t.iconNames,r=t.action,o=t.onClick,i=t.onHover,a=t.defaultHide,s=this.getIconPosition(n.length),l=this.getStyle().icon,c=l.size,u=l.margin;fg(n,(function(t,n){var l=s.x+n*c+n*u.left,d=s.y,h="function"==typeof a?a(e.meta,t):a;h&&(e.hasDefaultHiddenIcon=!0),e.addActionIcon({iconName:t,x:l,y:d,defaultHide:h,action:r,onClick:o,onHover:i})}))}}},t.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),t=e.backgroundColor,n=e.backgroundColorOpacity;this.backgroundShape=hx(this,sa(sa({},this.getCellArea()),{fill:t,fillOpacity:n}))},t.prototype.isSortCell=function(){var e,t,n,r=null===(t=null===(e=this.meta.spreadsheet)||void 0===e?void 0:e.isValueInCols)||void 0===t?void 0:t.call(e),o=this.meta.level===(null===(n=this.meta.hierarchy)||void 0===n?void 0:n.maxLevel);return r?o&&this.cellType===zi.COL_CELL:o&&this.cellType===zi.ROW_CELL},t.prototype.handleByStateName=function(e,t){mE(e,this)&&this.updateByState(t)},t.prototype.handleSearchResult=function(e){mE(e,this)&&(Fg(e,(function(e){return null==e?void 0:e.isTarget})).id===this.getMeta().id?this.updateByState(ji.HIGHLIGHT):this.updateByState(ji.SEARCH_RESULT))},t.prototype.handleHover=function(e){var t;mE(e,this)&&(this.updateByState(ji.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.id))},t.prototype.handleSelect=function(e,t){mE(e,this)&&this.updateByState(ji.SELECTED),vv(Yg(t,"id"),this.meta.id)&&this.updateByState(ji.SELECTED)},t.prototype.getTextStyle=function(){var e,t=this.getStyle(),n=t.text,r=t.bolderText,o=t.measureText;e=this.isMeasureField()?o||n:this.isBolderText()?r:n;var i=this.getTextConditionFill(e);return sa(sa({},e),{fill:i})},t.prototype.getBackgroundColor=function(){var e,t,n=(null===(e=this.getStyle())||void 0===e?void 0:e.cell)||{},r=n.backgroundColor,o=n.backgroundColorOpacity,i=r,a=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background);if(a&&a.mapping){var s=this.mappingValue(a);s&&(i=s.fill)}return{backgroundColor:i,backgroundColorOpacity:o}},t.prototype.toggleActionIcon=function(e){if(this.getMeta().id===e){var t=[];fg(this.actionIcons,(function(e){e.get("visible")||(e.set("visible",!0),t.push(e))})),this.spreadsheet.store.set("visibleActionIcons",t)}},t.prototype.update=function(){var e=this.spreadsheet.interaction,t=null==e?void 0:e.getState(),n=null==e?void 0:e.getCells([zi.COL_CELL,zi.ROW_CELL]);if(Ug(n))switch(null==t?void 0:t.stateName){case ji.SELECTED:this.handleSelect(n,null==t?void 0:t.nodes);break;case ji.HOVER_FOCUS:case ji.HOVER:this.handleHover(n);break;case ji.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,null==t?void 0:t.stateName)}},t.prototype.updateByState=function(t){e.prototype.updateByState.call(this,t,this)},t.prototype.hideInteractionShape=function(){e.prototype.hideInteractionShape.call(this)},t.prototype.isMeasureField=function(){return[ri,oi].includes(this.meta.field)},t.prototype.mappingValue=function(e){var t=this.getMeta().label;return null==e?void 0:e.mapping(t,this.meta)},t.prototype.findFieldCondition=function(e){var t=this;return Gg(e,(function(e){return e.field instanceof RegExp?e.field.test(t.meta.field):e.field===t.meta.field}))},t}(gE),eS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.COL_CELL},enumerable:!1,configurable:!0}),t.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",hx(this,sa({},this.getCellArea()),{visible:!1}))},t.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",hx(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getActionIconsWidth()},t.prototype.getIconPosition=function(){if(this.meta.isLeaf)return e.prototype.getIconPosition.call(this,this.getActionIconsCount());var t=this.getIconStyle(),n=t.margin.left,r=this.getTextStyle(),o=this.textPosition,i=o.x,a=o.y-t.size/2;return"left"===r.textAlign?{x:i+this.actualTextWidth+n,y:a}:"right"===r.textAlign?{x:i+n,y:a}:{x:i+this.actualTextWidth/2+n,y:a}},t.prototype.isBolderText=function(){var e=this.meta,t=e.isLeaf;return!(!e.isTotals&&t)},t.prototype.getTextPosition=function(){var e,t=this.meta.isLeaf,n=this.headerConfig,r=n.width,o=n.scrollContainsRowHeader,i=n.cornerWidth,a=n.scrollX,s=this.getTextStyle(),l=this.getContentArea(),c=this.getIconStyle();if(t)return Ox(l,s,this.actualTextWidth,c,this.getActionIconsCount()).text;var u={start:a-(o?i:0),width:r+(o?i:0)},d=this.getTextStyle().textAlign,h=function(e,t,n){void 0===n&&(n={left:0,right:0});var r=sa({},e);return"left"===t?(r.start+=n.left,r.width-=n.left):"right"===t&&(r.width-=n.right),r}(u,d,null===(e=this.getStyle().cell)||void 0===e?void 0:e.padding),f=this.getActionIconsWidth(),p=this.actualTextWidth+f,g=function(e,t,n){var r,o,i=t.start+t.width,a=e.start+e.width;if(t.start<=e.start&&i>=a)r=e.start+e.width/2,o=e.width;else if(t.start<=e.start)r=(s=t.width-(e.start-t.start))<n?i-n/2:i-s/2,o=s;else if(i>=a){var s;r=(s=t.width-(i-a))<n?t.start+n/2:t.start+s/2,o=s}else r=t.start+t.width/2,o=t.width;return{start:r,width:o}}(h,{start:l.x,width:l.width},p),v=function(e,t,n,r){var o=t+n,i=e.start;if("center"===r)return i-n/2;var a=e.width-o>0?e.width/2:o/2;return"left"===r?i-a:i+a-n}(g,this.actualTextWidth,f,d),m=l.y+l.height/2;return this.textPosition={x:v,y:m},this.textPosition},t.prototype.getActionIconsWidth=function(){var e=this.getStyle().icon,t=e.size,n=e.margin,r=this.getActionIconsCount();return(t+n.left)*r+(r>0?n.right:0)},t.prototype.getColResizeAreaKey=function(){return this.meta.key},t.prototype.getColResizeArea=function(){return RE(this.spreadsheet,Ci)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(xi).concat(this.meta.key)},t.prototype.drawHorizontalResizeArea=function(){var e,t;if(0!==(null===(t=null===(e=this.spreadsheet.options.style)||void 0===e?void 0:e.colCfg)||void 0===t?void 0:t.height)&&this.shouldDrawResizeAreaByType("colCellVertical",this)){var n=this.headerConfig,r=n.cornerWidth,o=n.viewportWidth,i=this.meta,a=i.y,s=i.height,l=this.getResizeAreaStyle(),c=this.getColResizeArea(),u=this.getHorizontalResizeAreaName();if(!c.find((function(e){return e.attrs.name===u}))){var d=r+o;c.addShape("rect",{attrs:sa(sa({},AE({theme:l,type:Qi.Vertical,id:this.getColResizeAreaKey(),effect:Ji.Field,offsetX:0,offsetY:a,width:d,height:s,meta:this.meta})),{name:u,x:0,y:a+s-l.size/2,width:d})})}}},t.prototype.shouldAddVerticalResizeArea=function(){var e=this.meta,t=e.x,n=e.y,r=e.width,o=e.height,i=this.headerConfig,a=i.scrollX,s=i.scrollY,l=i.scrollContainsRowHeader,c=i.cornerWidth,u=i.height,d=i.width,h=this.getResizeAreaStyle(),f={x:t+r-h.size/2,y:n,width:h.size,height:o};return DE(f,{x:l?-c:0,y:0,width:l?c+d:d,height:u},{scrollX:a,scrollY:s})},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,t=e.x,n=e.y,r=this.headerConfig,o=r.scrollX,i=r.position;return{x:i.x+t-o,y:i.y+n}},t.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("colCellHorizontal",this)){var e=this.meta,t=e.label,n=e.width,r=e.height,o=this.getResizeAreaStyle(),i=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var a=this.getVerticalResizeAreaOffset(),s=a.x,l=a.y;i.addShape("rect",{attrs:sa(sa({},AE({theme:o,type:Qi.Horizontal,effect:Ji.Cell,id:t,offsetX:s,offsetY:l,width:n,height:r,meta:this.meta})),{x:s+n-o.size/2,y:l,height:r})})}}},t.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},t.prototype.drawHorizontalBorder=function(){var e=_x(qw.TOP,this.meta,this.theme.colCell.cell);gx(this,e.position,e.style)},t.prototype.drawVerticalBorder=function(e){var t=_x(e,this.meta,this.theme.colCell.cell);gx(this,t.position,t.style)},t.prototype.drawBorders=function(){var e=this.spreadsheet,t=e.options,n=e.isTableMode;0===this.meta.colIndex&&n()&&!t.showSeriesNumber&&this.drawVerticalBorder(qw.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(qw.RIGHT)},t.prototype.hasHiddenColumnCell=function(){var e=this,t=this.spreadsheet.options,n=t.interaction.hiddenColumnFields,r=void 0===n?[]:n,o=t.tooltip.operation,i=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return!(Vv(i)||Vv(r)||!o.hiddenColumns||!i.find((function(t){return NE(null==t?void 0:t.displaySiblingNode,e.meta.id)})))},t.prototype.getExpandIconTheme=function(){return this.getStyle().icon},t.prototype.addExpandColumnSplitLine=function(){var e=this.meta,t=e.x,n=e.y,r=e.width,o=e.height,i=this.theme.splitLine,a=i.horizontalBorderColor,s=i.horizontalBorderWidth,l=i.horizontalBorderColorOpacity,c=this.isLastColumn()?t+r-s:t;gx(this,{x1:c,y1:n,x2:c,y2:n+o},{stroke:a,lineWidth:s,strokeOpacity:l})},t.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},t.prototype.addExpandColumnIcons=function(){var e=this.isLastColumn();this.addExpandColumnIcon(e),this.isAllDisplaySiblingNodeHidden()&&e&&this.addExpandColumnIcon(!1)},t.prototype.addExpandColumnIcon=function(e){var t=this,n=this.getExpandColumnIconConfig(e);mx(this,sa(sa({},n),{name:"ExpandColIcon",cursor:"pointer"})).on("click",(function(){t.spreadsheet.emit(Jo.LAYOUT_COLS_EXPANDED,t.meta)}))},t.prototype.getExpandColumnIconConfig=function(e){var t=this.getExpandIconTheme().size,n=this.getCellArea(),r=n.x,o=n.y,i=n.width,a=r-t;return{x:e?a+i:a,y:o+n.height/2-t/2,width:2*t,height:t}},t.prototype.isLastColumn=function(){return e=this.spreadsheet,t=this.meta.id,n=e.getColumnLeafNodes(),r=e.getInitColumnLeafNodes(),o=LE(t),yu(ig(n),o)===t&&yu(ig(r),o)!==t;var e,t,n,r,o},t.prototype.isAllDisplaySiblingNodeHidden=function(){var e=this.meta.id,t=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=t.find((function(t){var n,r=t.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.id)===e})),r=t.find((function(t){var n,r=t.displaySiblingNode;return(null===(n=null==r?void 0:r.prev)||void 0===n?void 0:n.id)===e}));return r&&n},t}(JE),tS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.isBolderText=function(){return this.meta.cornerType===Zw.Col},Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.CORNER_CELL},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.initCell=function(){e.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea()},t.prototype.drawCellText=function(){this.drawTextShape()},t.prototype.drawTextShape=function(){var e=this.getContentArea().x,t=this.getCellArea(),n=t.y,r=t.height,o=this.getTextStyle(),i=this.getCornerText(),a=this.getMaxTextWidth(),s=kx(this.meta,this.spreadsheet.options.placeholder),l=this.spreadsheet.measureTextWidth,c=Ax({measureTextWidth:l,text:i,maxWidth:a,fontParam:o,placeholder:s});this.actualText=c;var u=c.indexOf(Ni),d=c,h="";if(-1!==u&&this.spreadsheet.isHierarchyTreeType()){var f=u+(/iPhone/gi.test(navigator.userAgent)&&812===window.screen.height&&375===window.screen.width?1:0);d=i.substr(0,f),h=i.slice(f),h=Ax({measureTextWidth:l,text:h,maxWidth:a,fontParam:o})}var p,g,v=(p={x:e+this.getTreeIconWidth(),y:n,width:a,height:r},g=o,Ox(p,g).text).x,m=n+(Vv(h)?r/2:r/4);this.addTextShape(px(this,[this.textShapes[0]],v,m,d,o)),Vv(h)||this.addTextShape(px(this,[this.textShapes[1]],v,n+.75*r,h,o)),this.actualTextWidth=vm([l(d,o),l(h,o)])},t.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()&&this.meta.cornerType!==Zw.Col){var t=this.headerConfig.hierarchyCollapse,n=this.getStyle().icon.size,r=this.getTextStyle(),o=r.textBaseline,i=r.fill,a=this.getContentArea();this.treeIcon=yx(this,{x:a.x,y:Mx(a,o,n),width:n,height:n},i,t,(function(){e.headerConfig.spreadsheet.store.set("scrollY",0),e.headerConfig.spreadsheet.emit(Jo.LAYOUT_TREE_ROWS_COLLAPSE_ALL,t)}))}},t.prototype.drawBorderShape=function(){var e=this;[qw.TOP,qw.LEFT].forEach((function(t){var n=_x(t,e.getCellArea(),e.getStyle().cell),r=n.position,o=n.style;gx(e,r,o)}))},t.prototype.isLastRowCornerCell=function(){var e=this.meta,t=e.cornerType,n=e.field,r=this.headerConfig.rows;return t===Zw.Row&&(this.spreadsheet.isHierarchyTreeType()||ig(r)===n)},t.prototype.getResizeAreaEffect=function(){return this.meta.cornerType===Zw.Series?Ji.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?Ji.Tree:Ji.Field},t.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var e=this.getResizeAreaStyle(),t=RE(this.spreadsheet,yi),n=this.headerConfig,r=n.position,o=n.scrollX,i=n.scrollY,a=n.width,s=n.height,l=this.meta,c=l.x,u=l.y,d=l.width,h=l.height,f=l.field,p=l.cornerType,g={x:c+d-e.size/2,y:u,width:e.size,height:h},v={x:0,y:0,width:a,height:s};if(p!==Zw.Col&&DE(g,v,{scrollX:o,scrollY:i})){var m=r.x+c-o,y=r.y+(this.isLastRowCornerCell()?0:u);t.addShape("rect",{attrs:sa(sa({},AE({theme:e,id:f,type:Qi.Horizontal,effect:this.getResizeAreaEffect(),offsetX:m,offsetY:y,width:d,height:h,meta:this.meta})),{x:m+d-e.size/2,y,height:this.isLastRowCornerCell()?s:h})})}}},t.prototype.showTreeIcon=function(){var e;return this.spreadsheet.isHierarchyTreeType()&&0===(null===(e=this.meta)||void 0===e?void 0:e.x)},t.prototype.getIconPosition=function(){var e,t,n=null===(t=null===(e=this.textShapes)||void 0===e?void 0:e[0])||void 0===t?void 0:t.cfg.attrs,r=this.getTextStyle(),o=r.textBaseline,i=r.textAlign,a=this.getStyle().icon,s=a.size,l=a.margin;return{x:(null==n?void 0:n.x)+mp([[pm("center"),Js(this.actualTextWidth/2)],[pm("right"),Js(0)],[SC,Js(this.actualTextWidth)]])(i)+l.left,y:Mx(this.getContentArea(),o,s)}},t.prototype.getTreeIconWidth=function(){var e=this.getStyle().icon,t=e.size,n=e.margin;return this.showTreeIcon()?t+n.right:0},t.prototype.getTextStyle=function(){var e=this.getStyle(),t=e.text,n=e.bolderText,r=this.isBolderText()?t:n,o=this.getTextConditionFill(r);return sa(sa({},r),{fill:o})},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTreeIconWidth()-this.getActionIconsWidth()},t.prototype.getTextPosition=function(){return{x:0,y:0}},t.prototype.getFormattedFieldValue=function(){return kE(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},t.prototype.getCornerText=function(){return this.getFormattedFieldValue().formattedValue},t}(JE),nS=function(){function e(e){this.EVENT="gesture",this.gm=e}return e.prototype.do=function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break;case"touchcancel":this.onTouchCancel(e);break;default:return}},e.prototype.emit=function(e){this.gm.emit(this.EVENT,e)},e}(),rS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="pan",t}return aa(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y,r=t-this.preX,o=n-this.preY;this.preX=t,this.preY=n,this.emit({x:t,y:n,deltaX:r,deltaY:o,event:e})},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.preX=t,this.preY=n},t}(nS),oS="object"==typeof performance&&performance.now?performance:Date,iS={Pan:rS,Press:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="press",t}return aa(t,e),t.prototype.onTouchCancel=function(e){this.clearTimeout()},t.prototype.onTouchEnd=function(e){this.clearTimeout()},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y;(t-this.touchStartX>10||n-this.touchStartY>10)&&this.clearTimeout()},t.prototype.onTouchStart=function(e){var t=this;this.clearTimeout();var n=e.x,r=e.y;this.touchStartTime=oS.now(),this.touchStartX=n,this.touchStartY=r,this.pressTimeout=window.setTimeout((function(){t.emit({x:n,y:r,event:e})}),300)},t.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},t}(nS),Swipe:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return aa(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){var t=this.speedX,n=this.speedY;if(oS.now()-this.latestMoveTime<100){var r=e.x,o=e.y;this.emit({x:r,y:o,speedX:t,speedY:n,event:e})}},t.prototype.onTouchMove=function(e){var t=e.x,n=e.y,r=oS.now(),o=t-this.preX,i=n-this.preY,a=r-this.ms;this.speedX=o/a,this.speedY=i/a,this.latestMoveTime=r},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.speedX=this.speedY=0,this.preX=t,this.preY=n,this.ms=oS.now()},t}(nS),Tap:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EVENT="tap",t}return aa(t,e),t.prototype.onTouchCancel=function(e){},t.prototype.onTouchEnd=function(e){var t=e.x,n=e.y;t-this.touchStartX<2&&n-this.touchStartY<2&&oS.now()-this.touchStartTime<300&&this.emit({x:t,y:n,event:e})},t.prototype.onTouchMove=function(e){},t.prototype.onTouchStart=function(e){var t=e.x,n=e.y;this.touchStartTime=oS.now(),this.touchStartX=t,this.touchStartY=n},t}(nS)},aS=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.onTouchStart=function(e){r.preventEvent(e),r.element.on("touchmove",r.onTouchMove),r.element.on("touchend",r.onTouchEnd),r.element.on("touchcancel",r.onTouchCancel),r.emit("touchdown",e),r.doGestures(e)},r.onTouchMove=function(e){r.preventEvent(e),r.emit("touchmove",e),r.doGestures(e)},r.onTouchEnd=function(e){r.preventEvent(e),r.emit("touchend",e),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(e)},r.onTouchCancel=function(e){r.preventEvent(e),r.emit("touchcancel",e),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(e)},r.element=t,r.options=n,r.initialGestures(),r.bindTouchStart(),r}return aa(t,e),t.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},t.prototype.initialGestures=function(){var e=this,t=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=t.map((function(t){return new(0,iS[t])(e)}))},t.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},t.prototype.preventEvent=function(e){var t=e.type;(this.options.prevents||[]).includes(t)&&e.preventDefault()},t.prototype.doGestures=function(e){this.gestures.forEach((function(t){t.do(e)}))},t}(he),sS=on,lS="wheel",cS=function(e){function t(t){var n=e.call(this)||this;return n.rafMs=0,n.onPan=function(e){n.raf&&cancelAnimationFrame(n.raf);var t=e.deltaX,r=e.deltaY,o=n.getWrapperEvent(e,t,r);n.emit(lS,o)},n.onSwipe=function(e){var t=e.speedX,r=e.speedY;n.rafMs=oS.now(),n.ms=n.rafMs,0===t&&0===r||n.rafInertia(e)},n.element=t,n.gm=new aS(t,{gestures:["Pan","Swipe"]}),n.gm.on("swipe",n.onSwipe),n.gm.on("pan",n.onPan),n}return aa(t,e),t.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},t.prototype.rafInertia=function(e){var t=this,n=e.speedX,r=e.speedY;this.raf=window.requestAnimationFrame((function(){var o=oS.now(),i=(o-t.ms)/800;if(i<1){i=sS(1-i);var a=o-t.rafMs,s=n*i*a,l=r*i*a,c=t.getWrapperEvent(e,s,l);t.emit(lS,c),t.rafMs=o,t.rafInertia(e)}}))},t.prototype.getWrapperEvent=function(e,t,n){return sa(sa({},e),{deltaX:-t,deltaY:-n})},t}(he),uS=function(e,t,n,r,o){var i=n+r;return e+o>=i?e:i<e+(t+o)/2?n+r-o:n>e+(t-o)/2?e+t-n>o?n:e+t-o:e+(t-o)/2},dS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.gm)||void 0===t||t.destroy()},t.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},t.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",hx(this,this.getInteractiveBorderShapeStyle(2),{visible:!1}))},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",hx(this,sa({},this.getCellArea()),{visible:!1}))},t.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},t.prototype.showTreeLeafNodeAlignDot=function(){var e;return(null===(e=this.spreadsheet.options.style)||void 0===e?void 0:e.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},t.prototype.getParentTreeIconCfg=function(){if(this.showTreeLeafNodeAlignDot()&&this.spreadsheet.isHierarchyTreeType()&&this.meta.isLeaf)return yu(this.meta,"parent.belongsCell.treeIcon.cfg")},t.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()){var t=this.meta,n=t.isCollapsed,r=t.id,o=t.hierarchy,i=this.getContentArea().x,a=this.getTextStyle().fill,s=this.getStyle().icon.size,l=i+this.getContentIndent(),c=this.getIconYPosition();this.treeIcon=yx(this,{x:l,y:c,width:s,height:s},a,n,(function(){if(!yw()){if(!n){var t=e.spreadsheet.store.get("scrollY"),i=e.spreadsheet.facet.panelBBox.viewportHeight||0,a=(c=e.meta,u=0,null==(d=c.children)||d.forEach((function(e){u+=e.height||0})),u),s=o.height-a;if(t>0&&t+i>s){var l=s-i;e.spreadsheet.store.set("scrollY",l>0?l:0)}}var c,u,d;e.spreadsheet.emit(Jo.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:e.meta})}})),yw()&&(this.gm=new aS(this,{gestures:["Tap"]}),this.gm.on("tap",(function(){e.spreadsheet.emit(Jo.ROW_CELL_COLLAPSE_TREE_ROWS,{id:r,isCollapsed:!n,node:e.meta})})))}},t.prototype.drawTreeLeafNodeAlignDot=function(){var e=this.getParentTreeIconCfg();if(e){var t=this.getStyle().icon,n=t.size,r=t.margin,o=e.x+n+r.right,i=this.getTextPosition().y,a=this.getTextStyle(),s=a.fill,l=a.fontSize,c=n/5;this.treeLeafNodeAlignDot=fx(this,{x:o+n/2,y:i+(l-c)/2,r:c,fill:s,fillOpacity:.3})}},t.prototype.isBolderText=function(){var e=this.meta,t=e.isLeaf,n=e.isTotals,r=e.level;return!t&&0===r||n},t.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},t.prototype.drawRectBorder=function(){var e=this,t=this.getCellArea().x,n=this.getContentIndent(),r=this.spreadsheet.isHierarchyTreeType()?t:t+n;[qw.BOTTOM,qw.LEFT].forEach((function(t){var n=_x(t,sa(sa({},e.getCellArea()),{x:r}),e.getStyle().cell),o=n.position,i=n.style;gx(e,o,i)}))},t.prototype.drawResizeAreaInLeaf=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("rowCellVertical",this)){var e=this.getCellArea(),t=e.x,n=e.y,r=e.width,o=e.height,i=this.getResizeAreaStyle(),a=RE(this.spreadsheet,pi),s=this.headerConfig,l=s.position,c=s.seriesNumberWidth,u=s.width,d=s.viewportHeight,h=s.scrollX,f=s.scrollY,p={x:t,y:n+o-i.size/2,width:r,height:i.size};if(DE(p,{x:0,y:0,width:u,height:d},{scrollX:h,scrollY:f})){var g=(null==l?void 0:l.x)+t-h+c,v=(null==l?void 0:l.y)+n-f,m=this.spreadsheet.isFrozenRowHeader()?u-c-(t-h):r;a.addShape("rect",{attrs:sa(sa({},AE({id:this.meta.id,theme:i,type:Qi.Vertical,effect:Ji.Cell,offsetX:g,offsetY:v,width:r,height:o,meta:this.meta})),{x:g,y:v+o-i.size/2,width:m})})}}},t.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var e=this.getStyle(),t=e.icon,n=e.cell,r=t.size+t.margin.right,o=this.meta.parent,i=0;o;)0!==o.height&&(i+=r),o=o.parent;return this.showTreeLeafNodeAlignDot()&&(i+=this.isTreeLevel()?0:n.padding.right+t.margin.right),i},t.prototype.getTextIndent=function(){var e=this.getStyle().icon,t=e.size,n=e.margin;return this.getContentIndent()+(this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?t+n.right:0)},t.prototype.isTreeLevel=function(){return Fg(yu(this.meta,"parent.children"),(function(e){return!e.isLeaf}))},t.prototype.getIconPosition=function(){var e=this.textShape.cfg.attrs,t=e.x,n=e.y,r=e.textAlign,o=this.getStyle().icon.margin.left;return"left"===r?{x:t+this.actualTextWidth+o,y:n}:"right"===r?{x:t+o,y:n}:{x:t+this.actualTextWidth/2+o,y:n}},t.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTextIndent()-this.getActionIconsWidth()},t.prototype.getTextArea=function(){var e=this.getContentArea(),t=this.getTextIndent();return sa(sa({},e),{x:e.x+t,width:e.width-t})},t.prototype.getTextPosition=function(){var e=this.getTextArea(),t=this.headerConfig,n=t.scrollY,r=t.viewportHeight,o=this.getTextStyle().fontSize,i=uS(e.y,e.height,n,r,o);return{x:Ox(e,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x,y:i}},t.prototype.getIconYPosition=function(){var e=this.getTextPosition().y,t=this.getStyle().icon.size;return e+(this.getTextStyle().fontSize-t)/2},t}(JE),hS=function(e,t,n){var r,o,i=(null===(r=n.icon.margin)||void 0===r?void 0:r.left)||0,a=(null===(o=n.icon.margin)||void 0===o?void 0:o.right)||0,s=e.store.get("hiddenColumnsDetail",[]),l=!1,c=!1;s.forEach((function(e){var n,r,o,i;(null===(r=null===(n=null==e?void 0:e.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===t&&(l=!0),(null===(i=null===(o=null==e?void 0:e.displaySiblingNode)||void 0===o?void 0:o.next)||void 0===i?void 0:i.field)===t&&(c=!0)}));var u=yu(n,"icon.size");return{left:c?u+a:0,right:l?u+i:0}},fS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.handleRestOptions=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ua(e,1)[0];this.headerConfig=sa({},n);var r=this.meta.field,o=this.spreadsheet.dataCfg.sortParams,i=Fg(o,(function(e){return(null==e?void 0:e.sortFieldId)===r})),a=QE(i,!0);this.headerConfig.sortParam=sa(sa(sa({},this.headerConfig.sortParam),i||{}),{type:a})},t.prototype.isFrozenCell=function(){var e=this.spreadsheet.options,t=e.frozenColCount,n=e.frozenTrailingColCount,r=this.spreadsheet.facet.layoutResult.colNodes.filter((function(e){return Hw(e)})),o=function(e){for(;!Hw(e);)e=e.parent;return e}(this.meta).colIndex;return Aw(o,t)||Rw(o,n,r.length)},t.prototype.getFormattedFieldValue=function(){return kE(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},t.prototype.shouldAddVerticalResizeArea=function(){return!!this.isFrozenCell()||e.prototype.shouldAddVerticalResizeArea.call(this)},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,t=e.x,n=e.y,r=this.headerConfig,o=r.scrollX,i=r.position;return this.isFrozenCell()?{x:t,y:n}:{x:i.x+t-o,y:i.y+n}},t.prototype.getColResizeArea=function(){return this.isFrozenCell()?RE(this.spreadsheet,bi):e.prototype.getColResizeArea.call(this)},t.prototype.isSortCell=function(){return!0},t.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},t.prototype.getTextStyle=function(){var e=this.getStyle();return null==e?void 0:e.bolderText},t.prototype.getContentArea=function(){var e,t=((null===(e=this.getStyle())||void 0===e?void 0:e.cell)||this.theme.dataCell.cell).padding,n=sa({},t),r=hS(this.spreadsheet,this.meta.field,this.getStyle());return r.left&&(n.left=(n.left||0)+r.left),r.right&&(n.right=(n.right||0)+r.right),Ix(this.getCellArea(),n)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(xi).concat("table-col-cell")},t.prototype.drawBackgroundShape=function(){var e=this.getStyle().cell.backgroundColor;this.backgroundShape=hx(this,sa(sa({},this.getCellArea()),{fill:e}))},t}(eS),pS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.getStyle=function(e){return e?this.theme[e]:yu(this,"theme.cornerCell")},t.prototype.showSortIcon=function(){return!1},t.prototype.drawLeftBorder=function(){var e=_x(qw.LEFT,this.getCellArea(),this.getStyle().cell);gx(this,e.position,e.style)},t.prototype.drawBorders=function(){e.prototype.drawBorders.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},t}(fS),gS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},t.prototype.drawBorderShape=function(){e.prototype.drawBorderShape.call(this),0===this.meta.colIndex&&this.drawLeftBorder()},t.prototype.shouldDrawResizeArea=function(){return 0===this.meta.colIndex},t.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var e=this.getCellArea(),t=e.x,n=e.y,r=e.width,o=e.height,i=this.meta.rowIndex,a=this.getResizeAreaStyle(),s=this.spreadsheet.options,l=s.frozenRowCount,c=s.frozenTrailingRowCount,u=this.spreadsheet.facet.getCellRange(),d=Dw(i,u.start,l),h=Pw(i,u.end,c),f=d||h?gi:pi,p=RE(this.spreadsheet,f),g=this.spreadsheet.facet.layoutResult.colsHierarchy.height,v=this.spreadsheet.facet.getScrollOffset().scrollY,m=this.spreadsheet.facet.getPaginationScrollY(),y=n+(h?0:g);h||(y-=d?m:v+m),p.addShape("rect",{attrs:sa(sa({},AE({id:String(this.meta.rowIndex),theme:a,type:Qi.Vertical,effect:Ji.Cell,offsetX:t,offsetY:y,width:r,height:o,meta:this.meta})),{x:t,y:y+o-a.size/2,width:r})})}},t}(bE),vS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),Object.defineProperty(t.prototype,"cellType",{get:function(){return zi.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},t}(gS),mS=function(e){return[Gi.META,Gi.CONTROL].includes(e.key)},yS=function(e){return e.ctrlKey||e.metaKey},CS=function(e){var t=e.getMeta()||{},n=t.id,r=t.colIndex,o=t.rowIndex,i=t.rowQuery;return{id:n,colIndex:r,rowIndex:o,type:e.cellType,rowQuery:i}};function bS(e,t){var n=Math.min(e.rowIndex,t.rowIndex),r=Math.max(e.rowIndex,t.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(e.colIndex,t.colIndex)},end:{rowIndex:r,colIndex:Math.max(e.colIndex,t.colIndex)}}}var wS,xS,ES=function(e,t){var n=e.getSelectedCellHighlight(),r=n.colHeader,o=n.rowHeader;r&&e.updateCells(e.getAllColHeaderCells()),o&&e.updateCells(e.getAllRowHeaderCells()),t()},SS=function(e){var t=e.store.get("visibleActionIcons"),n=e.interaction.getInteractedCells(),r=e.interaction.getState().cells;return!(Vv(n)&&Vv(r)&&Vv(t))&&(fg(t,(function(e){e.set("visible",!1)})),e.store.set("visibleActionIcons",[]),fg(n,(function(e){e.hideInteractionShape()})),e.interaction.resetState(),e.options.interaction.selectedCellsSpotlight&&fg(e.interaction.getPanelGroupAllUnSelectedDataCells()||[],(function(e){e.clearUnselectedState()})),!0)},IS=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=da(da([],ua(e),!1),[function(e,t){if(Na(e)&&Na(t))return t}],!1);return $p.apply(void 0,da([{}],ua(n),!1))},TS=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=IS.apply(void 0,da([Bi],ua(e),!1));return n.fields=function(e){var t=["rows","columns","values"].reduce((function(t,n){var r=e[n],o=ub(r);return Yv(o,r)||console.warn("fields.".concat(n,":[").concat(r,"] should be unique")),t[n]=o,t}),{});return sa(sa({},e),t)}(n.fields),Vv(n.fields.customTreeItems)&&!Vv(n.fields.values)||(n.fields.valueInCols=!1),n},LS=function(e){return IS(oa,e)},MS=9e15,OS=1e9,_S="0123456789abcdef",NS="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",AS="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",RS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-MS,maxE:MS,crypto:!1},DS=!0,PS="[DecimalError] ",kS=PS+"Invalid argument: ",BS=PS+"Precision limit exceeded",FS=PS+"crypto unavailable",jS="[object Decimal]",zS=Math.floor,HS=Math.pow,WS=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,GS=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,US=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,VS=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,YS=1e7,$S=7,XS=NS.length-1,qS=AS.length-1,KS={toStringTag:jS};function ZS(e){var t,n,r,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)r=e[t]+"",(n=$S-r.length)&&(i+=lI(n)),i+=r;a=e[t],(n=$S-(r=a+"").length)&&(i+=lI(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}function QS(e,t,n){if(e!==~~e||e<t||e>n)throw Error(kS+e)}function JS(e,t,n,r){var o,i,a,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=$S,o=0):(o=Math.ceil((t+1)/$S),t%=$S),i=HS(10,$S-t),s=e[o]%i|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[o+1]/i/100|0)==HS(10,t-2)-1||(s==i/2||0==s)&&0==(e[o+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==i||!r&&n>3&&s+1==i/2)&&(e[o+1]/i/1e3|0)==HS(10,t-3)-1,a}function eI(e,t,n){for(var r,o,i=[0],a=0,s=e.length;a<s;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=_S.indexOf(e.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}KS.absoluteValue=KS.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),nI(e)},KS.ceil=function(){return nI(new this.constructor(this),this.e+1,2)},KS.clampedTo=KS.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(kS+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},KS.comparedTo=KS.cmp=function(e){var t,n,r,o,i=this,a=i.d,s=(e=new i.constructor(e)).d,l=i.s,c=e.s;if(!a||!s)return l&&c?l!==c?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-c:0;if(l!==c)return l;if(i.e!==e.e)return i.e>e.e^l<0?1:-1;for(t=0,n=(r=a.length)<(o=s.length)?r:o;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return r===o?0:r>o^l<0?1:-1},KS.cosine=KS.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+$S,r.rounding=1,n=function(e,t){var n,r,o;if(t.isZero())return t;(r=t.d.length)<32?o=(1/yI(4,n=Math.ceil(r/3))).toString():(n=16,o="2.3283064365386962890625e-10"),e.precision+=n,t=mI(e,1,t.times(o),new e(1));for(var i=n;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,CI(r,n)),r.precision=e,r.rounding=t,nI(2==xS||3==xS?n.neg():n,e,t,!0)):new r(1):new r(NaN)},KS.cubeRoot=KS.cbrt=function(){var e,t,n,r,o,i,a,s,l,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(DS=!1,(i=u.s*HS(u.s*u,1/3))&&Math.abs(i)!=1/0?r=new d(i.toString()):(n=ZS(u.d),(i=((e=u.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=HS(n,1/3),e=zS((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=u.s),a=(e=d.precision)+3;;)if(c=(l=(s=r).times(s).times(s)).plus(u),r=tI(c.plus(u).times(s),c.plus(l),a+2,1),ZS(s.d).slice(0,a)===(n=ZS(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(o||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(nI(r,e+1,1),t=!r.times(r).times(r).eq(u));break}if(!o&&(nI(s,e+1,0),s.times(s).times(s).eq(u))){r=s;break}a+=4,o=1}return DS=!0,nI(r,e,d.rounding,t)},KS.decimalPlaces=KS.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-zS(this.e/$S))*$S,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},KS.dividedBy=KS.div=function(e){return tI(this,new this.constructor(e))},KS.dividedToIntegerBy=KS.divToInt=function(e){var t=this.constructor;return nI(tI(this,new t(e),0,1,1),t.precision,t.rounding)},KS.equals=KS.eq=function(e){return 0===this.cmp(e)},KS.floor=function(){return nI(new this.constructor(this),this.e+1,3)},KS.greaterThan=KS.gt=function(e){return this.cmp(e)>0},KS.greaterThanOrEqualTo=KS.gte=function(e){var t=this.cmp(e);return 1==t||0===t},KS.hyperbolicCosine=KS.cosh=function(){var e,t,n,r,o,i=this,a=i.constructor,s=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(i.e,i.sd())+4,a.rounding=1,(o=i.d.length)<32?t=(1/yI(4,e=Math.ceil(o/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=mI(a,1,i.times(t),new a(1),!0);for(var l,c=e,u=new a(8);c--;)l=i.times(i),i=s.minus(l.times(u.minus(l.times(u))));return nI(i,a.precision=n,a.rounding=r,!0)},KS.hyperbolicSine=KS.sinh=function(){var e,t,n,r,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(o.e,o.sd())+4,i.rounding=1,(r=o.d.length)<3)o=mI(i,2,o,o,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,o=mI(i,2,o=o.times(1/yI(5,e)),o,!0);for(var a,s=new i(5),l=new i(16),c=new i(20);e--;)a=o.times(o),o=o.times(s.plus(a.times(l.times(a).plus(c))))}return i.precision=t,i.rounding=n,nI(o,t,n,!0)},KS.hyperbolicTangent=KS.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,tI(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},KS.inverseCosine=KS.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),o=n.precision,i=n.rounding;return-1!==r?0===r?t.isNeg()?aI(n,o,i):new n(0):new n(NaN):t.isZero()?aI(n,o+4,i).times(.5):(n.precision=o+6,n.rounding=1,t=t.asin(),e=aI(n,o+4,i).times(.5),n.precision=o,n.rounding=i,e.minus(t))},KS.inverseHyperbolicCosine=KS.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,DS=!1,n=n.times(n).minus(1).sqrt().plus(n),DS=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},KS.inverseHyperbolicSine=KS.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,DS=!1,n=n.times(n).plus(1).sqrt().plus(n),DS=!0,r.precision=e,r.rounding=t,n.ln())},KS.inverseHyperbolicTangent=KS.atanh=function(){var e,t,n,r,o=this,i=o.constructor;return o.isFinite()?o.e>=0?new i(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(e=i.precision,t=i.rounding,r=o.sd(),Math.max(r,e)<2*-o.e-1?nI(new i(o),e,t,!0):(i.precision=n=r-o.e,o=tI(o.plus(1),new i(1).minus(o),n+e,1),i.precision=e+4,i.rounding=1,o=o.ln(),i.precision=e,i.rounding=t,o.times(.5))):new i(NaN)},KS.inverseSine=KS.asin=function(){var e,t,n,r,o=this,i=o.constructor;return o.isZero()?new i(o):(t=o.abs().cmp(1),n=i.precision,r=i.rounding,-1!==t?0===t?((e=aI(i,n+4,r).times(.5)).s=o.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,o=o.div(new i(1).minus(o.times(o)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,o.times(2)))},KS.inverseTangent=KS.atan=function(){var e,t,n,r,o,i,a,s,l,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=qS)return(a=aI(u,d+4,h).times(.25)).s=c.s,a}else{if(!c.s)return new u(NaN);if(d+4<=qS)return(a=aI(u,d+4,h).times(.5)).s=c.s,a}for(u.precision=s=d+10,u.rounding=1,e=n=Math.min(28,s/$S+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(DS=!1,t=Math.ceil(s/$S),r=1,l=c.times(c),a=new u(c),o=c;-1!==e;)if(o=o.times(l),i=a.minus(o.div(r+=2)),o=o.times(l),void 0!==(a=i.plus(o.div(r+=2))).d[t])for(e=t;a.d[e]===i.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),DS=!0,nI(a,u.precision=d,u.rounding=h,!0)},KS.isFinite=function(){return!!this.d},KS.isInteger=KS.isInt=function(){return!!this.d&&zS(this.e/$S)>this.d.length-2},KS.isNaN=function(){return!this.s},KS.isNegative=KS.isNeg=function(){return this.s<0},KS.isPositive=KS.isPos=function(){return this.s>0},KS.isZero=function(){return!!this.d&&0===this.d[0]},KS.lessThan=KS.lt=function(e){return this.cmp(e)<0},KS.lessThanOrEqualTo=KS.lte=function(e){return this.cmp(e)<1},KS.logarithm=KS.log=function(e){var t,n,r,o,i,a,s,l,c=this,u=c.constructor,d=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new u(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(o=n[0];o%10==0;)o/=10;i=1!==o}if(DS=!1,a=fI(c,s=d+5),r=t?iI(u,s+10):fI(e,s),JS((l=tI(a,r,s,1)).d,o=d,h))do{if(a=fI(c,s+=10),r=t?iI(u,s+10):fI(e,s),l=tI(a,r,s,1),!i){+ZS(l.d).slice(o+1,o+15)+1==1e14&&(l=nI(l,d+1,0));break}}while(JS(l.d,o+=10,h));return DS=!0,nI(l,d,h)},KS.minus=KS.sub=function(e){var t,n,r,o,i,a,s,l,c,u,d,h,f=this,p=f.constructor;if(e=new p(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new p(e.d||f.s!==e.s?f:NaN):e=new p(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,h=e.d,s=p.precision,l=p.rounding,!c[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!c[0])return new p(3===l?-0:0);e=new p(f)}return DS?nI(e,s,l):e}if(n=zS(e.e/$S),u=zS(f.e/$S),c=c.slice(),i=u-n){for((d=i<0)?(t=c,i=-i,a=h.length):(t=h,n=u,a=c.length),i>(r=Math.max(Math.ceil(s/$S),a)+2)&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for((d=(r=c.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(c[r]!=h[r]){d=c[r]<h[r];break}i=0}for(d&&(t=c,c=h,h=t,e.s=-e.s),a=c.length,r=h.length-a;r>0;--r)c[a++]=0;for(r=h.length;r>i;){if(c[--r]<h[r]){for(o=r;o&&0===c[--o];)c[o]=YS-1;--c[o],c[r]+=YS}c[r]-=h[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=oI(c,n),DS?nI(e,s,l):e):new p(3===l?-0:0)},KS.modulo=KS.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?nI(new r(n),r.precision,r.rounding):(DS=!1,9==r.modulo?(t=tI(n,e.abs(),0,3,1)).s*=e.s:t=tI(n,e,0,r.modulo,1),t=t.times(e),DS=!0,n.minus(t))},KS.naturalExponential=KS.exp=function(){return hI(this)},KS.naturalLogarithm=KS.ln=function(){return fI(this)},KS.negated=KS.neg=function(){var e=new this.constructor(this);return e.s=-e.s,nI(e)},KS.plus=KS.add=function(e){var t,n,r,o,i,a,s,l,c,u,d=this,h=d.constructor;if(e=new h(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new h(e.d||d.s===e.s?d:NaN)):e=new h(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(c=d.d,u=e.d,s=h.precision,l=h.rounding,!c[0]||!u[0])return u[0]||(e=new h(d)),DS?nI(e,s,l):e;if(i=zS(d.e/$S),r=zS(e.e/$S),c=c.slice(),o=i-r){for(o<0?(n=c,o=-o,a=u.length):(n=u,r=i,a=c.length),o>(a=(i=Math.ceil(s/$S))>a?i+1:a+1)&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((a=c.length)-(o=u.length)<0&&(o=a,n=u,u=c,c=n),t=0;o;)t=(c[--o]=c[o]+u[o]+t)/YS|0,c[o]%=YS;for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=oI(c,r),DS?nI(e,s,l):e},KS.precision=KS.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(kS+e);return n.d?(t=sI(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},KS.round=function(){var e=this,t=e.constructor;return nI(new t(e),e.e+1,t.rounding)},KS.sine=KS.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+$S,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:mI(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=mI(e,2,t=t.times(1/yI(5,n)),t);for(var o,i=new e(5),a=new e(16),s=new e(20);n--;)o=t.times(t),t=t.times(i.plus(o.times(a.times(o).minus(s))));return t}(r,CI(r,n)),r.precision=e,r.rounding=t,nI(xS>2?n.neg():n,e,t,!0)):new r(NaN)},KS.squareRoot=KS.sqrt=function(){var e,t,n,r,o,i,a=this,s=a.d,l=a.e,c=a.s,u=a.constructor;if(1!==c||!s||!s[0])return new u(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(DS=!1,0==(c=Math.sqrt(+a))||c==1/0?(((t=ZS(s)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=zS((l+1)/2)-(l<0||l%2),r=new u(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new u(c.toString()),n=(l=u.precision)+3;;)if(r=(i=r).plus(tI(a,i,n+2,1)).times(.5),ZS(i.d).slice(0,n)===(t=ZS(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(nI(r,l+1,1),e=!r.times(r).eq(a));break}if(!o&&(nI(i,l+1,0),i.times(i).eq(a))){r=i;break}n+=4,o=1}return DS=!0,nI(r,l,u.rounding,e)},KS.tangent=KS.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=tI(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,nI(2==xS||4==xS?n.neg():n,e,t,!0)):new r(NaN)},KS.times=KS.mul=function(e){var t,n,r,o,i,a,s,l,c,u=this,d=u.constructor,h=u.d,f=(e=new d(e)).d;if(e.s*=u.s,!(h&&h[0]&&f&&f[0]))return new d(!e.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*e.s:e.s/0);for(n=zS(u.e/$S)+zS(e.e/$S),(l=h.length)<(c=f.length)&&(i=h,h=f,f=i,a=l,l=c,c=a),i=[],r=a=l+c;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,o=l+r;o>r;)s=i[o]+f[r]*h[o-r-1]+t,i[o--]=s%YS|0,t=s/YS|0;i[o]=(i[o]+t)%YS|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=oI(i,n),DS?nI(e,d.precision,d.rounding):e},KS.toBinary=function(e,t){return bI(this,2,e,t)},KS.toDecimalPlaces=KS.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(QS(e,0,OS),void 0===t?t=r.rounding:QS(t,0,8),nI(n,e+n.e+1,t))},KS.toExponential=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=rI(r,!0):(QS(e,0,OS),void 0===t?t=o.rounding:QS(t,0,8),n=rI(r=nI(new o(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},KS.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return void 0===e?n=rI(o):(QS(e,0,OS),void 0===t?t=i.rounding:QS(t,0,8),n=rI(r=nI(new i(o),e+o.e+1,t),!1,e+r.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n},KS.toFraction=function(e){var t,n,r,o,i,a,s,l,c,u,d,h,f=this,p=f.d,g=f.constructor;if(!p)return new g(f);if(c=n=new g(1),r=l=new g(0),a=(i=(t=new g(r)).e=sI(p)-f.e-1)%$S,t.d[0]=HS(10,a<0?$S+a:a),null==e)e=i>0?t:c;else{if(!(s=new g(e)).isInt()||s.lt(c))throw Error(kS+s);e=s.gt(t)?i>0?t:c:s}for(DS=!1,s=new g(ZS(p)),u=g.precision,g.precision=i=p.length*$S*2;d=tI(s,t,0,1,1),1!=(o=n.plus(d.times(r))).cmp(e);)n=r,r=o,o=c,c=l.plus(d.times(o)),l=o,o=t,t=s.minus(d.times(o)),s=o;return o=tI(e.minus(n),r,0,1,1),l=l.plus(o.times(c)),n=n.plus(o.times(r)),l.s=c.s=f.s,h=tI(c,r,i,1).minus(f).abs().cmp(tI(l,n,i,1).minus(f).abs())<1?[c,r]:[l,n],g.precision=u,DS=!0,h},KS.toHexadecimal=KS.toHex=function(e,t){return bI(this,16,e,t)},KS.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:QS(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(DS=!1,n=tI(n,e,0,t,1).times(e),DS=!0,nI(n)):(e.s=n.s,n=e),n},KS.toNumber=function(){return+this},KS.toOctal=function(e,t){return bI(this,8,e,t)},KS.toPower=KS.pow=function(e){var t,n,r,o,i,a,s=this,l=s.constructor,c=+(e=new l(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new l(HS(+s,c));if((s=new l(s)).eq(1))return s;if(r=l.precision,i=l.rounding,e.eq(1))return nI(s,r,i);if((t=zS(e.e/$S))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return o=cI(l,s,n,r),e.s<0?new l(1).div(o):nI(o,r,i);if((a=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(t=0!=(n=HS(+s,c))&&isFinite(n)?new l(n+"").e:zS(c*(Math.log("0."+ZS(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(DS=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(o=hI(e.times(fI(s,r+n)),r)).d&&JS((o=nI(o,r+5,1)).d,r,i)&&(t=r+10,+ZS((o=nI(hI(e.times(fI(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(o=nI(o,r+1,0))),o.s=a,DS=!0,l.rounding=i,nI(o,r,i))},KS.toPrecision=function(e,t){var n,r=this,o=r.constructor;return void 0===e?n=rI(r,r.e<=o.toExpNeg||r.e>=o.toExpPos):(QS(e,1,OS),void 0===t?t=o.rounding:QS(t,0,8),n=rI(r=nI(new o(r),e,t),e<=r.e||r.e<=o.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},KS.toSignificantDigits=KS.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(QS(e,1,OS),void 0===t?t=n.rounding:QS(t,0,8)),nI(new n(this),e,t)},KS.toString=function(){var e=this,t=e.constructor,n=rI(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},KS.truncated=KS.trunc=function(){return nI(new this.constructor(this),this.e+1,1)},KS.valueOf=KS.toJSON=function(){var e=this,t=e.constructor,n=rI(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var tI=function(){function e(e,t,n){var r,o=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+o,e[i]=r%n|0,o=r/n|0;return o&&e.unshift(o),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,o,i,a,s,l){var c,u,d,h,f,p,g,v,m,y,C,b,w,x,E,S,I,T,L,M,O=r.constructor,_=r.s==o.s?1:-1,N=r.d,A=o.d;if(!(N&&N[0]&&A&&A[0]))return new O(r.s&&o.s&&(N?!A||N[0]!=A[0]:A)?N&&0==N[0]||!A?0*_:_/0:NaN);for(l?(f=1,u=r.e-o.e):(l=YS,f=$S,u=zS(r.e/f)-zS(o.e/f)),L=A.length,I=N.length,y=(m=new O(_)).d=[],d=0;A[d]==(N[d]||0);d++);if(A[d]>(N[d]||0)&&u--,null==i?(x=i=O.precision,a=O.rounding):x=s?i+(r.e-o.e)+1:i,x<0)y.push(1),p=!0;else{if(x=x/f+2|0,d=0,1==L){for(h=0,A=A[0],x++;(d<I||h)&&x--;d++)E=h*l+(N[d]||0),y[d]=E/A|0,h=E%A|0;p=h||d<I}else{for((h=l/(A[0]+1)|0)>1&&(A=e(A,h,l),N=e(N,h,l),L=A.length,I=N.length),S=L,b=(C=N.slice(0,L)).length;b<L;)C[b++]=0;(M=A.slice()).unshift(0),T=A[0],A[1]>=l/2&&++T;do{h=0,(c=t(A,C,L,b))<0?(w=C[0],L!=b&&(w=w*l+(C[1]||0)),(h=w/T|0)>1?(h>=l&&(h=l-1),1==(c=t(g=e(A,h,l),C,v=g.length,b=C.length))&&(h--,n(g,L<v?M:A,v,l))):(0==h&&(c=h=1),g=A.slice()),(v=g.length)<b&&g.unshift(0),n(C,g,b,l),-1==c&&(c=t(A,C,L,b=C.length))<1&&(h++,n(C,L<b?M:A,b,l)),b=C.length):0===c&&(h++,C=[0]),y[d++]=h,c&&C[0]?C[b++]=N[S]||0:(C=[N[S]],b=1)}while((S++<I||void 0!==C[0])&&x--);p=void 0!==C[0]}y[0]||y.shift()}if(1==f)m.e=u,wS=p;else{for(d=1,h=y[0];h>=10;h/=10)d++;m.e=d+u*f-1,nI(m,s?i+m.e+1:i,a,p)}return m}}();function nI(e,t,n,r){var o,i,a,s,l,c,u,d,h,f=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(o=1,s=d[0];s>=10;s/=10)o++;if((i=t-o)<0)i+=$S,a=t,l=(u=d[h=0])/HS(10,o-a-1)%10|0;else if((h=Math.ceil((i+1)/$S))>=(s=d.length)){if(!r)break e;for(;s++<=h;)d.push(0);u=l=0,o=1,a=(i%=$S)-$S+1}else{for(u=s=d[h],o=1;s>=10;s/=10)o++;l=(a=(i%=$S)-$S+o)<0?0:u/HS(10,o-a-1)%10|0}if(r=r||t<0||void 0!==d[h+1]||(a<0?u:u%HS(10,o-a-1)),c=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?a>0?u/HS(10,o-a):0:d[h-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,c?(t-=e.e+1,d[0]=HS(10,($S-t%$S)%$S),e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=h,s=1,h--):(d.length=h+1,s=HS(10,$S-i),d[h]=a>0?(u/HS(10,o-a)%HS(10,a)|0)*s:0),c)for(;;){if(0==h){for(i=1,a=d[0];a>=10;a/=10)i++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;i!=s&&(e.e++,d[0]==YS&&(d[0]=1));break}if(d[h]+=s,d[h]!=YS)break;d[h--]=0,s=1}for(i=d.length;0===d[--i];)d.pop()}return DS&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function rI(e,t,n){if(!e.isFinite())return pI(e);var r,o=e.e,i=ZS(e.d),a=i.length;return t?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+lI(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):o<0?(i="0."+lI(-o-1)+i,n&&(r=n-a)>0&&(i+=lI(r))):o>=a?(i+=lI(o+1-a),n&&(r=n-o-1)>0&&(i=i+"."+lI(r))):((r=o+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(o+1===a&&(i+="."),i+=lI(r))),i}function oI(e,t){var n=e[0];for(t*=$S;n>=10;n/=10)t++;return t}function iI(e,t,n){if(t>XS)throw DS=!0,n&&(e.precision=n),Error(BS);return nI(new e(NS),t,1,!0)}function aI(e,t,n){if(t>qS)throw Error(BS);return nI(new e(AS),t,n,!0)}function sI(e){var t=e.length-1,n=t*$S+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function lI(e){for(var t="";e--;)t+="0";return t}function cI(e,t,n,r){var o,i=new e(1),a=Math.ceil(r/$S+4);for(DS=!1;;){if(n%2&&wI((i=i.times(t)).d,a)&&(o=!0),0===(n=zS(n/2))){n=i.d.length-1,o&&0===i.d[n]&&++i.d[n];break}wI((t=t.times(t)).d,a)}return DS=!0,i}function uI(e){return 1&e.d[e.d.length-1]}function dI(e,t,n){for(var r,o=new e(t[0]),i=0;++i<t.length;){if(!(r=new e(t[i])).s){o=r;break}o[n](r)&&(o=r)}return o}function hI(e,t){var n,r,o,i,a,s,l,c=0,u=0,d=0,h=e.constructor,f=h.rounding,p=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(DS=!1,l=p):l=t,s=new h(.03125);e.e>-2;)e=e.times(s),d+=5;for(l+=r=Math.log(HS(2,d))/Math.LN10*2+5|0,n=i=a=new h(1),h.precision=l;;){if(i=nI(i.times(e),l,1),n=n.times(++u),ZS((s=a.plus(tI(i,n,l,1))).d).slice(0,l)===ZS(a.d).slice(0,l)){for(o=d;o--;)a=nI(a.times(a),l,1);if(null!=t)return h.precision=p,a;if(!(c<3&&JS(a.d,l-r,f,c)))return nI(a,h.precision=p,f,DS=!0);h.precision=l+=10,n=i=s=new h(1),u=0,c++}a=s}}function fI(e,t){var n,r,o,i,a,s,l,c,u,d,h,f=1,p=e,g=p.d,v=p.constructor,m=v.rounding,y=v.precision;if(p.s<0||!g||!g[0]||!p.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=p.s?NaN:g?0:p);if(null==t?(DS=!1,u=y):u=t,v.precision=u+=10,r=(n=ZS(g)).charAt(0),!(Math.abs(i=p.e)<15e14))return c=iI(v,u+2,y).times(i+""),p=fI(new v(r+"."+n.slice(1)),u-10).plus(c),v.precision=y,null==t?nI(p,y,m,DS=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=ZS((p=p.times(e)).d)).charAt(0),f++;for(i=p.e,r>1?(p=new v("0."+n),i++):p=new v(r+"."+n.slice(1)),d=p,l=a=p=tI(p.minus(1),p.plus(1),u,1),h=nI(p.times(p),u,1),o=3;;){if(a=nI(a.times(h),u,1),ZS((c=l.plus(tI(a,new v(o),u,1))).d).slice(0,u)===ZS(l.d).slice(0,u)){if(l=l.times(2),0!==i&&(l=l.plus(iI(v,u+2,y).times(i+""))),l=tI(l,new v(f),u,1),null!=t)return v.precision=y,l;if(!JS(l.d,u-10,m,s))return nI(l,v.precision=y,m,DS=!0);v.precision=u+=10,c=a=p=tI(d.minus(1),d.plus(1),u,1),h=nI(p.times(p),u,1),o=s=1}l=c,o+=2}}function pI(e){return String(e.s*e.s/0)}function gI(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(o=t.length;48===t.charCodeAt(o-1);--o);if(t=t.slice(r,o)){if(o-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%$S,n<0&&(r+=$S),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=$S;r<o;)e.d.push(+t.slice(r,r+=$S));t=t.slice(r),r=$S-t.length}else r-=o;for(;r--;)t+="0";e.d.push(+t),DS&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function vI(e,t){var n,r,o,i,a,s,l,c,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),VS.test(t))return gI(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(GS.test(t))n=16,t=t.toLowerCase();else if(WS.test(t))n=2;else{if(!US.test(t))throw Error(kS+t);n=8}for((i=t.search(/p/i))>0?(l=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),a=(i=t.indexOf("."))>=0,r=e.constructor,a&&(i=(s=(t=t.replace(".","")).length)-i,o=cI(r,new r(n),i,2*i)),i=u=(c=eI(t,n,YS)).length-1;0===c[i];--i)c.pop();return i<0?new r(0*e.s):(e.e=oI(c,u),e.d=c,DS=!1,a&&(e=tI(e,o,4*s)),l&&(e=e.times(Math.abs(l)<54?HS(2,l):cT.pow(2,l))),DS=!0,e)}function mI(e,t,n,r,o){var i,a,s,l,c=e.precision,u=Math.ceil(c/$S);for(DS=!1,l=n.times(n),s=new e(r);;){if(a=tI(s.times(l),new e(t++*t++),c,1),s=o?r.plus(a):r.minus(a),r=tI(a.times(l),new e(t++*t++),c,1),void 0!==(a=s.plus(r)).d[u]){for(i=u;a.d[i]===s.d[i]&&i--;);if(-1==i)break}i=s,s=r,r=a,a=i}return DS=!0,a.d.length=u+1,a}function yI(e,t){for(var n=e;--t;)n*=e;return n}function CI(e,t){var n,r=t.s<0,o=aI(e,e.precision,1),i=o.times(.5);if((t=t.abs()).lte(i))return xS=r?4:1,t;if((n=t.divToInt(o)).isZero())xS=r?3:2;else{if((t=t.minus(n.times(o))).lte(i))return xS=uI(n)?r?2:3:r?4:1,t;xS=uI(n)?r?1:4:r?3:2}return t.minus(o).abs()}function bI(e,t,n,r){var o,i,a,s,l,c,u,d,h,f=e.constructor,p=void 0!==n;if(p?(QS(n,1,OS),void 0===r?r=f.rounding:QS(r,0,8)):(n=f.precision,r=f.rounding),e.isFinite()){for(p?(o=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):o=t,(a=(u=rI(e)).indexOf("."))>=0&&(u=u.replace(".",""),(h=new f(1)).e=u.length-a,h.d=eI(rI(h),10,o),h.e=h.d.length),i=l=(d=eI(u,10,o)).length;0==d[--l];)d.pop();if(d[0]){if(a<0?i--:((e=new f(e)).d=d,e.e=i,d=(e=tI(e,h,n,r,0,o)).d,i=e.e,c=wS),a=d[n],s=o/2,c=c||void 0!==d[n+1],c=r<4?(void 0!==a||c)&&(0===r||r===(e.s<0?3:2)):a>s||a===s&&(4===r||c||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,c)for(;++d[--n]>o-1;)d[n]=0,n||(++i,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,u="";a<l;a++)u+=_S.charAt(d[a]);if(p){if(l>1)if(16==t||8==t){for(a=16==t?4:3,--l;l%a;l++)u+="0";for(l=(d=eI(u,o,t)).length;!d[l-1];--l);for(a=1,u="1.";a<l;a++)u+=_S.charAt(d[a])}else u=u.charAt(0)+"."+u.slice(1);u=u+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)u="0"+u;u="0."+u}else if(++i>l)for(i-=l;i--;)u+="0";else i<l&&(u=u.slice(0,i)+"."+u.slice(i))}else u=p?"0p+0":"0";u=(16==t?"0x":2==t?"0b":8==t?"0o":"")+u}else u=pI(e);return e.s<0?"-"+u:u}function wI(e,t){if(e.length>t)return e.length=t,!0}function xI(e){return new this(e).abs()}function EI(e){return new this(e).acos()}function SI(e){return new this(e).acosh()}function II(e,t){return new this(e).plus(t)}function TI(e){return new this(e).asin()}function LI(e){return new this(e).asinh()}function MI(e){return new this(e).atan()}function OI(e){return new this(e).atanh()}function _I(e,t){e=new this(e),t=new this(t);var n,r=this.precision,o=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?aI(this,r,o):new this(0)).s=e.s:!e.d||t.isZero()?(n=aI(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(tI(e,t,i,1)),t=aI(this,i,1),this.precision=r,this.rounding=o,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(tI(e,t,i,1)):(n=aI(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function NI(e){return new this(e).cbrt()}function AI(e){return nI(e=new this(e),e.e+1,2)}function RI(e,t,n){return new this(e).clamp(t,n)}function DI(e){if(!e||"object"!=typeof e)throw Error(PS+"Object expected");var t,n,r,o=!0===e.defaults,i=["precision",1,OS,"rounding",0,8,"toExpNeg",-MS,0,"toExpPos",0,MS,"maxE",0,MS,"minE",-MS,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],o&&(this[n]=RS[n]),void 0!==(r=e[n])){if(!(zS(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(kS+n+": "+r);this[n]=r}if(n="crypto",o&&(this[n]=RS[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(kS+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(FS);this[n]=!0}else this[n]=!1}return this}function PI(e){return new this(e).cos()}function kI(e){return new this(e).cosh()}function BI(e,t){return new this(e).div(t)}function FI(e){return new this(e).exp()}function jI(e){return nI(e=new this(e),e.e+1,3)}function zI(){var e,t,n=new this(0);for(DS=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return DS=!0,new this(1/0);n=t}return DS=!0,n.sqrt()}function HI(e){return e instanceof cT||e&&e.toStringTag===jS||!1}function WI(e){return new this(e).ln()}function GI(e,t){return new this(e).log(t)}function UI(e){return new this(e).log(2)}function VI(e){return new this(e).log(10)}function YI(){return dI(this,arguments,"lt")}function $I(){return dI(this,arguments,"gt")}function XI(e,t){return new this(e).mod(t)}function qI(e,t){return new this(e).mul(t)}function KI(e,t){return new this(e).pow(t)}function ZI(e){var t,n,r,o,i=0,a=new this(1),s=[];if(void 0===e?e=this.precision:QS(e,1,OS),r=Math.ceil(e/$S),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)(o=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:s[i++]=o%1e7;else{if(!crypto.randomBytes)throw Error(FS);for(t=crypto.randomBytes(r*=4);i<r;)(o=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(s.push(o%1e7),i+=4);i=r/4}else for(;i<r;)s[i++]=1e7*Math.random()|0;for(r=s[--i],e%=$S,r&&e&&(o=HS(10,$S-e),s[i]=(r/o|0)*o);0===s[i];i--)s.pop();if(i<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=$S)s.shift();for(r=1,o=s[0];o>=10;o/=10)r++;r<$S&&(n-=$S-r)}return a.e=n,a.d=s,a}function QI(e){return nI(e=new this(e),e.e+1,this.rounding)}function JI(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function eT(e){return new this(e).sin()}function tT(e){return new this(e).sinh()}function nT(e){return new this(e).sqrt()}function rT(e,t){return new this(e).sub(t)}function oT(){var e=0,t=arguments,n=new this(t[e]);for(DS=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return DS=!0,nI(n,this.precision,this.rounding)}function iT(e){return new this(e).tan()}function aT(e){return new this(e).tanh()}function sT(e){return nI(e=new this(e),e.e+1,1)}KS[Symbol.for("nodejs.util.inspect.custom")]=KS.toString,KS[Symbol.toStringTag]="Decimal";var lT,cT=KS.constructor=function e(t){var n,r,o;function i(e){var t,n,r,o=this;if(!(o instanceof i))return new i(e);if(o.constructor=i,HI(e))return o.s=e.s,void(DS?!e.d||e.e>i.maxE?(o.e=NaN,o.d=null):e.e<i.minE?(o.e=0,o.d=[0]):(o.e=e.e,o.d=e.d.slice()):(o.e=e.e,o.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return o.s=1/e<0?-1:1,o.e=0,void(o.d=[0]);if(e<0?(e=-e,o.s=-1):o.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(DS?t>i.maxE?(o.e=NaN,o.d=null):t<i.minE?(o.e=0,o.d=[0]):(o.e=t,o.d=[e]):(o.e=t,o.d=[e]))}return 0*e!=0?(e||(o.s=NaN),o.e=NaN,void(o.d=null)):gI(o,e.toString())}if("string"!==r)throw Error(kS+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),o.s=-1):(43===n&&(e=e.slice(1)),o.s=1),VS.test(e)?gI(o,e):vI(o,e)}if(i.prototype=KS,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=DI,i.clone=e,i.isDecimal=HI,i.abs=xI,i.acos=EI,i.acosh=SI,i.add=II,i.asin=TI,i.asinh=LI,i.atan=MI,i.atanh=OI,i.atan2=_I,i.cbrt=NI,i.ceil=AI,i.clamp=RI,i.cos=PI,i.cosh=kI,i.div=BI,i.exp=FI,i.floor=jI,i.hypot=zI,i.ln=WI,i.log=GI,i.log10=VI,i.log2=UI,i.max=YI,i.min=$I,i.mod=XI,i.mul=qI,i.pow=KI,i.random=ZI,i.round=QI,i.sign=JI,i.sin=eT,i.sinh=tT,i.sqrt=nT,i.sub=rT,i.sum=oT,i.tan=iT,i.tanh=aT,i.trunc=sT,void 0===t&&(t={}),t&&!0!==t.defaults)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<o.length;)t.hasOwnProperty(r=o[n++])||(t[r]=this[r]);return i.config(t),i}(RS);NS=new cT(NS),AS=new cT(AS);var uT,dT=function(e){return"number"==typeof e?Number.isNaN(e):!e||"string"!=typeof e||Number.isNaN(Number(e))},hT=function(e,t,n){return void 0===n&&(n=!1),(null==e?void 0:e.length)?e.reduce((function(e,r){var o=yu(r,t),i=dT(o);if(n&&i)return e;var a=i?0:o;return e.push(new cT(a)),e}),[]):[]},fT=function(e,t){var n=hT(e,t);return n.length?cT.sum.apply(cT,da([],ua(n),!1)).toNumber():0},pT=function(e,t,n){var r=hT(t,n,!0);if(null==r?void 0:r.length)return cT[e].apply(cT,da([],ua(r),!1)).toNumber()},gT=((lT={})[Kw.SUM]=fT,lT[Kw.MIN]=function(e,t){return pT("min",e,t)},lT[Kw.MAX]=function(e,t){return pT("max",e,t)},lT[Kw.AVG]=function(e,t){var n=hT(e,t);return(null==n?void 0:n.length)?cT.sum.apply(cT,da([],ua(n),!1)).dividedBy(n.length).toNumber():0},lT),vT=function(e){return sa({operator:{onClick:Ps,menus:[]},enterable:!0,enableFormat:!0},e)},mT=function(e){return sa(sa({},null==e?void 0:e.colQuery),null==e?void 0:e.rowQuery)},yT=function(e,t){var n;if(e){var r=t.style,o=t.className,i=void 0===o?[]:o,a=t.visible;if(r&&Object.assign(e.style,r),i.length){var s=i.filter(Boolean);(n=e.classList).add.apply(n,da([],ua(s),!1))}e.classList.toggle(gw,a),e.classList.toggle(vw,!a)}},CT=function(e,t){var n,r=null===(n=null==e?void 0:e.dataSet)||void 0===n?void 0:n.getFieldFormatter(t);return function(e,t){return o=Kv(n=r(e,t))&&Number.isNaN(n),i=""===n,Jv(n)||o||i?"-":n;var n,o,i}},bT=function(e,t){var n,r=t.data,o=t.field,i=t.valueField,a=t.useCompleteDataForFormatter,s=void 0===a||a,l=null===(n=null==e?void 0:e.dataSet)||void 0===n?void 0:n.getFieldName(o),c=CT(e,o),u=Wa(r[o])?JSON.stringify(r[o]):r[o];return{name:l,value:c(i||u,s?r:void 0)}},wT=function(e,t,n){return Yg(Dg(Ef([],t),(function(e){return e!==ri&&n[e]})),(function(t){return bT(e,{data:n,field:t,useCompleteDataForFormatter:!1})}))},xT=function(e,t,n){void 0===n&&(n=!0);var r=[];return fg(t,(function(t,o){fg(e,(function(e){n||-1===e.colIndex?n&&-1!==e.rowIndex&&r.push([e.rowIndex,o]):r.push([o,e.colIndex])}))})),r},ET=function(e){var t=e.spreadsheet,n=e.targetCell,r=e.options,o=void 0===r?{}:r,i=[],a={};return t.isTableMode()&&(null==o?void 0:o.showSingleTips)?[{selectedData:t.dataSet.getMultiData({}),name:"",value:""}]:(fg(function(e,t,n){var r,o=null===(r=e.facet)||void 0===r?void 0:r.layoutResult,i=function(e){var n=null==t?void 0:t.getMeta(),r=null==n?void 0:n.isTotals,i=(null==t?void 0:t.cellType)===zi.COL_CELL,a=(null==t?void 0:t.cellType)===zi.ROW_CELL;if(!i&&!a)return!1;var s=o.colNodes.find((function(t){return t.colIndex===e.colIndex})),l=o.rowNodes.find((function(t){return t.rowIndex===e.rowIndex})),c=i?null==l?void 0:l.isTotals:null==s?void 0:s.isTotals;return!r&&(null==e?void 0:e.isTotals)||r&&c};if(n){var a=function(e,t){var n,r=t.rowLeafNodes,o=t.colLeafNodes,i=e.interaction.getState(),a=i.nodes,s=void 0===a?[]:a,l=i.cells,c=void 0===l?[]:l,u=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.type;return u===zi.COL_CELL?xT(s,r,!1):u===zi.ROW_CELL?xT(s,o):[]}(e,o);return xf(Yg(a,(function(e){var t=ua(e,2),n=t[0],r=t[1],a=o.getCellMeta(n,r);if(!i(a))return(null==a?void 0:a.data)||mT(a)})))}return e.interaction.getCells().filter((function(e){var t=o.getCellMeta(e.rowIndex,e.colIndex);return!i(t)})).map((function(e){var t=o.getCellMeta(e.rowIndex,e.colIndex);return(null==t?void 0:t.data)||mT(t)}))}(t,n,o.showSingleTips),(function(e){var t;a[null==e?void 0:e[ri]]?null===(t=a[null==e?void 0:e[ri]])||void 0===t||t.push(e):a[null==e?void 0:e[ri]]=[e]})),fm(a,(function(e,n){var r,s=function(e,t,n){var r;if(n)return hw("总计");var o=null===(r=null==e?void 0:e.dataSet)||void 0===r?void 0:r.getFieldName(t);return o&&"undefined"!==o?o:""}(t,n,null==o?void 0:o.isTotals),l="",c="";if(Ng(e,(function(e){return dT(yu(e,ni))}))){var u=t.options.placeholder,d=kx(a,u);l=d,c=d}else{var h=CT(t,n),f=fT(e,ni);c=f,l=null!==(r=null==h?void 0:h(f,e))&&void 0!==r?r:parseFloat(f.toPrecision(16))}i.push({selectedData:e,name:s,value:l,originValue:c})})),i)},ST=function(e){var t=e.spreadsheet,n=e.cellInfos,r=void 0===n?[]:n,o=e.options,i=void 0===o?{}:o,a=e.targetCell,s=null,l=null,c=null,u=function(e){if(e){var t=e.getMeta();if(!t.isTotals){var n=Fg(t.spreadsheet.dataCfg.meta,{field:t.field||t.value||t.valueField}),r=null==n?void 0:n.field;return t.spreadsheet.dataSet.getFieldDescription(r)}}}(a),d=r[0]||{};if(null==i?void 0:i.hideSummary)if(i.showSingleTips){var h=CT(t,d.valueField)(d.value),f=i.enableFormat?t.dataSet.getFieldName(d.value)||h:t.dataSet.getFieldName(d.valueField);d.name=f||""}else l=function(e,t,n){var r,o,i,a,s=(n||{}).isTotals,l=[],c=[];if(t){var u=null===(o=null===(r=null==e?void 0:e.dataSet)||void 0===r?void 0:r.fields)||void 0===o?void 0:o.columns,d=null===(a=null===(i=null==e?void 0:e.dataSet)||void 0===i?void 0:i.fields)||void 0===a?void 0:a.rows;l=wT(e,Ww(u||[]),t),c=wT(e,d,t)}return Vv(l)&&Vv(c)&&s&&(l=[{value:hw("总计")}]),{cols:l,rows:c}}(t,d,i),c=function(e,t,n){if(t){var r=n.isTotals,o=t[ri],i=t[o],a=[];if(r)a.push(bT(e,{data:t,field:o,valueField:yu(t,ni)}));else if(function(e){return Wa(e)&&"values"in e}(i)&&e.getTooltipDataItemMappingCallback()){var s=vE(t,e.getTooltipDataItemMappingCallback());fg(s,(function(t,n){a.push(bT(e,{data:s,field:n}))}))}else a.push(bT(e,{data:t,field:o}));return a}}(t,d,i);else s=ET({spreadsheet:t,options:i,targetCell:a});var p=d||{};return{summaries:s,interpretation:p.interpretation,infos:p.infos,tips:p.tips,name:p.name,headInfo:l,details:c,description:u}},IT=function(e){if(!e.interaction.isSelectedState())return[];var t=e.dataCfg.fields.valueInCols;return e.interaction.getCells().reduce((function(n,r){var o=e.facet.layoutResult.getCellMeta(null==r?void 0:r.rowIndex,null==r?void 0:r.colIndex),i=mT(o);if(Vv(o)||Vv(i))return[];var a=sa(sa({},i),{colIndex:t?o.colIndex:null,rowIndex:t?null:o.rowIndex});return n.find((function(e){return Yv(a,e)}))||n.push(a),n}),[])},TT=function(e,t){var n;if(t&&e){var r=null===(n=e.getCellType)||void 0===n?void 0:n.call(e,null==t?void 0:t.target);return function(e,t){void 0===e&&(e={});var n=function(t){return IS(e,t)},r=e.col,o=e.row,i=e.data,a=e.corner;return t===zi.COL_CELL?n(r):t===zi.ROW_CELL?n(o):t===zi.DATA_CELL?n(i):t===zi.CORNER_CELL?n(a):sa({},e)}(e.options.tooltip,r)}},LT=function(e,t){var n=t.defaultMenus,r=void 0===n?[]:n,o=t.cell,i=function(e){return void 0===e&&(e=[]),e.filter((function(e){var t;return os(e.visible)?e.visible(o):null===(t=e.visible)||void 0===t||t})).map((function(e){return e.children&&(e.children=i(e.children)),e}))},a=i(e.menus);return{onClick:e.onClick,menus:xf(da(da([],ua(r),!1),ua(a),!1))}},MT=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"".concat(Ai,"-").concat(e.join("-"))},OT=function(){function e(e){var t=this;this.getFieldMeta=lu((function(e,n){return Fg(t.meta||n,(function(t){return t.field===e}))})),this.spreadsheet=e}return e.prototype.getFieldName=function(e){return yu(this.getFieldMeta(e,this.meta),"name",e)},e.prototype.getFieldFormatter=function(e){return yu(this.getFieldMeta(e,this.meta),"formatter",Ja)},e.prototype.getFieldDescription=function(e){return yu(this.getFieldMeta(e,this.meta),"description")},e.prototype.setDataCfg=function(e){this.getFieldMeta.cache.clear();var t=this.processDataCfg(e),n=t.fields,r=t.meta,o=t.data,i=t.totalData,a=t.sortParams,s=t.filterParams;this.fields=n,this.meta=r,this.originData=o,this.totalData=i,this.sortParams=a,this.filterParams=s,this.displayData=this.originData,this.indexesData=[]},e.prototype.processMeta=function(e,t){var n,r;return void 0===e&&(e=[]),da(da([],ua(e),!1),[GE(e,null===(r=null===(n=this.spreadsheet)||void 0===n?void 0:n.options)||void 0===r?void 0:r.cornerExtraFieldText,t)],!1)},e.prototype.getDisplayDataSet=function(){return this.displayData},e.prototype.getValueRangeByField=function(e){var t,n,r,o=(n=this.spreadsheet,r=e,n.store.get(Ri,Di)[r]);if(o)return o;var i=xf(Yg(this.originData,(function(t){var n=t[e];return Jv(n)?null:Number.parseFloat(n)}))),a={maxValue:vm(i),minValue:Tm(i)};return function(e,t){var n=e.store.get(Ri,Di);e.store.set(Ri,sa(sa({},n),t))}(this.spreadsheet,((t={})[e]=a,t)),a},e.prototype.moreThanOneValue=function(){var e,t;return(null===(t=null===(e=this.fields)||void 0===e?void 0:e.values)||void 0===t?void 0:t.length)>1},e}(),_T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDimensionValuesSort=function(){fg(t.sortParams,(function(e){var n=e.sortFieldId,r=e.sortByMeasure;if(n){var o=da([],ua(t.sortedDimensionValues[n]||[]),!1),i=function(e){var t,n=e.dataSet,r=e.sortParam,o=e.originValues;return t=e.isSortByMeasure?function(e){var t=e.dataSet,n=e.sortParam,r=e.originValues,o=t.fields,i=n.sortByMeasure,a=n.query,s=n.sortFieldId,l=t.getMultiData(a),c=Ww(o.columns);if(i!==ii){var u=Ef(o.rows,c);return l.filter((function(e){var t=new Set(Bc(e));return u.every((function(e){return t.has(e)}))}))}var d=vv(o.rows,s),h=ZE(d?o.rows:c),f=ZE(d?c:o.rows),p=h[h.indexOf(s)+1],g=Bc(a),v=f.filter((function(e){return!g.includes(e)})),m=l.filter((function(e){var t=new Set(Bc(e));return!!t.has(s)&&!t.has(p)&&v.every((function(e){return!t.has(e)}))}));return Vv(m)?xf(Yg(r,(function(e){var n=function(e,t,n){var r,o={};if(vv(e,Si))for(var i=wC(e,Si),a=(null===(r=null==t?void 0:t.rows)||void 0===r?void 0:r.includes(n))?t.rows:Ww(t.columns),s=0;s<=yv(a,n);s++)o[a[s]]=i[s];else o[n]=e;return o}(e,o,s);return t.getTotalValue(sa(sa({},a),n))}))):m}(e):o,KE({sortParam:r,originValues:o,measureValues:t,dataSet:n})}({dataSet:t,sortParam:e,originValues:o,isSortByMeasure:!Vv(r)});t.sortedDimensionValues[n]=i}}))},t.getCustomData=function(e){for(var n,r=!1,o=t.indexesData,i=function(t){var i=e[t];r?o=nm(i)?ax(o):null===(n=pv(o))||void 0===n?void 0:n.map((function(e){return e&&yu(e,i)})):nm(i)?r=!0:o=null==o?void 0:o[i]},a=0;a<e.length;a++)i(a);return o},t.getTotalStatus=function(e){var n=t.fields,r=n.columns,o=n.rows,i=function(t,n){if(n){var r=Fg(t,(function(t){return!sv(e,t)}));return r&&r!==Ug(t)}return Ng(t,(function(t){return!sv(e,t)}))},a=function(e,t){return t?e.filter((function(e){return e!==ri})):e};return{isRowTotal:i(a(o,!t.spreadsheet.isValueInCols())),isRowSubTotal:i(o,!0),isColTotal:i(a(r,t.spreadsheet.isValueInCols())),isColSubTotal:i(r,!0)}},t}return aa(t,e),t.prototype.setDataCfg=function(t){var n=this;e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.totalData=[].concat(cx(t.data,t.fields)).concat(this.totalData),Uw.getInstance().debugCallback("Transform Data",(function(){var e=n.fields,t=HE({rows:e.rows,columns:e.columns,originData:n.originData,totalData:n.totalData,indexesData:n.indexesData,sortedDimensionValues:n.sortedDimensionValues,rowPivotMeta:n.rowPivotMeta,colPivotMeta:n.colPivotMeta}).indexesData;n.indexesData=t})),this.handleDimensionValuesSort()},t.prototype.transformDrillDownData=function(e,t,n){var r,o=this,i=this.fields,a=i.columns,s=i.values,l=da(da([],ua(bw.getFieldPath(n,!0)),!1),[e],!1),c=this.spreadsheet.store,u=this.standardTransform(t,s),d=cx(u,{columns:this.fields.columns,rows:l}),h=og(u,d),f=null==n?void 0:n.id,p=null!==(r=c.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;p.has(f)&&(fg(p.get(f),(function(e){hb(o.indexesData,e)})),WE(this.rowPivotMeta,f));var g=HE({rows:l,columns:a,originData:h,totalData:d,indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),v=g.paths,m=g.indexesData,y=g.rowPivotMeta,C=g.colPivotMeta,b=g.sortedDimensionValues;this.indexesData=m,this.rowPivotMeta=y,this.colPivotMeta=C,this.sortedDimensionValues=b,p.set(f,v),c.set("drillDownIdPathMap",p)},t.prototype.clearDrillDownData=function(e){var t=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(r){var o=n.get("drillDownDataCache",[]);if(e){var i=r.get(e);i&&fg(i,(function(e){hb(t.indexesData,e)})),WE(this.rowPivotMeta,e),r.delete(e);var a=Dg(o,(function(e){return r.has(null==e?void 0:e.rowId)}));n.set("drillDownDataCache",a);var s=a.map((function(e){return null==e?void 0:e.drillLevel})),l=n.get("drillDownFieldInLevel",[]).filter((function(e){return vv(s,null==e?void 0:e.drillLevel)}));n.set("drillDownFieldInLevel",l)}else{r.clear();var c=this.spreadsheet.store.get("originalDataCfg");Vv(c)||this.spreadsheet.setDataCfg(c),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}n.set("drillDownIdPathMap",r)}},t.prototype.standardTransform=function(e,t){if(Vv(t))return e;var n=[];return fg(t,(function(t){fg(e,(function(e){var r;sv(e,t)&&n.push(sa(sa({},e),((r={})[ri]=t,r[ni]=e[t],r)))}))})),n},t.prototype.processDataCfg=function(e){var t=e.data,n=e.meta,r=void 0===n?[]:n,o=e.fields,i=e.sortParams,a=void 0===i?[]:i,s=e.totalData,l=o.columns,c=o.rows,u=o.values,d=o.valueInCols,h=o.customValueOrder,f=l,p=c;d?f=this.isCustomMeasuresPosition(h)?this.handleCustomMeasuresOrder(h,f):ub(da(da([],ua(l),!1),[ri],!1)):p=this.isCustomMeasuresPosition(h)?this.handleCustomMeasuresOrder(h,p):ub(da(da([],ua(c),!1),[ri],!1));var g=this.processMeta(r,hw("数值")),v=this.standardTransform(t,u),m=this.standardTransform(s,u);return{data:v,meta:g,fields:sa(sa({},o),{rows:p,columns:f,values:u}),totalData:m,sortParams:a}},t.prototype.getDimensionValues=function(e,t){var n,r,o,i,a=this.fields||{},s=a.rows,l=void 0===s?[]:s,c=a.columns,u=void 0===c?[]:c,d=new Map,h=[];if(vv(l,e)?(d=this.rowPivotMeta,h=l):vv(u,e)&&(d=this.colPivotMeta,h=u),!Vv(t)){var f=[],p=[],g=function(e){var n=yu(t,e);p.push("".concat(n));var r=p.join("".concat(Si));if(d.has(n)&&!nm(n)){var a=null===(o=d.get(n))||void 0===o?void 0:o.childField;if(d=d.get(n).children,Fg(v.sortParams,(function(e){return e.sortFieldId===a}))&&v.sortedDimensionValues[a]){var s=null===(i=v.sortedDimensionValues[a])||void 0===i?void 0:i.filter((function(e){return null==e?void 0:e.startsWith(r)}));f=FE(da([],ua(s),!1))}else f=da([],ua(d.keys()),!1)}},v=this;try{for(var m=ca(h),y=m.next();!y.done;y=m.next())g(y.value)}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}return Vv(f)?[]:ox(rx(da([],ua(d.keys()),!1),f))}return this.sortedDimensionValues[e]?ox(FE(da([],ua(this.sortedDimensionValues[e]),!1))):ox(da([],ua(d.keys()),!1))},t.prototype.getTotalValue=function(e){var t,n,r=function(e,t){var n=e.isRowTotal,r=e.isRowSubTotal,o=e.isColTotal,i=e.isColSubTotal,a=t||{},s=a.row,l=a.col,c=s||{},u=c.calcTotals,d=void 0===u?{}:u,h=c.calcSubTotals,f=void 0===h?{}:h,p=l||{},g=p.calcTotals,v=void 0===g?{}:g,m=p.calcSubTotals,y=void 0===m?{}:m,C=function(e,t){if((e.aggregation||e.calcFunc)&&t)return{aggregation:e.aggregation,calcFunc:e.calcFunc}};return C(v,o)||C(y,i)||C(d,n)||C(f,r)}(this.getTotalStatus(e),null===(n=this.spreadsheet.options)||void 0===n?void 0:n.totals)||{},o=r.aggregation,i=r.calcFunc,a=gT[o];if(a||i){var s=this.getMultiData(e),l=void 0;return i?l=i(e,s):a&&(l=a(s,ni)),sa(sa({},e),((t={})[ni]=l,t[e[ri]]=l,t))}},t.prototype.getCellData=function(e){var t,n,r,o=e||{},i=o.query,a=o.rowNode,s=o.isTotals,l=void 0!==s&&s,c=this.fields,u=c.columns,d=c.rows,h=d,f=null===(t=this.spreadsheet)||void 0===t?void 0:t.store.get("drillDownIdPathMap"),p=Array.from(null!==(n=null==f?void 0:f.keys())&&void 0!==n?n:[]).some((function(e){return a.id.startsWith(e)}));l&&!p||(h=null!==(r=bw.getFieldPath(a,p))&&void 0!==r?r:d);var g=jE({rowDimensionValues:zE(h,i),colDimensionValues:zE(u,i),careUndefined:l||lx([].concat(d).concat(u),i),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),v=yu(this.indexesData,g);return v||(l?this.getTotalValue(i):v)},t.prototype.getMultiData=function(e,t,n,r){var o;if(Vv(e))return xf(ix(this.indexesData));var i=this.fields,a=i.rows,s=i.columns,l=i.values,c=zE(Vv(r)?a:a.concat(r),e),u=zE(s,e),d=jE({rowDimensionValues:c,colDimensionValues:u,careUndefined:!0,isFirstCreate:!0,rowFields:a,colFields:s,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),h=this.getCustomData(d),f=xf(ax(h));if(t){var p=[],g=sx(c,a),v=sx(u,s);if(n)p=g;else if(1===(null===(o=Bc(e))||void 0===o?void 0:o.length)&&sv(e,ri))p=v;else{var m=function(e){return null==(t=null==e?void 0:e.filter((function(e){return!(null==l?void 0:l.includes(e))})))?void 0:t.every((function(e){return nm(e)}));var t},y=m(u),C=m(c);p=y?g:C?v:da(da([],ua(g),!1),ua(v),!1)}f=f.filter((function(e){return!(null==p?void 0:p.find((function(t){var n;return t!==ri&&(null===(n=Bc(e))||void 0===n?void 0:n.includes(t))})))}))}return f||[]},t.prototype.getFieldFormatter=function(t,n){return t===ii?this.getFieldFormatterForTotalValue(n):e.prototype.getFieldFormatter.call(this,t)},t.prototype.getFieldFormatterForTotalValue=function(t){var n;return!this.spreadsheet.isValueInCols()&&t&&(n=yu(t.rowQuery,ri)),n=null!=n?n:yu(this.fields.values,0),e.prototype.getFieldFormatter.call(this,n)},t.prototype.handleCustomMeasuresOrder=function(e,t){var n=ub(da([],ua(t),!1));return t.length>=e?(n.splice(e,0,ri),n):da(da([],ua(n),!1),[ri],!1)},t.prototype.isCustomMeasuresPosition=function(e){return Kv(e)},t.prototype.getRowData=function(e){return this.getMultiData(e.rowQuery)},t}(OT),NT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDimensionValueFilter=function(){fg(t.filterParams,(function(e){var n=e.filterKey,r=e.filteredValues,o=e.customFilter,i=function(e){return!vv(r,e[n])};t.displayData=da(da(da([],ua(t.getStartRows()),!1),ua(Dg(t.getMovableRows(),(function(e){return o?o(e)&&i(e):i(e)}))),!1),ua(t.getEndRows()),!1)}))},t.handleDimensionValuesSort=function(){fg(t.sortParams,(function(e){var n=e.sortFieldId,r=e.sortBy,o=e.sortFunc,i=e.sortMethod,a=e.query;if(n){var s=t.getMovableRows(),l=[];if(a){var c=[];s.forEach((function(e){for(var t=Object.keys(a),n=!0,r=0;r<t.length;r++){var o=t[r];if(e[o]!==a[o]){n=!1,l.push(e);break}}n&&c.push(e)})),s=c}var u=s;if(o)u=o(sa(sa({},e),{data:s}));else if(r&&!os(r)){var d=da([],ua(r),!1).reverse();u=s.sort((function(e,t){var r=d.indexOf(e[n]);return d.indexOf(t[n])-r}))}else(UE(i)||VE(i))&&(u=Wm(s,[(os(r)?r:null)||n],[i.toLocaleLowerCase()]));l.length&&(u=da(da([],ua(u),!1),ua(l),!1)),t.displayData=da(da(da([],ua(t.getStartRows()),!1),ua(u),!1),ua(t.getEndRows()),!1)}}))},t}return aa(t,e),t.prototype.processDataCfg=function(e){return e},t.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},t.prototype.getStartRows=function(){var e=(this.spreadsheet.options||{}).frozenRowCount;return e?this.displayData.slice(0,e):[]},t.prototype.getEndRows=function(){var e=(this.spreadsheet.options||{}).frozenTrailingRowCount;return e?this.displayData.slice(-e):[]},t.prototype.getMovableRows=function(){var e=this.displayData,t=this.spreadsheet.options||{},n=t.frozenTrailingRowCount,r=t.frozenRowCount;return e.slice(r||0,-n||void 0)},t.prototype.getDimensionValues=function(e,t){return[]},t.prototype.getCellData=function(e){var t=e.query;if(0!==this.displayData.length||0!==t.rowIndex){var n=this.displayData[t.rowIndex];return"col"in t&&Wa(n)?n[t.col]:n}},t.prototype.getMultiData=function(e,t){return this.displayData},t.prototype.getRowData=function(e){return this.getCellData({query:{rowIndex:e.rowIndex}})},t}(OT),AT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.getCellData=function(e){var t=e.query,n=this.fields,r=n.columns,o=n.rows,i=jE({rowDimensionValues:zE(o,t),colDimensionValues:zE(r,t),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,isFirstCreate:!0,careUndefined:!0,rowFields:o,colFields:r});return yu(this.indexesData,i)},t.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map;var n=this.fields,r=HE({rows:n.rows,columns:n.columns,originData:this.originData,totalData:[],indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}).indexesData;this.indexesData=r,this.handleDimensionValuesSort()},t.prototype.processDataCfg=function(e){e.fields.valueInCols=!1;var t=e.data,n=e.meta,r=la(e,["data","meta"]),o=e.fields.values,i=[];fg(t,(function(e){Vv(xv(Bc(e),o))?i.push(e):fg(o,(function(t){var n;sv(e,t)&&i.push(sa(sa({},e),((n={})[ri]=t,n[ni]=e[t],n)))}))}));var a=this.processMeta(n,hw("指标"));return sa(sa({},r),{meta:a,data:ub(i),fields:sa(sa({},e.fields),{rows:[ri]})})},t}(_T);!function(e){e.ScrollChange="scroll-change",e.ScrollEnd="scroll-end"}(uT||(uT={}));var RT=function(e){function t(t){var n=e.call(this,t)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.getCoordinatesWithBBoxExtraPadding=function(){var e=n.theme.size,t=n.isHorizontal?0:e/2,r=n.isHorizontal?e:e/2;return{start:n.thumbOffset+t,end:n.thumbOffset+n.thumbLen-r}},n.current=function(){var e=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-e)},n.updateThumbLen=function(e){if(n.thumbLen!==e){n.thumbLen=e;var t=n.getCoordinatesName();n.thumbShape.attr(t.to,n.thumbOffset+e),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(e,t){var r;void 0===t&&(t=!0);var o=n.validateRange(e);if(n.thumbOffset!==o||0===o){n.thumbOffset=o;var i=n.getCoordinatesName(),a=i.from,s=i.to,l=n.getCoordinatesWithBBoxExtraPadding(),c=l.start,u=l.end;n.thumbShape.attr(((r={})[a]=c,r[s]=u,r)),t&&n.emitScrollChange(o/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(e){var t;n.updateThumbOffset(e,!1),null===(t=n.get("canvas"))||void 0===t||t.draw()},n.emitScrollChange=function(e,t){void 0===t&&(t=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){n.emit(uT.ScrollChange,{offset:e,updateThumbOffset:t})}))},n.addEventListener=function(e,t,n){return null==e||e.addEventListener(t,n,!1),{remove:function(){null==e||e.removeEventListener(t,n,!1)}}},n.addEvent=function(e,t,r){e.on(t,r),n.eventHandlers.push({target:e,type:t,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var e=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(e),n.thumbShape=n.createThumbShape(e),e},n.createTrackShape=function(e){var t=n.theme,r=t.lineCap,o=void 0===r?"round":r,i=t.trackColor,a=t.size,s={lineWidth:a,stroke:i,lineCap:o};return n.isHorizontal?e.addShape("line",{attrs:sa(sa({},s),{x1:0,y1:a/2,x2:n.trackLen,y2:a/2})}):e.addShape("line",{attrs:sa(sa({},s),{x1:a/2,y1:0,x2:a/2,y2:n.trackLen})})},n.createThumbShape=function(e){var t=n.theme,r=t.size,o=t.lineCap,i=void 0===o?"round":o,a={lineWidth:r,stroke:t.thumbColor,lineCap:i,cursor:"default"},s=n.getCoordinatesWithBBoxExtraPadding(),l=s.start,c=s.end;return n.isHorizontal?e.addShape("line",{attrs:sa(sa({},a),{x1:l,y1:r/2,x2:c,y2:r/2})}):e.addShape("line",{attrs:sa(sa({},a),{x1:r/2,y1:l,x2:r/2,y2:c})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(e){return function(t){t.preventDefault(),n.isMobile=e;var r=n.isMobile?yu(t,"touches.0",t):t,o=r.clientX,i=r.clientY;n.startPos=n.isHorizontal?o:i,n.bindLaterEvent()}},n.bindLaterEvent=function(){var e=n.get("canvas"),t=document.body,r=[];n.isMobile?(r=[n.addEventListener(t,"touchmove",n.onMouseMove),n.addEventListener(t,"touchend",n.onMouseUp),n.addEventListener(t,"touchcancel",n.onMouseUp)],n.addEvent(e,"touchend",n.onMouseUp),n.addEvent(e,"touchcancel",n.onMouseUp)):(r=[n.addEventListener(t,"mousemove",n.onMouseMove),n.addEventListener(t,"mouseup",n.onMouseUp),n.addEventListener(t,"mouseleave",n.onMouseUp)],n.addEvent(e,"mouseup",n.onMouseUp)),n.clearEvents=function(){r.forEach((function(e){null==e||e.remove()})),fg(n.eventHandlers,(function(e){var t;null===(t=e.target)||void 0===t||t.off(e.type,e.handler)})),n.eventHandlers.length=0}},n.onTrackClick=function(e){var t=n.isHorizontal?e.x-n.position.x-n.thumbLen/2:e.y-n.position.y-n.thumbLen/2,r=n.validateRange(t);n.updateThumbOffset(r)},n.onMouseMove=function(e){e.preventDefault();var t=n.isMobile?yu(e,"touches.0",e):e,r=t.clientX,o=t.clientY,i=n.isHorizontal?r:o,a=i-n.startPos;n.startPos=i,n.updateThumbOffset(n.thumbOffset+a)},n.onMouseUp=function(e){var t;n.emit(uT.ScrollEnd,{}),e.preventDefault(),null===(t=n.clearEvents)||void 0===t||t.call(n)},n.onTrackMouseOver=function(){var e=n.theme,t=e.thumbHoverColor,r=e.hoverSize;n.thumbShape.attr("stroke",t),n.thumbShape.attr("lineWidth",r)},n.onTrackMouseOut=function(){var e=n.theme,t=e.thumbColor,r=e.size;n.thumbShape.attr("stroke",t),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(e){var t=e;return e+n.thumbLen>n.trackLen?t=n.trackLen-n.thumbLen:e+n.thumbLen<n.thumbLen&&(t=0),t};var r=t.isHorizontal,o=void 0!==r&&r,i=t.trackLen,a=t.thumbLen,s=t.position,l=t.thumbOffset,c=void 0===l?0:l,u=t.theme,d=t.scrollTargetMaxOffset;return n.isHorizontal=o,n.thumbOffset=c,n.trackLen=i,n.thumbLen=a,n.position=s,n.theme=u,n.scrollTargetMaxOffset=d,n.initScrollBar(),n}return aa(t,e),t}(vo),DT=function(e,t,n){return e.filter((function(e){return e.level>=t})).map((function(e){return e[n]})).reduce((function(e,t){return e+t}),0)},PT=function(e,t,n){if(n<=0)return{start:0,end:0};var r=Bg(e,(function(n,r){return t>=n&&t<e[r+1]}),0);r=Math.max(r,0);var o=n===t?r:Bg(e,(function(t,r){return n>t&&n<=e[r+1]}),r);return{start:r,end:o=Math.min(-1===o?1/0:o,e.length-2)}},kT=function(e,t){var n=t.width,r=t.originalWidth,o=Math.min(r-n,e);return o<0?0:o},BT=function(e,t,n){var r=Math.min(t-n,e);return r<0?0:r},FT=function(e,t){if(void 0===e&&(e=[]),Vv(e))return[];var n=[];return e.forEach((function(e){e instanceof t&&n.push(e),e instanceof vo&&e.getChildren().forEach((function(e){e instanceof t&&n.push(e)}))})),n},jT=function(e,t,n){return n.slice(e,t+1).map((function(e){return e.x+e.width}))},zT=function(e,t,n){for(var r=[],o=e;o<t+1;o++)r.push(n.getCellOffsetY(o+1));return r},HT=function(e,t,n){var r=ua(n,4),o=r[0],i=r[1],a=r[2],s=r[3];return e>=o&&e<=i&&t>=a&&t<=s},WT=function(e){for(var t=ua(e,4),n=t[0],r=t[1],o=t[2],i=t[3],a=[],s=n;s<=r;s+=1)for(var l=o;l<=i;l+=1)a.push([s,l]);return a},GT=function(e,t){void 0===t&&(t=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=e,this.spreadsheet=e.spreadsheet,this.layoutResult=e.layoutResult,t&&this.calculateBBox()},UT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.calculateBBox=function(){var e=this.getCornerBBoxWidth(),t=this.getCornerBBoxHeight();this.width=e,this.height=t,this.maxX=e,this.maxY=t},t.prototype.getCornerBBoxOriginalHeight=function(){var e=this.layoutResult.colsHierarchy,t=this.spreadsheet.options.style.colCfg;return e.sampleNodeForLastLevel?Math.floor(e.height):null==t?void 0:t.height},t.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},t.prototype.getCornerBBoxWidth=function(){var e=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(e.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},t.prototype.adjustCornerBBoxWidth=function(){var e=this.layoutResult.colsHierarchy,t=this.spreadsheet.options.width,n=.5*t,r=null==e?void 0:e.width,o=t-this.originalWidth;if(this.originalWidth<=n||r<=o)return this.originalWidth;var i;return i=r<=t-n?this.originalWidth-(r-o):n,Math.floor(i)},t}(GT),VT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var e=this.facet.cornerBBox,t={x:Math.floor(e.maxX),y:Math.floor(e.maxY)},n=this.spreadsheet.theme.scrollBar.size,r=this.spreadsheet.options,o=r.width,i=r.height,a=Math.max(0,o-t.x),s=Math.max(0,i-t.y-n);this.x=t.x,this.y=t.y,this.width=a,this.height=s,this.viewportHeight=Math.abs(Math.floor(Math.min(s,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(a,this.originalWidth))),this.maxX=t.x+this.viewportWidth,this.maxY=t.y+this.viewportHeight,this.minX=t.x,this.minY=t.y;var l=this.spreadsheet.options,c=l.frozenTrailingColCount,u=l.frozenTrailingRowCount;c>0&&(this.viewportWidth=this.width,this.maxX=t.x+this.width),u>0&&(this.viewportHeight=this.height,this.maxY=t.y+this.height)},t}(GT),YT=function(e){function t(t){var n=e.call(this,t)||this;return n.isHeaderCellInViewport=function(e,t,n,r){return e+t>=n&&n+r>=e},n.headerConfig=t,n}return aa(t,e),t.prototype.getConfig=function(){return this.headerConfig},t.prototype.clearResizeAreaGroup=function(e){var t=this.get("parent"),n=null==t?void 0:t.findById(e);null==n||n.clear()},t.prototype.render=function(e){this.clearResizeAreaGroup(e),this.clear(),this.layout(),this.offset(),this.clip()},t.prototype.onScrollXY=function(e,t,n){this.headerConfig.scrollX=e,this.headerConfig.scrollY=t,this.render(n)},t.prototype.onRowScrollX=function(e,t){this.headerConfig.scrollX=e,this.render(t)},t.prototype.clear=function(){e.prototype.clear.call(this)},t}(vo),$T=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollGroup=n.addGroup({name:"colScrollGroup",zIndex:3}),n}return aa(t,e),t.prototype.onColScroll=function(e,t){this.headerConfig.scrollX!==e&&(this.headerConfig.scrollX=e,this.render(t))},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.height,r=e.scrollX,o=e.spreadsheet.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:o?r:0,y:0,width:o?t:t+r,height:n}})},t.prototype.clear=function(){var e,t;null===(e=this.scrollGroup)||void 0===e||e.clear(),null===(t=this.background)||void 0===t||t.remove(!0)},t.prototype.getCellInstance=function(e,t,n){return new eS(e,t,n)},t.prototype.getCellGroup=function(e){return this.scrollGroup},t.prototype.isColCellInRect=function(e){var t=this.headerConfig,n=t.spreadsheet,r=t.cornerWidth,o=t.width,i=t.scrollX;return o+i>e.x&&i-(n.isFrozenRowHeader()?0:r)<e.x+e.width},t.prototype.layout=function(){var e=this,t=this.headerConfig,n=t.data,r=t.spreadsheet,o=r.options.colCell;fg(n,(function(t){var n=t;if(e.isColCellInRect(n)){var i=(null==o?void 0:o(n,r,e.headerConfig))||e.getCellInstance(n,r,e.headerConfig);n.belongsCell=i,e.getCellGroup(n).add(i)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.position,n=e.scrollX;Fw(this.scrollGroup,t.x-n)},t}(YT),XT=function(e){function t(t){return e.call(this,t)||this}return aa(t,e),t.getCornerHeader=function(e,n,r,o,i,a){var s=e.width,l=e.height,c=n.originalWidth,u=n.originalHeight,d=n.width,h=n.height;return new t({data:this.getCornerNodes({x:n.x,y:n.y},c,u,o.rows,o.columns,i.rowsHierarchy,i.colsHierarchy,o.dataSet,r,a),position:{x:n.x,y:n.y},width:d,height:h,originalHeight:u,originalWidth:c,viewportWidth:s,viewportHeight:l,hierarchyType:o.hierarchyType,hierarchyCollapse:o.hierarchyCollapse,rows:o.rows,columns:o.columns,seriesNumberWidth:r,spreadsheet:a})},t.getCornerNodes=function(e,t,n,r,o,i,a,s,l,c){var u,d,h,f=[],p=c.options.style.colCfg,g=null==a?void 0:a.sampleNodeForLastLevel,v=null!==(u=null==g?void 0:g.y)&&void 0!==u?u:0,m=null!==(h=null!==(d=null==g?void 0:g.height)&&void 0!==d?d:null==p?void 0:p.height)&&void 0!==h?h:0;if(l){var y=new bw({id:"",key:"series-number-node",value:hw("序号")});y.x=null==e?void 0:e.x,y.y=v,y.width=l,y.height=m,y.isPivotMode=!0,y.spreadsheet=c,y.cornerType=Zw.Series,f.push(y)}if(c.isHierarchyTreeType()){var C=this.getTreeCornerText(c),b=new bw({key:"",id:"",value:C});b.x=e.x+l,b.y=v,b.width=t-l,b.height=m,b.seriesNumberWidth=l,b.isPivotMode=!0,b.spreadsheet=c,b.cornerType=Zw.Row,f.push(b)}else i.sampleNodesForAllLevels.forEach((function(e){var t=r[e.level],n=new bw({key:t,id:"",value:s.getFieldName(t)});n.x=e.x+l,n.y=v,n.width=e.width,n.height=m,n.field=t,n.isPivotMode=!0,n.cornerType=Zw.Row,n.spreadsheet=c,f.push(n)}));return a.sampleNodesForAllLevels.forEach((function(n){if(n.level<a.maxLevel){var r=o[n.level],i=new bw({key:r,id:"",value:s.getFieldName(r)});i.x=e.x,i.y=n.y,i.width=t,i.height=n.height,i.field=r,i.isPivotMode=!0,i.cornerType=Zw.Col,i.spreadsheet=c,f.push(i)}})),f},t.getTreeCornerText=function(e){var t=e.dataSet.fields.rows,n=void 0===t?[]:t,r=e.options.cornerText;if(r)return r;var o=e.store.get("drillDownFieldInLevel",[]).map((function(e){return e.drillField}));return n.filter((function(e){return!vv(o,e)})).map((function(t){return e.dataSet.getFieldName(t)})).join("/")},t.prototype.onCorScroll=function(e,t){this.headerConfig.scrollX=e,this.render(t)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.layout=function(){this.renderCells()},t.prototype.renderCells=function(){var e,t,n,r,o=this,i=this.headerConfig,a=i.data,s=i.spreadsheet,l=null===(t=null===(e=null==s?void 0:s.facet)||void 0===e?void 0:e.cfg)||void 0===t?void 0:t.cornerHeader,c=null===(r=null===(n=null==s?void 0:s.facet)||void 0===n?void 0:n.cfg)||void 0===r?void 0:r.cornerCell;l?l(this,s,this.headerConfig):a.forEach((function(e){var t;c&&(t=c(e,o.headerConfig.spreadsheet,o.headerConfig)),Vv(t)&&(t=new tS(e,o.headerConfig.spreadsheet,o.headerConfig)),o.add(t)}))},t.prototype.offset=function(){var e=this.headerConfig.scrollX;Fw(this,-e)},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.height,r=e.scrollX;this.setClip({type:"rect",attrs:{x:r,y:0,width:t,height:n}})},t.prototype.getNodes=function(){return this.headerConfig.data||[]},t}(YT),qT=function(e){function t(t){var n=e.call(this,t)||this;return n.render(),n}return aa(t,e),t.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},t.prototype.render=function(){this.clear(),this.layout()},t.prototype.onBorderScroll=function(e){this.cfg.scrollX=e;var t=this.cfg.position;Bw(this,t.x-e,0),this.render()},t.prototype.onChangeShadowVisibility=function(e,t){this.cfg.showViewportLeftShadow=e>0,this.cfg.showViewportRightShadow=Math.floor(e)<Math.floor(t),this.render()},t.prototype.addCornerRightBorder=function(){var e,t=this.cfg;if(t.isPivotMode){var n=t.width,r=t.height,o=t.viewportHeight,i=t.position,a=null===(e=t.spreadsheet.theme)||void 0===e?void 0:e.splitLine,s=i.x+n,l=i.y,c=i.y+r+o;this.addShape("line",{attrs:{x1:s,y1:l,x2:s,y2:c,stroke:a.verticalBorderColor,lineWidth:a.verticalBorderWidth,opacity:a.verticalBorderColorOpacity}})}},t.prototype.addCornerBottomBorder=function(){var e,t=this.cfg,n=t.width,r=t.height,o=t.viewportWidth,i=t.position,a=t.scrollX,s=t.scrollContainsRowHeader,l=null===(e=t.spreadsheet.theme)||void 0===e?void 0:e.splitLine,c=i.x,u=c+n+o+(s?a:0),d=i.y+r-1;this.addShape("line",{attrs:{x1:c,y1:d,x2:u,y2:d,stroke:l.horizontalBorderColor,lineWidth:l.horizontalBorderWidth,opacity:l.horizontalBorderColorOpacity}})},t.prototype.addSplitLineShadow=function(){var e,t=this.cfg,n=t.isPivotMode,r=t.spreadsheet,o=null===(e=r.theme)||void 0===e?void 0:e.splitLine;n&&o.showShadow&&r.isFrozenRowHeader()&&(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},t.prototype.addSplitLineLeftShadow=function(){var e,t,n;if(this.cfg.showViewportLeftShadow){var r=this.cfg,o=r.width,i=r.height,a=r.viewportHeight,s=r.position,l=null===(e=r.spreadsheet.theme)||void 0===e?void 0:e.splitLine,c=s.x+o,u=s.y;this.addShape("rect",{attrs:{x:c,y:u,width:l.shadowWidth,height:a+i,fill:"l (0) 0:".concat(null===(t=l.shadowColors)||void 0===t?void 0:t.left," 1:").concat(null===(n=l.shadowColors)||void 0===n?void 0:n.right)}})}},t.prototype.addSplitLineRightShadow=function(){var e,t,n;if(this.cfg.showViewportRightShadow){var r=this.cfg,o=r.width,i=r.height,a=r.viewportHeight,s=r.viewportWidth,l=r.position,c=null===(e=r.spreadsheet.theme)||void 0===e?void 0:e.splitLine,u=l.x+o+s-c.shadowWidth,d=l.y;this.addShape("rect",{attrs:{x:u,y:d,width:c.shadowWidth,height:a+i,fill:"l (0) 0:".concat(null===(t=c.shadowColors)||void 0===t?void 0:t.right," 1:").concat(null===(n=c.shadowColors)||void 0===n?void 0:n.left)}})}},t}(vo),KT=function(e){function t(t){return e.call(this,t)||this}return aa(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gm&&this.gm.destroy()},t.prototype.layout=function(){var e,t,n=this,r=this.headerConfig,o=r.data,i=r.spreadsheet,a=r.width,s=r.viewportHeight,l=r.seriesNumberWidth,c=r.scrollY,u=r.scrollX,d=null===(t=null===(e=null==i?void 0:i.facet)||void 0===e?void 0:e.cfg)||void 0===t?void 0:t.rowCell;fg(o,(function(e){if(function(e){return s+c>e.y&&c<e.y+e.height&&a-l+u>e.x&&u-l<e.x+e.width}(e)&&0!==e.height){var t=void 0;d&&(t=d(e,i,n.headerConfig)),Vv(t)&&i.isPivotMode()&&(t=new dS(e,i,n.headerConfig)),e.belongsCell=t,n.add(t)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.scrollX,n=e.scrollY,r=e.position,o=e.seriesNumberWidth;Bw(this,r.x-t+o,r.y-n)},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.viewportHeight,r=e.scrollX,o=e.scrollY,i=e.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:r-i,y:o,width:t,height:n}})},t}(YT),ZT=function(e){function t(t){return e.call(this,t)||this}return aa(t,e),t.getSeriesNumberHeader=function(e,n,r,o,i){var a=e.height,s=e.viewportHeight,l=[],c=o.isHierarchyTreeType();return r.forEach((function(e){if(!e.isTotals||c){var t=new bw({id:"",key:"",value:"".concat(l.length+1)});t.x=e.x,t.y=e.y,t.height=e.height,t.width=n,l.push(t)}})),new t({width:i,height:a,viewportWidth:i,viewportHeight:s,position:{x:0,y:e.y},data:l,spreadsheet:o})},t.prototype.clip=function(){var e=this.headerConfig,t=e.width,n=e.viewportHeight,r=e.scrollY;this.setClip({type:"rect",attrs:{x:0,y:r,width:t,height:n}})},t.prototype.layout=function(){var e=this,t=this.headerConfig,n=t.data,r=t.scrollY,o=t.viewportHeight;t.spreadsheet.isPivotMode&&this.addBackGround();var i=this.addGroup();fg(n,(function(t){var n=t.y,a=t.height,s=t.isLeaf;if(e.isHeaderCellInViewport(n,a,r,o)){var l=e.addGroup();e.addText(l,t),e.add(l),s||e.addBorder(i,t)}}))},t.prototype.offset=function(){var e=this.headerConfig,t=e.scrollY,n=e.scrollX,r=e.position;Bw(this,r.x-n,r.y-t),this.backgroundShape&&this.backgroundShape.translate(r.x,r.y+t),this.leftBorderShape&&this.leftBorderShape.translate(r.x,r.y+t)},t.prototype.addBackGround=function(){var e=this.getStyle().cell,t=this.headerConfig,n=t.position,r=t.width,o=t.viewportHeight;this.backgroundShape=hx(this,{x:n.x,y:-n.y,width:r,height:o,fill:e.backgroundColor,stroke:"transparent",opacity:e.backgroundColorOpacity});var i=_x(qw.LEFT,{x:n.x,y:-n.y,width:r,height:o},e),a=i.position,s=i.style;this.leftBorderShape=gx(this,a,s)},t.prototype.addBorder=function(e,t){var n=this.getStyle().cell,r=_x(qw.BOTTOM,t,n);gx(e,r.position,r.style)},t.prototype.getStyle=function(){return this.headerConfig.spreadsheet.theme.rowCell},t.prototype.addText=function(e,t){var n=this.headerConfig,r=n.scrollY,o=n.viewportHeight,i=sa(sa({},this.getStyle().seriesText),{textBaseline:"top"}),a=t.label,s=t.x,l=t.y,c=t.width,u=t.height,d=this.getTextPadding(a,c),h=uS(l+d.top,u-d.top-d.bottom,r,o,i.fontSize);e.addShape("text",{attrs:sa(sa({x:s+d.left,y:h,text:a},i),{cursor:"pointer"})})},t.prototype.getTextPadding=function(e,t){var n=this.getStyle(),r=this.headerConfig.spreadsheet.measureTextWidth(e,n.seriesText),o=Math.max(Math.abs((t-r)/2),4);return sa(sa({},n.cell.padding),{left:o,right:o})},t}(YT),QT=function(){function e(e){var t=this;this.scrollFrameId=null,this.hideScrollBar=function(){var e,n,r;null===(e=t.hRowScrollBar)||void 0===e||e.hide(),null===(n=t.hScrollBar)||void 0===n||n.hide(),null===(r=t.vScrollBar)||void 0===r||r.hide()},this.delayHideScrollBar=Pp(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){yw()&&t.delayHideScrollBar()},this.showVerticalScrollBar=function(){var e;null===(e=t.vScrollBar)||void 0===e||e.show()},this.showHorizontalScrollBar=function(){var e,n;null===(e=t.hRowScrollBar)||void 0===e||e.show(),null===(n=t.hScrollBar)||void 0===n||n.show()},this.onContainerWheel=function(){t.onContainerWheelForPc(),t.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var e=t.spreadsheet.getCanvasElement();null==e||e.addEventListener("wheel",t.onWheel)},this.onContainerWheelForMobile=function(){t.mobileWheel=new cS(t.spreadsheet.container),t.mobileWheel.on("wheel",(function(e){t.spreadsheet.hideTooltip();var n=e.event,r=e.deltaX,o=e.deltaY,i=e.x,a=e.y;t.onWheel(sa(sa({},n),{deltaX:r,deltaY:o,offsetX:i,offsetY:a}))}))},this.bindEvents=function(){t.onContainerWheel(),t.emitPaginationEvent()},this.setScrollOffset=function(e){Object.keys(e).forEach((function(n){var r=e[n];nm(r)||t.spreadsheet.store.set(n,Math.floor(r))}))},this.getScrollOffset=function(){var e=t.spreadsheet.store;return{scrollX:e.get("scrollX",0),scrollY:e.get("scrollY",0),rowHeaderScrollX:e.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var e=t.cfg.pagination;if(e){var n=e.current,r=void 0===n?1:n,o=e.pageSize,i=t.viewCellHeights.getTotalLength(),a=Math.floor((i-1)/o)+1;t.cfg.spreadsheet.emit(Jo.LAYOUT_PAGINATION,{pageSize:o,pageCount:a,total:i,current:r})}},this.unbindEvents=function(){var e=t.spreadsheet.getCanvasElement();null==e||e.removeEventListener("wheel",t.onWheel),t.mobileWheel.destroy()},this.clipPanelGroup=function(){var e;t.foregroundGroup=t.spreadsheet.foregroundGroup,t.backgroundGroup=t.spreadsheet.backgroundGroup,t.panelGroup=t.spreadsheet.panelGroup;var n=t.panelBBox,r=n.width,o=n.height;null===(e=t.spreadsheet.panelScrollGroup)||void 0===e||e.setClip({type:"rect",attrs:{x:0,y:t.cornerBBox.height,width:r,height:o}})},this.calculateCellWidthHeight=function(){var e=Ky(t.layoutResult.colLeafNodes,(function(e,t){return e.push(ig(e)+t.width),e}),[0]);t.viewCellWidths=e,t.viewCellHeights=t.getViewCellHeights(t.layoutResult)},this.getRealScrollX=function(e,n){return void 0===n&&(n=0),t.cfg.spreadsheet.isScrollContainsRowHeader()?e:n},this.calculatePanelBBox=function(){t.panelBBox=new VT(t,!0)},this.getRealWidth=function(){return ig(t.viewCellWidths)},this.getRealHeight=function(){var e=t.cfg.pagination,n=t.viewCellHeights;if(e){var r=t.getCellRange(),o=r.start,i=r.end;return n.getCellOffsetY(i+1)-n.getCellOffsetY(o)}return n.getTotalHeight()},this.clearAllGroup=function(){for(var e=t.panelGroup.getChildren()||[],n=e.length-1;n>=0;n--){var r=e[n];r instanceof vo?r.set("children",[]):e[n].remove()}t.foregroundGroup.set("children",[]),t.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(e,n,r){var o,i,a,s;void 0===e&&(e={}),void 0===n&&(n=200);var l=t.getAdjustedScrollOffset({scrollX:(null===(o=e.offsetX)||void 0===o?void 0:o.value)||0,scrollY:(null===(i=e.offsetY)||void 0===i?void 0:i.value)||0,rowHeaderScrollX:(null===(a=e.rowHeaderOffsetX)||void 0===a?void 0:a.value)||0}),c=l.scrollX,u=l.scrollY,d=l.rowHeaderScrollX;null===(s=t.timer)||void 0===s||s.stop();var h=t.getScrollOffset(),f=[null!=c?c:h.scrollX,null!=u?u:h.scrollY,null!=d?d:h.rowHeaderScrollX],p=Xt(Object.values(h),f);t.timer=ct((function(e){var o=Math.min(e/n,1),i=ua(p(o),3),a=i[0],s=i[1],l=i[2];t.setScrollOffset({rowHeaderScrollX:l,scrollX:a,scrollY:s}),t.startScroll(),e>n&&(t.timer.stop(),null==r||r())}))},this.scrollImmediately=function(e){var n,r,o;void 0===e&&(e={});var i=t.getAdjustedScrollOffset({scrollX:(null===(n=e.offsetX)||void 0===n?void 0:n.value)||0,scrollY:(null===(r=e.offsetY)||void 0===r?void 0:r.value)||0,rowHeaderScrollX:(null===(o=e.rowHeaderOffsetX)||void 0===o?void 0:o.value)||0}),a=i.scrollX,s=i.scrollY,l=i.rowHeaderScrollX;t.setScrollOffset({scrollX:a,scrollY:s,rowHeaderScrollX:l}),t.startScroll()},this.startScroll=function(e){var n,r,o;void 0===e&&(e=!1);var i=t.getScrollOffset(),a=i.rowHeaderScrollX,s=i.scrollX,l=i.scrollY;null===(n=t.hRowScrollBar)||void 0===n||n.onlyUpdateThumbOffset(t.getScrollBarOffset(a,t.hRowScrollBar)),null===(r=t.hScrollBar)||void 0===r||r.onlyUpdateThumbOffset(t.getScrollBarOffset(s,t.hScrollBar)),null===(o=t.vScrollBar)||void 0===o||o.onlyUpdateThumbOffset(t.getScrollBarOffset(l,t.vScrollBar)),t.dynamicRenderCell(e)},this.getRendererHeight=function(){var e=t.getCellRange(),n=e.start,r=e.end;return t.viewCellHeights.getCellOffsetY(r+1)-t.viewCellHeights.getCellOffsetY(n)},this.getAdjustedScrollOffset=function(e){var n=e.scrollX,r=e.scrollY,o=e.rowHeaderScrollX;return{scrollX:BT(n,t.layoutResult.colsHierarchy.width,t.panelBBox.width),scrollY:BT(r,t.getRendererHeight(),t.panelBBox.height),rowHeaderScrollX:kT(o,t.cornerBBox)}},this.renderRowScrollBar=function(e){if(!t.cfg.spreadsheet.isScrollContainsRowHeader()&&t.cornerBBox.width<t.cornerBBox.originalWidth){var n=t.cornerBBox.originalWidth-t.cornerBBox.width,r=t.getScrollbarPosition().maxY,o=t.spreadsheet.theme,i=o.splitLine,a=o.scrollBar,s=Math.max(t.cornerBBox.width*t.cornerBBox.width/t.cornerBBox.originalWidth,null==a?void 0:a.thumbHorizontalMinSize),l=s-(null==i?void 0:i.verticalBorderWidth);t.hRowScrollBar=new RT({isHorizontal:!0,trackLen:t.cornerBBox.width,thumbLen:l,position:{x:t.cornerBBox.minX+t.scrollBarSize/2,y:r},thumbOffset:e*(t.cornerBBox.width-s)/n,theme:t.scrollBarTheme,scrollTargetMaxOffset:n}),t.hRowScrollBar.on(uT.ScrollChange,(function(e){var r,o,i=e.offset,a=t.getValidScrollBarOffset(i,n),s=Math.floor(a);t.setScrollOffset({rowHeaderScrollX:s}),null===(r=t.rowHeader)||void 0===r||r.onRowScrollX(s,pi),null===(o=t.rowIndexHeader)||void 0===o||o.onRowScrollX(s,mi),t.cornerHeader.onRowScrollX(s,yi);var l=t.getScrollBarOffset(s,t.hRowScrollBar),c=t.getScrollOffset(),u={scrollX:c.scrollX,scrollY:c.scrollY,rowHeaderScrollX:l};t.hRowScrollBar.updateThumbOffset(l,!1),t.spreadsheet.emit(Jo.ROW_CELL_SCROLL,u),t.spreadsheet.emit(Jo.GLOBAL_SCROLL,u)})),t.foregroundGroup.add(t.hRowScrollBar)}},this.getValidScrollBarOffset=function(e,t){return Jd(e,0,t)},this.renderHScrollBar=function(e,n,r){if(Math.floor(e)<Math.floor(n)){var o=t.scrollBarSize/2,i=t.getScrollbarPosition().maxY,a=e+(t.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(t.cornerBBox.width,t.getCanvasHW().width):0),s={x:t.panelBBox.minX+(t.cfg.spreadsheet.isScrollContainsRowHeader()?-t.cornerBBox.width+o:o),y:i},l=n+(t.cfg.spreadsheet.isScrollContainsRowHeader()?t.cornerBBox.width:0),c=t.spreadsheet.theme.scrollBar,u=l-a,d=Math.max(a/l*a,null==c?void 0:c.thumbHorizontalMinSize);t.hScrollBar=new RT({isHorizontal:!0,trackLen:a,thumbLen:d,position:s,thumbOffset:r*(a-d)/u,theme:t.scrollBarTheme,scrollTargetMaxOffset:u}),t.hScrollBar.on(uT.ScrollChange,(function(e){var n=e.offset,r=e.updateThumbOffset,o=t.getValidScrollBarOffset(n,u);r&&t.hScrollBar.updateThumbOffset(t.getScrollBarOffset(o,t.hScrollBar),!1),t.setScrollOffset({scrollX:o}),t.dynamicRenderCell()})),t.foregroundGroup.add(t.hScrollBar)}},this.getScrollbarPosition=function(){var e=t.panelBBox,n=e.maxX,r=e.maxY,o=t.getCanvasHW(),i=o.width,a=o.height,s=t.spreadsheet.options.interaction.scrollbarPosition===qi.CONTENT;return{maxX:(s?n:i)-t.scrollBarSize,maxY:s?r:a-t.scrollBarSize}},this.renderVScrollBar=function(e,n,r){if(e<n){var o=t.spreadsheet.theme.scrollBar,i=Math.max(e/n*e,null==o?void 0:o.thumbVerticalMinSize),a=n-e,s=t.getScrollbarPosition().maxX;t.vScrollBar=new RT({isHorizontal:!1,trackLen:e,thumbLen:i,thumbOffset:r*(e-i)/a,position:{x:s,y:t.panelBBox.minY},theme:t.scrollBarTheme,scrollTargetMaxOffset:a}),t.vScrollBar.on(uT.ScrollChange,(function(e){var n=e.offset,r=e.updateThumbOffset,o=t.getValidScrollBarOffset(n,a);r&&t.vScrollBar.updateThumbOffset(t.getScrollBarOffset(o,t.vScrollBar),!1),t.setScrollOffset({scrollY:o}),t.dynamicRenderCell()})),t.foregroundGroup.add(t.vScrollBar)}},this.getScrollBarOffset=function(e,t){return e*(t.trackLen-t.thumbLen)/t.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(e){var n=e.offsetX,r=e.offsetY;return n>t.panelBBox.minX&&n<t.panelBBox.maxX&&r>t.panelBBox.minY&&r<t.panelBBox.maxY},this.isScrollOverTheCornerArea=function(e){var n=e.offsetX,r=e.offsetY;return n>t.cornerBBox.minX&&n<t.cornerBBox.maxX&&r>t.cornerBBox.minY&&r<t.cornerBBox.maxY+t.panelBBox.height},this.updateHorizontalRowScrollOffset=function(e){var n,r=e.offset,o=e.offsetX,i=e.offsetY;t.isScrollOverTheCornerArea({offsetX:o,offsetY:i})&&(null===(n=t.hRowScrollBar)||void 0===n||n.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(e){var n,r=e.offset,o=e.offsetX,i=e.offsetY;t.hRowScrollBar&&!t.isScrollOverThePanelArea({offsetX:o,offsetY:i})||null===(n=t.hScrollBar)||void 0===n||n.emitScrollChange(r)},this.isScrollToLeft=function(e){var n=e.deltaX,r=e.offsetX,o=e.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var i=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:o,offsetX:r})||t.hRowScrollBar.thumbOffset<=0,a=!t.hScrollBar||t.hScrollBar.thumbOffset<=0;return n<=0&&a&&i},this.isScrollToRight=function(e){var n,r,o,i,a,s,l=e.deltaX,c=e.offsetX,u=e.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var d=t.spreadsheet.isFrozenRowHeader()?null===(n=t.panelBBox)||void 0===n?void 0:n.width:null===(r=t.panelBBox)||void 0===r?void 0:r.maxX,h=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:u,offsetX:c})||(null===(o=t.hRowScrollBar)||void 0===o?void 0:o.thumbOffset)+(null===(i=t.hRowScrollBar)||void 0===i?void 0:i.thumbLen)>=t.cornerBBox.width,f=t.hRowScrollBar&&t.isScrollOverTheCornerArea({offsetX:c,offsetY:u})||(null===(a=t.hScrollBar)||void 0===a?void 0:a.thumbOffset)+(null===(s=t.hScrollBar)||void 0===s?void 0:s.thumbLen)>=d;return l>=0&&f&&h},this.isScrollToTop=function(e){var n;return!t.vScrollBar||e<=0&&(null===(n=t.vScrollBar)||void 0===n?void 0:n.thumbOffset)<=0},this.isScrollToBottom=function(e){var n,r,o;return!t.vScrollBar||e>=0&&(null===(n=t.vScrollBar)||void 0===n?void 0:n.thumbOffset)+(null===(r=t.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(o=t.panelBBox)||void 0===o?void 0:o.height)},this.isVerticalScrollOverTheViewport=function(e){return!t.isScrollToTop(e)&&!t.isScrollToBottom(e)},this.isHorizontalScrollOverTheViewport=function(e){return!t.isScrollToLeft(e)&&!t.isScrollToRight(e)},this.isScrollOverTheViewport=function(e){var n=e.deltaY,r=e.deltaX;return!(e.offsetY<=t.cornerBBox.maxY)&&(0!==n?t.isVerticalScrollOverTheViewport(n):0!==r&&t.isHorizontalScrollOverTheViewport(e))},this.cancelScrollFrame=function(){return!(yw()&&t.scrollFrameId||(cancelAnimationFrame(t.scrollFrameId),0))},this.clearScrollFrameIdOnMobile=function(){yw()&&(t.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(e){"auto"!==t.spreadsheet.options.interaction.overscrollBehavior&&t.stopScrollChaining(e)},this.stopScrollChaining=function(e){var t,n,r;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),null===(r=null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.preventDefault)||void 0===r||r.call(n)},this.onWheel=function(e){var n=t.spreadsheet.options.interaction,r=e.deltaX,o=e.deltaY,i=e.offsetX,a=e.offsetY;e.shiftKey&&Cw()&&(i=i-r+o,r=o,a-=o,o=0);var s=ua(function(e,t,n){var r=Math.abs(e/t),o=r>2?0:t;return[(r<=.5?0:e)*n.horizontal,o*n.vertical]}(r,o,n.scrollSpeedRatio),2),l=s[0],c=s[1];t.spreadsheet.hideTooltip(),t.spreadsheet.interaction.clearHoverTimer(),t.isScrollOverTheViewport({deltaX:l,deltaY:c,offsetX:i,offsetY:a})?(t.stopScrollChaining(e),t.spreadsheet.interaction.addIntercepts([Vi.HOVER]),t.cancelScrollFrame()&&(t.scrollFrameId=requestAnimationFrame((function(){var e,n=t.getScrollOffset(),r=n.scrollX,o=n.scrollY,s=n.rowHeaderScrollX;0!==l&&(t.showHorizontalScrollBar(),t.updateHorizontalRowScrollOffset({offsetX:i,offsetY:a,offset:l+s}),t.updateHorizontalScrollOffset({offsetX:i,offsetY:a,offset:l+r})),0!==c&&(t.showVerticalScrollBar(),null===(e=t.vScrollBar)||void 0===e||e.emitScrollChange(c+o)),t.delayHideScrollbarOnMobile(),t.clearScrollFrameIdOnMobile()})))):t.stopScrollChainingIfNeeded(e)},this.addCell=function(e){var n=t.spreadsheet.panelScrollGroup;null==n||n.add(e)},this.realCellRender=function(e,n){var r=t.calculateXYIndexes(e,n);Uw.getInstance().logger("renderIndex:",t.preCellIndexes,r);var o,i,a,s,l=(o=t.preCellIndexes,i=r,a=[],s=[],Object.keys(i).forEach((function(e){var t=function(e,t){var n=[],r=[];if(Vv(e))return Vv(t)?{add:n,remove:r}:{add:WT(t),remove:r};if(Vv(t))return{add:n,remove:WT(e)};for(var o=ua(e,4),i=o[0],a=o[1],s=o[2],l=o[3],c=ua(t,4),u=c[0],d=c[1],h=c[2],f=c[3],p=i;p<=a;p++)for(var g=s;g<=l;g++)HT(p,g,t)||r.push([p,g]);for(p=u;p<=d;p+=1)for(g=h;g<=f;g+=1)HT(p,g,e)||n.push([p,g]);return{add:n,remove:r}}((null==o?void 0:o[e])||[],i[e]),n=t.add,r=t.remove;a.push.apply(a,da([],ua(n),!1)),s.push.apply(s,da([],ua(r),!1))})),{add:a,remove:s}),c=l.add,u=l.remove;Uw.getInstance().debugCallback("Data Cell Render",(function(){fg(c,(function(e){var n=ua(e,2),r=n[0],o=n[1],i=t.layoutResult.getCellMeta(o,r);if(i){var a=t.cfg.dataCell(i);a.set("name","".concat(r,"-").concat(o)),t.addCell(a)}}));var e=FT(t.panelGroup.getChildren(),bE);fg(u,(function(t){var n=ua(t,2),r=n[0],o=n[1],i=Fg(e,(function(e){return e.get("name")==="".concat(r,"-").concat(o)}));null==i||i.remove(!0)})),Uw.getInstance().logger("Render Cell Panel: ".concat(null==e?void 0:e.length,", Add: ").concat(null==c?void 0:c.length,", Remove: ").concat(null==u?void 0:u.length))})),t.preCellIndexes=r,t.spreadsheet.emit(Jo.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:c,remove:u,spreadsheet:t.spreadsheet})},this.getGridInfo=function(){var e=ua(t.preCellIndexes.center,4),n=e[0],r=e[1],o=e[2],i=e[3];return{cols:jT(n,r,t.layoutResult.colLeafNodes),rows:zT(o,i,t.viewCellHeights)}},this.onAfterScroll=Pp((function(){var e=t.spreadsheet,n=e.interaction,r=e.container;if(!n.isSelectedState()&&(n.removeIntercepts([Vi.HOVER]),n.getHoverAfterScroll())){var o=n.eventController.canvasMousemoveEvent;if(o){var i=o.x,a=o.y,s=r.getShape(i,a);s&&r.emit(Qo.MOUSE_MOVE,sa(sa({},o),{shape:s,target:s,timestamp:performance.now()}))}}}),300),this.cfg=e,this.spreadsheet=e.spreadsheet,this.init()}return Object.defineProperty(e.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),e.prototype.getCellCustomWidth=function(e,t){return os(t)?null==t?void 0:t(e):t},e.prototype.getCellDraggedWidth=function(e){var t=this.cfg.colCfg;return yu(null==t?void 0:t.widthByFieldValue,"".concat(e.value))},e.prototype.render=function(){var e;Vv((e=this.spreadsheet.dataCfg.fields).rows)&&Vv(e.columns)&&Vv(e.values)&&Vv(e.customTreeItems)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell())},e.prototype.adjustScrollOffset=function(){var e=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(e)},e.prototype.getSeriesNumberWidth=function(){return this.cfg.showSeriesNumber?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},e.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},e.prototype.getContentHeight=function(){var e=this.layoutResult,t=e.rowsHierarchy,n=e.colsHierarchy;return t.height+n.height},e.prototype.updateScrollOffset=function(e){var t,n,r,o,i,a;void 0===(null===(t=e.rowHeaderOffsetX)||void 0===t?void 0:t.value)?void 0===(null===(r=e.offsetX)||void 0===r?void 0:r.value)?void 0!==(null===(i=e.offsetY)||void 0===i?void 0:i.value)&&((null===(a=e.offsetY)||void 0===a?void 0:a.animate)?this.scrollWithAnimation(e):this.scrollImmediately(e)):(null===(o=e.offsetX)||void 0===o?void 0:o.animate)?this.scrollWithAnimation(e):this.scrollImmediately(e):(null===(n=e.rowHeaderOffsetX)||void 0===n?void 0:n.animate)?this.scrollWithAnimation(e):this.scrollImmediately(e)},e.prototype.getPaginationScrollY=function(){var e=this.cfg.pagination;if(e){var t=e.current,n=void 0===t?1:t,r=e.pageSize,o=this.viewCellHeights,i=Math.max((n-1)*r,0);return o.getCellOffsetY(i)}return 0},e.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},e.prototype.calculateXYIndexes=function(e,t){var n=this.panelBBox,r=n.viewportHeight,o=n.viewportWidth;return{center:kw(e,t,this.viewCellWidths,this.viewCellHeights,{width:o,height:r,x:0,y:0},this.getRealScrollX(this.cornerBBox.width))}},e.prototype.calculateCornerBBox=function(){this.cornerBBox=new UT(this,!0)},e.prototype.getCellRange=function(){var e=this.cfg.pagination;return function(e,t){var n=e,r=0,o=n.getTotalLength()-1;if(t){var i=t.current,a=void 0===i?1:i,s=t.pageSize;r=Math.max((a-1)*s,0),o=Math.min(a*s-1,n.getTotalLength()-1)}return{start:r,end:o}}(this.viewCellHeights,e)},e.prototype.clip=function(e,t){var n,r=this.spreadsheet.isFrozenRowHeader();null===(n=this.spreadsheet.panelScrollGroup)||void 0===n||n.setClip({type:"rect",attrs:{x:r?e:0,y:t,width:this.panelBBox.width+(r?0:e),height:this.panelBBox.height}})},e.prototype.translateRelatedGroups=function(e,t,n){var r,o;Bw(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-e,this.cornerBBox.height-t),null===(r=this.rowHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(e,n),t,pi),null===(o=this.rowIndexHeader)||void 0===o||o.onScrollXY(this.getRealScrollX(e,n),t,mi),this.cornerHeader.onCorScroll(this.getRealScrollX(e,n),yi),this.centerFrame.onChangeShadowVisibility(e,this.getRealWidth()-this.panelBBox.width),this.centerFrame.onBorderScroll(this.getRealScrollX(e)),this.columnHeader.onColScroll(e,Ci)},e.prototype.init=function(){var e=this;Uw.getInstance().debugCallback("Header Layout",(function(){e.layoutResult=e.doLayout(),e.saveInitColumnLeafNodes(e.layoutResult.colLeafNodes),e.spreadsheet.emit(Jo.LAYOUT_AFTER_HEADER_LAYOUT,e.layoutResult)})),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},e.prototype.renderBackground=function(){var e=this.getCanvasHW(),t=e.width,n=e.height,r=this.spreadsheet.theme.background,o=r.color,i=r.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:o,opacity:i,x:0,y:0,width:t,height:n}})},e.prototype.renderScrollBars=function(){var e=this.getScrollOffset(),t=e.scrollX,n=e.scrollY,r=e.rowHeaderScrollX,o=this.panelBBox,i=o.width,a=o.height,s=this.layoutResult.colsHierarchy.width,l=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(i,s,t),this.renderVScrollBar(a,l,n)},e.prototype.renderHeaders=function(){var e=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),e>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},e.prototype.getRowHeader=function(){var e,t,n;if(!this.rowHeader){var r=this.panelBBox,o=r.y,i=r.viewportHeight,a=r.viewportWidth,s=r.height,l=this.getSeriesNumberWidth();return new KT({width:this.cornerBBox.width,height:s,viewportWidth:a,viewportHeight:i,position:{x:0,y:o},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:null!==(n=null===(t=null===(e=this.cfg.spreadsheet.options)||void 0===e?void 0:e.interaction)||void 0===t?void 0:t.linkFields)&&void 0!==n?n:[],seriesNumberWidth:l,spreadsheet:this.spreadsheet})}return this.rowHeader},e.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,t=e.x,n=e.width,r=e.viewportHeight,o=e.viewportWidth;return new $T({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:r,position:{x:t,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:XT.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},e.prototype.getSeriesNumberHeader=function(){return ZT.getSeriesNumberHeader(this.panelBBox,this.getSeriesNumberWidth(),this.layoutResult.rowsHierarchy.getNodes(0),this.spreadsheet,this.cornerBBox.width)},e.prototype.getCenterFrame=function(){var e;if(!this.centerFrame){var t=this.panelBBox,n=t.viewportWidth,r=t.viewportHeight,o=this.cornerBBox.width,i=this.cornerBBox.height,a=null===(e=this.cfg)||void 0===e?void 0:e.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:o,height:i,viewportWidth:n,viewportHeight:r,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return a?a(s):new qT(s)}return this.centerFrame},e.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},e.prototype.dynamicRenderCell=function(e){var t=this.getScrollOffset(),n=t.scrollX,r=t.scrollY,o=t.rowHeaderScrollX,i=r+this.getPaginationScrollY(),a=BT(i,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,a),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,a,o),this.clip(n,a),e||this.emitScrollEvent({scrollX:n,scrollY:a,rowHeaderScrollX:o}),this.onAfterScroll()},e.prototype.emitScrollEvent=function(e){this.spreadsheet.emit(Jo.LAYOUT_CELL_SCROLL,e),this.spreadsheet.emit(Jo.GLOBAL_SCROLL,e)},e.prototype.saveInitColumnLeafNodes=function(e){void 0===e&&(e=[]);var t=this.spreadsheet,n=t.store,r=t.options.interaction.hiddenColumnFields;e.length+r.length!==n.get("initColumnLeafNodes",[]).length&&n.set("initColumnLeafNodes",e)},e.prototype.getHiddenColumnsInfo=function(e){var t=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return Vv(t)?null:t.find((function(t){var n;return null===(n=null==t?void 0:t.hideColumnNodes)||void 0===n?void 0:n.some((function(t){return t.id===e.id}))}))},e.prototype.getCornerNodes=function(){var e;return(null===(e=this.cornerHeader)||void 0===e?void 0:e.getNodes())||[]},e}(),JT=function(e){var t,n,r,o=e.facetCfg,i=e.customTreeItems,a=void 0===i?[]:i,s=e.level,l=e.parentNode,c=e.hierarchy,u=o.spreadsheet,d=o.collapsedRows,h=o.hierarchyCollapse;try{for(var f=ca(a),p=f.next();!p.done;p=f.next()){var g=p.value,v=g.key,m=g.title,y=g.collapsed,C=g.children,b=la(g,["key","title","collapsed","children"]),w=((r={})[ri]=v,r),x=Ow(l.id,m),E=null!=y&&y,S=yu(d,x),I=null!=S?S:h||E,T=new bw({id:x,key:v,label:m,value:m,level:s,parent:l,field:v,isTotals:!1,isCollapsed:I,hierarchy:c,query:w,spreadsheet:u,extra:b});s>c.maxLevel&&(c.maxLevel=s),Vv(C)&&(T.isLeaf=!0);var L=Iw(o,l,T,c);Vv(C)||I||!L||JT({facetCfg:o,parentNode:T,level:s+1,hierarchy:c,customTreeItems:C})}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}},eL=function(e){var t,n,r,o,i,a,s,l=e.parentNode,c=e.currentField,u=e.level,d=e.facetCfg,h=e.hierarchy,f=e.pivotMeta,p=d.spreadsheet,g=d.dataSet,v=d.collapsedRows,m=d.hierarchyCollapse,y=d.rowExpandDepth,C=l.query,b=l.id,w=(null===(o=p.dataCfg.fields.rows)||void 0===o?void 0:o.length)<=u,x=(null===(i=null==g?void 0:g.sortedDimensionValues)||void 0===i?void 0:i[c])||[],E=ox(Array.from(f.keys())),S=rx(E,x,(function(e){return Ei===b?e:Ow(b,e).slice(7)})),I=Sw(S,d,l,c),T=p.store.get("drillItemsNum");w&&T>0&&(I=I.slice(0,T)),0===u&&function(e,t,n){var r=e.getTotalsConfig(t);r.showGrandTotals&&n[r.reverseLayout?"unshift":"push"](new xw(r.label,!1,!0))}(p,c,I);try{for(var L=ca(I),M=L.next();!M.done;M=L.next()){var O=M.value,_=O instanceof xw,N=_?null:f.get(O),A=void 0,R=C,D=!1,P=!1;if(_){var k=O;D=k.isGrandTotals,P=k.isSubTotals,A=hw(O.label),R=C}else A=O,R=sa(sa({},C),((r={})[c]=A,r));var B=Ow(b,A),F=null==v?void 0:v[B],j=Kv(y)?u>y:null,z=null!==(a=null!=F?F:j)&&void 0!==a?a:m,H=new bw({id:B,key:c,label:A,value:A,level:u,parent:l,field:c,isTotals:_,isGrandTotals:D,isSubTotals:P,isCollapsed:z,hierarchy:h,query:R,spreadsheet:p});u>h.maxLevel&&(h.maxLevel=u);var W=!(null===(s=null==N?void 0:N.children)||void 0===s?void 0:s.size);(W||_)&&(H.isLeaf=!0),W||(H.isTotals=!0);var G=Iw(d,l,H,h);W||z||_||!G||eL({level:u+1,currentField:N.childField,pivotMeta:N.children,facetCfg:d,parentNode:H,hierarchy:h})}}catch(e){t={error:e}}finally{try{M&&!M.done&&(n=L.return)&&n.call(L)}finally{if(t)throw t.error}}},tL=function(e){var t,n,r=e.isValueInCols,o=e.moreThanOneValue,i=e.rootNode,a=e.facetCfg,s=e.hierarchy,l=e.fields;e.isRowHeader?(t=!r&&o,n=!r&&!o):(t=r&&o,n=r&&!o),Mw({addTotalMeasureInTotal:t,addMeasureInTotalQuery:n,parentNode:i,currentField:l[0],fields:l,facetCfg:a,hierarchy:s})},nL=function(e){var t=e.isRowHeader,n=e.facetCfg,r=n.spreadsheet,o=n.rows,i=void 0===o?[]:o,a=n.columns,s=void 0===a?[]:a,l=r.dataCfg.fields.valueInCols,c=r.isPivotMode(),u=n.dataSet.moreThanOneValue(),d=bw.rootNode(),h=new ww,f={isValueInCols:l,isPivotMode:c,moreThanOneValue:u,rootNode:d,hierarchy:h,spreadsheet:r,facetCfg:n,fields:t?i:s,isRowHeader:t};return t?function(e){e.spreadsheet.isHierarchyTreeType()?function(e){var t=e.facetCfg,n=e.rootNode,r=e.hierarchy,o=t.hierarchyType,i=t.rows,a=t.dataSet;"tree"===o?eL({level:0,currentField:i[0],pivotMeta:a.rowPivotMeta,facetCfg:t,parentNode:n,hierarchy:r}):function(e){var t=e.facetCfg,n=e.rootNode,r=e.hierarchy,o=t.dataSet.fields.customTreeItems;JT({customTreeItems:o,facetCfg:t,level:0,parentNode:n,hierarchy:r})}(e)}(e):tL(e)}(f):function(e){var t=e.isPivotMode,n=e.hierarchy,r=e.rootNode,o=e.facetCfg;t?tL(e):function(e){var t=e.facetCfg,n=t.columns,r=t.spreadsheet.store.get("hiddenColumnsDetail"),o=null==t?void 0:t.showSeriesNumber,i=da([],ua(Ww(n).filter((function(e){return!r||r.every((function(t){return t.hideColumnNodes.every((function(t){return t.field!==e}))}))}))),!1),a=da([],ua(n),!1),s={};o&&(a.unshift({key:ai}),s[ai]=!0),i.reduce((function(e,t){return e[t]=!0,e}),s),Nw(zw(a,s),e,0,null)}({parentNode:r,hierarchy:n,facetCfg:o})}(f),{hierarchy:h,leafNodes:t&&r.isHierarchyTreeType()?h.getNodes():h.getLeaves()}},rL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),Object.defineProperty(t.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),t.prototype.doLayout=function(){var e=nL({isRowHeader:!0,facetCfg:this.cfg}),t=e.leafNodes,n=e.hierarchy,r=nL({isRowHeader:!1,facetCfg:this.cfg}),o=r.leafNodes,i=r.hierarchy;this.calculateNodesCoordinate(t,n,o,i);var a=this.cfg,s=a.dataSet,l=a.spreadsheet,c={colNodes:i.getNodes(),colsHierarchy:i,rowNodes:n.getNodes(),rowsHierarchy:n,rowLeafNodes:t,colLeafNodes:o,getCellMeta:function(e,n){var r,i,a,c=e||0,u=n||0,d=t[c],h=o[u];if(!d||!h)return null;var f,p=d.query,g=h.query,v=d.isTotals||d.isTotalMeasure||h.isTotals||h.isTotalMeasure,m=l.options.hierarchyType,y=null!==(i=yu(l,"facet.cfg.colCfg.hideMeasureColumn"))&&void 0!==i&&i&&"customTree"!==m?((r={})[ri]=null===(a=s.fields.values)||void 0===a?void 0:a[0],r):{},C=wm({},p,g,y),b=s.getCellData({query:C,rowNode:d,isTotals:v}),w=null;return Vv(b)?f=yu(C,[ri],""):(f=yu(b,[ri],""),w=yu(b,[ni],null),v&&(f=yu(C,[ri],""),w=yu(b,f,null))),{spreadsheet:l,x:h.x,y:d.y,width:h.width,height:d.height,data:b,rowIndex:c,colIndex:u,isTotals:v,valueField:f,fieldValue:w,rowQuery:p,colQuery:g,rowId:d.id,colId:h.id,id:yE(d.id,h.id)}},spreadsheet:l};return function(e,t){var n=null==e?void 0:e.layoutDataPosition;if(n){var r=t.getCellMeta,o=n(e.spreadsheet,r);return sa(sa({},t),{getCellMeta:o})}return t}(this.cfg,c)},t.prototype.calculateNodesCoordinate=function(e,t,n,r){this.calculateRowNodesCoordinate(e,t,n),this.calculateColNodesCoordinate(n,r,e,t.width)},t.prototype.calculateColNodesCoordinate=function(e,t,n,r){var o,i,a,s,l=bw.blankNode(),c=t.getNodes();try{for(var u=ca(t.sampleNodesForAllLevels),d=u.next();!d.done;d=u.next()){var h=d.value;h.height=this.getColNodeHeight(h),t.height+=h.height}}catch(e){o={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}for(var f=0,p=function(o){var i=c[o];if(i.isLeaf&&(i.colIndex=f,f+=1,i.x=l.x+l.width,i.width=g.calculateColLeafNodesWidth(i,e,n,r),t.width+=i.width,l=i),0===i.level)i.y=0;else{var s=t.sampleNodesForAllLevels.find((function(e){return e.level===i.level-1}));i.y=null!==(a=(null==s?void 0:s.y)+(null==s?void 0:s.height))&&void 0!==a?a:0}i.height=i.isGrandTotals&&i.isLeaf?t.height:g.getColNodeHeight(i),Tw(g.cfg,null,i)},g=this,v=0;v<c.length;v++)p(v);this.autoCalculateColNodeWidthAndX(e),Vv(null===(s=this.spreadsheet.options.totals)||void 0===s?void 0:s.col)||(this.adjustTotalNodesCoordinate(t),this.adjustSubTotalNodesCoordinate(t))},t.prototype.autoCalculateColNodeWidthAndX=function(e){for(var t,n=null,r=e.slice(0);r.length;){var o=r.shift().parent;if(n!==o&&o){r.push(o);var i=null===(t=o.children)||void 0===t?void 0:t.find((function(e){return!e.hiddenChildNodeInfo})),a=null==i?void 0:i.x,s=TC(o.children,"width");o.x=a,o.width=s,n=o}}},t.prototype.calculateColLeafNodesWidth=function(e,t,n,r){var o,i,a,s,l,c=this.cfg,u=c.colCfg,d=c.dataSet,h=c.filterDisplayDataItem,f=this.getCellDraggedWidth(e);if(Kv(f))return f;var p=this.getCellCustomWidth(e,null==u?void 0:u.width);if(Kv(p))return p;if(this.spreadsheet.getLayoutWidthType()===ta.Compact){for(var g=this.spreadsheet.theme.colCell,v=g.bolderText,m=g.cell,y=g.icon,C=this.spreadsheet.dataSet.getFieldFormatter(e.field),b=null!==(o=null==C?void 0:C(e.value))&&void 0!==o?o:e.label,w=this.getExpectedCellIconWidth(zi.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,y),x=this.spreadsheet.measureTextWidthRoughly(b)+w,E=void 0,S=0,I=0;I<50;I++){var T=n[I];if(T){var L=d.getCellData({query:sa(sa({},e.query),T.query),rowNode:T,isTotals:e.isTotals||e.isTotalMeasure||T.isTotals||T.isTotalMeasure});if(L){var M=vE(L,h),O=null!==(a=null===(i=this.spreadsheet.dataSet.getFieldFormatter(L[ri]))||void 0===i?void 0:i(M))&&void 0!==a?a:M,_="".concat(O),N=this.spreadsheet.measureTextWidthRoughly(_);N>S&&(E=_,S=N)}}}var A=x>S,R=A?b:E,D=A?w:0;return Uw.getInstance().logger("Max Label In Col:",e.field,R),this.spreadsheet.measureTextWidth(R,v)+(null===(s=m.padding)||void 0===s?void 0:s.left)+(null===(l=m.padding)||void 0===l?void 0:l.right)+D}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(e,t,n):this.getAdaptGridColWidth(t,r)},t.prototype.getColNodeHeight=function(e){var t=this.cfg.colCfg,n=yu(t,["heightByField",e.key]);return null!=n?n:null==t?void 0:t.height},t.prototype.getExpectedCellIconWidth=function(e,t,n){var r,o=0;if(t)o=1;else{var i=PE(Yg(this.spreadsheet.options.headerActionIcons,(function(e){return sa(sa({},e),{displayCondition:function(){return!0}})})),null,e);o=null!==(r=null==i?void 0:i.iconNames.length)&&void 0!==r?r:0}return o?o*(n.size+n.margin.left)+n.margin.right:0},t.prototype.calculateRowNodesCoordinate=function(e,t,n){var r,o,i,a,s,l,c,u,d,h,f=this.cfg,p=f.cellCfg,g=f.spreadsheet,v=g.isHierarchyTreeType(),m=yu(g,"options.style.rowCfg.heightByField",{}),y=null!==(i=t.sampleNodesForAllLevels)&&void 0!==i?i:[];if(v)t.width=this.getTreeRowHeaderWidth();else try{for(var C=ca(t.sampleNodesForAllLevels),b=C.next();!b.done;b=C.next()){var w=b.value;w.width=this.calculateGridRowNodesWidth(w,n),t.width+=w.width;var x=null!==(a=y[w.level-1])&&void 0!==a?a:{x:0,width:0};w.x=(null==x?void 0:x.x)+(null==x?void 0:x.width)}}catch(e){r={error:e}}finally{try{b&&!b.done&&(o=C.return)&&o.call(C)}finally{if(r)throw r.error}}for(var E=bw.blankNode(),S=t.getNodes(),I=0;I<S.length;I++){var T=S[I];if((v||!v&&T.isLeaf)&&(null!==(s=T.rowIndex)&&void 0!==s||(T.rowIndex=I),null!==(l=T.colIndex)&&void 0!==l||(T.colIndex=I),T.y=E.y+E.height,T.height=(null!==(c=null==m?void 0:m[T.id])&&void 0!==c?c:null==p?void 0:p.height)+(null===(u=this.rowCellTheme.padding)||void 0===u?void 0:u.top)+(null===(d=this.rowCellTheme.padding)||void 0===d?void 0:d.bottom),E=T,t.height+=T.height),v||0===T.level?T.x=0:(x=y[T.level-1],T.x=(null==x?void 0:x.x)+(null==x?void 0:x.width)),v)T.width=this.getTreeRowHeaderWidth();else{var L=y[T.level];T.width=null==L?void 0:L.width}Tw(this.cfg,T,null)}v||(this.autoCalculateRowNodeHeightAndY(e),Vv(null===(h=g.options.totals)||void 0===h?void 0:h.row)||(this.adjustTotalNodesCoordinate(t,!0),this.adjustSubTotalNodesCoordinate(t,!0)))},t.prototype.autoCalculateRowNodeHeightAndY=function(e){for(var t=null,n=e.slice(0);n.length;){var r=n.shift().parent;t!==r&&r&&(n.push(r),r.y=r.children[0].y,r.height=r.children.map((function(e){return e.height})).reduce((function(e,t){return e+t}),0),t=r)}},t.prototype.adjustTotalNodesCoordinate=function(e,t){var n,r,o,i=this.cfg.dataSet.moreThanOneValue(),a=e.maxLevel,s=Fg(e.getNodes(0),(function(e){return e.isGrandTotals}));if(s instanceof bw){var l=s.children;if(t)s.width=e.width,fg(l,(function(t){var n=e.getNodes(a)[0];t.x=n.x,t.width=n.width}));else if(a>1||a<=1&&!i){var c=null!==(r=null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.height)&&void 0!==r?r:0;s.height=e.height-c;var u=null===(o=Fg(e.getNodes(a),(function(e){return!e.isTotalMeasure})))||void 0===o?void 0:o.y;fg(l,(function(e){e.y=u}))}}},t.prototype.adjustSubTotalNodesCoordinate=function(e,t){var n=e.getNodes().filter((function(e){return e.isSubTotals}));if(!Vv(n)){var r=e.maxLevel;fg(n,(function(n){var o,i,a,s=n.children;if(t)n.width=DT(e.sampleNodesForAllLevels,n.level,"width"),fg(s,(function(t){t.x=e.getNodes(r)[0].x}));else{var l=DT(e.sampleNodesForAllLevels,n.level,"height"),c=null!==(i=null===(o=null==s?void 0:s[0])||void 0===o?void 0:o.height)&&void 0!==i?i:0;n.height=l-c,fg(s,(function(t){t.y=e.getNodes(r)[0].y}));var u=null===(a=Fg(e.getNodes(r),(function(e){return!e.isTotalMeasure})))||void 0===a?void 0:a.y;fg(s,(function(e){e.y=u}))}}))}},t.prototype.calculateGridRowNodesWidth=function(e,t){var n=this.cfg,r=n.rowCfg,o=n.spreadsheet,i=yu(r,["widthByField",e.key]);if(Kv(i))return i;var a=this.getCellCustomWidth(e,null==r?void 0:r.width);return Kv(a)?a:o.getLayoutWidthType()!==ta.Adaptive?this.getCompactGridRowWidth(e):this.getAdaptGridColWidth(t)},t.prototype.getAdaptTreeColWidth=function(e,t,n){var r=this.getCanvasHW().width-this.getSeriesNumberWidth(),o=Math.min(r/2,this.getTreeRowHeaderWidth()),i=Math.max(1,t.length),a=this.cfg.cellCfg;return Math.max(Fx(a,this.getColLabelLength(e,n)),(r-o)/i)},t.prototype.getColLabelLength=function(e,t){var n,r=jx(null==e?void 0:e.value);if(Na(r))return r.length;for(var o=1,i=0;i<50;i++){var a=t[i];if(!a)return o;for(var s=this.cfg.dataSet.getCellData({query:sa(sa({},e.query),a.query),rowNode:a,isTotals:e.isTotals||e.isTotalMeasure||a.isTotals||a.isTotalMeasure}),l=Bc(s),c=0;c<l.length;c++){var u=s[l[c]],d=uC(null===(n=null==u?void 0:u.values)||void 0===n?void 0:n[0]);d>o&&(o=d)}}return o},t.prototype.getAdaptGridColWidth=function(e,t){var n=this.cfg,r=n.rows,o=n.cellCfg,i=r.length,a=e.length,s=this.getCanvasHW().width-this.getSeriesNumberWidth(),l=Math.max(1,i+a);return t?Math.max(Fx(o),(s-t)/a):Math.max(Fx(o),s/l)},t.prototype.getTreeRowHeaderWidth=function(){var e,t,n,r,o=this.cfg,i=o.rows,a=o.dataSet,s=o.rowCfg,l=o.treeRowsWidth,c=null!=l?l:null==s?void 0:s.treeRowsWidth;if(c)return c;var u=this.getCellCustomWidth(null,null==s?void 0:s.width);if(u)return u;var d=i.map((function(e){return a.getFieldName(e)})).join("/"),h=this.spreadsheet.theme.cornerCell,f=h.bolderText,p=h.icon,g=this.spreadsheet.measureTextWidth(d,f)+2*p.size+(null===(e=p.margin)||void 0===e?void 0:e.left)+(null===(t=p.margin)||void 0===t?void 0:t.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right);return Math.max(null!=c?c:120,g)},t.prototype.getCompactGridRowWidth=function(e){var t,n=this,r=this.cfg,o=r.dataSet,i=r.spreadsheet,a=i.theme.rowCell,s=a.bolderText,l=a.icon,c=a.cell,u=i.theme.cornerCell,d=u.bolderText,h=u.icon,f=u.cell,p=e.field,g=e.isLeaf,v=this.getExpectedCellIconWidth(zi.ROW_CELL,!i.isValueInCols()&&g&&i.options.showDefaultHeaderActionIcon,l),m=null===(t=o.getDimensionValues(p))||void 0===t?void 0:t.slice(0,50).map((function(e){var t,r;return null!==(r=null===(t=n.spreadsheet.dataSet.getFieldFormatter(p))||void 0===t?void 0:t(e))&&void 0!==r?r:e})),y=mm(m,(function(e){return"".concat(e).length})),C=i.measureTextWidth(y,s)+v+c.padding.left+c.padding.right,b=o.getFieldName(p),w=this.getExpectedCellIconWidth(zi.CORNER_CELL,!1,h),x=i.measureTextWidth(b,d)+w+f.padding.left+f.padding.right;return Uw.getInstance().logger("Max Label In Row:",p,C>x?y:b),Math.max(C,x)},t.prototype.getViewCellHeights=function(e){var t=Ky(e.rowLeafNodes,(function(e,t){return e.push(ig(e)+t.height),e}),[0]);return{getTotalHeight:function(){return ig(t)},getCellOffsetY:function(e){return t[e]},getTotalLength:function(){return t.length-1},getIndexRange:function(e,n){return PT(t,e,n)}}},t}(QT),oL=function(e){function t(t){var n,r=this;(r=e.call(this,t)||this).getScrollGroupClipBBox=function(){var e,t=r.headerConfig,n=t.width,o=t.height,i=t.scrollX,a=t.spreadsheet,s=a.options;if(!s.frozenColCount&&!s.frozenTrailingColCount)return{x:i,y:0,width:n,height:o};for(var l=null===(e=a.facet)||void 0===e?void 0:e.layoutResult.colLeafNodes,c=dx(a.options,l.length),u=c.frozenColCount,d=c.frozenTrailingColCount,h=0,f=0,p=0;p<u;p++)h+=l[p].width;for(p=0;p<d;p++)f+=l[l.length-1-p].width;return{x:i+h,y:0,width:n-h-f,height:o}};var o=null===(n=r.headerConfig.spreadsheet)||void 0===n?void 0:n.options,i=o.frozenColCount,a=o.frozenTrailingColCount;return i&&(r.frozenColGroup=r.addGroup({name:"colFrozenGroup",zIndex:4})),a&&(r.frozenTrailingColGroup=r.addGroup({name:"colFrozenTrailingGroup",zIndex:4})),r}return aa(t,e),t.prototype.isFrozenCell=function(e){var t=this.headerConfig.spreadsheet,n=null==t?void 0:t.options,r=n.frozenColCount,o=n.frozenTrailingColCount,i=e.colIndex,a=null==t?void 0:t.facet.layoutResult.colLeafNodes;return Aw(i,r)||Rw(i,o,a.length)},t.prototype.clear=function(){var t,n,r=this.headerConfig.spreadsheet;e.prototype.clear.call(this),null===(t=this.frozenTrailingColGroup)||void 0===t||t.clear(),null===(n=this.frozenColGroup)||void 0===n||n.clear();var o=null==r?void 0:r.foregroundGroup.findById(bi);null==o||o.clear()},t.prototype.getCellInstance=function(e,t,n){return e.field===ai?new pS(e,t,n):new fS(e,t,n)},t.prototype.getCellGroup=function(e){var t,n,r=this.headerConfig.spreadsheet,o=null==r?void 0:r.options,i=o.frozenColCount,a=o.frozenTrailingColCount,s=null===(t=null==r?void 0:r.facet)||void 0===t?void 0:t.layoutResult.colNodes.filter((function(e){return Hw(e)})),l=jw(s,i,a),c=l.colCount,u=l.trailingColCount;return Aw(Gw(e).colIndex,c)?this.frozenColGroup:Rw(Gw(e).colIndex,u,null===(n=null==r?void 0:r.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},t.prototype.isColCellInRect=function(t){var n,r,o=this.headerConfig.spreadsheet,i=null==o?void 0:o.options,a=i.frozenColCount,s=i.frozenTrailingColCount,l=null===(n=null==o?void 0:o.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length,c=null===(r=null==o?void 0:o.facet)||void 0===r?void 0:r.layoutResult.colNodes.filter((function(e){return Hw(e)})),u=jw(c,a,s),d=u.colCount,h=u.trailingColCount;return!(!Aw(Gw(t).colIndex,d)&&!Rw(Gw(t).colIndex,h,l))||e.prototype.isColCellInRect.call(this,t)},t.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},t}($T),iL=function(e){function t(t){var n,r=e.call(this,t)||this;r.frozenGroupInfo=((n={})[Oi.FROZEN_COL]={width:0},n[Oi.FROZEN_ROW]={height:0},n[Oi.FROZEN_TRAILING_ROW]={height:0},n[Oi.FROZEN_TRAILING_COL]={width:0},n),r.panelScrollGroupIndexes=[],r.onSortHandler=function(e){var t=r.spreadsheet,n=e;Array.isArray(e)||(n=[e]);var o=t.dataCfg.sortParams||[];n=n.map((function(e){var t,n,r=sa(sa({},e),{sortFieldId:null!==(t=e.sortKey)&&void 0!==t?t:e.sortFieldId}),i=null!==(n=o.find((function(e){return e.sortFieldId===r.sortFieldId})))&&void 0!==n?n:{};return sa(sa({},i),r)}));var i=o.filter((function(e){return!n.find((function(t){return t.sortFieldId===e.sortFieldId}))}));sC(t.dataCfg,"sortParams",da(da([],ua(i),!1),ua(n),!1)),t.setDataCfg(t.dataCfg),t.render(!0),t.emit(Jo.RANGE_SORTED,t.dataSet.getDisplayDataSet())},r.onFilterHandler=function(e){var t=r.spreadsheet,n=!e.filteredValues||0===e.filteredValues.length,o=t.dataCfg.filterParams||[],i=o.findIndex((function(t){return t.filterKey===e.filterKey}));-1!==i?n?o.splice(i):o[i]=e:o.push(e),sC(t.dataCfg,"filterParams",o),t.render(!0),t.emit(Jo.RANGE_FILTERED,t.dataSet.getDisplayDataSet())},r.initFrozenGroupPosition=function(){var e=r.getScrollOffset(),t=e.scrollY,n=e.scrollX,o=r.getPaginationScrollY();Bw(r.spreadsheet.frozenRowGroup,r.cornerBBox.width-n,r.cornerBBox.height-o),Bw(r.spreadsheet.frozenColGroup,r.cornerBBox.width,r.cornerBBox.height-t-o),Bw(r.spreadsheet.frozenTrailingColGroup,r.cornerBBox.width,r.cornerBBox.height-t-o),Bw(r.spreadsheet.frozenTopGroup,r.cornerBBox.width,r.cornerBBox.height-o)},r.getTotalHeightForRange=function(e,t){if(e<0||t<0)return 0;if(r.rowOffsets)return r.rowOffsets[t+1]-r.rowOffsets[e];for(var n=0,o=e;o<t+1;o++)n+=r.getDefaultCellHeight();return n},r.getShadowFill=function(e){var t,n,o=yu(r.cfg,"spreadsheet.theme.splitLine");return"l (".concat(e,") 0:").concat(null===(t=o.shadowColors)||void 0===t?void 0:t.left," 1:").concat(null===(n=o.shadowColors)||void 0===n?void 0:n.right)},r.renderFrozenGroupSplitLine=function(e,t){var n,o=r.panelBBox,i=o.width,a=o.height,s=o.viewportWidth,l=o.viewportHeight,c=r.cornerBBox.height,u=r.layoutResult.colNodes.filter((function(e){return Hw(e)})),d=r.getCellRange(),h=d.end-d.start,f=dx(r.spreadsheet.options,u.length,h),p=f.frozenRowCount,g=f.frozenColCount,v=f.frozenTrailingColCount,m=f.frozenTrailingRowCount,y=Math.floor(t-r.getPaginationScrollY()),C=Math.max(0,ig(r.viewCellWidths)-s),b=Math.max(0,r.viewCellHeights.getCellOffsetY(d.end+1)-r.viewCellHeights.getCellOffsetY(d.start)-l);null===(n=r.foregroundGroup.findById(vi))||void 0===n||n.remove();var w,x,E,S,I=yu(r.cfg,"spreadsheet.theme.splitLine"),T=r.foregroundGroup.addGroup({id:vi,zIndex:4}),L={lineWidth:null==I?void 0:I.verticalBorderWidth,stroke:null==I?void 0:I.verticalBorderColor,opacity:null==I?void 0:I.verticalBorderColorOpacity},M={lineWidth:null==I?void 0:I.horizontalBorderWidth,stroke:null==I?void 0:I.horizontalBorderColor,opacity:null==I?void 0:I.horizontalBorderColorOpacity};g>0&&(gx(T,{x1:w=u.reduce((function(e,t,n){return n<g?e+t.width:e}),0),x2:w,y1:c,y2:c+(x=m>0?a:l)},sa({},L)),I.showShadow&&e>0&&T.addShape("rect",{attrs:{x:w,y:c,width:I.shadowWidth,height:x,fill:r.getShadowFill(0)}})),p>0&&(gx(T,{x1:0,x2:S=v>0?i:s,y1:E=c+r.getTotalHeightForRange(d.start,d.start+p-1),y2:E},sa({},M)),I.showShadow&&y>0&&T.addShape("rect",{attrs:{x:0,y:E,width:S,height:I.shadowWidth,fill:r.getShadowFill(90)}})),v>0&&(gx(T,{x1:w=u[u.length-v].x,x2:w,y1:c,y2:c+(x=m?a:l)},sa({},L)),I.showShadow&&Math.floor(e)<Math.floor(C)&&T.addShape("rect",{attrs:{x:w-I.shadowWidth,y:c,width:I.shadowWidth,height:x,fill:r.getShadowFill(180)}})),m>0&&(gx(T,{x1:0,x2:S=v>0?i:s,y1:E=r.panelBBox.maxY-r.getTotalHeightForRange(d.end-m+1,d.end),y2:E},sa({},M)),I.showShadow&&y<Math.floor(b)&&T.addShape("rect",{attrs:{x:0,y:E-I.shadowWidth,width:S,height:I.shadowWidth,fill:r.getShadowFill(270)}})),r.foregroundGroup.sort()},r.renderFrozenPanelCornerGroup=function(){var e=r.layoutResult.colNodes.filter((function(e){return Hw(e)})),t=r.getCellRange(),n=dx(r.spreadsheet.options,e.length,t.end-t.start+1),o=n.frozenRowCount,i=n.frozenColCount,a=n.frozenTrailingRowCount,s=n.frozenTrailingColCount,l=jw(e,i,s),c=function(e,t,n){for(var r,o=e.frozenColCount,i=e.frozenRowCount,a=e.frozenTrailingColCount,s=e.frozenTrailingRowCount,l=((r={})[Mi.TOP]=[],r[Mi.BOTTOM]=[],r),c=0;c<o;c++){for(var u=n.start;u<n.start+i;u++)l[Mi.TOP].push({x:c,y:u});if(s>0)for(u=0;u<s;u++){var d=n.end-u;l[Mi.BOTTOM].push({x:c,y:d})}}for(c=0;c<a;c++){var h=t-1-c;for(u=n.start;u<n.start+i;u++)l[Mi.TOP].push({x:h,y:u});if(s>0)for(u=0;u<s;u++)d=n.end-u,l[Mi.BOTTOM].push({x:h,y:d})}return l}({frozenRowCount:o,frozenColCount:l.colCount,frozenTrailingRowCount:a,frozenTrailingColCount:l.trailingColCount},r.layoutResult.colLeafNodes.length,t);Object.keys(c).forEach((function(e){var t=c[e],n=r.spreadsheet[Hi[e]];n&&t.forEach((function(e){r.addFrozenCell(e.x,e.y,n)}))}))},r.addFrozenCell=function(e,t,n){var o=r.layoutResult.getCellMeta(t,e);if(o.isFrozenCorner=!0,o){var i=r.cfg.dataCell(o);n.add(i)}},r.getRealFrozenColumns=function(e,t){var n,o=e,i=t;if(e||t){var a=r.layoutResult.colsHierarchy.getNodes();a=a.filter((function(e){return Hw(e)})),o=(n=jw(a,e,t)).colCount,i=n.trailingColCount}return{colCount:o,trailingColCount:i}},r.addCell=function(e){var t=r.spreadsheet.options,n=t.frozenRowCount,o=t.frozenColCount,i=t.frozenTrailingRowCount,a=t.frozenTrailingColCount,s=r.layoutResult.colsHierarchy.getLeaves().length,l=r.getCellRange(),c=r.getRealFrozenColumns(o,a),u=c.colCount,d=c.trailingColCount,h=function(e,t,n,r){var o=t.frozenColCount,i=t.frozenRowCount,a=t.frozenTrailingColCount,s=t.frozenTrailingRowCount,l=e.colIndex,c=e.rowIndex;return Dw(c,r.start,i)?Mi.ROW:Pw(c,r.end,s)?Mi.TRAILING_ROW:Aw(l,o)?Mi.COL:Rw(l,a,n)?Mi.TRAILING_COL:Mi.SCROLL}(e.getMeta(),{frozenRowCount:n,frozenColCount:u,frozenTrailingRowCount:i,frozenTrailingColCount:d},s,l),f=Hi[h];f&&r.spreadsheet[f].add(e)},r.getFrozenOptions=function(){var e=r.layoutResult.colLeafNodes.length,t=r.getCellRange();return dx(r.cfg,e,t.end-t.start+1)};var o=r.spreadsheet;return o.on(Jo.RANGE_SORT,r.onSortHandler),o.on(Jo.RANGE_FILTER,r.onFilterHandler),r}return aa(t,e),Object.defineProperty(t.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t=this.spreadsheet;t.off(Jo.RANGE_SORT,this.onSortHandler),t.off(Jo.RANGE_FILTER,this.onFilterHandler),e.prototype.destroy.call(this)},t.prototype.calculateCornerBBox=function(){var e=this.layoutResult.colsHierarchy,t=Math.floor(e.height);this.cornerBBox=new UT(this),this.cornerBBox.height=t,this.cornerBBox.maxY=t},t.prototype.doLayout=function(){var e=this,t=this.cfg,n=t.dataSet,r=t.spreadsheet,o=new ww,i=nL({isRowHeader:!1,facetCfg:this.cfg}),a=i.leafNodes,s=i.hierarchy;this.calculateColNodesCoordinate(a,s);var l={colNodes:s.getNodes(),colsHierarchy:s,rowNodes:o.getNodes(),rowsHierarchy:o,rowLeafNodes:o.getLeaves(),colLeafNodes:a,getCellMeta:function(t,o){var i,s,l=e.cfg.showSeriesNumber,c=a[o],u=e.getCellHeight(t),d=e.getCellRange(),h=dx(e.cfg,a.length,d.end-d.start+1).frozenTrailingRowCount,f=c.x,p=e.viewCellHeights.getCellOffsetY(t);return Pw(t,d.end,h)&&(p=e.panelBBox.maxY-e.getTotalHeightForRange(t,d.end)),s=l&&c.field===ai?t+1:n.getCellData({query:{col:c.field,rowIndex:t}}),{spreadsheet:r,x:f,y:p,width:c.width,height:u,data:(i={},i[c.field]=s,i),rowIndex:t,colIndex:o,isTotals:!1,colId:c.id,rowId:String(t),valueField:c.field,fieldValue:s,id:yE(String(t),c.id)}},spreadsheet:r};return l},t.prototype.getAdaptiveColWidth=function(e){var t=this.cfg.cellCfg,n=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==ta.Compact){var r=this.getSeriesNumberWidth(),o=e.length-(n?1:0),i=this.getCanvasHW().width-r;return Math.max(null==t?void 0:t.width,i/Math.max(1,o))}return null==t?void 0:t.width},t.prototype.getColNodeHeight=function(e,t){var n=this.cfg.colCfg,r=pv(null==n?void 0:n.heightByField)[0]||(null==n?void 0:n.height);if(!t)return r;if(e.children&&e.children.length)return r;for(;e.parent;)t-=Hw(e)?0:r,e=e.parent;return t},t.prototype.calculateColNodesCoordinate=function(e,t){var n,r,o,i,a,s,l=bw.blankNode(),c=t.getNodes();try{for(var u=ca(t.sampleNodesForAllLevels),d=u.next();!d.done;d=u.next()){var h=d.value;h.height=this.getColNodeHeight(h),t.height+=h.height}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var f=this.getAdaptiveColWidth(e),p=0,g=0;g<c.length;g++)(w=c[g]).isLeaf&&(w.colIndex=p,p+=1,w.x=l.x+l.width,w.width=this.calculateColLeafNodesWidth(w,f),Tw(this.cfg,null,w),t.width+=w.width,l=w),0===w.level?w.y=0:w.y=null!==(a=(null===(o=w.parent)||void 0===o?void 0:o.y)+(null===(i=w.parent)||void 0===i?void 0:i.height))&&void 0!==a?a:0,w.height=this.getColNodeHeight(w,t.height);var v=c.filter((function(e){return Hw(e)})),m=dx(null===(s=this.spreadsheet)||void 0===s?void 0:s.options,v.length).frozenTrailingColCount;l=bw.blankNode();var y=this.getCanvasHW().width;if(m>0){var C=jw(v,0,m).trailingColCount,b=c.filter((function(e){return e.isLeaf}));for(g=1;g<=C;g++){var w;(w=b[b.length-g]).x=1===g?y-w.width:l.x-w.width,l=w}}this.autoCalculateColNodeWidthAndX(e)},t.prototype.autoCalculateColNodeWidthAndX=function(e){for(var t=null,n=e.slice(0);n.length;){var r=n.shift().parent;t!==r&&r&&(n.push(r),r.x=r.children[0].x,r.width=r.children.map((function(e){return e.width})).reduce((function(e,t){return e+t}),0),t=r)}},t.prototype.calculateColLeafNodesWidth=function(e,t){var n=this.cfg,r=n.colCfg,o=n.dataSet,i=n.spreadsheet,a=this.spreadsheet.getLayoutWidthType(),s=this.getCellDraggedWidth(e);if(Kv(s))return s;var l,c,u,d,h,f,p=this.getCellCustomWidth(e,null==r?void 0:r.width);if(Kv(p))return p;if(a===ta.Compact){var g=o.getDisplayDataSet(),v=o.getFieldFormatter(e.field),m=mm(null==g?void 0:g.slice(0,50).map((function(t){var n;return"".concat(null!==(n=null==v?void 0:v(t[e.field]))&&void 0!==n?n:t[e.field])})),(function(e){return i.measureTextWidthRoughly(e)}));Uw.getInstance().logger("Max Label In Col:",e.field,m);var y=i.theme.colCell.bolderText,C=i.theme.dataCell,b=C.text,w=C.cell,x=i.measureTextWidth(m,b)+w.padding.left+w.padding.right+1,E=i.measureTextWidth(e.label,y)+(c=this.spreadsheet,u=e,d=i.theme.colCell,h=yu(d,"cell.padding"),f=hS(c,u.field,d),h.left+h.right+function(e,t,n,r){var o,i,a,s=yu(r,"size"),l=yu(r,"margin");return(a=e.options.showDefaultHeaderActionIcon?1:null!==(i=null===(o=PE(e.options.headerActionIcons,t,n))||void 0===o?void 0:o.iconNames.length)&&void 0!==i?i:0)*(s+l.left)+(a>0?l.right:0)}(c,u,zi.COL_CELL,yu(d,"icon"))+f.left+f.right);l=Math.max(E,x)}else l=t;return e.field===ai&&(l=this.getSeriesNumberWidth()),l},t.prototype.getDefaultCellHeight=function(){var e=this.cfg.cellCfg;return null==e?void 0:e.height},t.prototype.getCellHeight=function(e){if(this.rowOffsets){var t=yu(this.spreadsheet,"options.style.rowCfg.heightByField",{}),n=null==t?void 0:t[String(e)];if(Kv(n))return n}return this.getDefaultCellHeight()},t.prototype.initRowOffsets=function(){var e=this,t=this.cfg.dataSet,n=yu(this.spreadsheet,"options.style.rowCfg.heightByField",{});if(Object.keys(n).length){var r=t.getDisplayDataSet();this.rowOffsets=[0];var o=0;r.forEach((function(t,r){var i,a=null!==(i=null==n?void 0:n[String(r)])&&void 0!==i?i:e.getDefaultCellHeight(),s=o+a;e.rowOffsets.push(s),o=s}))}},t.prototype.getViewCellHeights=function(){var e=this,t=this.cfg.dataSet;this.initRowOffsets();var n=this.getDefaultCellHeight();return{getTotalHeight:function(){return e.rowOffsets?ig(e.rowOffsets):n*t.getDisplayDataSet().length},getCellOffsetY:function(t){if(t<=0)return 0;if(e.rowOffsets)return e.rowOffsets[t];for(var r=0,o=0;o<t;o++)r+=n;return r},getTotalLength:function(){return t.getDisplayDataSet().length},getIndexRange:function(t,r){if(e.rowOffsets)return PT(e.rowOffsets,t,r);var o=Math.floor(t/n),i=r%n==0?r/n-1:Math.floor(r/n);return{start:Math.max(0,o),end:Math.max(0,i)}}}},t.prototype.init=function(){e.prototype.init.call(this);var t=this.panelBBox,n=t.width,r=t.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:r}})},t.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,t=e.x,n=e.width,r=e.viewportHeight,o=e.viewportWidth;return new oL({width:n,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:r,cornerWidth:this.cornerBBox.width,position:{x:t,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.updateRowResizeArea=function(){var e=this.spreadsheet,t=e.foregroundGroup,n=yu(e.options,"interaction.resize");if(jv(n)?n:null==n?void 0:n.rowCellVertical){var r=t.findById(pi),o=t.findById(gi);r&&r.set("children",[]),o&&o.set("children",[]),FT(this.panelGroup.getChildren(),gS).filter((function(e){return e.shouldDrawResizeArea()})).forEach((function(e){e.drawResizeArea()}))}},t.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),e.prototype.render.call(this),this.initFrozenGroupPosition()},t.prototype.calculateFrozenGroupInfo=function(){var e=this.getFrozenOptions(),t=e.frozenColCount,n=e.frozenRowCount,r=e.frozenTrailingColCount,o=e.frozenTrailingRowCount,i=this.layoutResult.colNodes.filter((function(e){return Hw(e)})),a=this.viewCellHeights,s=this.getCellRange(),l=this.frozenGroupInfo,c=l.frozenCol,u=l.frozenTrailingCol,d=l.frozenRow,h=l.frozenTrailingRow;t>0&&(c.width=i[t-1].x+i[t-1].width-0,c.range=[0,t-1]),n>0&&(d.height=a.getCellOffsetY(s.start+n)-a.getCellOffsetY(s.start),d.range=[s.start,s.start+n-1]),r>0&&(u.width=i[i.length-1].x-i[i.length-r].x+i[i.length-1].width,u.range=[i.length-r,i.length-1]),o>0&&(h.height=a.getCellOffsetY(s.end+1)-a.getCellOffsetY(s.end+1-o),h.range=[s.end-o+1,s.end])},t.prototype.getRowHeader=function(){return null},t.prototype.getSeriesNumberHeader=function(){return null},t.prototype.translateRelatedGroups=function(t,n,r){var o=this,i=this.spreadsheet,a=i.frozenColGroup,s=i.frozenTrailingColGroup;[i.frozenRowGroup,i.frozenTrailingRowGroup].forEach((function(e){Fw(e,o.cornerBBox.width-t)})),[a,s].forEach((function(e){!function(e,t){var n,r=null==e?void 0:e.getMatrix(),o=null!==(n=null==r?void 0:r[7])&&void 0!==n?n:0;null==e||e.translate(0,t-o)}(e,o.cornerBBox.height-n)})),e.prototype.translateRelatedGroups.call(this,t,n,r),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(t,n)},t.prototype.calculateXYIndexes=function(e,t){var n=this.layoutResult.colLeafNodes.length,r=this.getCellRange(),o=this.panelBBox,i=o.viewportHeight,a=o.viewportWidth,s=this.getFrozenOptions(),l=s.frozenColCount,c=s.frozenRowCount,u=s.frozenTrailingColCount,d=s.frozenTrailingRowCount,h={width:a,height:i,x:0,y:0};if(u>0||l>0){var f=this.frozenGroupInfo,p=f.frozenTrailingCol,g=f.frozenCol;h.width-=p.width+g.width,h.x+=g.width}if(d>0||c>0){var v=this.frozenGroupInfo,m=v.frozenRow,y=v.frozenTrailingRow;h.height<m.height+y.height?(h.height=0,h.y=0):(h.height-=m.height+y.height,h.y+=m.height)}var C=kw(e,t,this.viewCellWidths,this.viewCellHeights,h,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=C;var b=this.getRealFrozenColumns(l,u);return function(e,t,n,r){var o=t.frozenColCount,i=t.frozenRowCount,a=t.frozenTrailingColCount,s=t.frozenTrailingRowCount,l=da([],ua(e),!1);Aw(l[0],o)&&(l[0]=o),Rw(l[1],a,n)&&(l[1]=n-a-1),Dw(l[2],r.start,i)&&(l[2]=r.start+i),Pw(l[3],r.end,s)&&(l[3]=r.end-s);var c=da([],ua(l),!1);c[2]=r.start,c[3]=r.start+i-1;var u=da([],ua(l),!1);u[0]=0,u[1]=o-1;var d=da([],ua(l),!1);d[2]=r.end+1-s,d[3]=r.end;var h=da([],ua(l),!1);return h[0]=n-a,h[1]=n-1,{center:l,frozenRow:c,frozenCol:u,frozenTrailingCol:h,frozenTrailingRow:d}}(C,{frozenColCount:b.colCount,frozenRowCount:c,frozenTrailingColCount:b.trailingColCount,frozenTrailingRowCount:d},n,r)},t.prototype.clip=function(e,t){var n,r,o=this.layoutResult.colLeafNodes,i=this.getPaginationScrollY(),a=this.spreadsheet,s=a.frozenRowGroup,l=a.frozenColGroup,c=a.frozenTrailingColGroup,u=a.frozenTrailingRowGroup,d=a.panelScrollGroup,h=l.getBBox().width,f=s.getBBox().height,p=c.getBBox(),g=u.getBBox().height,v=this.panelBBox.width-h-c.getBBox().width,m=this.panelBBox.height-f-g;d.setClip({type:"rect",attrs:{x:e+h,y:t+f,width:v,height:m}}),s.setClip({type:"rect",attrs:{x:e+h,y:i,width:v,height:f}}),u.setClip({type:"rect",attrs:{x:e+h,y:u.getBBox().minY,width:v,height:g}});var y={y:t+f,height:m};l.setClip({type:"rect",attrs:sa(sa({},y),{x:0,width:h})}),c.setClip({type:"rect",attrs:sa(sa({},y),{x:p.minX,width:p.width})});var C=this.spreadsheet.foregroundGroup.findById(pi);C&&C.setClip({type:"rect",attrs:{x:0,y:f+this.cornerBBox.height,width:null!==(r=null===(n=null==o?void 0:o[0])||void 0===n?void 0:n.width)&&void 0!==r?r:0,height:m}})},t.prototype.updatePanelScrollGroup=function(){var t=this;e.prototype.updatePanelScrollGroup.call(this),[Oi.FROZEN_COL,Oi.FROZEN_ROW,Oi.FROZEN_TRAILING_COL,Oi.FROZEN_TRAILING_ROW].forEach((function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var o=ua(t.frozenGroupInfo[e].range,2),i=o[0],a=o[1];if(n=t.gridInfo.cols,r=zT(i,a,t.viewCellHeights),e===Oi.FROZEN_TRAILING_ROW){var s=t.spreadsheet.frozenTrailingRowGroup.getBBox().minY;r=function(e,t,n,r){var o=zT(e,t,r),i=r.getCellOffsetY(e);return o.map((function(e){return e-i+n}))}(i,a,Math.ceil(s),t.viewCellHeights)}}else{var l=ua(t.frozenGroupInfo[e].range,2),c=l[0],u=l[1],d=t.layoutResult.colNodes.filter((function(e){return Hw(e)}));n=jT(c,u,d),r=t.gridInfo.rows}t.spreadsheet["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}}))},t}(QT),aL=function(e){function t(t){var n=e.call(this,t)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(e,t){void 0===t&&(t=wi);var r=n.getBBox(),o=n.s2,i=o.theme,a=o.isTableMode,s=i.dataCell.cell,l=a()&&(t===wi||t===ci);n.gridGroup&&n.findById(t)||(n.gridGroup=n.addGroup({id:t})),n.gridGroup.clear(),n.gridInfo=e,l&&n.gridInfo.cols.unshift(0);var c=s.verticalBorderWidth,u=s.verticalBorderWidth/2;n.gridInfo.cols.forEach((function(e){gx(n.gridGroup,{x1:e,x2:e,y1:Math.ceil(r.minY+u),y2:Math.floor(r.maxY-u)},{stroke:s.verticalBorderColor,strokeOpacity:s.verticalBorderColorOpacity,lineWidth:c,lineCap:_i})}));var d=s.horizontalBorderWidth,h=s.horizontalBorderWidth/2;n.gridInfo.rows.forEach((function(e){gx(n.gridGroup,{x1:Math.ceil(r.minX+h),x2:Math.floor(r.maxX-h),y1:e,y2:e},{stroke:s.horizontalBorderColor,strokeOpacity:s.horizontalBorderColorOpacity,lineWidth:d,lineCap:_i})})),n.gridGroup.toFront()},n.s2=t.s2,n}return aa(t,e),t}(vo),sL=function(e){function t(t){var n=e.call(this,t)||this;return n.initMergedCellsGroup(),n}return aa(t,e),t.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(si)||(this.mergedCellsGroup=this.addGroup({id:si}))},t.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),function(e,t){var n,r=null===(n=e.options)||void 0===n?void 0:n.mergedCellsInfo;if(!Vv(r)){var o=e.interaction.getPanelGroupAllDataCells();if(!Vv(o)){var i=[];r.forEach((function(t){var n=SE(o,e,t);n.cells.length>0&&i.push(n)}));var a=t.getChildren(),s=function(e){return Yg(e,(function(e){return{cells:e.cells,viewMeta:e.getMeta()}}))}(a),l=TE(s,i),c=TE(i,s);fg(l,(function(e){var t=Fg(a,(function(t){return Yv(t.getMeta().id,e.viewMeta.id)}));null==t||t.remove(!0)})),fg(c,(function(n){var r=n.cells,o=n.viewMeta;t.add(IE(e,r,o))}))}}}(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},t.prototype.addMergeCell=function(e){var t;null===(t=this.mergedCellsGroup)||void 0===t||t.add(e)},t.prototype.update=function(e){this.updateGrid(e),this.updateMergedCells()},t}(aL),lL=function(){function e(e){var t=this;this.isLinkFieldText=function(e){var n=t.getCellAppendInfo(e);return null==n?void 0:n.isLinkFieldText},this.spreadsheet=e,this.bindEvents()}return e.prototype.getCellAppendInfo=function(e){var t,n;return(null===(t=null==e?void 0:e.attr)||void 0===t?void 0:t.call(e,"appendInfo"))||(null===(n=null==e?void 0:e.attrs)||void 0===n?void 0:n.appendInfo)||{}},e.prototype.reset=function(){},e}(),cL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(Jo.DATA_CELL_CLICK,(function(t){var n;t.stopPropagation();var r=e.spreadsheet.interaction;if(r.clearHoverTimer(),!r.hasIntercepts([Vi.CLICK]))if(e.isLinkFieldText(t.target))e.emitLinkFieldClickEvent(t);else{var o=e.spreadsheet.getCell(t.target),i=o.getMeta();if(i)if(r.addIntercepts([Vi.HOVER]),r.isSelectedCell(o))1===(null===(n=t.originalEvent)||void 0===n?void 0:n.detail)&&r.reset();else{r.changeState({cells:[CS(o)],stateName:ji.SELECTED,onUpdateCells:ES}),e.spreadsheet.emit(Jo.GLOBAL_SELECTED,[o]),e.showTooltip(t,i);var a=i.rowId,s=i.colId,l=i.spreadsheet,c=r.getSelectedCellHighlight(),u=c.colHeader,d=c.rowHeader;if(u&&pE(s,r.getAllColHeaderCells(),ji.SELECTED),d&&a){var h=function(e,t){var n=t.interaction,r=t.facet,o=t.options;if(t.isTableMode()){if(!o.showSeriesNumber)return[];var i=r.layoutResult.colLeafNodes[0].id,a=yE(String(e.rowIndex),i),s=[],l=n.getAllCells().find((function(e){return e.getMeta().id===a}));return l&&l instanceof vS&&s.push(l),s}return fE(e.rowId,n.getAllRowHeaderCells(),t.isHierarchyTreeType())}(i,l);fg(h,(function(e){e.updateByState(ji.SELECTED)}))}}}}))},t.prototype.getTooltipOperator=function(e,t){var n=this,r={key:"trend",text:hw("趋势"),icon:"Trend"},o=this.spreadsheet.getCell(e.target),i=TT(this.spreadsheet,e).operation,a=i.trend&&sa(sa({},r),{onClick:function(){n.spreadsheet.emit(Jo.DATA_CELL_TREND_ICON_CLICK,sa(sa({},t),{record:n.spreadsheet.isTableMode()?n.spreadsheet.dataSet.getCellData({query:{rowIndex:t.rowIndex}}):void 0})),n.spreadsheet.hideTooltip()}});return LT(i,{defaultMenus:[a],cell:o})},t.prototype.showTooltip=function(e,t){var n=t.data,r=t.isTotals,o=void 0!==r&&r,i=t.value,a=t.fieldValue,s=t.field,l=t.valueField,c=n,u=this.spreadsheet.isTableMode(),d=[(u?sa(sa({},c),{value:i||a,valueField:s||l}):c)||sa(sa({},t.rowQuery),t.colQuery)],h=this.getTooltipOperator(e,t);this.spreadsheet.showTooltipWithInfo(e,d,{isTotals:o,operator:h,enterable:!0,hideSummary:!0,showSingleTips:u})},t.prototype.emitLinkFieldClickEvent=function(e){var t=this.getCellAppendInfo(e.target).cellData,n=t.valueField,r=t.data;this.spreadsheet.emit(Jo.GLOBAL_LINK_FIELD_JUMP,{key:n,cellData:t,record:Object.assign({rowIndex:t.rowIndex},r)})},t}(lL),uL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(Jo.MERGED_CELLS_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.interaction;n.hasIntercepts([Vi.CLICK])||n.addIntercepts([Vi.HOVER])}))},t}(lL),dL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t.handleRowColClick=function(e){if(e.stopPropagation(),!t.isLinkFieldText(e.target)){var n=t.spreadsheet,r=n.interaction,o=n.options,i=t.spreadsheet.getCell(e.target),a=!(!o.interaction.multiSelection||!t.isMultiSelection);r.selectHeaderCell({cell:i,isMultiSelection:a})&&t.showTooltip(e)}},t.getHideColumnField=function(e){return t.spreadsheet.isTableMode()?e.field:e.id},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},t.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Vi.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_DOWN,(function(t){mS(t)&&(e.isMultiSelection=!0)}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_UP,(function(t){mS(t)&&e.reset()}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_MOVE,(function(t){e.isMultiSelection&&!yS(t)&&e.reset()}))},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(Jo.ROW_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(Jo.COL_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},t.prototype.showTooltip=function(e){var t=TT(this.spreadsheet,e),n=t.operation;if(t.showTooltip){var r=this.spreadsheet.interaction,o=r.isSelectedState()?Yg(r.getActiveCells(),(function(e){var t=e.getMeta();return zc({},t.query||{},Ty(t,["colIndex","rowIndex"]))})):[],i=this.getTooltipOperator(e,n);this.spreadsheet.showTooltipWithInfo(e,o,{showSingleTips:!0,operator:i})}},t.prototype.getTooltipOperator=function(e,t){var n=this,r=this.spreadsheet.getCell(e.target),o=r.getMeta(),i=r.cellType===zi.COL_CELL,a=1===this.spreadsheet.getColumnLeafNodes().length,s={key:"hiddenColumns",text:hw("隐藏"),icon:"EyeOutlined"},l=i&&!a&&o.isLeaf&&t.hiddenColumns&&sa(sa({},s),{onClick:function(){n.hideSelectedColumns()}});return LT(t,{defaultMenus:[l],cell:r})},t.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(Jo.LAYOUT_COLS_EXPANDED,(function(t){e.handleExpandIconClick(t)}))},t.prototype.hideSelectedColumns=function(){var e=this.spreadsheet.interaction.getActiveCells().map((function(e){return e.getMeta()})).map(this.getHideColumnField);_E(this.spreadsheet,e,!0)},t.prototype.handleExpandIconClick=function(e){var t=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=(Gg(t,(function(t){var n=t.displaySiblingNode;return NE(n,e.id)}))||{}).hideColumnNodes,r=void 0===n?[]:n,o=this.spreadsheet.options.interaction.hiddenColumnFields,i=r.map(this.getHideColumnField),a=og(o,i),s=t.filter((function(t){var n=t.displaySiblingNode;return!NE(n,e.id)}));this.spreadsheet.setOptions({interaction:{hiddenColumnFields:a}}),this.spreadsheet.store.set("hiddenColumnsDetail",s),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},t}(lL),hL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRowData=function(e){var n,r=e.getHeadLeafChild(),o=t.spreadsheet.dataSet.getMultiData(null==r?void 0:r.query,null==r?void 0:r.isTotals,!0)[0];return sa(sa({},o),{rowIndex:null!==(n=e.rowIndex)&&void 0!==n?n:r.rowIndex})},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindRowCellClick()},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(Jo.ROW_CELL_CLICK,(function(t){if(!e.spreadsheet.interaction.hasIntercepts([Vi.CLICK])&&e.isLinkFieldText(t.target)){var n=e.getCellAppendInfo(t.target).cellData,r=n.key,o=e.getRowData(n);e.spreadsheet.emit(Jo.GLOBAL_LINK_FIELD_JUMP,{key:r,cellData:n,record:o})}}))},t}(lL),fL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.bindEvents=function(){this.bindCornerCellClick()},t.prototype.bindCornerCellClick=function(){var e=this;this.spreadsheet.on(Jo.CORNER_CELL_CLICK,(function(t){var n,r=e.spreadsheet.interaction,o=e.spreadsheet.getCell(t.target);if(o){var i=o.getMeta(),a=e.getRowNodesByField(null==i?void 0:i.field),s=null===(n=a[0])||void 0===n?void 0:n.belongsCell,l=e.getRowCells(a);if(s&&r.isSelectedCell(s))return r.reset(),void e.spreadsheet.emit(Jo.GLOBAL_SELECTED,r.getActiveCells());Vv(a)||Vv(l)||(r.addIntercepts([Vi.HOVER]),r.changeState({cells:l,stateName:ji.SELECTED}),r.highlightNodes(a),e.showTooltip(t),e.spreadsheet.emit(Jo.GLOBAL_SELECTED,r.getActiveCells()))}}))},t.prototype.getRowNodesByField=function(e){return this.spreadsheet.getRowNodes().filter((function(t){return t.field===e}))},t.prototype.getRowCells=function(e){return e.map((function(e){return{id:e.id,colIndex:-1,rowIndex:-1,type:zi.ROW_CELL}}))},t.prototype.showTooltip=function(e){var t=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(e,[],{data:{summaries:[{selectedData:t,name:"",value:null}]}})},t}(lL),pL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},t.prototype.updateRowColCells=function(e){var t=e.rowId,n=e.colId,r=this.spreadsheet.interaction,o=r.getHoverHighlight(),i=o.rowHeader;o.colHeader&&pE(n,r.getAllColHeaderCells(),ji.HOVER),i&&t&&fg(fE(t,r.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType()),(function(e){e.updateByState(ji.HOVER)}))},t.prototype.changeStateToHoverFocus=function(e,t,n){var r,o=this,i=this.spreadsheet.interaction,a=this.spreadsheet.options.interaction.hoverFocus;i.clearHoverTimer();var s=function(){if(!i.hasIntercepts([Vi.HOVER])){i.changeState({cells:[CS(e)],stateName:ji.HOVER_FOCUS});var r=o.spreadsheet.isTableMode(),a={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:r},s=i.getHoverHighlight(),l=s.rowHeader,c=s.colHeader;(l||c)&&o.updateRowColCells(n);var u=o.getCellData(n,r);o.spreadsheet.showTooltipWithInfo(t,u,a)}},l=800;if(jv(a)||(l=null!==(r=null==a?void 0:a.duration)&&void 0!==r?r:800),0===l)s();else{var c=window.setTimeout((function(){return s()}),l);i.setHoverTimer(c)}},t.prototype.handleHeaderHover=function(e){var t=this.spreadsheet.getCell(e.target);if(!Vv(t)){var n=this.spreadsheet.interaction;n.clearHoverTimer(),n.isActiveCell(t)||(n.changeState({cells:[CS(t)],stateName:ji.HOVER}),t.update(),this.showEllipsisTooltip(e,t))}},t.prototype.showEllipsisTooltip=function(e,t){if(t&&t.getActualText()!==t.getFieldValue()){var n=t.getMeta(),r={isTotals:n.isTotals,enterable:!0,hideSummary:!0,showSingleTips:!0,enableFormat:this.spreadsheet.isPivotMode()},o=this.getCellData(n,!0);this.spreadsheet.showTooltipWithInfo(e,o,r)}},t.prototype.getCellData=function(e,t){void 0===e&&(e={});var n=e.data,r=e.query,o=e.value,i=e.field,a=e.fieldValue,s=e.valueField,l=e.rowQuery,c=e.colQuery,u=n;return t?[sa(sa({},r),{value:o||a,valueField:i||s})]:[u||sa(sa({},l),c)]},t.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(Jo.DATA_CELL_HOVER,(function(t){var n=e.spreadsheet.getCell(t.target);if(!Vv(n)){var r=e.spreadsheet,o=r.interaction,i=r.options.interaction,a=null==n?void 0:n.getMeta();if(!o.isActiveCell(n)){o.changeState({cells:[CS(n)],stateName:ji.HOVER});var s=o.getHoverHighlight(),l=s.rowHeader,c=s.colHeader;(l||c)&&e.updateRowColCells(a),i.hoverFocus&&e.changeStateToHoverFocus(n,t,a)}}}))},t.prototype.bindRowCellHover=function(){var e=this;this.spreadsheet.on(Jo.ROW_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},t.prototype.bindColCellHover=function(){var e=this;this.spreadsheet.on(Jo.COL_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},t.prototype.bindCornerCellHover=function(){var e=this;this.spreadsheet.on(Jo.CORNER_CELL_HOVER,(function(t){var n=e.spreadsheet.getCell(t.target);e.showEllipsisTooltip(t,n)}))},t}(lL),gL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.brushSelectionStage=Wi.UN_DRAGGED,t.brushSelectionMinimumMoveDistance=5,t.scrollAnimationComplete=!0,t.mouseMoveDistanceFromCanvas=0,t.setMoveDistanceFromCanvas=function(e,n,r){var o=0;if(n&&(o=e.x),r){var i=e.y;o=n?Math.max(i,o):i}t.mouseMoveDistanceFromCanvas=Math.abs(o)},t.formatBrushPointForScroll=function(e,n){var r,o,i,a;void 0===n&&(n=!1);var s=e.x,l=e.y,c=t.spreadsheet.facet,u=n?c.cornerBBox:c.panelBBox,d=u.minX,h=u.maxX,f=c.panelBBox,p=f.minY,g=f.maxY,v=(null===(r=t.endBrushPoint)||void 0===r?void 0:r.x)+s,m=(null===(o=t.endBrushPoint)||void 0===o?void 0:o.y)+l,y=!0,C=!0,b=null===(a=null===(i=c.vScrollBar)||void 0===i?void 0:i.getBBox())||void 0===a?void 0:a.width;return v>h?v=h-b-2:v<d?v=d+2:y=!1,m>g?m=g-2:m<=p?m=p+2:C=!1,{x:{value:v,needScroll:y},y:{value:m,needScroll:C}}},t.rectanglesIntersect=function(e,t){return e.maxX>t.minX&&e.minX<t.maxX&&e.minY<t.maxY&&e.maxY>t.minY},t.autoScrollIntervalId=null,t.autoScrollConfig=wf(na),t.validateYIndex=function(e){var n,r,o=t.spreadsheet.facet,i=o.frozenGroupInfo,a=0,s=null===(n=null==i?void 0:i.frozenRow)||void 0===n?void 0:n.range;if(s&&(a=s[1]+1),e<a)return null;var l=o.getCellRange().end,c=null===(r=null==i?void 0:i.frozenTrailingRow)||void 0===r?void 0:r.range;return c&&(l=c[0]-1),e>l?null:e},t.validateXIndex=function(e){var n,r,o=t.spreadsheet.facet,i=o.frozenGroupInfo,a=0,s=null===(n=null==i?void 0:i.frozenCol)||void 0===n?void 0:n.range;if(s&&(a=s[1]+1),e<a)return null;var l=o.layoutResult.colLeafNodes.length-1,c=null===(r=null==i?void 0:i.frozenTrailingCol)||void 0===r?void 0:r.range;return c&&(l=c[0]-1),e>l?null:e},t.adjustNextColIndexWithFrozen=function(e,n){var r=t.spreadsheet,o=r.facet,i=r.dataSet,a=r.options,s=i.getDisplayDataSet().length,l=o.layoutResult.colLeafNodes.length,c=dx(a,l,s),u=c.frozenTrailingColCount,d=c.frozenColCount,h=o.panelScrollGroupIndexes;return u>0&&n===Ki.SCROLL_DOWN&&Rw(e,u,l)?h[1]:d>0&&n===Ki.SCROLL_UP&&Aw(e,d)?h[0]:e},t.adjustNextRowIndexWithFrozen=function(e,n){var r=t.spreadsheet,o=r.facet,i=r.dataSet,a=r.options,s=i.getDisplayDataSet().length,l=o.layoutResult.colLeafNodes.length,c=o.getCellRange(),u=dx(a,l,s),d=u.frozenTrailingRowCount,h=u.frozenRowCount,f=o.panelScrollGroupIndexes;return d>0&&n===Ki.SCROLL_DOWN&&Pw(e,c.end,d)?f[3]:h>0&&n===Ki.SCROLL_UP&&Dw(e,c.start,h)?f[2]:e},t.getWillScrollRowIndexDiff=function(e){return e===Ki.SCROLL_DOWN?Zi.SCROLL_DOWN:Zi.SCROLL_UP},t.getDefaultWillScrollToRowIndex=function(e){var n=t.adjustNextRowIndexWithFrozen(t.endBrushPoint.rowIndex,e)+t.getWillScrollRowIndexDiff(e);return t.validateYIndex(n)},t.getWillScrollToRowIndex=function(e){return t.getDefaultWillScrollToRowIndex(e)},t.getNextScrollDelta=function(e){var n=t.spreadsheet.facet.getScrollOffset(),r=n.scrollX,o=n.scrollY,i=0,a=0;if(e.y.scroll){var s=e.y.value>0?Ki.SCROLL_DOWN:Ki.SCROLL_UP,l=t.getWillScrollToRowIndex(s),c=function(e,t,n){var r,o,i=n.facet,a=i.viewCellHeights.getCellOffsetY,s=i.panelBBox.height,l=a(e+1);if(Jv(l))return 0;var c=null==i?void 0:i.frozenGroupInfo,u=null!==(r=null==c?void 0:c.frozenRow.height)&&void 0!==r?r:0,d=null!==(o=null==c?void 0:c.frozenTrailingRow.height)&&void 0!==o?o:0;return t===Ki.SCROLL_UP?a(e)-u:l-(s-d)}(l,s,t.spreadsheet)-o;a=Jv(l)||Jv(c)||Number.isNaN(c)?0:c}if(e.x.scroll){s=e.x.value>0?Ki.SCROLL_DOWN:Ki.SCROLL_UP;var u=t.adjustNextColIndexWithFrozen(t.endBrushPoint.colIndex,s),d=t.validateXIndex(u+(e.x.value>0?1:-1));i=Jv(d)?0:function(e,t,n){var r,o,i=n.facet,a=i.panelBBox.width,s=null==i?void 0:i.frozenGroupInfo,l=null!==(r=null==s?void 0:s.frozenCol.width)&&void 0!==r?r:0,c=null!==(o=null==s?void 0:s.frozenTrailingCol.width)&&void 0!==o?o:0,u=i.layoutResult.colLeafNodes[e];return t===Ki.SCROLL_UP?u.x-l:u.x+u.width-(a-c)}(d,s,t.spreadsheet)-r}return{x:i,y:a}},t.onScrollAnimationComplete=function(){t.scrollAnimationComplete=!0,t.brushSelectionStage!==Wi.UN_DRAGGED&&t.renderPrepareSelected(t.endBrushPoint)},t.autoScroll=function(e){if(void 0===e&&(e=!1),t.brushSelectionStage!==Wi.UN_DRAGGED&&t.scrollAnimationComplete){var n=t.autoScrollConfig,r=t.spreadsheet.facet.getScrollOffset(),o=e?"rowHeaderOffsetX":"offsetX",i={rowHeaderOffsetX:{value:r.rowHeaderScrollX,animate:!0},offsetX:{value:r.scrollX,animate:!0},offsetY:{value:r.scrollY,animate:!0}},a=t.getNextScrollDelta(n),s=a.x,l=a.y;if(0!==l||0!==s){if(n.y.scroll&&(i.offsetY.value+=l),n.x.scroll){var c=i[o];c.value+=s,c.value<0&&(c.value=0)}t.scrollAnimationComplete=!1;var u=n.x.scroll?1:3,d=Math.max(16,300-t.mouseMoveDistanceFromCanvas*u);t.spreadsheet.facet.scrollWithAnimation(i,d,t.onScrollAnimationComplete)}else t.clearAutoScroll()}},t.handleScroll=WC((function(e,n,r){if(void 0===r&&(r=!1),t.brushSelectionStage!==Wi.UN_DRAGGED){var o=t.formatBrushPointForScroll({x:e,y:n},r),i=o.x,a=i.value,s=i.needScroll,l=o.y,c=l.value,u=l.needScroll,d=t.autoScrollConfig;u&&(d.y.value=n,d.y.scroll=!0),s&&(d.x.value=e,d.x.scroll=!0),t.setMoveDistanceFromCanvas({x:e,y:n},s,u),t.renderPrepareSelected({x:a,y:c}),(u||s)&&(t.clearAutoScroll(),t.autoScroll(r),t.autoScrollIntervalId=setInterval((function(){t.autoScroll(r)}),16))}}),30),t.clearAutoScroll=function(){t.autoScrollIntervalId&&(clearInterval(t.autoScrollIntervalId),t.autoScrollIntervalId=null,t.resetScrollDelta())},t.onUpdateCells=function(e,t){return t()},t.showPrepareSelectedCells=function(){t.brushRangeCells=t.getBrushRangeCells(),t.spreadsheet.interaction.changeState({cells:Yg(t.brushRangeCells,(function(e){return CS(e)})),stateName:ji.PREPARE_SELECT,force:!0,onUpdateCells:t.onUpdateCells})},t.renderPrepareSelected=function(e){var n=e.x,r=e.y,o=t.spreadsheet.container.getShape(n,r),i=t.spreadsheet.getCell(o);if(i&&(i instanceof bE||i instanceof dS||i instanceof eS)){var a=i.getMeta(),s=a.rowIndex,l=a.colIndex;t.endBrushPoint={x:n,y:r,rowIndex:s,colIndex:l};var c=t.spreadsheet.interaction;c.addIntercepts([Vi.HOVER]),c.clearStyleIndependent(),t.isValidBrushSelection()&&(t.showPrepareSelectedCells(),t.updatePrepareSelectMask())}},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.getPrepareSelectMaskTheme=function(){var e;return null===(e=this.spreadsheet.theme)||void 0===e?void 0:e.prepareSelectMask},t.prototype.initPrepareSelectMaskShape=function(){var e=this.spreadsheet.foregroundGroup;if(e){e.removeChild(this.prepareSelectMaskShape);var t=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=e.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:null==t?void 0:t.backgroundColor,fillOpacity:null==t?void 0:t.backgroundOpacity,zIndex:5},capture:!1})}},t.prototype.setBrushSelectionStage=function(e){this.brushSelectionStage=e},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW(),n=t.height,r=t.width,o=this.spreadsheet.facet.panelBBox,i=o.minX,a=o.minY;return e.x>i&&e.x<r&&e.y>a&&e.y<n},t.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(Wi.UN_DRAGGED)},t.prototype.isValidBrushSelection=function(){var e=this.getBrushRange(),t=e.start,n=e.end;return n.x-t.x>this.brushSelectionMinimumMoveDistance||n.y-t.y>this.brushSelectionMinimumMoveDistance},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},t.prototype.updatePrepareSelectMask=function(){var e=this.getBrushRange(),t=this.getPrepareSelectMaskPosition(e),n=t.x,r=t.y;this.prepareSelectMaskShape.attr({x:n,y:r,width:e.width,height:e.height}),this.prepareSelectMaskShape.show()},t.prototype.hidePrepareSelectMaskShape=function(){var e;null===(e=this.prepareSelectMaskShape)||void 0===e||e.hide()},t.prototype.resetScrollDelta=function(){this.autoScrollConfig=wf(na)},t.prototype.getBrushPoint=function(e){var t=this.spreadsheet.facet.getScrollOffset(),n=t.scrollY,r=t.scrollX,o={x:null==e?void 0:e.x,y:null==e?void 0:e.y},i=this.spreadsheet.getCell(e.target).getMeta(),a=i.colIndex,s=i.rowIndex;return sa(sa({},o),{rowIndex:s,colIndex:a,scrollY:n,scrollX:r})},t.prototype.getBrushRange=function(){var e,t,n,r,o,i,a,s,l=this.spreadsheet.facet.getScrollOffset(),c=l.scrollX,u=l.scrollY,d=Math.min(this.startBrushPoint.rowIndex,null===(e=this.endBrushPoint)||void 0===e?void 0:e.rowIndex),h=Math.max(this.startBrushPoint.rowIndex,null===(t=this.endBrushPoint)||void 0===t?void 0:t.rowIndex),f=Math.min(this.startBrushPoint.colIndex,null===(n=this.endBrushPoint)||void 0===n?void 0:n.colIndex),p=Math.max(this.startBrushPoint.colIndex,null===(r=this.endBrushPoint)||void 0===r?void 0:r.colIndex),g=this.startBrushPoint.x+this.startBrushPoint.scrollX-c,v=this.startBrushPoint.y+this.startBrushPoint.scrollY-u,m=Math.min(g,null===(o=this.endBrushPoint)||void 0===o?void 0:o.x),y=Math.max(g,null===(i=this.endBrushPoint)||void 0===i?void 0:i.x),C=Math.min(v,null===(a=this.endBrushPoint)||void 0===a?void 0:a.y),b=Math.max(v,null===(s=this.endBrushPoint)||void 0===s?void 0:s.y);return{start:{rowIndex:d,colIndex:f,x:m,y:C},end:{rowIndex:h,colIndex:p,x:y,y:b},width:y-m,height:b-C}},t.prototype.getBrushRangeCells=function(){var e=this;return this.setDisplayedCells(),this.displayedCells.filter((function(t){var n=t.getMeta();return e.isInBrushRange(n)}))},t.prototype.mouseDown=function(e){var t;null===(t=null==e?void 0:e.preventDefault)||void 0===t||t.call(e),this.spreadsheet.interaction.hasIntercepts([Vi.CLICK])||(this.setBrushSelectionStage(Wi.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(e))},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Vi.BRUSH_SELECTION])},t.prototype.bindMouseUp=function(e){var t=this;void 0===e&&(e=!1),this.spreadsheet.on(Jo.GLOBAL_MOUSE_UP,(function(n){if(t.brushSelectionStage===Wi.DRAGGED){if(e&&t.clearAutoScroll(),t.isValidBrushSelection()){t.addBrushIntercepts(),t.updateSelectedCells();var r=IT(t.spreadsheet);t.spreadsheet.showTooltipWithInfo(n,r)}t.spreadsheet.interaction.getCurrentStateName()===ji.PREPARE_SELECT&&t.spreadsheet.interaction.reset(),t.resetDrag()}else t.resetDrag()})),this.spreadsheet.on(Jo.GLOBAL_CONTEXT_MENU,(function(){t.brushSelectionStage!==Wi.UN_DRAGGED&&(t.spreadsheet.interaction.removeIntercepts([Vi.HOVER]),t.resetDrag())}))},t.prototype.autoBrushScroll=function(e,t){var n,r;if(void 0===t&&(t=!1),this.clearAutoScroll(),!this.isPointInCanvas(e)){var o=(null==e?void 0:e.x)-(null===(n=this.endBrushPoint)||void 0===n?void 0:n.x),i=(null==e?void 0:e.y)-(null===(r=this.endBrushPoint)||void 0===r?void 0:r.y);return this.handleScroll(o,i,t),!0}return!1},t.prototype.emitBrushSelectionEvent=function(e,t){this.spreadsheet.emit(e,t),this.spreadsheet.emit(Jo.GLOBAL_SELECTED,t),Vv(t)&&this.spreadsheet.interaction.removeIntercepts([Vi.HOVER])},t.prototype.getVisibleBrushRangeCells=function(e){return this.brushRangeCells.find((function(t){var n=t.getMeta();return(null==n?void 0:n.id)===e}))},t.prototype.isInBrushRange=function(e){return!1},t.prototype.bindMouseDown=function(){},t.prototype.bindMouseMove=function(){},t.prototype.updateSelectedCells=function(){},t.prototype.getPrepareSelectMaskPosition=function(e){return{x:e.start.x,y:e.start.y}},t}(lL),vL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.onUpdateCells=function(e){return e.updateCells(e.getAllColHeaderCells())},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(Jo.COL_CELL_MOUSE_DOWN,(function(n){e.prototype.mouseDown.call(t,n)}))},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW().width,n=this.spreadsheet.facet.cornerBBox,r=n.width,o=n.minY,i=n.maxY;return e.x>=r&&e.x<=t&&e.y>=o&&e.y<=i},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.COL_CELL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Wi.UN_DRAGGED){e.setBrushSelectionStage(Wi.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t.originalEvent);e.isPointInCanvas(n)&&e.renderPrepareSelected(n)}}))},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},t.prototype.isInBrushRange=function(e){var t=this.getBrushRange(),n=t.start,r=t.end,o=this.spreadsheet.facet.getScrollOffset().scrollX,i=this.spreadsheet.facet.cornerBBox,a=e.x,s=void 0===a?0:a,l=e.y,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,f=void 0===h?0:h;return this.rectanglesIntersect({minX:n.x-i.width+o,minY:n.y,maxX:r.x-i.width+o,maxY:r.y},{minX:s,maxX:s+d,minY:c,maxY:c+f})},t.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:Yg(this.brushRangeCells,CS),stateName:ji.SELECTED,onUpdateCells:function(e){e.updateCells(e.getAllColHeaderCells())}}),this.spreadsheet.emit(Jo.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(Jo.GLOBAL_SELECTED,this.brushRangeCells),Vv(this.brushRangeCells)&&e.removeIntercepts([Vi.HOVER])},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Vi.COL_BRUSH_SELECTION])},t}(gL),mL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.getSelectedCellMetas=function(e){var n=[],r=t.spreadsheet.facet.layoutResult,o=r.rowLeafNodes,i=void 0===o?[]:o,a=r.colLeafNodes,s=void 0===a?[]:a,l=Vy(e.start.rowIndex,e.end.rowIndex+1),c=Vy(e.start.colIndex,e.end.colIndex+1);return l.forEach((function(e){c.forEach((function(r){var o=String(s[r].id),a=Vv(i)?String(e):String(i[e].id);n.push({colIndex:r,rowIndex:e,id:"".concat(a,"-").concat(o),type:zi.DATA_CELL,rowId:a,colId:o,spreadsheet:t.spreadsheet})}))})),n},t}return aa(t,e),t.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(Jo.DATA_CELL_MOUSE_DOWN,(function(n){e.prototype.mouseDown.call(t,n),t.resetScrollDelta()}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Wi.UN_DRAGGED){e.setBrushSelectionStage(Wi.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t);e.autoBrushScroll(n)||e.renderPrepareSelected(n)}}))},t.prototype.isInBrushRange=function(e){var t=this.getBrushRange(),n=t.start,r=t.end,o=e.rowIndex,i=e.colIndex;return o>=n.rowIndex&&o<=r.rowIndex&&i>=n.colIndex&&i<=r.colIndex},t.prototype.updateSelectedCells=function(){var e=this.getBrushRange(),t=this.getSelectedCellMetas(e);this.spreadsheet.interaction.changeState({cells:t,stateName:ji.SELECTED,onUpdateCells:ES});var n=this.getScrollBrushRangeCells(t);this.emitBrushSelectionEvent(Jo.DATA_CELL_BRUSH_SELECTION,n)},t.prototype.getScrollBrushRangeCells=function(e){var t=this;return e.map((function(e){var n=t.getVisibleBrushRangeCells(e.id);if(n)return n;var r=t.spreadsheet.facet.layoutResult.getCellMeta(e.rowIndex,e.colIndex);return new(t.spreadsheet.isTableMode()?gS:bE)(r,t.spreadsheet)}))},t.prototype.bindMouseUp=function(){e.prototype.bindMouseUp.call(this,!0)},t.prototype.getPrepareSelectMaskPosition=function(e){var t=this.spreadsheet.facet.panelBBox,n=t.minX,r=t.minY;return{x:Math.max(e.start.x,n),y:Math.max(e.start.y,r)}},t}(gL),yL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInBrushRange=function(e){var n=t.getBrushRange(),r=n.start,o=n.end,i=t.spreadsheet.facet.getScrollOffset(),a=i.scrollY,s=i.rowHeaderScrollX,l=t.spreadsheet.facet.cornerBBox,c=e.x,u=void 0===c?0:c,d=e.y,h=void 0===d?0:d,f=e.width,p=void 0===f?0:f,g=e.height,v=void 0===g?0:g;return t.rectanglesIntersect({minX:r.x+s,minY:r.y-l.height+a,maxX:o.x+s,maxY:o.y-l.height+a},{minX:u,maxX:u+p,minY:h,maxY:h+v})},t.onUpdateCells=function(e){return e.updateCells(e.getAllRowHeaderCells())},t.getSelectedRowNodes=function(){return t.spreadsheet.getRowNodes().filter(t.isInBrushRange)},t.getVisibleRowLeafCellByScrollDirection=function(e){var n=t.spreadsheet.interaction.getAllRowHeaderCells();return e===Ki.SCROLL_DOWN?ig(n):n.find((function(e){return e.getMeta().isLeaf}))},t.getWillScrollToRowIndex=function(e){var n,r;if(!Jv(t.endBrushPoint.rowIndex))return t.getDefaultWillScrollToRowIndex(e);var o=t.getVisibleRowLeafCellByScrollDirection(e),i=(null!==(r=null===(n=null==o?void 0:o.getMeta())||void 0===n?void 0:n.rowIndex)&&void 0!==r?r:0)+t.getWillScrollRowIndexDiff(e);return t.validateYIndex(i)},t}return aa(t,e),t.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(Jo.ROW_CELL_MOUSE_DOWN,(function(n){e.prototype.mouseDown.call(t,n)}))},t.prototype.isPointInCanvas=function(e){var t=this.spreadsheet.facet.getCanvasHW().height,n=this.spreadsheet.facet.cornerBBox,r=n.minX,o=n.height,i=n.maxX;return e.x>=r&&e.x<=i&&e.y>=o&&e.y<=t},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_MOVE,(function(t){if(e.brushSelectionStage!==Wi.UN_DRAGGED){e.setBrushSelectionStage(Wi.DRAGGED);var n=e.spreadsheet.container.getPointByEvent(t);e.autoBrushScroll(n,!0)||e.renderPrepareSelected(n)}}))},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},t.prototype.updateSelectedCells=function(){var e=this.getSelectedRowNodes(),t=this.getScrollBrushRangeCells(e),n=Yg(t,CS);this.spreadsheet.interaction.changeState({cells:n,stateName:ji.SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(Jo.ROW_CELL_BRUSH_SELECTION,t)},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Vi.ROW_BRUSH_SELECTION])},t.prototype.getScrollBrushRangeCells=function(e){var t=this;return e.map((function(e){return t.getVisibleBrushRangeCells(e.id)||new dS(e,t.spreadsheet)}))},t.prototype.getPrepareSelectMaskPosition=function(e){var t=this.spreadsheet.facet.panelBBox.minY;return{x:e.start.x,y:Math.max(e.start.y,t)}},t}(gL),CL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t}return aa(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},t.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Vi.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_DOWN,(function(t){mS(t)&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([Vi.CLICK]))}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_UP,(function(t){mS(t)&&e.reset()}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_MOVE,(function(t){e.isMultiSelection&&!yS(t)&&e.reset()}))},t.prototype.getSelectedCells=function(e){var t=e.getMeta().id,n=this.spreadsheet.interaction,r=n.getCells([zi.DATA_CELL]);return n.getCurrentStateName()!==ji.SELECTED&&(r=[]),r.find((function(e){return e.id===t}))?r.filter((function(e){return e.id!==t})):da(da([],ua(r),!1),[CS(e)],!1)},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(Jo.DATA_CELL_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.getCell(t.target),r=n.getMeta(),o=e.spreadsheet,i=o.interaction;if(o.options,e.isMultiSelection&&r){var a=e.getSelectedCells(n);if(Vv(a))return i.clearState(),void e.spreadsheet.hideTooltip();i.addIntercepts([Vi.CLICK,Vi.HOVER]),e.spreadsheet.hideTooltip(),i.changeState({cells:a,stateName:ji.SELECTED,onUpdateCells:ES}),e.spreadsheet.emit(Jo.GLOBAL_SELECTED,i.getActiveCells()),e.spreadsheet.showTooltipWithInfo(t,IT(e.spreadsheet))}}))},t}(lL),bL=function(){function e(e){var t=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(e){return e instanceof Eo&&e.attrs.type===tx.type},this.onCanvasMousedown=function(e){if(t.target=e.target,t.spreadsheet.interaction.clearHoverTimer(),t.isResizeArea(e)){t.spreadsheet.emit(Jo.LAYOUT_RESIZE_MOUSE_DOWN,e);var n=function(n){if(!t.spreadsheet.getCanvasElement())return!1;t.spreadsheet.getCanvasElement()!==n.target&&(e.clientX=n.clientX,e.clientY=n.clientY,e.originalEvent=n,t.spreadsheet.emit(Jo.LAYOUT_RESIZE_MOUSE_MOVE,e))};return window.addEventListener("mousemove",n),void window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",n)}),{once:!0})}switch(t.spreadsheet.getCellType(e.target)){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_MOUSE_DOWN,e);break;case zi.ROW_CELL:t.spreadsheet.emit(Jo.ROW_CELL_MOUSE_DOWN,e);break;case zi.COL_CELL:t.spreadsheet.emit(Jo.COL_CELL_MOUSE_DOWN,e);break;case zi.CORNER_CELL:t.spreadsheet.emit(Jo.CORNER_CELL_MOUSE_DOWN,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_MOUSE_DOWN,e)}},this.onCanvasMousemove=function(e){if(t.canvasMousemoveEvent=e,t.isResizeArea(e))return t.activeResizeArea(e),void t.spreadsheet.emit(Jo.LAYOUT_RESIZE_MOUSE_MOVE,e);t.resetResizeArea();var n=t.spreadsheet.getCell(e.target);if(n){var r=n.cellType;switch(r){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_MOUSE_MOVE,e);break;case zi.ROW_CELL:t.spreadsheet.emit(Jo.ROW_CELL_MOUSE_MOVE,e);break;case zi.COL_CELL:t.spreadsheet.emit(Jo.COL_CELL_MOUSE_MOVE,e);break;case zi.CORNER_CELL:t.spreadsheet.emit(Jo.CORNER_CELL_MOUSE_MOVE,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_MOUSE_MOVE,e)}if(!t.hasBrushSelectionIntercepts())switch(t.spreadsheet.emit(Jo.GLOBAL_HOVER,e),r){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_HOVER,e);break;case zi.ROW_CELL:t.spreadsheet.emit(Jo.ROW_CELL_HOVER,e);break;case zi.COL_CELL:t.spreadsheet.emit(Jo.COL_CELL_HOVER,e);break;case zi.CORNER_CELL:t.spreadsheet.emit(Jo.CORNER_CELL_HOVER,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_HOVER,e)}}},this.onCanvasMouseup=function(e){if(t.isResizeArea(e))t.spreadsheet.emit(Jo.LAYOUT_RESIZE_MOUSE_UP,e);else{var n=t.spreadsheet.getCell(e.target);if(n){var r=n.cellType;if(t.target===e.target){var o=t.isGuiIconShape(e.target);switch(r){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_CLICK,e);break;case zi.ROW_CELL:if(o)break;t.spreadsheet.emit(Jo.ROW_CELL_CLICK,e);break;case zi.COL_CELL:if(o)break;t.spreadsheet.emit(Jo.COL_CELL_CLICK,e);break;case zi.CORNER_CELL:if(o)break;t.spreadsheet.emit(Jo.CORNER_CELL_CLICK,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_CLICK,e)}}switch(r){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_MOUSE_UP,e);break;case zi.ROW_CELL:t.spreadsheet.emit(Jo.ROW_CELL_MOUSE_UP,e);break;case zi.COL_CELL:t.spreadsheet.emit(Jo.COL_CELL_MOUSE_UP,e);break;case zi.CORNER_CELL:t.spreadsheet.emit(Jo.CORNER_CELL_MOUSE_UP,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_MOUSE_UP,e)}}}},this.onCanvasClick=function(e){t.spreadsheet.emit(Jo.GLOBAL_CLICK,e)},this.onCanvasDoubleClick=function(e){var n=t.spreadsheet;if(t.isResizeArea(e))n.emit(Jo.LAYOUT_RESIZE_MOUSE_UP,e);else{n.emit(Jo.GLOBAL_DOUBLE_CLICK,e);var r=n.getCell(e.target);if(r){var o=r.cellType;if(t.target===e.target)switch(o){case zi.DATA_CELL:n.emit(Jo.DATA_CELL_DOUBLE_CLICK,e);break;case zi.ROW_CELL:n.emit(Jo.ROW_CELL_DOUBLE_CLICK,e);break;case zi.COL_CELL:n.emit(Jo.COL_CELL_DOUBLE_CLICK,e);break;case zi.CORNER_CELL:n.emit(Jo.CORNER_CELL_DOUBLE_CLICK,e);break;case zi.MERGED_CELL:n.emit(Jo.MERGED_CELLS_DOUBLE_CLICK,e)}}}},this.onCanvasMouseout=function(e){if(t.isAutoResetSheetStyle&&!(null==e?void 0:e.shape)){var n=t.spreadsheet.interaction;n.isSelectedState()||n.intercepts.size>0||n.reset()}},this.onCanvasContextMenu=function(e){var n=t.spreadsheet;if(t.isResizeArea(e))n.emit(Jo.LAYOUT_RESIZE_MOUSE_UP,e);else switch(n.emit(Jo.GLOBAL_CONTEXT_MENU,e),t.spreadsheet.getCellType(e.target)){case zi.DATA_CELL:t.spreadsheet.emit(Jo.DATA_CELL_CONTEXT_MENU,e);break;case zi.ROW_CELL:t.spreadsheet.emit(Jo.ROW_CELL_CONTEXT_MENU,e);break;case zi.COL_CELL:t.spreadsheet.emit(Jo.COL_CELL_CONTEXT_MENU,e);break;case zi.CORNER_CELL:t.spreadsheet.emit(Jo.CORNER_CELL_CONTEXT_MENU,e);break;case zi.MERGED_CELL:t.spreadsheet.emit(Jo.MERGED_CELLS_CONTEXT_MENU,e)}},this.spreadsheet=e,this.bindEvents()}return Object.defineProperty(e.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),e.prototype.bindEvents=function(){var e=this;this.clearAllEvents(),this.addCanvasEvent(Qo.CLICK,this.onCanvasClick),this.addCanvasEvent(Qo.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(Qo.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(Qo.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(Qo.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(Qo.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(Qo.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(Jo.GLOBAL_ACTION_ICON_CLICK,(function(){e.spreadsheet.interaction.addIntercepts([Vi.HOVER]),e.spreadsheet.interaction.clearState()})),this.addDomEventListener(window,Qo.CLICK,(function(t){e.resetSheetStyle(t),e.isCanvasEffect=e.isMouseOnTheCanvasContainer(t)})),this.addDomEventListener(window,Qo.KEY_DOWN,(function(t){e.onKeyboardCopy(t),e.onKeyboardEsc(t),e.spreadsheet.emit(Jo.GLOBAL_KEYBOARD_DOWN,t)})),this.addDomEventListener(window,Qo.KEY_UP,(function(t){e.spreadsheet.emit(Jo.GLOBAL_KEYBOARD_UP,t)})),this.addDomEventListener(window,Qo.MOUSE_UP,(function(t){e.spreadsheet.emit(Jo.GLOBAL_MOUSE_UP,t)})),this.addDomEventListener(window,Qo.MOUSE_MOVE,(function(t){e.spreadsheet.emit(Jo.GLOBAL_MOUSE_MOVE,t)}))},e.prototype.onKeyboardCopy=function(e){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&zx(e.key,Gi.COPY)&&(e.metaKey||e.ctrlKey)){var t=function(e){var t,n,r,o,i=e.interaction,a=i.getState().cells||[],s=null!==(t=i.getInteractedCells())&&void 0!==t?t:[];return(n=!Vv(s)&&Ng(s,(function(e){return e.cellType===zi.ROW_CELL||e.cellType===zi.COL_CELL}))?function(e){var t,n=function(e){var t=new Set;return fg(e,(function(e){var n=e.getMeta().level;t.has(n)||t.add(n)})),t}(e),r=null!==(t=vm(Array.from(n)))&&void 0!==t?t:0,o=function(e,t){return Dg(e,(function(e){var n=e.getMeta(),r=n.level===t,o=n.isTotals&&Vv(n.children);return r||o}))}(e,r),i=e[0].cellType===zi.COL_CELL,a=function(e,t,n){return Yg(e,(function(e){var r=e.getMeta(),o=r.id,i=r.label,a=r.isTotals,s=r.level,l=o;return a&&s!==t&&(l=o+Si+Qy(i,t-s)),Yx(l,n.size)}))}(o,r,n);return i&&(a=Tb.apply(void 0,da([],ua(a),!1))),[Xx(Hx.PLAIN)(a),Xx(Hx.HTML)(a)]}(s):eE(e,a))&&rE(n),r=n,void 0===(o=Hx.PLAIN)&&(o=Hx.PLAIN),Array.isArray(o)?[].concat(r).filter((function(e){return o.includes(e.type)})).map((function(e){return e.content})):[].concat(r).filter((function(e){return(null==e?void 0:e.type)===o})).map((function(e){return e.content}))[0]||""}(this.spreadsheet);Jv(t)||this.spreadsheet.emit(Jo.GLOBAL_COPIED,t)}},e.prototype.onKeyboardEsc=function(e){this.isCanvasEffect&&zx(e.key,Gi.ESC)&&this.resetSheetStyle(e)},e.prototype.resetSheetStyle=function(e){if(this.isAutoResetSheetStyle&&this.spreadsheet){var t=this.spreadsheet.interaction;t.hasIntercepts([Vi.BRUSH_SELECTION,Vi.COL_BRUSH_SELECTION,Vi.ROW_BRUSH_SELECTION])?t.removeIntercepts([Vi.BRUSH_SELECTION,Vi.ROW_BRUSH_SELECTION,Vi.COL_BRUSH_SELECTION]):this.isMouseOnTheTooltip(e)||this.isMouseOnTheCanvasContainer(e)||(this.spreadsheet.emit(Jo.GLOBAL_RESET,e),t.reset())}},e.prototype.isMouseEvent=function(e){return up(e,"clientX")&&up(e,"clientY")},e.prototype.isMouseOnTheCanvasContainer=function(e){if(this.isMouseEvent(e)){var t=this.spreadsheet.getCanvasElement();if(!t)return!1;var n=t.getBoundingClientRect()||{},r=n.x,o=n.y,i=this.getContainerRect(),a=i.width,s=i.height;return t.contains(e.target)&&e.clientX<=r+a&&e.clientY<=o+s}return!1},e.prototype.getContainerRect=function(){var e,t=(null===(e=this.spreadsheet.facet)||void 0===e?void 0:e.panelBBox)||{},n=t.maxX,r=t.maxY,o=this.spreadsheet.options,i=o.width,a=o.height;return{width:Math.min(i,n),height:Math.min(a,r)}},e.prototype.isMouseOnTheTooltip=function(e){var t,n,r,o,i=this.spreadsheet.tooltip;if(!(null==i?void 0:i.visible))return!1;var a=(null===(r=null===(n=null===(t=this.spreadsheet.tooltip)||void 0===t?void 0:t.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},s=a.x,l=a.y,c=a.width,u=a.height;return e.target instanceof Node?function(e,t){for(var n=!1,r=t;r&&r!==document.body;){if(e===r){n=!0;break}r=r.parentElement}return n}(null===(o=this.spreadsheet.tooltip)||void 0===o?void 0:o.container,e.target):!!this.isMouseEvent(e)&&e.clientX>=s&&e.clientX<=s+c&&e.clientY>=l&&e.clientY<=l+u},e.prototype.isResizeArea=function(e){var t=yu(e.target,"attrs.appendInfo");return null==t?void 0:t.isResizeArea},e.prototype.activeResizeArea=function(e){this.resetResizeArea();var t=e.target;this.spreadsheet.store.set("activeResizeArea",t),t.attr(Yi.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},e.prototype.resetResizeArea=function(){var e=this.spreadsheet.store.get("activeResizeArea");Vv(e)||e.attr(Yi.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",e)},e.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Vi.HOVER,Vi.BRUSH_SELECTION,Vi.ROW_BRUSH_SELECTION,Vi.COL_BRUSH_SELECTION])},e.prototype.clear=function(){this.unbindEvents()},e.prototype.unbindEvents=function(){this.clearAllEvents()},e.prototype.addCanvasEvent=function(e,t){var n;null===(n=this.canvasContainer)||void 0===n||n.on(e,t),this.canvasEventHandlers.push({type:e,handler:t})},e.prototype.addS2Event=function(e,t){this.spreadsheet.on(e,t),this.s2EventHandlers.push({type:e,handler:t})},e.prototype.addDomEventListener=function(e,t,n){if(e.addEventListener){var r=this.spreadsheet.options.interaction.eventListenerOptions;e.addEventListener(t,n,r),this.domEventListeners.push({target:e,type:t,handler:n,options:r})}else console.error("Please make sure ".concat(e," has addEventListener function"))},e.prototype.clearAllEvents=function(){var e=this;fg(this.canvasEventHandlers,(function(t){var n,r=t.type,o=t.handler;null===(n=e.canvasContainer)||void 0===n||n.off(r,o)})),fg(this.s2EventHandlers,(function(t){var n=t.type,r=t.handler;e.spreadsheet.off(n,r)})),fg(this.domEventListeners,(function(e){e.target.removeEventListener(e.type,e.handler,e.options)})),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},e}(),wL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRangeSelection=!1,t.handleColClick=function(e){e.stopPropagation();var n=t.spreadsheet.interaction,r=t.spreadsheet.getCell(e.target),o=null==r?void 0:r.getMeta();if(!Jv(null==o?void 0:o.x)){n.addIntercepts([Vi.HOVER]);var i=[CS(r)],a=t.spreadsheet.store.get("lastClickedCell");if(t.isRangeSelection&&a&&a.cellType===r.cellType&&a.getMeta().level===r.getMeta().level){var s=ua([t.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,t.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),l=s[0],c=s[1],u=bS(a.getMeta(),r.getMeta()),d=u.start,h=u.end;r instanceof bE?i=t.handleSeriesNumberRowSelected(d.rowIndex,h.rowIndex,r):r.cellType===zi.ROW_CELL&&r.getMeta().level===l?i=t.handleRowSelected(d.rowIndex,h.rowIndex,r):r.cellType===zi.COL_CELL&&r.getMeta().level===c&&(i=t.handleColSelected(d.colIndex,h.colIndex,r)),n.changeState({cells:i,stateName:ji.SELECTED})}else t.spreadsheet.store.set("lastClickedCell",r);var f=i.map((function(e){return e.id}));n.updateCells(n.getRowColActiveCells(f)),t.spreadsheet.emit(Jo.GLOBAL_SELECTED,n.getActiveCells())}},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},t.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Vi.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_DOWN,(function(t){t.key===Gi.SHIFT&&(e.isRangeSelection=!0,e.spreadsheet.interaction.addIntercepts([Vi.CLICK]))}))},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_UP,(function(t){t.key===Gi.SHIFT&&e.reset()}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_MOVE,(function(t){e.isRangeSelection&&!t.shiftKey&&e.reset()}))},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(Jo.ROW_CELL_CLICK,(function(t){e.handleColClick(t)})),this.spreadsheet.on(Jo.COL_CELL_CLICK,(function(t){e.handleColClick(t)}))},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(Jo.DATA_CELL_CLICK,(function(t){t.stopPropagation();var n=e.spreadsheet.getCell(t.target),r=n.getMeta(),o=e.spreadsheet.interaction;if(r){var i=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&(null==i?void 0:i.cellType)===n.cellType){var a=bS(i.getMeta(),n.getMeta()),s=a.start,l=a.end,c=Vy(s.colIndex,l.colIndex+1).flatMap((function(t){var r=e.spreadsheet.facet.layoutResult.colLeafNodes[t].id;return Vy(s.rowIndex,l.rowIndex+1).map((function(o){return{id:(e.spreadsheet.facet.getSeriesNumberWidth()||e.spreadsheet.isTableMode()?String(o):e.spreadsheet.facet.layoutResult.rowLeafNodes[o].id)+"-"+r,colIndex:t,rowIndex:o,type:n.cellType}}))}));o.addIntercepts([Vi.CLICK,Vi.HOVER]),o.changeState({cells:c,stateName:ji.SELECTED}),e.spreadsheet.showTooltipWithInfo(t,IT(e.spreadsheet)),e.spreadsheet.emit(Jo.GLOBAL_SELECTED,o.getActiveCells())}else e.spreadsheet.store.set("lastClickedCell",n)}}))},t.prototype.handleSeriesNumberRowSelected=function(e,t,n){var r=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return Vy(e,t+1).map((function(e){return{id:String(e)+"-"+r,colIndex:0,rowIndex:e,type:n.cellType}}))},t.prototype.handleRowSelected=function(e,t,n){return this.spreadsheet.facet.layoutResult.rowNodes.filter((function(n){return uv(n.rowIndex,e,t+1)})).map((function(e){return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,type:n.cellType}}))},t.prototype.handleColSelected=function(e,t,n){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter((function(n){return uv(n.colIndex,e,t+1)})).map((function(e){return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,type:n.cellType}}))},t}(lL),xL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeStartPosition={},t.resizeMouseMove=function(e){var n,r;if(null===(n=t.resizeReferenceGroup)||void 0===n?void 0:n.get("visible")){null===(r=null==e?void 0:e.preventDefault)||void 0===r||r.call(e);var o=e.originalEvent,i=t.getResizeInfo(),a=t.resizeReferenceGroup.getChildren()||[];if(!Vv(a)){var s=ua(a,2)[1],l=ua(bf(s.attr("path")),2),c=l[0],u=l[1];i.type===Qi.Horizontal?t.updateHorizontalResizingEndGuideLinePosition(o,i,c,u):t.updateVerticalResizingEndGuideLinePosition(o,i,c,u),t.updateResizeGuideLineTheme(s),s.attr("path",[c,u])}}},t}return aa(t,e),t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var e=this.spreadsheet.options,t=e.width,n=e.height,r=this.getResizeAreaTheme(),o=r.guideLineColor,i={path:"",lineDash:r.guideLineDash,stroke:o,lineWidth:r.size};this.resizeReferenceGroup.addShape("path",{id:"RESIZE_START_GUIDE_LINE",attrs:i}),this.resizeReferenceGroup.addShape("path",{id:"RESIZE_END_GUIDE_LINE",attrs:i}),this.resizeReferenceGroup.addShape("rect",{id:"RESIZE_MASK",attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:t,height:n,fill:"transparent"}})}},t.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},t.prototype.setResizeTarget=function(e){this.resizeTarget=e},t.prototype.getGuideLineWidthAndHeight=function(){var e=this.spreadsheet.options,t=e.width,n=e.height,r=this.spreadsheet.facet.panelBBox,o=r.maxY,i=r.maxX;return{width:Math.min(i,t),height:Math.min(o,n)}},t.prototype.getResizeShapes=function(){var e;return(null===(e=this.resizeReferenceGroup)||void 0===e?void 0:e.get("children"))||[]},t.prototype.setResizeMaskCursor=function(e){var t=ua(this.getResizeShapes(),3)[2];null==t||t.attr("cursor",e)},t.prototype.updateResizeGuideLinePosition=function(e,t){var n=this.getResizeShapes();if(!Vv(n)){var r=ua(n,2),o=r[0],i=r[1],a=t.type,s=t.offsetX,l=t.offsetY,c=t.width,u=t.height,d=this.getGuideLineWidthAndHeight(),h=d.width,f=d.height;if(this.setResizeMaskCursor("".concat(a,"-resize")),a===Qi.Horizontal)return o.attr("path",[["M",s,l],["L",s,f]]),i.attr("path",[["M",s+c,l],["L",s+c,f]]),void(this.resizeStartPosition.offsetX=e.offsetX);o.attr("path",[["M",s,l],["L",h,l]]),i.attr("path",[["M",s,l+u],["L",h,l+u]]),this.resizeStartPosition.offsetY=e.offsetY}},t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Jo.LAYOUT_RESIZE_MOUSE_DOWN,(function(t){var n=t.target,r=t.originalEvent,o=e.getCellAppendInfo(t.target);e.spreadsheet.store.set("resized",!1),(null==o?void 0:o.isResizeArea)&&(e.spreadsheet.interaction.reset(),e.spreadsheet.interaction.addIntercepts([Vi.RESIZE]),e.setResizeTarget(n),e.showResizeGroup(),e.updateResizeGuideLinePosition(r,o))}))},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(Jo.LAYOUT_RESIZE_MOUSE_MOVE,(function(t){WC(e.resizeMouseMove,33)(t)}))},t.prototype.getResizeGuideLinePosition=function(){var e=ua(this.resizeReferenceGroup.getChildren()||[],2),t=e[0],n=e[1],r=(null==t?void 0:t.attr("path"))||[],o=(null==n?void 0:n.attr("path"))||[],i=ua(r[0]||[],3),a=i[1],s=void 0===a?0:a,l=i[2],c=void 0===l?0:l,u=ua(o[0]||[],3),d=u[1],h=void 0===d?0:d,f=u[2];return{start:{x:s,y:c},end:{x:h,y:void 0===f?0:f}}},t.prototype.getDisAllowResizeInfo=function(){var e,t=this.getResizeInfo(),n=this.spreadsheet.options.interaction.resize,r=t.width,o=t.height,i=t.resizedWidth,a=t.resizedHeight,s=null===(e=null==n?void 0:n.disable)||void 0===e?void 0:e.call(n,t);return{displayWidth:s?r:i,displayHeight:s?o:a,isDisabled:s}},t.prototype.getResizeWidthDetail=function(){var e,t,n=this.getResizeInfo(),r=this.getDisAllowResizeInfo().displayWidth;switch(n.effect){case Ji.Field:return{eventType:Jo.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(e={},e[n.id]=r,e)}}};case Ji.Tree:return{eventType:Jo.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:r,rowCfg:{treeRowsWidth:r}}};case Ji.Cell:return{eventType:Jo.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(t={},t[n.id]=r,t)}}};case Ji.Series:return{eventType:Jo.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:r};default:return null}},t.prototype.getResizeHeightDetail=function(){var e,t,n,r=this.spreadsheet.options,o=r.interaction.resize,i=r.style.rowCfg.heightByField,a=this.spreadsheet.theme.rowCell.cell.padding,s=this.getResizeInfo(),l=this.getDisAllowResizeInfo().displayHeight,c=l-a.top-a.bottom;switch(s.effect){case Ji.Field:return{eventType:Jo.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(e={},e[s.id]=l,e)}}};case Ji.Cell:return n=(null==i?void 0:i[String(s.id)])||(null==o?void 0:o.rowResizeType)===ea.CURRENT?{rowCfg:{heightByField:(t={},t[s.id]=c,t)}}:{cellCfg:{height:c}},{eventType:Jo.LAYOUT_RESIZE_ROW_HEIGHT,style:n};default:return null}},t.prototype.getResizeDetail=function(){return this.getResizeInfo().type===Qi.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},t.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},t.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},t.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_MOUSE_UP,(function(){var t;e.setResizeMaskCursor("default"),e.resizeReferenceGroup&&!Vv(null===(t=e.resizeReferenceGroup)||void 0===t?void 0:t.getChildren())&&(e.hideResizeGroup(),e.renderResizedResult())}))},t.prototype.updateResizeGuideLineTheme=function(e){var t=this.getResizeAreaTheme(),n=t.guideLineColor,r=t.guideLineDisableColor,o=this.getDisAllowResizeInfo().isDisabled;e.attr("stroke",o?r:n),this.setResizeMaskCursor(o?"no-drop":"default")},t.prototype.updateHorizontalResizingEndGuideLinePosition=function(e,t,n,r){var o=e.offsetX-this.resizeStartPosition.offsetX;t.width+o<28&&(o=-(t.width-28));var i=t.offsetX+t.width+o;n[1]=i,r[1]=i,this.resizeTarget.attr({x:i-t.size/2})},t.prototype.updateVerticalResizingEndGuideLinePosition=function(e,t,n,r){var o=e.offsetY-this.resizeStartPosition.offsetY;t.height+o<16&&(o=-(t.height-16));var i=t.offsetY+t.height+o;n[2]=i,r[2]=i,this.resizeTarget.attr({y:i-t.size/2})},t.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),t=this.getResizeDetail()||{},n=t.style,r=t.seriesNumberWidth,o=t.eventType,i={info:e,style:n};this.spreadsheet.emit(Jo.LAYOUT_RESIZE,i),this.spreadsheet.emit(o,i),n&&this.spreadsheet.setOptions({style:n}),r&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:r}}),this.spreadsheet.store.set("resized",!0),this.render()},t.prototype.getResizeInfo=function(){var e=this.getCellAppendInfo(this.resizeTarget),t=this.getResizeGuideLinePosition(),n=t.start,r=t.end,o=Math.floor(r.x-n.x),i=Math.floor(r.y-n.y);return sa(sa({},e),{resizedWidth:o,resizedHeight:i})},t.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},t}(lL),EL=[Gi.ARROW_LEFT,Gi.ARROW_RIGHT,Gi.ARROW_UP,Gi.ARROW_DOWN],SL=function(e){function t(t){return e.call(this,t)||this}return aa(t,e),t.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},t.prototype.bindEvents=function(){var e=this;this.spreadsheet.on(Jo.GLOBAL_KEYBOARD_DOWN,(function(t){if(e.isCanvasEffect()){var n=t.shiftKey,r=t.metaKey,o=!1,i=!1,a=!1;EL.includes(t.key)&&(r&&n?(o=!1,i=!0,a=!1):r?(o=!0,i=!0,a=!0):n?(o=!1,i=!1,a=!1):(o=!0,i=!1,a=!0),e.handleMove({event:t,changeStartCell:o,isJumpMode:i,isSingleSelection:a}))}})),this.spreadsheet.on(Jo.DATA_CELL_CLICK,(function(t){var n=e.spreadsheet.getCell(t.target).getMeta();n&&(e.startCell=e.getCellMetaFromViewMeta(n),e.endCell=e.startCell)}))},t.prototype.getCellMetaFromViewMeta=function(e){return{rowIndex:e.rowIndex,colIndex:e.colIndex,id:e.id,type:zi.DATA_CELL}},t.prototype.handleMove=function(e){var t=e.event,n=e.changeStartCell,r=e.isJumpMode,o=e.isSingleSelection,i=this,a=i.spreadsheet,s=i.startCell,l=i.endCell,c=n?s:l,u=this.getMoveInfo(t.key,c,r);if(u){var d=ua([u.row,u.col],2),h=d[0],f=d[1];this.scrollToActiveCell(a,h,f);var p=this.generateCellMeta(a,h,f),g=o?[p]:this.getRangeCells(a,s,p);!function(e,t){var n=e.interaction;n.changeState({stateName:ji.SELECTED,cells:t}),e.emit(Jo.GLOBAL_SELECTED,n.getActiveCells())}(a,g),n&&(this.startCell=p),this.endCell=p,this.spreadsheet.emit(Jo.DATA_CELL_SELECT_MOVE,g)}},t.prototype.generateCellMeta=function(e,t,n){var r=e.isTableMode,o=e.facet.layoutResult,i=o.colLeafNodes,a=o.rowLeafNodes,s=r()?String(t):a[t].id,l=i[n].id;return{rowIndex:t,colIndex:n,id:yE(s,l),type:zi.DATA_CELL}},t.prototype.getRangeCells=function(e,t,n){for(var r=bS(t,n),o=r.start,i=o.rowIndex,a=o.colIndex,s=r.end,l=s.rowIndex,c=s.colIndex,u=[],d=i;d<=l;d++)for(var h=a;h<=c;h++)u.push(this.generateCellMeta(e,d,h));return u},t.prototype.getMoveInfo=function(e,t,n){var r=this.spreadsheet,o=r.options,i=o.frozenColCount,a=void 0===i?0:i,s=o.frozenRowCount,l=void 0===s?0:s,c=o.frozenTrailingColCount,u=void 0===c?0:c,d=o.frozenTrailingRowCount,h=void 0===d?0:d,f=r.facet.layoutResult,p=f.rowLeafNodes,g=ua([0+a,f.colLeafNodes.length-u-1],2),v=g[0],m=g[1],y=ua([0+l,(r.isTableMode()?r.dataSet.getDisplayDataSet().length:p.length)-h-1],2),C=y[0],b=y[1];if(t)switch(e){case Gi.ARROW_RIGHT:if(t.colIndex+1>m)return;return{row:t.rowIndex,col:n?m:t.colIndex+1};case Gi.ARROW_LEFT:if(t.colIndex-1<v)return;return{row:t.rowIndex,col:n?v:t.colIndex-1};case Gi.ARROW_UP:if(t.rowIndex-1<C)return;return{row:n?C:t.rowIndex-1,col:t.colIndex};case Gi.ARROW_DOWN:if(t.rowIndex+1>b)return;return{row:n?b:t.rowIndex+1,col:t.colIndex}}},t.prototype.calculateOffset=function(e,t,n){var r=e.options,o=r.frozenRowCount,i=void 0===o?0:o,a=r.frozenTrailingRowCount,s=void 0===a?0:a,l=e.facet,c=e.frozenColGroup,u=e.frozenTrailingColGroup,d=e.frozenRowGroup,h=e.frozenTrailingRowGroup,f=l.layoutResult.colLeafNodes,p=l.getScrollOffset(),g=p.scrollX,v=p.scrollY,m=l.panelBBox,y=m.viewportHeight,C=m.viewportWidth,b=yu(e,"theme.splitLine"),w=c?Math.floor(c.getBBox().width-b.verticalBorderWidth/2):0,x=u?Math.floor(u.getBBox().width):0,E=d?Math.floor(d.getBBox().height-b.horizontalBorderWidth/2):0,S=h?Math.floor(h.getBBox().height):0,I=kw(g,v,l.viewCellWidths,l.viewCellHeights,{width:C-w-x,height:y-E-S,x:w,y:E},l.getRealScrollX(l.cornerBBox.width)),T=-1,L=-1,M=f.find((function(e){return e.colIndex===n}));return n<=I[0]?T=M.x-w:n>=I[1]&&n<f.length-s&&(T=M.x+M.width-C+x),t<=I[2]?L=l.viewCellHeights.getCellOffsetY(t-i):t>=I[3]&&(L=l.viewCellHeights.getCellOffsetY(t+1)+S-y),{offsetX:T,offsetY:L}},t.prototype.scrollToActiveCell=function(e,t,n){var r=this.calculateOffset(e,t,n),o=r.offsetX,i=r.offsetY,a=e.facet,s=e.facet.getScrollOffset(),l=s.scrollX,c=s.scrollY;a.scrollWithAnimation({offsetX:{value:o>-1?o:l},offsetY:{value:i>-1?i:c}})},t}(lL),IL=function(){function e(e){var t=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){t.interactions.forEach((function(e){e.reset()}))},this.selectAll=function(){t.changeState({stateName:ji.ALL_SELECTED})},this.getCellChildrenNodes=function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e),o=(null==e?void 0:e.cellType)===zi.ROW_CELL;return t.spreadsheet.isHierarchyTreeType()&&o?bw.getAllLeaveNodes(r).filter((function(e){return e.rowIndex===r.rowIndex})):bw.getAllChildrenNodes(r)},this.selectHeaderCell=function(e){var n;void 0===e&&(e={});var r=e.cell;if(!Vv(r)){var o=null===(n=null==r?void 0:r.getMeta)||void 0===n?void 0:n.call(r);if(o&&!Jv(null==o?void 0:o.x)){t.addIntercepts([Vi.HOVER]);var i=t.spreadsheet.isHierarchyTreeType(),a=(null==r?void 0:r.cellType)===zi.COL_CELL,s=t.getState(),l=t.isSelectedCell(r),c=(null==e?void 0:e.isMultiSelection)&&t.isSelectedState(),u=l?[]:t.getCellChildrenNodes(r),d=l?[]:[CS(r)];if(c&&(d=Ef(null==s?void 0:s.cells,d),u=Ef(null==s?void 0:s.nodes,u),l&&(d=d.filter((function(e){return e.id!==o.id})),u=u.filter((function(e){return!(null==e?void 0:e.id.includes(o.id))})))),Vv(d))return t.reset(),void t.spreadsheet.emit(Jo.GLOBAL_SELECTED,t.getActiveCells());var h=u.filter((function(e){return null==e?void 0:e.isLeaf}));t.changeState({cells:d,nodes:h,stateName:ji.SELECTED});var f=d.map((function(e){return e.id}));return t.updateCells(t.getRowColActiveCells(f)),i&&!a||t.highlightNodes(u),t.spreadsheet.emit(Jo.GLOBAL_SELECTED,t.getActiveCells()),!0}}},this.highlightNodes=function(e){void 0===e&&(e=[]),e.forEach((function(e){var t;null===(t=null==e?void 0:e.belongsCell)||void 0===t||t.updateByState(ji.SELECTED,e.belongsCell)}))},this.mergeCells=function(e,n){!function(e,t,n){var r,o=t||function(e){var t=e.interaction.getActiveCells(),n=[];return fg(t,(function(e,t){var r=e.getMeta(),o=0===t?{showText:!0}:{};n.push(sa(sa({},o),{colIndex:null==r?void 0:r.colIndex,rowIndex:null==r?void 0:r.rowIndex}))})),n}(e);if((null==o?void 0:o.length)<=1)console.error("then merged cells must be more than one");else{var i=e.interaction.getPanelGroupAllDataCells(),a=SE(i,e,o),s=a.cells,l=a.viewMeta;if(!Vv(s)){var c=(null===(r=e.options)||void 0===r?void 0:r.mergedCellsInfo)||[];c.push(o),e.setOptions({mergedCellsInfo:c});var u=n?void 0:l;e.panelScrollGroup.addMergeCell(IE(e,s,u))}}}(t.spreadsheet,e,n)},this.unmergeCell=function(e){!function(e,t){var n,r,o;if(t&&t.cellType===zi.MERGED_CELL){var i,a,s,l=(i=t,a=null===(n=e.options)||void 0===n?void 0:n.mergedCellsInfo,s=Yg(i.cells,(function(e){return{colIndex:e.getMeta().colIndex,rowIndex:e.getMeta().rowIndex}})),Dg(a,(function(e){return!Yv(e.map((function(e){return e.showText?{colIndex:e.colIndex,rowIndex:e.rowIndex}:e})),s)})));(null==l?void 0:l.length)!==(null===(o=null===(r=e.options)||void 0===r?void 0:r.mergedCellsInfo)||void 0===o?void 0:o.length)&&(e.setOptions({mergedCellsInfo:l}),t.remove(!0))}else console.error("unmergeCell: the ".concat(t," is not a MergedCell"))}(t.spreadsheet,e)},this.spreadsheet=e,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return e.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},e.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},e.prototype.setState=function(e){!function(e,t){var n=null==t?void 0:t.stateName;e.interaction.isEqualStateName(n)||(SS(e),e.hideTooltip(),e.store.set(Xi,t))}(this.spreadsheet,e)},e.prototype.getState=function(){return this.spreadsheet.store.get(Xi)||this.defaultState},e.prototype.setInteractedCells=function(e){var t=this.getInteractedCells().concat([e]),n=this.getState();n.interactedCells=t,this.setState(n)},e.prototype.getInteractedCells=function(){var e=this.getState();return(null==e?void 0:e.interactedCells)||[]},e.prototype.resetState=function(){this.spreadsheet.store.set(Xi,this.defaultState)},e.prototype.getCurrentStateName=function(){return this.getState().stateName},e.prototype.isEqualStateName=function(e){return this.getCurrentStateName()===e},e.prototype.isStateOf=function(e){var t=this.getState();return(null==t?void 0:t.stateName)===e},e.prototype.isSelectedState=function(){return this.isStateOf(ji.SELECTED)},e.prototype.isAllSelectedState=function(){return this.isStateOf(ji.ALL_SELECTED)},e.prototype.isHoverFocusState=function(){return this.isStateOf(ji.HOVER_FOCUS)},e.prototype.isHoverState=function(){return this.isStateOf(ji.HOVER)},e.prototype.isActiveCell=function(e){return!!this.getCells().find((function(t){return e.getMeta().id===t.id}))},e.prototype.isSelectedCell=function(e){return this.isSelectedState()&&this.isActiveCell(e)},e.prototype.getCells=function(e){var t=this.getState(),n=(null==t?void 0:t.cells)||[];return Jv(e)?n:n.filter((function(t){return e.includes(t.type)}))},e.prototype.getActiveCells=function(){var e=this.getCells().map((function(e){return e.id})),t=this.getAllCells();return Yg(e,(function(e){return Fg(t,(function(t){var n;return(null===(n=null==t?void 0:t.getMeta())||void 0===n?void 0:n.id)===e}))})).filter((function(e){return e}))},e.prototype.clearStyleIndependent=function(){(this.isSelectedState()||this.isHoverState()||this.isAllSelectedState())&&this.getPanelGroupAllDataCells().forEach((function(e){e.hideInteractionShape()}))},e.prototype.getPanelGroupAllUnSelectedDataCells=function(){var e=this;return this.getPanelGroupAllDataCells().filter((function(t){return!e.isActiveCell(t)}))},e.prototype.getPanelGroupAllDataCells=function(){var e;return FT(null===(e=this.spreadsheet.panelGroup)||void 0===e?void 0:e.getChildren(),bE)},e.prototype.getAllRowHeaderCells=function(){var e,t,n=((null===(e=this.spreadsheet.foregroundGroup)||void 0===e?void 0:e.getChildren())||[]).find((function(e){return e instanceof KT})),r=(null===(t=null==n?void 0:n.cfg)||void 0===t?void 0:t.children)||[];return FT(r,dS).filter((function(e){return e.cellType===zi.ROW_CELL}))},e.prototype.getAllColHeaderCells=function(){var e,t,n=((null===(e=this.spreadsheet.foregroundGroup)||void 0===e?void 0:e.getChildren())||[]).find((function(e){return e instanceof $T})),r=(null===(t=null==n?void 0:n.cfg)||void 0===t?void 0:t.children)||[];return FT(r,eS).filter((function(e){return e.cellType===zi.COL_CELL}))},e.prototype.getRowColActiveCells=function(e){return Ef(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter((function(t){return e.includes(t.getMeta().id)}))},e.prototype.getAllCells=function(){return Ef(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},e.prototype.hideColumns=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!0),_E(this.spreadsheet,e,t)},e.prototype.getBrushSelectionInfo=function(e){var t,n,r;return jv(e)?{dataBrushSelection:e,rowBrushSelection:e,colBrushSelection:e}:{dataBrushSelection:null!==(t=null==e?void 0:e.data)&&void 0!==t&&t,rowBrushSelection:null!==(n=null==e?void 0:e.row)&&void 0!==n&&n,colBrushSelection:null!==(r=null==e?void 0:e.col)&&void 0!==r&&r}},e.prototype.getDefaultInteractions=function(){var e=this.spreadsheet.options.interaction,t=e.resize,n=e.brushSelection,r=e.multiSelection,o=e.rangeSelection,i=e.selectedCellMove,a=this.getBrushSelectionInfo(n),s=a.dataBrushSelection,l=a.rowBrushSelection,c=a.colBrushSelection;return[{key:Fi.CORNER_CELL_CLICK,interaction:fL},{key:Fi.DATA_CELL_CLICK,interaction:cL},{key:Fi.ROW_COLUMN_CLICK,interaction:dL},{key:Fi.ROW_TEXT_CLICK,interaction:hL},{key:Fi.MERGED_CELLS_CLICK,interaction:uL},{key:Fi.HOVER,interaction:pL,enable:!yw()},{key:Fi.BRUSH_SELECTION,interaction:mL,enable:!yw()&&s},{key:Fi.ROW_BRUSH_SELECTION,interaction:yL,enable:!yw()&&l},{key:Fi.COL_BRUSH_SELECTION,interaction:vL,enable:!yw()&&c},{key:Fi.COL_ROW_RESIZE,interaction:xL,enable:!yw()&&t},{key:Fi.DATA_CELL_MULTI_SELECTION,interaction:CL,enable:!yw()&&r},{key:Fi.RANGE_SELECTION,interaction:wL,enable:!yw()&&o},{key:Fi.SELECTED_CELL_MOVE,interaction:SL,enable:!yw()&&i}]},e.prototype.registerInteractions=function(){var e=this,t=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear(),this.getDefaultInteractions().forEach((function(t){var n=t.key,r=t.interaction;!1!==t.enable&&e.interactions.set(n,new r(e.spreadsheet))})),Vv(t)||fg(t,(function(t){var n=t.interaction;e.interactions.set(t.key,new n(e.spreadsheet))}))},e.prototype.registerEventController=function(){this.eventController=new bL(this.spreadsheet)},e.prototype.draw=function(){this.spreadsheet.container.draw()},e.prototype.clearState=function(){SS(this.spreadsheet)&&this.draw()},e.prototype.changeState=function(e){var t=this,n=this.spreadsheet.interaction,r=e.cells,o=void 0===r?[]:r,i=e.force,a=e.stateName,s=e.onUpdateCells;if(Vv(o)&&a===ji.SELECTED)i&&n.changeState({cells:[],stateName:ji.UNSELECTED});else{this.getCurrentStateName()===ji.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(e);var l=function(){t.updatePanelGroupAllDataCells()};s?s(this,l):l(),this.draw()}},e.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},e.prototype.updateCells=function(e){void 0===e&&(e=[]),e.forEach((function(e){e.update()}))},e.prototype.addIntercepts=function(e){var t=this;void 0===e&&(e=[]),e.forEach((function(e){t.intercepts.add(e)}))},e.prototype.hasIntercepts=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.intercepts.has(e)}))},e.prototype.removeIntercepts=function(e){var t=this;void 0===e&&(e=[]),e.forEach((function(e){t.intercepts.delete(e)}))},e.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},e.prototype.setHoverTimer=function(e){this.hoverTimer=e},e.prototype.getHoverTimer=function(){return this.hoverTimer},e.prototype.getSelectedCellHighlight=function(){var e=this.spreadsheet.options.interaction.selectedCellHighlight;if(jv(e))return{rowHeader:e,colHeader:e,currentRow:!1,currentCol:!1};var t=null!=e?e:{},n=t.rowHeader,r=void 0!==n&&n,o=t.colHeader,i=void 0!==o&&o,a=t.currentRow,s=void 0!==a&&a,l=t.currentCol;return{rowHeader:r,colHeader:i,currentRow:s,currentCol:void 0!==l&&l}},e.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},e.prototype.getHoverHighlight=function(){var e=this.spreadsheet.options.interaction.hoverHighlight;if(jv(e))return{rowHeader:e,colHeader:e,currentRow:e,currentCol:e};var t=null!=e?e:{},n=t.rowHeader,r=void 0!==n&&n,o=t.colHeader,i=void 0!==o&&o,a=t.currentRow,s=void 0!==a&&a,l=t.currentCol;return{rowHeader:r,colHeader:i,currentRow:s,currentCol:void 0!==l&&l}},e}(),TL=function(){function e(e){var t=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){t.initDevicePixelRatioListener(),t.initDeviceZoomListener()},this.destroy=function(){t.removeDevicePixelRatioListener(),t.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var e;(null===(e=t.devicePixelRatioMedia)||void 0===e?void 0:e.removeEventListener)?t.devicePixelRatioMedia.removeEventListener("change",t.renderByDevicePixelRatioChanged):t.devicePixelRatioMedia.removeListener(t.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var e,n;yw()||null===(n=null===(e=t.viewport)||void 0===e?void 0:e.visualViewport)||void 0===n||n.addEventListener("resize",t.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var e,n;yw()||null===(n=null===(e=t.viewport)||void 0===e?void 0:e.visualViewport)||void 0===n||n.removeEventListener("resize",t.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(e){t.isDevicePixelRatioChange=!1,t.renderByZoomScale(e)},this.renderByDevicePixelRatioChanged=function(){t.isDevicePixelRatioChange=!0,t.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(e){void 0===e&&(e=window.devicePixelRatio);var n=t.spreadsheet,r=n.container,o=n.options,i=o.width,a=o.height,s=o.devicePixelRatio,l=t.spreadsheet.getCanvasElement();if(r.get("pixelRatio")!==e&&l){var c=Math.max(e,s,1);r.set("pixelRatio",c),r.changeSize(i,a),t.spreadsheet.render(!1)}},this.renderByZoomScale=Pp((function(e){var n=Math.ceil(e.target.scale);n>=1&&!t.isDevicePixelRatioChange&&t.renderByDevicePixelRatio(n)}),350),this.spreadsheet=e}return e.prototype.initDevicePixelRatioListener=function(){var e;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(e=this.devicePixelRatioMedia)||void 0===e?void 0:e.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},e}(),LL=function(){function e(e){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=e}return e.prototype.show=function(e){var t,n,r,o=e.position,i=e.options,a=e.content,s=e.event,l=vT(i).enterable,c=this.spreadsheet.options.tooltip||{},u=c.autoAdjustBoundary,d=c.adjustPosition;this.visible=!0,this.options=e;var h=this.getContainer();this.renderContent(a);var f=function(e){var t=e.spreadsheet,n=e.position,r=e.tooltipContainer,o=e.autoAdjustBoundary,i=t.getCanvasElement(),a=n.x+mw,s=n.y+10;if(!o||!i)return{x:a,y:s};var l="body"===o,c=t.facet.panelBBox,u=c.maxX,d=c.maxY,h=t.options,f=h.width,p=h.height,g=i.getBoundingClientRect(),v=g.top,m=g.left,y=r.getBoundingClientRect(),C=y.width,b=y.height,w=document.body.getBoundingClientRect(),x=w.width,E=w.height,S=l?x:Math.min(f,u)+m,I=l?E:Math.min(p,d)+v;return a+C>=S&&(a=S-C),s+b>=I&&(s=I-b),{x:a,y:s}}({spreadsheet:this.spreadsheet,position:o,tooltipContainer:h,autoAdjustBoundary:u}),p=f.x,g=f.y;this.position=null!==(t=null==d?void 0:d({position:{x:p,y:g},event:s}))&&void 0!==t?t:{x:p,y:g},yT(h,{style:{left:"".concat(null===(n=this.position)||void 0===n?void 0:n.x,"px"),top:"".concat(null===(r=this.position)||void 0===r?void 0:r.y,"px"),pointerEvents:l?"all":"none"},visible:!0})},e.prototype.hide=function(){this.visible=!1,this.container&&(yT(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},e.prototype.destroy=function(){var e,t;this.visible=!1,this.container&&(this.resetPosition(),null===(t=(e=this.container).remove)||void 0===t||t.call(e),this.container=null)},e.prototype.renderContent=function(e){if(this.container){this.clearContent();var t=(this.spreadsheet.options.tooltip||{}).content,n=null!=e?e:t;Jv(n)||("string"!=typeof n?n instanceof Element&&this.container.appendChild(n):this.container.innerHTML=n)}},e.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},e.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&yT(this.container,{style:{pointerEvents:"none"}})},e.prototype.resetPosition=function(){this.position={x:0,y:0}},e.prototype.getContainer=function(){var e;if(!this.container){var t=this.spreadsheet.options.tooltip,n=(null===(e=t.getContainer)||void 0===e?void 0:e.call(t))||document.body,r=document.createElement("div");return yT(r,{style:t.style,className:[pw].concat(t.className)}),n.appendChild(r),this.container=r,this.container}return this.container},e}(),ML=function(e){function t(t,n,r){var o=e.call(this)||this;return o.store=new nx,o.untypedOn=o.on,o.untypedEmit=o.emit,o.on=function(e,t){return o.untypedOn(e,t)},o.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.untypedEmit.apply(o,da([e],ua(t),!1))},o.initHiddenColumnsDetail=function(){var e=o.options.interaction.hiddenColumnFields,t=o.store.get("hiddenColumnsDetail");Vv(e)&&Vv(t)||_E(o,e,!0)},o.measureText=lu((function(e,t){var n;if(void 0===e&&(e=""),!t)return null;var r=null===(n=o.getCanvasElement())||void 0===n?void 0:n.getContext("2d"),i=t,a=i.fontSize,s=i.fontFamily,l=i.fontWeight,c=i.fontStyle,u=i.fontVariant;return r.font=[c,u,l,"".concat(a,"px"),s].join(" ").trim(),r.measureText(String(e))}),(function(e,t){return da([e],ua(pv(t)),!1).join("")})),o.measureTextWidth=function(e,t){void 0===e&&(e="");var n=o.measureText(e,t);return(null==n?void 0:n.width)||0},o.measureTextHeight=function(e,t){void 0===e&&(e="");var n=o.measureText(e,t);return n?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:0},o.measureTextWidthRoughly=function(e,t){var n,r;void 0===t&&(t={});var i=o.measureTextWidth("a",t),a=o.measureTextWidth("蚂",t),s=0;if(!e)return s;try{for(var l=ca(e),c=l.next();!c.done;c=l.next()){var u=c.value.charCodeAt(0);s+=u>=0&&u<=255?i:a}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s},o.dataCfg=TS(n),o.options=LS(r),o.dataSet=o.getDataSet(o.options),o.setDebug(),o.initTooltip(),o.initGroups(t),o.bindEvents(),o.initInteraction(),o.initTheme(),o.initHdAdapter(),o.registerIcons(),o.setOverscrollBehavior(),o}return aa(t,e),t.prototype.setOverscrollBehavior=function(){var e=this.options.interaction.overscrollBehavior,t=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior");t&&"auto"!==t?this.store.set("initOverscrollBehavior",t):e&&(document.body.style.overscrollBehavior=e)},t.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},t.prototype.setDebug=function(){Uw.getInstance().setDebug(this.options.debug)},t.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},t.prototype.getMountContainer=function(e){var t=hv(e)?document.querySelector(e):e;if(!t)throw new Error("Target mount container is not a DOM element");return t},t.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new TL(this),this.hdAdapter.init())},t.prototype.initInteraction=function(){this.interaction=new IL(this)},t.prototype.initTooltip=function(){var e,t,n,r;null===(t=null===(e=this.tooltip)||void 0===e?void 0:e.destroy)||void 0===t||t.call(e),this.tooltip=this.renderTooltip(),this.tooltip instanceof LL||console.warn("[Custom Tooltip]: ".concat(null===(r=null===(n=this.tooltip)||void 0===n?void 0:n.constructor)||void 0===r?void 0:r.toString()," should be extends from BaseTooltip"))},t.prototype.renderTooltip=function(){var e,t;return(null===(t=null===(e=this.options.tooltip)||void 0===e?void 0:e.renderTooltip)||void 0===t?void 0:t.call(e,this))||new LL(this)},t.prototype.showTooltip=function(e){var t,n,r=e.content,o=e.event,i=this.getCell(null==o?void 0:o.target),a=os(r)?r(i,e):r;null===(n=(t=this.tooltip).show)||void 0===n||n.call(t,sa(sa({},e),{content:a}))},t.prototype.showTooltipWithInfo=function(e,t,n){var r,o=TT(this,e),i=o.showTooltip,a=o.content;if(i){var s=this.getCell(null==e?void 0:e.target),l=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:ST({spreadsheet:this,cellInfos:t,targetCell:s,options:sa({enableFormat:!0},n)});this.showTooltip({data:l,position:{x:e.clientX,y:e.clientY},options:sa({enterable:!0},n),event:e,content:a})}},t.prototype.hideTooltip=function(){var e,t;null===(t=(e=this.tooltip).hide)||void 0===t||t.call(e)},t.prototype.destroyTooltip=function(){var e,t;null===(t=(e=this.tooltip).destroy)||void 0===t||t.call(e)},t.prototype.registerIcons=function(){var e=this.options.customSVGIcons;Vv(e)||fg(e,(function(e){$w(e.name,e.svg)}))},t.prototype.setDataCfg=function(e,t){this.store.set("originalDataCfg",e),this.dataCfg=t?TS(e):TS(this.dataCfg,e),this.store.set(Ri,Di)},t.prototype.setOptions=function(e,t){var n;this.hideTooltip(),this.options=t?LS(e):IS(this.options,e),(t||(null===(n=e.tooltip)||void 0===n?void 0:n.renderTooltip))&&this.initTooltip(),this.registerIcons()},t.prototype.render=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t={}),this.getCanvasElement()){var n=t.reBuildDataSet,r=void 0!==n&&n,o=t.reBuildHiddenColumnsDetail,i=void 0===o||o;this.emit(Jo.LAYOUT_BEFORE_RENDER),r&&(this.dataSet=this.getDataSet(this.options)),e&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),i&&this.initHiddenColumnsDetail(),this.emit(Jo.LAYOUT_AFTER_RENDER)}},t.prototype.destroy=function(){var e,t,n,r,o;this.restoreOverscrollBehavior(),this.emit(Jo.LAYOUT_DESTROY),null===(e=this.facet)||void 0===e||e.destroy(),null===(t=this.hdAdapter)||void 0===t||t.destroy(),null===(n=this.interaction)||void 0===n||n.destroy(),null===(r=this.store)||void 0===r||r.clear(),this.destroyTooltip(),this.clearCanvasEvent(),null===(o=this.container)||void 0===o||o.destroy(),function(){var e;null===(e=document.getElementById(bx))||void 0===e||e.remove()}()},t.prototype.setThemeCfg=function(e){void 0===e&&(e={});var t=(null==e?void 0:e.theme)||{},n=function(e){var t,n,r,o,i,a,s=(null==e?void 0:e.palette)||(a=null==e?void 0:e.name,aw[(a||"default").toLowerCase()]),l=s.basicColors,c=s.semanticColors,u=s.others,d=null===(t=null==e?void 0:e.spreadsheet)||void 0===t?void 0:t.isTableMode(),h=Cw()?"bold":700,f=function(){var e,t;return{bolderText:{fontFamily:sw,fontSize:12,fontWeight:h,fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},text:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},cell:{crossBackgroundColor:l[1],backgroundColor:l[8],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:l[2],backgroundOpacity:.6,borderColor:l[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:null!==(e=null==u?void 0:u.results)&&void 0!==e?e:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(t=null==u?void 0:u.highlight)&&void 0!==t?t:l[6],backgroundOpacity:1},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:l[6],opacity:1},linkLine:{size:1.5,fill:l[6],opacity:.6}},bar:{intervalPadding:4,fill:l[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:l[13],opacity:.25},rangeColors:{good:null==c?void 0:c.green,satisfactory:c.yellow,bad:c.red},backgroundColor:"#E9E9E9"},interval:{height:12,fill:l[7]}},icon:{fill:l[13],downIconColor:c.red,upIconColor:c.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:sw,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:d?"center":"left",textBaseline:"middle"},text:{fontFamily:sw,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:l[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textAlign:d?"center":"left",textBaseline:"top"},bolderText:{fontFamily:sw,fontSize:12,fontWeight:h,fill:l[14],linkTextFill:l[6],opacity:1,textAlign:d?"center":"left",textBaseline:"top"},text:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"top",textAlign:d?"center":"left"},cell:{backgroundColor:l[1],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(n=null==u?void 0:u.results)&&void 0!==n?n:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(r=null==u?void 0:u.highlight)&&void 0!==r?r:l[6],backgroundOpacity:1}}},icon:{fill:l[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:sw,fontSize:12,fontWeight:h,fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:sw,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[4],backgroundOpacity:.6},selected:{backgroundColor:l[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(o=null==u?void 0:u.results)&&void 0!==o?o:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(i=null==u?void 0:u.highlight)&&void 0!==i?i:l[6],backgroundOpacity:1}}},icon:{fill:l[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:f(),mergedCell:f(),resizeArea:{size:3,background:l[7],backgroundOpacity:0,guideLineColor:l[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:l[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:yw()?3:6,hoverSize:yw()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:l[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:l[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"}},prepareSelectMask:{backgroundColor:l[5],backgroundOpacity:.3},background:{color:l[8],opacity:1}}}(sa(sa({},e),{spreadsheet:this}));this.theme=IS(n,t)},t.prototype.setTheme=function(e){this.theme=IS(this.theme,e)},t.prototype.updatePagination=function(e){this.options=IS(this.options,{pagination:e}),this.store.set("scrollX",0),this.store.set("scrollY",0)},t.prototype.getContentHeight=function(){return this.facet.getContentHeight()},t.prototype.changeSize=function(e,t){void 0===e&&(e=this.options.width),void 0===t&&(t=this.options.height),this.changeSheetSize(e,t)},t.prototype.changeSheetSize=function(e,t){void 0===e&&(e=this.options.width),void 0===t&&(t=this.options.height);var n=this.getCanvasElement(),r=this.container.get("width"),o=this.container.get("height");(e!==r||t!==o)&&n&&(this.options=IS(this.options,{width:e,height:t}),this.container.changeSize(e,t))},t.prototype.getCanvasElement=function(){return this.container.get("el")},t.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},t.prototype.getRowNodes=function(e){return void 0===e&&(e=-1),-1===e?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter((function(t){return t.level===e}))},t.prototype.getRowLeafNodes=function(){var e;return(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.rowLeafNodes)||[]},t.prototype.getColumnNodes=function(e){var t;void 0===e&&(e=-1);var n=(null===(t=this.facet)||void 0===t?void 0:t.layoutResult.colNodes)||[];return-1===e?n:n.filter((function(t){return t.level===e}))},t.prototype.getColumnLeafNodes=function(){var e;return(null===(e=this.facet)||void 0===e?void 0:e.layoutResult.colLeafNodes)||[]},t.prototype.updateScrollOffset=function(e){this.facet.updateScrollOffset(IS({offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}},e))},t.prototype.getTooltipDataItemMappingCallback=function(){var e;return null===(e=this.options)||void 0===e?void 0:e.mappingDisplayDataItem},t.prototype.getCell=function(e){for(var t,n=e;n&&!(n instanceof ei);){if(n instanceof gE)return n;n=null===(t=n.get)||void 0===t?void 0:t.call(n,"parent")}return null},t.prototype.getCellType=function(e){var t=this.getCell(e);return null==t?void 0:t.cellType},t.prototype.getTotalsConfig=function(e){var t=yu(this.options.totals,vv(this.dataSet.fields.rows,e)?"row":"col",{});return{showSubTotals:!(!t.showSubTotals||!vv(t.subTotalsDimensions,e))&&t.showSubTotals,showGrandTotals:t.showGrandTotals,reverseLayout:t.reverseLayout,reverseSubLayout:t.reverseSubLayout,label:t.label||hw("总计"),subLabel:t.subLabel||hw("小计")}},t.prototype.initGroups=function(e){var t=this.options,n=t.width,r=t.height,o=t.supportCSSTransform,i=t.devicePixelRatio;this.container=new ei({container:this.getMountContainer(e),width:n,height:r,localRefresh:!1,supportCSSTransform:o,pixelRatio:Math.max(i,1)}),this.backgroundGroup=this.container.addGroup({name:"backGroundGroup",zIndex:0}),this.panelGroup=this.container.addGroup({name:"panelGroup",zIndex:1}),this.foregroundGroup=this.container.addGroup({name:"foreGroundGroup",zIndex:3}),this.initPanelGroupChildren(),this.updateContainerStyle()},t.prototype.updateContainerStyle=function(){var e=this.getCanvasElement();e&&(e.style.display="block")},t.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new sL({name:"panelScrollGroup",zIndex:1,s2:this}),this.panelGroup.add(this.panelScrollGroup)},t.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},t.prototype.clearColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},t.prototype.clearCanvasEvent=function(){var e=this;Zg(this.getEvents(),(function(t,n){e.off(n)}))},t.prototype.updateSortMethodMap=function(e,t,n){var r;void 0===n&&(n=!1);var o=n?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",sa(sa({},o),((r={})[e]=t,r)))},t.prototype.getMenuDefaultSelectedKeys=function(e){var t=yu(this.store.get("sortMethodMap"),e);return t?[t]:[]},t}(he),OL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t.prototype.getDataSet=function(e){var t=e.dataSet,n=e.hierarchyType;return t?t(this):"customTree"===n?new AT(this):new _T(this)},t.prototype.isPivotMode=function(){return!0},t.prototype.isTableMode=function(){return!1},t.prototype.isHierarchyTreeType=function(){var e=this.options.hierarchyType;return"tree"===e||"customTree"===e},t.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},t.prototype.isFrozenRowHeader=function(){var e;return null===(e=this.options)||void 0===e?void 0:e.frozenRowHeader},t.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},t.prototype.clearDrillDownData=function(e,t){this.dataSet instanceof _T&&(this.dataSet.clearDrillDownData(e),t||(this.interaction.reset(),this.render(!1)))},t.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,t=this.dataSet,n=t.fields,r=t.meta,o=this.options,i=o.style,a=o.dataCell;return sa(sa(sa(sa({},this.options),n),i),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(t){return new bE(t,e)}})},t.prototype.buildFacet=function(){var e,t=this.getFacetCfgFromDataSetAndOptions();null===(e=this.facet)||void 0===e||e.destroy(),this.facet=new rL(t),this.facet.render()},t.prototype.bindEvents=function(){this.off(Jo.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(Jo.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(Jo.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(Jo.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},t.prototype.handleRowCellCollapseTreeRows=function(e){var t,n=e.id,r=e.isCollapsed,o={style:{collapsedRows:(t={},t[n]=r,t)}};this.emit(Jo.LAYOUT_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:null==e?void 0:e.node}),this.setOptions(o),this.render(!1),this.emit(Jo.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows,meta:null==e?void 0:e.node})},t.prototype.handleTreeRowsCollapseAll=function(e){var t={style:{hierarchyCollapse:!e,collapsedRows:null,rowExpandDepth:null}};this.setOptions(t),this.render(!1)},t.prototype.groupSortByMethod=function(e,t){var n=this.dataCfg.fields,r=n.rows,o=n.columns,i=this.options.style.colCfg.hideMeasureColumn,a=this.isValueInCols()?ig(r):ig(o),s=t.query,l=t.value,c=bf(s),u=l;i&&this.isValueInCols()&&(u=this.dataSet.fields.values[0],c[ri]=u);var d={sortFieldId:a,sortMethod:e,sortByMeasure:u,query:c},h=this.dataCfg.sortParams.filter((function(e){return(null==e?void 0:e.sortFieldId)!==a}));this.updateSortMethodMap(t.id,e,!0);var f=da(da([],ua(h),!1),[d],!1);this.emit(Jo.RANGE_SORT,f),this.setDataCfg(sa(sa({},this.dataCfg),{sortParams:f})),this.render()},t.prototype.handleGroupSort=function(e,t){var n=this;e.stopPropagation(),this.interaction.addIntercepts([Vi.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==t?void 0:t.id),o={onClick:function(r){var o=r.key;n.groupSortByMethod(o,t),n.emit(Jo.RANGE_SORTED,e)},menus:[{key:"asc",icon:"groupAsc",text:hw("组内升序")},{key:"desc",icon:"groupDesc",text:hw("组内降序")},{key:"none",text:hw("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},t}(ML),_L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aa(t,e),t}(aL),NL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSortTooltipClick=function(e,n){var r=e.key,o={sortFieldId:n.field,sortMethod:r};t.updateSortMethodMap(n.id,r),t.emit(Jo.RANGE_SORT,[o])},t}return aa(t,e),t.prototype.getDataSet=function(e){var t=e.dataSet;return t?t(this):new NT(this)},t.prototype.isPivotMode=function(){return!1},t.prototype.isTableMode=function(){return!0},t.prototype.isHierarchyTreeType=function(){return!1},t.prototype.isScrollContainsRowHeader=function(){return!1},t.prototype.isFrozenRowHeader=function(){return!1},t.prototype.clearDrillDownData=function(){},t.prototype.isValueInCols=function(){return!1},t.prototype.bindEvents=function(){},t.prototype.initPanelGroupChildren=function(){var t,n=this;e.prototype.initPanelGroupChildren.call(this);var r={zIndex:2,s2:this};t=ua([li,ci,ui,di,hi,fi].map((function(e){var t=new _L(sa({name:e},r));return n.panelGroup.add(t),t})),6),this.frozenRowGroup=t[0],this.frozenColGroup=t[1],this.frozenTrailingRowGroup=t[2],this.frozenTrailingColGroup=t[3],this.frozenTopGroup=t[4],this.frozenBottomGroup=t[5]},t.prototype.getFacetCfgFromDataSetAndOptions=function(){var e=this,t=this.dataSet,n=t.fields,r=t.meta,o=this.options,i=o.style,a=o.dataCell;return sa(sa(sa(sa({},this.options),n),i),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(t){return e.options.showSeriesNumber&&0===t.colIndex?new vS(t,e):new gS(t,e)}})},t.prototype.buildFacet=function(){var e,t=this.getFacetCfgFromDataSetAndOptions();null===(e=this.facet)||void 0===e||e.destroy(),this.facet=new iL(t),this.facet.render()},t.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(Jo.RANGE_SORT),this.off(Jo.RANGE_FILTER)},t.prototype.handleGroupSort=function(e,t){var n=this;e.stopPropagation(),this.interaction.addIntercepts([Vi.HOVER]);var r=this.getMenuDefaultSelectedKeys(null==t?void 0:t.id),o={onClick:function(e){var r=e.key;n.onSortTooltipClick({key:r},t)},menus:[{key:"asc",icon:"groupAsc",text:hw("升序")},{key:"desc",icon:"groupDesc",text:hw("降序")},{key:"none",text:hw("不排序")}],defaultSelectedKeys:r};this.showTooltipWithInfo(e,[],{operator:o,onlyMenu:!0,forceRender:!0})},t}(ML)},802:(e,t,n)=>{"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,e.exports={"en-US":n(744),"zh-CN":n(623)}},838:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var a=o.apply(null,n);a&&e.push(a)}else if("object"===i)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},942:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,n,l){(l=l||{}).arrayMerge=l.arrayMerge||o,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=r;var c=Array.isArray(n);return c===Array.isArray(e)?c?l.arrayMerge(e,n,l):function(e,t,n){var o={};return n.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}(e,n,l):r(n,l)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return s(e,n,t)}),{})};var l=s;e.exports=l},486:(e,t,n)=>{"use strict";(t=e.exports=n(546).default).default=t},546:(e,t)=>{"use strict";t.default=function(){function e(t,n,r,o){this.message=t,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},o={},i={start:Oe},a=Oe,s=function(e){return{type:"messageFormatPattern",elements:e,location:Ie()}},l=function(e){var t,n,r,o,i,a="";for(t=0,r=e.length;t<r;t+=1)for(n=0,i=(o=e[t]).length;n<i;n+=1)a+=o[n];return a},c=function(e){return{type:"messageTextElement",value:e,location:Ie()}},u=/^[^ \t\n\r,.+={}#]/,d={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},h="{",f={type:"literal",value:"{",description:'"{"'},p=",",g={type:"literal",value:",",description:'","'},v="}",m={type:"literal",value:"}",description:'"}"'},y=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Ie()}},C="number",b={type:"literal",value:"number",description:'"number"'},w="date",x={type:"literal",value:"date",description:'"date"'},E="time",S={type:"literal",value:"time",description:'"time"'},I=function(e,t){return{type:e+"Format",style:t&&t[2],location:Ie()}},T="plural",L={type:"literal",value:"plural",description:'"plural"'},M=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Ie()}},O="selectordinal",_={type:"literal",value:"selectordinal",description:'"selectordinal"'},N=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Ie()}},A="select",R={type:"literal",value:"select",description:'"select"'},D=function(e){return{type:"selectFormat",options:e,location:Ie()}},P="=",k={type:"literal",value:"=",description:'"="'},B=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Ie()}},F="offset:",j={type:"literal",value:"offset:",description:'"offset:"'},z=function(e){return e},H=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Ie()}},W={type:"other",description:"whitespace"},G=/^[ \t\n\r]/,U={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},V={type:"other",description:"optionalWhitespace"},Y=/^[0-9]/,$={type:"class",value:"[0-9]",description:"[0-9]"},X=/^[0-9a-f]/i,q={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},K="0",Z={type:"literal",value:"0",description:'"0"'},Q=/^[1-9]/,J={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},re="\\\\",oe={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},ie=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ce="\\{",ue={type:"literal",value:"\\{",description:'"\\\\{"'},de=function(){return"{"},he="\\}",fe={type:"literal",value:"\\}",description:'"\\\\}"'},pe=function(){return"}"},ge="\\u",ve={type:"literal",value:"\\u",description:'"\\\\u"'},me=function(e){return String.fromCharCode(parseInt(e,16))},ye=function(e){return e.join("")},Ce=0,be=0,we=[{line:1,column:1,seenCR:!1}],xe=0,Ee=[],Se=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=i[r.startRule]}function Ie(){return Le(be,Ce)}function Te(e){var n,r,o=we[e];if(o)return o;for(n=e-1;!we[n];)n--;for(o={line:(o=we[n]).line,column:o.column,seenCR:o.seenCR};n<e;)"\n"===(r=t.charAt(n))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),n++;return we[e]=o,o}function Le(e,t){var n=Te(e),r=Te(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Me(e){Ce<xe||(Ce>xe&&(xe=Ce,Ee=[]),Ee.push(e))}function Oe(){return _e()}function _e(){var e,t,n;for(e=Ce,t=[],n=Ne();n!==o;)t.push(n),n=Ne();return t!==o&&(be=e,t=s(t)),t}function Ne(){var e;return(e=function(){var e,n;return e=Ce,n=function(){var e,n,r,i,a,s;if(e=Ce,n=[],r=Ce,(i=Pe())!==o&&(a=ze())!==o&&(s=Pe())!==o?r=i=[i,a,s]:(Ce=r,r=o),r!==o)for(;r!==o;)n.push(r),r=Ce,(i=Pe())!==o&&(a=ze())!==o&&(s=Pe())!==o?r=i=[i,a,s]:(Ce=r,r=o);else n=o;return n!==o&&(be=e,n=l(n)),(e=n)===o&&(e=Ce,e=(n=De())!==o?t.substring(e,Ce):n),e}(),n!==o&&(be=e,n=c(n)),e=n}())===o&&(e=function(){var e,n,r,i,a,s,l;return e=Ce,123===t.charCodeAt(Ce)?(n=h,Ce++):(n=o,0===Se&&Me(f)),n!==o&&Pe()!==o?(r=function(){var e,n,r;if((e=Fe())===o){if(e=Ce,n=[],u.test(t.charAt(Ce))?(r=t.charAt(Ce),Ce++):(r=o,0===Se&&Me(d)),r!==o)for(;r!==o;)n.push(r),u.test(t.charAt(Ce))?(r=t.charAt(Ce),Ce++):(r=o,0===Se&&Me(d));else n=o;e=n!==o?t.substring(e,Ce):n}return e}(),r!==o&&Pe()!==o?(i=Ce,44===t.charCodeAt(Ce)?(a=p,Ce++):(a=o,0===Se&&Me(g)),a!==o&&(s=Pe())!==o?(l=function(){var e;return e=function(){var e,n,r,i,a,s;return e=Ce,t.substr(Ce,6)===C?(n=C,Ce+=6):(n=o,0===Se&&Me(b)),n===o&&(t.substr(Ce,4)===w?(n=w,Ce+=4):(n=o,0===Se&&Me(x)),n===o&&(t.substr(Ce,4)===E?(n=E,Ce+=4):(n=o,0===Se&&Me(S)))),n!==o&&Pe()!==o?(r=Ce,44===t.charCodeAt(Ce)?(i=p,Ce++):(i=o,0===Se&&Me(g)),i!==o&&(a=Pe())!==o&&(s=ze())!==o?r=i=[i,a,s]:(Ce=r,r=o),r===o&&(r=null),r!==o?(be=e,e=n=I(n,r)):(Ce=e,e=o)):(Ce=e,e=o),e}(),e===o&&(e=function(){var e,n,r,i;return e=Ce,t.substr(Ce,6)===T?(n=T,Ce+=6):(n=o,0===Se&&Me(L)),n!==o&&Pe()!==o?(44===t.charCodeAt(Ce)?(r=p,Ce++):(r=o,0===Se&&Me(g)),r!==o&&Pe()!==o&&(i=Re())!==o?(be=e,e=n=M(i)):(Ce=e,e=o)):(Ce=e,e=o),e}(),e===o&&(e=function(){var e,n,r,i;return e=Ce,t.substr(Ce,13)===O?(n=O,Ce+=13):(n=o,0===Se&&Me(_)),n!==o&&Pe()!==o?(44===t.charCodeAt(Ce)?(r=p,Ce++):(r=o,0===Se&&Me(g)),r!==o&&Pe()!==o&&(i=Re())!==o?(be=e,e=n=N(i)):(Ce=e,e=o)):(Ce=e,e=o),e}(),e===o&&(e=function(){var e,n,r,i,a;if(e=Ce,t.substr(Ce,6)===A?(n=A,Ce+=6):(n=o,0===Se&&Me(R)),n!==o)if(Pe()!==o)if(44===t.charCodeAt(Ce)?(r=p,Ce++):(r=o,0===Se&&Me(g)),r!==o)if(Pe()!==o){if(i=[],(a=Ae())!==o)for(;a!==o;)i.push(a),a=Ae();else i=o;i!==o?(be=e,e=n=D(i)):(Ce=e,e=o)}else Ce=e,e=o;else Ce=e,e=o;else Ce=e,e=o;else Ce=e,e=o;return e}()))),e}(),l!==o?i=a=[a,s,l]:(Ce=i,i=o)):(Ce=i,i=o),i===o&&(i=null),i!==o&&(a=Pe())!==o?(125===t.charCodeAt(Ce)?(s=v,Ce++):(s=o,0===Se&&Me(m)),s!==o?(be=e,e=n=y(r,i)):(Ce=e,e=o)):(Ce=e,e=o)):(Ce=e,e=o)):(Ce=e,e=o),e}()),e}function Ae(){var e,n,r,i,a;return e=Ce,Pe()!==o?(n=function(){var e,n,r,i;return e=Ce,n=Ce,61===t.charCodeAt(Ce)?(r=P,Ce++):(r=o,0===Se&&Me(k)),r!==o&&(i=Fe())!==o?n=r=[r,i]:(Ce=n,n=o),(e=n!==o?t.substring(e,Ce):n)===o&&(e=ze()),e}(),n!==o&&Pe()!==o?(123===t.charCodeAt(Ce)?(r=h,Ce++):(r=o,0===Se&&Me(f)),r!==o&&Pe()!==o&&(i=_e())!==o&&Pe()!==o?(125===t.charCodeAt(Ce)?(a=v,Ce++):(a=o,0===Se&&Me(m)),a!==o?(be=e,e=B(n,i)):(Ce=e,e=o)):(Ce=e,e=o)):(Ce=e,e=o)):(Ce=e,e=o),e}function Re(){var e,n,r,i;if(e=Ce,n=function(){var e,n,r;return e=Ce,t.substr(Ce,7)===F?(n=F,Ce+=7):(n=o,0===Se&&Me(j)),n!==o&&Pe()!==o&&(r=Fe())!==o?(be=e,e=n=z(r)):(Ce=e,e=o),e}(),n===o&&(n=null),n!==o)if(Pe()!==o){if(r=[],(i=Ae())!==o)for(;i!==o;)r.push(i),i=Ae();else r=o;r!==o?(be=e,e=n=H(n,r)):(Ce=e,e=o)}else Ce=e,e=o;else Ce=e,e=o;return e}function De(){var e,n;if(Se++,e=[],G.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=o,0===Se&&Me(U)),n!==o)for(;n!==o;)e.push(n),G.test(t.charAt(Ce))?(n=t.charAt(Ce),Ce++):(n=o,0===Se&&Me(U));else e=o;return Se--,e===o&&(n=o,0===Se&&Me(W)),e}function Pe(){var e,n,r;for(Se++,e=Ce,n=[],r=De();r!==o;)n.push(r),r=De();return e=n!==o?t.substring(e,Ce):n,Se--,e===o&&(n=o,0===Se&&Me(V)),e}function ke(){var e;return Y.test(t.charAt(Ce))?(e=t.charAt(Ce),Ce++):(e=o,0===Se&&Me($)),e}function Be(){var e;return X.test(t.charAt(Ce))?(e=t.charAt(Ce),Ce++):(e=o,0===Se&&Me(q)),e}function Fe(){var e,n,r,i,a,s;if(e=Ce,48===t.charCodeAt(Ce)?(n=K,Ce++):(n=o,0===Se&&Me(Z)),n===o){if(n=Ce,r=Ce,Q.test(t.charAt(Ce))?(i=t.charAt(Ce),Ce++):(i=o,0===Se&&Me(J)),i!==o){for(a=[],s=ke();s!==o;)a.push(s),s=ke();a!==o?r=i=[i,a]:(Ce=r,r=o)}else Ce=r,r=o;n=r!==o?t.substring(n,Ce):r}return n!==o&&(be=e,n=ee(n)),n}function je(){var e,n,r,i,a,s,l,c;return te.test(t.charAt(Ce))?(e=t.charAt(Ce),Ce++):(e=o,0===Se&&Me(ne)),e===o&&(e=Ce,t.substr(Ce,2)===re?(n=re,Ce+=2):(n=o,0===Se&&Me(oe)),n!==o&&(be=e,n=ie()),(e=n)===o&&(e=Ce,t.substr(Ce,2)===ae?(n=ae,Ce+=2):(n=o,0===Se&&Me(se)),n!==o&&(be=e,n=le()),(e=n)===o&&(e=Ce,t.substr(Ce,2)===ce?(n=ce,Ce+=2):(n=o,0===Se&&Me(ue)),n!==o&&(be=e,n=de()),(e=n)===o&&(e=Ce,t.substr(Ce,2)===he?(n=he,Ce+=2):(n=o,0===Se&&Me(fe)),n!==o&&(be=e,n=pe()),(e=n)===o&&(e=Ce,t.substr(Ce,2)===ge?(n=ge,Ce+=2):(n=o,0===Se&&Me(ve)),n!==o?(r=Ce,i=Ce,(a=Be())!==o&&(s=Be())!==o&&(l=Be())!==o&&(c=Be())!==o?i=a=[a,s,l,c]:(Ce=i,i=o),(r=i!==o?t.substring(r,Ce):i)!==o?(be=e,e=n=me(r)):(Ce=e,e=o)):(Ce=e,e=o)))))),e}function ze(){var e,t,n;if(e=Ce,t=[],(n=je())!==o)for(;n!==o;)t.push(n),n=je();else t=o;return t!==o&&(be=e,t=ye(t)),t}if((n=a())!==o&&Ce===t.length)return n;throw n!==o&&Ce<t.length&&Me({type:"end",description:"end of input"}),function(t,n,r,o){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,r),n,r,o)}(null,Ee,xe<t.length?t.charAt(xe):null,xe<t.length?Le(xe,xe+1):Le(xe,xe))}}}()},462:(e,t,n)=>{"use strict";var r=n(478).Z;n(321),(t=e.exports=r).default=t},419:(e,t)=>{"use strict";function n(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function r(e){this.id=e}function o(e,t,n,r,o){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=o}function i(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function a(e,t){this.id=e,this.options=t}t.default=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,o=e.elements,i=[];for(t=0,n=o.length;t<n;t+=1)switch((r=o[t]).type){case"messageTextElement":i.push(this.compileMessageText(r));break;case"argumentElement":i.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return i},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new i(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,i=this.formats,s=this.locales,l=this.pluralFn;switch(t.type){case"numberFormat":return n=i.number[t.style],{id:e.id,format:new Intl.NumberFormat(s,n).format};case"dateFormat":return n=i.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"timeFormat":return n=i.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"pluralFormat":return n=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,n,l);case"selectFormat":return n=this.compileOptions(e),new a(e.id,n);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t,n,r,o=e.format,i=o.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===o.type?e:null,t=0,n=i.length;t<n;t+=1)a[(r=i[t]).selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),a},r.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},i.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},a.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},873:(e,t,n)=>{"use strict";var r=n(303),o=n(996),i=n(419),a=n(486);function s(e,t,n){var r="string"==typeof e?s.__parse(e):e;if(!r||"messageFormatPattern"!==r.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),o.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var i=this._findPluralRuleFunction(this._locale),a=this._compilePattern(r,t,n,i),l=this;this.format=function(t){try{return l._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}t.default=s,o.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(s,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),o.defineProperty(s,"__parse",{value:a.default.parse}),o.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,r){return new i.default(t,n,r).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,o,i,a,s,l,c="";for(n=0,o=e.length;n<o;n+=1)if("string"!=typeof(i=e[n])){if(a=i.id,!t||!r.hop.call(t,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=t[a],i.options?c+=this._format(i.getOption(s),t):c+=i.format(s)}else c+=i;return c},s.prototype._mergeFormats=function(e,t){var n,i,a={};for(n in e)r.hop.call(e,n)&&(a[n]=i=o.objCreate(e[n]),t&&r.hop.call(t,n)&&r.extend(i,t[n]));return a},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,r,o,i=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(o=i[r.join("-")])return o.locale;r.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},531:(e,t)=>{"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],o=Number(n[0])==e,i=o&&n[0].slice(-1),a=o&&n[0].slice(-2);return t?1==i&&11!=a?"one":2==i&&12!=a?"two":3==i&&13!=a?"few":"other":1==e&&r?"one":"other"}}},996:(e,t,n)=>{"use strict";var r=n(303),o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),i=(!o&&Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):r.hop.call(e,t)&&!("value"in n)||(e[t]=n.value)}),a=Object.create||function(e,t){var n,o;function a(){}for(o in a.prototype=e,n=new a,t)r.hop.call(t,o)&&i(n,o,t[o]);return n};t.defineProperty=i,t.objCreate=a},478:(e,t,n)=>{"use strict";var r=n(873),o=n(531);r.default.__addLocaleData(o.default),r.default.defaultLocale="en",t.Z=r.default},303:(e,t)=>{"use strict";t.extend=function(e){var t,r,o,i,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;t<r;t+=1)if(o=a[t])for(i in o)n.call(o,i)&&(e[i]=o[i]);return e};var n=Object.prototype.hasOwnProperty;t.hop=n},656:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},370:(e,t,n)=>{"use strict";var r=n(656);t.__esModule=!0,t.isIOS=t.isAndroid=t.isWeb=t.isWechatApp=t.isMiniApp=t.isReactNative=t.isWeex=t.isNode=void 0;var o="undefined"!=typeof __sfc__,i="object"==typeof navigator&&("Mozilla"===navigator.appCodeName||"Gecko"===navigator.product),a=void 0!==r&&!(!r.versions||!r.versions.node);t.isNode=a;var s="function"==typeof callNative||"object"==typeof WXEnvironment&&"Web"!==WXEnvironment.platform;t.isWeex=s;var l="undefined"!=typeof __fbBatchedBridgeConfig;t.isReactNative=l;var c="object"==typeof my&&void 0!==my.getSystemInfo&&!o;t.isMiniApp=c;var u="object"==typeof wx&&void 0!==wx.getSystemInfo;t.isWechatApp=u;var d=i&&!c&&!u||o;t.isWeb=d;var h={};c&&(h=my.getSystemInfoSync()),u&&(h=wx.getSystemInfoSync()),s&&(h=navigator);var f=c||u||s?"android"===(h.platform||"").toLowerCase():!!d&&Boolean(navigator.userAgent.match(/android/i));t.isAndroid=f;var p=c||u||s?["ios","iOS","iPhone OS"].indexOf(h.platform)>-1:!!d&&Boolean(navigator.userAgent.match(/(iphone|ipod|ipad)/i));t.isIOS=p},770:t=>{"use strict";t.exports=e},618:e=>{"use strict";e.exports=t},725:e=>{"use strict";e.exports=n},24:e=>{"use strict";e.exports=r},314:e=>{"use strict";e.exports=o},479:e=>{"use strict";e.exports=i},721:e=>{"use strict";e.exports=a},321:()=>{},689:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(743);function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,r.Z)(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},659:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(689);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},743:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},744:e=>{"use strict";e.exports=JSON.parse('{"gi-assets-algorithm.src.ClusterTable.NodeName":"Node name","gi-assets-algorithm.src.ClusterTable.DownloadCsv":"Download CSV","gi-assets-algorithm.src.CommunityDetection.Component.SetCoreK":"Set core k:","gi-assets-algorithm.src.CommunityDetection.Component.TheGraphInstanceDoesNot":"The graph instance does not exist.","gi-assets-algorithm.src.CommunityDetection.Component.TheCurrentGraphIsConnected":"The current graph is connected as a whole, no non-connected subgraph","gi-assets-algorithm.src.CommunityDetection.Component.ThereAreIsolatedPointOn":"There are isolated point on the current map and will not participate in community division.","gi-assets-algorithm.src.CommunityDetection.Component.CommunityDiscovery":"Community discovery","gi-assets-algorithm.src.CommunityDetection.Component.NoDataAvailable":"No data available","gi-assets-algorithm.src.CommunityDetection.Component.AnalysisResults":"Analysis results","gi-assets-algorithm.src.CommunityDetection.Component.CommunityNumber":"Community number","gi-assets-algorithm.src.CommunityDetection.Component.SelectionAlgorithm":"Selection Algorithm","gi-assets-algorithm.src.CommunityDetection.Component.Analysis":"Analysis","gi-assets-algorithm.src.CommunityDetection.info.CommunityDiscovery":"Community discovery","gi-assets-algorithm.src.CommunityDetection.info.ThroughKCoreLopuvainAnd":"Through K-Core, Lopuvain, and iLouvain","gi-assets-algorithm.src.InfoDetection.Component.IsolatedPoint":"Isolated point","gi-assets-algorithm.src.InfoDetection.Component.Ring":"Ring","gi-assets-algorithm.src.InfoDetection.DegreeScatter.TotalDegree":"Total degree","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Outdegree":"Outdegree","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Penetration":"Penetration","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Degree":"Degree","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Quantity":"Quantity","gi-assets-algorithm.src.InfoDetection.DegreeScatter.DegreeDistribution":"Degree distribution","gi-assets-algorithm.src.InfoDetection.info.InformationDetection":"Information Detection","gi-assets-algorithm.src.InfoDetection.info.DetectIsolatedPointsRingsEtc":"Detect isolated points, rings, etc. in the canvas","gi-assets-algorithm.src.NodeImportance.Component.NoResults":"No results","gi-assets-algorithm.src.NodeImportance.Component.TheGraphInstanceDoesNot":"The graph instance does not exist.","gi-assets-algorithm.src.NodeImportance.Component.NodeImportance":"Node importance","gi-assets-algorithm.src.NodeImportance.Component.AlgorithmAlgorithm":"algorithm {algorithm}","gi-assets-algorithm.src.NodeImportance.Component.Sort":"-Sort","gi-assets-algorithm.src.NodeImportance.Component.Penetration":"Penetration","gi-assets-algorithm.src.NodeImportance.Component.Outdegree":"Outdegree","gi-assets-algorithm.src.NodeImportance.Component.Algorithm":"Algorithm","gi-assets-algorithm.src.NodeImportance.Component.Analysis":"Analysis","gi-assets-algorithm.src.NodeImportance.Component.DownloadCsv":"Download CSV","gi-assets-algorithm.src.NodeImportance.Component.ResultList":"Result List","gi-assets-algorithm.src.NodeImportance.Component.StatisticalChart":"Statistical Chart","gi-assets-algorithm.src.NodeImportance.info.NodeImportance":"Node importance","gi-assets-algorithm.src.NodeImportance.info.ThroughPagerankDegreeCentralityAttributes":"Through PageRank, degree centrality, attributes, etc.","gi-assets-algorithm.src.NodeImportance.propertyContent.CannotBeEmpty":"Cannot be empty","gi-assets-algorithm.src.NodeImportance.propertyContent.Properties":"Properties","gi-assets-algorithm.src.NodeImportance.propertyContent.PleaseSelect":"Please select","gi-assets-algorithm.src.NodeImportance.propertyContent.NoData":"No data","gi-assets-algorithm.src.NodeImportance.propertyContent.CalculationMethod":"Calculation method","gi-assets-algorithm.src.NodeImportance.propertyContent.MappingMethod":"Mapping method","gi-assets-algorithm.src.NodeImportance.registerMeta.DegreeCentrality":"Degree centrality","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheEntity":"Calculated based on the entity\'s access degree","gi-assets-algorithm.src.NodeImportance.registerMeta.PagerankWebPageSorting":"PageRank web page sorting","gi-assets-algorithm.src.NodeImportance.registerMeta.UsePagerankWebPageSorting":"Use PageRank web page sorting algorithm to calculate","gi-assets-algorithm.src.NodeImportance.registerMeta.NodeAttributeImportance":"Node attribute importance","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculateBasedOnNodeAttribute":"Calculate based on node attribute values","gi-assets-algorithm.src.NodeImportance.registerMeta.ImportanceOfRelationshipAttributes":"Importance of relationship attributes","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheAttributes":"Calculated based on the attributes of node-related relationships","gi-assets-algorithm.src.NodeImportance.registerMeta.Penetration":"Penetration","gi-assets-algorithm.src.NodeImportance.registerMeta.Outdegree":"Outdegree","gi-assets-algorithm.src.NodeImportance.registerMeta.Average":"Average","gi-assets-algorithm.src.NodeImportance.registerMeta.MinimumValue":"Minimum value","gi-assets-algorithm.src.NodeImportance.registerMeta.Maximum":"Maximum","gi-assets-algorithm.src.NodeImportance.registerMeta.Median":"Median","gi-assets-algorithm.src.NodeImportance.registerMeta.Sort":"Sort","gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToNumericalType":"Applicable to numerical type","gi-assets-algorithm.src.NodeImportance.registerMeta.Count":"Count","gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToEnumeratedTypes":"Applicable to enumerated types","gi-assets-algorithm.src.NodeImportance.registerMeta.PositiveCorrelation":"Positive correlation","gi-assets-algorithm.src.NodeImportance.registerMeta.TheLargerTheValueThe":"The larger the value, the larger the point or edge.","gi-assets-algorithm.src.NodeImportance.registerMeta.TheSmallerTheValueThe":"The smaller the value, the larger the point or edge.","gi-assets-algorithm.src.NodeImportance.resultPlot.ImportanceValue":"Importance value","gi-assets-algorithm.src.NodeImportance.resultPlot.NumberOfNodes":"Number of nodes","gi-assets-algorithm.src.NodeImportance.resultTable.SerialNumber":"Serial Number","gi-assets-algorithm.src.NodeImportance.resultTable.Node":"Node","gi-assets-algorithm.src.NodeImportance.resultTable.Importance":"Importance","gi-assets-algorithm.src.NodeImportance.resultTable.AttributeName":"Attribute name","gi-assets-algorithm.src.NodeImportance.resultTable.CalculationMethod":"Calculation method","gi-assets-algorithm.src.NodeImportance.resultTable.Sort":"Sort","gi-assets-algorithm.src.NodesClustering.Component.CategoryIndex":"Category {index}","gi-assets-algorithm.src.NodesClustering.Component.NodeClustering":"Node clustering","gi-assets-algorithm.src.NodesClustering.Component.AlgorithmNodeclusteringalgo":"Algorithm {nodeClusteringAlgo}","gi-assets-algorithm.src.NodesClustering.Component.NoDataAvailable":"No data available","gi-assets-algorithm.src.NodesClustering.Component.AnalysisResults":"Analysis results","gi-assets-algorithm.src.NodesClustering.Component.Classification":"Classification","gi-assets-algorithm.src.NodesClustering.Component.NodesclusteringalgorithmkmeansAlgorithm":"{NodesClusteringAlgorithmKMeans} algorithm","gi-assets-algorithm.src.NodesClustering.Component.GatherNodesIntoKClusters":"Gather nodes into K clusters based on the distance between nodes","gi-assets-algorithm.src.NodesClustering.Component.SetTheKValue":"Set the k value","gi-assets-algorithm.src.NodesClustering.Component.Analysis":"Analysis","gi-assets-algorithm.src.NodesClustering.info.NodeClustering":"Node clustering","gi-assets-algorithm.src.NodesClustering.info.UseKMeansAlgorithmTo":"Use K-Means algorithm to compute node clustering","gi-assets-algorithm.src.NodesSimilarity.Component.NodeSimilarity":"Node similarity","gi-assets-algorithm.src.NodesSimilarity.Component.AlgorithmSimilarityalgo":"Algorithm {similarityAlgo}","gi-assets-algorithm.src.NodesSimilarity.Component.TheGraphInstanceDoesNot":"The graph instance does not exist.","gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeDoesNot":"The seed node does not exist.","gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeSeednodeidDoes":"The seed node {seedNodeId} does not exist.","gi-assets-algorithm.src.NodesSimilarity.Component.NoDataAvailable":"No data available","gi-assets-algorithm.src.NodesSimilarity.Component.AnalysisResults":"Analysis results","gi-assets-algorithm.src.NodesSimilarity.Component.SelectASeedNode":"Select a seed node","gi-assets-algorithm.src.NodesSimilarity.Component.Analysis":"Analysis","gi-assets-algorithm.src.NodesSimilarity.info.NodeSimilarity":"Node similarity","gi-assets-algorithm.src.NodesSimilarity.info.CosineSimilarityBetweenNodesAnd":"Cosine similarity between nodes and selected seed nodes","gi-assets-algorithm.src.NodesSimilarity.resultTable.SerialNumber":"Serial Number","gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeName":"Node name","gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeId":"Node ID","gi-assets-algorithm.src.NodesSimilarity.resultTable.CosineSimilarity":"Cosine similarity","gi-assets-algorithm.src.NodesSimilarity.resultTable.DownloadCsv":"Download CSV","gi-assets-algorithm.src.NodesSimilarity.resultTable.MaximumValue":"Maximum value:","gi-assets-algorithm.src.NodesSimilarity.resultTable.MinimumValue":"Minimum value:","gi-assets-algorithm.src.NodesSimilarity.resultTable.Sort":"Sort","gi-assets-algorithm.src.PatternMatch.Component.Mode":"Mode-1","gi-assets-algorithm.src.PatternMatch.Component.ModeIntialpatterninfomapid":"Mode-{intialPatternInfoMapId}","gi-assets-algorithm.src.PatternMatch.Component.TheCanvasIsInThe":"The canvas is in the selected state. You can select or click subgraph. The selected subgraph will be extracted into the mode. [Press W] Drag and drop canvas","gi-assets-algorithm.src.PatternMatch.Component.Cancel":"Cancel","gi-assets-algorithm.src.PatternMatch.Component.Confirm":"Confirm","gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema":"Failed to create the schema. Patterns must be connected","gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema.1":"Failed to create the schema. The Hanging Edge cannot exist in the mode.","gi-assets-algorithm.src.PatternMatch.Component.ConfirmToExitTheExtraction":"Confirm to exit the extraction mode","gi-assets-algorithm.src.PatternMatch.Component.IfTheSelectedContentAlready":"If the selected content already exists, exit will not use the selected content as the mode. Are you sure you want to quit?","gi-assets-algorithm.src.PatternMatch.Component.FailedToAddModeThe":"Failed to add mode. The number of modes has reached the upper limit!","gi-assets-algorithm.src.PatternMatch.Component.ModeId":"Mode-{id}","gi-assets-algorithm.src.PatternMatch.Component.TheGraphInstanceDoesNot":"The graph instance does not exist.","gi-assets-algorithm.src.PatternMatch.Component.TheNullPatternCannotBe":"The null pattern cannot be matched!","gi-assets-algorithm.src.PatternMatch.Component.NoMatchFound":"No match found!","gi-assets-algorithm.src.PatternMatch.Component.PatternMatching":"Pattern matching","gi-assets-algorithm.src.PatternMatch.Component.CreateMode":"Create mode","gi-assets-algorithm.src.PatternMatch.Component.CopyMode":"Copy mode-","gi-assets-algorithm.src.PatternMatch.Component.Match":"Match","gi-assets-algorithm.src.PatternMatch.Component.ExportMode":"Export mode","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.CannotBeEmpty":"Cannot be empty","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.SelectProperties":"Select Properties","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.EnterAttributeValues":"Enter attribute values","gi-assets-algorithm.src.PatternMatch.editDrawer.CannotBeEmpty":"Cannot be empty","gi-assets-algorithm.src.PatternMatch.editDrawer.PleaseSelect":"Please select","gi-assets-algorithm.src.PatternMatch.editDrawer.AddAttributes":"Add attributes","gi-assets-algorithm.src.PatternMatch.editDrawer.AttributeCondition":"Attribute condition","gi-assets-algorithm.src.PatternMatch.editDrawer.Optional":"Optional","gi-assets-algorithm.src.PatternMatch.editDrawer.StartingPoint":"Starting point","gi-assets-algorithm.src.PatternMatch.editDrawer.EndPoint":"End point","gi-assets-algorithm.src.PatternMatch.editDrawer.EdgeType":"Edge type","gi-assets-algorithm.src.PatternMatch.editDrawer.SelectTheStartAndEnd":"Select the start and end types first.","gi-assets-algorithm.src.PatternMatch.editDrawer.TheEdgeTypeDoesNot":"The edge type does not exist between the start type and the end type.","gi-assets-algorithm.src.PatternMatch.editDrawer.NodeType":"Node type","gi-assets-algorithm.src.PatternMatch.editDrawer.EditEdge":"Edit edge","gi-assets-algorithm.src.PatternMatch.editDrawer.EditPoint":"Edit point","gi-assets-algorithm.src.PatternMatch.editDrawer.Cancel":"Cancel","gi-assets-algorithm.src.PatternMatch.editDrawer.TheRelationshipTypeCannotBe":"The relationship type cannot be empty.","gi-assets-algorithm.src.PatternMatch.editDrawer.Ok":"OK","gi-assets-algorithm.src.PatternMatch.info.PatternMatching":"Pattern matching","gi-assets-algorithm.src.PatternMatch.info.SelectGraphicalModelToFind":"Select graphical model to find subgraphs with similar structures","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode":"Failed to save the mode. The mode cannot be empty. To abandon the editor, click cancel","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode.2":"Failed to save the mode and failed to create an edge. Specify the type for all nodes and edges","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateTheSchema":"Failed to create the schema. Patterns must be connected","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateAnEdge":"Failed to create an edge. Edge type does not exist between start type {sourceType} and end type {targetType}","gi-assets-algorithm.src.PatternMatch.patternEditor.Cancel":"Cancel","gi-assets-algorithm.src.PatternMatch.patternEditor.Save":"Save","gi-assets-algorithm.src.PatternMatch.patternEditor.AddNode":"Add node","gi-assets-algorithm.src.PatternMatch.patternEditor.SearchNode":"Search node","gi-assets-algorithm.src.PatternMatch.patternEditor.AddTemplate":"Add Template","gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteANode":"Delete a node","gi-assets-algorithm.src.PatternMatch.patternEditor.AddEdge":"Add edge","gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteEdge":"Delete edge","gi-assets-algorithm.src.PatternMatch.patternPane.PleaseUploadDataInJson":"Please upload data in JSON format","gi-assets-algorithm.src.PatternMatch.patternPane.EditMode":"Edit mode","gi-assets-algorithm.src.PatternMatch.patternPane.DragOrClickTheContent":"Drag or click the content from the main graph and extract it as a mode","gi-assets-algorithm.src.PatternMatch.patternPane.ExtractionMode":"Extraction mode","gi-assets-algorithm.src.PatternMatch.patternPane.ImportMode":"Import mode","gi-assets-algorithm.src.PatternMatch.patternPane.DownloadMode":"Download Mode","gi-assets-algorithm.src.PatternMatch.patternPane.BuildMode":"Build Mode","gi-assets-algorithm.src.PatternMatch.patternPane.NoMode":"No mode","gi-assets-algorithm.src.PatternMatch.resultTable.SerialNumber":"Serial Number","gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfNodes":"Number of nodes","gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfEdges":"Number of edges","gi-assets-algorithm.src.PatternMatch.resultTable.PatternMatchingResultList":"Pattern matching result list","gi-assets-algorithm.src.PatternMatch.resultTable.Sort":"Sort","gi-assets-algorithm.src.PatternMatchSimple.Component.TelecomFraudRiskModel":"Telecom fraud risk model 0","gi-assets-algorithm.src.PatternMatchSimple.Component.Transfer":"Transfer","gi-assets-algorithm.src.PatternMatchSimple.Component.TelecomFraudRiskModel.1":"Telecom fraud risk model 1","gi-assets-algorithm.src.PatternMatchSimple.Component.Account":"Account","gi-assets-algorithm.src.PatternMatchSimple.Component.Create":"Create","gi-assets-algorithm.src.PatternMatchSimple.Component.SchemaLibrary":"Schema Library","gi-assets-algorithm.src.PatternMatchSimple.Component.PatternMatching":"Pattern matching","gi-assets-algorithm.src.PatternMatchSimple.Component.Reproduction":"Reproduction","gi-assets-algorithm.src.PatternMatchSimple.Component.ModeSelection":"Mode selection","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectAMode":"Select a mode","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectTheClusterFieldOf":"Select the cluster field of the node","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectAFieldDefaultValue":"Select a field. Default value: unkown","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectTheClusterFieldOf.1":"Select the cluster field of the edge","gi-assets-algorithm.src.PatternMatchSimple.Component.StartMatching":"Start matching","gi-assets-algorithm.src.PatternMatchSimple.PatternMatching":"Pattern matching","gi-assets-algorithm.src.utils.csv.ExportDataCsv":"Export data. csv"}')},623:e=>{"use strict";e.exports=JSON.parse('{"gi-assets-algorithm.src.ClusterTable.NodeName":"节点名称","gi-assets-algorithm.src.ClusterTable.DownloadCsv":"下载 CSV","gi-assets-algorithm.src.CommunityDetection.Component.SetCoreK":"设置核心度k：","gi-assets-algorithm.src.CommunityDetection.Component.TheGraphInstanceDoesNot":"图实例不存在","gi-assets-algorithm.src.CommunityDetection.Component.TheCurrentGraphIsConnected":"当前图整体连通，无非连通子图","gi-assets-algorithm.src.CommunityDetection.Component.ThereAreIsolatedPointOn":"当前图上存在孤点，将不参与社区划分","gi-assets-algorithm.src.CommunityDetection.Component.CommunityDiscovery":"社区发现","gi-assets-algorithm.src.CommunityDetection.Component.NoDataAvailable":"暂无数据","gi-assets-algorithm.src.CommunityDetection.Component.AnalysisResults":"分析结果","gi-assets-algorithm.src.CommunityDetection.Component.CommunityNumber":"社区编号","gi-assets-algorithm.src.CommunityDetection.Component.SelectionAlgorithm":"选择算法","gi-assets-algorithm.src.CommunityDetection.Component.Analysis":"分析","gi-assets-algorithm.src.CommunityDetection.info.CommunityDiscovery":"社区发现","gi-assets-algorithm.src.CommunityDetection.info.ThroughKCoreLopuvainAnd":"通过 K-Core、Lopuvain、iLouvain","gi-assets-algorithm.src.InfoDetection.Component.IsolatedPoint":"孤立点","gi-assets-algorithm.src.InfoDetection.Component.Ring":"环","gi-assets-algorithm.src.InfoDetection.DegreeScatter.TotalDegree":"总度数","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Outdegree":"出度","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Penetration":"入度","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Degree":"度数","gi-assets-algorithm.src.InfoDetection.DegreeScatter.Quantity":"数量","gi-assets-algorithm.src.InfoDetection.DegreeScatter.DegreeDistribution":"度数分布","gi-assets-algorithm.src.InfoDetection.info.InformationDetection":"信息检测","gi-assets-algorithm.src.InfoDetection.info.DetectIsolatedPointsRingsEtc":"检测画布中孤立点、环等","gi-assets-algorithm.src.NodeImportance.Component.NoResults":"无结果","gi-assets-algorithm.src.NodeImportance.Component.TheGraphInstanceDoesNot":"图实例不存在","gi-assets-algorithm.src.NodeImportance.Component.NodeImportance":"节点重要性","gi-assets-algorithm.src.NodeImportance.Component.AlgorithmAlgorithm":"算法 {algorithm}","gi-assets-algorithm.src.NodeImportance.Component.Sort":"- 排序","gi-assets-algorithm.src.NodeImportance.Component.Penetration":"入度","gi-assets-algorithm.src.NodeImportance.Component.Outdegree":"出度","gi-assets-algorithm.src.NodeImportance.Component.Algorithm":"算法","gi-assets-algorithm.src.NodeImportance.Component.Analysis":"分析","gi-assets-algorithm.src.NodeImportance.Component.DownloadCsv":"下载CSV","gi-assets-algorithm.src.NodeImportance.Component.ResultList":"结果列表","gi-assets-algorithm.src.NodeImportance.Component.StatisticalChart":"统计图表","gi-assets-algorithm.src.NodeImportance.info.NodeImportance":"节点重要性","gi-assets-algorithm.src.NodeImportance.info.ThroughPagerankDegreeCentralityAttributes":"通过 PageRank、度中心性、属性等","gi-assets-algorithm.src.NodeImportance.propertyContent.CannotBeEmpty":"不可为空","gi-assets-algorithm.src.NodeImportance.propertyContent.Properties":"属性","gi-assets-algorithm.src.NodeImportance.propertyContent.PleaseSelect":"请选择","gi-assets-algorithm.src.NodeImportance.propertyContent.NoData":"无数据","gi-assets-algorithm.src.NodeImportance.propertyContent.CalculationMethod":"计算方式","gi-assets-algorithm.src.NodeImportance.propertyContent.MappingMethod":"映射方式","gi-assets-algorithm.src.NodeImportance.registerMeta.DegreeCentrality":"度中心性","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheEntity":"根据实体的出入度大小计算","gi-assets-algorithm.src.NodeImportance.registerMeta.PagerankWebPageSorting":"PageRank网页排序","gi-assets-algorithm.src.NodeImportance.registerMeta.UsePagerankWebPageSorting":"使用PageRank网页排序算法计算","gi-assets-algorithm.src.NodeImportance.registerMeta.NodeAttributeImportance":"节点属性重要性","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculateBasedOnNodeAttribute":"根据节点属性值计算","gi-assets-algorithm.src.NodeImportance.registerMeta.ImportanceOfRelationshipAttributes":"关系属性重要性","gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheAttributes":"根据节点相关关系的属性计算","gi-assets-algorithm.src.NodeImportance.registerMeta.Penetration":"入度","gi-assets-algorithm.src.NodeImportance.registerMeta.Outdegree":"出度","gi-assets-algorithm.src.NodeImportance.registerMeta.Average":"平均数","gi-assets-algorithm.src.NodeImportance.registerMeta.MinimumValue":"最小值","gi-assets-algorithm.src.NodeImportance.registerMeta.Maximum":"最大值","gi-assets-algorithm.src.NodeImportance.registerMeta.Median":"中位数","gi-assets-algorithm.src.NodeImportance.registerMeta.Sort":"排序","gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToNumericalType":"适用于数值型","gi-assets-algorithm.src.NodeImportance.registerMeta.Count":"计数","gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToEnumeratedTypes":"适用于枚举型","gi-assets-algorithm.src.NodeImportance.registerMeta.PositiveCorrelation":"正相关","gi-assets-algorithm.src.NodeImportance.registerMeta.TheLargerTheValueThe":"值越大，点或边越大","gi-assets-algorithm.src.NodeImportance.registerMeta.TheSmallerTheValueThe":"值越小，点或边越大","gi-assets-algorithm.src.NodeImportance.resultPlot.ImportanceValue":"重要性值","gi-assets-algorithm.src.NodeImportance.resultPlot.NumberOfNodes":"节点数量","gi-assets-algorithm.src.NodeImportance.resultTable.SerialNumber":"序号","gi-assets-algorithm.src.NodeImportance.resultTable.Node":"节点","gi-assets-algorithm.src.NodeImportance.resultTable.Importance":"重要性","gi-assets-algorithm.src.NodeImportance.resultTable.AttributeName":"属性名","gi-assets-algorithm.src.NodeImportance.resultTable.CalculationMethod":"计算方式","gi-assets-algorithm.src.NodeImportance.resultTable.Sort":"排序","gi-assets-algorithm.src.NodesClustering.Component.CategoryIndex":"分类{index}","gi-assets-algorithm.src.NodesClustering.Component.NodeClustering":"节点聚类","gi-assets-algorithm.src.NodesClustering.Component.AlgorithmNodeclusteringalgo":"算法 {nodeClusteringAlgo}","gi-assets-algorithm.src.NodesClustering.Component.NoDataAvailable":"暂无数据","gi-assets-algorithm.src.NodesClustering.Component.AnalysisResults":"分析结果","gi-assets-algorithm.src.NodesClustering.Component.Classification":"分类","gi-assets-algorithm.src.NodesClustering.Component.NodesclusteringalgorithmkmeansAlgorithm":"{NodesClusteringAlgorithmKMeans}算法","gi-assets-algorithm.src.NodesClustering.Component.GatherNodesIntoKClusters":"根据节点之间的距离将节点聚成K个簇","gi-assets-algorithm.src.NodesClustering.Component.SetTheKValue":"设置 K 值","gi-assets-algorithm.src.NodesClustering.Component.Analysis":"分析","gi-assets-algorithm.src.NodesClustering.info.NodeClustering":"节点聚类","gi-assets-algorithm.src.NodesClustering.info.UseKMeansAlgorithmTo":"使用 K-Means 算法计算节点的聚类","gi-assets-algorithm.src.NodesSimilarity.Component.NodeSimilarity":"节点相似性","gi-assets-algorithm.src.NodesSimilarity.Component.AlgorithmSimilarityalgo":"算法 {similarityAlgo}","gi-assets-algorithm.src.NodesSimilarity.Component.TheGraphInstanceDoesNot":"图实例不存在","gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeDoesNot":"种子节点不存在","gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeSeednodeidDoes":"种子节点{seedNodeId}不存在","gi-assets-algorithm.src.NodesSimilarity.Component.NoDataAvailable":"暂无数据","gi-assets-algorithm.src.NodesSimilarity.Component.AnalysisResults":"分析结果","gi-assets-algorithm.src.NodesSimilarity.Component.SelectASeedNode":"选择种子节点","gi-assets-algorithm.src.NodesSimilarity.Component.Analysis":"分析","gi-assets-algorithm.src.NodesSimilarity.info.NodeSimilarity":"节点相似性","gi-assets-algorithm.src.NodesSimilarity.info.CosineSimilarityBetweenNodesAnd":"节点到选定种子节点的余弦相似性","gi-assets-algorithm.src.NodesSimilarity.resultTable.SerialNumber":"序号","gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeName":"节点名称","gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeId":"节点 ID","gi-assets-algorithm.src.NodesSimilarity.resultTable.CosineSimilarity":"余弦相似度","gi-assets-algorithm.src.NodesSimilarity.resultTable.DownloadCsv":"下载 CSV","gi-assets-algorithm.src.NodesSimilarity.resultTable.MaximumValue":"最大值:","gi-assets-algorithm.src.NodesSimilarity.resultTable.MinimumValue":"最小值:","gi-assets-algorithm.src.NodesSimilarity.resultTable.Sort":"排序","gi-assets-algorithm.src.PatternMatch.Component.Mode":"模式-1","gi-assets-algorithm.src.PatternMatch.Component.ModeIntialpatterninfomapid":"模式-{intialPatternInfoMapId}","gi-assets-algorithm.src.PatternMatch.Component.TheCanvasIsInThe":"画布处于选择状态，你可以通过【圈选】或【点选】子图，被选中的子图将被抽取为模式。【按住 W】 可拖拽画布","gi-assets-algorithm.src.PatternMatch.Component.Cancel":"取消","gi-assets-algorithm.src.PatternMatch.Component.Confirm":"确认","gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema":"创建模式失败。模式必须是连通的","gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema.1":"创建模式失败。模式中不可以存在悬挂边","gi-assets-algorithm.src.PatternMatch.Component.ConfirmToExitTheExtraction":"确认退出抽取模式","gi-assets-algorithm.src.PatternMatch.Component.IfTheSelectedContentAlready":"已有选中内容，退出将不会将使用选中内容作为模式。确认退出吗？","gi-assets-algorithm.src.PatternMatch.Component.FailedToAddModeThe":"添加模式失败。模式数量已达上限！","gi-assets-algorithm.src.PatternMatch.Component.ModeId":"模式-{id}","gi-assets-algorithm.src.PatternMatch.Component.TheGraphInstanceDoesNot":"图实例不存在","gi-assets-algorithm.src.PatternMatch.Component.TheNullPatternCannotBe":"无法匹配空模式！","gi-assets-algorithm.src.PatternMatch.Component.NoMatchFound":"没有找到匹配！","gi-assets-algorithm.src.PatternMatch.Component.PatternMatching":"模式匹配","gi-assets-algorithm.src.PatternMatch.Component.CreateMode":"新建模式","gi-assets-algorithm.src.PatternMatch.Component.CopyMode":"复制模式-","gi-assets-algorithm.src.PatternMatch.Component.Match":"匹配","gi-assets-algorithm.src.PatternMatch.Component.ExportMode":"导出模式","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.CannotBeEmpty":"不可为空","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.SelectProperties":"选择属性","gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.EnterAttributeValues":"输入属性值","gi-assets-algorithm.src.PatternMatch.editDrawer.CannotBeEmpty":"不可为空","gi-assets-algorithm.src.PatternMatch.editDrawer.PleaseSelect":"请选择","gi-assets-algorithm.src.PatternMatch.editDrawer.AddAttributes":"增加属性","gi-assets-algorithm.src.PatternMatch.editDrawer.AttributeCondition":"属性条件","gi-assets-algorithm.src.PatternMatch.editDrawer.Optional":"可选","gi-assets-algorithm.src.PatternMatch.editDrawer.StartingPoint":"起点","gi-assets-algorithm.src.PatternMatch.editDrawer.EndPoint":"终点","gi-assets-algorithm.src.PatternMatch.editDrawer.EdgeType":"边类型","gi-assets-algorithm.src.PatternMatch.editDrawer.SelectTheStartAndEnd":"请先选择起点与终点的类型","gi-assets-algorithm.src.PatternMatch.editDrawer.TheEdgeTypeDoesNot":"起点类型与终点类型之间不存在边类型","gi-assets-algorithm.src.PatternMatch.editDrawer.NodeType":"节点类型","gi-assets-algorithm.src.PatternMatch.editDrawer.EditEdge":"编辑边","gi-assets-algorithm.src.PatternMatch.editDrawer.EditPoint":"编辑点","gi-assets-algorithm.src.PatternMatch.editDrawer.Cancel":"取消","gi-assets-algorithm.src.PatternMatch.editDrawer.TheRelationshipTypeCannotBe":"关系类型不可为空","gi-assets-algorithm.src.PatternMatch.editDrawer.Ok":"确定","gi-assets-algorithm.src.PatternMatch.info.PatternMatching":"模式匹配","gi-assets-algorithm.src.PatternMatch.info.SelectGraphicalModelToFind":"选定图模式，找到相似结构的子图","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode":"保存模式失败，模式不可为空。若希望放弃编辑器，请点击“取消”按钮","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode.2":"保存模式失败，创建边失败。请为所有节点和边指定类型","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateTheSchema":"创建模式失败。模式必须是连通的","gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateAnEdge":"创建边失败。起点类型 {sourceType} 与终点类型 {targetType} 之间不存在边类型","gi-assets-algorithm.src.PatternMatch.patternEditor.Cancel":"取消","gi-assets-algorithm.src.PatternMatch.patternEditor.Save":"保存","gi-assets-algorithm.src.PatternMatch.patternEditor.AddNode":"添加节点","gi-assets-algorithm.src.PatternMatch.patternEditor.SearchNode":"搜索节点","gi-assets-algorithm.src.PatternMatch.patternEditor.AddTemplate":"添加模版","gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteANode":"删除节点","gi-assets-algorithm.src.PatternMatch.patternEditor.AddEdge":"添加边","gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteEdge":"删除边","gi-assets-algorithm.src.PatternMatch.patternPane.PleaseUploadDataInJson":"请上传 JSON 格式的数据","gi-assets-algorithm.src.PatternMatch.patternPane.EditMode":"编辑模式","gi-assets-algorithm.src.PatternMatch.patternPane.DragOrClickTheContent":"从主图上拖拽圈选或点选内容并抽取为模式","gi-assets-algorithm.src.PatternMatch.patternPane.ExtractionMode":"提取模式","gi-assets-algorithm.src.PatternMatch.patternPane.ImportMode":"导入模式","gi-assets-algorithm.src.PatternMatch.patternPane.DownloadMode":"下载模式","gi-assets-algorithm.src.PatternMatch.patternPane.BuildMode":"构建模式","gi-assets-algorithm.src.PatternMatch.patternPane.NoMode":"暂无模式","gi-assets-algorithm.src.PatternMatch.resultTable.SerialNumber":"序号","gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfNodes":"节点数量","gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfEdges":"边数量","gi-assets-algorithm.src.PatternMatch.resultTable.PatternMatchingResultList":"模式匹配结果列表","gi-assets-algorithm.src.PatternMatch.resultTable.Sort":"排序","gi-assets-algorithm.src.PatternMatchSimple.Component.TelecomFraudRiskModel":"电信诈骗风险模式0","gi-assets-algorithm.src.PatternMatchSimple.Component.Transfer":"转账","gi-assets-algorithm.src.PatternMatchSimple.Component.TelecomFraudRiskModel.1":"电信诈骗风险模式一","gi-assets-algorithm.src.PatternMatchSimple.Component.Account":"账户","gi-assets-algorithm.src.PatternMatchSimple.Component.Create":"新建","gi-assets-algorithm.src.PatternMatchSimple.Component.SchemaLibrary":"模式库","gi-assets-algorithm.src.PatternMatchSimple.Component.PatternMatching":"模式匹配","gi-assets-algorithm.src.PatternMatchSimple.Component.Reproduction":"重制","gi-assets-algorithm.src.PatternMatchSimple.Component.ModeSelection":"模式选择","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectAMode":"请选择模式","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectTheClusterFieldOf":"选择节点的聚类字段","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectAFieldDefaultValue":"请选择字段，默认为unkown","gi-assets-algorithm.src.PatternMatchSimple.Component.SelectTheClusterFieldOf.1":"选择边的聚类字段","gi-assets-algorithm.src.PatternMatchSimple.Component.StartMatching":"开始匹配","gi-assets-algorithm.src.PatternMatchSimple.PatternMatching":"模式匹配","gi-assets-algorithm.src.utils.csv.ExportDataCsv":"导出数据.csv"}')}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return s[e](n,n.exports,c),n.loaded=!0,n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{"use strict";c.r(u),c.d(u,{components:()=>yr});var e=c(932);const t=function(e,t){var n=e.nodes,r=e.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){i[e.id]=t,o.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=i[n],s=i[r];!a&&0!==a||!s&&0!==s||(o[a][s]=1,t||(o[s][a]=1))})),o};var n=function(e,t){return e===t},r=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}();const o=function(){function e(e){void 0===e&&(e=n),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new r(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new r(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,o=void 0===r?void 0:r;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==n&&this.compare(i.value,n))return i;i=i.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),i=function(){function e(){this.linkedList=new o}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();var a=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));return"target"===n?r.filter((function(t){return t.source===e})).map((function(e){return e.target})):"source"===n?r.filter((function(t){return t.target===e})).map((function(e){return e.source})):r.map((function(t){return t.source===e?t.target:t.source}))},s=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))},l=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};var d=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,o=void 0===r?[]:r,i=[],s={},l={},c={},u=[],d=0,h=function e(t){l[t.id]=d,c[t.id]=d,d+=1,i.push(t),s[t.id]=!0;for(var r=a(t.id,o,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),h=function(o){var i=r[o];if(l[i]||0===l[i])s[i]&&(c[t.id]=Math.min(c[t.id],l[i]));else{var a=n.filter((function(e){return e.id===i}));a.length>0&&e(a[0]),c[t.id]=Math.min(c[t.id],c[i])}},f=0;f<r.length;f++)h(f);if(c[t.id]===l[t.id]){for(var p=[];i.length>0;){var g=i.pop();if(s[g.id]=!1,p.push(g),g===t)break}p.length>0&&u.push(p)}},f=0,p=n;f<p.length;f++){var g=p[f];l[g.id]||0===l[g.id]||h(g)}return u};function h(e,t){return t?d(e):function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,o=void 0===r?[]:r,i=[],s={},l=[],c=function e(t){l.push(t),s[t.id]=!0;for(var r=a(t.id,o),i=function(t){var o=r[t];if(!s[o]){var i=n.filter((function(e){return e.id===o}));i.length>0&&e(i[0])}},c=0;c<r.length;++c)i(c)},u=0;u<n.length;u++){var d=n[u];if(!s[d.id]){c(d);for(var h=[];l.length>0;)h.push(l.pop());i.push(h)}}return i}(e)}var f=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,o=e.edges,i=void 0===o?[]:o;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),i.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t};const p=f;function g(e,t,n,r){r.enter({current:t,previous:n});var o=e.edges;a(t,void 0===o?[]:o,"target").forEach((function(o){r.allowTraversal({previous:n,current:t,next:o})&&g(e,o,t,r)})),r.leave({current:t,previous:n})}function v(e,t,n){g(e,t,"",function(e){void 0===e&&(e={});var t,n=e,r=function(){},o=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||o,n.enter=e.enter||r,n.leave=e.leave||r,n}(n))}var m=function(e,t,n){var r,o;void 0===n&&(n=!0);for(var i=[],s=0,l=h(e,!1);s<l.length;s++){var c=l[s];if(c.length)for(var u=c[0],d=u.id,f=[u],p=((r={})[d]=u,r),g=((o={})[d]=new Set,o);f.length>0;)for(var v=f.pop(),m=v.id,y=a(m,e.edges),C=function(r){var o,a=y[r],s=e.nodes.find((function(e){return e.id===a}));if(a===m)i.push(((o={})[a]=v,o));else if(a in g){if(!g[m].has(s)){for(var l=!0,c=[s,v],u=p[m];g[a].size&&!g[a].has(u)&&(c.push(u),u!==p[u.id]);)u=p[u.id];if(c.push(u),t&&n?(l=!1,c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!0)):t&&!n&&c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!1),l){for(var d={},h=1;h<c.length;h+=1)d[c[h-1].id]=c[h];c.length&&(d[c[c.length-1].id]=c[0]),i.push(d)}g[a].add(v)}}else p[a]=v,f.push(s),g[a]=new Set([v])},b=0;b<y.length;b+=1)C(b)}return i},y=function(e,t,n){void 0===n&&(n=!0);for(var r=[],o=new Set,i=[],s=[],l={},c={},u=function e(a,c,u){var d=!1;if(t&&!1===n&&t.indexOf(a.id)>-1)return d;r.push(a),o.add(a);for(var h=u[a.id],f=0;f<h.length;f+=1)if((v=l[h[f]])===c){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),s.push(p),d=!0}else o.has(v)||e(v,c,u)&&(d=!0);if(d)!function(e){for(var t=[e];t.length>0;){var n=t.pop();o.has(n)&&(o.delete(n),i[n.id].forEach((function(e){t.push(e)})),i[n.id].clear())}}(a);else for(f=0;f<h.length;f+=1){var v=l[h[f]];i[v.id].has(a)||i[v.id].add(a)}return r.pop(),d},h=e.nodes,f=void 0===h?[]:h,p=0;p<f.length;p+=1){var g=f[p],v=g.id;c[v]=p,l[p]=g}if(t&&n){var m=function(e){var n=t[e];c[f[e].id]=c[n],c[n]=0,l[0]=f.find((function(e){return e.id===n})),l[c[f[e].id]]=f[e]};for(p=0;p<t.length;p++)m(p)}for(var y=function(r){for(var o,i,l=1/0,u=0;u<r.length;u+=1)for(var d=r[u],h=0;h<d.length;h++){var f=c[d[h].id];f<l&&(l=f,i=u)}var p=r[i],g=[];for(u=0;u<p.length;u+=1){var v=p[u];g[v.id]=[];for(var m=0,y=a(v.id,e.edges,"target").filter((function(e){return p.map((function(e){return e.id})).indexOf(e)>-1}));m<y.length;m++){var C=y[m];C!==v.id||!1===n&&t.indexOf(v.id)>-1?g[v.id].push(c[C]):s.push(((o={})[v.id]=v,o))}}return{component:p,adjList:g,minIdx:l}},C=0;C<f.length;){var b=f.filter((function(e){return c[e.id]>=C})),w=d({nodes:b,edges:e.edges}).filter((function(e){return e.length>1}));if(0===w.length)break;var x=y(w),E=x.minIdx,S=x.adjList,I=x.component;if(!(I.length>1))break;I.forEach((function(e){i[e.id]=new Set}));var T=l[E];if(t&&n&&-1===t.indexOf(T.id))return s;u(T,T,S),C=E+1}return s},C=function(e,t,n,r){return void 0===r&&(r=!0),t?y(e,n,r):m(e,n,r)};const b=function(e){var t=null,n=e.nodes,r={},o={},i={},a={};(void 0===n?[]:n).forEach((function(e){o[e.id]=e}));for(var s={enter:function(e){var n=e.current,a=e.previous;if(i[n]){t={};for(var s=n,l=a;l!==n;)t[s]=l,s=l,l=r[l];t[s]=l}else i[n]=n,delete o[n],r[n]=a},leave:function(e){var t=e.current;a[t]=t,delete i[t]},allowTraversal:function(e){var n=e.next;return!t&&!a[n]}};Object.keys(o).length;)v(e,Object.keys(o)[0],s);return t};function w(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var x={}.toString;const E=function(e,t){return x.call(e)==="[object "+t+"]"},S=function(e){return E(e,"Function")},I=function(e){return Array.isArray?Array.isArray(e):E(e,"Array")};Object.keys;var T=Array.prototype;T.splice,T.indexOf,Array.prototype.splice;const L=function(e){return E(e,"String")};function M(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];t.has(i)||(n.push(i),t.set(i,!0))}return n}Object.prototype.hasOwnProperty;Number.isInteger&&Number.isInteger,Math.PI,Math.PI;const O=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return function(e,t){var n,r;if(e)if(I(e))for(var o=0,i=e.length;o<i&&!1!==t(e[o],o);o++);else if(r=typeof(n=e),null!==n&&"object"===r||"function"===r)for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}(e,(function(n,r){S(e)&&"prototype"===r||t.push(n)})),t};Object.prototype;var _=function(e){if("object"!=typeof e||null===e)return e;var t;if(I(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=_(e[n]):t[n]=e[n]}else for(var o in t={},e)"object"==typeof e[o]&&null!=e[o]?t[o]=_(e[o]):t[o]=e[o];return t};const N=_;Object.prototype.hasOwnProperty;const A=function(e){return"object"==typeof e&&null!==e},R=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)};var D=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(L(e)||L(t))return!1;if(R(e)||R(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=D(e[r],t[r]));r++);return n}if(A(e)||A(t)){var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(n=!0,r=0;r<o.length&&(n=D(e[o[r]],t[o[r]]));r++);return n}return!1};const P=D;var k;Object.prototype.hasOwnProperty,function(e,t){if(!S(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return a.set(i,s),s};n.cache=new Map}((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return k||(k=document.createElement("canvas").getContext("2d")),k.font=[i,a,o,n+"px",r].join(" "),k.measureText(L(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([e],O(t)).join("")})),function(){function e(){this.map={}}e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length}}();const B=function(e,t,n,r){var o=e.nodes,i=void 0===o?[]:o,a=e.edges,l=void 0===a?[]:a,c=[],u={},d={},h={};i.forEach((function(e,n){var r=e.id;c.push(r),d[r]=1/0,r===t&&(d[r]=0)}));for(var f=i.length,p=function(e){var t=function(e,t,n){for(var r,o=1/0,i=0;i<t.length;i++){var a=t[i].id;!n[a]&&e[a]<=o&&(o=e[a],r=t[i])}return r}(d,i,u),o=t.id;if(u[o]=!0,d[o]===1/0)return"continue";var a=[];a=n?function(e,t){return t.filter((function(t){return t.source===e}))}(o,l):s(o,l),a.forEach((function(e){var t=e.target,n=e.source,i=t===o?n:t,a=r&&e[r]?e[r]:1;d[i]>d[o]+a?(d[i]=d[o]+a,h[i]=[{node:o,edge:e.id}]):d[i]===d[o]+a&&h[i].push({node:o,edge:e.id})}))},g=0;g<f;g++)p();h[t]=[{node:t,edge:void 0}];var v={};for(var m in d)d[m]!==1/0&&F(t,{node:m},h,v);var y={},C={};Object.keys(v).forEach((function(e){var t=v[e];y[e]=t.map((function(e){return e.map((function(e){return e.node}))})),C[e]=t.map((function(e){return e.map((function(e){return e.edge})).filter(Boolean)}))}));var b={},w={};for(var m in v)b[m]=y[m][0],w[m]=C[m][0];return{length:d,path:b,edgePath:w,allPath:y,allEdgePath:C}};function F(e,t,n,r){if(e===t.node)return[t];if(r[t.node])return r[t.node];for(var o=[],i=0,a=n[t.node];i<a.length;i++){var s=a[i],l=F(e,s,n,r);if(!l)return;for(var c=0,u=l;c<u.length;c++){var d=u[c];if(I(d)){var h=w([],d,!0).splice(0,d.length-1);o.push(w(w([],h,!0),[s,{node:t.node}],!1))}else o.push([d,{node:t.node}])}}return r[t.node]=o,r[t.node]}const j=function(e,n){for(var r=t(e,n),o=[],i=r.length,a=0;a<i;a+=1){o[a]=[];for(var s=0;s<i;s+=1)a===s?o[a][s]=0:0!==r[a][s]&&r[a][s]?o[a][s]=r[a][s]:o[a][s]=1/0}for(var l=0;l<i;l+=1)for(a=0;a<i;a+=1)for(s=0;s<i;s+=1)o[a][s]>o[a][l]+o[l][s]&&(o[a][s]=o[a][l]+o[l][s]);return o};const z=function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+r[i];return new e(o)}},e.prototype.subtract=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-r[i];return new e(o)}},e.prototype.avg=function(t){var n=[];if(0!==t)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=Math.pow(this.arr[o]-e.arr[o],2);return r}},e.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=Math.pow(this.arr[o]-e.arr[o],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},e.prototype.normalize=function(){var t=[],n=N(this.arr);n.sort((function(e,t){return e-t}));var r=n[n.length-1],o=n[0];for(var i in this.arr)t[i]=(this.arr[i]-o)/(r-o);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var o in this.arr)r+=this.arr[o]*e.arr[o];return r}console.error("The two vectors are unequal in length.")},e.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},e}();var H,W=function(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach((function(e){void 0===t&&n.push(e),void 0!==e[t]&&n.push(e[t])})),n};!function(e){e.EuclideanDistance="euclideanDistance"}(H||(H={}));var G=function(e,t,n){var r=function(e,t,n){var r=[];(null==t?void 0:t.length)?r=t:(e.forEach((function(e){r=r.concat(Object.keys(e))})),r=M(r));var o={};return r.forEach((function(t){var r=[];e.forEach((function(e){void 0!==e[t]&&""!==e[t]&&r.push(e[t])})),r.length&&!(null==n?void 0:n.includes(t))&&(o[t]=M(r))})),o}(e,t,n),o=[];if(!Object.keys(r).length)return o;var i=Object.values(r).every((function(e){return e.every((function(e){return"number"==typeof e}))}));return e.forEach((function(e,t){var n=[];Object.keys(r).forEach((function(t){var o=e[t],a=r[t],s=a.findIndex((function(e){return o===e})),l=[];if(i)l.push(o);else for(var c=0;c<a.length;c++)c===s?l.push(1):l.push(0);n=n.concat(l)})),o[t]=n})),o},U=function(e,t,n,r){void 0===n&&(n=H.EuclideanDistance);var o=0;return n===H.EuclideanDistance&&(o=new z(e).euclideanDistance(new z(t))),o},V=function(e,t,n,r){for(var o=t.length,i=2*r,a=0,s=0;s<o;s++)for(var l=e[s].clusterId,c=0;c<o;c++)l===e[c].clusterId&&(a+=(t[s][c]||0)-(n[s]||0)*(n[c]||0)/i);return a*(1/i)},Y=function(e,t){void 0===e&&(e=[]);for(var n=e.length,r=new z([]),o=0;o<n;o++)r=r.add(new z(t[o]));var i=r.avg(n);i.normalize();var a=0;for(o=0;o<n;o++)a+=(l=new z(t[o])).squareEuclideanDistance(i);var s=[];for(e.forEach((function(){s.push([])})),o=0;o<n;o++){var l=new z(t[o]);e[o].clusterInertial=0;for(var c=0;c<n;c++)if(o!==c){var u=new z(t[c]);s[o][c]=l.squareEuclideanDistance(u),e[o].clusterInertial+=s[o][c]}else s[o][c]=0}var d=0,h=2*n*a;for(o=0;o<n;o++){var f=e[o].clusterId;for(c=0;c<n;c++){var p=e[c].clusterId;o!==c&&f===p&&(d+=e[o].clusterInertial*e[c].clusterInertial/Math.pow(h,2)-s[o][c]/h)}}return Number(d.toFixed(4))};const $=function(e,n,r,o,i,a,s,l,c){void 0===n&&(n=!1),void 0===r&&(r="weight"),void 0===o&&(o=1e-4),void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===s&&(s=[]),void 0===l&&(l=["id"]),void 0===c&&(c=1);var u=e.nodes,d=void 0===u?[]:u,h=e.edges,f=void 0===h?[]:h,p=[];if(i){d.forEach((function(e,t){e.properties=e.properties||{},e.originIndex=t}));var g=[];d.every((function(e){return e.hasOwnProperty("nodeType")}))&&(g=Array.from(new Set(d.map((function(e){return e.nodeType})))),d.forEach((function(e){e.properties.nodeType=g.findIndex((function(t){return t===e.nodeType}))})));var v=W(d,a);p=G(v,s,l)}var m=1,y={},C={};d.forEach((function(e,t){var n=String(m++);e.clusterId=n,y[n]={id:n,nodes:[e]},C[e.id]={node:e,idx:t}}));var b=t(e,n),w=[],x={},E=0;b.forEach((function(e,t){var n=0,r=d[t].id;x[r]={},e.forEach((function(e,t){if(e){n+=e;var o=d[t].id;x[r][o]=e,E+=e}})),w.push(n)})),E/=2;for(var S=1/0,I=1/0,T=0,L=[],M={};;){S=i&&d.every((function(e){return e.hasOwnProperty("properties")}))?V(d,b,w,E)+Y(d,p)*c:V(d,b,w,E),0===T&&(I=S,L=d,M=y);var O=S>0&&S>I&&S-I<o;if(S>I&&(L=d.map((function(e){return{node:e,clusterId:e.clusterId}})),M=N(y),I=S),O||T>100)break;T++,Object.keys(y).forEach((function(e){var t=0;f.forEach((function(n){var o=n.source,i=n.target,a=C[o].node.clusterId,s=C[i].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=n[r]||1)})),y[e].sumTot=t})),d.forEach((function(e,t){var n,o=y[e.clusterId],a=0,s=w[t]/(2*E),l=0,u=o.nodes;u.forEach((function(e){var n=C[e.id].idx;l+=b[t][n]||0}));var d=l-o.sumTot*s,h=u.filter((function(t){return t.id!==e.id})),g=[];h.forEach((function(e,t){g[t]=p[e.originIndex]}));var v=Y(h,p)*c,m=x[e.id];if(Object.keys(m).forEach((function(r){var o=C[r].node.clusterId;if(o!==e.clusterId){var l=y[o],u=l.nodes;if(u&&u.length){var h=0;u.forEach((function(e){var n=C[e.id].idx;h+=b[t][n]||0}));var f=h-l.sumTot*s,g=u.concat([e]),m=[];g.forEach((function(e,t){m[t]=p[e.originIndex]}));var w=Y(g,p)*c,x=f-d;i&&(x=f+w-(d+v)),x>a&&(a=x,n=l)}}})),a>0){n.nodes.push(e);var S=e.clusterId;e.clusterId=n.id;var I=o.nodes.indexOf(e);o.nodes.splice(I,1);var T=0,L=0;f.forEach((function(e){var t=e.source,o=e.target,i=C[t].node.clusterId,a=C[o].node.clusterId;(i===n.id&&a!==n.id||a===n.id&&i!==n.id)&&(T+=e[r]||1),(i===S&&a!==S||a===S&&i!==S)&&(L+=e[r]||1)})),n.sumTot=T,o.sumTot=L}}))}var _={},A=0;Object.keys(M).forEach((function(e){var t=M[e];if(t.nodes&&t.nodes.length){var n=String(A+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),M[n]=t,_[e]=n,delete M[e],A++)}else delete M[e]})),L.forEach((function(e){var t=e.node,n=e.clusterId;t&&(t.clusterId=n,t.clusterId&&_[t.clusterId]&&(t.clusterId=_[t.clusterId]))}));var R=[],D={};f.forEach((function(e){var t=e.source,n=e.target,o=e[r]||1,i=C[t].node.clusterId,a=C[n].node.clusterId;if(i&&a){var s="".concat(i,"---").concat(a);if(D[s])D[s].weight+=o,D[s].count++;else{var l={source:i,target:a,weight:o,count:1};D[s]=l,R.push(l)}}}));var P=[];return Object.keys(M).forEach((function(e){P.push(M[e])})),{clusters:P,clusterEdges:R}},X=function(e,t,n,r,o,i,a,s){return void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===o&&(o=void 0),void 0===i&&(i=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),$(e,t,n,r,!0,o,i,a,s)},q=function(e,t){var n;void 0===t&&(t=1);for(var r=N(e),o=r.nodes,i=void 0===o?[]:o,a=r.edges,s=void 0===a?[]:a,l=function(){var e=p({nodes:i,edges:s}),r=Object.keys(e);r.sort((function(t,n){var r,o;return(null===(r=e[t])||void 0===r?void 0:r.degree)-(null===(o=e[n])||void 0===o?void 0:o.degree)}));var o=r[0];if(!i.length||(null===(n=e[o])||void 0===n?void 0:n.degree)>=t)return"break";var a=i.findIndex((function(e){return e.id===o}));i.splice(a,1),s=s.filter((function(e){return!(e.source===o||e.target===o)}))};"break"!==l(););return{nodes:i,edges:s}};var K=function(e,t,n){return e===H.EuclideanDistance?t[n]:[]};const Z=function(e,t,n,r,o,i){void 0===t&&(t=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=["id"]),void 0===i&&(i=H.EuclideanDistance);var a=e.nodes,s=void 0===a?[]:a,l=e.edges,c=void 0===l?[]:l,u={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(i===H.EuclideanDistance&&!s.every((function(e){return e.hasOwnProperty(n)})))return u;var d=[],h=[];if(i===H.EuclideanDistance&&(d=W(s,n),h=G(d,r,o)),!h.length)return u;for(var f=M(h.map((function(e){return e.join("")}))),p=Math.min(t,s.length,f.length),g=0;g<s.length;g++)s[g].originIndex=g;var v=[],m=[],y=[];for(g=0;g<p;g++)if(0===g){var C=Math.floor(Math.random()*s.length);i===H.EuclideanDistance?v[g]=h[C]:v[g]=[],m.push(C),y[g]=[s[C]],s[C].clusterId=String(g)}else{for(var b=-1/0,w=0,x=function(e){if(!m.includes(e)){for(var t=0,n=0;n<v.length;n++){var r=0;i===H.EuclideanDistance&&(r=U(h[s[e].originIndex],v[n],i)),t+=r}var o=t/v.length;o>b&&!v.find((function(t){return P(t,K(i,h,s[e].originIndex))}))&&(b=o,w=e)}},E=0;E<s.length;E++)x(E);v[g]=K(i,h,w),m.push(w),y[g]=[s[w]],s[w].clusterId=String(g)}for(var S=0;;){for(g=0;g<s.length;g++){var I=0,T=1/0;if(0!==S||!m.includes(g)){for(var L=0;L<v.length;L++){var O=0;i===H.EuclideanDistance&&(O=U(h[g],v[L],i)),O<T&&(T=O,I=L)}if(void 0!==s[g].clusterId)for(var _=y[Number(s[g].clusterId)].length-1;_>=0;_--)y[Number(s[g].clusterId)][_].id===s[g].id&&y[Number(s[g].clusterId)].splice(_,1);s[g].clusterId=String(I),y[I].push(s[g])}}var N=!1;for(g=0;g<y.length;g++){var A=y[g],R=new z([]);for(L=0;L<A.length;L++)R=R.add(new z(h[A[L].originIndex]));var D=R.avg(A.length);D.equal(new z(v[g]))||(N=!0,v[g]=D.getArr())}if(S++,s.every((function(e){return void 0!==e.clusterId}))&&N||S>=1e3)break}var k=[],B={};return c.forEach((function(e){var t,n,r=e.source,o=e.target,i=null===(t=s.find((function(e){return e.id===r})))||void 0===t?void 0:t.clusterId,a=null===(n=s.find((function(e){return e.id===o})))||void 0===n?void 0:n.clusterId,l="".concat(i,"---").concat(a);if(B[l])B[l].count++;else{var c={source:i,target:a,count:1};B[l]=c,k.push(c)}})),{clusters:y,clusterEdges:k}},Q=function(e,t){var n=new z(t),r=n.norm2(),o=new z(e),i=o.norm2(),a=n.dot(o),s=r*i;return s?a/s:0},J=function(e,t,n,r,o){void 0===e&&(e=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=[]);var i=N(e.filter((function(e){return e.id!==t.id}))),a=e.findIndex((function(e){return e.id===t.id})),s=W(e,n),l=G(s,r,o),c=l[a],u=[];return i.forEach((function(e,n){if(e.id!==t.id){var r=l[n],o=Q(r,c);u.push(o),e.cosineSimilarity=o}})),i.sort((function(e,t){return t.cosineSimilarity-e.cosineSimilarity})),{allCosineSimilarity:u,similarNodes:i}},ee=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();var te=function(e,t){return e-t};const ne=function(){function e(e){void 0===e&&(e=te),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),o=this.getRight(e),i=this.list.length;null!==r&&r<i&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==o&&o<i&&this.compareFn(this.list[n],this.list[o])>0&&(n=o),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}();var re=function(e,t){var n=[],r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return n;var l=o[0],c=new Set;c.add(l);var u=new ne((function(e,n){return t?e.weight-n.weight:0}));for(s(l.id,a).forEach((function(e){u.insert(e)}));!u.isEmpty();){var d=u.delMin(),h=d.source,f=d.target;c.has(h)&&c.has(f)||(n.push(d),c.has(h)||(c.add(h),s(h,a).forEach((function(e){u.insert(e)}))),c.has(f)||(c.add(f),s(f,a).forEach((function(e){u.insert(e)}))))}return n},oe=function(e,t){var n=[],r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i;if(0===o.length)return n;var s=a.map((function(e){return e}));t&&s.sort((function(e,t){return e.weight-t.weight}));for(var l=new ee(o.map((function(e){return e.id})));s.length>0;){var c=s.shift(),u=c.source,d=c.target;l.connected(u,d)||(n.push(c),l.union(u,d))}return n};var ie="-1",ae=function(e,t,n,r){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e,this.from=t,this.to=n,this.label=r},se=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=ie),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),le=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new se(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var o=new ae(e,t,n,r);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),!this.directed){var i=new ae(e,n,t,r);this.nodeMap[n].addEdge(i),this.edgeLabelMap[r].push(i)}}},e}(),ce=function(){function e(e,t,n,r,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||ie,edgeLabel:r||"-1",nodeLabel2:o||ie}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),ue=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,o){return this.dfsEdgeList.push(new ce(e,t,n,r,o)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var n=new le(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,o=e.nodeEdgeNodeLabel,i=o.nodeLabel1,a=o.edgeLabel,s=o.nodeLabel2;i!==ie&&n.addNode(t,i),s!==ie&&n.addNode(r,s),i!==ie&&s!==i&&n.addEdge(void 0,t,r,a)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,o=n.toNode;r<o&&(void 0===e||o===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),de=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),he=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,o=e.minNodeNum,i=void 0===o?1:o,a=e.maxNodeNum,s=void 0===a?4:a,l=e.top,c=void 0===l?10:l,u=e.directed,d=void 0!==u&&u,h=e.verbose,f=void 0!==h&&h;this.graphs=t,this.dfsCode=new ue,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=s,this.minNodeNum=i,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],o=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=o[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var o=e.nodeMap,i=o[n.to].edges,a=i.length,s=0;s<a;s++){var l=i[s];if(!r.hasEdge(l)&&l.to===t.from)if(this.directed){if(o[t.from].label<o[n.to].label||o[t.from].label===o[n.to].label&&t.label<=l.label)return l}else if(t.label<l.label||t.label===l.label&&o[t.to].label<=o[n.to].label)return l}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var o=[],i=t.to,a=e.nodeMap[i].edges,s=a.length,l=0;l<s;l++){var c=a[l],u=e.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&o.push(c)}return o},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var o=[],i=e.nodeMap,a=i[t.to].label,s=i[t.from].edges,l=s.length,c=0;c<l;c++){var u=s[c],d=i[u.to].label;t.to===u.to||n>d||r.hasNode(i[u.to])||(t.label<u.label||t.label===u.label&&a<=d)&&o.push(u)}return o},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],o=r.nodeLabel1,i=r.edgeLabel,a=r.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&i<t.edgeLabel||o===t.nodeLabel1&&i===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(-1,n),o=r.nodeMap,i=new ue,a={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=o[e.to],i="".concat(t.label,"-").concat(e.label,"-").concat(n.label);a[i]||(a[i]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};a[i].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){i.dfsEdgeList.push(new ce(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var l=i.buildRmpath(),c=i.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=i.dfsEdgeList[l[0]].toNode,d={},h=!1,f=0,p=n?-1:0,g=function(t){if(h)return"break";s.forEach((function(n){var o=new de(n),a=e.findBackwardEdge(r,o.edges[l[t]],o.edges[l[0]],o);a&&(d[a.label]||(d[a.label]={projected:[],edgeLabel:a.label}),d[a.label].projected.push({graphId:r.id,edge:d,preNode:n}),f=i.dfsEdgeList[l[t]].fromNode,h=!0)}))},v=l.length-1;v>p&&"break"!==g(v);v--);if(h){var m=e.findMinLabel(d);i.dfsEdgeList.push(new ce(u,f,ie,m.edgeLabel,ie));var y=i.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===i.dfsEdgeList[y]&&a(d[m.edgeLabel].projected)}var C={};h=!1;var b=0;s.forEach((function(t){var n=new de(t),i=e.findForwardPureEdges(r,n.edges[l[0]],c,n);i.length>0&&(h=!0,b=u,i.forEach((function(e){var n="".concat(e.label,"-").concat(o[e.to].label);C[n]||(C[n]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),C[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var w=l.length,x=function(t){if(h)return"break";var n=l[t];s.forEach((function(t){var a=new de(t),s=e.findForwardRmpathEdges(r,a.edges[n],c,a);s.length>0&&(h=!0,b=i.dfsEdgeList[n].fromNode,s.forEach((function(e){var n="".concat(e.label,"-").concat(o[e.to].label);C[n]||(C[n]={projected:[],edgeLabel:e.label,nodeLabel2:o[e.to].label}),C[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(v=0;v<w&&"break"!==x(v);v++);if(!h)return!0;var E=e.findMinLabel(C);i.dfsEdgeList.push(new ce(b,u+1,ie,E.edgeLabel,E.nodeLabel2));var S=i.dfsEdgeList.length-1;return t.dfsEdgeList[S]===i.dfsEdgeList[S]&&a(C["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(a[l].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(N(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[r[0]].toNode,i=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};e.forEach((function(e){for(var l=t.graphs[e.graphId],c=l.nodeMap,u=new de(e),d=r.length-1;d>=0;d--){var h=t.findBackwardEdge(l,u.edges[r[d]],u.edges[r[0]],u);if(h){var f="".concat(t.dfsCode.dfsEdgeList[r[d]].fromNode,"-").concat(h.label);s[f]||(s[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:h.label}),s[f].projected.push({graphId:e.graphId,edge:h,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(l,u.edges[r[0]],i,u).forEach((function(t){var n="".concat(o,"-").concat(t.label,"-").concat(c[t.to].label);a[n]||(a[n]={projected:[],fromNodeId:o,edgeLabel:t.label,nodeLabel2:c[t.to].label}),a[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(l,u.edges[r[n]],i,u).forEach((function(o){var i="".concat(t.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(o.label,"-").concat(c[o.to].label);a[i]||(a[i]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:o.label,nodeLabel2:c[o.to].label}),a[i].projected.push({graphId:e.graphId,edge:o,preNode:e})}))};for(d=0;d<r.length;d++)p(d)}})),Object.keys(s).forEach((function(e){var n=s[e],r=n.toNodeId,i=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new ce(o,r,"-1",i,"-1")),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var n=a[e],r=n.fromNodeId,i=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ce(r,o+1,ie,i,s)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,o={},i={},a={},s={};return Object.keys(e).forEach((function(n){var r=e[n],l=r.nodeMap;r.nodes.forEach((function(e,r){var c=e.label,u="".concat(n,"-").concat(c);if(!a[u]){var d=o[c]||0;d++,o[c]=d}a[u]={graphKey:n,label:c},e.edges.forEach((function(e){var r=c,o=l[e.to].label;if(!t&&r>o){var a=o;o=r,r=a}var u=e.label,d="".concat(n,"-").concat(r,"-").concat(u,"-").concat(o),h="".concat(r,"-").concat(u,"-").concat(o);if(!i[h]){var f=i[h]||0;f++,i[h]=f}s[d]={graphId:n,nodeLabel1:r,edgeLabel:u,nodeLabel2:o}}))}))})),Object.keys(o).forEach((function(e){if(!(o[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,n=(this.directed,{});Object.keys(t).forEach((function(r){var o=t[r],i=o.nodeMap;o.nodes.forEach((function(t){e.findForwardRootEdges(o,t).forEach((function(e){var o=i[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(o.label);n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:o.label});var s={graphId:r,edge:e,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],o=r.projected,i=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ce(0,1,i,a,s)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()}))}},e}(),fe="cluster";var pe=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var o=[],i=e.nodes;return t.forEach((function(e,t){o.push(ge(i,e,t,n,r))})),o},ge=function(e,t,n,r,o){var i=[n],a=[],s={};return t.forEach((function(t,l){if(t<=o&&n!==l){i.push(l),a.push(e[l]);var c=e[l][r];s[c]?(s[c].count++,s[c].dists.push(t)):s[c]={count:1,dists:[t]}}})),Object.keys(s).forEach((function(e){s[e].dists=s[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:s}},ve=function(e,t,n,r){var o=n.nodes;return r||(r={}),Object.keys(e).forEach((function(i){var a,s;if(!r||!r[i]){r[i]={nodes:[],edges:[]};var l=e[i],c=null===(a=t[l.start])||void 0===a?void 0:a.nodeIdxs,u=null===(s=t[l.end])||void 0===s?void 0:s.nodeIdxs;if(c&&u){var d=new Set(u),h=c.filter((function(e){return d.has(e)}));if(h&&h.length){for(var f={},p=h.length,g=0;g<p;g++){var v=o[h[g]];r[i].nodes.push(v),f[v.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[i].edges.push(e)}))}}}})),r},me=function(e,t,n,r){var o,i,a={};e.nodes.forEach((function(e){a[e.id]=e}));var s=0;return!(null===(o=null==t?void 0:t.edges)||void 0===o?void 0:o.length)||(null===(i=null==t?void 0:t.nodes)||void 0===i?void 0:i.length)<2?0:(e.edges.forEach((function(e){var o=a[e.source][n],i=a[e.target][n],l=null==t?void 0:t.nodes[0][n],c=null==t?void 0:t.nodes[1][n],u=null==t?void 0:t.edges[0][r];e[r]===u&&(o===l&&i===c||o===c&&i===l)&&s++})),s)},ye=function(e,t){var n={},r={};return e.forEach((function(e,o){n[e.id]={idx:o,node:e,degree:0,inDegree:0,outDegree:0};var i=e[t];r[i]||(r[i]=[]),r[i].push(e)})),{nodeMap:n,nodeLabelMap:r}},Ce=function(e,t,n){var r={},o={};return e.forEach((function(e,i){r["".concat(l)]={idx:i,edge:e};var a=e[t];o[a]||(o[a]=[]),o[a].push(e);var s=n[e.source];s&&(s.degree++,s.outDegree++);var c=n[e.target];c&&(c.degree++,c.inDegree++)})),{edgeMap:r,edgeLabelMap:o}},be=function(e,t,n){var r=t.length,o={};return t.forEach((function(t,i){for(var a=n?0:i+1,s=e[i].id,l=a;l<r;l++)if(i!==l){var c=e[l].id,u=t[l];o["".concat(s,"-").concat(c)]=u,n||(o["".concat(c,"-").concat(s)]=u)}})),o},we=function(e,t,n,r,o,i,a,s,l,c,u){var d,h="".concat(t.id,"-").concat(n.id);if(c&&c[h])return c[h];var f=u?u[h]:void 0;if(!f){var p=((d={})[h]={start:r[t.id].idx,end:r[n.id].idx,distance:o},d);f=(u=ve(p,i,e,u))[h]}return me(f,a,s,l)},xe=function(e,t,n,r){var o,i,a,s=null===(o=e[t])||void 0===o?void 0:o.degree,l=null===(i=e[t])||void 0===i?void 0:i.inDegree,c=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,l=1/0,c=1/0,r[t].forEach((function(e){var t=n[e.id].degree;s>t&&(s=t);var r=n[e.id].inDegree;l>r&&(l=r);var o=n[e.id].outDegree;c>o&&(c=o)})),e[t]={degree:s,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}};var Ee=function(){function e(e){void 0===e&&(e=10),this.linkedList=new o,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();const Se={getAdjMatrix:t,breadthFirstSearch:function(e,t,n,r){void 0===r&&(r=!0);var o=function(e){void 0===e&&(e={});var t,n=e,r=function(){},o=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||o,n.enter=e.enter||r,n.leave=e.leave||r,n}(n),s=new i,l=e.edges,c=void 0===l?[]:l;s.enqueue(t);for(var u="",d=function(){var e=s.dequeue();o.enter({current:e,previous:u}),a(e,c,r?"target":void 0).forEach((function(t){o.allowTraversal({previous:u,current:e,next:t})&&s.enqueue(t)})),o.leave({current:e,previous:u}),u=e};!s.isEmpty();)d()},connectedComponent:h,getDegree:p,getInDegree:function(e,t){return f(e)[t]?f(e)[t].inDegree:0},getOutDegree:function(e,t){return f(e)[t]?f(e)[t].outDegree:0},detectCycle:b,detectDirectedCycle:b,detectAllCycles:C,detectAllDirectedCycle:y,detectAllUndirectedCycle:m,depthFirstSearch:v,dijkstra:B,findAllPath:function(e,t,n,r){var o;if(t===n)return[[t]];var i=e.edges,s=void 0===i?[]:i,l=[t],c=((o={})[t]=!0,o),u=[],d=[],h=r?a(t,s,"target"):a(t,s);for(u.push(h);l.length>0&&u.length>0;){var f=u[u.length-1];if(f.length){var p=f.shift();if(p&&(l.push(p),c[p]=!0,h=r?a(p,s,"target"):a(p,s),u.push(h.filter((function(e){return!c[e]})))),l[l.length-1]===n){var g=l.map((function(e){return e}));d.push(g),v=l.pop(),c[v]=!1,u.pop()}}else{var v=l.pop();c[v]=!1,u.pop()}}return d},findShortestPath:function(e,t,n,r,o){var i=B(e,t,r,o),a=i.length,s=i.path,l=i.allPath,c=i.edgePath,u=i.allEdgePath;return{length:a[n],path:s[n],allPath:l[n],edgePath:c[n],allEdgePath:u[n]}},floydWarshall:j,labelPropagation:function(e,n,r,o){void 0===n&&(n=!1),void 0===r&&(r="weight"),void 0===o&&(o=1e3);var i=e.nodes,a=void 0===i?[]:i,s=e.edges,c=void 0===s?[]:s,u={},d={};a.forEach((function(e,t){var n=l();e.clusterId=n,u[n]={id:n,nodes:[e]},d[e.id]={node:e,idx:t}}));var h=t(e,n),f=[],p={};h.forEach((function(e,t){var n=0,r=a[t].id;p[r]={},e.forEach((function(e,t){if(e){n+=e;var o=a[t].id;p[r][o]=e}})),f.push(n)}));for(var g=0,v=function(){var e=!1;if(a.forEach((function(t){var n={};Object.keys(p[t.id]).forEach((function(e){var r=p[t.id][e],o=d[e].node.clusterId;n[o]||(n[o]=0),n[o]+=r}));var r=-1/0,o=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],o=[e]):r===n[e]&&o.push(e)})),1!==o.length||o[0]!==t.clusterId){var i=o.indexOf(t.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){e=!0;var a=u[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var l=Math.floor(Math.random()*o.length),c=u[o[l]];c.nodes.push(t),t.clusterId=c.id}}})),!e)return"break";g++};g<o&&"break"!==v(););Object.keys(u).forEach((function(e){var t=u[e];t.nodes&&t.nodes.length||delete u[e]}));var m=[],y={};c.forEach((function(e){var t=e.source,n=e.target,o=e[r]||1,i=d[t].node.clusterId,a=d[n].node.clusterId,s="".concat(i,"---").concat(a);if(y[s])y[s].weight+=o,y[s].count++;else{var l={source:i,target:a,weight:o,count:1};y[s]=l,m.push(l)}}));var C=[];return Object.keys(u).forEach((function(e){C.push(u[e])})),{clusters:C,clusterEdges:m}},louvain:$,iLouvain:X,kCore:q,kMeans:Z,cosineSimilarity:Q,nodesCosineSimilarity:J,minimumSpanningTree:function(e,t,n){return n?{prim:re,kruskal:oe}[n](e,t):oe(e,t)},pageRank:function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,o=1,i=0,s=1e3,l=e.nodes,c=void 0===l?[]:l,u=e.edges,d=void 0===u?[]:u,h=c.length,f={},g={},v=0;v<h;++v)f[y=(E=c[v]).id]=1/h,g[y]=1/h;for(var m=p(e);s>0&&o>t;){for(i=0,v=0;v<h;++v){var y=(E=c[v]).id;if(r=0,0===m[E.id].inDegree)f[y]=0;else{for(var C=a(y,d,"source"),b=0;b<C.length;++b){var w=C[b],x=m[w].outDegree;x>0&&(r+=g[w]/x)}f[y]=n*r,i+=f[y]}}for(i=(1-i)/h,o=0,v=0;v<h;++v){var E;r=f[y=(E=c[v]).id]+i,o+=Math.abs(r-g[y]),g[y]=r}s-=1}return g},getNeighbors:a,Stack:Ee,GADDI:function(e,t,n,r,o,i,a){var s;if(void 0===n&&(n=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var l=e.nodes.length;if(l){var c=j(e,n),u=j(t,n),d=be(e.nodes,c,n),h=be(t.nodes,u,n),f=ye(e.nodes,i),p=f.nodeMap,g=f.nodeLabelMap,v=ye(t.nodes,i),m=v.nodeMap,y=v.nodeLabelMap;Ce(e.edges,a,p);var C=Ce(t.edges,a,m).edgeLabelMap,b=[];null==u||u.forEach((function(e){b=b.concat(e)})),o||(o=Math.max.apply(Math,w(w([],b,!1),[2],!1))),r||(r=o);var x=pe(e,c,i,r),E=pe(t,u,i,r),S=function(e,t,n,r,o){var i=Math.ceil(n/t),a={},s=0;return r.forEach((function(e,r){for(var l=0,c=0,u=e.nodeIdxs,d=e.neighborNum-1;l<i;){for(var h=u[1+Math.floor(Math.random()*d)],f=0;(a["".concat(r,"-").concat(h)]||a["".concat(h,"-").concat(r)])&&(h=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a["".concat(r,"-").concat(h)]={start:r,end:h,distance:o[r][h]},l++,++s>=n))return a;if(++c>2*t)break}l<i&&(i=(i+(i-l))/(t-r-1))})),a}(0,l,Math.min(100,l*(l-1)/2),x,c),I=ve(S,x,e),T=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,o=e.nodeLabelProp,i=void 0===o?fe:o,a=e.edgeLabelProp,s=void 0===a?fe:a,l=function(e,t,n,r){var o={};return Object.keys(e).forEach((function(i,a){var s=e[i],l=new le(a,!0,t),c={};s.nodes.forEach((function(e,t){l.addNode(t,e[n]),c[e.id]=t})),s.edges.forEach((function(e,t){var n=c[e.source],o=c[e.target];l.addEdge(-1,n,o,e[r])})),l&&l.getNodeNum()&&(o[l.id]=l)})),o}(t,r,i,s),c=e.minSupport,u=e.maxNodeNum,d=e.minNodeNum,h=e.verbose,f=e.top,p=new he({graphs:l,minSupport:c,maxNodeNum:u,minNodeNum:d,top:f,verbose:h,directed:r});p.run();var g=function(e,t,n){var r=[];return e.forEach((function(e){var o={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;o.nodes.push(((n={id:"".concat(e.id)})[t]=e.label,n))})),e.edges.forEach((function(e){var t;o.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[n]=e.label,t))})),r.push(o)})),r}(p.frequentSubgraphs,i,s);return g}({graphs:I,nodeLabelProp:i,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),L=T.length,M=[];T.forEach((function(e,t){M[t]={},Object.keys(I).forEach((function(n){var r=I[n],o=me(r,e,i,a);M[t][n]=o}))}));var O=function(e,t,n){for(var r=1/0,o=0,i=function(t){var n=e[t],i=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];i.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var s=0,l=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,l.push(t);var r=0,o=e.length;e.graphs.forEach((function(t,o){var i=n[t];e.graphs.forEach((function(e,t){o!==t&&(r+=Math.abs(i-n[e]))}))})),s+=r/=o*(o-1)/2})),s/=a.length;var c=0;l.forEach((function(e,t){l.forEach((function(n,r){t!==r&&(c+=Math.abs(e-n))})),c/=l.length*(l.length-1)/2}));var u=c-s;r<u&&(r=u,o=t)},a=0;a<t;a++)i(a);return{structure:n[o],structureCountMap:e[o]}}(M,L,T),_=O.structure,N=O.structureCountMap,A=t.nodes[0],R=[],D=null===(s=t.nodes[0])||void 0===s?void 0:s[i],P=-1/0;t.nodes.forEach((function(e){var t=e[i],n=g[t];(null==n?void 0:n.length)>P&&(P=n.length,R=n,D=t,A=e)}));var k={},F={},z={},H={},W={},G={};Object.keys(y).forEach((function(r,o){W[r]=[],n&&(G[r]=[]);var s=-1/0,l=y[r],c={};l.forEach((function(e){var t=h["".concat(A.id,"-").concat(e.id)];if(t&&W[r].push(t),s<t&&(s=t),c["".concat(A.id,"-").concat(e.id)]={start:0,end:m[e.id].idx,distance:t},n){var o=h["".concat(e.id,"-").concat(A.id)];o&&G[r].push(o)}})),W[r]=W[r].sort((function(e,t){return e-t})),n&&(G[r]=G[r].sort((function(e,t){return e-t}))),F=ve(c,E,t,F);var u=[];if(Object.keys(c).forEach((function(e){if(z[e])u.push(z[e]);else{var t=F[e];z[e]=me(t,_,i,a),u.push(z[e])}})),u=u.sort((function(e,t){return t-e})),H["".concat(A.id,"-").concat(r)]=u,r!==D)for(var f=function(t){var n=R[t],o=x[p[n.id].idx],s=o.nodeLabelCountMap[r],l=y[r].length;if(!s||s.count<l)return R.splice(t,1),"continue";for(var c=!1,h=0;h<l;h++)if(s.dists[h]>W[r][h]){c=!0;break}if(c)return R.splice(t,1),"continue";var f={};o.neighbors.forEach((function(e){var t=d["".concat(n.id,"-").concat(e.id)];f["".concat(n.id,"-").concat(e.id)]={start:p[n.id].idx,end:p[e.id].idx,distance:t}})),I=ve(f,x,e,I);var g=[];Object.keys(f).forEach((function(e){if(N[e])g.push(N[e]);else{var t=I[e];N[e]=me(t,_,i,a),g.push(N[e])}})),g=g.sort((function(e,t){return t-e}));var v=!1;for(h=0;h<l;h++)if(g[h]<u[h]){v=!0;break}return v?(R.splice(t,1),"continue"):void 0},g=((null==R?void 0:R.length)||0)-1;g>=0;g--)f(g)}));var U=[];null==R||R.forEach((function(r){for(var s=p[r.id].idx,l=ge(e.nodes,c[s],s,i,o).neighbors,u=!1,h=l.length-1;h>=0;h--){if(l.length+1<t.nodes.length)return void(u=!0);var f=l[h],g=f[i];if(y[g]&&y[g].length)if(W[g]&&W[g].length){var v="".concat(r.id,"-").concat(f.id),C=d[v],b=W[g].length-1;if(C>W[g][b])l.splice(h,1);else{if(n){var w="".concat(f.id,"-").concat(r.id),E=d[w];if(b=G[g].length-1,E>G[g][b]){l.splice(h,1);continue}}var S=N[v]?N[v]:we(e,r,f,p,C,x,_,i,a,N,I),T="".concat(A.id,"-").concat(g);if(S<H[T][H[T].length-1])l.splice(h,1);else{var L=xe(k,g,m,y),M=L.minPatternNodeLabelDegree;L.minPatternNodeLabelInDegree,L.minPatternNodeLabelOutDegree,p[f.id].degree<M&&l.splice(h,1)}}}else l.splice(h,1);else l.splice(h,1)}u||U.push({nodes:[r].concat(l)})}));var V=B(t,A.id,!1).length,Y={};n?(Object.keys(V).forEach((function(e){var t=m[e].node[i];Y[t]?Y[t].push(V[e]):Y[t]=[V[e]]})),Object.keys(Y).forEach((function(e){Y[e].sort((function(e,t){return e-t}))}))):Y=W;for(var $=function(r){var o=U[r],s=o.nodes[0],l={},c={};o.nodes.forEach((function(e,t){c[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[i];l[n]?l[n]++:l[n]=1}));var u=[],d={};e.edges.forEach((function(e){c[e.source]&&c[e.target]&&(u.push(e),d[e[a]]?d[e[a]]++:d[e[a]]=1,c[e.source].degree++,c[e.target].degree++,c[e.source].outDegree++,c[e.target].inDegree++)}));for(var h=Object.keys(C).length,f=!1,g=0;g<h;g++){var v=Object.keys(C)[g];if(!d[v]||d[v]<C[v].length){f=!0;break}}if(f)return U.splice(r,1),"continue";var b=u.length;if(b<t.edges.length)return U.splice(r,1),"break";var w=!1,x=function(e){var t=u[e],r=t[a],o=C[r];if(!o||!o.length)return d[r]--,o&&d[r]<o.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue");var s=c[t.source].node[i],l=c[t.target].node[i],h=!1;return o.forEach((function(e){var t=m[e.source].node,r=m[e.target].node;t[i]===s&&r[i]===l&&(h=!0),n||t[i]!==l||r[i]!==s||(h=!0)})),h?void 0:(d[r]--,o&&d[r]<o.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue"))};for(g=b-1;g>=0&&"break"!==x(g);g--);if(w)return U.splice(r,1),"continue";o.edges=u;var E=B(o,o.nodes[0].id,!1).length;if(Object.keys(E).reverse().forEach((function(e){if(e!==o.nodes[0].id&&!w){if(E[e]===1/0){var t=c[e].node[i];if(l[t]--,l[t]<y[t].length)return void(w=!0);var n=o.nodes.indexOf(c[e].node);return o.nodes.splice(n,1),void(c[e]=void 0)}var r=p[e].node[i];if(!Y[r]||!Y[r].length||E[e]>Y[r][Y[r].length-1]){if(t=c[e].node[i],l[t]--,l[t]<y[t].length)return void(w=!0);n=o.nodes.indexOf(c[e].node),o.nodes.splice(n,1),c[e]=void 0}}})),w)return U.splice(r,1),"continue";for(var S=!0,I=0;S&&!w;){if(S=!1,n?c[s.id].degree<m[A.id].degree||c[s.id].inDegree<m[A.id].inDegree||c[s.id].outDegree<m[A.id].outDegree:c[s.id].degree<m[A.id].degree){w=!0;break}if(l[s[i]]<y[s[i]].length){w=!0;break}for(var T=o.nodes.length-1;T>=0;T--){var L=o.nodes[T],M=c[L.id].degree,O=c[L.id].inDegree,_=c[L.id].outDegree,N=L[i],R=xe(k,N,m,y),D=R.minPatternNodeLabelDegree,P=R.minPatternNodeLabelInDegree,F=R.minPatternNodeLabelOutDegree;if(n?M<D||O<P||_<F:M<D){if(l[L[i]]--,l[L[i]]<y[L[i]].length){w=!0;break}o.nodes.splice(T,1),c[L.id]=void 0,S=!0}}if(w||!S&&0!==I)break;for(var j=(b=u.length)-1;j>=0;j--){var z=u[j];if(!c[z.source]||!c[z.target]){u.splice(j,1);var H=z[a];if(d[H]--,c[z.source]&&(c[z.source].degree--,c[z.source].outDegree--),c[z.target]&&(c[z.target].degree--,c[z.target].inDegree--),C[H]&&d[H]<C[H].length){w=!0;break}S=!0}}I++}return w||w||o.nodes.length<t.nodes.length||u.length<t.edges.length?(U.splice(r,1),"continue"):void 0},X=U.length-1;X>=0&&"break"!==$(X);X--);var q=U.length,K=function(e){var t=U[e],n={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=U[e],r={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1}));var o=!0;Object.keys(r).length!==Object.keys(n).length?o=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(o=!1)})),o&&U.splice(e,1)},o=q-1;o>e;o--)r(o);q=U.length};for(X=0;X<=q-1;X++)K(X);return U}}}};var Ie=c(618),Te=c(725),Le=c.n(Te),Me=c(721),Oe=c(479),_e=c(24),Ne=c.n(_e),Ae=c(659);const Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var De=c(787),Pe=function(e,t){return _e.createElement(De.Z,(0,Ae.Z)((0,Ae.Z)({},e),{},{ref:t,icon:Re}))};Pe.displayName="DownloadOutlined";const ke=_e.forwardRef(Pe);var Be=c(947),Fe=c(558),je=c.n(Fe),ze=c(959),He=c(802),We=c.n(He);let Ge,Ue;function Ve(){const{lang:e}=je().getLocale();Ge=e,Ue=ze.ZP.init(e,We())}const Ye=function(e,t={}){return Ue||Ve(),"string"==typeof e?ze.ZP.format({id:e},t):("object"==typeof e&&e.dm&&(e.defaultMessage=e.dm),ze.ZP.format({id:e.id,defaultString:e.dm},t))},$e=e=>{let t=Ye({id:"gi-assets-algorithm.src.utils.csv.ExportDataCsv",dm:"导出数据.csv"});return e&&(t=e.indexOf(".csv")>0?e:e+".csv"),t},Xe=(e,t)=>{const{data:n,titleForKey:r,title:o,showPureNumber:i=!1}=e,a=[];o&&o.length>0&&a.push(o.join(",")+"\n");for(let e=0;e<n.length;e++){const t=[];for(let o=0;o<r.length;o++){const a=n[e][r[o]]||"",s=isNaN(+a)||i?"":"\t";t.push(`"${s}${a}"`)}a.push(t.join(",")+"\n")}const s=document.createElement("a");s.download=t;const l=new Blob(["\ufeff"+a.join("")],{type:"text/csv"});return s.href=URL.createObjectURL(l),s.click(),a},qe={formatFileName:$e,transformCSVData:(e,t)=>{const n=[],r=[];let o={};return t&&t.length>0&&t.forEach((e=>{r.push(e.dataIndex),n.push(e.title)})),e&&e.length>0&&(o={data:e,title:n,titleForKey:r}),o},exportCSV:Xe};class Ke extends _e.Component{constructor(){super(...arguments),this.options={width:500,height:400,hierarchyType:"grid",showDefaultHeaderActionIcon:!1,style:{layoutWidthType:"compact"}},this.state={data:null,config:null},this.download=()=>{const{config:{resData:e,properties:t}={}}=this.state,{clusterTitle:n}=this.props,r=$e("cluster_result");Xe({data:e,title:[n,Ye({id:"gi-assets-algorithm.src.ClusterTable.NodeName",dm:"节点名称"})].concat(t),titleForKey:["clusterId","label"].concat(t)},r)},this.onRowCellClick=({viewMeta:e})=>{const{query:t,spreadsheet:n}=e,r=n.dataSet.getMultiData(t),{id:o,clusterId:i}=(null==r?void 0:r[0])||{},{focusNodeAndHighlightHull:a}=this.props;a&&a(o,i)}}static getDerivedStateFromProps(e,t){const{data:n,clusterTitle:r,properties:o}=e,{data:i}=t;if(!(0,Oe.isEqual)(n,i)){const e=((e,t,n)=>{var r;const o=[];return null===(r=null==e?void 0:e.nodes)||void 0===r||r.forEach((e=>{var t;o.push(Object.assign(Object.assign(Object.assign({},e.properties||{}),{propertyId:null===(t=e.properties)||void 0===t?void 0:t.id}),e))})),o.sort(((e,t)=>Number(e.clusterId)-Number(t.clusterId))),{dataCfg:{fields:{rows:["clusterId","id"],values:n||["nodeType","label"]},meta:[{field:"clusterId",name:t},{field:"id",name:"id"}],data:o||[]},resData:o,properties:n}})(n,r,o);return{data:i,config:e}}return null}render(){const{config:{dataCfg:e}={}}=this.state;return Ne().createElement(Ne().Fragment,null,Ne().createElement(Me.Tooltip,{title:Ye({id:"gi-assets-algorithm.src.ClusterTable.DownloadCsv",dm:"下载 CSV"}),placement:"topRight"},Ne().createElement(ke,{style:{float:"right"},onClick:this.download})),Ne().createElement("div",{className:"community-cluster-table-wrapper"},Ne().createElement(Be.dZ,{sheetType:"base",dataCfg:e,options:this.options||{},onRowCellClick:this.onRowCellClick})))}}function Ze(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],C=n[7],b=n[8];return e[0]=h*r+f*a+p*c,e[1]=h*o+f*s+p*u,e[2]=h*i+f*l+p*d,e[3]=g*r+v*a+m*c,e[4]=g*o+v*s+m*u,e[5]=g*i+v*l+m*d,e[6]=y*r+C*a+b*c,e[7]=y*o+C*s+b*u,e[8]=y*i+C*l+b*d,e}function Qe(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Ze(e,r,t)}function Je(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Ze(e,r,t)}function et(e,t,n){return Ze(e,n,t)}const tt="ADD_EDGE_ID";function nt(e,t,n){n.forEach((n=>{(null==t?void 0:t.hasState(n))&&(e.setItemState(t,n,!1),t.refresh())}))}const rt={scaleNodes:(e,t=600)=>{const{nodes:n=[],edges:r=[]}=e;if(!(null==n?void 0:n.length))return;let o=1/0,i=-1/0,a=1/0,s=-1/0;n.forEach((e=>{void 0!==e.x&&void 0!==e.y&&(e.x<o&&(o=e.x),e.x>i&&(i=e.x),e.y<a&&(a=e.y),e.y>s&&(s=e.y))}));const l=(i-o)/t,c=(s-a)/t,u=Math.max(l,c);return u<1?{nodes:n,edges:r}:{nodes:n.map((e=>Object.assign(Object.assign({},e),{x:e.x?e.x/u:void 0,y:e.y?e.y/u:void 0}))),edges:r}},focusNodeY:(e,t,n,r="center")=>{const o=t.getModel().y,i=e.getGroup();let a=i.getMatrix()||[1,0,0,0,1,0,0,0,1],s=0;s="top"===r?-o:(0,Oe.isNumber)(r)?e.getPointByCanvas(0,r).y-o:e.getPointByCanvas(0,n/3).y-o;const l=s*a[4];let c=0,u=0;i.animate((e=>(u=l*e,a=function(e,t){for(var n,r,o,i=e?[].concat(e):[1,0,0,0,1,0,0,0,1],a=0,s=t.length;a<s;a++){var l=t[a];switch(l[0]){case"t":n=i,r=i,function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(o=[0,0,0,0,0,0,0,0,0],[l[1],l[2]]),Ze(n,o,r);break;case"s":Je(i,i,[l[1],l[2]]);break;case"r":Qe(i,i,l[1]);break;case"m":et(i,i,l[1])}}return i}(a,[["t",0,u-c]]),c=u,{matrix:a})),{duration:500})},addEdge:(e,t)=>{const n=t.findById(e),r=t.findById(tt);if(!n||r)return;const{centerX:o,centerY:i,width:a}=n.getBBox(),s={id:tt,zIndex:-1,source:e,target:{x:o+a/2+25,y:i},type:"quadratic",curveLevel:0,style:{lineAppendWidth:30,endArrow:!0}};t.addItem("edge",s).toFront(),n.toFront()},exportGraphData:(e,t="graph-data")=>{if(!e||"object"!=typeof e)return;const n=JSON.stringify(e),r=document.createElement("a");r.download=t.includes(".json")?t:`${t}.json`;const o=new Blob([n],{type:"text/json"});return r.href=URL.createObjectURL(o),r.click(),n},clearItemsStates:(e,t,n)=>{t.forEach((t=>{try{nt(e,t,n)}catch(e){console.log("error :>> ",t,e)}}))},clearItemStates:nt},ot={getHullOptions:e=>({id:e.id||`${Math.random().toString(36).substr(2)}`,type:e.type||"bubble",members:e.members,padding:e.padding||10,style:e.style}),removeHulls:(e,t)=>{const n=null==t?void 0:t.get("hullMap");e&&(e.forEach((e=>{e&&(null==t||t.removeHull(e),n&&delete n[e.id])})),e=null)},drawHulls:(e,t,n)=>{if(n)return null==e||e.forEach((e=>{e.members=[...new Set(e.members)].filter((e=>n.findById(e)))})),t?t.forEach((e=>{e.updateData(e.members)})):t=null==e?void 0:e.map((e=>{const{members:t}=e;if(!((null==t?void 0:t.length)<1))return n.createHull(Object.assign(Object.assign({},e),{members:t}))})).filter((e=>!!e)),t}},it=()=>"xxxxxxxxxxxx".replace(/[x]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),at={fittingString:(e,t,n)=>{const r=n/2+.5,o=t-75,{len:i,lenList:a}=function(e){let t=0;const n=[];for(let r=0;r<(null==e?void 0:e.length);r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2,n.push(t);return{len:t,lenList:n}}(e);if(i*r>o){const t=Math.floor((o-10)/r),n=a.findIndex((e=>e>t))-1,i=e.substring(0,n)+"…";return i===`${e}…`?e:i}return e},createUuid:it},st={debounce:(e,t)=>{let n;return function(...r){clearTimeout(n),n=window.setTimeout((()=>{e(...r)}),t||50)}}},lt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qe),ot),rt),at),st),{ClickSelect:ct}=Te.Behaviors;var ut;!function(e){e.KCore="k-core",e.louvain="louvain",e.iLouvain="i-louvain",e.ConnectedComponent="connected-component"}(ut||(ut={}));const dt={id:"CommunityDetection",name:Ye({id:"gi-assets-algorithm.src.CommunityDetection.info.CommunityDiscovery",dm:"社区发现"}),category:"algorithm-analysis",type:"GIAC_CONTENT",desc:Ye({id:"gi-assets-algorithm.src.CommunityDetection.info.ThroughKCoreLopuvainAnd",dm:"通过 K-Core、Lopuvain、iLouvain"}),cover:"http://xxxx.jpg",icon:"icon-associate",docs:"https://www.yuque.com/antv/gi/wx332z4ox2kylghu"},{GIAC_CONTENT_METAS:ht,deepClone:ft}=Ie.extra,pt=ft(ht);pt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=dt.name,pt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=dt.icon;const gt={info:dt,component:t=>{const{controlledValues:n,onOpen:r}=t,{data:o,graph:i,updateHistory:a}=(0,Ie.useContext)(),[s,l]=(0,_e.useState)(ut.KCore),[c,u]=(0,_e.useState)(null),[d,f]=(0,_e.useState)({nodes:[],edges:[]}),[p,g]=(0,_e.useState)(2),[v,m]=(0,_e.useState)(!1),[y,C]=(0,_e.useState)(null),[b,w]=(0,_e.useState)(!1),[x,E]=(0,_e.useState)(null),[S,I]=(0,_e.useState)([]),[T,L]=(0,_e.useState)([]),M=[ut.louvain,ut.iLouvain,ut.ConnectedComponent];(0,_e.useEffect)((()=>{if(n){const{algorithm:e,coreDegreeK:t}=n;l(e),t&&g(t),R(n),null==r||r()}}),[n]),(0,_e.useEffect)((()=>{f({nodes:(0,Oe.cloneDeep)(i.getNodes()).map((e=>e.getModel())),edges:(0,Oe.cloneDeep)(i.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))});const e={};o.nodes.forEach((t=>{Object.keys(t.data).forEach((t=>e[t]=!0))})),L(Object.keys(e))}),[o]);const O=[{name:ut.KCore,content:Ne().createElement("div",{className:"community-detection-algo-body"},Ne().createElement("span",null,Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.SetCoreK",dm:"设置核心度k："})),Ne().createElement(Me.InputNumber,{min:1,value:p,style:{margin:"10px 20px"},onChange:e=>g(e)}))},{name:ut.louvain,content:Ne().createElement(Ne().Fragment,null)},{name:ut.iLouvain,content:Ne().createElement(Ne().Fragment,null)},{name:ut.ConnectedComponent,content:Ne().createElement(Ne().Fragment,null)}],_=()=>{lt.removeHulls(y,i),C(null)},N=(e,t,n)=>{t&&_();const r=e.map((e=>({id:e.id,type:"smooth-convex",members:e.nodes.map((e=>e.id)),style:e.id===n?{fill:"lightgreen",stroke:"green"}:void 0}))).map((e=>lt.getHullOptions(e))),o=lt.drawHulls(r,t?null:y,i);C(o)},A=(e,t)=>{i.getNodes().forEach((t=>{var n,r;const o=t.get("id"),a=null===(n=d.nodes)||void 0===n?void 0:n.find((e=>e.id===o));if(a&&!(null==e?void 0:e.includes(o))){const{size:e}=(null===(r=a.style)||void 0===r?void 0:r.keyshape)||{size:30};i.updateItem(t,{style:{keyshape:{size:e},icon:{size:e&&e/2}}})}})),t&&i.getEdges().forEach((e=>{var n,r;const o=e.getModel().id||"",a=null===(n=d.edges)||void 0===n?void 0:n.find((e=>e.id===o)),s=null===(r=null==a?void 0:a.style)||void 0===r?void 0:r.keyshape,l=null==s?void 0:s.lineWidth;a&&!(null==t?void 0:t.includes(o))&&i.updateItem(e,{style:{keyshape:Object.assign({lineWidth:l},s||{})}})})),i.getEdges().forEach((e=>{e.refresh()}))},R=(e={})=>{m(!0),w(!0),setTimeout((()=>{var t;if(!i||i.destroyed)return void D(!1,Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.TheGraphInstanceDoesNot",dm:"图实例不存在"}));const n=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>Object.assign(Object.assign({},e.data||{}),{label:e.label||e.data.label||e.data.name,id:e.id}))),edges:t.map((e=>Object.assign(Object.assign(Object.assign({},e),e.data||{}),{id:e.id||e.data.id})))}))(o);switch(e.algorithm||s){case ut.KCore:const r=q(n,e.coreDegreeK||p)||{nodes:[],edges:[]},o=r.nodes.map((e=>e.id)),a=r.edges.map((e=>e.id)),s=null==d?void 0:d.nodes.filter((e=>o.includes(e.id))),l=(null==d?void 0:d.edges.filter((e=>{var t;const n=(null===(t=e.data)||void 0===t?void 0:t.id)||e.id;return a.includes(n)})))||[];let c={nodes:s,edges:l};s.length!==(null===(t=null==d?void 0:d.nodes)||void 0===t?void 0:t.length)&&(c=lt.scaleNodes(c,600)),u(c),A([],[]),r.nodes.forEach((e=>{i.updateItem(e.id,{style:{keyshape:{size:50},icon:{size:50}}})})),r.edges.forEach((e=>{const t=i.getEdges().find((t=>t.getModel().data.id===e.data.id));if(!t)return;const{style:n={}}=t.getModel();i.updateItem(t,{style:{keyshape:Object.assign({lineWidth:2},n.keyshape||{})}})})),i.getEdges().forEach((e=>{e.refresh()}));break;case ut.louvain:const f=$(n,!1,"weight",.01).clusters;u(n),I(f),N(f);break;case ut.iLouvain:const g=X(n,!1,"weight",.01,"properties").clusters;u(n),I(g),N(g);break;case ut.ConnectedComponent:const v=h(n);if(v.length<=1){Me.message.info(Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.TheCurrentGraphIsConnected",dm:"当前图整体连通，无非连通子图"}));break}const m=[];let y=!1;v.forEach(((e,t)=>{1!==e.length?(e.forEach((e=>e.clusterId=`${t}`)),m.push({id:`${t}`,nodes:e})):y=!0})),y&&Me.message.info(Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.ThereAreIsolatedPointOn",dm:"当前图上存在孤点，将不参与社区划分"})),u(n),I(m),N(m)}D(!0),w(!1)}),100)},D=(e,t)=>{const n={communityAlgo:s};s===ut.KCore&&(n.coreDegreeK=p),a({componentId:"CommunityDetection",type:"analyse",subType:Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.CommunityDiscovery",dm:"社区发现"}),statement:s,success:e,errorMsg:t,params:n})},P=()=>{x&&i.findById(x).hasState("active")&&i.setItemState(x,"active",!1)},k=(e,t)=>{P(),i.setItemState(e,"active",!0),N(S,!0,t),E(e)};return Ne().createElement("div",{style:{background:"#fff"}},Ne().createElement("div",{className:"community-detection-wrapper"},Ne().createElement("div",{className:"top-info"},Ne().createElement("p",{className:"community-detection-title"},Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.SelectionAlgorithm",dm:"选择算法"})),Ne().createElement(e.Z,{onClick:()=>{A([],[]),u(null),_(),l(ut.KCore),P()}})),Ne().createElement(Me.Radio.Group,{onChange:e=>{A([],[]),u(null),_(),l(e.target.value)},value:s},O.map((e=>Ne().createElement("div",{key:e.name},Ne().createElement(Me.Radio,{value:e.name,className:"community-detection-algo-radio"},Ne().createElement("div",{className:"community-detection-algo-title"},Ne().createElement("span",{className:"community-detection-algo-title-name"},e.name),Ne().createElement("span",{className:"community-detection-algo-title-tip"},e.name))),e.content)))),Ne().createElement(Me.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},loading:b,onClick:()=>R()},Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.Analysis",dm:"分析"})),(()=>{var e;if(v)return b?Ne().createElement(Me.Spin,{spinning:!0},Ne().createElement("div",{className:"kg-community-result-wrapper"})):(null===(e=null==c?void 0:c.nodes)||void 0===e?void 0:e.length)?M.includes(s)?Ne().createElement("div",{className:"community-detection-result-wrapper"},Ne().createElement("span",{className:"community-detection-title"},Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.AnalysisResults",dm:"分析结果"})),Ne().createElement(Ke,{data:c,clusterTitle:Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.CommunityNumber",dm:"社区编号"}),focusNodeAndHighlightHull:k,properties:T})):s===ut.KCore?Ne().createElement("div",{className:"community-detection-result-wrapper"},Ne().createElement("p",{className:"community-detection-title"},Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.AnalysisResults",dm:"分析结果"})),Ne().createElement("div",{className:"community-detection-graph-container"},Ne().createElement(Le(),{data:c,height:300,layout:{type:"preset"},fitView:!0,animate:!1,minZoom:.1,layoutCache:!0},Ne().createElement(ct,{disabled:!0})))):void 0:Ne().createElement(Me.Empty,{image:Me.Empty.PRESENTED_IMAGE_SIMPLE,description:Ye({id:"gi-assets-algorithm.src.CommunityDetection.Component.NoDataAvailable",dm:"暂无数据"})})})()))},registerMeta:e=>Object.assign({},pt)};var vt=c(770);const mt=[{label:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.TotalDegree",dm:"总度数"}),value:"totalDegree"},{label:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.Outdegree",dm:"出度"}),value:"outDegree"},{label:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.Penetration",dm:"入度"}),value:"inDegree"}],yt=e=>{const{degree:t}=e,[n,r]=Ne().useState("totalDegree");Ne().useEffect((()=>{const e=[...t[n].entries()].map((e=>{const[t,n]=e;return{value:t,count:n}})),r=new vt.Scatter("gi-info-detection-degree-scatter",{data:e,height:300,xField:"value",yField:"count",interactions:[{type:"other-visible"}],size:5,pointStyle:{fill:"#5B8FF9"},xAxis:{title:{text:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.Degree",dm:"度数"})}},yAxis:{title:{text:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.Quantity",dm:"数量"})}}});return r.render(),()=>{r.destroy()}}),[t,n]);const o=Ne().createElement(Me.Select,{options:mt,value:n,onChange:e=>r(e)});return Ne().createElement(Me.Card,{title:Ye({id:"gi-assets-algorithm.src.InfoDetection.DegreeScatter.DegreeDistribution",dm:"度数分布"}),extra:o},Ne().createElement("div",{id:"gi-info-detection-degree-scatter"}))},Ct={id:"InfoDetection",name:Ye({id:"gi-assets-algorithm.src.InfoDetection.info.InformationDetection",dm:"信息检测"}),desc:Ye({id:"gi-assets-algorithm.src.InfoDetection.info.DetectIsolatedPointsRingsEtc",dm:"检测画布中孤立点、环等"}),icon:"icon-infomation",cover:"http://xxxx.jpg",category:"algorithm-analysis",type:"GIAC_CONTENT",docs:"https://www.yuque.com/antv/gi/id9rov6gyv7b0p7c"},{deepClone:bt,GIAC_CONTENT_METAS:wt}=Ie.extra,xt=bt(wt);xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=Ct.name,xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=Ct.icon,xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.tooltip.default=Ct.desc,xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.containerWidth.default="400px";const Et={info:Ct,component:()=>{const{data:e,graph:t}=(0,Ie.useContext)();console.log("InfoDetection HAS GRAPH",t&&!t.destroyed);const[n,r]=(0,_e.useState)([]),[o,i]=(0,_e.useState)([]),[a,s]=(0,_e.useState)(!1),[l,c]=(0,_e.useState)(!1),[u,d]=(0,_e.useState)(new Map),[h,f]=(0,_e.useState)(new Map),[p,g]=(0,_e.useState)(new Map);return Ne().useEffect((()=>{const n=e.nodes.filter((e=>0===t.findById(e.id).getEdges().length)),o=C(e,!1),a=new Map,s=new Map,l=new Map;e.nodes.forEach((e=>{const n=t.findById(e.id).getEdges(),r=n.length;let o=0,i=0;n.forEach((t=>{const{source:n}=t.getModel();n===e.id?i++:o++})),a.set(o,a.has(o)?a.get(o)+1:1),s.set(i,s.has(i)?s.get(i)+1:1),l.set(r,l.has(r)?l.get(r)+1:1)})),r(n),i(o),d(a),f(s),g(l)}),[e]),Ne().useEffect((()=>{e.nodes.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!1)})),e.edges.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!1)})),a&&n.forEach((e=>{t.findById(e.id)&&t.setItemState(e.id,"active",!0)})),l&&o.forEach((e=>{const n=Object.keys(e)[0];let r=n;do{t.setItemState(r,"active",!0);const n=e[r].id;t.findById(r).getEdges().forEach((e=>{const{source:o,target:i,id:a}=e.getModel();(o===r&&i==n||o==n&&i===r)&&t.setItemState(e.getID(),"active",!0)})),r=n}while(r!==n)}))}),[a,l]),Ne().createElement("div",{className:"gi-info-detection"},Ne().createElement(Me.List,null,Ne().createElement(Me.List.Item,{key:"isolate",extra:Ne().createElement("div",null,n.length),onClick:()=>s((e=>!e)),style:{border:a?"solid blue 1px":"none"}},Ye({id:"gi-assets-algorithm.src.InfoDetection.Component.IsolatedPoint",dm:"孤立点"})),Ne().createElement(Me.List.Item,{key:"circle",extra:Ne().createElement("div",null,o.length),onClick:()=>c((e=>!e)),style:{border:l?"solid blue 1px":"none"}},Ye({id:"gi-assets-algorithm.src.InfoDetection.Component.Ring",dm:"环"}))),Ne().createElement(yt,{degree:{inDegree:u,outDegree:h,totalDegree:p}}))},registerMeta:({schemaData:e})=>Object.assign({},xt)};var St=c(840);const It={id:"NodeImportance",name:Ye({id:"gi-assets-algorithm.src.NodeImportance.info.NodeImportance",dm:"节点重要性"}),category:"algorithm-analysis",type:"GIAC_CONTENT",desc:Ye({id:"gi-assets-algorithm.src.NodeImportance.info.ThroughPagerankDegreeCentralityAttributes",dm:"通过 PageRank、度中心性、属性等"}),cover:"http://xxxx.jpg",icon:"icon-rules",docs:"https://www.yuque.com/antv/gi/synavummamac5yya"},Tt={degree:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.DegreeCentrality",dm:"度中心性"}),"degree-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheEntity",dm:"根据实体的出入度大小计算"}),"page-rank":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.PagerankWebPageSorting",dm:"PageRank网页排序"}),"page-rank-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.UsePagerankWebPageSorting",dm:"使用PageRank网页排序算法计算"}),"node-property":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.NodeAttributeImportance",dm:"节点属性重要性"}),"node-property-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.CalculateBasedOnNodeAttribute",dm:"根据节点属性值计算"}),"edge-property":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.ImportanceOfRelationshipAttributes",dm:"关系属性重要性"}),"edge-property-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.CalculatedBasedOnTheAttributes",dm:"根据节点相关关系的属性计算"}),"in-degree":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Penetration",dm:"入度"}),"out-degree":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Outdegree",dm:"出度"}),ave:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Average",dm:"平均数"}),min:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.MinimumValue",dm:"最小值"}),max:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Maximum",dm:"最大值"}),median:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Median",dm:"中位数"}),sort:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Sort",dm:"排序"}),"sort-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToNumericalType",dm:"适用于数值型"}),count:Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.Count",dm:"计数"}),"count-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.ApplicableToEnumeratedTypes",dm:"适用于枚举型"}),"positive-correlation":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.PositiveCorrelation",dm:"正相关"}),"positive-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.TheLargerTheValueThe",dm:"值越大，点或边越大"}),"negative-correlation":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.PositiveCorrelation",dm:"正相关"}),"negative-tip":Ye({id:"gi-assets-algorithm.src.NodeImportance.registerMeta.TheSmallerTheValueThe",dm:"值越小，点或边越大"})};var Lt,Mt;!function(e){e.Positive="positive",e.Negative="negative"}(Lt||(Lt={})),function(e){e.Active="active",e.Default="default",e.Selected="selected",e.Disable="disable",e.Highlight="highlight",e.Inactive="inactive"}(Mt||(Mt={}));const{GIAC_CONTENT_METAS:Ot,deepClone:_t}=Ie.extra,Nt=_t(Ot);Nt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=It.name,Nt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=It.icon;const{Option:At}=Me.Select,Rt=({type:e,visible:t,form:n,properties:r})=>{var o;const{}=(0,Ie.useContext)(),[i,a]=(0,_e.useState)(!1);return Ne().createElement("div",{className:"algo-body algo-body-property"},Ne().createElement("span",{style:{marginLeft:8}},Ne().createElement(Me.Form.Item,{rules:[{required:t,message:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.CannotBeEmpty",dm:"不可为空"})}],name:`${e}-property.property`,key:`${e}-property.property`,label:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.Properties",dm:"属性"})},Ne().createElement(Me.Select,{placeholder:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.PleaseSelect",dm:"请选择"}),dropdownMatchSelectWidth:!1,notFoundContent:i?Ne().createElement(Me.Spin,null):Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.NoData",dm:"无数据"})},null===(o=null==r?void 0:r.map)||void 0===o?void 0:o.call(r,(e=>Ne().createElement(At,{value:e,key:e},e)))))),"edge"===e&&Ne().createElement("span",{style:{marginLeft:8}},Ne().createElement(Me.Form.Item,{rules:[{required:t,message:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.CannotBeEmpty",dm:"不可为空"})}],name:`${e}-property.calcway`,key:`${e}-property.calcway`,label:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.CalculationMethod",dm:"计算方式"})},Ne().createElement(Me.Select,{placeholder:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.PleaseSelect",dm:"请选择"}),dropdownMatchSelectWidth:!1,dropdownClassName:"calc",getPopupContainer:()=>document.getElementById("select-drop-down-area")},Ne().createElement(At,{value:"sort",key:"sort"},Tt.sort,Ne().createElement("br",null),Ne().createElement("p",{className:"calc-tip"},Tt["sort-tip"])),Ne().createElement(At,{value:"count",key:"count"},Tt.count,Ne().createElement("br",null),Ne().createElement("p",{className:"calc-tip"},Tt["count-tip"]))))),Ne().createElement("span",{style:{marginLeft:8}},Ne().createElement(Me.Form.Item,{rules:[{required:t,message:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.CannotBeEmpty",dm:"不可为空"})}],name:`${e}-property.mappingway`,key:`${e}-property.mappingway`,initialValue:Lt.Positive,label:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.MappingMethod",dm:"映射方式"})},Ne().createElement(Me.Select,{placeholder:Ye({id:"gi-assets-algorithm.src.NodeImportance.propertyContent.PleaseSelect",dm:"请选择"}),dropdownMatchSelectWidth:!1,dropdownClassName:"mapping",getPopupContainer:()=>document.getElementById("select-drop-down-area")},Ne().createElement(At,{value:Lt.Positive,key:Lt.Positive},Tt["positive-correlation"],Ne().createElement("br",null),Ne().createElement("p",{className:"mapping-tip"},Tt["positive-tip"])),Ne().createElement(At,{value:Lt.Negative,key:Lt.Negative},Tt["negative-correlation"],Ne().createElement("br",null),Ne().createElement("p",{className:"mapping-tip"},Tt["negative-tip"]))))))};let Dt=null;const Pt=({data:e,currentAlgo:t,edgeType:n})=>{const{graph:r}=(0,_e.useContext)(Te.GraphinContext),o=(0,_e.useRef)(null);(0,_e.useEffect)((()=>{const e=i();Dt&&Dt.destroy(),Dt=new vt.Column(o.current,{data:e,xField:"value",yField:"count",maxColumnWidth:60,colorField:"count",legend:{layout:"horizontal",position:"bottom",offsetY:4,maxRow:2},label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{title:{text:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultPlot.ImportanceValue",dm:"重要性值"}),position:"end",offset:14,style:{stroke:"#fff",lineWidth:2,fontWeight:400}}},yAxis:{title:{text:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultPlot.NumberOfNodes",dm:"节点数量"}),position:"end",autoRotate:!1,spacing:-55,style:{stroke:"#fff",lineWidth:2,fontWeight:400}}}}),Dt.render(),Dt.on("interval:mouseleave",a),Dt.on("interval:mouseenter",s)}),[e]);const i=()=>{var t;const n=[],r=(0,Oe.groupBy)((null===(t=e.node)||void 0===t?void 0:t.data)||[],"value");return Object.keys(r).forEach((e=>{n.push({value:e,count:r[e].length})})),n},a=()=>{r.findAllByState("node",Mt.Active).concat(r.findAllByState("edge",Mt.Active)).forEach((e=>{r.setItemState(e,Mt.Active,!1)}))},s=n=>{var o,i,s,l,c;if(!(null===(o=n.data)||void 0===o?void 0:o.data))return;const u=null===(s=null===(i=n.data)||void 0===i?void 0:i.data)||void 0===s?void 0:s.value;a();const d=e.node.data.filter((e=>+e.value==+u)),h=d.map((e=>e.id));d.forEach((e=>{const t=r.findById(e.id);t&&r.setItemState(t,Mt.Active,!0)})),"edge-property"===t&&(null===(c=null===(l=e.edge)||void 0===l?void 0:l.data)||void 0===c||c.forEach((e=>{const t=r.findById(e.id);if(!t)return;const n=t.getModel();(h.includes(n.source)||h.includes(n.target))&&r.setItemState(t,Mt.Active,!0)})))};return Ne().createElement("div",null,Ne().createElement("div",{className:"plot-wrapper",ref:o}))},kt=({data:e,currentAlgo:t,form:n,reAnalyse:r,nodeProperties:o})=>{const{graph:i}=(0,Ie.useContext)(),a=n.getFieldsValue()["edge-property.edgeType"],[s,l]=(0,_e.useState)(!1),[c,u]=(0,_e.useState)("id");(0,_e.useEffect)((()=>{l(!1)}),[r]);const d=()=>{i.findAllByState("node",Mt.Active).concat(i.findAllByState("edge",Mt.Active)).forEach((e=>{i.setItemState(e,Mt.Active,!1)}))};return Ne().createElement("div",{className:"result-wrapper"},Ne().createElement(Me.Table,{dataSource:(()=>{const t=[...e.node.data];return e.mappingWay===Lt.Negative&&t.reverse(),t.map(((e,t)=>{var n;return{key:e.id,index:t+1,name:e.originProperties[c]||e.id,value:e.value,values:null===(n=e.values)||void 0===n?void 0:n.join("; ")}}))})(),columns:(()=>{const n=[{title:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.SerialNumber",dm:"序号"}),dataIndex:"index",key:"index",width:60},{title:(null==o?void 0:o.length)?Ne().createElement(Ne().Fragment,null,Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.Node",dm:"节点"}),Ne().createElement(Me.Select,{className:"result-table-property-select",size:"small",defaultValue:"id",options:o.map((e=>({label:e,value:e}))),dropdownMatchSelectWidth:!1,onChange:u})):Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.Node",dm:"节点"}),dataIndex:"name",key:"name",textWrap:"word-break",ellipsis:!0},{title:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.Importance",dm:"重要性"}),dataIndex:"value",key:"value",textWrap:"word-break",sortOrder:s,sorter:(e,t)=>e.value-t.value}];return"edge-property"===t&&"count"===e.calcWay&&(n.splice(2,0,{title:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.AttributeName",dm:"属性名"}),dataIndex:"values",key:"values",textWrap:"word-break"}),n[3].title=Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.CalculationMethod",dm:"计算方式"})),n})(),size:"small",style:{marginTop:"16px"},showSorterTooltip:{title:Ye({id:"gi-assets-algorithm.src.NodeImportance.resultTable.Sort",dm:"排序"})},onRow:n=>({onMouseEnter:()=>(n=>{var r,o;d();const s=i.findById(n.key);s&&(i.setItemState(s,Mt.Active,!0),"edge-property"===t&&(null===(o=null===(r=e.edge)||void 0===r?void 0:r.data)||void 0===o||o.forEach((e=>{const t=i.findById(e.id);if(!t)return;const r=t.getModel();r.data.label===(null==a?void 0:a.split("_")[1])&&(r.source!==n.key&&r.target!==n.id||i.setItemState(t,Mt.Active,!0))}))))})(n),onMouseLeave:d}),onChange:(e,t,n,r)=>{"sort"===r.action&&l(n.order||!1)}}))};const{TabPane:Bt}=Me.Tabs,{pageRank:Ft}=Se,jt=[16,64],zt=[1,8];let Ht;const Wt={info:It,component:e=>{const{controlledValues:t,visible:n=!0,onOpen:r,onVisibleChange:o=(()=>{})}=e,{graph:i,data:a,updateHistory:s}=(0,Ie.useContext)(),[l,c]=(0,_e.useState)(!1),[u,d]=(0,_e.useState)("page-rank"),[h,f]=(0,_e.useState)(["in","out"]),[p,g]=(0,_e.useState)(),[v,m]=(0,_e.useState)(0),[y,C]=(0,_e.useState)([]),[b,w]=(0,_e.useState)([]),[x,E]=(0,_e.useState)("table"),[S]=Me.Form.useForm(),{validateFields:I,resetFields:T}=S;(0,_e.useEffect)((()=>{p&&(Ht=void 0,M());const e={};a.nodes.forEach((t=>{Object.keys(t.data).forEach((t=>e[t]=!0))})),C(Object.keys(e));const t={};a.edges.forEach((e=>{Object.keys(e.data).forEach((e=>t[e]=!0))})),w(Object.keys(t))}),[a]),(0,_e.useEffect)((()=>{if(t){const{algorithm:e,degreeIn:n,degreeOut:o}=t,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["algorithm","degreeIn","degreeOut"]);null==r||r();const a={};d(e);const s="true"===n,l="true"===o;if(s||l){const e=[];s&&e.push("in"),l&&e.push("out"),f(e),a.degreeType=e}m(Math.random()),S.setFieldsValue(i),M(e,a)}}),[t]);const L=(e,t)=>{i.getNodes().forEach((t=>{const{id:n,oriSize:r}=t.getModel();r&&!(null==e?void 0:e.includes(n))&&i.updateItem(t,{size:r||30,oriSize:void 0,style:{keyshape:{size:r||30},icon:{size:r/2}}})})),t&&i.getEdges().forEach((e=>{var n;const{id:r,oriSize:o,size:a,style:s={}}=e.getModel();1===a&&1===(null===(n=null==s?void 0:s.keyshape)||void 0===n?void 0:n.size)||(null==t?void 0:t.includes(r))||i.updateItem(e,{size:o||1,oriSize:void 0,style:{keyshape:Object.assign({lineWidth:o||1},s.keyshape||{})}})})),i.getEdges().forEach((e=>{e.refresh()}))},M=(e,t={})=>{i&&!i.destroyed?(I().then((n=>{let r={nodes:[],edges:[]};switch(e||u){case"page-rank":{const e=Ft(a);Object.keys(e).map((t=>{const n=i.findById(t),o=n.getModel();n&&r.nodes.push({id:t,name:o.id,value:e[t],originProperties:o})}));break}case"degree":{const{degreeType:e}=t,n=e||h,o=2===n.length?"total":n[0]||"in";Ht=((e,t)=>{if(t)return t;const n={};return e.nodes.forEach((e=>{n[e.id]={in:0,out:0}})),e.edges.forEach((e=>{n[e.source].out+=1,n[e.target].in+=1})),n})(a,Ht),i.getNodes().forEach((e=>{const t=e.getModel();Ht[t.id]&&r.nodes.push({id:t.id,name:t.id,value:"total"!==o?Ht[t.id][o]:Ht[t.id].in+Ht[t.id].out,originProperties:t})}));break}case"node-property":{const e=n["node-property.property"];if(!e)return;a.nodes.forEach((t=>{var n;const o=null===(n=t.data)||void 0===n?void 0:n[e],a=""===o?void 0:+o;!isNaN(a)&&i.findById(t.id)&&r.nodes.push({id:t.id,name:t.id,value:a,originProperties:t})}));break}case"edge-property":{const e=n["edge-property.property"],t=n["edge-property.calcway"];if(!e)return;const o={};i.getEdges().forEach((n=>{var i,a,s,l,c;const u=n.getModel(),d=null===(i=u.data)||void 0===i?void 0:i[e];if(void 0!==d)if("sort"===t){const e=""===d?void 0:+d;isNaN(e)||(o[u.source]=(o[u.source]||0)+e,o[u.target]=(o[u.target]||0)+e,r.edges.push({id:u.id,name:u.id,value:e,originProperties:u}))}else(null===(s=null===(a=o[u.source])||void 0===a?void 0:a.includes)||void 0===s?void 0:s.call(a,d))||(o[u.source]||(o[u.source]=[]),o[u.source].push(d)),(null===(c=null===(l=o[u.target])||void 0===l?void 0:l.includes)||void 0===c?void 0:c.call(l,d))||(o[u.target]||(o[u.target]=[]),o[u.target].push(d)),r.edges.push({id:u.id,name:u.id,value:d,originProperties:u})})),a.nodes.forEach((e=>{var n;i.findById(e.id)&&("sort"===t?void 0!==o[e.id]&&isNaN(o[e.id])||r.nodes.push({id:e.id,name:e.id,value:o[e.id]||0,originProperties:e}):r.nodes.push({id:e.id,name:e.id,value:(null===(n=o[e.id])||void 0===n?void 0:n.length)||0,values:o[e.id],originProperties:e}))}));break}}(e=>{var t,n,r,o,a,s,l,c,d,h,f;const p=S.getFieldsValue(),v=p[`${u}.calcway`],m=p[`${u}.mappingway`];if(!(null===(t=null==e?void 0:e.nodes)||void 0===t?void 0:t.length)||"edge-property"===u&&!(null===(n=null==e?void 0:e.edges)||void 0===n?void 0:n.length)){let e=Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.NoResults",dm:"无结果"});return g({type:u,calcWay:v,mappingWay:m,node:void 0,edge:void 0,message:e}),void L([],[])}const y=e.nodes;let C=0;y.sort(((e,t)=>t.value-e.value)),y.forEach((e=>{C+=e.value}));const b=y[y.length-1],w=y[0],x=y[Math.ceil(y.length/2)]||w;let E=0;null===(r=e.edges)||void 0===r||r.sort(((e,t)=>t.value-e.value)),null===(o=e.edges)||void 0===o||o.forEach((e=>{E+=e.value}));const I=(null===(a=e.edges)||void 0===a?void 0:a[e.edges.length-1])||void 0,T=(null===(s=e.edges)||void 0===s?void 0:s[0])||void 0,M=(null===(l=e.edges)||void 0===l?void 0:l[Math.ceil(e.edges.length/2)])||T,O={type:u,calcWay:v,mappingWay:m,node:{min:{id:b.id,name:b.name,value:+b.value.toFixed(6)},max:{id:w.id,name:w.name,value:+w.value.toFixed(6)},ave:{id:void 0,name:void 0,value:+(C/y.length).toFixed(6)},median:{id:x.id,name:x.name,value:+x.value.toFixed(6)},data:y},edge:(null===(c=e.edges)||void 0===c?void 0:c.length)?{min:I?{id:I.id,name:I.name,value:"count"===v?I.value:+(null===(d=I.value)||void 0===d?void 0:d.toFixed(6))}:void 0,max:T?{id:T.id,name:T.name,value:"count"===v?I.value:+(null===(h=T.value)||void 0===h?void 0:h.toFixed(6))}:void 0,ave:{id:void 0,name:void 0,value:+(E/e.edges.length).toFixed(6)},median:M?{id:M.id,name:M.name,value:"count"===v?I.value:+(null===(f=M.value)||void 0===f?void 0:f.toFixed(6))}:void 0,data:e.edges}:void 0};(e=>{const{min:t,max:n}=e.node,r=n.value-t.value||1,o=jt[1]-jt[0],a=[],s=e.mappingWay!==Lt.Negative;e.node.data.forEach((e=>{const l=i.findById(e.id);if(l){let a=s?(e.value-t.value)/r*o+jt[0]:(n.value-e.value)/r*o+jt[0];t.value===n.value&&(a=void 0);const{type:c,style:u,size:d}=l.getModel();i.updateItem(l,{size:a,oriSize:d||(null==u?void 0:u.keyshape.size)||30,style:{keyshape:{size:a},icon:{size:a/2}}})}a.push(e.id)}));let l=[];if(e.edge&&"count"!==e.calcWay){const{min:r,max:o}=e.edge,a=o.value-r.value||1,c=zt[1]-zt[0];e.edge.data.forEach((e=>{const u=i.findById(e.id);if(t.value!==n.value){let t=s?(e.value-r.value)/a*c+zt[0]:(o.value-e.value)/a*c+zt[0];if(t=t||1,u){const{size:e,style:n={}}=u.getModel();i.updateItem(u,{size:t,oriSize:e||(null==n?void 0:n.keyshape.size)||1,style:{keyshape:Object.assign({lineWidth:t},n.keyshape||{})}})}l.push(e.id)}}))}L(a,l)})(O),g(O)})(r),O(u,n,!0,"")})),E("table")):O(u,{},!1,Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.TheGraphInstanceDoesNot",dm:"图实例不存在"}))},O=(e,t,n,r)=>{s({componentId:"NodeImportance",type:"analyse",subType:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.NodeImportance",dm:"节点重要性"}),statement:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.AlgorithmAlgorithm",dm:"算法 {algorithm}"},{algorithm:e}),success:n,errorMsg:r,params:Object.assign({algorithm:e,degreeIn:String(null==h?void 0:h.includes("in")),degreeOut:String(null==h?void 0:h.includes("out"))},t)})},_=(e,t="node")=>{const n="ave"===e?`${p[t][e].value}`:`${p[t][e].value} (${p[t][e].name})`,r=((e,t,n)=>{const{len:r,lenList:o}=function(e){let t=0;const n=[];for(let r=0;r<(null==e?void 0:e.length);r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2,n.push(t);return{len:t,lenList:n}}(e);if(7.5*r>175){const t=Math.floor(22),n=o.findIndex((e=>e>t))-1,r=e.substring(0,n)+"…";return r===`${e}…`?e:r}return e})(n);return Ne().createElement(Ne().Fragment,null,Tt[e],":  ",Ne().createElement("span",{className:"result-statistic-value"},Ne().createElement(Me.Tooltip,{title:r.includes("…")?n:""},r)))},N=e=>{const t=S.getFieldsValue()[`${u}.edgeType`],n=(null==p?void 0:p.node)?void 0:Ne().createElement("p",{className:"result-message"},null==p?void 0:p.message),r="table"===e?Ne().createElement(kt,{data:p,form:S,currentAlgo:u,reAnalyse:v,nodeProperties:y}):Ne().createElement(Pt,{data:p,currentAlgo:u,edgeType:t});return Ne().createElement("div",{className:"result-wrapper"},Ne().createElement("div",{className:"result-title"},(()=>{const e=S.getFieldsValue(),t=e["node-property.property"],n=e["edge-property.property"];return"node-property"===(null==p?void 0:p.type)?Ne().createElement(Ne().Fragment,null,t,Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.Sort",dm:"- 排序"})):"edge-property"===(null==p?void 0:p.type)?Ne().createElement(Ne().Fragment,null,n," - ",Tt[null==p?void 0:p.calcWay]):Tt[null==p?void 0:p.type]})()),n||Ne().createElement("div",{className:"result-statistic"},Ne().createElement(Me.Row,null,Ne().createElement(Me.Col,{span:11},_("ave")),Ne().createElement(Me.Col,{span:11},_("median"))),Ne().createElement(Me.Row,{style:{marginTop:"16px"}},Ne().createElement(Me.Col,{span:11},_("max")),Ne().createElement(Me.Col,{span:11},_("min")))),!n&&r)},A=e=>{let t="";return Object.values(e).forEach(((e,n)=>{let r=(void 0===e?"":e).toString().replace(/"/g,'""');r.search(/("|,|\n)/g)>=0&&(r='"'+r+'"'),n>0&&(t+=","),t+=r})),t},R=e=>{var t;const n=null===(t=null==p?void 0:p[e])||void 0===t?void 0:t.data;if(!n)return;const r=n.map(A).join("\n"),o=document.createElement("a");o.href="data:text/csv;charset=utf-8,"+encodeURI(`id,name,dataType,value\n${r}`),o.download=`node-importance-${e}.csv`,o.click()},D=[{name:"page-rank",content:Ne().createElement(Ne().Fragment,null)},{name:"degree",content:Ne().createElement(Me.Checkbox.Group,{className:"algo-body",options:[{label:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.Penetration",dm:"入度"}),value:"in"},{label:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.Outdegree",dm:"出度"}),value:"out"}],defaultValue:["in","out"],onChange:f,value:h,style:{display:"degree"===u?"inline-flex":"none"}})},{name:"node-property",content:Ne().createElement(Rt,{type:"node",form:S,visible:"node-property"===u,properties:y})},{name:"edge-property",content:Ne().createElement(Rt,{type:"edge",form:S,visible:"edge-property"===u,properties:b})}];return Ne().createElement("div",{style:e.style},Ne().createElement("div",{className:"content-wrapper",id:"select-drop-down-area"},Ne().createElement("div",{className:"title-wrapper"},Ne().createElement("span",{className:"title"},Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.Algorithm",dm:"算法"}))),Ne().createElement(Me.Form,{form:S},Ne().createElement(Me.Radio.Group,{onChange:e=>{d(e.target.value)},value:u},D.map((e=>Ne().createElement("div",{key:e.name},Ne().createElement(Me.Radio,{value:e.name,className:"algo-radio"},Ne().createElement("div",{className:"algo-title"},Ne().createElement("span",{className:"algo-name"},Tt[e.name]),Ne().createElement("span",{className:"algo-tip"},"(",Tt[`${e.name}-tip`],")"))),u===e.name&&e.content)))))),Ne().createElement(Me.Row,null,Ne().createElement(Me.Col,{span:16},Ne().createElement(Me.Button,{className:"button",type:"primary",onClick:()=>{m(Math.random()),M()}},Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.Analysis",dm:"分析"}))),Ne().createElement(Me.Col,{offset:"2",span:6,style:{textAlign:"right",lineHeight:"56px"}},Ne().createElement(Me.Button,{className:"button",danger:!0,onClick:()=>{T(),L([],[]),g(null),d("page-rank")},icon:Ne().createElement(St.Z,null)}))),p&&Ne().createElement(Me.Tabs,{defaultActiveKey:"table",activeKey:x,onChange:E,tabBarExtraContent:{right:Ne().createElement(Me.Tooltip,{title:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.DownloadCsv",dm:"下载CSV"}),placement:"topRight"},Ne().createElement("i",{className:"iconfont icon-download",onClick:()=>{R("node"),R("edge")}}))}},Ne().createElement(Bt,{tab:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.ResultList",dm:"结果列表"}),key:"table"},N("table")),Ne().createElement(Bt,{tab:Ye({id:"gi-assets-algorithm.src.NodeImportance.Component.StatisticalChart",dm:"统计图表"}),key:"plot"},N("plot"))))},registerMeta:()=>Object.assign({},Nt)};var Gt,Ut;!function(e){e.KMeans="k-means"}(Gt||(Gt={})),function(e){e.EuclideanDistance="euclideanDistance"}(Ut||(Ut={}));const Vt={id:"NodesClustering",category:"algorithm-analysis",type:"GIAC_CONTENT",name:Ye({id:"gi-assets-algorithm.src.NodesClustering.info.NodeClustering",dm:"节点聚类"}),desc:Ye({id:"gi-assets-algorithm.src.NodesClustering.info.UseKMeansAlgorithmTo",dm:"使用 K-Means 算法计算节点的聚类"}),icon:"icon-Kjunzhijulei",cover:"http://xxxx.jpg",docs:"https://www.yuque.com/antv/gi/gcmtuhktnogm5pae"},{GIAC_CONTENT_METAS:Yt,deepClone:$t}=Ie.extra,Xt=$t(Yt);Xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=Vt.name,Xt.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=Vt.icon;const qt={info:Vt,component:t=>{const{controlledValues:n,onOpen:r}=t,o=(0,Ie.useContext)(),{data:i,graph:a,layout:s,updateContext:l,updateHistory:c}=o,[u,d]=(0,_e.useState)(Gt.KMeans),[h,f]=(0,_e.useState)(null),[p,g]=(0,_e.useState)({nodes:[],edges:[]}),[v,m]=(0,_e.useState)(2),[y,C]=(0,_e.useState)(Ut.EuclideanDistance),[b,w]=(0,_e.useState)(!1),[x,E]=(0,_e.useState)(!1),[S,I]=(0,_e.useState)(null),[T,L]=(0,_e.useState)({nodes:[],edges:[]}),[M,O]=(0,_e.useState)(s),_=()=>!a||a.destroyed?{nodes:[],edges:[]}:{nodes:(0,Oe.cloneDeep)(a.getNodes()).map((e=>e.getModel())),edges:(0,Oe.cloneDeep)(a.getEdges()).map((e=>e.getModel()))};(0,_e.useEffect)((()=>{a&&!a.destroyed&&g({nodes:(0,Oe.cloneDeep)(a.getNodes()).map((e=>e.getModel())),edges:(0,Oe.cloneDeep)(a.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))})}),[i,a]),(0,_e.useEffect)((()=>{if(n){const{algorithm:e,clusterK:t,distanceType:o,focusNodeId:i}=n;d(e),m(t),C(o),null==r||r(),N(),i&&R(i)}}),[n]);const N=()=>{w(!0),E(!0),setTimeout((()=>{const e=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>{const t=Object.assign({},e.data,e.data.properties);return delete t.id,{id:e.id,label:e.label||e.data.label||e.data.name,properties:t}})),edges:t.map((e=>Object.assign(Object.assign({},e),{id:e.id||e.data.id})))}))(i);if(u===Gt.KMeans){if(!a||a.destroyed)return;const{clusters:t}=Z(e,v,"properties",[],[],y);f(e);const n=((e,t)=>{const n={};return t.forEach(((e,t)=>{e.forEach((e=>{n[e.id]=`gi-kmeans-combo-${String(t)}`}))})),{nodes:null==e?void 0:e.nodes.map((e=>Object.assign(Object.assign({},e),{comboId:n[e.id],x:void 0,y:void 0}))),edges:null==e?void 0:e.edges,combos:t.map(((e,t)=>({id:`gi-kmeans-combo-${String(t)}`,label:Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.CategoryIndex",dm:"分类{index}"},{index:t})})))}})(i,t);L(n),l((e=>{e.data=n}))}E(!1),c({componentId:"NodesClustering",type:"analyse",subType:Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.NodeClustering",dm:"节点聚类"}),statement:Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.AlgorithmNodeclusteringalgo",dm:"算法 {nodeClusteringAlgo}"},{nodeClusteringAlgo:u}),success:!0,params:{algorithm:u,clusterK:v,distanceType:y,focusNodeId:S}})}),100)},A=()=>{S&&a.findById(S).hasState("active")&&a.setItemState(S,"active",!1)},R=(e,t="")=>{A();const n=a.findById(e);n&&(a.setItemState(n,"active",!0),I(e))};return(0,_e.useEffect)((()=>{(0,Oe.isEqual)(i,T)||(g(_()),f({nodes:[],edges:[]}),A(),l((e=>{e.layout=M}))),L((0,Oe.cloneDeep)(i))}),[i,a]),(0,_e.useEffect)((()=>{g(_()),O(s)}),[]),Ne().createElement("div",null,Ne().createElement("div",{className:"nodes-clustering-wrapper"},Ne().createElement(Me.Row,{justify:"space-between"},Ne().createElement(Me.Col,{span:21},Ne().createElement("div",{className:"nodes-clustering-algo-title"},Ne().createElement("h4",{className:"nodes-clustering-algo-title-name"},Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.NodesclusteringalgorithmkmeansAlgorithm",dm:"{NodesClusteringAlgorithmKMeans}算法"},{NodesClusteringAlgorithmKMeans:Gt.KMeans})),Ne().createElement("div",{className:"nodes-clustering-algo-title-tip"},Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.GatherNodesIntoKClusters",dm:"根据节点之间的距离将节点聚成K个簇"})))),Ne().createElement(Me.Col,{span:2,offset:1,style:{lineHeight:"32px",textAlign:"right"}},Ne().createElement(e.Z,{onClick:()=>{f({nodes:[],edges:[]}),d(Gt.KMeans),m(2),A(),l((e=>{e.data=p,e.layout=M}))}}))),Ne().createElement("div",{className:"nodes-clustering-algo-body"},Ne().createElement("span",null,Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.SetTheKValue",dm:"设置 K 值"})),Ne().createElement(Me.InputNumber,{min:1,value:v,style:{margin:"10px 20px"},onChange:e=>m(e)})),Ne().createElement(Me.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},loading:x,onClick:N},Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.Analysis",dm:"分析"})),(()=>{var e;if(b)return x?Ne().createElement(Me.Spin,{spinning:!0},Ne().createElement("div",{className:"kg-nodes-clustering-result-wrapper"})):(null===(e=null==h?void 0:h.nodes)||void 0===e?void 0:e.length)?Ne().createElement("div",{className:"nodes-clustering-result-wrapper"},Ne().createElement("span",{className:"intelligent-analysis-title nodes-clustering-result-title"},Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.AnalysisResults",dm:"分析结果"})),Ne().createElement(Ke,{data:h,clusterTitle:Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.Classification",dm:"分类"}),focusNodeAndHighlightHull:R})):Ne().createElement(Me.Empty,{image:Me.Empty.PRESENTED_IMAGE_SIMPLE,description:Ye({id:"gi-assets-algorithm.src.NodesClustering.Component.NoDataAvailable",dm:"暂无数据"})})})()))},registerMeta:e=>Object.assign({},Xt)},Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};var Zt=function(e,t){return _e.createElement(De.Z,(0,Ae.Z)((0,Ae.Z)({},e),{},{ref:t,icon:Kt}))};Zt.displayName="FormOutlined";const Qt=_e.forwardRef(Zt),Jt=({similarNodes:e,similarityKey:t="similarity",topReset:n})=>{const[r,o]=(0,_e.useState)(!1);(0,_e.useEffect)((()=>{o(!1)}),[n]);const i=e=>Number(`${e}`.slice(0,7));let a=[];const s=[];null==e||e.forEach(((e,n)=>{e.properties&&(a.push("id"),a=a.concat(Object.keys(e.properties)),s.push(Object.assign(Object.assign({},e.properties),{index:n,label:e.label,similarity:e[t]?i(e[t]):"-",id:e.id})))})),a=Array.from(new Set(a));const l=[{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.SerialNumber",dm:"序号"}),dataIndex:"index",key:"index",width:60,fixed:"left"},{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeName",dm:"节点名称"}),dataIndex:"label",key:"label",textWrap:"word-break",ellipsis:!0,fixed:"left",width:100},{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeId",dm:"节点 ID"}),dataIndex:"id",key:"id",textWrap:"word-break",ellipsis:!0,width:100},{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.CosineSimilarity",dm:"余弦相似度"}),dataIndex:"similarity",key:"similarity",textWrap:"word-break",width:120,sortOrder:r,sorter:(e,t)=>e.similarity-t.similarity}];a.forEach((e=>{l.push({title:e,dataIndex:e,key:e,width:120,textWrap:"word-break",ellipsis:!0})}));const c=e[1],u=e[e.length-1];return Ne().createElement(Ne().Fragment,null,Ne().createElement(Me.Tooltip,{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.DownloadCsv",dm:"下载 CSV"}),placement:"topRight"},Ne().createElement(ke,{style:{float:"right"},onClick:()=>{const e=$e("similarity_result");Xe({data:s,title:[Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.SerialNumber",dm:"序号"}),Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.NodeName",dm:"节点名称"}),Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.CosineSimilarity",dm:"余弦相似度"})].concat(a),titleForKey:["index","label","similarity"].concat(a)},e)}})),Ne().createElement("div",{className:"nodes-similarity-table-wrapper"},Ne().createElement("div",{className:"nodes-similarity-statistic"},Ne().createElement("div",null,Ne().createElement("span",null,Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.MaximumValue",dm:"最大值:"})),Ne().createElement("span",{className:"nodes-similarity-statistic-value"},i(c[t]),"（",null==c?void 0:c.label,"）")),Ne().createElement("div",null,Ne().createElement("span",null,Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.MinimumValue",dm:"最小值:"})),Ne().createElement("span",{className:"nodes-similarity-statistic-value"},i(u[t]),"（",null==u?void 0:u.label,"）"))),Ne().createElement(Me.Table,{dataSource:s,columns:l,size:"small",showSorterTooltip:{title:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.resultTable.Sort",dm:"排序"})},scroll:{x:200},onChange:(e,t,n,r)=>{"sort"===r.action&&o(n.order||!1)}})))};var en;!function(e){e.nodesConsineSimilarity="nodes-cosine-similarity"}(en||(en={}));const tn={id:"NodesSimilarity",name:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.info.NodeSimilarity",dm:"节点相似性"}),category:"algorithm-analysis",type:"GIAC_CONTENT",desc:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.info.CosineSimilarityBetweenNodesAnd",dm:"节点到选定种子节点的余弦相似性"}),cover:"http://xxxx.jpg",icon:"icon-one-degree",docs:"https://www.yuque.com/antv/gi/kayv86k5gu6dmi7p"},{GIAC_CONTENT_METAS:nn,deepClone:rn}=Ie.extra,on=rn(nn);on.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=tn.name,on.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=tn.icon;const an={info:tn,component:t=>{const{controlledValues:n,style:r={},onOpen:o}=t,{data:i,graph:a,updateHistory:s}=(0,Ie.useContext)(),[l,c]=(0,_e.useState)(en.nodesConsineSimilarity),[u,d]=(0,_e.useState)({nodes:[],edges:[]}),[h,f]=(0,_e.useState)(en.nodesConsineSimilarity),[p,g]=(0,_e.useState)({similarityRes:[],similarNodes:[]}),[v,m]=(0,_e.useState)(!1),[y,C]=(0,_e.useState)(null),[b,w]=(0,_e.useState)(!1),[x,E]=(0,_e.useState)(!1);let S=e=>{};(0,_e.useEffect)((()=>{d({nodes:(0,Oe.cloneDeep)(a.getNodes()).map((e=>e.getModel())),edges:(0,Oe.cloneDeep)(a.getEdges()).map((e=>{const t=e.getModel();return Object.assign(Object.assign({},t),{id:t.id||t.data.id})}))})}),[i]),(0,_e.useEffect)((()=>{if(n){const{seedNodeId:e,algorithm:t}=n;null==o||o(),C(e),f(t),T(t,e)}}),[n]);const I=(e,t)=>{s({componentId:"NodesSimilarity",type:"analyse",subType:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.NodeSimilarity",dm:"节点相似性"}),statement:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.AlgorithmSimilarityalgo",dm:"算法 {similarityAlgo}"},{similarityAlgo:h}),success:e,errorMsg:t,params:{algorithm:h,seedNodeId:y}})},T=(e,t)=>{E(!1),m(!0);const n=(({nodes:e=[],edges:t=[]})=>({nodes:e.map((e=>{const t=Object.assign({},e.data,e.data.properties);return delete t.id,{id:e.id,label:e.label||e.data.label,properties:t}})),edges:t.map((e=>Object.assign(Object.assign({},e),{id:e.id||e.data.id})))}))(i);if((e||h)===en.nodesConsineSimilarity){if(!a||a.destroyed)return void I(!1,Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.TheGraphInstanceDoesNot",dm:"图实例不存在"}));const e=(null==n?void 0:n.nodes)||[],r=null==e?void 0:e.find((e=>e.id===t||y));if(!r)return Me.message.info(Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeDoesNot",dm:"种子节点不存在"})),void I(!1,Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.TheSeedNodeSeednodeidDoes",dm:"种子节点{seedNodeId}不存在"},{seedNodeId:y}));const{allCosineSimilarity:o,similarNodes:i}=J(e,r,"properties");g({similarityRes:o,similarNodes:[r,...i]}),"cosineSimilarity",i.forEach((e=>{a.updateItem(e.id,{style:{keyshape:{size:Math.max(50*e.cosineSimilarity,30)}}})})),a.getEdges().forEach((e=>{e.refresh()})),I(!0)}else I(!1,`算法${e||h}不存在`)},L=e=>{E(!1);const t="string"==typeof e?e:e.target.value;C(t),a.findById(t)&&(a.updateItem(t,{style:{keyshape:{size:40}}}),a.getEdges().forEach((e=>{e.refresh()})))};return Ne().createElement("div",{style:Object.assign({},r)},Ne().createElement("div",{className:"nodes-similarity-wrapper"},Ne().createElement("div",null,Ne().createElement(Me.Row,{justify:"space-between"},Ne().createElement(Me.Col,{span:21},Ne().createElement("p",{className:"nodes-similarity-title"},Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.SelectASeedNode",dm:"选择种子节点"}))),Ne().createElement(Me.Col,{span:2,offset:1,style:{lineHeight:"32px",textAlign:"right"}},Ne().createElement(e.Z,{onClick:()=>{var e;e=[],a.getNodes().forEach((t=>{var n,r,o;const i=t.get("id"),s=null===(n=u.nodes)||void 0===n?void 0:n.find((e=>e.id===i));s&&!(null==e?void 0:e.includes(i))&&a.updateItem(t,{style:{keyshape:{size:null===(o=null===(r=s.style)||void 0===r?void 0:r.keyshape)||void 0===o?void 0:o.size}}})})),a.getEdges().forEach((e=>{e.refresh()})),g({similarityRes:[],similarNodes:[]}),c(en.nodesConsineSimilarity),w(!0)}}))),Ne().createElement(Me.Row,{justify:"space-between"},Ne().createElement(Me.Col,{span:21},Ne().createElement(Me.Input,{placeholder:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.SelectASeedNode",dm:"选择种子节点"}),style:{display:"block",margin:"0 0 30px 10px"},onChange:L,value:y})),Ne().createElement(Me.Col,{span:2,offset:1,style:{lineHeight:"32px",textAlign:"right"}},Ne().createElement(Qt,{style:{cursor:"pointer",color:x?"#1890ff":"rgba(0, 0, 0, 0.65)"},onClick:()=>{E(!0),a.off("node:click",S),S=e=>{E(!1);const{item:t}=e;t&&!t.destroyed&&L(t.getID())},a.once("node:click",S)}})))),Ne().createElement(Me.Button,{type:"primary",style:{width:"100%",marginTop:"12px"},onClick:()=>T()},Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.Analysis",dm:"分析"})),(()=>{if(!v)return;const{similarityRes:e,similarNodes:t}=p||{};return(null==e?void 0:e.length)?h===en.nodesConsineSimilarity?Ne().createElement("div",{className:"nodes-similarity-result-wrapper"},Ne().createElement("span",{className:"nodes-similarity-title"},Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.AnalysisResults",dm:"分析结果"})),Ne().createElement(Jt,{similarNodes:t,topReset:b,similarityKey:"cosineSimilarity"})):void 0:Ne().createElement(Me.Empty,{image:Me.Empty.PRESENTED_IMAGE_SIMPLE,description:Ye({id:"gi-assets-algorithm.src.NodesSimilarity.Component.NoDataAvailable",dm:"暂无数据"})})})()))},registerMeta:e=>Object.assign({},on)},sn=function(e){var t=(0,_e.useRef)(e);t.current=(0,_e.useMemo)((function(){return e}),[e]);var n=(0,_e.useRef)();return n.current||(n.current=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(this,e)}),n.current},ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var cn=function(e,t){return _e.createElement(De.Z,(0,Ae.Z)((0,Ae.Z)({},e),{},{ref:t,icon:ln}))};cn.displayName="ExclamationCircleOutlined";const un=_e.forwardRef(cn),dn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var hn=function(e,t){return _e.createElement(De.Z,(0,Ae.Z)((0,Ae.Z)({},e),{},{ref:t,icon:dn}))};hn.displayName="ArrowLeftOutlined";const fn=_e.forwardRef(hn);var pn=c(196),gn=c(942),vn=c.n(gn);const{addEdge:mn}=lt;class yn extends Ne().PureComponent{constructor(){super(...arguments),this.dragging=null,this.onOk=()=>{if(!this.dragging)return;const{options:e={}}=this.props,{onOk:t}=e,n=this.dragging.get("model"),{source:r,target:o}=n;null==t||t({source:r,target:o})},this.dragEdge=e=>{const{item:t,canvasX:n,canvasY:r}=e;t.getID()===tt&&((this.props.graph||this.context.graph).updateItem(t,{target:{x:n,y:r}}),this.dragging=t)},this.drop=e=>{var t,n;if(!this.dragging)return;const{item:r}=e;r&&!(null===(t=r.isCanvas)||void 0===t?void 0:t.call(r))&&"node"===(null===(n=r.getType)||void 0===n?void 0:n.call(r))||this.cancelAdding(),(this.props.graph||this.context.graph).updateItem(this.dragging,{id:`edge-${it}`,target:r.getID(),type:"graphin-line"}),this.onOk(),this.cancelAdding()},this.cancelAdding=()=>{const e=this.props.graph||this.context.graph;this.dragging=null,e.removeItem(tt)},this.handleAddRelation=()=>{const{currentItem:e}=this.props,t=this.props.graph||this.context.graph,n=null==e?void 0:e.get("id");mn(n,t)}}componentDidMount(){const e=this.props.graph||this.context.graph;e.on("edge:drag",this.dragEdge),e.on("drop",this.drop),e.on("click",this.cancelAdding)}componentWillUnmount(){const e=this.props.graph||this.context.graph;e.off("edge:drag",this.dragEdge),e.off("drop",this.drop),e.off("click",this.cancelAdding)}render(){const{name:e}=this.props;return Ne().createElement("a",{onClick:this.handleAddRelation},e)}}yn.defaultProps={options:{onOk:()=>{}}};const Cn=yn,bn={id:"PatternMatch",name:Ye({id:"gi-assets-algorithm.src.PatternMatch.info.PatternMatching",dm:"模式匹配"}),category:"algorithm-analysis",type:"GIAC_CONTENT",desc:Ye({id:"gi-assets-algorithm.src.PatternMatch.info.SelectGraphicalModelToFind",dm:"选定图模式，找到相似结构的子图"}),cover:"http://xxxx.jpg",icon:"icon-query-path",docs:"https://www.yuque.com/antv/gi/lggt0bz6w48zsd48"},wn="|SPLITOR|";var xn;!function(e){e.Active="active",e.Default="default",e.Selected="selected",e.Disable="disable",e.Highlight="highlight",e.Inactive="inactive"}(xn||(xn={}));const{GIAC_CONTENT_METAS:En,deepClone:Sn}=Ie.extra,In=Sn(En);In.GIAC_CONTENT.properties.GIAC_CONTENT.properties.title.default=bn.name,In.GIAC_CONTENT.properties.GIAC_CONTENT.properties.icon.default=bn.icon;const{Option:Tn}=Me.Select,{debounce:Ln}=lt,Mn=({color:e,pid:t,properties:n,visible:r,form:o,disabled:i,configColor:a=!0,deleteItem:s,openColorPanel:l=(()=>{}),emitPropertyConfigChange:c=(()=>{})})=>{const u=()=>{const e=o.getFieldsValue(),n=Object.keys(e).filter((n=>{var r,o;const i=null==e?void 0:e[n];return(null===(r=n.split(wn))||void 0===r?void 0:r[0])===(null===(o=t.split(wn))||void 0===o?void 0:o[0])&&!!i}));(null==n?void 0:n.length)>=3&&c(e)},d=(0,_e.useCallback)(Ln(u,500),[]);return(0,_e.useEffect)((()=>{o.setFieldsValue({[`${t}${wn}color`]:e})}),[]),n&&r?Ne().createElement(Me.Row,{className:"kg-style-config-property-item",key:t,style:a?{}:{width:"100%"}},Ne().createElement(Me.Col,{span:8},Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.CannotBeEmpty",dm:"不可为空"})}],name:`${t}${wn}name`},Ne().createElement(Me.Select,{className:"kg-style-config-property-select",size:"small",placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.SelectProperties",dm:"选择属性"}),onChange:u,disabled:i},n.map((e=>Ne().createElement(Tn,{value:e,key:e},e)))))),Ne().createElement(Me.Col,{span:a?5:6,offset:1},Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.CannotBeEmpty",dm:"不可为空"})}],name:`${t}${wn}operator`},Ne().createElement(Me.Select,{className:"kg-style-config-property-select",size:"small",onChange:u,dropdownMatchSelectWidth:!1,disabled:i},[">",">=","<=","<","=","!=","like","unlike"].map((e=>Ne().createElement(Tn,{value:e,key:e},e)))))),Ne().createElement(Me.Col,{span:a?5:6,offset:1},Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.CannotBeEmpty",dm:"不可为空"})}],name:`${t}${wn}value`},Ne().createElement(Me.Input,{style:{width:"100%",height:"24px"},placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.StyleConfigPropertyItem.EnterAttributeValues",dm:"输入属性值"}),onChange:d,disabled:i}))),a&&Ne().createElement(Me.Col,{span:2,offset:1},e?Ne().createElement("div",{className:"kg-style-config-property-item-color",style:{backgroundColor:e},onClick:e=>i?{}:null==l?void 0:l(e,t)}):Ne().createElement("i",{className:"icon-ic_opacity iconfont kg-style-config-property-item-no-color",onClick:e=>l(e,t)})),Ne().createElement(Me.Col,{span:1,offset:a?0:1},Ne().createElement(St.Z,{onClick:()=>s(t)}))):Ne().createElement("div",{key:t})},{Option:On}=Me.Select,{createUuid:_n}=lt,Nn=({type:e,itemData:t,visible:n,nodeProperties:r,edgeProperties:o,nodeTypes:i,edgeTypes:a,container:s,saveItem:l,onClose:c})=>{var u;const[d]=Me.Form.useForm(),{getFieldsValue:h,setFieldsValue:f,validateFields:p,resetFields:g}=d,[v,m]=(0,_e.useState)(),[y,C]=(0,_e.useState)(),[b,w]=(0,_e.useState)(),[x,E]=(0,_e.useState)([]),[S,I]=(0,_e.useState)([]),[T,L]=(0,_e.useState)([]),[M,O]=(0,_e.useState)(),_=(e,t)=>{switch(t){case"source":m(e),d.setFieldsValue({"edge.edgeType":null});break;case"target":C(e),d.setFieldsValue({"edge.edgeType":null});break;case"node":w(e)}I([])},N=(n=void 0)=>{I((r=>{const o=[...r];let i;o.forEach((e=>{e.color&&(i=e.color)})),i="#2E71D6"===i?"#D97825":"#2E71D6";const a=n||_n();return o.push({id:`${a}${wn}${e}${wn}${t.id}`,color:i,visible:!0}),o}))},A=e=>{const t=[...S];t.forEach(((n,r)=>{n.id===e&&t.splice(r,1)}));const n=h();delete n[`${e}${wn}name`],delete n[`${e}${wn}value`],delete n[`${e}${wn}operator`],delete n[`${e}${wn}color`],f(Object.assign({},n)),I(t)},R=()=>{I([]),m(void 0),C(void 0),w(void 0),O(void 0),c()};(0,_e.useEffect)((()=>{O(void 0);const e=v||(null==t?void 0:t.sourceNodeType),n=y||(null==t?void 0:t.targetNodeType);if(e&&n){const t=[];a.forEach((r=>{const{sourceNodeType:o,targetNodeType:i}=r;o===e&&i===n&&t.push(r)})),E(t)}else E([])}),[v,y,null==t?void 0:t.id]),(0,_e.useEffect)((()=>{var n;(null==t?void 0:t.sourceNodeType)&&m(null==t?void 0:t.sourceNodeType),(null==t?void 0:t.targetNodeType)&&C(null==t?void 0:t.targetNodeType),I([]),(null==t?void 0:t.rules)&&(null===(n=null==t?void 0:t.rules)||void 0===n||n.forEach((n=>{const r=_n(),o=`${r}${wn}${e}${wn}${t.id}`;setTimeout((()=>{f({[`${o}${wn}name`]:n.name,[`${o}${wn}operator`]:n.rule,[`${o}${wn}value`]:n.value})}),0),N(r)})))}),[null==t?void 0:t.data,null==t?void 0:t.rules]),(0,_e.useEffect)((()=>{O("edge"===e?null==t?void 0:t.edgeType:void 0),w("node"===e?null==t?void 0:t.nodeType:void 0),g()}),[null==t?void 0:t.id]),(0,_e.useEffect)((()=>{b&&L(Array.from(r[b]))}),[b]);const D=x&&(null==x?void 0:x.length),P=Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.CannotBeEmpty",dm:"不可为空"})}],name:"edge.edgeType",key:"edge.edgeType"},Ne().createElement(Me.Select,{showSearch:!0,placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.PleaseSelect",dm:"请选择"}),style:{width:316,marginTop:8},onSelect:e=>{L(Array.from(o[e])),O(e)},dropdownMatchSelectWidth:!1,disabled:!D,defaultValue:(null==t?void 0:t.edgeType)?`${null==t?void 0:t.sourceNodeType}_${null==t?void 0:t.edgeType}_${null==t?void 0:t.targetNodeType}`:void 0},null==x?void 0:x.map((e=>Ne().createElement(On,{value:e.key,key:e.key},e.content))))),k="edge"===e?(null==x?void 0:x.length)&&(M||(null==t?void 0:t.edgeType)):!!b||(null==t?void 0:t.edgeType),B=Ne().createElement("div",null,null==S?void 0:S.map((e=>Ne().createElement(Mn,{pid:e.id,properties:T,deleteItem:A,color:null==e?void 0:e.color,visible:null==e?void 0:e.visible,form:d,disabled:!k,configColor:!1}))),(null===(u=null==S?void 0:S.filter((e=>e.visible)))||void 0===u?void 0:u.length)<2&&Ne().createElement(Me.Button,{className:"kg-style-config-add-property-button",type:"dashed",onClick:()=>{N()},disabled:!k},Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.AddAttributes",dm:"增加属性"}))),F=t=>Ne().createElement(Ne().Fragment,null,Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.AttributeCondition",dm:"属性条件"}),Ne().createElement("span",{className:"kg-pattern-match-tip"},Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.Optional",dm:"可选"})),Ne().createElement("br",null),k?B:Ne().createElement(Me.Tooltip,{title:"edge"===e&&(null==x?void 0:x.length)&&M||"node"===t&&(null==i?void 0:i.length)&&b?"":`请先选择${"node"===t?"节点":"边"}类型`},B)),j=e=>{var n;return Ne().createElement(Ne().Fragment,null,Ye("source"===e?{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.StartingPoint",dm:"起点"}:{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.EndPoint",dm:"终点"}),(null==t?void 0:t[`${e}NodeType`])?Ne().createElement("span",null," ",":"," ",(null===(n=i.find((n=>n.key===(null==t?void 0:t[`${e}NodeType`]))))||void 0===n?void 0:n.content)||(null==t?void 0:t[`${e}NodeType`])," ",Ne().createElement("br",null),Ne().createElement("br",null)):Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.CannotBeEmpty",dm:"不可为空"})}],name:`edge.${e}NodeType`,key:`edge.${e}NodeType`},Ne().createElement(Me.Select,{showSearch:!0,placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.PleaseSelect",dm:"请选择"}),style:{width:316,marginTop:8},onSelect:t=>_(t,e),dropdownMatchSelectWidth:!1},i.map((e=>Ne().createElement(On,{value:e.key,key:e.key},e.content))))))},z=Ne().createElement(Me.Form,{form:d,name:"edge"},j("source"),j("target"),Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.EdgeType",dm:"边类型"}),Ne().createElement("br",null),D?P:Ne().createElement(Me.Tooltip,{title:Ye(x?{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.TheEdgeTypeDoesNot",dm:"起点类型与终点类型之间不存在边类型"}:{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.SelectTheStartAndEnd",dm:"请先选择起点与终点的类型"})},P),F("edge")),H=Ne().createElement(Me.Form,{form:d,name:"node"},Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.NodeType",dm:"节点类型"}),Ne().createElement(Me.Form.Item,{rules:[{required:!0,message:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.CannotBeEmpty",dm:"不可为空"})}],name:"node.nodeType",key:"node.nodeType"},Ne().createElement(Me.Select,{showSearch:!0,placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.PleaseSelect",dm:"请选择"}),style:{width:316,marginTop:8},onSelect:e=>_(e,"node"),dropdownMatchSelectWidth:!1,defaultValue:null==t?void 0:t.nodeType},i.map((e=>Ne().createElement(On,{value:e.key,key:e.key},e.content))))),F("node"));let W="edge"===e?z:H,G=Ye("edge"===e?{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.EditEdge",dm:"编辑边"}:{id:"gi-assets-algorithm.src.PatternMatch.editDrawer.EditPoint",dm:"编辑点"});t||(W=Ne().createElement(Ne().Fragment,null),G="");const U="edge"===e&&!M&&!(null==t?void 0:t.edgeType);return Ne().createElement(Me.Drawer,{title:G,visible:n,width:364,closable:!0,onClose:R,mask:!1,style:{textAlign:"left"},footerStyle:{textAlign:"right"},getContainer:s||!1,footer:Ne().createElement(Ne().Fragment,null,Ne().createElement(Me.Button,{onClick:R},Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.Cancel",dm:"取消"})),Ne().createElement(Me.Tooltip,{title:U?Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.TheRelationshipTypeCannotBe",dm:"关系类型不可为空"}):"",placement:"topRight"},Ne().createElement(Me.Button,{type:"primary",style:{marginLeft:"8px"},onClick:()=>{const n=h();p().then((r=>{const o={id:t.id,data:{},rules:[]},i={};n&&Object.keys(n).forEach((t=>{const r="node.nodeType"===t?b:n[t];if(void 0!==r&&("node"===e&&"node.nodeType"===t?o.nodeType=r:"edge"===e&&"edge.edgeType"===t?o.edgeType=r.split(wn)[1]:"edge"===e&&("edge.sourceNodeType"===t?o.sourceNodeType=r:"edge.targetNodeType"===t&&(o.targetNodeType=r)),4===t.split(wn).length)){const[e,n,o,a]=t.split(wn);switch(i[e]||(i[e]={}),a){case"name":i[e].name=r,i[e].key=r;break;case"operator":i[e].rule=r;break;case"value":i[e].value=r}}})),Object.values(i).forEach((e=>{o.rules.push(e)})),null==l||l(e,o)})),R()},disabled:U},Ye({id:"gi-assets-algorithm.src.PatternMatch.editDrawer.Ok",dm:"确定"}))))},W)},An=[{id:"template-0",name:"2-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"}],edges:[{source:"node-1",target:"node-2"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Lxr3SqrbBoYAAAAAAAAAAAAAARQnAQ"},{id:"template-1",name:"3-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hg-JR5jqtv8AAAAAAAAAAAAAARQnAQ"},{id:"template-2",name:"4-node-path",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"},{id:"node-4"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-4"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MtiXQ7NXhGEAAAAAAAAAAAAAARQnAQ"},{id:"template-3",name:"3-node-cycle",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-1"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HnRpTYgqPpcAAAAAAAAAAAAAARQnAQ"},{id:"template-4",name:"4-node-cycle",data:{nodes:[{id:"node-1"},{id:"node-2"},{id:"node-3"},{id:"node-4"}],edges:[{source:"node-1",target:"node-2"},{source:"node-2",target:"node-3"},{source:"node-3",target:"node-4"},{source:"node-4",target:"node-1"}]},screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Vri_TbluXgEAAAAAAAAAAAAAARQnAQ"}],Rn=(e,t,n,r={})=>(null==t?void 0:t.map((t=>{var o;const i=t[`${e}Type`];let a={};i&&(a=n[`${e}s`].find((e=>e.groupName===`${i.toUpperCase()} TYPE`))||a);const{color:s="#ccc",size:l=("node"===e?30:1)}=a.props||{},c=Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style),{keyshape:{size:l,fill:"node"===e?s:void 0,stroke:s},label:"string"==typeof t.label?{value:t.label}:(null===(o=t.style)||void 0===o?void 0:o.label)||t.label})});if("edge"===e){const e=r[t.edgeType];e&&(c.sourceNodeType=e.sourceNodeType,c.targeteEdgeType=e.targetNodeType)}return c})))||[],{TabPane:Dn}=Me.Tabs,{Search:Pn}=Me.Input,{Header:kn,Sider:Bn,Content:Fn}=Me.Layout,{ClickSelect:jn,DragCanvas:zn,ZoomCanvas:Hn,DragNode:Wn,DragCombo:Gn,LassoSelect:Un}=Te.Behaviors,{breadthFirstSearch:Vn}=Se,{createUuid:Yn,fittingString:$n,focusNodeY:Xn}=lt,{deepClone:qn}=Ie.extra;let Kn=0;const Zn={nodes:[],edges:[]},Qn=({visible:e,patternInfo:t,nodeProperties:n,edgeProperties:r,nodeTypes:o,edgeTypes:i,schemaEdgeMap:a,schemaNodeMap:s,setVisible:l,savePattern:c})=>{var u,d;const{schemaData:h,data:f,config:p}=(0,Ie.useContext)(),g=(0,_e.useRef)(),v=(0,_e.useRef)(),m=Ne().createRef(),[y,C]=(0,_e.useState)((null==t?void 0:t.data)||{nodes:[],edges:[]}),[b,w]=(0,_e.useState)([]),[x,E]=(0,_e.useState)({type:"node",visible:!1,item:null,x:0,y:0}),[S,I]=(0,_e.useState)({}),[T,L]=(0,_e.useState)("node"),[M,O]=(0,_e.useState)(),_=()=>{var e;const t=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&t.findAllByState("node",xn.Active).forEach((e=>{t.clearItemStates(e,xn.Active),t.updateItem(e,{})}))};(0,_e.useEffect)((()=>{var t,r;const o=null===(t=null==g?void 0:g.current)||void 0===t?void 0:t.graph;if(_(),e&&o&&!o.destroyed){const e=g.current.graphDOM;o.changeSize(e.clientWidth,e.clientHeight);const t=null===(r=null==v?void 0:v.current)||void 0===r?void 0:r.graph,i=v.current.graphDOM;i.style.backgroundColor="rgba(0, 0, 0, 0)",t.changeSize(i.clientWidth,i.clientHeight);const a=(0,Oe.cloneDeep)(h);a.nodes.forEach((e=>{const{nodeType:t}=e;e.id=`${t}-${Yn()}`,e.originLabel=t,e.ellipsedLabel=$n(t,140,12),e.style=Object.assign(Object.assign({},e.style),{label:{value:e.ellipsedLabel}})}));const s=a.nodes.filter((e=>!!n[e.nodeType]));w(Rn("node",s,p))}else e||L("node")}),[e]),(0,_e.useEffect)((()=>{var e;const t=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&(1===(null==b?void 0:b.length)?setTimeout((()=>{t.updateItem(b[0].id,{x:30,y:50})}),0):t.updateLayout({type:"grid",cols:3,width:200,nodeSize:50}))}),[b]),(0,_e.useEffect)((()=>{var e,t;const n=null===(e=null==v?void 0:v.current)||void 0===e?void 0:e.graph;n.on("node:click",(e=>{_(),Kn+=1;const t=e.item.getModel(),n=Yn(),r=Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style),{label:{value:`${t.nodeType}-n${Kn}`}}),id:n});r.id=n,delete r.x,delete r.y,C((e=>({nodes:[...e.nodes].concat([r]),edges:Te.Utils.processEdges(e.edges)})))}));const r=null===(t=null==g?void 0:g.current)||void 0===t?void 0:t.graph;r.needHighlightRelative=!0,r.on("node:contextmenu",(e=>{e.preventDefault();const t=e.item.getModel(),n=r.getCanvasByPoint(t.x,t.y),o=r.getContainer().offsetTop,i=r.getContainer().offsetLeft;E({type:"node",visible:!0,item:e.item,x:n.x+i,y:n.y+o})})),r.on("edge:contextmenu",(e=>{e.preventDefault();const t=r.getCanvasByPoint(e.x,e.y),n=r.getContainer().offsetTop,o=r.getContainer().offsetLeft;E({type:"edge",visible:!0,item:e.item,x:t.x+o,y:t.y+n})})),r.on("canvas:click",(e=>{E((e=>Object.assign(Object.assign({},e),{visible:!1}))),I({})})),r.on("node:click",(e=>{I({type:"node",id:e.item.getID()})})),r.on("edge:click",(e=>{const t=e.item.getModel();I({type:"edge",id:t.id})})),n.on("node:mouseenter",(e=>{var t,r,o;n.updateItem(e.item,{style:{label:{value:(null===(o=null===(r=(t=e.item).getModel)||void 0===r?void 0:r.call(t))||void 0===o?void 0:o.originLabel)||""}}})})),n.on("node:mouseleave",(e=>{var t,r,o;n.updateItem(e.item,{style:{label:{value:(null===(o=null===(r=(t=e.item).getModel)||void 0===r?void 0:r.call(t))||void 0===o?void 0:o.ellipsedLabel)||""}}})}))}),[]),(0,_e.useEffect)((()=>{const e=(null==t?void 0:t.data)||Zn;C({nodes:Rn("node",e.nodes,p),edges:Te.Utils.processEdges(Rn("edge",e.edges,p,a))})}),[null==t?void 0:t.data]),(0,_e.useEffect)((()=>{const n=e&&(null==t?void 0:t.data)||Zn;C({nodes:Rn("node",n.nodes,p),edges:Te.Utils.processEdges(Rn("edge",n.edges,p,a))})}),[e]);const N=()=>{l(!1)},A=(e,t,n)=>{const r=n[`${e}s`].find((e=>e.id===t.id));if(!r)return{};const o=(null==t?void 0:t[`${e}Type`])||r[`${e}Type`];let i,l={},c=!1;const u=vn()(r,t);o&&(u.virtual=!1,l=("node"===e?s:a)[o]);const d={nodes:[],edges:[]};"node"===e?d.nodes=[u]:(l&&(u.edgeType=l.edgeType,u.style=Object.assign(Object.assign({},u.style),{label:{value:l.edgeType}}),u.label=l.edgeType),u.type="graphin-line",d.nodes=n.nodes,d.edges=[u]);let{nodes:h,edges:f}=qn(d);h=Rn("node",h,p),f=Rn("edge",f,p,a);let g={nodes:[],edges:[]};return"node"===e?(i=h[0],g={nodes:[],edges:n.edges},o!==r.nodeType&&(Kn+=1,i.style=Object.assign(Object.assign({},i.style),{label:{value:`${o}-n${Kn}`}}),g.edges.forEach(((e,t)=>{if(e.source===i.id||e.target===i.id){c=!0;const n={id:e.id,source:e.source,target:e.target,virtual:!0,type:"graphin-line",sourceNodeType:e.source===i.id?o:e.sourceNodeType,targetNodeType:e.target===i.id?o:e.targetNodeType},r=Rn("edge",[n],p,a);g.edges.splice(t,1,r[0])}})))):(i=f[0],g={nodes:n.nodes,edges:[]}),i.rules=t.rules||i.rules,n[`${e}s`].forEach((n=>{g[`${e}s`].push(n.id===t.id?i:n)})),{newGraphData:g,oldDataItem:r,newItem:i,hasRelated:c}},R=e=>{var t,n,r,o;const i=null===(t=x.item)||void 0===t?void 0:t.getModel(),a=null===(n=null==g?void 0:g.current)||void 0===n?void 0:n.graph;if(a&&!a.destroyed&&i){switch(e){case"removeNode":{const e=null===(r=a.findAllByState("node",xn.Selected))||void 0===r?void 0:r.map((e=>e.getID()));(null==e?void 0:e.length)||e.push(i.id),C((t=>({nodes:t.nodes.filter((t=>!e.includes(t.id))),edges:Te.Utils.processEdges(t.edges.filter((t=>!e.includes(t.target)&&!e.includes(t.source))))}))),I({});break}case"removeEdge":{const e=null===(o=a.findAllByState("edge",xn.Selected))||void 0===o?void 0:o.map((e=>e.getID()));(null==e?void 0:e.length)||e.push(i.id),C((t=>({nodes:t.nodes,edges:Te.Utils.processEdges(t.edges.filter((t=>!e.includes(t.id))))}))),I({});break}}E((e=>Object.assign(Object.assign({},e),{visible:!1})))}};return(0,_e.useEffect)((()=>{var e;if(null==S?void 0:S.type){const t=null===(e=null==y?void 0:y[`${null==S?void 0:S.type}s`])||void 0===e?void 0:e.find((e=>e.id===(null==S?void 0:S.id)));O(t)}else O(void 0)}),[S]),Ne().createElement(Me.Layout,{className:"kg-pattern-match-editor-container",style:{display:e?"block":"none"}},Ne().createElement(kn,{className:"kg-pattern-match-editor-header"},Ne().createElement(Me.Row,null,Ne().createElement(Me.Col,{span:4,onClick:N},Ne().createElement(fn,{className:"kg-pattern-match-editor-back"}),Ne().createElement("span",{className:"kg-pattern-match-editor-title"},null==t?void 0:t.title)),Ne().createElement(Me.Col,{span:4,offset:16},Ne().createElement(Me.Button,{onClick:N},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.Cancel",dm:"取消"})),Ne().createElement(Me.Button,{className:"kg-pattern-match-editor-save",type:"primary",onClick:()=>{var e;if(!(null===(e=null==y?void 0:y.nodes)||void 0===e?void 0:e.length))return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode",dm:"保存模式失败，模式不可为空。若希望放弃编辑器，请点击“取消”按钮"}));const n=y.nodes.filter((e=>!e.nodeType));if(null==n?void 0:n.length)return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode.2",dm:"保存模式失败，创建边失败。请为所有节点和边指定类型"}));const r=y.edges.filter((e=>!e.edgeType));if(null==r?void 0:r.length)return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToSaveTheMode.2",dm:"保存模式失败，创建边失败。请为所有节点和边指定类型"}));const o={};Vn(y,y.nodes[0].id,{enter:({current:e})=>{o[e]=!0}},!1),Object.keys(o).length<y.nodes.length?Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateTheSchema",dm:"创建模式失败。模式必须是连通的"})):(c(null==t?void 0:t.id,y),N())}},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.Save",dm:"保存"}))))),Ne().createElement(Me.Divider,{className:"kg-pattern-match-editor-divider"}),Ne().createElement(Me.Layout,{className:"kg-pattern-match-editor-content"},Ne().createElement(Bn,{className:"kg-pattern-match-editor-left-sider",width:240},Ne().createElement(Me.Tabs,{className:"kg-pattern-match-editor-adder",defaultActiveKey:"node",activeKey:T,onChange:e=>L(e)},Ne().createElement(Dn,{tab:Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.AddNode",dm:"添加节点"}),key:"node"},Ne().createElement(Pn,{placeholder:Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.SearchNode",dm:"搜索节点"}),onSearch:e=>{var t;_();const n=e.toLowerCase(),r=b.find((t=>t.nodeType===e||t.nodeType.toLowerCase()===n));if(r){const e=null===(t=null==v?void 0:v.current)||void 0===t?void 0:t.graph;if(!e||e.destroyed)return;const n=e.findById(r.id);n&&(Xn(e,n,e.get("height"),50),e.setItemState(n,xn.Active,!0))}},style:{width:200}}),Ne().createElement("div",{className:"kg-pattern-match-schema-graph-wrapper"},Ne().createElement(Le(),{data:{nodes:b,edges:[]},ref:v,layout:{type:"grid",cols:3,width:200,nodeSize:50},animate:!1,modes:{default:[{type:"scroll-canvas",direction:"y",scalableRange:-.99}]}},Ne().createElement(jn,{disabled:!0}),Ne().createElement(Hn,{disabled:!0}),Ne().createElement(zn,{disabled:!0}),Ne().createElement(Un,{disabled:!0}),Ne().createElement(Wn,{disabled:!0}),Ne().createElement(Gn,{disabled:!0})))),Ne().createElement(Dn,{tab:Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.AddTemplate",dm:"添加模版"}),key:"template",style:{height:"100%"}},Ne().createElement("div",{className:"kg-pattern-match-template-wrapper"},An.map((e=>Ne().createElement("div",{className:"kg-pattern-match-template",key:e.id,onClick:()=>(e=>{const t=(e=>{const t={nodes:[],edges:[]},n={};return e.nodes.forEach((e=>{const r=Object.assign(Object.assign({},e),{id:`${e.id}${Yn()}`,style:{keyshape:{stroke:"#959595",fill:"#959595"}}});n[e.id]=r,t.nodes.push(r)})),e.edges.forEach((e=>{t.edges.push(Object.assign(Object.assign({},e),{id:e.id?`${e.id}${Yn()}`:Yn(),type:"graphin-line",source:n[e.source].id,target:n[e.target].id,name:"",style:{keyshape:{stroke:"#959595",lineDash:[5,5]}}}))})),t})(e.data);C((e=>({nodes:e.nodes.concat(t.nodes),edges:Te.Utils.processEdges(e.edges.concat(t.edges))})))})(e),style:{backgroundImage:`url("${e.screenshot}")`,backgroundSize:"100%"}}))))))),Ne().createElement(Fn,null,Ne().createElement(Le(),{data:y,ref:g,layout:{type:"dagre",rankdir:"lr"},animate:!1,minZoom:.1,modes:{default:["kg-drag-node","kg-zoom-canvas","kg-click","kg-hover"],edit:["kg-drag-canvas","kg-zoom-canvas","kg-drag-node","kg-link-edge"]}},Ne().createElement(jn,{disabled:!0}),Ne().createElement(Hn,{disabled:!0}),Ne().createElement(zn,null),Ne().createElement(Un,null),Ne().createElement(Wn,{disabled:!0}),Ne().createElement(Gn,{disabled:!0}),Ne().createElement("div",{className:"graph-contextmenu-content",style:{width:"80px",visibility:x.visible?"visible":"hidden",position:"absolute",top:`${x.y}px`,left:`${x.x}px`},ref:m},"node"===x.type?Ne().createElement(Me.Menu,null,Ne().createElement(Me.Menu.Item,{key:"removeNode",onClick:()=>R("removeNode")},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteANode",dm:"删除节点"})),Ne().createElement(Me.Menu.Item,{key:"addRelation",onClick:()=>R("addRelation")},Ne().createElement(Cn,{graph:null===(u=null==g?void 0:g.current)||void 0===u?void 0:u.graph,currentItem:x.item,options:{onOk:({source:e,target:t})=>{let n,o;y.nodes.forEach((r=>{r.id!==e?r.id===t&&(o=r.nodeType):n=r.nodeType}));let i=!1;if(n&&o?Object.keys(r).forEach((e=>{const[t,r,a]=e.split(wn)||[];t===n&&a===o&&(i=!0)})):i=!0,!i)return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.FailedToCreateAnEdge",dm:"创建边失败。起点类型 {sourceType} 与终点类型 {targetType} 之间不存在边类型"},{sourceType:n,targetType:o}));const a=`${e}-${t}-${(0,pn.EL)()}`,s={id:a,source:e,target:t,type:"graphin-line"};I({type:"edge",id:a}),setTimeout((()=>{O(s)}),0),C((e=>{const t=[...e.edges];return t.push(s),{nodes:e.nodes,edges:Te.Utils.processEdges(t)}}))}},name:Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.AddEdge",dm:"添加边"})}))):Ne().createElement(Me.Menu,null,Ne().createElement(Me.Menu.Item,{key:"removeEdge",onClick:()=>R("removeEdge")},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternEditor.DeleteEdge",dm:"删除边"}))))))),Ne().createElement(Nn,Object.assign({},S,{itemData:M,visible:!!(null==S?void 0:S.type),nodeProperties:n,edgeProperties:r,nodeTypes:o,edgeTypes:i,container:null===(d=null==g?void 0:g.current)||void 0===d?void 0:d.graphDOM,saveItem:(e,t)=>{C((n=>{let r,o,i,s=n[`${e}s`].find((e=>e.id===t.id));return s?("node"===e?s.nodeType!==t.nodeType?(({newGraphData:r,oldDataItem:s,newItem:o,hasRelated:i}=A(e,t,n)),i&&(r.edges=Rn("edge",r.edges,p,a))):(s.rules=t.rules,r={nodes:n.nodes,edges:n.edges}):"edge"===e&&(r={nodes:n.nodes,edges:Te.Utils.processEdges(n.edges)},t.sourceNodeType&&(r=A("node",{id:s.source,nodeType:t.sourceNodeType},r).newGraphData),t.targetNodeType&&(r=A("node",{id:s.target,nodeType:t.targetNodeType},r).newGraphData),({newGraphData:r,oldDataItem:s,newItem:o}=A(e,t,r)),o.sourceNodeType=t.sourceNodeType||s.sourceNodeType,o.targetNodeType=t.targetNodeType||s.targetNodeType,r.edges=Te.Utils.processEdges(Rn("edge",r.edges,p,a))),r||n):n}))},onClose:()=>{I({})}})))},Jn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var er=function(e,t){return _e.createElement(De.Z,(0,Ae.Z)((0,Ae.Z)({},e),{},{ref:t,icon:Jn}))};er.displayName="DownOutlined";const tr=_e.forwardRef(er),{exportGraphData:nr}=lt,{ClickSelect:rr}=Te.Behaviors,or=({id:e,data:t,schemaEdgeMap:n,editPattern:r,extractPattern:o,importData:i})=>{var a,s,l,c;const{config:u}=(0,Ie.useContext)(),d=(0,_e.useRef)();(0,_e.useEffect)((()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&(t.once("afterlayout",(e=>{t.fitView()})),t.fitView(),t.get("canvas").set("localRefresh",!1))}),[t]),(0,_e.useEffect)((()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&t.changeSize(456,246)}),[null===(s=null===(a=null==d?void 0:d.current)||void 0===a?void 0:a.graph)||void 0===s?void 0:s.get("width"),null===(c=null===(l=null==d?void 0:d.current)||void 0===l?void 0:l.graph)||void 0===c?void 0:c.get("height")]);const h=[Ne().createElement(Me.Menu.Item,{onClick:()=>null==r?void 0:r(e)},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.EditMode",dm:"编辑模式"})),Ne().createElement(Me.Menu.Item,{onClick:()=>null==o?void 0:o(e)},Ne().createElement(Me.Tooltip,{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.DragOrClickTheContent",dm:"从主图上拖拽圈选或点选内容并抽取为模式"})},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.ExtractionMode",dm:"提取模式"}))),Ne().createElement(Me.Menu.Item,null,Ne().createElement(Me.Upload,{accept:".json,.txt",onChange:t=>{const{file:n}=t,{status:r,type:o,name:a,originFileObj:s}=n||{};if("uploading"===r)if("json"===o||a.includes(".json")){const t=new FileReader;t.onload=()=>{if("string"==typeof t.result){const n=JSON.parse(t.result);null==i||i(n,e)}},t.readAsText(s)}else Me.message.error(Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.PleaseUploadDataInJson",dm:"请上传 JSON 格式的数据"}))},fileList:[]},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.ImportMode",dm:"导入模式"})))],f=h.concat(Ne().createElement(Me.Menu.Item,{onClick:()=>{var e;const t=null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.graph;t&&!t.destroyed&&nr(t.save(),"pattern-data")}},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.DownloadMode",dm:"下载模式"}))),p=Ne().createElement(Me.Menu,null,h),g=Ne().createElement(Me.Menu,null,f),v=(0,_e.useMemo)((()=>t?((e,t,n)=>({nodes:Rn("node",e.nodes,t),edges:Te.Utils.processEdges(Rn("edge",e.edges,t,n))}))(t,u,n):{nodes:[],edges:[]}),[t]);return Ne().createElement("div",{className:"kg-pattern-pane-content"},t?Ne().createElement("div",{className:"kg-pattern-pane-graph"},Ne().createElement(Me.Dropdown,{overlay:g,className:"kg-pattern-pane-edit"},Ne().createElement("a",{onClick:e=>e.preventDefault()},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.BuildMode",dm:"构建模式"}),Ne().createElement(tr,null))),Ne().createElement(Le(),{width:388,height:246,data:v,ref:d,animate:!1,minZoom:.001,fitView:!0},Ne().createElement(rr,{disabled:!0}))):Ne().createElement(Me.Empty,{className:"kg-pattern-empty",image:Me.Empty.PRESENTED_IMAGE_SIMPLE,description:Ne().createElement("span",null,Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.NoMode",dm:"暂无模式"}),Ne().createElement(Me.Dropdown,{overlay:p},Ne().createElement("a",{onClick:e=>e.preventDefault()},Ye({id:"gi-assets-algorithm.src.PatternMatch.patternPane.BuildMode",dm:"构建模式"}),Ne().createElement(tr,null))))}))},ir=({matches:e=[]})=>{const{graph:t}=(0,Ie.useContext)(),n=()=>{t.findAllByState("node",xn.Active).concat(t.findAllByState("edge",xn.Active)).forEach((e=>{t.setItemState(e,xn.Active,!1)}))};return Ne().createElement("div",{className:"kg-pattern-match-result-wrapper"},Ne().createElement("p",{className:"kg-pattern-match-result-title"},Ye({id:"gi-assets-algorithm.src.PatternMatch.resultTable.PatternMatchingResultList",dm:"模式匹配结果列表"})),Ne().createElement(Me.Table,{dataSource:e.map(((e,t)=>{var n,r;return{key:`${t}`,index:t+1,nodeNum:(null===(n=e.nodes)||void 0===n?void 0:n.length)||0,edgeNum:(null===(r=e.edges)||void 0===r?void 0:r.length)||0}})),columns:[{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.resultTable.SerialNumber",dm:"序号"}),dataIndex:"index",key:"index",width:60},{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfNodes",dm:"节点数量"}),dataIndex:"nodeNum",key:"nodeNum"},{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.resultTable.NumberOfEdges",dm:"边数量"}),dataIndex:"edgeNum",key:"edgeNum"}],size:"small",style:{marginTop:"16px"},showSorterTooltip:{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.resultTable.Sort",dm:"排序"})},onRow:r=>({onMouseEnter:()=>(r=>{var o,i,a,s;n(),null===(i=null===(o=e[r.index-1])||void 0===o?void 0:o.nodes)||void 0===i||i.forEach((e=>{t.setItemState(e.id,xn.Active,!0)})),null===(s=null===(a=e[r.index-1])||void 0===a?void 0:a.edges)||void 0===s||s.forEach((e=>{t.setItemState(e.id,xn.Active,!0)}))})(r),onMouseLeave:n})}))};const{confirm:ar}=Me.Modal,{TabPane:sr}=Me.Tabs,{GADDI:lr,breadthFirstSearch:cr}=Se,{createUuid:ur,clearItemsStates:dr,fittingString:hr}=lt,fr="kg-pattern-match-extract-message",pr="kg-pattern-match-extract-mode-canvas";let gr=1,vr={width:500,height:500},mr=!1;const yr={NodesClustering:qt,NodesSimilarity:an,CommunityDetection:gt,NodeImportance:Wt,PatternMatch:{info:bn,component:({style:e,controlledValues:t,onClose:n,onOpen:r,options:o={}})=>{var i;const{onGraphEditorVisibleChange:a,onExtractModeChange:s,exportPattern:l,exportButton:c}=o,{graph:u,data:d,schemaData:h,updateHistory:f}=(0,Ie.useContext)(),[p,g]=(0,_e.useState)("1"),[v,m]=(0,_e.useState)(!1),[y,C]=(0,_e.useState)([]),[b,w]=(0,_e.useState)([]),[x,E]=(0,_e.useState)(!1),[S,I]=(0,_e.useState)(!1),[T,L]=(0,_e.useState)({}),[M,O]=(0,_e.useState)({}),[_,N]=(0,_e.useState)([]),[A,R]=(0,_e.useState)([]),[D,P]=(0,_e.useState)({}),[k,B]=(0,_e.useState)({}),F=(0,_e.useMemo)((()=>({1:{id:"1",title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.Mode",dm:"模式-1"}),data:null}})),[]),[j,z]=(0,_e.useState)(F),H=(e,t)=>{const n=Object.assign({},j);n[t].data=e,z(n)},[W,G]=(0,_e.useState)((()=>[{title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ModeIntialpatterninfomapid",dm:"模式-{intialPatternInfoMapId}"},{intialPatternInfoMapId:F[1].id}),content:Ne().createElement(or,Object.assign({},F[1],{schemaEdgeMap:D,editPattern:()=>m(!0),importData:H})),key:F[1].id}]));(0,_e.useEffect)((()=>{const e={},t={};h.edges.forEach((t=>e[t.edgeType]=t)),h.nodes.forEach((e=>t[e.nodeType]=e));const n={};d.nodes.forEach((e=>{n[e.nodeType]=n[e.nodeType]||new Set,Object.keys(e.data).forEach((t=>n[e.nodeType].add(t)))}));const r=Object.keys(n).map((e=>{const t=hr(e,280,14);return{key:e,text:e,content:Ne().createElement(Me.Tooltip,{title:(null==t?void 0:t.includes("…"))?e:""},t)}})),o={};d.edges.forEach((t=>{const{edgeType:n}=t,r=e[n]||{},{sourceNodeType:i,targetNodeType:a}=r,s=`${i}${wn}${n}${wn}${a}`;o[s]=o[s]||new Set,Object.keys(t.data).forEach((e=>o[s].add(e)))}));const i=Object.keys(o).map((e=>{const[t,n,r]=e.split(wn),o=`${t} → ${r}`,i=hr(n,280,14),a=hr(o,280,14);return{key:e,typeName:n,sourceNodeType:t,targetNodeType:r,content:Ne().createElement(Me.Tooltip,{title:(null==i?void 0:i.includes("…"))||(null==a?void 0:a.includes("…"))?`${n} (${o})`:""},i,Ne().createElement("p",{className:"kg-node-importance-tip"},a))}}));P(e),B(t),L(n),O(o),N(r),R(i)}),[d]),(0,_e.useEffect)((()=>null==a?void 0:a(v)),[v]),(0,_e.useEffect)((()=>{const e=W.map((e=>{var t;return Object.assign(Object.assign({},e),{content:Ne().createElement(or,{id:e.key,data:null===(t=j[e.key])||void 0===t?void 0:t.data,schemaEdgeMap:D,editPattern:()=>m(!0),extractPattern:U,importData:H})})}));G(e)}),[j]),(0,_e.useEffect)((()=>{if(t){const e=`${gr+1}`;ee({key:e}),re(e,t.pattern),ne(t.pattern),null==r||r()}}),[t]),(0,_e.useEffect)((()=>{const e=e=>{const{item:t}=e;u.setItemState(t,xn.Active,!t.hasState(xn.Active))};return S?(u.on("edge:click",e),u.on("node:click",e)):(u.off("edge:click",e),u.off("node:click",e)),()=>{u.off("edge:click",e),u.off("node:click",e)}}),[S]);const U=sn((e=>{u&&!u.destroyed&&(vr={width:u.getWidth(),height:u.getHeight()},Me.message.info({key:fr,className:"kg-pattern-match-extract-tip-long",duration:0,content:Ne().createElement(Ne().Fragment,null,Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.TheCanvasIsInThe",dm:"画布处于选择状态，你可以通过【圈选】或【点选】子图，被选中的子图将被抽取为模式。【按住 W】 可拖拽画布"}),Ne().createElement(Me.Button,{onClick:$,style:{marginLeft:8},size:"small"},Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.Cancel",dm:"取消"})),Ne().createElement(Me.Button,{type:"primary",onClick:Y,style:{marginLeft:8},size:"small"},Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.Confirm",dm:"确认"}))),style:{marginTop:"20px"}}),u.setMode("pattern-match-lasso"),dr(u,u.getEdges(),[xn.Active]),dr(u,u.getNodes(),[xn.Active]),I(e),null==n||n(),null==s||s(!0),J(!0))})),V=()=>{u.setMode("default"),Me.message.destroy(fr),I(!1),null==r||r(),I(!1),null==s||s(!1),J(!1)},Y=sn((()=>{if(!u||u.destroyed)return void V();if(!S)return;const e=S,t=(u.findAllByState("node",xn.Active)||[]).map((e=>e.getID())),n=(u.findAllByState("edge",xn.Active)||[]).map((e=>e.getID()));if(!t.length)return;const r={nodes:d.nodes.filter((e=>t.includes(e.id))),edges:d.edges.filter((e=>n.includes(e.id)))},o={};if(cr(r,r.nodes[0].id,{enter:({current:e})=>{o[e]=!0}},!1),Object.keys(o).length<r.nodes.length)return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema",dm:"创建模式失败。模式必须是连通的"}));const i=Object.assign({},j),a={},s={nodes:[],edges:[]};r.nodes.forEach(((e,t)=>{const{id:n,nodeType:r}=e,o=ur();a[n]={id:o,nodeType:r},s.nodes.push({id:o,oriId:n,cluster:void 0,rules:void 0,nodeType:r,style:{label:{value:`${r}-${s.nodes.length}`}},originLabel:`${r}-${s.nodes.length}`,data:{id:o,nodeType:r}})}));let l=!1;for(let e=0;e<r.edges.length;e++){const t=r.edges[e],{id:n,source:o,target:i,edgeType:c}=t;if(!a[o]||!a[i]){l=!0;break}const{id:u,nodeType:d}=a[o],{id:h,nodeType:f}=a[i];s.edges.push({id:`${u}-${h}-${ur()}`,oriId:n,source:u,target:h,rules:[],type:u===h?"loop":"graphin-line",loopCfg:{position:"top",dist:u===h?25:20},style:{label:{value:`${c}-${s.edges.length}`}},label:`${c}-${s.edges.length}`,labelCfg:{autoRotate:!0},edgeType:c,sourceNodeType:d,targetNodeType:f})}l?Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.FailedToCreateTheSchema.1",dm:"创建模式失败。模式中不可以存在悬挂边"})):(i[e].data=s,z(i),V())})),$=()=>{if(I(!1),!u||u.destroyed)return;const e=u.findAllByState("node",xn.Active),t=u.findAllByState("node",xn.Active);(null==e?void 0:e.length)||(null==t?void 0:t.length)?ar({title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ConfirmToExitTheExtraction",dm:"确认退出抽取模式"}),icon:Ne().createElement(un,null),content:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.IfTheSelectedContentAlready",dm:"已有选中内容，退出将不会将使用选中内容作为模式。确认退出吗？"}),onOk(){dr(u,u.getEdges(),[xn.Active]),dr(u,u.getNodes(),[xn.Active]),u.setMode("default"),Me.message.destroy(fr),null==r||r(),V()}}):(u.setMode("default"),Me.message.destroy(fr),null==r||r(),V())},X=e=>{var t,n;if(!u||u.destroyed)return;const r="node"===(null===(n=null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t))?e.item.getID():void 0,o=u.getHulls();if(!o)return;const i=[];Object.keys(o).forEach((e=>{var t;const n=o[e];(void 0===r||(null===(t=null==n?void 0:n.members)||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.getID)||void 0===t?void 0:t.call(e))===r}))))&&i.push(e)})),i.forEach((e=>o[e].updateData(o[e].members,[])))},q=()=>{w((e=>{const t=u.get("hullMap")||{};return null==e||e.forEach((e=>{const n=u.getHullById(e);n&&u.removeHull(n),delete t[e]})),[]}))},K=e=>{const t=e.key;t&&(mr="w"===t.toLowerCase())},Z=e=>mr=!1;(0,_e.useEffect)((()=>{u&&!u.destroyed&&(dr(u,u.getEdges(),[xn.Active]),dr(u,u.getNodes(),[xn.Active]))}),[p]),(0,_e.useEffect)((()=>{if(Me.message.destroy(fr),u&&!u.destroyed)return u.addBehaviors([{type:"lasso-select",trigger:"drag",selectedState:xn.Active,shouldDeselect:()=>!1},"zoom-canvas",{type:"drag-canvas",shouldBegin:()=>mr}],"pattern-match-lasso"),u.on("afterupdateitem",X),u.on("afterlayout",X),u.on("graphin:datachange",q),u.on("node:toggleevent",q),u.on("sizechange",Q),u.on("keydown",K),u.on("keyup",Z),()=>{Me.message.destroy(fr),u&&!u.destroyed&&(J(!1),u.off("afterudpateitem",X),u.off("afterlayout",X),u.off("graphin:datachange",q),u.off("node:toggleevent",q),u.off("sizechange",Q),u.off("keydown",K),u.off("keyup",Z))}}),[]);const Q=({width:e,height:t})=>{vr={width:e,height:t},u.get("canvas").get("el").classList.contains(pr)?setTimeout((()=>{u.changeSize(e-32,t-32)}),151):e===u.getWidth()&&t===u.getHeight()||u.changeSize(e,t)},J=e=>{const t=u.get("canvas").get("el");if(e)u.changeSize(vr.width-32,vr.height-32),t.classList.add(pr);else{const{width:e,height:n}=vr;u.changeSize(e,n),t.classList.remove(pr)}},ee=(e=void 0)=>{var t;if(W.length>3)return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.FailedToAddModeThe",dm:"添加模式失败。模式数量已达上限！"}));gr+=1;const n=`${gr}`,r=[...W],o=Object.assign({},j);o[n]={id:n,title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ModeId",dm:"模式-{id}"},{id:n}),data:null},e&&(null===(t=j[e.key])||void 0===t?void 0:t.data)&&(o[n].data=(0,Oe.cloneDeep)(j[e.key].data)),r.push({content:Ne().createElement(or,{id:n,data:o[n],schemaEdgeMap:D,editPattern:()=>m(!0),importData:H}),title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ModeId",dm:"模式-{id}"},{id:n}),key:n}),G(r),z(o),g(n)},te=e=>{q();const t=[];e.forEach((e=>{var n;const r=ur();t.push(r),e.hullId=r,u.createHull({id:r,members:null===(n=e.nodes)||void 0===n?void 0:n.map((e=>e.id)),padding:10})})),w(t)},ne=e=>{return t=void 0,n=void 0,o=function*(){var t;if(!u||u.destroyed)return void oe({},!1,Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.TheGraphInstanceDoesNot",dm:"图实例不存在"}));if(!(e||p&&(null===(t=j[+p])||void 0===t?void 0:t.data)))return Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.TheNullPatternCannotBe",dm:"无法匹配空模式！"})),void oe({},!1,Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.TheNullPatternCannotBe",dm:"无法匹配空模式！"}));const n=j[+p].data,r=e||{nodes:n.nodes.map((e=>({id:e.id,label:e.nodeType,name:e.nodeType,rules:e.rules}))),edges:n.edges.map((e=>({id:e.id,label:e.edgeType,source:e.source,target:e.target,rules:e.rules})))},o={nodes:[],edges:[]};d.nodes.forEach((e=>{var t;(null===(t=u.findById(e.id))||void 0===t?void 0:t.isVisible())&&o.nodes.push({id:e.id,data:e.data,label:e.nodeType})})),d.edges.forEach((e=>{var t;(null===(t=u.findById(e.id))||void 0===t?void 0:t.isVisible())&&o.edges.push({id:e.id,data:e.data,source:e.source,target:e.target,label:e.edgeType})})),E(!0);let i=[];try{i=yield lr(o,r,!0,void 0,void 0,"label","label")}catch(e){console.warn("Pattern Matching Failed.",e)}if(!(null==i?void 0:i.length))return Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.NoMatchFound",dm:"没有找到匹配！"})),E(!1),te([]),C([]),void oe({pattern:r},!1,Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.NoMatchFound",dm:"没有找到匹配！"}));((e,t,n,r)=>{var o,i,a,s;const l={},c={};e.nodes.forEach((e=>{l[e.id]=e.label,c[e.id]=e}));const u=t.edges.length,d=t.nodes.length;for(let e=n.length-1;e>=0;e-=1){const h=n[e],f=h.nodes.length;let p=!0;for(let e=0;e<d;e+=1){const n=t.nodes[e];let r=!1;if(null===(o=n.rules)||void 0===o?void 0:o.length){for(let e=0;e<f;e+=1){const t=h.nodes[e];if(n.label!==t.label)continue;const o=(null===(i=c[t.id])||void 0===i?void 0:i.data)||t.data;if(t.data=o,!o&&(null===(a=n.rules)||void 0===a?void 0:a.length))continue;let s=!0;for(let e=0;e<n.rules.length;e+=1){const r=n.rules[e];let i=o[r.name];switch(r.name){case"id":i=t.id;break;case"label":i=t.label}switch(r.rule){case">":i<=r.value&&(s=!1);break;case"<":i>=r.value&&(s=!1);break;case"=":i!==r.value&&(s=!1);break;case"!=":i===r.value&&(s=!1);break;case"like":`${i}`.includes(r.value)||(s=!1);break;case"unlike":`${i}`.includes(r.value)&&(s=!1)}if(!s)break}if(s){r=!0;break}}if(!r){p=!1;break}}}if(!p){n.splice(e,1);continue}let g=!0;for(let e=0;e<u;e+=1){const n=t.edges[e];let o=!1;if(n.rules&&n.rules.length){for(let e=0;e<h.edges.length;e+=1){const t=h.edges[e];if(n.label!==t.label)continue;const i=n.sourceNodeType===l[t.source]&&n.targetNodeType===l[t.target],a=i||n.sourceNodeType===l[t.target]&&n.targetNodeType===l[t.source];if(r&&!i)continue;if(!r&&!a)continue;const c=null==t?void 0:t.data;if(!c&&(null===(s=n.rules)||void 0===s?void 0:s.length))continue;let u=!0;for(let e=0;e<n.rules.length;e+=1){const t=n.rules[e],r=c[t.name];switch(t.rule){case">":r<=t.value&&(u=!1);break;case"<":r>=t.value&&(u=!1);break;case"=":r!==t.value&&(u=!1);break;case"!=":r===t.value&&(u=!1);break;case"like":`${r}`.includes(t.value)||(u=!1);break;case"unlike":`${r}`.includes(t.value)&&(u=!1)}if(!u)break}if(u){o=!0;break}}if(!o){g=!1;break}}}g||n.splice(e,1)}})(o,r,i,!0),(null==i?void 0:i.length)||Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.NoMatchFound",dm:"没有找到匹配！"})),E(!1),te(i),C(i),oe({pattern:r})},new((r=void 0)||(r=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}l((o=o.apply(t,n||[])).next())}));var t,n,r,o},re=(e,t)=>{const n=Object.assign({},j);n[e]||(n[e]={id:e,title:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ModeId",dm:"模式-{id}"},{id:e})}),n[e].data=t,z(n)},oe=(e,t=!0,n)=>{var r,o;const{pattern:i}=e;i&&f({componentId:"PatternMatch",type:"analyse",subType:Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.PatternMatching",dm:"模式匹配"}),statement:`子图 ${null===(r=i.nodes)||void 0===r?void 0:r.length} 个节点，${null===(o=i.edges)||void 0===o?void 0:o.length} 条边`,success:t,errorMsg:n,params:{pattern:{nodes:i.nodes.map((e=>Object.assign({nodeType:e.label||e.name},e))),edges:i.edges.map((e=>Object.assign({edgeType:e.label},e)))}}})},ie=Ne().createElement(Me.Menu,{className:"kg-pattern-match-patten-tab-dropdown"},Ne().createElement(Me.Menu.Item,{key:"new",onClick:ee},Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.CreateMode",dm:"新建模式"})),null==W?void 0:W.map((e=>Ne().createElement(Me.Menu.Item,{key:e.key,onClick:()=>ee(e)},Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.CopyMode",dm:"复制模式-"}),e.key)))),[ae,se]=(0,_e.useState)();return(0,_e.useEffect)((()=>{const e=u.get("canvas").get("el").parentNode,t=document.createElement("div");return null==e||e.appendChild(t),se(t),()=>{var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}}),[]),Ne().createElement("div",{style:e},Ne().createElement("div",{className:"kg-pattern-match-content-wrapper"},Ne().createElement("div",{className:"kg-pattern-match-pattern-add-wrapper",style:{left:1===W.length?79:106+108*(W.length-1),display:W.length>3?"none":"block"}},Ne().createElement(Me.Dropdown,{overlay:ie,placement:"bottomCenter"},Ne().createElement("div",{className:"kg-pattern-match-pattern-add",onClick:ee},"+"))),Ne().createElement(Me.Tabs,{type:"editable-card",activeKey:`${p}`,onChange:g,onEdit:(e,t)=>{"remove"===t&&(e=>{let t,n=p;W.forEach(((n,r)=>{n.key===e&&(t=r-1)}));const r=W.filter((t=>t.key!==e));r.length&&n===e&&(n=t>=0?r[t].key:r[0].key);const o=Object.assign({},j);delete o[e],g(n),z(o),G(r)})(e)},hideAdd:!0,style:{marginTop:W.length>3?"-4px":"-40px"}},W.map((e=>Ne().createElement(sr,{tab:e.title,key:e.key,closable:W.length>1},e.content))))),Ne().createElement(Me.Row,{className:"button-wrapper",justify:"space-between"},Ne().createElement(Me.Col,{span:6},Ne().createElement(Me.Button,{className:"kg-pattern-match-apply-button",style:{display:S?"none":"inline-block"},type:"primary",loading:x,onClick:()=>ne()},Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.Match",dm:"匹配"}))),Ne().createElement(Me.Col,{span:6},(null===(i=j[+p])||void 0===i?void 0:i.data)?Ne().createElement(Me.Button,{className:"kg-pattern-match-export-button",style:Object.assign(Object.assign({},(null==c?void 0:c.style)||{}),{display:S?"none":"inline-block"}),loading:x,disabled:!!S,onClick:()=>{var e;if(!u||u.destroyed)return;if(!p||!(null===(e=j[+p])||void 0===e?void 0:e.data))return void Me.message.info(Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.TheNullPatternCannotBe",dm:"无法匹配空模式！"}));const t=j[+p].data,n={nodes:t.nodes.map((e=>(e.data.label=e.nodeType,e.data.rules=e.rules,e.data))),edges:t.edges.map((e=>(e.data.label=e.nodeType,e.data.rules=e.rules,e.data)))};null==l||l(n)}},(null==c?void 0:c.text)||Ye({id:"gi-assets-algorithm.src.PatternMatch.Component.ExportMode",dm:"导出模式"})):""),Ne().createElement(Me.Col,{span:4,offset:6},Ne().createElement(Me.Button,{className:"kg-pattern-match-reset-button",danger:!0,onClick:()=>{dr(u,u.getEdges(),[xn.Active]),dr(u,u.getNodes(),[xn.Active]),q(),C([])},icon:Ne().createElement(St.Z,null)}))),(null==y?void 0:y.length)&&!S?Ne().createElement(ir,{matches:y}):"",Ne().createElement(Qn,{visible:v,patternInfo:j[p],setVisible:m,savePattern:re,nodeProperties:T,edgeProperties:M,nodeTypes:_,edgeTypes:A,schemaNodeMap:k,schemaEdgeMap:D}))},registerMeta:()=>Object.assign({},In)},InfoDetection:Et}})(),u})()));